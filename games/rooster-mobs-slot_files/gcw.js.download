var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (this && this.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
var gcw;
(function (gcw) {
    var protocol;
    (function (protocol) {
        var MessageButtonCode = (function () {
            function MessageButtonCode() {
            }
            MessageButtonCode.FREE_ROUND_POSTPONE = "FREE_ROUND_POSTPONE";
            MessageButtonCode.FREE_ROUND_FORFEIT = "FREE_ROUND_FORFEIT";
            return MessageButtonCode;
        }());
        protocol.MessageButtonCode = MessageButtonCode;
    })(protocol = gcw.protocol || (gcw.protocol = {}));
})(gcw || (gcw = {}));
var gcw;
(function (gcw) {
    var protocol;
    (function (protocol) {
        var BrowserPlatform = (function () {
            function BrowserPlatform() {
            }
            BrowserPlatform.DESKTOP = "desktop";
            BrowserPlatform.MOBILE = "mobile";
            BrowserPlatform.MINIGAME = "minigame";
            return BrowserPlatform;
        }());
        protocol.BrowserPlatform = BrowserPlatform;
    })(protocol = gcw.protocol || (gcw.protocol = {}));
})(gcw || (gcw = {}));
var gcw;
(function (gcw) {
    var protocol;
    (function (protocol) {
        var GameMode = (function () {
            function GameMode() {
            }
            GameMode.CREDITS = "credits";
            GameMode.MONEY = "money";
            return GameMode;
        }());
        protocol.GameMode = GameMode;
    })(protocol = gcw.protocol || (gcw.protocol = {}));
})(gcw || (gcw = {}));
var gcw;
(function (gcw) {
    var protocol;
    (function (protocol) {
        var Resolution = (function () {
            function Resolution() {
            }
            Resolution._1080P = "1080p";
            Resolution._540P = "540p";
            return Resolution;
        }());
        protocol.Resolution = Resolution;
    })(protocol = gcw.protocol || (gcw.protocol = {}));
})(gcw || (gcw = {}));
var gcw;
(function (gcw) {
    var protocol;
    (function (protocol) {
        var GamePlayMode = (function () {
            function GamePlayMode() {
            }
            GamePlayMode.COIN_BASED = "COIN_BASED";
            GamePlayMode.BET_BASED = "BET_BASED";
            return GamePlayMode;
        }());
        protocol.GamePlayMode = GamePlayMode;
    })(protocol = gcw.protocol || (gcw.protocol = {}));
})(gcw || (gcw = {}));
var gcw;
(function (gcw) {
    var protocol;
    (function (protocol) {
        var LoggingLevel = (function () {
            function LoggingLevel() {
            }
            LoggingLevel.TRACE = "trace";
            LoggingLevel.DEBUG = "debug";
            LoggingLevel.INFO = "info";
            LoggingLevel.WARN = "warn";
            LoggingLevel.ERROR = "error";
            return LoggingLevel;
        }());
        protocol.LoggingLevel = LoggingLevel;
    })(protocol = gcw.protocol || (gcw.protocol = {}));
})(gcw || (gcw = {}));
var gcw;
(function (gcw) {
    var api;
    (function (api) {
        var GameEventType = (function () {
            function GameEventType() {
            }
            GameEventType.INITIALIZE = 'INITIALIZE';
            GameEventType.INITIALIZE_SUCCESS = 'INITIALIZE_SUCCESS';
            GameEventType.INITIALIZE_FAILURE = 'INITIALIZE_FAILURE';
            GameEventType.START = 'START';
            GameEventType.START_SUCCESS = 'START_SUCCESS';
            GameEventType.START_FAILURE = 'START_FAILURE';
            GameEventType.STOP = 'STOP';
            GameEventType.STOP_SUCCESS = 'STOP_SUCCESS';
            GameEventType.STOP_FAILURE = 'STOP_FAILURE';
            GameEventType.TERMINATE = 'TERMINATE';
            GameEventType.TERMINATE_SUCCESS = 'TERMINATE_SUCCESS';
            GameEventType.TERMINATE_FAILURE = 'TERMINATE_FAILURE';
            GameEventType.HOME = 'HOME';
            GameEventType.REGISTER = 'REGISTER';
            GameEventType.CASHIER = 'CASHIER';
            GameEventType.JACKPOT = 'JACKPOT';
            GameEventType.BIG_WIN = 'BIG_WIN';
            GameEventType.MEGA_WIN = 'MEGA_WIN';
            GameEventType.BONUS_CONVERT = 'BONUS_CONVERT';
            GameEventType.OUT_OF_MONEY = 'OUT_OF_MONEY';
            GameEventType.NGS_REQUEST = 'NGS_REQUEST';
            GameEventType.NGS_RESPONSE = 'NGS_RESPONSE';
            GameEventType.NGS_ERROR = 'NGS_ERROR';
            GameEventType.NGS_HEARTBEAT_ERROR = 'NGS_HEARTBEAT_ERROR';
            GameEventType.NGS_LOG_REQUEST = 'NGS_LOG_REQUEST';
            GameEventType.REALITY_CHECK_CHOICE = 'REALITY_CHECK_CHOICE';
            GameEventType.FREE_ROUND_POSTPONE = 'FREE_ROUND_POSTPONE';
            GameEventType.FREE_ROUNDS_ACCEPTED = 'FREE_ROUNDS_ACCEPTED';
            GameEventType.FREE_ROUNDS_CONFIG = 'FREE_ROUNDS_CONFIG';
            GameEventType.FREE_ROUNDS_COMPLETED = 'FREE_ROUNDS_COMPLETED';
            GameEventType.SPIN_TO_WIN_COMPLETED = 'SPIN_TO_WIN_COMPLETED';
            GameEventType.SPIN_ENABLED_INITIALLY = 'SPIN_ENABLED_INITIALLY';
            GameEventType.BET_ENABLED_INITIALLY = 'BET_ENABLED_INITIALLY';
            GameEventType.SUPER_WHEEL_BET_CHANGED = 'SUPER_WHEEL_BET_CHANGED';
            GameEventType.PRELOADING_START = 'PRELOADING_START';
            GameEventType.PRELOADING_PROGRESS = 'PRELOADING_PROGRESS';
            GameEventType.PRELOADING_END = 'PRELOADING_END';
            GameEventType.PLATFORM_DETECTED = 'PLATFORM_DETECTED';
            GameEventType.LOBBY_ACTIVE = 'LOBBY_ACTIVE';
            GameEventType.VERSION = 'VERSION';
            GameEventType.VERSION_RESPONSE = 'VERSION_RESPONSE';
            GameEventType.CURRENCY_FORMATTING = 'CURRENCY_FORMATTING';
            GameEventType.CURRENCY_FORMATTING_RESPONSE = 'CURRENCY_FORMATTING_RESPONSE';
            GameEventType.MUSIC_ACTIVE = 'MUSIC_ACTIVE';
            GameEventType.SOUND_EFFECTS_ACTIVE = 'SOUND_EFFECTS_ACTIVE';
            GameEventType.GENERAL_SOUND_STATUS_CHANGED = 'GENERAL_SOUND_STATUS_CHANGED';
            GameEventType.MUSIC_STATUS_CHANGED = 'MUSIC_STATUS_CHANGED';
            GameEventType.SOUND_EFFECTS_STATUS_CHANGED = 'SOUND_EFFECTS_STATUS_CHANGED';
            GameEventType.GENERAL_SOUND_STATUS_CHANGE = 'GENERAL_SOUND_STATUS_CHANGE';
            GameEventType.MUSIC_STATUS_CHANGE = 'MUSIC_STATUS_CHANGE';
            GameEventType.SOUND_EFFECTS_STATUS_CHANGE = 'SOUND_EFFECTS_STATUS_CHANGE';
            GameEventType.CONTROL_PANEL_STATUS_CHANGED = 'CONTROL_PANEL_STATUS_CHANGED';
            GameEventType.ABOUT_STATUS_CHANGED = 'ABOUT_STATUS_CHANGED';
            GameEventType.PAY_TABLE_STATUS_CHANGED = 'PAY_TABLE_STATUS_CHANGED';
            GameEventType.CONTROL_PANEL_STATUS_CHANGE = 'CONTROL_PANEL_STATUS_CHANGE';
            GameEventType.ABOUT_STATUS_CHANGE = 'ABOUT_STATUS_CHANGE';
            GameEventType.PAY_TABLE_STATUS_CHANGE = 'PAY_TABLE_STATUS_CHANGE';
            GameEventType.WALLET_UPDATED = 'WALLET_UPDATED';
            GameEventType.WALLET_UPDATE = 'WALLET_UPDATE';
            GameEventType.ROUND_START = 'ROUND_START';
            GameEventType.ROUND_ID = 'ROUND_ID';
            GameEventType.ROUND_END = 'ROUND_END';
            GameEventType.TOTAL_WIN_UPDATE = 'TOTAL_WIN_UPDATE';
            GameEventType.TOTAL_BET_UPDATE = 'TOTAL_BET_UPDATE';
            GameEventType.BASE_BET_UPDATED = 'BASE_BET_UPDATED';
            GameEventType.RESULTS_SHOWN = 'RESULTS_SHOWN';
            GameEventType.HEARTBEAT_REQUEST = 'HEARTBEAT_REQUEST';
            GameEventType.HEARTBEAT_RESPONSE = 'HEARTBEAT_RESPONSE';
            GameEventType.ERROR = 'ERROR';
            GameEventType.ERROR_HANDLED = 'ERROR_HANDLED';
            GameEventType.ERROR_NOT_HANDLED = 'ERROR_NOT_HANDLED';
            GameEventType.AUTOPLAY_ACTIVATE = 'AUTOPLAY_ACTIVATE';
            GameEventType.AUTOPLAY_ACTIVATE_SUCCESS = 'AUTOPLAY_ACTIVATE_SUCCESS';
            GameEventType.AUTOPLAY_ACTIVATE_FAILURE = 'AUTOPLAY_ACTIVATE_FAILURE';
            GameEventType.AUTOPLAY_DEACTIVATE = 'AUTOPLAY_DEACTIVATE';
            GameEventType.STOP_AUTOPLAY = 'STOP_AUTOPLAY';
            GameEventType.AUTOPLAY_LIMIT_REACHED = 'AUTOPLAY_LIMIT_REACHED';
            GameEventType.AUTOPLAY_CUSTOM_FEATURE = 'AUTOPLAY_CUSTOM_FEATURE';
            GameEventType.AUTOPLAY_CUSTOM_FEATURE_SETTINGS = 'AUTOPLAY_CUSTOM_FEATURE_SETTINGS';
            GameEventType.ROUND_REQUEST = 'ROUND_REQUEST';
            GameEventType.ROUND_REQUEST_CONFIRMED = 'ROUND_REQUEST_CONFIRMED';
            GameEventType.GUI_BLOCKED = 'GUI_BLOCKED';
            GameEventType.GUI_BLOCKED_RESPONSE = 'GUI_BLOCKED_RESPONSE';
            GameEventType.FULLSCREEN_MODE_ON = 'FULLSCREEN_MODE_ON';
            GameEventType.FULLSCREEN_MODE_OFF = 'FULLSCREEN_MODE_OFF';
            GameEventType.FULLSCREEN_MODE_HANDLED = 'FULLSCREEN_MODE_HANDLED';
            GameEventType.FULLSCREEN_MODE_NOT_HANDLED = 'FULLSCREEN_MODE_NOT_HANDLED';
            GameEventType.COMPLIANCE_MODE = 'COMPLIANCE_MODE';
            GameEventType.INSUFFICIENT_FUNDS = 'INSUFFICIENT_FUNDS';
            GameEventType.SAVE_SUPER_WHEEL_POPUP = 'SAVE_SUPER_WHEEL_POPUP';
            GameEventType.SAVE_CONFIG_PARAM = 'SAVE_CONFIG_PARAM';
            GameEventType.ON_BUTTON_CLICKED = 'ON_BUTTON_CLICKED';
            GameEventType.GET_INIT_RESPONSE = 'GET_INIT_RESPONSE';
            GameEventType.SUPER_WHEEL_ROUND_STARTING = 'SUPER_WHEEL_ROUND_STARTING';
            GameEventType.SUPER_WHEEL_STARTING_DETECTED = 'SUPER_WHEEL_STARTING_DETECTED';
            return GameEventType;
        }());
        api.GameEventType = GameEventType;
        var ErrorCode = (function () {
            function ErrorCode() {
            }
            ErrorCode.hasErrorCode = function (code) {
                return ErrorCode.errors.indexOf(code) > -1;
            };
            ErrorCode.isFatal = function (code) {
                switch (code) {
                    case ErrorCode.INVALID_PHASE:
                        return true;
                    case ErrorCode.CONNECTION_LOST:
                        return false;
                    case ErrorCode.FAILED_TO_LOAD_ASSETS:
                        return false;
                    case ErrorCode.UNSUPPORTED_BROWSER:
                        return true;
                    case ErrorCode.UNKNOWN:
                        return true;
                    default:
                        return true;
                }
            };
            ErrorCode.INVALID_PHASE = 'INVALID_PHASE';
            ErrorCode.CONNECTION_LOST = 'CONNECTION_LOST';
            ErrorCode.FAILED_TO_LOAD_ASSETS = 'FAILED_TO_LOAD_ASSETS';
            ErrorCode.UNSUPPORTED_BROWSER = 'UNSUPPORTED_BROWSER';
            ErrorCode.UNKNOWN = 'UNKNOWN';
            ErrorCode.errors = [
                ErrorCode.INVALID_PHASE,
                ErrorCode.CONNECTION_LOST,
                ErrorCode.FAILED_TO_LOAD_ASSETS,
                ErrorCode.UNSUPPORTED_BROWSER,
                ErrorCode.UNKNOWN,
            ];
            return ErrorCode;
        }());
        api.ErrorCode = ErrorCode;
    })(api = gcw.api || (gcw.api = {}));
})(gcw || (gcw = {}));
var gcw;
(function (gcw) {
    var properties;
    (function (properties) {
        properties.version = '1.13.145';
        properties.suppressObfuscation = true;
    })(properties = gcw.properties || (gcw.properties = {}));
})(gcw || (gcw = {}));
var gcw;
(function (gcw) {
    var obfuscation;
    (function (obfuscation) {
        var Translator = (function () {
            function Translator() {
            }
            Translator.prototype.transcode = function (message) {
                var key = this.stringToArray("usKlC3Sv33dRuqxS");
                var enc = [];
                for (var i = 0; i < message.length; i++) {
                    var b = message[i] ^ key[i % key.length];
                    enc.push(b);
                }
                return enc;
            };
            Translator.prototype.stringToArray = function (str) {
                var arr = [];
                for (var i = 0; i < str.length; i++) {
                    arr.push(str.charCodeAt(i));
                }
                return arr;
            };
            return Translator;
        }());
        obfuscation.Translator = Translator;
    })(obfuscation = gcw.obfuscation || (gcw.obfuscation = {}));
})(gcw || (gcw = {}));
var gcw;
(function (gcw) {
    var http;
    (function (http) {
        var HttpRequest = (function () {
            function HttpRequest() {
                this._onError = function (err) {
                };
                this._onResponse = function (data) {
                };
                this._async = true;
            }
            HttpRequest.prototype.url = function (url) {
                this._url = url;
                return this;
            };
            HttpRequest.prototype.method = function (method) {
                this._method = method;
                return this;
            };
            HttpRequest.prototype.onError = function (onError) {
                this._onError = onError;
                return this;
            };
            HttpRequest.prototype.onResponse = function (onResponse) {
                this._onResponse = onResponse;
                return this;
            };
            HttpRequest.prototype.async = function (async) {
                this._async = async;
                return this;
            };
            HttpRequest.prototype.send = function (data) {
                this.sendWithCallbacks(this._onResponse, this._onError, data);
            };
            HttpRequest.prototype.sendWithCallbacks = function (onResponse, onError, data) {
                var _this = this;
                var httpRequest = new XMLHttpRequest();
                httpRequest.open(this._method, this._url, this._async);
                if (gcw.properties.suppressObfuscation) {
                    httpRequest.setRequestHeader('Content-Type', 'text/json');
                }
                else {
                    httpRequest.responseType = 'arraybuffer';
                    httpRequest.setRequestHeader('Content-Type', 'application/octet-stream');
                }
                var self = this;
                if (this._async) {
                    httpRequest.onreadystatechange = function (e) {
                        if (httpRequest.readyState == 4) {
                            if (httpRequest.status == 200) {
                                var data_1 = self.getResponse(httpRequest);
                                if (minSpinDuration != null && _this.isSpinEvent(data_1)) {
                                    window.setTimeout(function () { onResponse(data_1); }, minSpinDuration);
                                }
                                else {
                                    onResponse(data_1);
                                }
                            }
                            else {
                                onError(e);
                            }
                        }
                    };
                    if (data) {
                        httpRequest.send(this.createRequestData(data));
                    }
                    else {
                        httpRequest.send();
                    }
                }
                else {
                    httpRequest.onerror = function (e) {
                        onError(e);
                    };
                    if (data) {
                        httpRequest.send(this.createRequestData(data));
                    }
                    else {
                        httpRequest.send();
                    }
                    return this.getResponse(httpRequest);
                }
            };
            HttpRequest.prototype.isSpinEvent = function (data) {
                if (data != null && data.game != null && data.game.events != null && data.game.gameStepNo != null && data.game.gameStepNo > 0) {
                    for (var i = 0; i < data.game.events.length; i++) {
                        if (data.game.events[i].type != null && data.game.events[i].type === "evt_spin_enter") {
                            return true;
                        }
                    }
                }
                return false;
            };
            HttpRequest.prototype.createRequestData = function (data) {
                if (gcw.properties.suppressObfuscation) {
                    return JSON.stringify(data);
                }
                else {
                    var json = JSON.stringify(data);
                    var dataArray = this.stringToArray(json);
                    var dataArrayEncoded = this.transcode(dataArray);
                    return new Int8Array(dataArrayEncoded);
                }
            };
            HttpRequest.prototype.getResponse = function (httpRequest) {
                if (gcw.properties.suppressObfuscation) {
                    return JSON.parse(httpRequest.responseText);
                }
                else {
                    var encodedJsonArray = new Uint8Array(httpRequest.response);
                    var jsonArray = this.transcode(encodedJsonArray);
                    var json = this.arrayToString(jsonArray);
                    return JSON.parse(json);
                }
            };
            HttpRequest.prototype.transcode = function (msg) {
                if (gcw.properties.suppressObfuscation) {
                    return msg;
                }
                else {
                    return new gcw.obfuscation.Translator().transcode(msg);
                }
            };
            HttpRequest.prototype.arrayToString = function (array) {
                var str = '';
                for (var i = 0; i < array.length; i++) {
                    str += '%' + ('0' + array[i].toString(16)).slice(-2);
                }
                return decodeURIComponent(str);
            };
            HttpRequest.prototype.stringToArray = function (str) {
                var arr = [];
                for (var i = 0; i < str.length; i++) {
                    arr.push(str.charCodeAt(i));
                }
                return arr;
            };
            HttpRequest.prototype.decodeUint8array = function (uint8array) {
                return String.fromCharCode.apply(null, uint8array);
            };
            return HttpRequest;
        }());
        http.HttpRequest = HttpRequest;
    })(http = gcw.http || (gcw.http = {}));
})(gcw || (gcw = {}));
var gcw;
(function (gcw) {
    var ngs;
    (function (ngs) {
        var NgsClient = (function () {
            function NgsClient(data) {
                var _this = this;
                this._isInitialized = false;
                this._heartBeat = 15;
                this._requestInProgress = false;
                this._requestIdCounter = 0;
                this._unsentRequest = null;
                this._responseErrorCounter = 0;
                this.isReplay = false;
                this._onHeartBeat = function () {
                    var emptyRequest = {
                        date: new Date().toISOString(),
                        game: {},
                        skipBalanceCall: true
                    };
                    _this._sendNonSequentialRequestAndForget(emptyRequest);
                };
                this._onResponseErrorWithRepeat = function (err) {
                    if (_this._isInitialized && _this._responseErrorCounter < 5) {
                        console.debug('HttpConnection resending failed request' +
                            ' (' + _this._responseErrorCounter + ")");
                        _this._responseErrorCounter++;
                        setTimeout(function () {
                            _this._httpConnection.sendWithCallbacks(_this._onResponse, _this._onResponseErrorWithRepeat, _this._unsentRequest);
                        }, [500, 1000, 2000, 5000, 10000][_this._responseErrorCounter - 1]);
                    }
                    else {
                        console.debug('HttpConnection resend request failed');
                        _this._responseErrorCounter = 0;
                        _this._unsentRequest = null;
                        _this._onResponseError(err);
                    }
                };
                this._onResponse = function (response) {
                    console.debug('HttpConnection response: ', response);
                    _this._responseErrorCounter = 0;
                    _this._requestIdCounter = response.id;
                    _this._requestInProgress = false;
                    _this._onConnectionResponse(response);
                    _this._setHeartBeatTimeout();
                };
                this._onResponseError = function (err) {
                    console.debug('HttpConnection error: ' + err);
                    _this._onConnectionError(new Error('Client request error: ' + err));
                    _this._requestInProgress = false;
                    _this._setHeartBeatTimeout();
                };
                this._onNonSequentialResponse = function (response) {
                    if (_this._requestInProgress == false) {
                        _this._onConnectionResponse(response);
                        console.debug('HttpConnection heartbeat response: ', response);
                        _this._setHeartBeatTimeout();
                    }
                    else {
                    }
                };
                this._ignoreResponse = function (response) {
                    console.info('Ignoring response: ' + response);
                    _this._setHeartBeatTimeout();
                };
                this._onNonSequentialResponseError = function (err) {
                    console.error('HttpConnection heartbeat error: ' + err);
                    if (_this._onHeartbeatError) {
                        _this._onHeartbeatError();
                    }
                    _this._setHeartBeatTimeout();
                };
                this._url = data.gameSessionUrl;
                this._httpConnection = new gcw.http.HttpRequest()
                    .url(data.gameSessionUrl).method('POST');
                if (data.replayConf) {
                    this.isReplay = true;
                }
            }
            NgsClient.prototype.getUrl = function () {
                return this._url;
            };
            NgsClient.prototype.setUrl = function (url) {
                this._url = url;
                this._httpConnection.url(url);
                return this;
            };
            NgsClient.prototype.getHeartBeat = function () {
                return this._heartBeat;
            };
            NgsClient.prototype.setHeartBeat = function (value) {
                this._heartBeat = value;
                return this;
            };
            NgsClient.prototype.onResponse = function (onResponse) {
                if (typeof onResponse == 'function') {
                    this._onConnectionResponse = onResponse;
                }
                return this;
            };
            NgsClient.prototype.onError = function (onError) {
                if (typeof onError == 'function') {
                    this._onConnectionError = onError;
                }
                return this;
            };
            NgsClient.prototype.onHeartbeatError = function (callback) {
                this._onHeartbeatError = callback;
                return this;
            };
            NgsClient.prototype.start = function () {
                console.debug('HttpConnection start');
                this._isInitialized = true;
                this._setHeartBeatTimeout();
                return this;
            };
            NgsClient.prototype.stop = function () {
                console.debug('HttpConnection stop');
                this._isInitialized = false;
                this._clearHeartBeatTimeout();
                return this;
            };
            NgsClient.prototype.send = function (request) {
                if (this._isInitialized == true) {
                    this._clearHeartBeatTimeout();
                    if (typeof request.id == 'number') {
                        this._sendSequentialRequest(request);
                    }
                    else {
                        request.skipBalanceCall = true;
                        this._sendNonSequentialRequest(request);
                    }
                }
                else {
                    var message = 'Communication not initialized';
                    console.warn(message);
                    this._onConnectionError(new Error(message));
                }
                return this;
            };
            NgsClient.prototype._setHeartBeatTimeout = function () {
                if (!this.isReplay) {
                    this._clearHeartBeatTimeout();
                    var timeout = this._heartBeat * 1000;
                    this._heartBeatTimeout = setTimeout(this._onHeartBeat, timeout);
                }
            };
            NgsClient.prototype._clearHeartBeatTimeout = function () {
                if (!this.isReplay) {
                    clearTimeout(this._heartBeatTimeout);
                }
            };
            NgsClient.prototype._sendSequentialRequest = function (request) {
                this._requestInProgress = true;
                console.debug('HttpConnection request: ', request);
                this._unsentRequest = request;
                this._httpConnection.sendWithCallbacks(this._onResponse, this._onResponseErrorWithRepeat, request);
            };
            NgsClient.prototype._sendNonSequentialRequestAndForget = function (request) {
                console.debug('HttpConnection heart beat request');
                var self = this;
                this._httpConnection.sendWithCallbacks(function (response) { return self._onHeartbeatResponse(response); }, this._onNonSequentialResponseError, request);
            };
            NgsClient.prototype.sendHeartBeat = function (callback) {
                var emptyRequest = {
                    date: new Date().toISOString(),
                    game: {}
                };
                console.debug('HttpConnection heart beat requested by client.');
                this._httpConnection.sendWithCallbacks(callback, this._onNonSequentialResponseError, emptyRequest);
            };
            NgsClient.prototype._sendNonSequentialRequest = function (request) {
                console.debug('HttpConnection heart beat request');
                this._httpConnection.sendWithCallbacks(this._onNonSequentialResponse, this._onNonSequentialResponseError, request);
            };
            NgsClient.prototype._onHeartbeatResponse = function (response) {
                if (response.status.code == 'GAME_SESSION_CLOSED') {
                    console.warn('Game session already closed, disabling heart beat requests.');
                    this._clearHeartBeatTimeout();
                }
                else {
                    this._ignoreResponse(response);
                }
            };
            ;
            return NgsClient;
        }());
        ngs.NgsClient = NgsClient;
    })(ngs = gcw.ngs || (gcw.ngs = {}));
})(gcw || (gcw = {}));
var gcw;
(function (gcw) {
    var adapter;
    (function (adapter) {
        var gmapi;
        (function (gmapi) {
            var GameEventType = gcw.api.GameEventType;
            var Publications = (function () {
                function Publications() {
                }
                Publications.PRELOADING_STARTED = 'PRELOADING_STARTED';
                Publications.PRELOADING_PROGRESS_UPDATED = 'PRELOADING_PROGRESS_UPDATED';
                Publications.PRELOADING_ENDED = 'PRELOADING_ENDED';
                Publications.GAME_VERSION_UPDATE = 'GAME_VERSION_UPDATE';
                Publications.GENERAL_SOUND_STATUS_CHANGED = 'GENERAL_SOUND_STATUS_CHANGED';
                Publications.MUSIC_STATUS_CHANGED = 'MUSIC_STATUS_CHANGED';
                Publications.SOUND_EFFECTS_STATUS_CHANGED = 'SOUND_EFFECTS_STATUS_CHANGED';
                Publications.GENERAL_SOUND_STATUS_CHANGED_GAME = 'GENERAL_SOUND_STATUS_CHANGED_GAME';
                Publications.MUSIC_STATUS_CHANGED_GAME = 'MUSIC_STATUS_CHANGED_GAME';
                Publications.SOUND_EFFECTS_STATUS_CHANGED_GAME = 'SOUND_EFFECTS_STATUS_CHANGED_GAME';
                Publications.CONTROL_PANEL_STATUS_CHANGED = 'CONTROL_PANEL_STATUS_CHANGED';
                Publications.ABOUT_GAME_STATUS_CHANGED = 'ABOUT_GAME_STATUS_CHANGED';
                Publications.PAY_TABLE_STATUS_CHANGED = 'PAY_TABLE_STATUS_CHANGED';
                Publications.CONTROL_PANEL_STATUS_CHANGED_GAME = 'CONTROL_PANEL_STATUS_CHANGED_GAME';
                Publications.ABOUT_GAME_STATUS_CHANGED_GAME = 'ABOUT_GAME_STATUS_CHANGED_GAME';
                Publications.PAY_TABLE_STATUS_CHANGED_GAME = 'PAY_TABLE_STATUS_CHANGED_GAME';
                Publications.BALANCE_UPDATED = 'BALANCE_UPDATED';
                Publications.BALANCE_UPDATED_GAME = 'BALANCE_UPDATED_GAME';
                Publications.GAME_STATUS_CHANGED = 'GAME_STATUS_CHANGED';
                Publications.SESSION_DATA_UPDATED = 'SESSION_DATA_UPDATED';
                Publications.INITIALIZED = 'INITIALIZED';
                Publications.INITIALIZED_CONFIRMED = 'INITIALIZED_CONFIRMED';
                Publications.JACKPOT_UPDATED = 'JACKPOT_UPDATED';
                Publications.TOTALWIN_UPDATED = 'TOTALWIN_UPDATED';
                Publications.TOTALBET_UPDATED = 'TOTALBET_UPDATED';
                Publications.GAME_RESULTS_SHOWN = 'GAME_RESULTS_SHOWN';
                Publications.ERROR_HANDLED = 'ERROR_HANDLED';
                Publications.ERROR_OCCURRED = 'ERROR_OCCURRED';
                Publications.DISPOSE_APPLICATION = 'DISPOSE_APPLICATION';
                Publications.GAME_BLOCKED_GUI = 'GAME_BLOCKED_GUI';
                Publications.GAME_LOADER_READY = 'GAME_LOADER_READY';
                Publications.GAME_READY_FOR_UNLOAD = 'GAME_READY_FOR_UNLOAD';
                Publications.AUTOPLAY = 'AUTOPLAY';
                Publications.GAME_RESULTS_LOOP_SHOWN = 'GAME_RESULTS_LOOP_SHOWN';
                Publications.GAME_UPDATED_DEBUG_OPTION_HISTORY = 'GAME_UPDATED_DEBUG_OPTION_HISTORY';
                Publications.GAME_UPDATED_PLAY_ID = 'GAME_UPDATED_PLAY_ID';
                Publications.AUTOPLAY_ACTIVATED_GAME = 'AUTOPLAY_ACTIVATED_GAME';
                Publications.AUTOPLAY_ACTIVATED_CONFIRMATION = 'AUTOPLAY_ACTIVATED_CONFIRMATION';
                Publications.AUTOPLAY_ACTIVATED_CANCELLATION = 'AUTOPLAY_ACTIVATED_CANCELLATION';
                Publications.AUTOPLAY_CANCELLED = 'AUTOPLAY_CANCELLED';
                Publications.AUTOPLAY_LIMIT_REACHED = 'AUTOPLAY_LIMIT_REACHED';
                Publications.AUTOPLAY_CUSTOM_FEATURE_IN_GAME = 'AUTOPLAY_CUSTOM_FEATURE';
                Publications.AUTOPLAY_CUSTOM_FEATURE_SETTINGS = 'AUTOPLAY_CUSTOM_FEATURE_SETTINGS';
                Publications.PLAY_REQUEST = 'PLAY_REQUEST';
                Publications.PLAY_CONFIRMED = 'PLAY_CONFIRMED';
                Publications.FULLSCREEN_MODE_ON = 'FULLSCREEN_MODE_ON';
                Publications.FULLSCREEN_MODE_OFF = 'FULLSCREEN_MODE_OFF';
                Publications.FULLSCREEN_MODE_CHANGED = 'FULLSCREEN_MODE_CHANGED';
                Publications.BROWSER_ORIENTATION_CHANGED = 'BROWSER_ORIENTATION_CHANGED';
                Publications.BROWSER_RESIZED = 'BROWSER_RESIZED';
                Publications.GOTO_LOBBY = 'GOTO_LOBBY';
                Publications.PLAYBET_UPDATED = 'PLAYBET_UPDATED';
                Publications.PLAYWIN_UPDATED = 'PLAYWIN_UPDATED';
                Publications.PROMOTION_ACTIVE_PLAYS_DONE = 'PROMOTION_ACTIVE_PLAYS_DONE';
                Publications.PROMOTION_ACTIVE_PLAYS_REMAINING = 'PROMOTION_ACTIVE_PLAYS_REMAINING';
                Publications.PROMOTION_ACTIVE_UPDATED = 'PROMOTION_ACTIVE_UPDATED';
                Publications.PROMOTION_CANCELLED = 'PROMOTION_CANCELLED';
                Publications.PROMOTION_ACTIVE_WON_SO_FAR = 'PROMOTION_ACTIVE_WON_SO_FAR';
                Publications.PROMOTION_FREE_PLAYS_REMAINING_UPDATED = 'PROMOTION_FREE_PLAYS_REMAINING_UPDATED';
                Publications.PROMOTION_SET_DATA = 'PROMOTION_SET_DATA';
                Publications.PROMOTION_UPDATE_DATA = 'PROMOTION_UPDATE_DATA';
                Publications.SLOT_CONTROL_MODE_CHANGED = 'SLOT_CONTROL_MODE_CHANGED';
                Publications.TOTALBET_BYPASS_CHECK = 'TOTALBET_BYPASS_CHECK';
                Publications.UPDATE_CURRENCY_GAME = 'UPDATE_CURRENCY_GAME';
                Publications.WILL_CLOSING_GAME_GENERATE_UNFINISH_GAME = 'WILL_CLOSING_GAME_GENERATE_UNFINISH_GAME';
                Publications.WINDOW_SET_TITLE = 'WINDOW_SET_TITLE';
                Publications.GAME_PAUSE = 'GAME_PAUSE';
                Publications.GAME_RESUME = 'GAME_RESUME';
                Publications.INSUFFICIENT_FUNDS = 'INSUFFICIENT_FUNDS';
                Publications.CASHIER = 'CASHIER';
                Publications.ROUND_START = 'ROUND_START';
                Publications.ROUND_END = 'ROUND_END';
                Publications.START_SUCCESS = 'START_SUCCESS';
                Publications.STOP_AUTO_PLAY = 'STOP_AUTO_PLAY';
                Publications.BLOCK_BETS = 'BLOCK_BETS';
                Publications.UNBLOCK_BETS = 'UNBLOCK_BETS';
                Publications.GAME_READY = 'GAME_READY';
                return Publications;
            }());
            gmapi.Publications = Publications;
            var DefaultGmApi = (function () {
                function DefaultGmApi(realityCheck, initConf) {
                    this.initialized = true;
                    this.publications = Publications;
                    this.gameStates = {
                        INITIALIZE: 'INITIALIZE',
                        OPEN_PLAY: 'OPEN_PLAY',
                        SETTLE_PLAY: 'SETTLE_PLAY',
                    };
                    this.apiGameStates = {
                        READY: 'READY',
                        GAME_IN_PROGRESS: 'GAME_IN_PROGRESS',
                        SOFT_GAME_IN_PROGRESS: 'SOFT_GAME_IN_PROGRESS',
                        OVERLAY_SHOWN: 'OVERLAY_SHOWN',
                    };
                    this.playId = '';
                    this.guiBlocked = false;
                    this.lobbyActive = true;
                    this.musicActive = true;
                    this.sfxActive = true;
                    this.complianceMode = { UKGC: false };
                    this.gameOptions = {};
                    this._callbacks = {};
                    this._shouldShowMessage = false;
                    this._roundRequested = false;
                    this._realityCheck = realityCheck;
                    if (this._realityCheck) {
                        this._rcRemainingTime =
                            this._realityCheck.interval - this._realityCheck.usedTime;
                    }
                    if (initConf.ukgc) {
                        this.complianceMode.UKGC = initConf.ukgc;
                    }
                }
                DefaultGmApi.prototype.init = function () {
                    window.addEventListener('message', this.receiveFrameMessage.bind(this), false);
                };
                DefaultGmApi.prototype.receiveFrameMessage = function (event) {
                    var message = event.data;
                    console.log('GCW GM API - received frame message: ' + message.type);
                    this._publishEvent(message.type, { data: message.data });
                };
                DefaultGmApi.prototype.setRealityCheckTimer = function () {
                    var self = this;
                    setTimeout(function () {
                        if (self.currentApiState === self.apiGameStates.OVERLAY_SHOWN) {
                            console.log('Timer for showing reality check went out, but reality check is shown right now.');
                        }
                        else if (self.currentApiState === self.apiGameStates.GAME_IN_PROGRESS ||
                            self.currentApiState === self.apiGameStates.SOFT_GAME_IN_PROGRESS) {
                            self._shouldShowMessage = true;
                        }
                        else if (self.currentApiState === self.apiGameStates.READY) {
                            self.showRealityCheckMessage(self._realityCheck);
                        }
                        self._rcRemainingTime = self._realityCheck.interval;
                        self.setRealityCheckTimer();
                    }, self._rcRemainingTime * 1000);
                };
                DefaultGmApi.prototype.showRealityCheckMessage = function (rc) {
                    if (!rc) {
                        return;
                    }
                    console.log('Showing RC message: ', rc);
                    var self = this;
                    self.currentApiState = self.apiGameStates.OVERLAY_SHOWN;
                    self._shouldShowMessage = false;
                    var modal = document.getElementById('gcw-message-dlg');
                    modal.style.display = 'block';
                    var messageField = document.getElementById('gcw-message-placeholder');
                    var historyLink = document.getElementById('gcw-message-history');
                    var continueBtn = document.getElementById('gcw-message-dlg-close');
                    var exitBtn = document.getElementById('gcw-message-dlg-exit');
                    messageField.innerHTML = rc.message;
                    if (rc.historyUrlText) {
                        historyLink.innerHTML = rc.historyUrlText;
                        historyLink.setAttribute('href', rc.historyUrlLink);
                        historyLink.setAttribute('target', '_blank');
                    }
                    continueBtn.innerHTML = rc.buttonContinue;
                    continueBtn.onclick = function () {
                        modal.style.display = 'none';
                        self.currentApiState = self.apiGameStates.READY;
                        if (self._roundRequested) {
                            self._roundRequested = false;
                            self.finishSoftGameState();
                        }
                        if (typeof rc.continueCallback == 'function') {
                            rc.continueCallback();
                        }
                    };
                    exitBtn.innerHTML = rc.buttonExit;
                    exitBtn.onclick = function () {
                        modal.style.display = 'none';
                        self.currentApiState = self.apiGameStates.READY;
                        if (rc.lobbyUrlLink) {
                            window.location.href = rc.lobbyUrlLink;
                        }
                        else {
                            window.history.back();
                        }
                    };
                };
                DefaultGmApi.prototype.finishSoftGameState = function () {
                    var _this = this;
                    this.currentApiState = this.apiGameStates.SOFT_GAME_IN_PROGRESS;
                    this._publishEvent(Publications.PLAY_CONFIRMED, { data: null });
                    setTimeout(function () {
                        if (_this.currentApiState === _this.apiGameStates.SOFT_GAME_IN_PROGRESS) {
                            _this.currentApiState = _this.apiGameStates.READY;
                            if (_this._shouldShowMessage) {
                                _this.showRealityCheckMessage(_this._realityCheck);
                            }
                        }
                    }, 200);
                };
                DefaultGmApi.prototype.publishEvent = function (event, data) {
                    switch (event) {
                        case Publications.GAME_READY_FOR_UNLOAD:
                            this._publishEvent(Publications.DISPOSE_APPLICATION, { data: null });
                            break;
                        case Publications.AUTOPLAY_ACTIVATED_GAME:
                            this._publishEvent(Publications.AUTOPLAY_ACTIVATED_CONFIRMATION, {
                                data: null,
                            });
                            break;
                        case Publications.INITIALIZED:
                            this.currentApiState = this.apiGameStates.READY;
                            if (this._realityCheck && this._realityCheck.interval > 0) {
                                this.setRealityCheckTimer();
                            }
                            break;
                        case Publications.PLAY_REQUEST:
                            if (this.currentApiState === this.apiGameStates.OVERLAY_SHOWN) {
                                this._roundRequested = true;
                            }
                            else if (this.currentApiState === this.apiGameStates.GAME_IN_PROGRESS ||
                                this.currentApiState === this.apiGameStates.SOFT_GAME_IN_PROGRESS) {
                                console.log('Illegal game event raised in current api state.\nCurrent api state: ' +
                                    this.currentApiState +
                                    '\nEvent triggered by the game: ' +
                                    data);
                                this._publishEvent(Publications.PLAY_CONFIRMED, { data: null });
                            }
                            else if (this.currentApiState === this.apiGameStates.READY) {
                                this.finishSoftGameState();
                            }
                            break;
                        case Publications.GAME_STATUS_CHANGED:
                            if (data === this.gameStates.OPEN_PLAY) {
                                if (this.currentApiState === this.apiGameStates.OVERLAY_SHOWN) {
                                    console.log('During OVERLAY state, ROUND START event was caught');
                                }
                                else if (this.currentApiState === this.apiGameStates.GAME_IN_PROGRESS) {
                                    console.log('Illegal game event raised in current api state.\nCurrent api state: ' +
                                        this.currentApiState +
                                        '\nEvent triggered by the game: ' +
                                        data);
                                }
                                else if (this.currentApiState ===
                                    this.apiGameStates.SOFT_GAME_IN_PROGRESS ||
                                    this.currentApiState === this.apiGameStates.READY) {
                                    this.currentApiState = this.apiGameStates.GAME_IN_PROGRESS;
                                }
                            }
                            else if (data === this.gameStates.SETTLE_PLAY) {
                                if (this.currentApiState === this.apiGameStates.GAME_IN_PROGRESS) {
                                    this.currentApiState = this.apiGameStates.READY;
                                    if (this._shouldShowMessage) {
                                        this.showRealityCheckMessage(this._realityCheck);
                                    }
                                }
                                else {
                                    console.log('Illegal game event raised in current api state.\nCurrent api state: ' +
                                        this.currentApiState +
                                        '\nEvent triggered by the game: ' +
                                        data);
                                }
                            }
                            break;
                    }
                };
                DefaultGmApi.prototype.setFullscreenMode = function (switchedOn) {
                    console.log("message sent -> FULLSCREEN (" + !!window.parent + ")");
                    if (window && window.parent) {
                        var messageType = switchedOn
                            ? gmapi.Publications.FULLSCREEN_MODE_ON
                            : gmapi.Publications.FULLSCREEN_MODE_OFF;
                        window.parent.postMessage({ type: messageType }, '*');
                    }
                };
                DefaultGmApi.prototype.cashier = function () {
                    console.log("message sent -> CASHIER (" + !!window.parent + ")");
                    if (window && window.parent) {
                        window.parent.postMessage({ type: gmapi.Publications.CASHIER }, '*');
                    }
                };
                DefaultGmApi.prototype.startSuccess = function () {
                    if (window && window.parent) {
                        window.parent.postMessage({ type: gmapi.Publications.START_SUCCESS }, '*');
                    }
                    if (window && window.top) {
                        window.top.postMessage({ event: gmapi.Publications.GAME_READY }, '*');
                    }
                };
                DefaultGmApi.prototype.roundStart = function () {
                    console.log("message sent -> ROUND_START (" + !!window.parent + ")");
                    if (window && window.parent) {
                        window.parent.postMessage({ type: gmapi.Publications.ROUND_START }, '*');
                    }
                };
                DefaultGmApi.prototype.roundEnd = function (game) {
                    console.log("message sent -> ROUND_END (" + !!window.parent + ")");
                    if (window && window.parent) {
                        window.parent.postMessage({ type: gmapi.Publications.ROUND_END }, '*');
                    }
                    var swData = gcw['__temp_sw'];
                    var stwData = gcw['__temp_stw'];
                    if (gcw['__buyFeature']) {
                        if (window['SLSW']) {
                            window['SLSW'].revokeSwButtonForcedState();
                        }
                        gcw['__buyFeature'] = false;
                    }
                    if (swData.response && swData.response.studioLink) {
                        var superWheelGameConfig = swData.superWheelGameConfig();
                        game.sendEvent('SUPER_WHEEL_ROUND_STARTING', superWheelGameConfig);
                        if (!superWheelGameConfig.enabled) {
                            superWheelGameConfig = swData.superWheelGameConfig();
                        }
                        window['SLSW'].startSuperWheelRound({
                            soundEnabled: swData.sound,
                            studioLink: swData.response.studioLink,
                            balance: swData.response.balance,
                            betAmount: swData.swBet || swData.baseBet || swData.response.betAmount,
                            gameConfig: superWheelGameConfig,
                        });
                        if (swData.ukgcData &&
                            swData.ukgcData.displayNet !== null &&
                            swData.ukgcData.timer &&
                            Object.keys(swData.ukgcData.timer).length > 0) {
                            window['SLSW'].updateUKGCRegulationData(swData.ukgcData);
                        }
                        swData.roundEnd = true;
                        return 'SUPER_WHEEL';
                    }
                    if (swData.restore) {
                        swData.restore = false;
                    }
                    if (stwData.studioLink) {
                        return 'SPIN_TO_WIN';
                    }
                    else if (!swData.request.active && !swData.request.respin) {
                        if (window['SLSW']) {
                            window['SLSW'].notifyInactiveSpinCompleted();
                        }
                    }
                    return '';
                };
                DefaultGmApi.prototype.stopSuccess = function () { };
                DefaultGmApi.prototype.resultsShown = function () { };
                DefaultGmApi.prototype.goToLobby = function () {
                    console.log("message sent -> GO_TO_LOBBY (" + !!window.parent + ")");
                    var urlParams = new URLSearchParams(window.location.search);
                    var homeUrl = urlParams.get('homeUrl');
                    if (homeUrl) {
                        var decodedHomeUrl = decodeURIComponent(homeUrl);
                        console.log('Redirecting to homeUrl:', decodedHomeUrl);
                        window.location.href = decodedHomeUrl;
                    }
                    else {
                        if (window && window.parent) {
                            if (window && window.parent) {
                                window.parent.postMessage({ type: gmapi.Publications.GOTO_LOBBY }, '*');
                            }
                        }
                    }
                    console.log('DefaultGmApi.goToLobby');
                };
                DefaultGmApi.prototype.getActualPlayId = function () {
                    console.log('DefaultGmApi.getActualPlayId');
                    return this.playId;
                };
                DefaultGmApi.prototype.setActualPlayId = function (playId) {
                    console.log('DefaultGmApi.setActualPlayId: ', playId);
                };
                DefaultGmApi.prototype.isGUIBlocked = function () {
                    console.log('DefaultGmApi.isGUIBlocked');
                    return this.guiBlocked;
                };
                DefaultGmApi.prototype.getLobbyActive = function () {
                    console.log('DefaultGmApi.getLobbyActive');
                    return this.lobbyActive;
                };
                DefaultGmApi.prototype.getCurrencyFormatting = function () {
                    console.log('DefaultGmApi.getCurrencyFormatting');
                    return null;
                };
                DefaultGmApi.prototype.getMusicActive = function () {
                    console.log('DefaultGmApi.getMusicActive');
                    return this.musicActive;
                };
                DefaultGmApi.prototype.getSfxActive = function () {
                    console.log('DefaultGmApi.getSfxActive');
                    return this.sfxActive;
                };
                DefaultGmApi.prototype.setCurrencyFormat = function (prefix, suffix, decimalPlaces, decimalSeparator, groupingSeparator, prefixSeparator, suffixSeparator) { };
                DefaultGmApi.prototype.sendSessionRequest = function () {
                    var _this = this;
                    console.log('DefaultGmApi.sendSessionRequest');
                    setTimeout(function () {
                        var sessionId = 'sessionId';
                        _this._publishEvent(Publications.SESSION_DATA_UPDATED, sessionId);
                    }, 10);
                };
                DefaultGmApi.prototype.subscribeToEvent = function (event, callback) {
                    console.log('DefaultGmApi.subscribeToEvent: ' + event, callback);
                    this._callbacks[event] = callback;
                    return event;
                };
                DefaultGmApi.prototype.unsubscribeFromEvent = function (subscriptionId) {
                    console.log('DefaultGmApi.unsubscribeFromEven:' + subscriptionId);
                    this._callbacks[subscriptionId] = null;
                };
                DefaultGmApi.prototype._publishEvent = function (event, data) {
                    if (typeof this._callbacks[event] == 'function') {
                        this._callbacks[event](data);
                    }
                    else {
                        console.warn('DefaultGmApi._publishEvent callback undefined: ' + event);
                    }
                };
                return DefaultGmApi;
            }());
            gmapi.DefaultGmApi = DefaultGmApi;
            var UnibetGmApi = (function (_super) {
                __extends(UnibetGmApi, _super);
                function UnibetGmApi(realityCheck, initConf) {
                    return _super.call(this, realityCheck, initConf) || this;
                }
                UnibetGmApi.prototype.init = function () {
                    unibetGmApi.unibetCallbacks = {};
                    window.addEventListener('message', this.receiveMessage, false);
                };
                UnibetGmApi.prototype.subscribeToEvent = function (event, callback) {
                    if (event == unibetGmApi.publications.GAME_PAUSE ||
                        event == unibetGmApi.publications.GAME_RESUME) {
                        unibetGmApi.unibetCallbacks[event] = callback;
                    }
                    else {
                        return _super.prototype.subscribeToEvent.call(this, event, callback);
                    }
                    return event;
                };
                UnibetGmApi.prototype.publishEvent = function (event, data) {
                    if (event == Publications.GAME_RESULTS_SHOWN) {
                        unibetGmApi.postUnibettMessage(GameEventType.RESULTS_SHOWN);
                    }
                    else if (event == Publications.INITIALIZED) {
                        unibetGmApi.postUnibettMessage(GameEventType.INITIALIZE_SUCCESS);
                    }
                    _super.prototype.publishEvent.call(this, event, data);
                };
                UnibetGmApi.prototype.receiveMessage = function (event) {
                    if (event.data.event === UnibetGmApi.GAME_PAUSE &&
                        typeof unibetGmApi.unibetCallbacks[unibetGmApi.publications.GAME_PAUSE] == FUNCTION) {
                        gamePaused = true;
                        unibetGmApi.unibetCallbacks[unibetGmApi.publications.GAME_PAUSE]();
                    }
                    else if (event.data.event === UnibetGmApi.GAME_RESUME &&
                        typeof unibetGmApi.unibetCallbacks[unibetGmApi.publications.GAME_RESUME] == FUNCTION) {
                        gamePaused = false;
                        unibetGmApi.unibetCallbacks[unibetGmApi.publications.GAME_RESUME]();
                    }
                };
                UnibetGmApi.prototype.cashier = function () {
                    _super.prototype.cashier.call(this);
                    unibetGmApi.postUnibettMessage(GameEventType.CASHIER);
                };
                UnibetGmApi.prototype.stopSuccess = function () {
                    _super.prototype.stopSuccess.call(this);
                    unibetGmApi.postUnibettMessage(GameEventType.STOP_SUCCESS);
                };
                UnibetGmApi.prototype.resultsShown = function () {
                    _super.prototype.resultsShown.call(this);
                    unibetGmApi.postUnibettMessage(GameEventType.RESULTS_SHOWN);
                };
                UnibetGmApi.prototype.goToLobby = function () {
                    _super.prototype.goToLobby.call(this);
                    unibetGmApi.postUnibettMessage(GameEventType.HOME);
                };
                UnibetGmApi.prototype.postUnibettMessage = function (ngsEvent) {
                    var eventData = {
                        event: this.ngsToUnibetEvent(ngsEvent),
                    };
                    window.top.postMessage(eventData, '*');
                };
                UnibetGmApi.prototype.ngsToUnibetEvent = function (ngsEvent) {
                    switch (ngsEvent) {
                        case GameEventType.STOP_SUCCESS:
                            return 'gamePaused';
                        case GameEventType.HOME:
                            return 'backToLobby';
                        case GameEventType.RESULTS_SHOWN:
                            return 'updateBalance';
                        case GameEventType.CASHIER:
                            return 'cashier';
                        case GameEventType.INITIALIZE_SUCCESS:
                            return 'gameReady';
                    }
                };
                UnibetGmApi.UNIBET_I_FRAME_KEY = 'unibet';
                UnibetGmApi.GAME_PAUSE = 'gamePause';
                UnibetGmApi.GAME_RESUME = 'gameResume';
                return UnibetGmApi;
            }(DefaultGmApi));
            gmapi.UnibetGmApi = UnibetGmApi;
            var PokerstarsGmApi = (function (_super) {
                __extends(PokerstarsGmApi, _super);
                function PokerstarsGmApi(realityCheck, initConf) {
                    return _super.call(this, realityCheck, initConf) || this;
                }
                PokerstarsGmApi.prototype.publishEvent = function (event, data) {
                    if (event == Publications.INITIALIZED &&
                        typeof relaxGmApi.rgPostMessageAPI !== UNDEFINED) {
                        relaxGmApi.rgPostMessageAPI.reportGameReady();
                    }
                    _super.prototype.publishEvent.call(this, event, data);
                };
                return PokerstarsGmApi;
            }(DefaultGmApi));
            gmapi.PokerstarsGmApi = PokerstarsGmApi;
            var RelaxGmApi = (function (_super) {
                __extends(RelaxGmApi, _super);
                function RelaxGmApi(realityCheck, initConf) {
                    var _this = _super.call(this, realityCheck, initConf) || this;
                    _this.relaxPostMessageApiPath = 'https://d3nsdzdtjbr5ml.cloudfront.net/casino/relaxlibs/rg/RgPostMessageAPI.min.js';
                    _this.relaxLoadTimeOut = 100;
                    _this.pausedByCasino = false;
                    return _this;
                }
                RelaxGmApi.prototype.loadScript = function () {
                    relaxGmApi.relaxCallbacks = {};
                    gcw.load.loadScript(this.relaxPostMessageApiPath, function () {
                        function relaxGMApiInitialize() {
                            eval('relaxGmApi.rgPostMessageAPI = this.RgPostMessageAPI;');
                            if (typeof relaxGmApi.rgPostMessageAPI !== UNDEFINED) {
                                console.debug('RgPostMessageAPI loaded');
                                relaxGmApi.rgPostMessageAPI = this.RgPostMessageAPI;
                                relaxGmApi.init();
                            }
                            else {
                                console.debug('RgPostMessageAPI loading ...');
                                setTimeout(relaxGMApiInitialize, relaxGmApi.relaxLoadTimeOut);
                            }
                        }
                        setTimeout(relaxGMApiInitialize, 0);
                    });
                };
                RelaxGmApi.prototype.init = function () {
                    relaxGmApi.rgPostMessageAPI.init(true);
                    window.addEventListener('rg_pause', function (event) {
                        relaxGmApi.pausedByCasino = true;
                        if (event['data'] && event['data'].autoPlayOnly) {
                            relaxGmApi._callbacks[Publications.AUTOPLAY_LIMIT_REACHED]({
                                data: 'Autoplay stopped by casino',
                            });
                        }
                        else {
                            relaxGmApi.relaxCallbacks[relaxGmApi.publications.GAME_PAUSE]();
                        }
                    });
                    window.addEventListener('rg_resume', function () {
                        relaxGmApi.pausedByCasino = false;
                        relaxGmApi.relaxCallbacks[relaxGmApi.publications.GAME_RESUME]();
                    });
                    eval("if (typeof rlxlauncher !== 'undefined') relaxHomeUrl = rlxlauncher.getData.homeurl;");
                };
                RelaxGmApi.prototype.publishEvent = function (event, data) {
                    if (event == Publications.INITIALIZED &&
                        typeof relaxGmApi.rgPostMessageAPI !== UNDEFINED) {
                        relaxGmApi.rgPostMessageAPI.reportGameReady();
                    }
                    _super.prototype.publishEvent.call(this, event, data);
                };
                RelaxGmApi.prototype.subscribeToEvent = function (event, callback) {
                    if (event == relaxGmApi.publications.GAME_PAUSE ||
                        event == relaxGmApi.publications.GAME_RESUME) {
                        relaxGmApi.relaxCallbacks[event] = callback;
                    }
                    else {
                        return _super.prototype.subscribeToEvent.call(this, event, callback);
                    }
                    return event;
                };
                RelaxGmApi.prototype.stopSuccess = function () {
                    _super.prototype.stopSuccess.call(this);
                    if (relaxGmApi.pausedByCasino) {
                        relaxGmApi.rgPostMessageAPI.reportPaused();
                    }
                };
                RelaxGmApi.prototype.goToLobby = function () {
                    _super.prototype.goToLobby.call(this);
                    if (typeof relaxGmApi.relaxHomeUrl !== UNDEFINED) {
                        relaxGmApi.rgPostMessageAPI.userAction(relaxGmApi.relaxHomeUrl);
                    }
                };
                RelaxGmApi.RELAX_I_FRAME_KEY = 'relax';
                return RelaxGmApi;
            }(DefaultGmApi));
            gmapi.RelaxGmApi = RelaxGmApi;
        })(gmapi = adapter.gmapi || (adapter.gmapi = {}));
    })(adapter = gcw.adapter || (gcw.adapter = {}));
})(gcw || (gcw = {}));
var gcw;
(function (gcw) {
    var adapter;
    (function (adapter) {
        var ISoftbetGameAdapter = (function () {
            function ISoftbetGameAdapter(game, gcwOpt, initConf, realityCheck) {
                this.REALITYCHECK_ERROR = 'B_08';
                this.hideErrorMessage = false;
                this._game = game;
                if (gcwOpt) {
                    this._lobbyUrl = gcwOpt.lobbyUrl;
                    this._historyUrl = gcwOpt.historyUrl;
                }
                var gmApiFactory = new gcw.gamebrand.GmApiFactoryImpl();
                this._gmApi = gmApiFactory.getGmApi(realityCheck, initConf);
                this._handleOnAppFrameReady();
            }
            ISoftbetGameAdapter.prototype.setEventListener = function (eventListener) {
                var _this = this;
                this._eventListener = eventListener;
                this._game.setEventListener(function (type, data) {
                    switch (type) {
                        case gcw.api.GameEventType.NGS_RESPONSE: {
                            _this._eventListenerCall(type, data);
                            _this._handleRoundServerResponse(data);
                            break;
                        }
                        case gcw.api.GameEventType.ERROR: {
                            if (_this.hideErrorMessage) {
                                _this.hideErrorMessage = false;
                                _this.sendEvent(gcw.api.GameEventType.ERROR_HANDLED, data);
                            }
                            else {
                                _this._eventListenerCall(type, data);
                            }
                            break;
                        }
                        default: {
                            _this._eventListenerCall(type, data);
                        }
                    }
                });
            };
            ISoftbetGameAdapter.prototype.sendEvent = function (type, data) {
                this._game.sendEvent(type, data);
            };
            ISoftbetGameAdapter.prototype.getGameLogRequestData = function (data) {
                return this._game.getGameLogRequestData(data);
            };
            ISoftbetGameAdapter.prototype.getNgsClientUrl = function () {
                return this._game.getNgsClientUrl();
            };
            ISoftbetGameAdapter.prototype._handleOnAppFrameReady = function () {
                this._postMsg({
                    type: 'onAppFrameReady'
                });
            };
            ISoftbetGameAdapter.prototype._handleRoundServerResponse = function (data) {
                var _this = this;
                if (data && data.status && data.status.externalCode === this.REALITYCHECK_ERROR) {
                    var extMessage = JSON.parse(data.status.externalMessage);
                    var message = data.status.message;
                    var continueText = extMessage.buttons.find(function (b) { return b.action === 'continue'; }).text;
                    var exitText = extMessage.buttons.find(function (b) { return b.action === 'void'; }).text;
                    var historyText = extMessage.buttons.find(function (b) { return b.action === 'history'; }).text;
                    var continueCb = function () {
                        _this.sendEvent(gcw.api.GameEventType.ERROR_HANDLED, data);
                        _this.sendEvent(gcw.api.GameEventType.START);
                    };
                    var rc = {
                        buttonContinue: continueText,
                        buttonExit: exitText,
                        historyUrlText: historyText,
                        lobbyUrlLink: this._lobbyUrl,
                        historyUrlLink: this._historyUrl,
                        message: message,
                        continueCallback: continueCb
                    };
                    this.hideErrorMessage = true;
                    this.sendEvent(gcw.api.GameEventType.STOP);
                    this._gmApi.showRealityCheckMessage(rc);
                }
            };
            ISoftbetGameAdapter.prototype._eventListenerCall = function (type, data) {
                if (typeof this._eventListener == "function") {
                    this._eventListener(type, data);
                }
            };
            ISoftbetGameAdapter.prototype._postMsg = function (msg) {
                window.parent.postMessage({ data: msg }, '*');
            };
            ISoftbetGameAdapter.prototype.setSuperWheelPostInitializationCallback = function (callback) {
                if (this._game.setSuperWheelPostInitializationCallback) {
                    this._game.setSuperWheelPostInitializationCallback(callback);
                }
            };
            ISoftbetGameAdapter.prototype.updateBalanceViaHeartbeat = function () {
                if (this._game.updateBalanceViaHeartbeat) {
                    this._game.updateBalanceViaHeartbeat();
                }
            };
            ISoftbetGameAdapter.prototype.saveConfigurationParameters = function (params) {
                if (this._game.saveConfigurationParameters) {
                    this._game.saveConfigurationParameters(params);
                }
            };
            return ISoftbetGameAdapter;
        }());
        adapter.ISoftbetGameAdapter = ISoftbetGameAdapter;
    })(adapter = gcw.adapter || (gcw.adapter = {}));
})(gcw || (gcw = {}));
var gcw;
(function (gcw) {
    var adapter;
    (function (adapter) {
        var GameEventType = gcw.api.GameEventType;
        var MgsGameAdapter = (function () {
            function MgsGameAdapter(game) {
                var _this = this;
                this._message = {
                    Id: "id",
                    Name: "Name",
                    Body: null,
                    Type: "REQUEST",
                    Origin: "embeddedgame",
                    SenderId: "framename",
                    Error: null
                };
                console.debug('[MGS adapter] adapter: ', this);
                this._game = game;
                window.addEventListener('message', function (msg) {
                    _this._recvMsg(msg);
                }, false);
            }
            MgsGameAdapter.prototype.sendEvent = function (type, data) {
                this._game.sendEvent(type, data);
            };
            MgsGameAdapter.prototype.setEventListener = function (eventListener) {
                var _this = this;
                this._eventListener = eventListener;
                this._game.setEventListener(function (type, data) {
                    _this._eventListenerCall(type, data);
                    switch (type) {
                        case GameEventType.INITIALIZE_SUCCESS: {
                            _this._postMsg("BRIDGE_API_READY");
                            _this._postQuickfireEvent('gameLoaded');
                            break;
                        }
                        case GameEventType.CASHIER: {
                            _this._postMsg("LAUNCH_BANKING");
                            break;
                        }
                        case GameEventType.TOTAL_BET_UPDATE:
                        case GameEventType.AUTOPLAY_ACTIVATE:
                        case GameEventType.AUTOPLAY_DEACTIVATE: {
                            _this._postMsg("PLAYER_ACTIVITY");
                            break;
                        }
                        case GameEventType.HOME:
                        case GameEventType.TERMINATE_SUCCESS: {
                            _this._postMsg("CLOSE_APPLICATION");
                            break;
                        }
                        case GameEventType.ROUND_START: {
                            _this._postMsg("BUSY");
                            _this._postQuickfireEvent('gameBusy');
                            break;
                        }
                        case GameEventType.ROUND_END: {
                            _this._postMsg("IDLE");
                            _this._postQuickfireEvent('gameNotBusy');
                            break;
                        }
                    }
                });
            };
            MgsGameAdapter.prototype._recvMsg = function (msg) {
                if (msg && msg.body && msg.body.Name) {
                    switch (msg.body.Namey) {
                        case "PAUSE_GAMEPLAY": {
                            this.sendEvent(GameEventType.STOP);
                            break;
                        }
                        case "RESUME_GAMEPLAY": {
                            this.sendEvent(GameEventType.START);
                            break;
                        }
                    }
                }
            };
            MgsGameAdapter.prototype._eventListenerCall = function (type, data) {
                if (typeof this._eventListener == "function") {
                    this._eventListener(type, data);
                }
            };
            MgsGameAdapter.prototype._postMsg = function (name) {
                this._message.Id = Guid.newGuid();
                this._message.SenderId = window.name;
                this._message.Name = name;
                window.parent.postMessage(this._message, '*');
            };
            MgsGameAdapter.prototype._postQuickfireEvent = function (type) {
                console.log("GCW - Quickfire event " + type + " sent.");
                window.parent.postMessage({ event: type }, '*');
            };
            MgsGameAdapter.prototype.getNgsClientUrl = function () {
                return this._game.getNgsClientUrl();
            };
            MgsGameAdapter.prototype.setSuperWheelPostInitializationCallback = function (callback) {
                if (this._game.setSuperWheelPostInitializationCallback) {
                    this._game.setSuperWheelPostInitializationCallback(callback);
                }
            };
            MgsGameAdapter.prototype.updateBalanceViaHeartbeat = function () {
                if (this._game.updateBalanceViaHeartbeat) {
                    this._game.updateBalanceViaHeartbeat();
                }
            };
            MgsGameAdapter.prototype.saveConfigurationParameters = function (params) {
                if (this._game.saveConfigurationParameters) {
                    this._game.saveConfigurationParameters(params);
                }
            };
            return MgsGameAdapter;
        }());
        adapter.MgsGameAdapter = MgsGameAdapter;
        var Guid = (function () {
            function Guid() {
            }
            Guid.newGuid = function () {
                return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
                    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
                    return v.toString(16);
                });
            };
            return Guid;
        }());
    })(adapter = gcw.adapter || (gcw.adapter = {}));
})(gcw || (gcw = {}));
var gcw;
(function (gcw) {
    var adapter;
    (function (adapter) {
        var PariplayGameAdapter = (function () {
            function PariplayGameAdapter(game, gcwOpt) {
                var _this = this;
                this._game = game;
                window.addEventListener('message', function (msg) {
                    _this._recvMsg(msg);
                }, false);
                if (gcwOpt) {
                    this._homeUrl = gcwOpt.homeUrl;
                    this._cashierUrl = gcwOpt.cashierUrl;
                    this._historyUrl = gcwOpt.historyUrl;
                    this._gameCode = gcwOpt.gameCode;
                    this._language = gcwOpt.language;
                    try {
                        this._playerId = JSON.parse(decodeURI(new URL(window.location.href).searchParams.get('extraData'))).operator_token;
                    }
                    catch (e) {
                        this._playerId = '';
                        console.error(e.message);
                    }
                }
                this._total_win = 0;
                this._total_bet = 0;
                this._handleOnAppFrameReady();
            }
            PariplayGameAdapter.prototype.setEventListener = function (eventListener) {
                var _this = this;
                this._eventListener = eventListener;
                this._game.setEventListener(function (type, data) {
                    _this._eventListenerCall(type, data);
                    switch (type) {
                        case gcw.api.GameEventType.PRELOADING_END: {
                            _this._handleGameDataLoaded(data);
                            _this._handleGameReady(data);
                            break;
                        }
                        case gcw.api.GameEventType.START_SUCCESS: {
                            break;
                        }
                        case gcw.api.GameEventType.HOME: {
                            _this._handleLobby(data);
                            break;
                        }
                        case gcw.api.GameEventType.TOTAL_BET_UPDATE: {
                            _this._handleTotalBetUpdate(data);
                            break;
                        }
                        case gcw.api.GameEventType.ROUND_REQUEST: {
                            _this._handleRoundStart(data);
                            break;
                        }
                        case gcw.api.GameEventType.ROUND_START: {
                            _this._handleRoundStarted(data);
                            break;
                        }
                        case gcw.api.GameEventType.CASHIER: {
                            _this._handleCashier(data);
                            break;
                        }
                        case gcw.api.GameEventType.NGS_RESPONSE: {
                            _this._handleRoundServerResponse(data);
                            break;
                        }
                        case gcw.api.GameEventType.ROUND_END: {
                            _this._handleRoundEnded(data);
                            break;
                        }
                        case gcw.api.GameEventType.TOTAL_WIN_UPDATE: {
                            _this._handleTotalWin(data);
                            break;
                        }
                        case gcw.api.GameEventType.WALLET_UPDATED: {
                            _this._handleBalanceUpdated(data);
                        }
                    }
                });
            };
            PariplayGameAdapter.prototype.sendEvent = function (type, data) {
                this._game.sendEvent(type, data);
            };
            PariplayGameAdapter.prototype.getGameLogRequestData = function (data) {
                return this._game.getGameLogRequestData(data);
            };
            PariplayGameAdapter.prototype.getNgsClientUrl = function () {
                return this._game.getNgsClientUrl();
            };
            PariplayGameAdapter.prototype._handleOnAppFrameReady = function () {
                this._postMsg({
                    type: 'onAppFrameReady'
                });
            };
            PariplayGameAdapter.prototype._handleLobby = function (data) {
                if (this._homeUrl === 'api') {
                    this._postMsg({
                        type: 'quit'
                    });
                }
                else if (this._homeUrl === '888bingo') {
                    this._postMsg({
                        type: 'lobby (888)'
                    });
                }
                else if (this.isValidUrl(this._homeUrl)) {
                    window.top.location.href = this._homeUrl;
                }
                else if (this._homeUrl === 'back') {
                    window.top.history.go(-1);
                    this._postMsg({
                        sender: this._gameCode,
                        lang: this._language,
                        type: 'quit'
                    });
                }
            };
            PariplayGameAdapter.prototype._handleCashier = function (data) {
                this._postMsg({
                    sender: this._gameCode,
                    lang: this._language,
                    type: 'cashier',
                    data: {
                        reason: 'Ribbon',
                        target: this._cashierUrl
                    }
                });
            };
            PariplayGameAdapter.prototype._handleGameDataLoaded = function (data) {
                this._postMsg({
                    sender: this._gameCode,
                    lang: this._language,
                    type: 'gameDataLoaded',
                    data: {
                        LoadGameData: {
                            playerTokenId: this._playerId,
                            gameName: this._gameCode,
                            homeUrl: this._homeUrl
                        }
                    }
                });
            };
            PariplayGameAdapter.prototype._handleGameReady = function (data) {
                this._postMsg({
                    type: 'gameReady'
                });
            };
            PariplayGameAdapter.prototype._handleRoundStart = function (data) {
                this._postMsg({
                    sender: this._gameCode,
                    lang: this._language,
                    type: 'roundStart',
                    data: {
                        totalBet: this._total_bet
                    }
                });
            };
            PariplayGameAdapter.prototype._handleRoundStarted = function (data) {
                this._total_win = 0;
                if (this._game_state.currentWallet.rm) {
                    this._postMsg({
                        "sender": this._gameCode,
                        "lang": this._language,
                        "type": "roundStarted",
                        "data": {
                            "balanceBefore": this._game_state.currentWallet.rm
                        }
                    });
                }
            };
            PariplayGameAdapter.prototype._handleRoundServerResponse = function (data) {
                var balance;
                if (data && data.status && (data.status.externalCode || data.status.externalMessage)) {
                    if (data.status.externalMessage) {
                        data.status.message = data.status.externalMessage;
                    }
                    else {
                        data.status.message = "Casino operator message was received with code [" + data.status.externalCode + "]. Please contact casino operator for more details.";
                    }
                }
                if (data && data.game && data.game.currentWallet && data.game.walletAfterLastBet) {
                    this._game_state = data.game;
                    balance = data.game.currentWallet.rm;
                    if (balance !== undefined) {
                        this._postMsg({
                            sender: this._gameCode,
                            lang: this._language,
                            type: 'balance',
                            data: {
                                amount: balance
                            }
                        });
                    }
                }
                var message;
                var res = data && data.game && data.game.messagesAfterGameEvents && data.game.messagesAfterGameEvents.length > 0 && data.game.messagesAfterGameEvents[0];
                if (res && res.message) {
                    var result = this._checkValidMessageAndGet(data.game.messagesAfterGameEvents[0].message);
                    if (result) {
                        data.game.messagesAfterGameEvents[0].processed = true;
                        data.game.messagesAfterGameEvents = null;
                        this._postTicketReceived(result);
                    }
                }
                if (res && (res.externalCode || res.externalMessage)) {
                    var messages = data.game.messagesAfterGameEvents;
                    if (!messages) {
                        var extMessage = {};
                        data.game.messagesAfterGameEvents = [extMessage];
                    }
                    if (res.externalMessage) {
                        messages[0].message = res.externalMessage;
                    }
                    else {
                        messages[0].message = "Casino operator message was received with code [" + res.externalCode + "]. Please contact casino operator for more details.";
                    }
                }
            };
            PariplayGameAdapter.prototype._handleRoundEnded = function (data) {
                if (this._game_state) {
                    var message = {
                        type: 'roundEnded',
                        data: {
                            balanceAfter: this._game_state.currentWallet.rm,
                            winAmount: this._total_win
                        }
                    };
                    this._postMsg(message);
                }
            };
            PariplayGameAdapter.prototype._handleTotalWin = function (data) {
                if (data) {
                    this._total_win = this._total_win + data;
                    console.error("[pariplay adapter] handle total win", data);
                }
            };
            PariplayGameAdapter.prototype._handleTotalBetUpdate = function (data) {
                if (data) {
                    this._total_bet = data;
                }
            };
            PariplayGameAdapter.prototype._handleBalanceUpdated = function (data) {
                this._postMsg({
                    sender: this._gameCode,
                    lang: this._language,
                    type: 'balance',
                    data: {
                        amount: data.balance
                    }
                });
            };
            PariplayGameAdapter.prototype._eventListenerCall = function (type, data) {
                if (typeof this._eventListener == "function") {
                    this._eventListener(type, data);
                }
            };
            PariplayGameAdapter.prototype._recvMsg = function (msg) {
                switch (msg.data.type) {
                    case "stopAutobet": {
                        this.sendEvent(gcw.api.GameEventType.STOP);
                        this.sendEvent(gcw.api.GameEventType.START);
                        this.sendEvent(gcw.api.GameEventType.AUTOPLAY_LIMIT_REACHED);
                        break;
                    }
                    case "disableSpin":
                    case "pause": {
                        this.sendEvent(gcw.api.GameEventType.STOP);
                        break;
                    }
                    case "resume":
                    case "enableSpin": {
                        this.sendEvent(gcw.api.GameEventType.START);
                        break;
                    }
                }
            };
            PariplayGameAdapter.prototype._postTicketReceived = function (msg) {
                var message = {
                    "sender": this._gameCode,
                    "lang": this._language.toUpperCase(),
                    "type": "ticketReceived",
                    "data": {
                        "Status": { "ErrCode": 0 },
                        "Message": msg
                    },
                };
                console.log("GCW - sent Pariplay 'ticketReceived' " + JSON.stringify(message));
                window.parent.postMessage(message, '*');
            };
            PariplayGameAdapter.prototype._postMsg = function (msg) {
                console.log("GCW - sent Pariplay '" + msg.type + "' " + JSON.stringify(msg));
                window.parent.postMessage(msg, '*');
            };
            PariplayGameAdapter.prototype._checkValidMessageAndGet = function (jsonString) {
                try {
                    var message = JSON.parse(jsonString);
                    if (message && typeof message === "object") {
                        return message;
                    }
                }
                catch (e) { }
                return false;
            };
            ;
            PariplayGameAdapter.prototype.isValidUrl = function (string) {
                try {
                    new URL(string);
                }
                catch (_) {
                    return false;
                }
                return true;
            };
            PariplayGameAdapter.prototype.setSuperWheelPostInitializationCallback = function (callback) {
                if (this._game.setSuperWheelPostInitializationCallback) {
                    this._game.setSuperWheelPostInitializationCallback(callback);
                }
            };
            PariplayGameAdapter.prototype.updateBalanceViaHeartbeat = function () {
                if (this._game.updateBalanceViaHeartbeat) {
                    this._game.updateBalanceViaHeartbeat();
                }
            };
            PariplayGameAdapter.prototype.saveConfigurationParameters = function (params) {
                if (this._game.saveConfigurationParameters) {
                    this._game.saveConfigurationParameters(params);
                }
            };
            return PariplayGameAdapter;
        }());
        adapter.PariplayGameAdapter = PariplayGameAdapter;
    })(adapter = gcw.adapter || (gcw.adapter = {}));
})(gcw || (gcw = {}));
var gcw;
(function (gcw) {
    var utils;
    (function (utils) {
        var integration;
        (function (integration) {
            var operators;
            (function (operators) {
                operators.Relax = "relax";
                operators.LightAndWonder = "lnw";
                operators.Tuko = "tuko";
                operators.Gan = "gan";
                operators.Digitain = "digitain";
            })(operators = integration.operators || (integration.operators = {}));
        })(integration = utils.integration || (utils.integration = {}));
    })(utils = gcw.utils || (gcw.utils = {}));
})(gcw || (gcw = {}));
(function (gcw) {
    var utils;
    (function (utils) {
        var integration;
        (function (integration) {
            function isLightAndWonderIntegration() {
                var gameNodes = document.getElementsByTagName('gcw-game');
                if (!gameNodes || gameNodes.length == 0) {
                    gameNodes = document.getElementsByTagName('ngc-game');
                }
                var gameNodesArray = [];
                for (var i = 0; i < gameNodes.length; i++) {
                    gameNodesArray.push(gameNodes[i]);
                }
                var hasLnWIntegrationAttribute = false;
                if (gameNodesArray && gameNodesArray.length !== 0) {
                    hasLnWIntegrationAttribute = gameNodesArray.some(function (node) {
                        return node.getAttribute('gcw-integration') === 'LIGHT_WONDER';
                    });
                }
                return !!hasLnWIntegrationAttribute;
            }
            function isRelaxIntegration() {
                var iframeParameter = new URL(window.location.href).searchParams.get("paramIFrame");
                return gcw.adapter.gmapi.RelaxGmApi.RELAX_I_FRAME_KEY === iframeParameter;
            }
            function isTukoIntegration() {
                var gameNodes = document.getElementsByTagName('gcw-game');
                if (!gameNodes || gameNodes.length == 0) {
                    gameNodes = document.getElementsByTagName('ngc-game');
                }
                var gameNodesArray = [];
                for (var i = 0; i < gameNodes.length; i++) {
                    gameNodesArray.push(gameNodes[i]);
                }
                var hasTukoIntegrationAttribute = false;
                if (gameNodesArray && gameNodesArray.length !== 0) {
                    hasTukoIntegrationAttribute = gameNodesArray.some(function (node) {
                        return node.getAttribute('gcw-integration') === 'TUKO';
                    });
                }
                return !!hasTukoIntegrationAttribute;
            }
            function isGanIntegration() {
                var gameNodes = document.getElementsByTagName('gcw-game');
                if (!gameNodes || gameNodes.length == 0) {
                    gameNodes = document.getElementsByTagName('ngc-game');
                }
                var gameNodesArray = [];
                for (var i = 0; i < gameNodes.length; i++) {
                    gameNodesArray.push(gameNodes[i]);
                }
                var hasGanIntegrationAttribute = false;
                if (gameNodesArray && gameNodesArray.length !== 0) {
                    hasGanIntegrationAttribute = gameNodesArray.some(function (node) {
                        return node.getAttribute('gcw-integration') === 'GAN';
                    });
                }
                return !!hasGanIntegrationAttribute;
            }
            function isDigitainIntegration() {
                var gameNodes = document.getElementsByTagName('gcw-game');
                if (!gameNodes || gameNodes.length == 0) {
                    gameNodes = document.getElementsByTagName('ngc-game');
                }
                var gameNodesArray = [];
                for (var i = 0; i < gameNodes.length; i++) {
                    gameNodesArray.push(gameNodes[i]);
                }
                var hasDigitainIntegrationAttribute = false;
                if (gameNodesArray && gameNodesArray.length !== 0) {
                    hasDigitainIntegrationAttribute = gameNodesArray.some(function (node) {
                        return node.getAttribute('gcw-integration') === 'DIGITAIN';
                    });
                }
                return !!hasDigitainIntegrationAttribute;
            }
            var checkFunctions = {
                relax: isRelaxIntegration,
                lnw: isLightAndWonderIntegration,
                tuko: isTukoIntegration,
                gan: isGanIntegration,
                digitain: isDigitainIntegration
            };
            function isIntegrationActive(operator) {
                var checkFunction = checkFunctions[operator];
                return checkFunction ? checkFunction() || false : false;
            }
            integration.isIntegrationActive = isIntegrationActive;
            function detectFrontendModuleIntregration() {
                for (var operator in checkFunctions) {
                    if (checkFunctions[operator]()) {
                        return operator;
                    }
                }
                return "";
            }
            integration.detectFrontendModuleIntregration = detectFrontendModuleIntregration;
        })(integration = utils.integration || (utils.integration = {}));
    })(utils = gcw.utils || (gcw.utils = {}));
})(gcw || (gcw = {}));
(function (gcw) {
    var utils;
    (function (utils) {
        function replaceCaseInsensitive(str, strToReplace, strReplaceWith) {
            var esc = strToReplace.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');
            var reg = new RegExp(esc, 'ig');
            return str.replace(reg, strReplaceWith);
        }
        utils.replaceCaseInsensitive = replaceCaseInsensitive;
        function findCaseInsensitive(str, match) {
            return str.toUpperCase().indexOf(match.toUpperCase()) !== -1;
        }
        utils.findCaseInsensitive = findCaseInsensitive;
        function isInFreeSpins(events) {
            var lastEvent = events[events.length - 1];
            return lastEvent.type !== 'evt_conf_enter' && lastEvent.type !== 'evt_conf_exten';
        }
        utils.isInFreeSpins = isInFreeSpins;
    })(utils = gcw.utils || (gcw.utils = {}));
})(gcw || (gcw = {}));
var gcw;
(function (gcw) {
    var adapter;
    (function (adapter) {
        var Relax = gcw.utils.integration.operators.Relax;
        var GcwError = (function () {
            function GcwError() {
            }
            GcwError._staticInit = function () {
                GcwError._codes = [];
                for (var i = 0; i < GcwError.errors.length; i++) {
                    GcwError._codes.push(GcwError.errors[i].code);
                }
            };
            GcwError.hasErrorCode = function (code) {
                return GcwError._codes.indexOf(code) > -1;
            };
            GcwError.getErrorByCode = function (code) {
                var idx = GcwError._codes.indexOf(code);
                return idx > -1 ? GcwError.errors[idx] : null;
            };
            GcwError.isFatal = function (code) {
                var error = GcwError.getErrorByCode(code);
                switch (error) {
                    case GcwError.OK:
                    case GcwError.INVALID_REQUEST:
                    case GcwError.INVALID_REQUEST_ID:
                    case GcwError.INVALID_DEFENCE_CODE:
                    case GcwError.CASINO_PLATFORM_INTEGRATION_ERROR:
                    case GcwError.REQUEST_IN_PROCESSING:
                    case GcwError.INVALID_STAKE_VALUES:
                    case GcwError.FUNDS_STRUCTURE_CHANGED:
                    case GcwError.INSUFFICIENT_FUNDS:
                    case GcwError.GAME_LIMITS_RECONFIGURED:
                        return false;
                    case GcwError.INTERNAL_SERVER_ERROR:
                    case GcwError.UNKNOWN_GAME_SESSION:
                    case GcwError.GAME_SESSION_CLOSED:
                    case GcwError.GAME_CLIENT_CLOSED:
                    case GcwError.GAME_CLIENT_OBSOLETE:
                    case GcwError.GAME_RESTRICTED_IN_COUNTRY:
                        return true;
                    default:
                        return true;
                }
            };
            GcwError._codes = null;
            GcwError.OK = { code: 'OK' };
            GcwError.INTERNAL_SERVER_ERROR = { code: 'INTERNAL_SERVER_ERROR' };
            GcwError.INVALID_REQUEST = { code: 'INVALID_REQUEST' };
            GcwError.INVALID_REQUEST_ID = { code: 'INVALID_REQUEST_ID' };
            GcwError.INVALID_DEFENCE_CODE = { code: 'INVALID_DEFENCE_CODE' };
            GcwError.UNKNOWN_GAME_SESSION = { code: 'UNKNOWN_GAME_SESSION' };
            GcwError.GAME_SESSION_CLOSED = { code: 'GAME_SESSION_CLOSED' };
            GcwError.GAME_CLIENT_CLOSED = { code: 'GAME_CLIENT_CLOSED' };
            GcwError.GAME_CLIENT_OBSOLETE = { code: 'GAME_CLIENT_OBSOLETE' };
            GcwError.GAME_RESTRICTED_IN_COUNTRY = { code: 'GAME_RESTRICTED_IN_COUNTRY' };
            GcwError.CASINO_PLATFORM_INTEGRATION_ERROR = {
                code: 'CASINO_PLATFORM_INTEGRATION_ERROR',
            };
            GcwError.REQUEST_IN_PROCESSING = { code: 'REQUEST_IN_PROCESSING' };
            GcwError.INVALID_STAKE_VALUES = { code: 'INVALID_STAKE_VALUES' };
            GcwError.FUNDS_STRUCTURE_CHANGED = { code: 'FUNDS_STRUCTURE_CHANGED' };
            GcwError.INSUFFICIENT_FUNDS = { code: 'INSUFFICIENT_FUNDS' };
            GcwError.GAME_LIMITS_RECONFIGURED = { code: 'GAME_LIMITS_RECONFIGURED' };
            GcwError.errors = [
                GcwError.OK,
                GcwError.INTERNAL_SERVER_ERROR,
                GcwError.INVALID_REQUEST,
                GcwError.INVALID_REQUEST_ID,
                GcwError.INVALID_DEFENCE_CODE,
                GcwError.UNKNOWN_GAME_SESSION,
                GcwError.GAME_SESSION_CLOSED,
                GcwError.GAME_CLIENT_CLOSED,
                GcwError.GAME_CLIENT_OBSOLETE,
                GcwError.GAME_RESTRICTED_IN_COUNTRY,
                GcwError.CASINO_PLATFORM_INTEGRATION_ERROR,
                GcwError.REQUEST_IN_PROCESSING,
                GcwError.INVALID_STAKE_VALUES,
                GcwError.FUNDS_STRUCTURE_CHANGED,
                GcwError.INSUFFICIENT_FUNDS,
                GcwError.GAME_LIMITS_RECONFIGURED,
            ];
            return GcwError;
        }());
        adapter.GcwError = GcwError;
        GcwError._staticInit();
        var NgsGameAdapter = (function () {
            function NgsGameAdapter(game, loggingServiceUrl) {
                this._postponeFreeRounds = false;
                this._pendingConfigParams = {};
                this._game = game;
                this._loggingServiceUrl = loggingServiceUrl;
                gcw['__temp_sw'] = {
                    maintenanceMode: false,
                    available: false,
                    blocked: false,
                    sound: false,
                    init: false,
                    teased: false,
                    baseBet: 0,
                    forceActiveOnFR: false,
                    frConfiguration: null,
                    restore: false,
                    endCallback: null,
                    roundEnd: false,
                    freeRoundsAccepted: false,
                    autoEnable: false,
                    skipSplashScreen: false,
                    saveSplashSkip: false,
                    skipPopup: false,
                    savePopup: false,
                    bufferedSpin: false,
                    freeSpins: false,
                    totalBet: 0,
                    swBet: 0,
                    initData: {
                        currency: {},
                        sound: { enabledOnStartup: false },
                        platform: 'DESKTOP',
                    },
                    request: {
                        active: false,
                        respin: false,
                    },
                    response: null,
                    ukgcData: null,
                    superWheelGame: false,
                    superWheelGameConfig: function () {
                        return {
                            enabled: false,
                            showRules: true,
                            introMessage: null,
                            outroMessageCallback: null,
                        };
                    },
                };
                gcw['__temp_stw'] = {
                    restore: false,
                    studioLink: null,
                };
            }
            NgsGameAdapter.prototype.setEventListener = function (eventListener) {
                var _this = this;
                this._eventListener = eventListener;
                this._game.setEventListener(function (type, data) {
                    switch (type) {
                        case gcw.api.GameEventType.NGS_REQUEST:
                            if (_this._postponeFreeRounds &&
                                data &&
                                data.game &&
                                data.game.init == true) {
                                data.game.buttonCode = 'FREE_ROUND_POSTPONE';
                            }
                            if (data &&
                                data.configuration &&
                                data.configuration.save &&
                                data.configuration.save.game) {
                                delete data.configuration.save.game['slswScript'];
                                delete data.configuration.save.game['game-wrapper'];
                                delete data.configuration.save.game['gcwFeAdapter'];
                                delete data.configuration.save.game['enrichedWrapper'];
                                delete data.configuration.save.game['miniGameWrapper'];
                                delete data.configuration.save.game['snaPatch'];
                                delete data.configuration.save.game['background_sounds'];
                                delete data.configuration.save.game['balanceInCurrency'];
                                delete data.configuration.save.game['bet_max'];
                                delete data.configuration.save.game['coin_value'];
                                delete data.configuration.save.game['game_sounds'];
                                delete data.configuration.save.game['line_bet'];
                                delete data.configuration.save.game['play_twin'];
                                delete data.configuration.save.game['slideable_touch'];
                                delete data.configuration.save.game['touch_anywhere'];
                                delete data.configuration.save.game['superStakePromptDescription'];
                                delete data.configuration.save.game['regulation'];
                                delete data.configuration.save.game['regulationId'];
                                delete data.configuration.save.game['gameType'];
                                delete data.configuration.save.game['certGameVersion'];
                            }
                            if (data.game && data.game.input && data.game.input.currentWallet) {
                                var wallet = data.game.input.currentWallet;
                                if (wallet.freeRounds &&
                                    wallet.freeRounds.available &&
                                    !wallet.freeRounds.postponed) {
                                    var swData = gcw['__temp_sw'];
                                    if (data.game.input.event && data.game.input.event.bmode) {
                                        data.game.input.event.bmode =
                                            swData.frConfiguration.roundConfig.bmode;
                                    }
                                }
                            }
                            if (data.game && data.game.init) {
                                window.setTimeout(function () {
                                    var initialResponse = gcw['__initResponse'];
                                    _this._processNgsResponse(initialResponse);
                                    _this._eventListenerCall(gcw.api.GameEventType.NGS_RESPONSE, initialResponse);
                                    _this._game.sendEvent(gcw.api.GameEventType.NGS_RESPONSE, initialResponse);
                                }, 100);
                                break;
                            }
                            _this._processNgsRequestSuperWheel(data, function () {
                                _this._ngsClient.send(data);
                            });
                            break;
                        case gcw.api.GameEventType.TERMINATE_SUCCESS:
                            _this._ngsClient.stop();
                            _this._eventListenerCall(type, data);
                            break;
                        case gcw.api.GameEventType.TERMINATE_FAILURE:
                            _this._ngsClient.stop();
                            _this._eventListenerCall(type, data);
                            break;
                        case gcw.api.GameEventType.NGS_LOG_REQUEST:
                            var logData = _this.getGameLogRequestData(data);
                            gcw.handleGameLog(_this._ngsClient.getUrl(), _this._loggingServiceUrl, logData);
                            break;
                        case gcw.api.GameEventType.HEARTBEAT_REQUEST:
                            console.log("GCW NGS HEARTBEAT_REQUEST");
                            var updateWallet_1 = data && data.updateWallet;
                            _this._ngsClient.sendHeartBeat(function (response) {
                                console.log("GCW NGS HEARTBEAT_RESPONSE " + JSON.stringify(response));
                                _this._eventListenerCall(gcw.api.GameEventType.HEARTBEAT_RESPONSE, response);
                                if (updateWallet_1 &&
                                    response &&
                                    response.game &&
                                    response.game.currentWallet) {
                                    var wallet = response.game.currentWallet;
                                    _this._game.sendEvent(gcw.api.GameEventType.WALLET_UPDATED, {
                                        balance: wallet.rm,
                                        free_balance: wallet.fm,
                                    });
                                }
                            });
                            break;
                        default:
                            _this._eventListenerCall(type, data);
                    }
                });
            };
            NgsGameAdapter.prototype.getGameLogRequestData = function (data) {
                var logData = {
                    message: data.message,
                    stackTrace: data.stackTrace,
                    severity: data.severity,
                };
                return logData;
            };
            NgsGameAdapter.prototype.sendEvent = function (type, data) {
                var _this = this;
                switch (type) {
                    case gcw.api.GameEventType.INITIALIZE:
                        var initializeData = data;
                        this._ngsClient = new gcw.ngs.NgsClient(initializeData);
                        window.addEventListener('beforeunload', this.sendCloseSessionRequest.bind(this));
                        this._ngsClient.onResponse(function (response) {
                            var delay = _this._processNgsResponse(response);
                            if (delay) {
                                setTimeout(function () {
                                    _this._eventListenerCall(gcw.api.GameEventType.NGS_RESPONSE, response);
                                    _this._game.sendEvent(gcw.api.GameEventType.NGS_RESPONSE, response);
                                }, delay);
                            }
                            else {
                                _this._eventListenerCall(gcw.api.GameEventType.NGS_RESPONSE, response);
                                _this._game.sendEvent(gcw.api.GameEventType.NGS_RESPONSE, response);
                            }
                        });
                        this._ngsClient.onError(function (error) {
                            _this._game.sendEvent(gcw.api.GameEventType.NGS_ERROR, error);
                        });
                        this._ngsClient.onHeartbeatError(function () {
                            _this._eventListenerCall(gcw.api.GameEventType.NGS_HEARTBEAT_ERROR, {});
                        });
                        this._ngsClient.start();
                        this._game.sendEvent(gcw.api.GameEventType.INITIALIZE, initializeData);
                        break;
                    case gcw.api.GameEventType.BASE_BET_UPDATED:
                        gcw['__temp_sw'].baseBet = data.data;
                        break;
                    case gcw.api.GameEventType.FREE_ROUND_POSTPONE:
                        this._postponeFreeRounds = data === true;
                        var slsw = window['SLSW'];
                        var swData = gcw['__temp_sw'];
                        if (swData.blocked) {
                            this._eventListenerCall('SUPER_WHEEL_SERVICE_BLOCKED', {
                                general: { blockInteraction: false },
                            });
                        }
                        else if (slsw &&
                            !swData.skipPopup &&
                            !(swData.frConfiguration && swData.frConfiguration.available)) {
                            this._eventListenerCall('SHOW_SUPER_WHEEL_POPUP', {
                                general: { blockInteraction: false },
                            });
                        }
                        break;
                    case gcw.api.GameEventType.REALITY_CHECK_CHOICE:
                        console.log('GCW NGS RC CHOICE');
                        this._ngsClient.send({
                            date: new Date().toISOString(),
                            rc: {
                                choice: data.action,
                            },
                        });
                        break;
                    case gcw.api.GameEventType.GET_INIT_RESPONSE:
                        data.response = gcw['__initResponse'];
                        break;
                    case gcw.api.GameEventType.SUPER_WHEEL_ROUND_STARTING:
                        if (gcw['__initResponse'] &&
                            gcw['__initResponse'].operation &&
                            gcw['__initResponse'].operation.ukgc) {
                            this._eventListenerCall('SUPER_WHEEL_STARTING_DETECTED', data);
                        }
                        this._game.sendEvent(type, data);
                        break;
                    default:
                        this._game.sendEvent(type, data);
                }
            };
            NgsGameAdapter.prototype.getNgsClientUrl = function () {
                return this._ngsClient.getUrl();
            };
            NgsGameAdapter.prototype._processNgsResponse = function (response) {
                var delay = 0;
                if (response && response.status) {
                    if (response.status.externalMessage &&
                        response.status.externalMessage.length) {
                        response.status.message = response.status.externalMessage;
                    }
                    this._checkIfErrorAlreadyProcessed(response.status);
                }
                if (response &&
                    response.game &&
                    response.game.messagesAfterGameEvents &&
                    response.game.messagesAfterGameEvents.length) {
                    if (response.game.messagesAfterGameEvents[0].externalMessage) {
                        response.game.messagesAfterGameEvents[0].message =
                            response.game.messagesAfterGameEvents[0].externalMessage;
                    }
                    this._checkIfErrorAlreadyProcessed(response.game.messagesAfterGameEvents[0].message);
                }
                var swData = gcw['__temp_sw'];
                var initResponse = response.configuration &&
                    response.configuration !== null &&
                    response.configuration.game != null;
                if (response.spinToWin && response.spinToWin.studioLink) {
                    gcw['__temp_stw'].studioLink = response.spinToWin.studioLink;
                    if (initResponse) {
                        gcw['__temp_stw'].restore = true;
                    }
                    response.spinToWin.studioLink = null;
                }
                if (response.game &&
                    response.game.currentWallet &&
                    response.game.currentWallet.freeRounds) {
                    var freeRounds = response.game.currentWallet.freeRounds;
                    if (freeRounds.available) {
                        if (freeRounds.superWheel) {
                            gcw['__temp_sw'].forceActiveOnFR = true;
                        }
                        gcw['__temp_sw'].frConfiguration = freeRounds;
                    }
                }
                if (initResponse &&
                    response.game &&
                    response.game.currentWallet &&
                    swData.available) {
                    var wallet = response.game.currentWallet;
                    swData.initData.currency.symbol = wallet.currencySymbol;
                    swData.initData.currency.code = wallet.currencyCode;
                    swData.initData.currency.decimalCount = wallet.decimalSpaces;
                    swData.initData.mode = response.game.mode === 'REAL' ? 'REAL' : 'FUN';
                    if (swData.initData.mode === 'FUN') {
                        swData.skipPopup = true;
                    }
                    var slsw = window['SLSW'];
                    slsw.init(swData.initData);
                    if (this._loggingServiceUrl && this._ngsClient && typeof slsw.setLoggingConfig === 'function') {
                        slsw.setLoggingConfig(this._loggingServiceUrl, this._ngsClient.getUrl());
                    }
                    var gcwGameElement = document.getElementsByTagName('gcw-game').item(0);
                    if (!gcwGameElement) {
                        gcwGameElement = document.getElementsByTagName('ngc-game').item(0);
                    }
                    gcwGameElement.appendChild(slsw.getPresentationElements().swWrapper);
                    gcw['__temp_sw'].init = true;
                    if (this._superWheelPostInitialization) {
                        this._superWheelPostInitialization();
                    }
                }
                if (initResponse &&
                    response.superWheel &&
                    response.superWheel.studioLink) {
                    var balance = response.game.currentWallet.rm || response.game.currentWallet.fm;
                    swData.restore = true;
                    swData.response = {
                        studioLink: response.superWheel.studioLink,
                        balance: balance,
                        betAmount: 0,
                    };
                    if (gcw.utils.isInFreeSpins(response.game.events)) {
                        swData.freeSpins = true;
                    }
                }
                if (response.superWheel &&
                    response.superWheel.studioLink &&
                    !initResponse) {
                    var balance = response.game.currentWallet.rm || response.game.currentWallet.fm;
                    var betEvent = response.game.events.find(function (e) { return e.type == 'evt_bet_placed'; });
                    swData.response = {
                        studioLink: response.superWheel.studioLink,
                        balance: balance,
                        betAmount: betEvent ? betEvent.bet / betEvent.denom : 0,
                    };
                    if (!swData.teased) {
                        swData.teased = true;
                        if (!swData.superWheelGame) {
                            delay = window['SLSW'].runTeaserIfAvailable(true);
                        }
                    }
                }
                else if (swData.request.active && !swData.request.respin) {
                    if (!swData.teased) {
                        swData.teased = true;
                        if (!swData.superWheelGame) {
                            delay = window['SLSW'].runTeaserIfAvailable(false);
                        }
                    }
                }
                else {
                }
                return delay;
            };
            NgsGameAdapter.prototype._processNgsRequestSuperWheel = function (data, callback) {
                var _this = this;
                var ignoreSpin = false;
                var swData = gcw['__temp_sw'];
                var slsw = window['SLSW'];
                if (data && data.game && data.game.confirm) {
                    if (swData.request.active && swData.response) {
                    }
                    else if (swData.restore && !swData.freeSpins) {
                        swData.restore = false;
                        slsw.startSuperWheelRound({
                            soundEnabled: swData.sound,
                            studioLink: swData.response.studioLink,
                            balance: swData.response.balance,
                            betAmount: swData.swBet || swData.baseBet || swData.response.betAmount,
                        });
                        swData.endCallback = callback;
                        this._game.sendEvent('STOP');
                        this._game.sendEvent('START');
                        return;
                    }
                    else if (!swData.request.active && !swData.request.respin) {
                        if (slsw) {
                            slsw.notifyInactiveSpinCompleted();
                        }
                    }
                    callback();
                    return;
                }
                if (data && data.game && data.game.input) {
                    if (swData.saveSplashSkip ||
                        swData.savePopup ||
                        Object.keys(this._pendingConfigParams).length) {
                        if (!data.configuration) {
                            data.configuration = {};
                        }
                        if (!data.configuration.save) {
                            data.configuration.save = {};
                        }
                        if (!data.configuration.save.game) {
                            data.configuration.save.game = {};
                        }
                        if (swData.saveSplashSkip) {
                            data.configuration.save.game['skipSwIntro'] = 'true';
                            swData.saveSplashSkip = false;
                        }
                        if (swData.savePopup) {
                            data.configuration.save.game['swAutoEnable'] = swData.savePopup;
                            swData.savePopup = false;
                        }
                        if (Object.keys(this._pendingConfigParams).length) {
                            Object.keys(this._pendingConfigParams).forEach(function (key) {
                                return (data.configuration.save.game[key] =
                                    _this._pendingConfigParams[key]);
                            });
                            this._pendingConfigParams = {};
                        }
                    }
                    var inputEvent = null;
                    if (data && data.game && data.game.input && data.game.input.event) {
                        inputEvent = data.game.input.event;
                    }
                    else if (data &&
                        data.game &&
                        data.game.input &&
                        data.game.input.event &&
                        data.game.input.event.btnevt) {
                        inputEvent = data.game.input.event.btnevt;
                    }
                    if (inputEvent &&
                        inputEvent.betpl &&
                        inputEvent.bmode &&
                        inputEvent.denom &&
                        inputEvent.lines) {
                        swData.request.respin = false;
                    }
                    else {
                        swData.request.respin = true;
                    }
                    swData.teased = false;
                    swData.request.active = slsw && slsw.isSwButtonActive();
                    if (swData.blocked || swData.initData.mode === 'FUN') {
                        data.game.input.superWheel = {
                            enabled: false,
                            bet: 1,
                        };
                    }
                    else if (inputEvent &&
                        inputEvent.type === 'evt_btnpush' &&
                        inputEvent.button !== undefined &&
                        inputEvent.button != 'btn_start' &&
                        !inputEvent.preserveSuperWheel) {
                        if (slsw) {
                            gcw['__buyFeature'] = true;
                            slsw.forceSwButtonState(0);
                        }
                    }
                    else {
                        data.game.input.superWheel = {
                            enabled: swData.request.active,
                            bet: swData.swBet,
                        };
                    }
                    if (inputEvent) {
                        delete inputEvent.preserveSuperWheel;
                    }
                }
                if (swData && swData.response) {
                    if (data && data.game && data.game.input && !swData.skipped) {
                        var input = data.game.input;
                        if (input.event &&
                            input.event.button === 'btn_start' &&
                            input.event.type === 'evt_btnpush_conf') {
                            ignoreSpin = true;
                            this._eventListenerCall(gcw.api.GameEventType.NGS_RESPONSE, {});
                            this._game.sendEvent(gcw.api.GameEventType.NGS_RESPONSE, {});
                            swData.bufferedSpin = data;
                        }
                    }
                }
                if (!ignoreSpin) {
                    callback();
                }
                return;
            };
            NgsGameAdapter.prototype._checkIfErrorAlreadyProcessed = function (message) {
                var processedFlag = false;
                var feSkipFlag = false;
                if (gcw.utils.integration.isIntegrationActive(Relax)) {
                    if (gcw.utils.findCaseInsensitive(message.message || '', 'forbidden')) {
                        processedFlag = true;
                    }
                    if (gcw.utils.findCaseInsensitive(message.message || '', 'SPENDING_BUDGET_EXCEEDED') &&
                        gcw.utils.findCaseInsensitive(message.message || '', 'losslimit')) {
                        processedFlag = false;
                        feSkipFlag = true;
                        message.message = 'You have reached your loss limit.';
                        if (typeof window['enrichedWrapper'] !== 'undefined') {
                            var lang = window['enrichedWrapper'].game._initConf.locale;
                            if (gcw.utils.findCaseInsensitive(lang || '', 'NL')) {
                                message.message = 'Je hebt je bestedingslimiet overschreden.';
                            }
                            if (gcw.utils.findCaseInsensitive(lang || '', 'FI')) {
                                message.message = 'Olet saavuttanut tappiorajoituksesi.';
                            }
                        }
                    }
                }
                message.processed = processedFlag;
                message.feSkip = feSkipFlag;
            };
            NgsGameAdapter.prototype._eventListenerCall = function (type, data) {
                if (typeof this._eventListener == 'function') {
                    this._eventListener(type, data);
                }
            };
            NgsGameAdapter.prototype.updateBalanceViaHeartbeat = function () {
                var _this = this;
                this._ngsClient.sendHeartBeat(function (response) {
                    console.log("GCW NGS HEARTBEAT_RESPONSE " + JSON.stringify(response));
                    _this._eventListenerCall(gcw.api.GameEventType.HEARTBEAT_RESPONSE, response);
                    if (response && response.game && response.game.currentWallet) {
                        var wallet = response.game.currentWallet;
                        _this._game.sendEvent(gcw.api.GameEventType.WALLET_UPDATED, {
                            balance: wallet.rm,
                            free_balance: wallet.fm,
                        });
                    }
                });
            };
            NgsGameAdapter.prototype.saveConfigurationParameters = function (params) {
                var _this = this;
                Object.keys(params).forEach(function (k) { return (_this._pendingConfigParams[k] = params[k]); });
            };
            NgsGameAdapter.prototype.sendCloseSessionRequest = function () {
                this._ngsClient._sendNonSequentialRequestAndForget({
                    operation: { forceCloseSession: true },
                    date: new Date().toISOString(),
                });
            };
            NgsGameAdapter.prototype.setSuperWheelPostInitializationCallback = function (callback) {
                this._superWheelPostInitialization = callback;
            };
            return NgsGameAdapter;
        }());
        adapter.NgsGameAdapter = NgsGameAdapter;
    })(adapter = gcw.adapter || (gcw.adapter = {}));
})(gcw || (gcw = {}));
var gcw;
(function (gcw) {
    var adapter;
    (function (adapter) {
        var PokerstarsGameAdapter = (function () {
            function PokerstarsGameAdapter(game, gcwOpt, psOrigin) {
                var _this = this;
                this._isRoundActive = false;
                this._triggerAutoplayDeactivate = false;
                this._isAutoplayActive = false;
                this._pauseAfterRoundEnd = false;
                this._lastSoundUpdateFromPsWrapper = null;
                this._game = game;
                this._psOrigin = psOrigin;
                this._gameStartedFirstTime = false;
                window.addEventListener('message', function (msg) {
                    _this._recvMsg(msg);
                }, false);
            }
            PokerstarsGameAdapter.prototype._recvMsg = function (msg) {
                var pokerstarsEvent = JSON.parse(msg.data);
                switch (pokerstarsEvent['msgId']) {
                    case "xc2rgBalanceUpdated2": {
                        var wallet = {
                            balance: pokerstarsEvent.balance / 100,
                            free_balance: 0
                        };
                        this.sendEvent(gcw.api.GameEventType.WALLET_UPDATED, wallet);
                        break;
                    }
                    case "xc2rgPropertiesUpdated": {
                        this._lastSoundUpdateFromPsWrapper = pokerstarsEvent.keysAndValues['soundEnabled'];
                        this.sendEvent(gcw.api.GameEventType.GENERAL_SOUND_STATUS_CHANGED, pokerstarsEvent.keysAndValues['soundEnabled']);
                        break;
                    }
                    case "xc2rgSizeChanged": {
                        break;
                    }
                    case "xc2rgShowPaytable": {
                        this.sendEvent(gcw.api.GameEventType.PAY_TABLE_STATUS_CHANGED, true);
                        break;
                    }
                    case "xc2rgErrorHandled": {
                        break;
                    }
                    case "xc2rgPauseGame": {
                        if (this._isRoundActive && pokerstarsEvent["condition"]) {
                            this._pauseAfterRoundEnd = true;
                        }
                        else {
                            this.sendEvent(gcw.api.GameEventType.STOP);
                        }
                        break;
                    }
                    case "xc2rgResumeGame": {
                        this.sendEvent(gcw.api.GameEventType.START);
                        break;
                    }
                    case "xc2rgCloseGame": {
                        this.sendEvent(gcw.api.GameEventType.TERMINATE);
                        break;
                    }
                }
            };
            PokerstarsGameAdapter.prototype.setEventListener = function (eventListener) {
                var _this = this;
                this._eventListener = eventListener;
                this._game.setEventListener(function (type, data) {
                    switch (type) {
                        case gcw.api.GameEventType.PRELOADING_START: {
                            _this.rg2xcPreloaderStart();
                            break;
                        }
                        case gcw.api.GameEventType.PRELOADING_PROGRESS: {
                            _this.rg2xcPreloaderProgress(data / 100, '');
                            break;
                        }
                        case gcw.api.GameEventType.PRELOADING_END: {
                            _this.rg2xcPreloaderEnd();
                            break;
                        }
                        case gcw.api.GameEventType.NGS_RESPONSE: {
                            _this._handleRoundServerResponse(data);
                            break;
                        }
                        case gcw.api.GameEventType.INITIALIZE_SUCCESS: {
                            _this.rg2xcLaunchGameDone();
                            _this._game._ngsClient.onError(function (error) { });
                            _this._eventListenerCall(type, data);
                            break;
                        }
                        case gcw.api.GameEventType.START_SUCCESS: {
                            if (_this._gameStartedFirstTime) {
                                _this.rg2xcGameResumed();
                            }
                            else {
                                _this._gameStartedFirstTime = true;
                            }
                            break;
                        }
                        case gcw.api.GameEventType.ROUND_START: {
                            _this._isRoundActive = true;
                            _this._triggerAutoplayDeactivate = false;
                            _this.rg2xcGameStatusUpdated(PSRoundStatus.HAND_START);
                            break;
                        }
                        case gcw.api.GameEventType.ROUND_END: {
                            if (_this._game && _this._game.checkForFeatureAtRoundEnd) {
                                _this._game.checkForFeatureAtRoundEnd();
                            }
                            if (!_this._isRoundActive) {
                                break;
                            }
                            _this._isRoundActive = false;
                            _this.rg2xcGameStatusUpdated(PSRoundStatus.HAND_END);
                            if (_this._triggerAutoplayDeactivate) {
                                _this.rg2xcGameStatusUpdated(PSRoundStatus.AUTO_PLAY_END);
                                _this._triggerAutoplayDeactivate = false;
                                _this._isAutoplayActive = false;
                            }
                            if (_this._pauseAfterRoundEnd) {
                                if (_this._isAutoplayActive) {
                                    _this.sendEvent(gcw.api.GameEventType.AUTOPLAY_DEACTIVATE);
                                }
                                _this.sendEvent(gcw.api.GameEventType.STOP);
                                _this._pauseAfterRoundEnd = false;
                            }
                            break;
                        }
                        case gcw.api.GameEventType.AUTOPLAY_ACTIVATE: {
                            _this.rg2xcGameStatusUpdated(PSRoundStatus.AUTO_PLAY_START);
                            _this._isAutoplayActive = true;
                            break;
                        }
                        case gcw.api.GameEventType.AUTOPLAY_DEACTIVATE: {
                            if (!_this._isRoundActive) {
                                _this.rg2xcGameStatusUpdated(PSRoundStatus.AUTO_PLAY_END);
                                _this._isAutoplayActive = false;
                            }
                            else {
                                _this._triggerAutoplayDeactivate = true;
                            }
                            break;
                        }
                        case gcw.api.GameEventType.SOUND_EFFECTS_STATUS_CHANGE:
                        case gcw.api.GameEventType.GENERAL_SOUND_STATUS_CHANGE: {
                            if (_this._lastSoundUpdateFromPsWrapper !== data) {
                                _this.rg2xcPropertiesUpdated(data);
                            }
                            _this._lastSoundUpdateFromPsWrapper = null;
                            break;
                        }
                        case gcw.api.GameEventType.STOP_SUCCESS: {
                            _this.rg2xcGamePaused();
                            break;
                        }
                        case gcw.api.GameEventType.RESULTS_SHOWN: {
                            _this.rg2xcGameResultShown();
                            break;
                        }
                        case gcw.api.GameEventType.ERROR: {
                            if (_this.isBlockErrorFromPs(data)) {
                                _this.sendEvent(gcw.api.GameEventType.ERROR_HANDLED, data);
                                break;
                            }
                            _this._checkPSErrorString(data.errorCode, 'Error handler');
                            _this.sendEvent(gcw.api.GameEventType.ERROR_HANDLED, data);
                            break;
                        }
                        case gcw.api.GameEventType.TOTAL_BET_UPDATE: {
                            _this.rg2xcGameWagerUpdated(data);
                            break;
                        }
                        case gcw.api.GameEventType.TOTAL_WIN_UPDATE: {
                            _this.rg2xcGameWonUpdated(data);
                            break;
                        }
                        case gcw.api.GameEventType.TERMINATE_SUCCESS: {
                            _this.rg2xcGameReadyForUnload('');
                            break;
                        }
                        case gcw.api.GameEventType.HOME:
                            _this.rg2xcUIElementClicked(PSUIElement.LOBBY);
                            break;
                        case gcw.api.GameEventType.CASHIER: {
                            _this.rg2xcUIElementClicked(PSUIElement.CASHIER);
                            break;
                        }
                        default: {
                            _this._eventListenerCall(type, data);
                        }
                    }
                });
            };
            PokerstarsGameAdapter.prototype.isBlockErrorFromPs = function (data) {
                if (data.errorCode === '999' && data.errorMessage === 'Interrupted Game') {
                    return true;
                }
                return data.errorCode === 'CASINO_PLATFORM_INTEGRATION_ERROR';
            };
            PokerstarsGameAdapter.prototype._handleRoundServerResponse = function (data) {
                if (data && data.status && data.status.code) {
                    this._checkPSErrorString(data.status.externalCode, 'start game round error');
                }
                var res = data && data.game && data.game.messagesAfterGameEvents && data.game.messagesAfterGameEvents.length > 0 && data.game.messagesAfterGameEvents[0];
                if (res && (res.externalCode || res.message)) {
                    var errorMessage = res.externalCode ? res.externalCode : res.message;
                    var errorData = { errorCode: errorMessage };
                    if (res.externalMessage) {
                        errorData['errorMessage'] = res.externalMessage;
                    }
                    this._checkPSErrorString(errorMessage, 'end game round error');
                    if (data.game.messagesAfterGameEvents[0].message) {
                        data.game.messagesAfterGameEvents = [];
                    }
                }
            };
            PokerstarsGameAdapter.prototype._checkPSErrorString = function (extCode, log) {
                if (extCode) {
                    if (extCode === 'INSUFFICIENT_FUNDS' || extCode === 'PsApiInsufficientFundsError') {
                        this.rg2xcErrorOccurred(log, PSErrors.INSUFFICIENT_FUNDS_ERROR, null);
                    }
                    else if (extCode === 'PsApiTemporaryUnavailableError') {
                        this.rg2xcErrorOccurred(log, PSErrors.GENERIC_XC_ERROR, 'TemporaryUnavailableError');
                    }
                    else if (extCode === 'PsApiSystemError') {
                        this.rg2xcErrorOccurred(log, PSErrors.SYSTEM_ERROR, null);
                    }
                    else if (extCode === 'PsApiSessionTerminatedError') {
                        this.rg2xcErrorOccurred(log, PSErrors.SESSION_EXPIRED_ERROR, null);
                    }
                    else if (extCode === 'PsApiRegulatoryError') {
                        this.rg2xcErrorOccurred(log, PSErrors.GENERIC_XC_ERROR, 'RegulatoryError');
                    }
                    else {
                        this.rg2xcErrorOccurred(log, PSErrors.GENERIC_ERROR, null);
                    }
                    if (this._isAutoplayActive) {
                        this.rg2xcGameStatusUpdated(PSRoundStatus.AUTO_PLAY_END);
                        this._isAutoplayActive = false;
                    }
                }
            };
            PokerstarsGameAdapter.prototype.rg2xcPreloaderStart = function () {
                var message = {
                    'msgId': 'rg2xcPreloaderStart'
                };
                this.sendMessage(message);
            };
            PokerstarsGameAdapter.prototype.rg2xcPreloaderProgress = function (percentage, localizedText) {
                var message = {
                    'msgId': 'rg2xcPreloaderProgress',
                    'percentage': percentage,
                    'localizedText:': localizedText
                };
                this.sendMessage(message);
            };
            PokerstarsGameAdapter.prototype.rg2xcPreloaderEnd = function () {
                var message = {
                    'msgId': 'rg2xcPreloaderEnd'
                };
                this.sendMessage(message);
            };
            PokerstarsGameAdapter.prototype.rg2xcLaunchGameDone = function () {
                var message = {
                    'msgId': 'rg2xcLaunchGameDone'
                };
                this.sendMessage(message);
            };
            PokerstarsGameAdapter.prototype.rg2xcGameResultShown = function () {
                var message = {
                    'msgId': 'rg2xcGameResultShown'
                };
                this.sendMessage(message);
            };
            PokerstarsGameAdapter.prototype.rg2xcErrorOccurred = function (error, type, details) {
                var message = {
                    'msgId': 'rg2xcErrorOccurred',
                    'error': type
                };
                if (details) {
                    message['details'] = details;
                }
                this.sendMessage(message);
            };
            PokerstarsGameAdapter.prototype.rg2xcGameWagerUpdated = function (value) {
                if (!this._gameStartedFirstTime) {
                    return;
                }
                var message = {
                    'msgId': 'rg2xcGameWagerUpdated',
                    'value': value
                };
                this.sendMessage(message);
            };
            PokerstarsGameAdapter.prototype.rg2xcGameWonUpdated = function (value) {
                var message = {
                    'msgId': 'rg2xcGameWonUpdated',
                    'value': value
                };
                this.sendMessage(message);
            };
            PokerstarsGameAdapter.prototype.rg2xcGameReadyForUnload = function (localizedMessage) {
                var message = {
                    'msgId': 'rg2xcGameReadyForUnload',
                    'localizedMessage': localizedMessage
                };
                this.sendMessage(message);
            };
            PokerstarsGameAdapter.prototype.rg2xcUIElementClicked = function (elementId) {
                var message = {
                    'msgId': 'rg2xcUIElementClicked',
                    'elementId': elementId
                };
                this.sendMessage(message);
            };
            PokerstarsGameAdapter.prototype.rg2xcGameStatusUpdated = function (status) {
                if (!this._gameStartedFirstTime) {
                    return;
                }
                var message = {
                    'msgId': 'rg2xcGameStatusUpdated',
                    'status': status
                };
                this.sendMessage(message);
            };
            PokerstarsGameAdapter.prototype.rg2xcPropertiesUpdated = function (soundEnabled) {
                var message = {
                    'msgId': 'rg2xcPropertiesUpdated',
                    'soundEnabled': soundEnabled
                };
                this.sendMessage(message);
            };
            PokerstarsGameAdapter.prototype.rg2xcGamePaused = function () {
                var message = {
                    'msgId': 'rg2xcGamePaused'
                };
                this.sendMessage(message);
            };
            PokerstarsGameAdapter.prototype.rg2xcGameResumed = function () {
                var message = {
                    'msgId': 'rg2xcGameResumed'
                };
                this.sendMessage(message);
            };
            PokerstarsGameAdapter.prototype.sendMessage = function (message) {
                window.parent.postMessage(JSON.stringify(message), this._psOrigin);
            };
            PokerstarsGameAdapter.prototype._eventListenerCall = function (type, data) {
                if (typeof this._eventListener == "function") {
                    this._eventListener(type, data);
                }
            };
            PokerstarsGameAdapter.prototype.sendEvent = function (type, data) {
                this._game.sendEvent(type, data);
            };
            PokerstarsGameAdapter.prototype.setSuperWheelPostInitializationCallback = function (callback) {
                if (this._game.setSuperWheelPostInitializationCallback) {
                    this._game.setSuperWheelPostInitializationCallback(callback);
                }
            };
            PokerstarsGameAdapter.prototype.updateBalanceViaHeartbeat = function () {
                if (this._game.updateBalanceViaHeartbeat) {
                    this._game.updateBalanceViaHeartbeat();
                }
            };
            PokerstarsGameAdapter.prototype.saveConfigurationParameters = function (params) {
                if (this._game.saveConfigurationParameters) {
                    this._game.saveConfigurationParameters(params);
                }
            };
            return PokerstarsGameAdapter;
        }());
        adapter.PokerstarsGameAdapter = PokerstarsGameAdapter;
        var PSUIElement = (function () {
            function PSUIElement() {
            }
            PSUIElement.LOBBY = 'lobby';
            PSUIElement.CASHIER = 'cashier';
            return PSUIElement;
        }());
        adapter.PSUIElement = PSUIElement;
        var PSRoundStatus = (function () {
            function PSRoundStatus() {
            }
            PSRoundStatus.HAND_START = 'handStart';
            PSRoundStatus.HAND_END = 'handEnd';
            PSRoundStatus.AUTO_PLAY_START = 'autoPlayStart';
            PSRoundStatus.AUTO_PLAY_END = 'autoPlayEnd';
            return PSRoundStatus;
        }());
        adapter.PSRoundStatus = PSRoundStatus;
        var PSErrors = (function () {
            function PSErrors() {
            }
            PSErrors.INSUFFICIENT_FUNDS_ERROR = 'insufficientFundsError';
            PSErrors.GAME_ROUND_END_INSUFFICIENT_FUNDS_ERROR = 'gameRoundEndInsufficientFundsError';
            PSErrors.COMMUNICATION_ERROR = 'communicationError';
            PSErrors.SYSTEM_ERROR = 'systemError';
            PSErrors.SESSION_EXPIRED_ERROR = 'sessionExpiredError';
            PSErrors.GENERIC_XC_ERROR = 'genericXCError';
            PSErrors.GENERIC_ERROR = 'genericError';
            return PSErrors;
        }());
        adapter.PSErrors = PSErrors;
    })(adapter = gcw.adapter || (gcw.adapter = {}));
})(gcw || (gcw = {}));
var gcw;
(function (gcw) {
    var gamebrand;
    (function (gamebrand) {
        var ErrDecorator = (function () {
            function ErrDecorator() {
            }
            ErrDecorator.prototype.getErrDlgStyle = function () {
                return '<style>@font-face { font-family: \'dejavu-sans-condensed\'; src: url(\'/fonts/DejaVuSansCondensed.eot\'); src: url(\'/fonts/DejaVuSansCondensed.eot?#iefix\') format(\'embedded-opentype\'), url(\'/fonts/DejaVuSansCondensed.woff2\') format(\'woff2\'), url(\'/fonts/DejaVuSansCondensed.woff\') format(\'woff\'), url(\'/fonts/DejaVuSansCondensed.ttf\')  format(\'truetype\'), url(\'/fonts/DejaVuSansCondensed.svg#svgFontName\') format(\'svg\'); }'
                    + '#gcw-error-dlg { display: none; font-family: dejavu-sans-condensed, Arial, sans-serif; z-index: 10000; overflow: auto; position: absolute; top: 0; left: 0; width: 100%; height: 100%; }'
                    + '#gcw-error-dlg #gcw-error-dlg-middle { width: 100%; height: 100%; top: 0; left: 0; background-color: rgba(0,0,0,0.5); position: absolute; display: flex; justify-content: center; }'
                    + '#gcw-error-dlg #gcw-error-dlg-middle .modal-content { -webkit-border-radius: 12px; -moz-border-radius: 12px; border-radius: 12px; border: 1px solid #fff; background-color: #191919; position: relative; width: 50%; max-width: 520px; text-align: center; align-self: center; }'
                    + '#gcw-error-dlg #gcw-error-dlg-middle .modal-content .modal-header { background-image: url(/images/cross.png); background-repeat: no-repeat; background-size: 70px; background-position: center 28px; padding-top: 140px; padding-left: 20px; padding-right: 20px; }'
                    + '#gcw-error-dlg #gcw-error-dlg-middle .modal-content .modal-header h2 { font-weight: bold; text-align: center; text-transform: uppercase; margin-bottom: 5px; color: #fff; font-size: 28px; line-height: 28px; position: relative; }'
                    + '#gcw-error-dlg #gcw-error-dlg-middle .modal-content .modal-body { color: #FFFFFF; text-align: center; font-size: 17px; line-height: 24px; min-height: 90px; padding: 0 20px;'
                    + '#gcw-error-dlg #gcw-error-dlg-middle .modal-content .modal-body .gcw-error-dlg-content{ padding-top: 15px; }'
                    + '#gcw-error-dlg #gcw-error-dlg-middle .modal-content #gcw-error-dlg-close { display: inline-block; -webkit-border-radius: 8px; -moz-border-radius: 8px; border-radius: 8px; margin: 10px auto 40px; text-decoration: none; text-align: center; background-color: transparent; color: #fff; border: 1px solid #fff; padding: 15px 20px; font-size: 28px; line-height: 28px; font-weight: bold; }'
                    + '#gcw-error-dlg #gcw-error-dlg-middle .modal-content #gcw-error-dlg-close:hover { background-color: #333; }'
                    + '#gcw-error-dlg #gcw-error-dlg-middle .modal-content #gcw-error-dlg-close:focus { cursor: pointer; }'
                    + '@media (max-width: 768px) {'
                    + '#gcw-error-dlg #gcw-error-dlg-middle .modal-content { width: 70%; max-width: none; }'
                    + '#gcw-error-dlg #gcw-error-dlg-middle .modal-content .modal-header { padding-top: 110px; background-position: center 20px; }'
                    + '#gcw-error-dlg #gcw-error-dlg-middle .modal-content .modal-header h2 { font-size: 23px; line-height: 23px; margin-bottom: 20px; }'
                    + '#gcw-error-dlg #gcw-error-dlg-middle .modal-content .modal-body { min-height: 25px; font-size: 15px; line-height: 16px; }'
                    + '#gcw-error-dlg #gcw-error-dlg-middle .modal-content #gcw-error-dlg-close { font-size: 18px; line-height: 21px; padding: 10px 15px; margin-top: 25px; margin-bottom: 15px; } }</style>';
            };
            return ErrDecorator;
        }());
        gamebrand.ErrDecorator = ErrDecorator;
    })(gamebrand = gcw.gamebrand || (gcw.gamebrand = {}));
})(gcw || (gcw = {}));
var UNDEFINED = 'undefined';
var FUNCTION = 'function';
var gcw;
(function (gcw) {
    var gamebrand;
    (function (gamebrand) {
        var GmApiFactoryImpl = (function () {
            function GmApiFactoryImpl() {
            }
            GmApiFactoryImpl.prototype.getGmApi = function (realityCheck, initConf) {
                if (typeof (leanderGMApi) != UNDEFINED) {
                    if (leanderGMApi && leanderGMApi.initialized) {
                        return leanderGMApi;
                    }
                }
                else {
                    gamePaused = false;
                    var paramIFrame = checkIFrameParam();
                    if (paramIFrame === gcw.adapter.gmapi.UnibetGmApi.UNIBET_I_FRAME_KEY) {
                        unibetGmApi = new gcw.adapter.gmapi.UnibetGmApi(realityCheck, initConf);
                        unibetGmApi.init();
                        console.warn('Unibet Gm API adapter initialized');
                        return unibetGmApi;
                    }
                    if (paramIFrame === gcw.adapter.gmapi.RelaxGmApi.RELAX_I_FRAME_KEY) {
                        relaxGmApi = new gcw.adapter.gmapi.RelaxGmApi(realityCheck, initConf);
                        relaxGmApi.loadScript();
                        console.warn('Relax Gm API adapter initialized');
                        return relaxGmApi;
                    }
                    console.warn('Default Gm API adapter initialized');
                    var result = new gcw.adapter.gmapi.DefaultGmApi(realityCheck, initConf);
                    result.init();
                    return result;
                }
            };
            return GmApiFactoryImpl;
        }());
        gamebrand.GmApiFactoryImpl = GmApiFactoryImpl;
        function checkIFrameParam() {
            var url_string = window.location.href;
            var url = new URL(url_string);
            return url.searchParams.get("paramIFrame");
        }
    })(gamebrand = gcw.gamebrand || (gcw.gamebrand = {}));
})(gcw || (gcw = {}));
(function (gcw) {
    var adapter;
    (function (adapter) {
        var lega;
        (function (lega) {
            function _extractQueryParamValue(queryString, parameter) {
                if (queryString && parameter) {
                    var queryVars = void 0;
                    if (/\?/.test(queryString)) {
                        queryVars = queryString.split("?")[1];
                    }
                    var pairs = queryVars.split("&");
                    for (var i = 0; i < pairs.length; i++) {
                        if (pairs[i].substring(0, pairs[i].indexOf("=")) == parameter) {
                            return pairs[i].substring((pairs[i].indexOf("=") + 1));
                        }
                    }
                }
                return "";
            }
            function _extractLeanderGMApiScriptsPath() {
                var queryString = document.location.search || document.location.hash;
                var apiAddress = _extractQueryParamValue(queryString, "apiAddress");
                var apiPath = decodeURIComponent(apiAddress);
                if (apiPath) {
                    var regExp = new RegExp("/[\"'<>=?\[\]\{\}]/gi");
                    if (regExp.test(apiPath)) {
                        apiPath = "../../";
                    }
                }
                else {
                    apiPath = "../../";
                }
                return apiPath;
            }
            function loadLeanderGMApi(callback) {
                gamePaused = false;
                console.info('lega api load');
                var apiFile = "leandergmapi/4/LeanderApiLoader.php";
                var apiPath = _extractLeanderGMApiScriptsPath();
                gcw.load.loadScript(apiPath + apiFile, function () {
                    function leanderGMApiInitialize() {
                        if (typeof (leanderGMApi) != UNDEFINED) {
                            if (leanderGMApi && leanderGMApi.initialized) {
                                console.info('lega api loaded');
                                callback(leanderGMApi);
                            }
                            else {
                                console.debug('lega api loading ...');
                                setTimeout(leanderGMApiInitialize, 100);
                            }
                        }
                    }
                    setTimeout(leanderGMApiInitialize, 0);
                });
            }
            lega.loadLeanderGMApi = loadLeanderGMApi;
            function sessionRequest(legaGMApi, callback) {
                console.info('lega session request');
                var subscribeToSessionIdEvent = legaGMApi.subscribeToEvent(legaGMApi.publications.SESSION_DATA_UPDATED, function (response) {
                    var sessionId = response.data;
                    legaGMApi.unsubscribeFromEvent(subscribeToSessionIdEvent);
                    callback(sessionId);
                });
                legaGMApi.sendSessionRequest();
            }
            lega.sessionRequest = sessionRequest;
            function initSession(callback) {
                loadLeanderGMApi(function (legaGMApi) {
                    sessionRequest(legaGMApi, function (sessionId) {
                        console.info('lega session initialized');
                        callback(legaGMApi, sessionId);
                    });
                });
            }
            lega.initSession = initSession;
            function initGameSessionUrl(legaUrl, onResponse, onError) {
                initSession(function (legaGMApi, sessionId) {
                    var request = {
                        legaSessionId: sessionId,
                        platform: null
                    };
                    if (legaGMApi.gameOptions && legaGMApi.gameOptions.channel) {
                        if (legaGMApi.gameOptions.channel == 'mobile') {
                            request.platform = 'MOBILE';
                        }
                        else if (legaGMApi.gameOptions.channel == 'desktop') {
                            request.platform = 'DESKTOP';
                        }
                    }
                    new gcw.http.HttpRequest()
                        .url(legaUrl)
                        .method('POST')
                        .onResponse(function (response) {
                        if (response && !response['error']) {
                            console.info('NGS lega session request successful');
                            _handleInterruptedState(legaGMApi, response['isInterrupted']);
                            onResponse(response.gameSessionUrl, response.freePlaysData, response['isInterrupted']);
                        }
                        else {
                            console.error('NGS lega session request failed');
                            _sendErrorToLega(legaGMApi, response, onError);
                        }
                    })
                        .send(request);
                });
            }
            lega.initGameSessionUrl = initGameSessionUrl;
            function _handleInterruptedState(gmApi, isInterrupted) {
                if (isInterrupted) {
                    console.debug('lega interrupted state detected');
                    gamePaused = true;
                    gmApi.subscribeToEvent(gmApi.publications.ERROR_HANDLED, function () {
                        gamePaused = false;
                    });
                    var errorOccurred = {
                        code: 999,
                        confirmLabel: 'OK',
                        criticalType: false,
                        message: '',
                        redirect: null,
                        isWrapperError: true
                    };
                    gmApi.publishEvent(gmApi.publications.ERROR_OCCURRED, {
                        data: errorOccurred.code,
                        error: errorOccurred
                    });
                }
            }
            function _sendErrorToLega(gmApi, response, fallback) {
                var errorData = {
                    errorCode: response['externalErrorCode'],
                    errorMessage: response['externalErrorMessage'],
                    data: response
                };
                var errorCodeNum = Number(errorData.errorCode);
                if (adapter.CasinoError.hasErrorCode(errorCodeNum)) {
                    if (typeof this._errorData === 'object') {
                        var err = adapter.CasinoError.getErrorByCode(errorCodeNum);
                        response.fatal = err.fatal;
                    }
                    else {
                        response.fatal = true;
                    }
                    if (gmApi instanceof gcw.adapter.gmapi.DefaultGmApi) {
                        fallback(response);
                    }
                    else {
                        gmApi.publishEvent(gmApi.publications.ERROR_OCCURRED, {
                            data: errorCodeNum,
                            error: {
                                code: errorCodeNum,
                                message: errorData.errorMessage
                            }
                        });
                    }
                }
                else {
                    response.fatal = true;
                    fallback(response);
                }
            }
        })(lega = adapter.lega || (adapter.lega = {}));
    })(adapter = gcw.adapter || (gcw.adapter = {}));
})(gcw || (gcw = {}));
var gcw;
(function (gcw) {
    var load;
    (function (load) {
        function loadScriptPrivate(url, namespace, callback) {
            loadScript(url, function () {
                var lib = window[namespace];
                window[namespace] = {};
                delete window[namespace];
                callback(lib);
            });
        }
        load.loadScriptPrivate = loadScriptPrivate;
        function loadScript(url, callback) {
            var script = document.createElement('script');
            script.type = 'text/javascript';
            script.charset = 'utf-8';
            script.src = url;
            if (script.readyState) {
                script.onreadystatechange = function () {
                    var loaded = script.readyState == 'loaded';
                    var completed = script.readyState == 'complete';
                    if (loaded || completed) {
                        script.onreadystatechange = null;
                        if (typeof callback == 'function') {
                            callback();
                        }
                    }
                };
            }
            else {
                script.onload = function () {
                    if (typeof callback == 'function') {
                        callback();
                    }
                };
            }
            document.getElementsByTagName("head")[0].appendChild(script);
        }
        load.loadScript = loadScript;
        function loadScripts(urls, callback) {
            urls.reverse();
            var callbackTmp = callback;
            for (var i = 0; i < urls.length; i++) {
                var url = urls[i];
                callbackTmp = (function (url, callbackTmp) {
                    return function () {
                        loadScript(url, function () {
                            callbackTmp();
                        });
                    };
                })(url, callbackTmp);
            }
            callbackTmp();
        }
        load.loadScripts = loadScripts;
        function loadImage(url, callback) {
            var img = new Image();
            img.src = url;
            if (img.readyState) {
                img.onreadystatechange = function () {
                    if (typeof callback == 'function') {
                        callback();
                    }
                };
            }
            else {
                img.onload = function () {
                    if (typeof callback == 'function') {
                        callback();
                    }
                };
            }
        }
        load.loadImage = loadImage;
        function loadCss(url, callback) {
            var link = document.createElement("link");
            link.type = "text/css";
            link.rel = "stylesheet";
            link.href = url;
            if (link.readyState) {
                link.onreadystatechange = function () {
                    if (typeof callback == 'function') {
                        callback();
                    }
                };
            }
            else {
                link.onload = function () {
                    if (typeof callback == 'function') {
                        callback();
                    }
                };
            }
            document.getElementsByTagName("head")[0].appendChild(link);
        }
        load.loadCss = loadCss;
    })(load = gcw.load || (gcw.load = {}));
})(gcw || (gcw = {}));
var gcw;
(function (gcw) {
    var l12n;
    (function (l12n) {
        var L12n = (function () {
            function L12n() {
            }
            L12n.RESOURCE_BUNDLE = {
                "default": {
                    "INVALID_PHASE": "Invalid phase.",
                    "CONNECTION_LOST": "Connection to server has been lost.",
                    "FAILED_TO_LOAD_ASSETS": "Unable to load game assets.",
                    "UNKNOWN": "Unknown error.",
                    "UNSUPPORTED_BROWSER": "This browser (Internet Explorer) is not supported."
                },
                "en_US": {
                    "UNSUPPORTED_BROWSER": "This browser (Internet Explorer) is not supported."
                },
                "xx_XA": {
                    "UNSUPPORTED_BROWSER": "     ( )."
                },
                "bg_BG": {
                    "UNSUPPORTED_BROWSER": "  (Internet Explorer)   ."
                },
                "cs_CZ": {
                    "UNSUPPORTED_BROWSER": "Tento prohle (Internet Explorer) nen podporovn."
                },
                "da_DK": {
                    "UNSUPPORTED_BROWSER": "Denne browser (Internet Explorer) understttes ikke."
                },
                "de_DE": {
                    "UNSUPPORTED_BROWSER": "Dieser Browser (Internet Explorer) wird nicht untersttzt"
                },
                "el_GR": {
                    "UNSUPPORTED_BROWSER": "   (Internet Explorer)  ."
                },
                "es_ES": {
                    "UNSUPPORTED_BROWSER": "Este navegador (Internet Explorer) no es compatible."
                },
                "fi_FI": {
                    "UNSUPPORTED_BROWSER": "Tt selainta (Internet Explorer) ei tueta."
                },
                "fr_FR": {
                    "UNSUPPORTED_BROWSER": "Ce navigateur (Internet Explorer) n'est pas support."
                },
                "hr_HR": {
                    "UNSUPPORTED_BROWSER": "Ovaj preglednik (Internet Explorer) nije podran."
                },
                "hu_HU": {
                    "UNSUPPORTED_BROWSER": "Ezt a bngszt (Internet Explorer) a jtk nem tmogatja."
                },
                "it_IT": {
                    "UNSUPPORTED_BROWSER": "Questo browser (Internet Explorer) non  supportato."
                },
                "jp_JP": {
                    "UNSUPPORTED_BROWSER": "Internet Explorer"
                },
                "ka_KA": {
                    "UNSUPPORTED_BROWSER": "  (Internet Explorer)   ."
                },
                "nl_NL": {
                    "UNSUPPORTED_BROWSER": "Deze webbrowser (Internet Explorer) wordt niet ondersteund."
                },
                "nn_NO": {
                    "UNSUPPORTED_BROWSER": "Denne nettleseren (Internet Explorer) stttes ikke."
                },
                "pl_PL": {
                    "UNSUPPORTED_BROWSER": "Ta przegldarka (Internet Explorer) nie jest obsugiwana."
                },
                "pt_BR": {
                    "UNSUPPORTED_BROWSER": "O navegador (Internet Explorer) no  suportado."
                },
                "pt_PT": {
                    "UNSUPPORTED_BROWSER": "Este browser (Internet Explorer) no  suportado."
                },
                "ro_RO": {
                    "UNSUPPORTED_BROWSER": "Acest browser (Internet Explorer) nu este suportat."
                },
                "ru_RU": {
                    "UNSUPPORTED_BROWSER": "  (Internet Explorer)  ."
                },
                "sk_SK": {
                    "UNSUPPORTED_BROWSER": "Tento prehliada (Internet Explorer) nie je podporovan."
                },
                "sl_SL": {
                    "UNSUPPORTED_BROWSER": "Za brskalnik (Internet Explorer) ni podprt."
                },
                "sv_SE": {
                    "UNSUPPORTED_BROWSER": "Denna webblsare (Internet Explorer) stds inte."
                },
                "tr_TR": {
                    "UNSUPPORTED_BROWSER": "Bu tarayc (Internet Explorer) desteklenmemektedir."
                },
                "uk_UA": {
                    "UNSUPPORTED_BROWSER": "  (Internet Explorer)  ."
                },
                "zh_CN": {
                    "UNSUPPORTED_BROWSER": " (Internet Explorer)"
                },
                "zh_HK": {
                    "UNSUPPORTED_BROWSER": "Internet Explorer"
                }
            };
            return L12n;
        }());
        l12n.L12n = L12n;
    })(l12n = gcw.l12n || (gcw.l12n = {}));
})(gcw || (gcw = {}));
var gcw;
(function (gcw) {
    var adapter;
    (function (adapter) {
        var GameEventType = gcw.api.GameEventType;
        var CasinoGameAdapter = (function () {
            function CasinoGameAdapter(game, initConf, realityCheck, integrationData, loggingServiceUrl) {
                this._eventListeners = [];
                this._gameInitialized = false;
                this.RELAX_CUSTOM_ERROR = 'CUSTOM_ERROR';
                this._game = game;
                game.setSuperWheelPostInitializationCallback(this._superWheelPostInitialization.bind(this));
                this._initConf = initConf;
                this._gameInitialized = false;
                this._freePlaysData =
                    integrationData &&
                        integrationData.wallet &&
                        integrationData.wallet.freePlaysData;
                this._hasFreePlaysData =
                    integrationData &&
                        integrationData.wallet &&
                        integrationData.wallet.hasFreePlaysData;
                this._isInterrupted =
                    integrationData &&
                        integrationData.wallet &&
                        integrationData.wallet.isInterrupted;
                this._loggingServiceUrl = loggingServiceUrl;
                var gmApiFactory = new (gcw).gamebrand.GmApiFactoryImpl();
                this._gmApi = gmApiFactory.getGmApi(realityCheck, initConf);
            }
            Object.defineProperty(CasinoGameAdapter.prototype, "frontendIntegrationModule", {
                set: function (module) {
                    this._feIntegration = module;
                },
                enumerable: true,
                configurable: true
            });
            CasinoGameAdapter.prototype.addEventListener = function (eventListener) {
                if (typeof this._eventListeners === 'object') {
                    this._eventListeners.push(eventListener);
                }
            };
            CasinoGameAdapter.prototype.replaceFirstEventListener = function (eventListener) {
                if (typeof this._eventListeners === 'object') {
                    if (this._eventListeners.length > 0) {
                        this._eventListeners[0] = eventListener;
                    }
                    else {
                        this._eventListeners.push(eventListener);
                    }
                }
            };
            CasinoGameAdapter.prototype.getEventListeners = function () {
                return this._eventListeners;
            };
            CasinoGameAdapter.prototype.setEventListener = function (eventListener) {
                var _this = this;
                this.addEventListener(eventListener);
                var game = this._game;
                var gameEventType = gcw.api.GameEventType;
                var gmApi = this._gmApi;
                var swData = gcw['__temp_sw'];
                game.setEventListener(function (type, data) {
                    switch (type) {
                        case gameEventType.CURRENCY_FORMATTING_RESPONSE:
                            gmApi.setCurrencyFormat(data.prefix, data.suffix, data.decimalPlaces, data.decimalSeparator, data.groupingSeparator, data.prefixSeparator, data.suffixSeparator);
                            if (_this._feIntegration) {
                                _this._feIntegration.trigger(gameEventType.CURRENCY_FORMATTING_RESPONSE, data);
                            }
                            break;
                        case gameEventType.INITIALIZE_SUCCESS:
                            _this._gameInitialized = true;
                            gmApi.publishEvent(gmApi.publications.INITIALIZED, null);
                            _this._eventListenerCall(gameEventType.INITIALIZE_SUCCESS, data);
                            break;
                        case gameEventType.PRELOADING_START:
                            gmApi.publishEvent(gmApi.publications.PRELOADING_STARTED, null);
                            if (_this._feIntegration) {
                                _this._feIntegration.trigger(gameEventType.PRELOADING_START, {});
                            }
                            break;
                        case gameEventType.PRELOADING_PROGRESS:
                            var percentLoaded = data;
                            gmApi.publishEvent(gmApi.publications.PRELOADING_PROGRESS_UPDATED, percentLoaded);
                            if (_this._feIntegration) {
                                _this._feIntegration.trigger(gameEventType.PRELOADING_PROGRESS, percentLoaded);
                            }
                            break;
                        case gameEventType.HEARTBEAT_RESPONSE:
                            console.log("GCW HEARTBEAT_RESPONSE " + JSON.stringify(data));
                            if (_this._feIntegration) {
                                _this._feIntegration.trigger(gameEventType.HEARTBEAT_RESPONSE, data);
                            }
                            break;
                        case gameEventType.PRELOADING_END:
                            gmApi.publishEvent(gmApi.publications.PRELOADING_ENDED, null);
                            if (_this._feIntegration) {
                                _this._feIntegration.trigger(gameEventType.PRELOADING_END, {});
                            }
                            break;
                        case gameEventType.VERSION_RESPONSE:
                            var gameVersion = data;
                            gmApi.publishEvent(gmApi.publications.GAME_VERSION_UPDATE, gameVersion);
                            break;
                        case gameEventType.GENERAL_SOUND_STATUS_CHANGE:
                            var soundActive = data;
                            gmApi.publishEvent(gmApi.publications.GENERAL_SOUND_STATUS_CHANGED_GAME, soundActive);
                            if (_this._feIntegration) {
                                _this._feIntegration.trigger(gameEventType.GENERAL_SOUND_STATUS_CHANGE, soundActive);
                            }
                            if (swData) {
                                swData.sound = soundActive;
                            }
                            var slsw = window['SLSW'];
                            if (slsw) {
                                slsw.setSoundVolume(soundActive ? 1 : 0);
                            }
                            break;
                        case gameEventType.MUSIC_STATUS_CHANGE:
                            var musicActive = data;
                            gmApi.publishEvent(gmApi.publications.MUSIC_STATUS_CHANGED_GAME, musicActive);
                            break;
                        case gameEventType.SOUND_EFFECTS_STATUS_CHANGE:
                            var effectsActive = data;
                            gmApi.publishEvent(gmApi.publications.SOUND_EFFECTS_STATUS_CHANGED_GAME, effectsActive);
                            break;
                        case gameEventType.CONTROL_PANEL_STATUS_CHANGE:
                            var panelVisible = data;
                            gmApi.publishEvent(gmApi.publications.CONTROL_PANEL_STATUS_CHANGED_GAME, panelVisible);
                            break;
                        case gameEventType.ABOUT_STATUS_CHANGE:
                            var aboutVisible = data;
                            gmApi.publishEvent(gmApi.publications.ABOUT_GAME_STATUS_CHANGED_GAME, aboutVisible);
                            if (_this._feIntegration) {
                                _this._feIntegration.trigger(gameEventType.ABOUT_STATUS_CHANGE, aboutVisible);
                            }
                            break;
                        case gameEventType.PAY_TABLE_STATUS_CHANGE:
                            var isVisible = data;
                            gmApi.publishEvent(gmApi.publications.PAY_TABLE_STATUS_CHANGED_GAME, isVisible);
                            if (_this._feIntegration) {
                                _this._feIntegration.trigger(gameEventType.PAY_TABLE_STATUS_CHANGE, isVisible);
                            }
                            break;
                        case gameEventType.WALLET_UPDATE:
                            var balance = data;
                            gmApi.publishEvent(gmApi.publications.BALANCE_UPDATED_GAME, balance);
                            if (_this._feIntegration) {
                                _this._feIntegration.trigger(gameEventType.WALLET_UPDATE, balance);
                            }
                            break;
                        case gameEventType.ROUND_START:
                            _this._clearFreePlaysData();
                            if (gmApi instanceof gcw.adapter.gmapi.DefaultGmApi) {
                                gmApi.roundStart();
                            }
                            gmApi.publishEvent(gmApi.publications.GAME_STATUS_CHANGED, gmApi.gameStates.OPEN_PLAY);
                            if (_this._feIntegration) {
                                _this._feIntegration.trigger(gameEventType.ROUND_START, {});
                            }
                            _this._eventListenerCall(type, data);
                            break;
                        case gameEventType.ROUND_ID:
                            var playId = data;
                            if (gmApi.getActualPlayId() != playId) {
                                gmApi.setActualPlayId(playId);
                            }
                            break;
                        case gameEventType.ROUND_END:
                            var self_1 = _this;
                            if (gmApi instanceof gcw.adapter.gmapi.DefaultGmApi) {
                                _this.checkForFeatureAtRoundEnd();
                                self_1.handleRoundEnd(self_1, gmApi, data);
                            }
                            else {
                                if (self_1._freePlaysData) {
                                    self_1.handleRoundEnd(self_1, gmApi, data);
                                }
                                else if (self_1._hasFreePlaysData) {
                                    self_1.handleRoundEndWithTimeout(self_1, gmApi, data, 5000);
                                }
                                else {
                                    self_1.handleRoundEnd(self_1, gmApi, data);
                                }
                            }
                            if (_this._feIntegration) {
                                _this._feIntegration.trigger(gameEventType.ROUND_END, {});
                            }
                            _this._eventListenerCall(type, data);
                            break;
                        case gameEventType.TOTAL_WIN_UPDATE:
                            var totalWin = data;
                            gmApi.publishEvent(gmApi.publications.TOTALWIN_UPDATED, totalWin);
                            if (_this._feIntegration) {
                                _this._feIntegration.trigger(gameEventType.TOTAL_WIN_UPDATE, totalWin);
                            }
                            break;
                        case gameEventType.TOTAL_BET_UPDATE:
                            var totalBet = data;
                            swData.totalBet = totalBet;
                            gmApi.publishEvent(gmApi.publications.TOTALBET_UPDATED, totalBet);
                            if (_this._feIntegration) {
                                _this._feIntegration.trigger(gameEventType.TOTAL_BET_UPDATE, totalBet + swData.swBet);
                            }
                            break;
                        case gameEventType.RESULTS_SHOWN:
                            gmApi.publishEvent(gmApi.publications.GAME_RESULTS_SHOWN);
                            if (_this._feIntegration) {
                                _this._feIntegration.trigger(gameEventType.RESULTS_SHOWN, {});
                            }
                            break;
                        case gameEventType.NGS_HEARTBEAT_ERROR:
                            if (_this._feIntegration) {
                                _this._feIntegration.trigger(gameEventType.NGS_HEARTBEAT_ERROR, data);
                            }
                            break;
                        case gameEventType.ERROR:
                            var errorData = data;
                            console.error('ERRORRRRRROROOROR', errorData);
                            _this._errorData = errorData;
                            var errorCodeNum = Number(errorData.errorCode);
                            console.log("GCW->FE ERROR " + JSON.stringify(data));
                            if (_this._feIntegration) {
                                _this._feIntegration.trigger(gameEventType.ERROR, data);
                                if (data.processed) {
                                    break;
                                }
                            }
                            if (CasinoError.hasErrorCode(errorCodeNum)) {
                                console.error('ERROR adapter');
                                if (errorCodeNum == CasinoError.UNFINISHED_GAME.code) {
                                    console.warn('Ignoring UNFINISHED_GAME event raised by game');
                                    game.sendEvent(gameEventType.ERROR_HANDLED, _this._errorData);
                                }
                                else {
                                    if (typeof _this._errorData === 'object') {
                                        var err = CasinoError.getErrorByCode(errorCodeNum);
                                        _this._errorData['severity'] = err.fatal
                                            ? 'FATAL'
                                            : 'RECOVERABLE';
                                    }
                                    if (gmApi instanceof gcw.adapter.gmapi.DefaultGmApi) {
                                        console.error('DefaultGmApi sends error to the game', gmApi);
                                        game.sendEvent(gameEventType.ERROR_NOT_HANDLED, _this._errorData);
                                    }
                                    else {
                                        console.error('Not DefaultGmApi sends error to the game');
                                        gmApi.publishEvent(gmApi.publications.ERROR_OCCURRED, {
                                            data: errorCodeNum,
                                            error: {
                                                code: errorCodeNum,
                                                message: errorData.errorMessage,
                                            },
                                        });
                                    }
                                }
                            }
                            else {
                                var gcwError = gcw.adapter.GcwError.getErrorByCode(errorData.errorCode);
                                var casinoError_1 = CasinoError.toCasinoError(gcwError);
                                if (casinoError_1) {
                                    if (typeof _this._errorData === 'object') {
                                        _this._errorData['severity'] = casinoError_1.fatal
                                            ? 'FATAL'
                                            : 'RECOVERABLE';
                                    }
                                    if (gmApi instanceof gcw.adapter.gmapi.DefaultGmApi) {
                                        gmApi.resultsShown();
                                        console.error('GWC DefaultGmApi sends error to the game', gmApi);
                                        game.sendEvent(gameEventType.ERROR_NOT_HANDLED, _this._errorData);
                                        _this.handleServiceBlocked(_this._errorData);
                                        if (casinoError_1.code === CasinoError.INSUFFICIENT_FUNDS.code) {
                                            _this._eventListenerCall(gameEventType.INSUFFICIENT_FUNDS, _this._errorData);
                                        }
                                    }
                                    else {
                                        console.error('GWC NotDefaultGmApi sends error to the game');
                                        gmApi.publishEvent(gmApi.publications.ERROR_OCCURRED, {
                                            data: casinoError_1.code,
                                            error: {
                                                code: casinoError_1.code,
                                                message: null,
                                            },
                                        });
                                    }
                                }
                                else {
                                    console.warn('unexpected error code: ' + errorData.errorCode, errorData);
                                    if (typeof _this._errorData === 'object') {
                                        _this._errorData['severity'] = 'UNKNOWN';
                                    }
                                    game.sendEvent(gameEventType.ERROR_NOT_HANDLED, errorData);
                                }
                            }
                            if (_this._loggingServiceUrl) {
                                gcw.handleError(null, errorData, _this._game.getNgsClientUrl(), _this._loggingServiceUrl);
                            }
                            break;
                        case gameEventType.AUTOPLAY_ACTIVATE:
                            gmApi.publishEvent(gmApi.publications.AUTOPLAY_ACTIVATED_GAME, null);
                            break;
                        case gameEventType.AUTOPLAY_DEACTIVATE:
                            gmApi.publishEvent(gmApi.publications.AUTOPLAY_CANCELLED, null);
                            break;
                        case gameEventType.AUTOPLAY_CUSTOM_FEATURE:
                            gmApi.publishEvent(gmApi.publications.AUTOPLAY_CUSTOM_FEATURE_IN_GAME, null);
                            break;
                        case gameEventType.AUTOPLAY_CUSTOM_FEATURE_SETTINGS:
                            gmApi.publishEvent(gmApi.publications.AUTOPLAY_CUSTOM_FEATURE_SETTINGS, null);
                            break;
                        case gameEventType.ROUND_REQUEST:
                            gmApi.publishEvent(gmApi.publications.PLAY_REQUEST, null);
                            break;
                        case gameEventType.GUI_BLOCKED:
                            game.sendEvent(gameEventType.GUI_BLOCKED_RESPONSE, gmApi.isGUIBlocked());
                            break;
                        case gameEventType.FULLSCREEN_MODE_ON:
                            gmApi.publishEvent(gmApi.publications.FULLSCREEN_MODE_ON);
                            if (gmApi instanceof gcw.adapter.gmapi.DefaultGmApi) {
                                gmApi.setFullscreenMode(true);
                                game.sendEvent(gameEventType.FULLSCREEN_MODE_NOT_HANDLED);
                            }
                            else {
                                game.sendEvent(gameEventType.FULLSCREEN_MODE_HANDLED);
                            }
                            break;
                        case gameEventType.FULLSCREEN_MODE_OFF:
                            gmApi.publishEvent(gmApi.publications.FULLSCREEN_MODE_OFF, null);
                            if (gmApi instanceof gcw.adapter.gmapi.DefaultGmApi) {
                                gmApi.setFullscreenMode(false);
                                game.sendEvent(gameEventType.FULLSCREEN_MODE_NOT_HANDLED);
                            }
                            else {
                                game.sendEvent(gameEventType.FULLSCREEN_MODE_HANDLED);
                            }
                            break;
                        case gameEventType.START_SUCCESS:
                            if (gmApi instanceof gcw.adapter.gmapi.DefaultGmApi) {
                                gmApi.startSuccess();
                            }
                            break;
                        case gameEventType.TERMINATE_SUCCESS:
                            if (gmApi instanceof gcw.adapter.gmapi.DefaultGmApi) {
                                _this._eventListenerCall(gameEventType.HOME, data);
                            }
                            else {
                                gmApi.publishEvent(gmApi.publications.GAME_READY_FOR_UNLOAD, null);
                            }
                            break;
                        case gameEventType.HOME:
                            gmApi.goToLobby();
                            _this._eventListenerCall(type, data);
                            if (_this._feIntegration) {
                                _this._feIntegration.trigger(gameEventType.HOME, data);
                            }
                            break;
                        case gameEventType.INITIALIZE_FAILURE:
                            var error = data;
                            var casinoError = CasinoError.FATAL_ERROR;
                            if (gcw.adapter.GcwError.hasErrorCode(error.code)) {
                                var gcwError = gcw.adapter.GcwError.getErrorByCode(error.code);
                                casinoError = CasinoError.toCasinoError(gcwError);
                            }
                            else if (gcw.api.ErrorCode.hasErrorCode(error.code)) {
                                casinoError = CasinoError.apiToCasinoError(error.code);
                            }
                            if (casinoError) {
                                if (typeof _this._errorData === 'object') {
                                    _this._errorData['severity'] = casinoError.fatal
                                        ? 'FATAL'
                                        : 'RECOVERABLE';
                                }
                                if (gmApi instanceof gcw.adapter.gmapi.DefaultGmApi) {
                                    var message = CasinoGameAdapter.findMessage(_this._initConf.locale, error);
                                    if (message != undefined && message != null) {
                                        error.message = message;
                                    }
                                    _this._eventListenerCall(type, error);
                                }
                                else {
                                    gmApi.publishEvent(gmApi.publications.ERROR_OCCURRED, {
                                        data: casinoError.code,
                                        error: {
                                            code: casinoError.code,
                                            message: error.externalMessage,
                                        },
                                    });
                                }
                            }
                            else {
                                console.error('unexpected error code: ' + errorData.errorCode, errorData);
                                _this._eventListenerCall(type, data);
                            }
                            break;
                        case gameEventType.STOP_SUCCESS:
                            if (gmApi instanceof gcw.adapter.gmapi.DefaultGmApi) {
                                gmApi.stopSuccess();
                            }
                            break;
                        case gameEventType.RESULTS_SHOWN:
                            if (gmApi instanceof gcw.adapter.gmapi.DefaultGmApi) {
                                gmApi.resultsShown();
                            }
                            break;
                        case gameEventType.CASHIER:
                            if (gmApi instanceof gcw.adapter.gmapi.DefaultGmApi) {
                                gmApi.cashier();
                            }
                            _this._eventListenerCall(type, data);
                            if (_this._feIntegration) {
                                _this._feIntegration.trigger(gameEventType.CASHIER, data);
                            }
                            break;
                        case gameEventType.NGS_RESPONSE:
                            _this._checkResponseAndProcessMessage(data);
                            if (data.status &&
                                data.status.externalCode === _this.RELAX_CUSTOM_ERROR) {
                                game.sendEvent(GameEventType.ERROR_NOT_HANDLED, JSON.parse(data.status.externalMessage));
                            }
                            else {
                                _this._checkResponseForFreePlaysData(data);
                                _this._checkResponseForTimeoutData(data);
                            }
                            break;
                        case gameEventType.SUPER_WHEEL_STARTING_DETECTED:
                            _this._getSuperWheelUkgcData();
                            break;
                        default:
                            _this._eventListenerCall(type, data);
                    }
                });
            };
            CasinoGameAdapter.prototype.handleServiceBlocked = function (errorData) {
                var _this = this;
                if (errorData.errorCode === adapter.GcwError.GAME_RESTRICTED_IN_COUNTRY.code) {
                    this._eventListenerCall('UPDATE_MODEL', {
                        general: {
                            popups: [
                                {
                                    type: 0,
                                    onClose: null,
                                    title: errorData.errorCode,
                                    text: errorData.errorMessage,
                                    actions: [
                                        {
                                            type: 0,
                                            text: 'CLOSE',
                                            action: function () {
                                                _this._gmApi.goToLobby();
                                            },
                                        },
                                    ],
                                },
                            ],
                        },
                    });
                }
            };
            CasinoGameAdapter.prototype.checkForFeatureAtRoundEnd = function () {
                var _this = this;
                var game = this._game;
                var gmApi = this._gmApi;
                var swData = gcw['__temp_sw'];
                var slsw = window['SLSW'];
                var featureTriggered = gmApi.roundEnd(game);
                if (featureTriggered === 'SUPER_WHEEL') {
                    game.sendEvent('STOP');
                    game.sendEvent('START');
                    if (gcw['__temp_stw'].studioLink) {
                        gcw['__temp_sw'].endCallback = function () {
                            game.sendEvent('STOP');
                            _this._eventListenerCall('UPDATE_MODEL', {
                                spinToWin: { studioLink: gcw['__temp_stw'].studioLink },
                                general: { blockInteraction: false },
                            });
                        };
                    }
                }
                if (featureTriggered === 'SPIN_TO_WIN') {
                    game.sendEvent('STOP');
                    this._eventListenerCall('UPDATE_MODEL', {
                        spinToWin: { studioLink: gcw['__temp_stw'].studioLink },
                        general: { blockInteraction: false },
                    });
                }
                return featureTriggered;
            };
            CasinoGameAdapter.prototype.handleRoundEndWithTimeout = function (self, gmApi, data, timeout) {
                if (timeout && timeout > 0 && self._freePlaysData == null) {
                    setTimeout(function () {
                        self.handleRoundEndWithTimeout(self, gmApi, data, timeout - 100);
                    }, 100);
                }
                else {
                    self.handleRoundEnd(self, gmApi, data);
                }
            };
            CasinoGameAdapter.prototype.handleRoundEnd = function (self, gmApi, data) {
                self._updateFreePlaysStatus();
                gmApi.publishEvent(gmApi.publications.GAME_STATUS_CHANGED, gmApi.gameStates.SETTLE_PLAY);
                if (data) {
                    var playId = data;
                    gmApi.setActualPlayId(playId);
                }
            };
            CasinoGameAdapter.findMessage = function (lang, error) {
                var messageKey = error.code;
                var countryLang = lang.split('_')[0];
                var bundle = gcw.l12n.L12n.RESOURCE_BUNDLE;
                var langKeys = Object.keys(bundle);
                for (var i = 0; i < langKeys.length; i++) {
                    var langKey = langKeys[i];
                    if (langKey === lang && bundle[langKey][messageKey]) {
                        return bundle[langKey][messageKey];
                    }
                }
                for (var i = 0; i < langKeys.length; i++) {
                    var langKey = langKeys[i];
                    if (langKey === countryLang && bundle[langKey][messageKey]) {
                        return bundle[langKey][messageKey];
                    }
                }
                for (var i = 0; i < langKeys.length; i++) {
                    var langKey = langKeys[i];
                    if (langKey.indexOf(countryLang + '_') === 0 &&
                        bundle[langKey][messageKey]) {
                        return bundle[langKey][messageKey];
                    }
                }
                return bundle['default'][messageKey];
            };
            CasinoGameAdapter.getErrorSeverity = function (errorCode) {
                var errorCodeNum = Number(errorCode);
                if (CasinoError.hasErrorCode(errorCodeNum)) {
                    var err = CasinoError.getErrorByCode(errorCodeNum);
                    return err.fatal ? 'FATAL' : 'RECOVERABLE';
                }
                else {
                    return null;
                }
            };
            CasinoGameAdapter.prototype.sendEvent = function (type, data) {
                var _this = this;
                var game = this._game;
                var gameEventType = gcw.api.GameEventType;
                switch (type) {
                    case gameEventType.INITIALIZE:
                        if (this._gmApi) {
                            this._casinoSpecificInitialize();
                            this._initializeFreeRounds(data);
                        }
                        else {
                            game.sendEvent(gameEventType.INITIALIZE_FAILURE, 'Casino specific GMApi not initialized');
                        }
                        break;
                    case gameEventType.FREE_ROUNDS_ACCEPTED:
                        if (gcw['__temp_sw'] && window['SLSW']) {
                            var swData_1 = gcw['__temp_sw'];
                            var slsw_1 = window['SLSW'];
                            if (swData_1.forceActiveOnFR) {
                                slsw_1.forceSwButtonState(1);
                            }
                            else {
                                slsw_1.forceSwButtonState(0);
                            }
                            swData_1.freeRoundsAccepted = true;
                            this._eventListenerCall(gameEventType.FREE_ROUNDS_CONFIG, swData_1.frConfiguration);
                        }
                        break;
                    case gameEventType.FREE_ROUNDS_COMPLETED:
                        if (gcw['__temp_sw'] && window['SLSW']) {
                            var swData_2 = gcw['__temp_sw'];
                            var slsw_2 = window['SLSW'];
                            gcw['__temp_sw'].frConfiguration = null;
                            swData_2.forceActiveOnFR = false;
                            slsw_2.revokeSwButtonForcedState();
                        }
                        break;
                    case gameEventType.PLATFORM_DETECTED:
                        gcw['__temp_sw'].initData.platform =
                            String(data.data).toUpperCase() || 'DESKTOP';
                        break;
                    case gameEventType.SPIN_TO_WIN_COMPLETED:
                        gcw['__temp_stw'] = { studioLink: null, restore: false };
                        game.sendEvent('START');
                        this._game.updateBalanceViaHeartbeat();
                        break;
                    case gameEventType.SAVE_SUPER_WHEEL_POPUP:
                        if (window['SLSW']) {
                            gcw['__temp_sw'].savePopup = data.data;
                        }
                        break;
                    case gameEventType.SAVE_CONFIG_PARAM:
                        this._game.saveConfigurationParameters(data.data);
                        break;
                    case gameEventType.ON_BUTTON_CLICKED:
                        if (this._feIntegration) {
                            this._feIntegration.trigger(type, data);
                        }
                        this._game.sendEvent(type, data);
                        break;
                    case gameEventType.SUPER_WHEEL_BET_CHANGED:
                        var swParams = gcw['__temp_sw'];
                        if (swParams) {
                            swParams.swBet = data.data;
                        }
                        this._gmApi.publishEvent(this._gmApi.publications.TOTALBET_UPDATED, swParams.totalBet + swParams.swBet);
                        if (this._feIntegration) {
                            this._feIntegration.trigger(gameEventType.TOTAL_BET_UPDATE, swParams.totalBet + swParams.swBet);
                        }
                        break;
                    case gameEventType.SPIN_ENABLED_INITIALLY:
                    case gameEventType.BET_ENABLED_INITIALLY:
                        var swData = gcw['__temp_sw'];
                        var stwData_1 = gcw['__temp_stw'];
                        var slsw = window['SLSW'];
                        if (swData.restore && !swData.blocked && !swData.freeSpins) {
                            swData.restore = false;
                            if (stwData_1.restore) {
                                swData.endCallback = function () {
                                    stwData_1.restore = false;
                                    game.sendEvent('STOP');
                                    this._eventListenerCall('UPDATE_MODEL', {
                                        spinToWin: { studioLink: gcw['__temp_stw'].studioLink },
                                        general: { blockInteraction: false },
                                    });
                                }.bind(this);
                            }
                            var superWheelGameConfig = swData.superWheelGameConfig();
                            game.sendEvent('SUPER_WHEEL_ROUND_STARTING', superWheelGameConfig);
                            if (!superWheelGameConfig.enabled) {
                                superWheelGameConfig = swData.superWheelGameConfig();
                            }
                            var superWheelBet = swData.swBet || swData.baseBet || swData.response.betAmount;
                            slsw.startSuperWheelRound({
                                soundEnabled: swData.sound,
                                studioLink: swData.response.studioLink,
                                balance: swData.response.balance,
                                betAmount: superWheelBet,
                                gameConfig: superWheelGameConfig,
                            });
                            if (swData.ukgcData &&
                                swData.ukgcData.displayNet !== null &&
                                swData.ukgcData.timer &&
                                Object.keys(swData.ukgcData.timer).length > 0) {
                                slsw.updateUKGCRegulationData(swData.ukgcData);
                            }
                            game.sendEvent('STOP');
                            game.sendEvent('START');
                        }
                        else if (stwData_1.restore) {
                            stwData_1.restore = false;
                            setTimeout(function () {
                                game.sendEvent('STOP');
                                _this._eventListenerCall('UPDATE_MODEL', {
                                    spinToWin: { studioLink: gcw['__temp_stw'].studioLink },
                                    general: { blockInteraction: false },
                                });
                            }, 0);
                        }
                        else if (swData.blocked) {
                            this._eventListenerCall('SUPER_WHEEL_SERVICE_BLOCKED', {
                                general: { blockInteraction: false },
                            });
                        }
                        else if (slsw &&
                            !swData.skipPopup &&
                            !(swData.frConfiguration && swData.frConfiguration.available)) {
                            this._eventListenerCall('SHOW_SUPER_WHEEL_POPUP', {
                                general: { blockInteraction: false },
                            });
                        }
                        else if (slsw &&
                            swData.skipPopup &&
                            !(swData.frConfiguration && swData.frConfiguration.available)) {
                            if (swData.autoEnable && !swData.maintenanceMode) {
                                slsw.activateSuperWheel();
                            }
                        }
                        if (this._feIntegration) {
                            this._feIntegration.trigger(gameEventType.BET_ENABLED_INITIALLY, {});
                        }
                        break;
                    default:
                        this._game.sendEvent(type, data);
                }
            };
            CasinoGameAdapter.prototype._eventListenerCall = function (type, data) {
                var eventListeners = this.getEventListeners();
                if (eventListeners) {
                    eventListeners.forEach(function (eventListener) {
                        if (typeof eventListener == 'function') {
                            eventListener(type, data);
                        }
                    });
                }
            };
            CasinoGameAdapter.prototype._getSuperWheelUkgcData = function () {
                var ukgcData = { timer: {}, displayNet: null };
                gcw['__temp_sw'].ukgcData = ukgcData;
                this._eventListenerCall('SUPER_WHEEL_UKGC_DATA', {
                    data: ukgcData,
                });
            };
            CasinoGameAdapter.prototype._superWheelPostInitialization = function () {
                var _this = this;
                var swData = gcw['__temp_sw'];
                var slsw = window['SLSW'];
                if (slsw) {
                    if (slsw.onRoundBetUpdated) {
                        slsw.onRoundBetUpdated(function (newBetValue) {
                            _this._eventListenerCall('SUPER_WHEEL_BET_CHANGE', {
                                bet: newBetValue,
                            });
                        });
                    }
                    slsw.onRoundCompleted(function (roundResult) {
                        if (gcw['__buyFeature']) {
                            slsw.revokeSwButtonForcedState();
                            gcw['__buyFeature'] = false;
                        }
                        swData.skipped = !!roundResult.skipped;
                        _this._game.updateBalanceViaHeartbeat();
                        _this._eventListenerCall('SUPER_WHEEL_COMPLETED', roundResult);
                        swData.roundEnd = false;
                        swData.ukgcData = null;
                        delete swData.response;
                        if (swData.endCallback) {
                            swData.endCallback();
                        }
                        swData.endCallback = null;
                        if (swData.bufferedSpin) {
                            var reqData = swData.bufferedSpin;
                            swData.bufferedSpin = null;
                            _this._eventListenerCall('NGS_REQUEST', reqData);
                        }
                        slsw.activateSuperWheel();
                    });
                    slsw.onErrorDismissed(function (code, message) {
                        if (code === 'SW_INACTIVITY') {
                            _this._gmApi.goToLobby();
                        }
                    });
                    slsw.onServiceModeChange(function (mode, title, text, button) {
                        if (mode === 1) {
                            swData.skipPopup = true;
                        }
                        if (mode === 1) {
                            swData.maintenanceMode = true;
                        }
                        else {
                            swData.maintenanceMode = false;
                        }
                        if (mode === 1 &&
                            swData.frConfiguration &&
                            swData.frConfiguration.available &&
                            !swData.freeRoundsAccepted) {
                            _this._eventListenerCall('FREE_ROUNDS_SW_MAINTENANCE');
                        }
                        if (mode === 1 && swData.freeRoundsAccepted) {
                            _this._game.sendEvent('STOP');
                            _this._eventListenerCall('UPDATE_MODEL', {
                                general: {
                                    blockInteraction: false,
                                    popups: [
                                        {
                                            type: 'error',
                                            onClose: null,
                                            title: title,
                                            text: text,
                                            actions: [
                                                {
                                                    type: 'ok',
                                                    text: button,
                                                    action: function () {
                                                        _this._gmApi.goToLobby();
                                                    },
                                                },
                                            ],
                                        },
                                    ],
                                },
                            });
                        }
                    });
                    slsw.onServiceBlocked(function () {
                        swData.blocked = true;
                    });
                }
            };
            CasinoGameAdapter.prototype._initializeFreeRounds = function (data) {
                this._gameInitData = data;
                if (this._freePlaysData && this._freePlaysData.promotionCode) {
                    this._sendFreeRoundsToGmApi();
                }
                else {
                    this._sendInitializeToGame();
                }
            };
            CasinoGameAdapter.prototype._sendInitializeToGame = function () {
                this._game.sendEvent(gcw.api.GameEventType.INITIALIZE, this._gameInitData);
                this._gameInitData = null;
            };
            CasinoGameAdapter.prototype._sendFreeRoundsToGmApi = function () {
                var showFpConfirmation = this._freePlaysData &&
                    this._freePlaysData.promotionPlaysDone === 0 &&
                    !this._isInterrupted;
                this._gmApi.publishEvent(this._gmApi.publications.PROMOTION_SET_DATA, {
                    data: this._freePlaysData,
                    settings: {
                        showConfirmation: showFpConfirmation,
                    },
                });
                this._freePlaysData = null;
                this._hasFreePlaysData = false;
                this._isInterrupted = false;
            };
            CasinoGameAdapter.prototype._freeRoundsAccepted = function (data) {
                this._sendInitializeToGame();
            };
            CasinoGameAdapter.prototype._freeRoundsRejected = function (data) {
                var _this = this;
                var game = this._game;
                var gameEventType = gcw.api.GameEventType;
                new gcw.http.HttpRequest()
                    .url(this._gameInitData.gameSessionUrl)
                    .method('POST')
                    .onError(function (err) {
                    console.error('Postpone free rounds request failed', err);
                })
                    .onResponse(function (data) {
                    game.sendEvent(gameEventType.FREE_ROUND_POSTPONE, true);
                    _this._sendInitializeToGame();
                })
                    .send({
                    id: null,
                    date: new Date().toISOString(),
                    game: { buttonCode: 'FREE_ROUND_POSTPONE' },
                });
            };
            CasinoGameAdapter.prototype._checkResponseAndProcessMessage = function (response) {
                var messageExists = response &&
                    response.game &&
                    response.game.messagesAfterGameEvents &&
                    response.game.messagesAfterGameEvents.length > 0;
                if (messageExists) {
                    if (this._feIntegration) {
                        this._feIntegration.trigger('RESPONSE_MESSAGE', response.game.messagesAfterGameEvents);
                    }
                }
            };
            CasinoGameAdapter.prototype._checkResponseForFreePlaysData = function (response) {
                if (response &&
                    response.game &&
                    response.game.casinoData &&
                    response.game.casinoData.funds) {
                    var funds = response.game.casinoData.funds;
                    if (funds.freePlaysData && funds.freePlaysData.promotionCode) {
                        this._freePlaysData = funds.freePlaysData;
                    }
                    this._hasFreePlaysData = !!funds.hasFreePlaysData;
                }
                else {
                }
            };
            CasinoGameAdapter.prototype._checkResponseForTimeoutData = function (response) {
                if (response &&
                    response.configuration &&
                    response.configuration.game &&
                    response.configuration.game.sessionExpiry &&
                    leanderGMApi) {
                    leanderGMApi.enableSessionTimeout(Number(response.configuration.game.sessionExpiry));
                }
            };
            CasinoGameAdapter.prototype._updateFreePlaysStatus = function () {
                if (this._freePlaysData) {
                    this._gmApi.publishEvent(this._gmApi.PROMOTION_UPDATE_DATA, this._freePlaysData);
                }
                else {
                }
                this._freePlaysData = null;
                this._hasFreePlaysData = false;
            };
            CasinoGameAdapter.prototype._clearFreePlaysData = function () {
                this._freePlaysData = null;
                this._hasFreePlaysData = false;
            };
            CasinoGameAdapter.prototype._casinoSpecificInitialize = function () {
                var _this = this;
                var game = this._game;
                var gameEventType = gcw.api.GameEventType;
                var gmApi = this._gmApi;
                game.sendEvent(gameEventType.LOBBY_ACTIVE, gmApi.getLobbyActive());
                game.sendEvent(gameEventType.VERSION);
                game.sendEvent(gameEventType.CURRENCY_FORMATTING, gmApi.getCurrencyFormatting());
                game.sendEvent(gameEventType.MUSIC_ACTIVE, gmApi.getMusicActive());
                game.sendEvent(gameEventType.SOUND_EFFECTS_ACTIVE, gmApi.getSfxActive());
                gmApi.subscribeToEvent(gmApi.publications.GAME_RESUME, function (value) {
                    return game.sendEvent(gameEventType.START, value ? value.data : {});
                });
                gmApi.subscribeToEvent(gmApi.publications.GAME_PAUSE, function (value) {
                    return game.sendEvent(gameEventType.STOP, value ? value.data : {});
                });
                gmApi.subscribeToEvent(gmApi.publications.GENERAL_SOUND_STATUS_CHANGED, function (value) {
                    game.sendEvent(gameEventType.GENERAL_SOUND_STATUS_CHANGED, value ? value.data : {});
                });
                gmApi.subscribeToEvent(gmApi.publications.MUSIC_STATUS_CHANGED, function (value) {
                    game.sendEvent(gameEventType.MUSIC_STATUS_CHANGED, value ? value.data : {});
                });
                gmApi.subscribeToEvent(gmApi.publications.SOUND_EFFECTS_STATUS_CHANGED, function (value) {
                    game.sendEvent(gameEventType.SOUND_EFFECTS_STATUS_CHANGED, value ? value.data : {});
                });
                gmApi.subscribeToEvent(gmApi.publications.CONTROL_PANEL_STATUS_CHANGED, function (value) {
                    game.sendEvent(gameEventType.CONTROL_PANEL_STATUS_CHANGED, value ? value.data : {});
                });
                gmApi.subscribeToEvent(gmApi.publications.ABOUT_GAME_STATUS_CHANGED, function (value) {
                    game.sendEvent(gameEventType.ABOUT_STATUS_CHANGED, value ? value.data : {});
                });
                gmApi.subscribeToEvent(gmApi.publications.PAY_TABLE_STATUS_CHANGED, function (value) {
                    game.sendEvent(gameEventType.PAY_TABLE_STATUS_CHANGED, value ? value.data : {});
                });
                gmApi.subscribeToEvent(gmApi.publications.BALANCE_UPDATED, function (value) {
                    game.sendEvent(gameEventType.WALLET_UPDATED, value.data);
                });
                gmApi.subscribeToEvent(gmApi.publications.ERROR_HANDLED, function (value) {
                    if (!value.data || !value.data.isWrapperError) {
                        game.sendEvent(gameEventType.ERROR_HANDLED, _this._errorData);
                    }
                });
                gmApi.subscribeToEvent(gmApi.publications.DISPOSE_APPLICATION, function (value) {
                    game.sendEvent(gameEventType.TERMINATE, value.data);
                });
                gmApi.subscribeToEvent(gmApi.publications.AUTOPLAY_ACTIVATED_CONFIRMATION, function (value) {
                    game.sendEvent(gameEventType.AUTOPLAY_ACTIVATE_SUCCESS, value.data);
                });
                gmApi.subscribeToEvent(gmApi.publications.AUTOPLAY_ACTIVATED_CANCELLATION, function (value) {
                    game.sendEvent(gameEventType.AUTOPLAY_ACTIVATE_FAILURE, value.data);
                });
                gmApi.subscribeToEvent(gmApi.publications.AUTOPLAY_LIMIT_REACHED, function (value) {
                    game.sendEvent(gameEventType.AUTOPLAY_LIMIT_REACHED, value.data);
                });
                gmApi.subscribeToEvent(gmApi.publications.PLAY_CONFIRMED, function (value) {
                    game.sendEvent(gameEventType.ROUND_REQUEST_CONFIRMED, value.data);
                });
                gmApi.subscribeToEvent(gmApi.publications.PROMOTION_ACTIVE_UPDATED, function (value) {
                    if (_this._gameInitialized) {
                    }
                    else {
                        _this._freeRoundsAccepted(value.data);
                    }
                });
                gmApi.subscribeToEvent(gmApi.publications.PROMOTION_CANCELLED, function (value) {
                    _this._freeRoundsRejected(value.data);
                });
                if (gmApi.complianceMode.UKGC) {
                    game.sendEvent(gameEventType.COMPLIANCE_MODE, 'ukgc');
                }
                gmApi.publishEvent(gmApi.publications.GAME_STATUS_CHANGED, gmApi.gameStates.INITIALIZE);
                gmApi.subscribeToEvent(gmApi.publications.STOP_AUTO_PLAY, function () {
                    return game.sendEvent(GameEventType.STOP_AUTOPLAY, {});
                });
                gmApi.subscribeToEvent(gmApi.publications.BLOCK_BETS, function () {
                    return game.sendEvent(GameEventType.STOP, {});
                });
                gmApi.subscribeToEvent(gmApi.publications.UNBLOCK_BETS, function () { return game.sendEvent(GameEventType.START); }, {});
            };
            return CasinoGameAdapter;
        }());
        adapter.CasinoGameAdapter = CasinoGameAdapter;
        var CasinoError = (function () {
            function CasinoError() {
            }
            CasinoError._staticInit = function () {
                CasinoError._codes = [];
                for (var i = 0; i < CasinoError.errors.length; i++) {
                    CasinoError._codes.push(CasinoError.errors[i].code);
                }
            };
            CasinoError.hasErrorCode = function (code) {
                return CasinoError._codes.indexOf(code) > -1;
            };
            CasinoError.toCasinoError = function (error) {
                var gcwError = gcw.adapter.GcwError;
                var casinoError = gcw.adapter.CasinoError;
                switch (error) {
                    case null:
                        return null;
                    case gcwError.OK:
                        return null;
                    case gcwError.INTERNAL_SERVER_ERROR:
                        return casinoError.FATAL_ERROR;
                    case gcwError.INVALID_REQUEST:
                        return casinoError.FATAL_ERROR;
                    case gcwError.INVALID_REQUEST_ID:
                        return casinoError.FATAL_ERROR;
                    case gcwError.INVALID_DEFENCE_CODE:
                        return casinoError.FATAL_ERROR;
                    case gcwError.UNKNOWN_GAME_SESSION:
                        return casinoError.THE_SESSION_HAS_EXPIRED;
                    case gcwError.GAME_SESSION_CLOSED:
                        return casinoError.THE_SESSION_IS_FINALIZED;
                    case gcwError.GAME_CLIENT_CLOSED:
                        return casinoError.THE_SESSION_IS_FINALIZED;
                    case gcwError.GAME_CLIENT_OBSOLETE:
                        return casinoError.THE_SESSION_HAS_EXPIRED;
                    case gcwError.GAME_RESTRICTED_IN_COUNTRY:
                        return casinoError.INVALID_GAME;
                    case gcwError.CASINO_PLATFORM_INTEGRATION_ERROR:
                        return casinoError.FATAL_ERROR;
                    case gcwError.REQUEST_IN_PROCESSING:
                        return casinoError.SERVICE_TEMPORARILY_UNAVAILABLE;
                    case gcwError.INVALID_STAKE_VALUES:
                        return casinoError.INCORRECT_VALUES_STAKE;
                    case gcwError.FUNDS_STRUCTURE_CHANGED:
                        return casinoError.INVALID_STAKE;
                    case gcwError.INSUFFICIENT_FUNDS:
                        return casinoError.INSUFFICIENT_FUNDS;
                    case gcwError.GAME_LIMITS_RECONFIGURED:
                        return casinoError.SERVICE_TEMPORARILY_UNAVAILABLE;
                    default:
                        return casinoError.FATAL_ERROR;
                }
            };
            CasinoError.apiToCasinoError = function (error) {
                var errorCode = gcw.api.ErrorCode;
                var casinoError = gcw.adapter.CasinoError;
                switch (error) {
                    case null:
                        return null;
                    case errorCode.INVALID_PHASE:
                        return casinoError.FATAL_ERROR;
                    case errorCode.CONNECTION_LOST:
                        return casinoError.CONNECTION_ERROR;
                    case errorCode.FAILED_TO_LOAD_ASSETS:
                        return casinoError.CONNECTION_ERROR;
                    case errorCode.UNKNOWN:
                        return casinoError.FATAL_ERROR;
                    case errorCode.UNSUPPORTED_BROWSER:
                        return casinoError.FATAL_ERROR;
                    default:
                        return casinoError.FATAL_ERROR;
                }
            };
            CasinoError.getErrorByCode = function (code) {
                var idx = CasinoError._codes.indexOf(code);
                return idx > -1 ? CasinoError.errors[idx] : null;
            };
            CasinoError._codes = null;
            CasinoError.FATAL_ERROR = { code: 107, msg: 'Fatal Error', fatal: true };
            CasinoError.INVALID_STAKE = { code: 201, msg: 'Invalid stake', fatal: true };
            CasinoError.INCORRECT_VALUES_STAKE = {
                code: 202,
                msg: 'Incorrect values stake',
                fatal: true,
            };
            CasinoError.SERVICE_UNDER_MAINTENANCE = {
                code: 112,
                msg: 'Service under maintenance',
                fatal: true,
            };
            CasinoError.UNABLE_TO_LOCK_SESSION = {
                code: 101,
                msg: 'Unable to lock session. The session is not accessible at the time',
                fatal: true,
            };
            CasinoError.INVALID_LICENSE = { code: 102, msg: 'Invalid license', fatal: true };
            CasinoError.INVALID_GAME = { code: 103, msg: 'Invalid game', fatal: true };
            CasinoError.INVALID_CASINO_OPERATOR = {
                code: 104,
                msg: 'Invalid casino operator',
                fatal: true,
            };
            CasinoError.INVALID_GAME_MODE = {
                code: 105,
                msg: 'Invalid game mode',
                fatal: true,
            };
            CasinoError.INVALID_USER_IDENTIFIER = {
                code: 106,
                msg: 'Invalid user identifier',
                fatal: true,
            };
            CasinoError.INITIAL_BALANCE_REQUIRED = {
                code: 108,
                msg: 'Initial balance required',
                fatal: true,
            };
            CasinoError.EXPIRED_LICENSE = { code: 110, msg: 'Expired License', fatal: true };
            CasinoError.INVALID_CURRENCY = {
                code: 111,
                msg: 'Invalid currency',
                fatal: true,
            };
            CasinoError.PLAY_NOT_READY_TO_SETTLE = {
                code: 113,
                msg: 'Play not ready to settle',
                fatal: true,
            };
            CasinoError.THE_SESSION_HAS_EXPIRED = {
                code: 114,
                msg: 'The session has expired',
                fatal: true,
            };
            CasinoError.THE_SESSION_IS_FINALIZED = {
                code: 116,
                msg: 'The session is finalized',
                fatal: true,
            };
            CasinoError.CONNECTION_ERROR = {
                code: 99,
                msg: 'Connection Error',
                fatal: true,
            };
            CasinoError.FREEPLAY_NOT_ALLOWED = {
                code: 300,
                msg: 'Freeplay not allowed',
                fatal: true,
            };
            CasinoError.INSUFFICIENT_FUNDS = {
                code: 509,
                msg: 'Insufficient funds',
                fatal: false,
            };
            CasinoError.SERVICE_TEMPORARILY_UNAVAILABLE = {
                code: 530,
                msg: 'Service Temporarily Unavailable',
                fatal: false,
            };
            CasinoError.RESPONSIBLE_GAMING_SESSION_LIMIT_REACHED = {
                code: 531,
                msg: 'Responsible gaming: Session limit reached',
                fatal: false,
            };
            CasinoError.RESPONSIBLE_GAMING_LOSS_LIMIT_REACHED = {
                code: 532,
                msg: 'Responsible gaming: Loss limit reached',
                fatal: false,
            };
            CasinoError.RESPONSIBLE_GAMING_BLOCKED_TEMPORARILY = {
                code: 533,
                msg: 'Responsible gaming: Blocked temporarily',
                fatal: false,
            };
            CasinoError.MAXIMUM_WIN_REACHED = {
                code: 536,
                msg: 'Maximum win reached',
                fatal: false,
            };
            CasinoError.UNFINISHED_GAME_NOT_SHOWN = {
                code: 998,
                msg: 'Unfinished game when the play is not shown to the user',
                fatal: false,
            };
            CasinoError.UNFINISHED_GAME = {
                code: 999,
                msg: 'Unfinished game',
                fatal: false,
            };
            CasinoError.CUSTOM_MESSAGES = {
                code: 1000,
                msg: 'Custom messages',
                fatal: false,
            };
            CasinoError.errors = [
                CasinoError.FATAL_ERROR,
                CasinoError.INVALID_STAKE,
                CasinoError.INCORRECT_VALUES_STAKE,
                CasinoError.SERVICE_UNDER_MAINTENANCE,
                CasinoError.UNABLE_TO_LOCK_SESSION,
                CasinoError.INVALID_LICENSE,
                CasinoError.INVALID_GAME,
                CasinoError.INVALID_CASINO_OPERATOR,
                CasinoError.INVALID_GAME_MODE,
                CasinoError.INVALID_USER_IDENTIFIER,
                CasinoError.INITIAL_BALANCE_REQUIRED,
                CasinoError.EXPIRED_LICENSE,
                CasinoError.INVALID_CURRENCY,
                CasinoError.PLAY_NOT_READY_TO_SETTLE,
                CasinoError.THE_SESSION_HAS_EXPIRED,
                CasinoError.THE_SESSION_IS_FINALIZED,
                CasinoError.CONNECTION_ERROR,
                CasinoError.FREEPLAY_NOT_ALLOWED,
                CasinoError.INSUFFICIENT_FUNDS,
                CasinoError.SERVICE_TEMPORARILY_UNAVAILABLE,
                CasinoError.RESPONSIBLE_GAMING_SESSION_LIMIT_REACHED,
                CasinoError.RESPONSIBLE_GAMING_LOSS_LIMIT_REACHED,
                CasinoError.RESPONSIBLE_GAMING_BLOCKED_TEMPORARILY,
                CasinoError.MAXIMUM_WIN_REACHED,
                CasinoError.UNFINISHED_GAME_NOT_SHOWN,
                CasinoError.UNFINISHED_GAME,
                CasinoError.CUSTOM_MESSAGES,
            ];
            return CasinoError;
        }());
        adapter.CasinoError = CasinoError;
        CasinoError._staticInit();
    })(adapter = gcw.adapter || (gcw.adapter = {}));
})(gcw || (gcw = {}));
var gcw;
(function (gcw) {
    var adapter;
    (function (adapter) {
        var VideoslotsGameAdapter = (function () {
            function VideoslotsGameAdapter(game) {
                var _this = this;
                this._game = game;
                window.addEventListener('message', function (msg) {
                    _this._recvMsg(msg);
                });
            }
            VideoslotsGameAdapter.prototype.setEventListener = function (eventListener) {
                var _this = this;
                this._eventListener = eventListener;
                this._game.setEventListener(function (type, data) {
                    _this._eventListenerCall(type, data);
                    switch (type) {
                        case gcw.api.GameEventType.NGS_RESPONSE:
                            _this._handleNgsResponse(data);
                            break;
                        case gcw.api.GameEventType.ROUND_START:
                            _this._handleRoundStart(data);
                            break;
                        case gcw.api.GameEventType.ROUND_END:
                            _this._handleRoundEnd(data);
                            break;
                    }
                });
            };
            VideoslotsGameAdapter.prototype.sendEvent = function (type, data) {
                this._game.sendEvent(type, data);
            };
            VideoslotsGameAdapter.prototype.getGameLogRequestData = function (data) {
                return this._game.getGameLogRequestData(data);
            };
            VideoslotsGameAdapter.prototype.getNgsClientUrl = function () {
                return this._game.getNgsClientUrl();
            };
            VideoslotsGameAdapter.prototype._handleNgsResponse = function (data) {
                if (data && data.game && data.game.currentWallet) {
                    this._wallet = data.game.currentWallet;
                    console.info("[videoslots adapter] wallet updated", this._wallet);
                }
            };
            VideoslotsGameAdapter.prototype._handleRoundStart = function (data) {
                if (this._wallet) {
                    this._currentRoundType = this._wallet.freeRounds ?
                        'FREE_ROUND' : 'REGULAR_ROUND';
                    this._postMsg('ROUND_START', {
                        roundType: this._currentRoundType
                    });
                }
            };
            VideoslotsGameAdapter.prototype._handleRoundEnd = function (data) {
                if (this._currentRoundType) {
                    this._postMsg('ROUND_END', {
                        roundType: this._currentRoundType
                    });
                    this._currentRoundType = undefined;
                }
            };
            VideoslotsGameAdapter.prototype._eventListenerCall = function (type, data) {
                if (typeof this._eventListener == "function") {
                    this._eventListener(type, data);
                }
            };
            VideoslotsGameAdapter.prototype._recvMsg = function (msg) {
                var msgWithData = msg && msg.data;
                switch (msgWithData.event) {
                    case 'WALLET_UPDATED':
                        var eventData = msg.data;
                        var wallet = {
                            balance: eventData && eventData.balance || 0,
                            free_balance: eventData && eventData.freeBalance || 0
                        };
                        this._game.sendEvent(gcw.api.GameEventType.WALLET_UPDATED, wallet);
                        break;
                }
            };
            ;
            VideoslotsGameAdapter.prototype._postMsg = function (event, data) {
                var msg = { event: event, data: data };
                window.parent.postMessage(msg, '*');
            };
            VideoslotsGameAdapter.prototype.setSuperWheelPostInitializationCallback = function (callback) {
                if (this._game.setSuperWheelPostInitializationCallback) {
                    this._game.setSuperWheelPostInitializationCallback(callback);
                }
            };
            VideoslotsGameAdapter.prototype.updateBalanceViaHeartbeat = function () {
                if (this._game.updateBalanceViaHeartbeat) {
                    this._game.updateBalanceViaHeartbeat();
                }
            };
            return VideoslotsGameAdapter;
        }());
        adapter.VideoslotsGameAdapter = VideoslotsGameAdapter;
    })(adapter = gcw.adapter || (gcw.adapter = {}));
})(gcw || (gcw = {}));
var minSpinDuration;
function getSourceUrlWithDevOverride(paramName, configValue) {
    if ('development' === 'production') {
        return configValue;
    }
    var overrideUrl = new URL(window.location.href).searchParams.get(paramName);
    return overrideUrl || configValue;
}
var gcw;
(function (gcw) {
    var GameEventType = gcw.api.GameEventType;
    var handleErrorRef;
    function gameElementsInit(gameEventListener, callback, integrationData) {
        if (gameEventListener === void 0) { gameEventListener = null; }
        var gameNodes = document.getElementsByTagName('gcw-game');
        if (!gameNodes || gameNodes.length == 0) {
            gameNodes = document.getElementsByTagName('ngc-game');
        }
        for (var i = 0, gameNode; (gameNode = gameNodes[i]); i++) {
            gcw.gameElementInit(gameNode, gameEventListener, callback, integrationData);
            gameNode.style.width = '100%';
            gameNode.style.height = '100%';
            gameNode.style.display = 'block';
            gameNode.style.position = 'relative';
        }
        var gameNodes = document.getElementsByClassName('gcw-game');
        if (!gameNodes || gameNodes.length == 0) {
            gameNodes = document.getElementsByClassName('ngc-game');
        }
        for (var i = 0, gameNode; (gameNode = gameNodes[i]); i++) {
            gcw.gameElementInit(gameNode, gameEventListener, callback, integrationData);
            gameNode.style.width = '100%';
            gameNode.style.height = '100%';
            gameNode.style.display = 'block';
            gameNode.style.position = 'relative';
        }
    }
    gcw.gameElementsInit = gameElementsInit;
    function gameElementInit(gameElement, gameEventListener, callback, integrationData) {
        if (gameElement) {
            var gameSessionUrl = gameElement.getAttribute('gcw-server-url');
            if (!gameSessionUrl) {
                gameSessionUrl = gameElement.getAttribute('ngc-server-url');
            }
            var gameLibUrl = gameElement.getAttribute('gcw-client-url');
            if (!gameLibUrl) {
                gameLibUrl = gameElement.getAttribute('ngc-client-url');
            }
            var gcwOptsStr = gameElement.getAttribute('gcw-options');
            if (!gcwOptsStr) {
                gcwOptsStr = gameElement.getAttribute('ngc-options');
            }
            var gcwOpts = parseGcwOpts(gcwOptsStr, gameElement);
            var modal = document.getElementById('gcw-message-dlg');
            if (modal) {
                modal.style.display = 'none';
            }
            if (gameSessionUrl) {
                gameStart(gameElement, gameSessionUrl, gameEventListener, gameLibUrl, null, callback, integrationData, gcwOpts);
            }
            else {
                var message = 'Invalid game server-url: ' + gameSessionUrl;
                console.error(message);
                if (typeof callback == 'function') {
                    callback(null, message);
                }
            }
        }
        else {
            console.error('Invalid game element: ' + gameElement);
        }
    }
    gcw.gameElementInit = gameElementInit;
    function gameStart(gameContainer, gameSessionUrl, gameEventListener, gameLibUrl, replayConf, callback, integrationData, gcwOpts) {
        loadGame(gameSessionUrl, function (gameLib, initConf, realityCheck, replayConf, loggingServiceUrl, err) {
            if (err) {
                if (typeof callback == 'function') {
                    console.error('Load game error', err);
                    callback(null, err);
                }
            }
            else {
                initializeGame(gameContainer, gameSessionUrl, gameLib, initConf, realityCheck, loggingServiceUrl, gameEventListener, replayConf, callback, integrationData, gcwOpts);
            }
        }, gameLibUrl, replayConf);
    }
    gcw.gameStart = gameStart;
    function loadGame(sessionUrl, callback, gameLibUrl, replayConf) {
        var libUrl = gameLibUrl;
        var initRequest = createInitRequest(replayConf);
        sendInitOperationRequest(sessionUrl, initRequest, function (response, err) {
            gcw['__initResponse'] = response;
            if (err) {
                console.error('Game init operation request error', err);
                callback(null, null, null, null, null, err);
            }
            else {
                if (typeof gcw.beforeGameInit == 'function')
                    gcw.beforeGameInit(response);
                var operation_1 = response['operation'];
                var superWheelConfig_1 = response['superWheel'];
                var spinToWinConfig_1 = response['spinToWin'];
                if (operation_1) {
                    if (!handleErrorRef && operation_1.loggingServiceUrl) {
                        handleErrorRef = handleError;
                        if (window.addEventListener) {
                            window.addEventListener('error', function (evt) {
                                handleErrorRef(evt, null, sessionUrl, operation_1.loggingServiceUrl);
                            });
                        }
                        else if (window.attachEvent) {
                            window.attachEvent('onerror', function (evt) {
                                handleErrorRef(evt, null, sessionUrl, operation_1.loggingServiceUrl);
                            });
                        }
                    }
                    var gameLibUrl_1 = libUrl || operation_1.gameScriptUrl;
                    if (gameLibUrl_1) {
                        loadGameLib(gameLibUrl_1, function (gameLib) {
                            if (typeof callback == 'function') {
                                var initConf = createInitConf(operation_1, superWheelConfig_1, spinToWinConfig_1);
                                if (response['configuration'] &&
                                    response['configuration']['game']) {
                                    initConf = __assign({}, initConf, response['configuration']['game']);
                                }
                                callback(gameLib, initConf, operation_1.realityCheck, replayConf, operation_1.loggingServiceUrl);
                            }
                        });
                    }
                    else {
                        var message = 'Game lib path missing';
                        console.error(message);
                        if (typeof callback == 'function') {
                            callback(null, null, null, null, operation_1.loggingServiceUrl, message);
                        }
                    }
                }
                else {
                    console.error('Init response not found', response);
                }
            }
        });
    }
    gcw.loadGame = loadGame;
    function loadScript(scriptUrl, onLoad) {
        var script = document.createElement('script');
        script.src = scriptUrl;
        script.onload = onLoad;
        document.head.appendChild(script);
    }
    function loadStyle(styleUrl) {
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = styleUrl;
        document.head.appendChild(link);
    }
    function loadScriptAndStyle(scriptUrl, styleUrl, onLoad) {
        loadScript(scriptUrl, onLoad);
        loadStyle(styleUrl);
    }
    function loadUserInterfaceWrapper(initConf, game, initializeData, callback) {
        if (initConf['disableEW'] === 'true') {
            callback();
            return;
        }
        var gameWrapperRoot = gcw;
        if (gameWrapperRoot._gameType && gameWrapperRoot._gameType === 'minigame') {
            var gameContainer = initializeData.containerElement;
            var gameDiv = document.createElement('div');
            gameDiv.classList.add('game-container');
            var uiDiv_1 = document.createElement('div');
            uiDiv_1.classList.add('ui-container');
            var fixedGameWrapper = document.createElement('div');
            fixedGameWrapper.appendChild(gameDiv);
            fixedGameWrapper.appendChild(uiDiv_1);
            fixedGameWrapper.classList.add('sl-container');
            gameContainer.appendChild(fixedGameWrapper);
            initializeData.containerElement = gameDiv;
            var baseUrl_1 = getSourceUrlWithDevOverride('mgwsrc', initConf['miniGameWrapper']);
            loadScriptAndStyle(baseUrl_1 + 'mini-game-wrapper.js', baseUrl_1 + 'mini-game-wrapper.css', function () {
                console.error('mini game wrapper loaded');
                window['miniGameWrapper'].mount(uiDiv_1);
                window['miniGameWrapper'].initListeners(gcw, game, baseUrl_1);
                callback();
            });
        }
        else if (initConf['enrichedWrapper']) {
            var baseUrl_2 = getSourceUrlWithDevOverride('ewsrc', initConf['enrichedWrapper']);
            loadScriptAndStyle(baseUrl_2 + 'js/app.js', baseUrl_2 + 'css/app.css', function () {
                console.error('enriched wrapper loaded');
                window['enrichedWrapper'].initListeners(gcw, game, baseUrl_2);
                callback();
            });
        }
        else {
            callback();
        }
    }
    function loadGamePatch(initConf, callback) {
        if (initConf['snaPatch']) {
            loadScript(initConf['snaPatch'], function () { return callback(); });
        }
        else {
            callback();
        }
    }
    function loadSentryScript(initConf) {
        if (initConf['gcwFELogging'] === 'true') {
            var script = document.createElement('script');
            script.crossOrigin = 'anonymous';
            script.onload = function () {
                var sentry = window['Sentry'];
                sentry.onLoad(function () {
                    sentry.init({});
                });
            };
            console.info('Collecting information is enabled.');
            document.head.appendChild(script);
            script.src =
                'https://js.sentry-cdn.com/b04d9fc06f289e12ebb8d00a8ac24f55.min.js';
        }
    }
    function loadSuperWheel(initConf, game, callback) {
        var searchParams = new URL(window.location.href).searchParams;
        var hashParams = new URLSearchParams(window.location.hash.substring(1));
        if (initConf.superWheel &&
            initConf.superWheel.feedsLink &&
            !(searchParams.get('replayUrl') && searchParams.get('roundRef')) &&
            !(hashParams.get('replayUrl') && hashParams.get('roundRef'))) {
            var script = document.createElement('script');
            document.head.appendChild(script);
            script.onload = function () {
                console.log('GCW - SLSW library loaded');
                var slsw = window['SLSW'];
                var mode = searchParams.get('p') || 'DESKTOP';
                var gcwGameElement = document.getElementsByTagName('gcw-game').item(0);
                if (!gcwGameElement) {
                    gcwGameElement = document.getElementsByTagName('ngc-game').item(0);
                }
                gcwGameElement.classList.add('sw-teaser-container');
                gcw['__temp_sw'].available = true;
                gcw['__temp_sw'].skipSplashScreen = initConf['skipSwIntro'] === 'true';
                gcw['__temp_sw'].skipPopup =
                    initConf['swAutoEnable'] === 'true' ||
                        initConf['swAutoEnable'] === 'false';
                gcw['__temp_sw'].autoEnable = initConf['swAutoEnable'] === 'true';
                gcw['__temp_sw'].superWheelGame =
                    initConf.superWheel.superWheelGame || false;
                gcw['__temp_sw'].initData = {
                    currency: {
                        code: '',
                        symbol: '',
                        decimalCount: 0,
                        decimalSeparator: '.',
                        thousandSeparator: ',',
                        symbolPosition: 'BEGIN',
                    },
                    language: initConf.locale || 'en',
                    sound: {
                        enabledOnStartup: false,
                        initialVolume: 1,
                    },
                    winnersListDisabled: initConf['winnersListDisabled'] &&
                        initConf['winnersListDisabled'] === 'true',
                    feedsLink: initConf.superWheel.feedsLink,
                    historyLink: initConf.superWheel.historyLink,
                    maxBet: initConf.superWheel.maxBet || 0,
                    hitRate: initConf.superWheel.hitRate / 100,
                    gameWrapper: gcwGameElement,
                    promotedFeature: initConf['swHotOrNot'] && initConf['swHotOrNot'] === 'true',
                    platform: mode,
                    casinoId: initConf.superWheel.casinoId,
                };
                callback.call();
            };
            script.src = getSourceUrlWithDevOverride('slswsrc', initConf['slswScript']);
        }
        else {
            console.warn('GCW - SuperWheel - feature disabled (no configuration)');
            callback();
        }
    }
    function loadFeIntegration(initConf, gcwOpts, game, callback) {
        console.log("GCW - checking FE integration");
        if (initConf['gcwFeAdapter']) {
            var detectedIntegration_1 = gcw.utils.integration.detectFrontendModuleIntregration();
            if (detectedIntegration_1 && detectedIntegration_1.length) {
                console.log("GCW - " + detectedIntegration_1 + " detected for FE integration. Loading script.");
                var script = document.createElement('script');
                document.head.appendChild(script);
                script.onload = function () {
                    console.log('GCW - Integation script loaded');
                    var module = window['GcwFeAdapter'].bootstrap(gcw, game, detectedIntegration_1, initConf, gcwOpts, gcw['__initResponse']);
                    game.frontendIntegrationModule = module;
                    callback.call();
                };
                script.src = getSourceUrlWithDevOverride('fesrc', initConf['gcwFeAdapter']);
            }
            else {
                console.log("GCW - No FE integration detected.");
                callback.call();
            }
        }
        else {
            console.log("GCW - Init parameter not sent");
            callback.call();
        }
    }
    function handleError(evt, error, sessionUrl, loggingServiceUrl) {
        var errorLogRequest = createLogRequest();
        var sessionUrlId = getSessionUrlId(sessionUrl);
        errorLogRequest.sessionUrlId = sessionUrlId;
        if (evt) {
            if (evt.error) {
                errorLogRequest.stackTrace = evt.error.stack;
            }
            errorLogRequest.message = evt.message;
        }
        else {
            if (error.stack) {
                errorLogRequest.stackTrace = error.stack;
            }
            errorLogRequest.message = error;
        }
        errorLogRequest.severity = gcw.protocol.LoggingLevel.ERROR;
        logOnServer(errorLogRequest, loggingServiceUrl, 'error');
    }
    gcw.handleError = handleError;
    function handleGameLog(sessionUrl, loggingServiceUrl, data) {
        var gameLogRequest = createLogRequest();
        gameLogRequest.sessionUrlId = getSessionUrlId(sessionUrl);
        gameLogRequest.message = data.message;
        gameLogRequest.stackTrace = data.stackTrace;
        gameLogRequest.severity = data.severity;
        logOnServer(gameLogRequest, loggingServiceUrl, 'game');
    }
    gcw.handleGameLog = handleGameLog;
    function getSessionUrlId(sessionUrl) {
        return sessionUrl.substring(sessionUrl.lastIndexOf('/') + 1);
    }
    function logOnServer(loggingRequest, loggingServiceUrl, logType) {
        new gcw.http.HttpRequest()
            .url(loggingServiceUrl + logType)
            .method('POST')
            .onError(function (err) {
            console.error('Log request failed', err);
        })
            .send(loggingRequest);
    }
    function createInitConf(operation, superWheelConfig, spinToWinConfig) {
        if (operation.spinDuration != null) {
            minSpinDuration = operation.spinDuration;
        }
        return {
            game: operation.game,
            player: operation.player,
            casino: operation.casino,
            superWheel: superWheelConfig,
            spinToWin: spinToWinConfig,
            locale: operation.player && operation.player.locale,
            platform: (operation.game && operation.game.platform) || '',
            gamePlayMode: toGamePlayMode(operation),
            brand: (operation.casino && operation.casino.brand) || '',
            gamebrand: operation.gamebrand,
            spinDuration: operation.spinDuration,
            ukgc: operation.ukgc,
            enableportrait: operation.enableportrait,
            minimalui: forceMinimalUI() ? 0 : operation.minimalui,
            simpleBet: operation.simpleBet,
            buttonsdisabled: operation.buttonsdisabled,
            rtp: operation.game.rtp,
            cgsportversion: operation.cgsportversion || '',
        };
    }
    function forceMinimalUI() {
        var ua = window.navigator.userAgent.toLowerCase();
        return /tipicosport|tipicocasino/.test(ua);
    }
    function toGamePlayMode(operation) {
        var mode = operation.game && operation.game.mode;
        switch (mode) {
            case gcw.protocol.GameMode.CREDITS:
                return gcw.protocol.GamePlayMode.COIN_BASED;
            case gcw.protocol.GameMode.MONEY:
                return gcw.protocol.GamePlayMode.BET_BASED;
            default:
                console.warn('Unknown game mode', mode);
                return gcw.protocol.GamePlayMode.COIN_BASED;
        }
    }
    function initializeGame(gameContainer, gameSessionUrl, gameLib, initConf, realityCheck, loggingServiceUrl, gameEventListener, replayConf, callback, integrationData, gcwOpts) {
        if (gameLib) {
            var game = new gameLib.Game();
            game = new gcw.adapter.NgsGameAdapter(game, loggingServiceUrl);
            if (gcwOpts && gcwOpts.pariplay) {
                game = new gcw.adapter.PariplayGameAdapter(game, gcwOpts);
                if (gameEventListener) {
                    game.setEventListener(gameEventListener);
                }
            }
            if (gcwOpts && gcwOpts.pokerstars) {
                game = new gcw.adapter.PokerstarsGameAdapter(game, gcwOpts, gcw['psOrigin']);
                if (gameEventListener) {
                    game.setEventListener(gameEventListener);
                }
            }
            if (gcwOpts && gcwOpts.videoslots) {
                game = new gcw.adapter.VideoslotsGameAdapter(game);
            }
            if (gcwOpts && gcwOpts.mgs) {
                game = new gcw.adapter.MgsGameAdapter(game);
                if (gameEventListener) {
                    game.setEventListener(gameEventListener);
                }
            }
            if (gcwOpts && gcwOpts.isoftbet) {
                game = new gcw.adapter.ISoftbetGameAdapter(game, gcwOpts, initConf, realityCheck);
                if (gameEventListener) {
                    game.setEventListener(gameEventListener);
                }
            }
            game = new gcw.adapter.CasinoGameAdapter(game, initConf, realityCheck, integrationData, loggingServiceUrl);
            subscribeToCustomEvents(game);
            game.setEventListener(function (type, data) {
                switch (type) {
                    case gcw.api.GameEventType.INITIALIZE_SUCCESS:
                        if (!gamePaused) {
                            game.sendEvent(gcw.api.GameEventType.START);
                        }
                        if (gameEventListener) {
                            game.replaceFirstEventListener(gameEventListener);
                        }
                        break;
                    case gcw.api.GameEventType.INITIALIZE_FAILURE:
                        handleInitializeError(gameSessionUrl, loggingServiceUrl, data);
                        break;
                    default:
                        break;
                }
                if (gameEventListener) {
                    gameEventListener(type, data);
                }
            });
            var initializeData = {
                containerElement: gameContainer,
                gameSessionUrl: gameSessionUrl,
                initConf: initConf,
                replayConf: replayConf,
            };
            loadSentryScript(initConf);
            loadSuperWheel(initConf, game, function () {
                loadFeIntegration(initConf, gcwOpts, game, function () {
                    loadUserInterfaceWrapper(initConf, game, initializeData, function () {
                        var snaGame = !!window['sna'];
                        if (snaGame) {
                            loadGamePatch(initConf, function () {
                                game.sendEvent(gcw.api.GameEventType.INITIALIZE, initializeData);
                            });
                        }
                        else {
                            game.sendEvent(gcw.api.GameEventType.INITIALIZE, initializeData);
                        }
                    });
                });
            });
            if (gcwOpts && gcwOpts.triggerThirdPartyEvent) {
                gcw['triggerThirdPartyEvent'] = function (type, data) {
                    if (type === 'PAUSE') {
                        game.sendEvent(gcw.api.GameEventType.STOP);
                    }
                    else if (type === 'UNPAUSE') {
                        game.sendEvent(gcw.api.GameEventType.START);
                    }
                    else if (type === 'BALANCE_UPDATE_EXTERNAL') {
                        game.sendEvent('WALLET_UPDATED', data);
                    }
                };
            }
            if (typeof callback == 'function') {
                callback(game);
            }
        }
        else {
            var message = 'Game lib path missing';
            console.error(message);
            if (typeof callback == 'function') {
                callback(null, message);
            }
        }
    }
    function subscribeToCustomEvents(game) {
        if (typeof leanderGMApi !== UNDEFINED) {
            leanderGMApi.subscribeToEvent(leanderGMApi.publications.ERROR_HANDLED, function () {
                game.sendEvent(GameEventType.START);
                gamePaused = false;
            });
            leanderGMApi.subscribeToEvent(leanderGMApi.publications.ERROR_OCCURRED, function () {
                game.sendEvent(GameEventType.STOP);
                gamePaused = true;
            });
        }
        else if (typeof unibetGmApi !== UNDEFINED ||
            typeof relaxGmApi !== UNDEFINED) {
            var gmApiImpl = typeof unibetGmApi !== UNDEFINED ? unibetGmApi : relaxGmApi;
            gmApiImpl.subscribeToEvent(gmApiImpl.publications.GAME_RESUME, function () {
                game.sendEvent(GameEventType.START);
                gamePaused = false;
            });
            gmApiImpl.subscribeToEvent(gmApiImpl.publications.GAME_PAUSE, function () {
                game.sendEvent(GameEventType.STOP);
                gamePaused = true;
            });
        }
    }
    function createInitRequest(replayConf) {
        var initRequest;
        if (replayConf) {
            initRequest = {
                id: null,
                date: new Date().toISOString(),
                operation: {
                    init: false,
                    initReplay: true,
                },
                configuration: {
                    init: true,
                },
            };
        }
        else {
            initRequest = {
                id: 1,
                date: new Date().toISOString(),
                operation: {
                    init: true,
                },
                configuration: {
                    init: true,
                },
                game: {
                    init: true,
                },
            };
        }
        return initRequest;
    }
    function createLogRequest() {
        return {
            date: new Date(),
            sessionUrlId: null,
            message: null,
            stackTrace: null,
            severity: null,
        };
    }
    function sendInitOperationRequest(sessionUrl, initRequest, callback) {
        console.debug('HttpRequest request: ', initRequest);
        new gcw.http.HttpRequest()
            .url(sessionUrl)
            .method('POST')
            .onError(function (err) {
            console.error('Init operation request failed', err);
            if (typeof callback == 'function') {
                callback(null, err);
            }
        })
            .onResponse(function (data) {
            console.debug('HttpRequest response: ', data);
            callback(data);
        })
            .send(initRequest);
    }
    function handleInitializeError(gameSessionUrl, loggingServiceUrl, error) {
        if (document.getElementById('gcw-error-dlg') == undefined) {
            generateErrorDialogue();
            generateErrorDialogueStyle();
        }
        var modal = document.getElementById('gcw-error-dlg');
        modal.style.display = 'table';
        var close = document.getElementById('gcw-error-dlg-close');
        var isFatal = true;
        if (gcw.adapter.GcwError.hasErrorCode(error.code)) {
            isFatal = gcw.adapter.GcwError.isFatal(error.code);
        }
        else if (gcw.api.ErrorCode.hasErrorCode(error.code)) {
            isFatal = gcw.api.ErrorCode.isFatal(error.code);
        }
        if (isFatal) {
            close.style.display = 'none';
        }
        else {
            close.onclick = function () {
                location.reload();
            };
        }
        document.getElementById('gcw-error-dlg-content').innerHTML = error.message;
        if (error.externalMessage) {
            document.getElementById('gcw-error-dlg-external').innerHTML =
                error.externalMessage;
        }
        if (loggingServiceUrl) {
            handleError(null, error, gameSessionUrl, loggingServiceUrl);
        }
    }
    function generateErrorDialogueStyle() {
        var decorator = new (gcw).gamebrand.ErrDecorator();
        var errDlgStyle = decorator.getErrDlgStyle();
        document
            .getElementsByTagName('head')[0]
            .insertAdjacentHTML('beforeend', errDlgStyle);
    }
    function generateErrorDialogue() {
        var errDlg = '<div id="gcw-error-dlg"><div id="gcw-error-dlg-middle"><div class="modal-content"><div class="modal-header"><h2>Error</h2></div><div class="modal-body">' +
            '<p id="gcw-error-dlg-content"></p>' +
            '<p id="gcw-error-dlg-external"></p>' +
            '</div><a id="gcw-error-dlg-close" href="#">RELOAD</a></div></div></div>';
        document
            .getElementsByTagName('body')[0]
            .insertAdjacentHTML('beforeend', errDlg);
    }
    function loadGameLib(gameLibUrl, callback) {
        gcw.load.loadScript(gameLibUrl, function () {
            var groups = /(.*\/)?([A-z0-9_]+)(-([A-z0-9_\.]+))?\.js/.exec(gameLibUrl);
            var gameLibBase = typeof groups[1] !== 'undefined' ? groups[1] : '';
            var gameLibName = groups[2];
            var gameLibVersion = groups[4];
            console.debug('Game lib loaded:' +
                '\n\tbase URL: ' +
                gameLibBase +
                '\n\tlib name: ' +
                gameLibName +
                '\n\tlib version: ' +
                gameLibVersion);
            var gameWrapperRoot = gcw;
            var gameWrapperGames = gameWrapperRoot.games || (gameWrapperRoot.games = {});
            var gameLib = gameWrapperGames[gameLibName];
            gameWrapperRoot._gameType = gameWrapperGames[gameLibName].gameType;
            gameLib.base = gameLibBase;
            gameLib.name = gameLibName;
            if (gameLibVersion) {
                gameLib.version = gameLibVersion;
            }
            if (typeof callback == 'function') {
                callback(gameLib);
            }
        });
    }
    gcw.loadGameLib = loadGameLib;
    function parseGcwOpts(str, gameElement) {
        var opts = { videoslots: false };
        if (str == 'videoslots=1') {
            opts.videoslots = true;
        }
        else if (str === 'pariplay') {
            return {
                pariplay: true,
                homeUrl: gameElement.getAttribute('gcw-server-home-url'),
                historyUrl: gameElement.getAttribute('gcw-server-history-url'),
                cashierUrl: gameElement.getAttribute('gcw-server-cashier-url'),
                gameCode: gameElement.getAttribute('gcw-server-game-code'),
                language: gameElement.getAttribute('gcw-server-language'),
            };
        }
        else if (str === 'pokerstars') {
            return { pokerstars: true };
        }
        else if (str === 'mgs') {
            return { mgs: true };
        }
        else if (str === 'pokerstars') {
            return { pokerstars: true };
        }
        else if (str === 'triggerThirdPartyEvent') {
            return { triggerThirdPartyEvent: true };
        }
        else if (str === 'isoftbet') {
            return {
                isoftbet: true,
                lobbyUrl: gameElement
                    .getAttribute('gcw-server-lobby-url')
                    .replace(/'/g, '')
                    .replace(/"/g, ''),
                historyUrl: gameElement
                    .getAttribute('gcw-server-history-url')
                    .replace(/'/g, '')
                    .replace(/"/g, ''),
            };
        }
        else {
            var lobbyAttribute = gameElement.getAttribute('gcw-server-lobby-url');
            if (lobbyAttribute) {
                opts['lobbyUrl'] = lobbyAttribute.replace(/'/g, '').replace(/"/g, '');
            }
        }
        return opts;
    }
})(gcw || (gcw = {}));
var ngc = gcw;
var gcw;
(function (gcw) {
    var protocol;
    (function (protocol) {
        var StatusCode = (function () {
            function StatusCode() {
            }
            StatusCode.OK = "OK";
            StatusCode.REQUEST_IN_PROCESSING = "REQUEST_IN_PROCESSING";
            StatusCode.FUNDS_STRUCTURE_CHANGED = "FUNDS_STRUCTURE_CHANGED";
            StatusCode.INSUFFICIENT_FUNDS = "INSUFFICIENT_FUNDS";
            StatusCode.INTERNAL_SERVER_ERROR = "INTERNAL_SERVER_ERROR";
            StatusCode.INVALID_REQUEST = "INVALID_REQUEST";
            StatusCode.INVALID_DEFENCE_CODE = "INVALID_DEFENCE_CODE";
            StatusCode.UNKNOWN_GAME_SESSION = "UNKNOWN_GAME_SESSION";
            StatusCode.UNKNOWN_GAME_ROUND = "UNKNOWN_GAME_ROUND";
            StatusCode.GAME_RESTRICTED_IN_COUNTRY = "GAME_RESTRICTED_IN_COUNTRY";
            StatusCode.GAME_SESSION_CLOSED = "GAME_SESSION_CLOSED";
            StatusCode.GAME_CLIENT_CLOSED = "GAME_CLIENT_CLOSED";
            StatusCode.GAME_CLIENT_OBSOLETE = "GAME_CLIENT_OBSOLETE";
            StatusCode.CASINO_PLATFORM_INTEGRATION_ERROR = "CASINO_PLATFORM_INTEGRATION_ERROR";
            StatusCode.INVALID_STAKE_VALUES = "INVALID_STAKE_VALUES";
            return StatusCode;
        }());
        protocol.StatusCode = StatusCode;
    })(protocol = gcw.protocol || (gcw.protocol = {}));
})(gcw || (gcw = {}));
//# sourceMappingURL=gcw.js.map