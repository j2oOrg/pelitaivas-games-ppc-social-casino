(GcwGameClient=function(){}).consoleLog=!1,GcwGameClient.wrapperData={},GcwGameClient.elementId="mainContainer",GcwGameClient.serviceName="MainService",GcwGameClient.setEventListenerPromise=new Promise(function(e,t){GcwGameClient.resolvePromise=e}),GcwGameClient.getMainService=function(){return angular.element(document.getElementById(GcwGameClient.elementId)).injector().get(GcwGameClient.serviceName)},GcwGameClient.prototype.setEventListener=function(r){GcwGameClient.triggerEvent=function(i,n,e){if(GcwGameClient.consoleLog&&console.log("Sent event: "+i+" with data: "+n),e){var s=i;return i==gcw.api.GameEventType.NGS_REQUEST&&(s=i+(n.id||"")),GcwGameClient[s]={},GcwGameClient[s].resolve=null,GcwGameClient[s].reject=null,GcwGameClient[s].promise=new Promise(function(e,t){GcwGameClient[s].resolve=e,GcwGameClient[s].reject=t,r(i,n)}),GcwGameClient[s].promise}return r(i,n)},GcwGameClient.resolvePromise()},GcwGameClient.prototype.sendEvent=function(e,t){switch(GcwGameClient.consoleLog&&console.log("Received event: "+e+" with data: "+t),e){case gcw.api.GameEventType.UI_ON_INITIALIZE:GcwGameClient.wrapperData.uiReady=!0,GcwGameClient.wrapperData.loaderHandshakeActive=!(!t||!t.loaderHandshakeActive);break;case gcw.api.GameEventType.INITIALIZE:GcwGameClient.initialData=t,GcwGameClient.initialData.containerElement&&document.getElementById(GcwGameClient.elementId)&&GcwGameClient.initialData.containerElement.appendChild(document.getElementById(GcwGameClient.elementId));break;case gcw.api.GameEventType.START:GcwGameClient.iface&&GcwGameClient.iface.processWrapperStart();break;case gcw.api.GameEventType.STOP:GcwGameClient.iface&&GcwGameClient.iface.processWrapperStop();break;case gcw.api.GameEventType.TERMINATE:GcwGameClient.iface&&GcwGameClient.iface.processWrapperTerminate();break;case gcw.api.GameEventType.NGS_RESPONSE:var i;("number"==typeof t.id||t.operation||t.replay)&&(i=gcw.api.GameEventType.NGS_REQUEST+(t.id||""),GcwGameClient[i]&&GcwGameClient[i].resolve({data:t}));break;case gcw.api.GameEventType.NGS_ERROR:GcwGameClient[gcw.api.GameEventType.NGS_REQUEST]?GcwGameClient[gcw.api.GameEventType.NGS_REQUEST].reject(new Error("Request failed")):t&&t.message&&-1!=t.message.indexOf("Client request error:")&&Object.keys(GcwGameClient).forEach(function(e){-1==e.indexOf(gcw.api.GameEventType.NGS_REQUEST)&&-1==e.indexOf(gcw.api.GameEventType.ROUND_REQUEST)||(GcwGameClient[e].reject(new Error("Request failed")),delete GcwGameClient[e])}.bind(this));break;case gcw.api.GameEventType.FREE_ROUND_POSTPONE:break;case gcw.api.GameEventType.LOBBY_ACTIVE:GcwGameClient.wrapperData.lobbyActive=t,GcwGameClient.wrapperData.lobbyActivePending=!0,GcwGameClient.iface&&GcwGameClient.iface.processWrapperLobbyActive();break;case gcw.api.GameEventType.VERSION:GcwGameClient.wrapperData.versionPending=!0,GcwGameClient.iface&&GcwGameClient.iface.processWrapperVersionEvent();break;case gcw.api.GameEventType.CURRENCY_FORMATTING:GcwGameClient.wrapperData.currencyFormattingPending=!0,GcwGameClient.iface&&GcwGameClient.iface.processWrapperCurrencyFormatingEvent();break;case gcw.api.GameEventType.MUSIC_ACTIVE:GcwGameClient.wrapperData.musicActive=t,GcwGameClient.wrapperData.musicActivePending=!0,GcwGameClient.iface&&GcwGameClient.iface.processWrapperMusicActive();break;case gcw.api.GameEventType.SOUND_EFFECTS_ACTIVE:GcwGameClient.wrapperData.soundEffectsActive=t,GcwGameClient.wrapperData.soundEffectsActivePending=!0,GcwGameClient.iface&&GcwGameClient.iface.processWrapperSoundEffectsActive();break;case gcw.api.GameEventType.GENERAL_SOUND_STATUS_CHANGED:GcwGameClient.iface&&GcwGameClient.iface.processWrapperGeneralSoundStatusChanged(t);break;case gcw.api.GameEventType.MUSIC_STATUS_CHANGED:GcwGameClient.iface&&GcwGameClient.iface.processWrapperMusicStatusChanged(t);break;case gcw.api.GameEventType.SOUND_EFFECTS_STATUS_CHANGED:GcwGameClient.iface&&GcwGameClient.iface.processWrapperSoundEffectsStatusChanged(t);break;case gcw.api.GameEventType.CONTROL_PANEL_STATUS_CHANGED:GcwGameClient.iface&&GcwGameClient.iface.processWrapperSettingsTabStatusChanged(t,"CONTROL_PANEL");break;case gcw.api.GameEventType.ABOUT_STATUS_CHANGED:GcwGameClient.iface&&GcwGameClient.iface.processWrapperSettingsTabStatusChanged(t,"ABOUT");break;case gcw.api.GameEventType.ON_BUTTON_CLICKED:(GcwGameClient.iface&&!GcwGameClient.superStakeAnimationActive||t&&"BUTTON_CONTINUE"===t.name)&&GcwGameClient.iface.processWrapperButtonClickEvent(t,"ON_BUTTON_CLICKED");break;case gcw.api.GameEventType.PAY_TABLE_STATUS_CHANGED:GcwGameClient.iface&&GcwGameClient.iface.processWrapperSettingsTabStatusChanged(t,"PAY_TABLE");break;case gcw.api.GameEventType.WALLET_UPDATED:GcwGameClient.iface.communication&&GcwGameClient.iface.processWrapperWalletUpdated(t);break;case gcw.api.GameEventType.HEARTBEAT_REQUEST:GcwGameClient.triggerEvent(gcw.api.GameEventType.HEARTBEAT_REQUEST);break;case gcw.api.GameEventType.ERROR_HANDLED:case gcw.api.GameEventType.ERROR_NOT_HANDLED:case gcw.api.GameEventType.AUTOPLAY_ACTIVATE_SUCCESS:case gcw.api.GameEventType.AUTOPLAY_ACTIVATE_FAILURE:case gcw.api.GameEventType.AUTOPLAY_LIMIT_REACHED:break;case gcw.api.GameEventType.ROUND_REQUEST_CONFIRMED:GcwGameClient[gcw.api.GameEventType.ROUND_REQUEST]&&GcwGameClient[gcw.api.GameEventType.ROUND_REQUEST].resolve({data:t});break;case gcw.api.GameEventType.GUI_BLOCKED_RESPONSE:case gcw.api.GameEventType.FULLSCREEN_MODE_HANDLED:case gcw.api.GameEventType.FULLSCREEN_MODE_NOT_HANDLED:case gcw.api.GameEventType.COMPLIANCE_MODE:break;case"SUPER_WHEEL_ROUND_STARTING":GcwGameClient.iface&&GcwGameClient.iface.processSuperWheelRoundStarting(t);break;case gcw.api.GameEventType.WRAPPER_EVENT:switch(t.name){case"SUPER_STAKE_ANIMATION":GcwGameClient.superStakeAnimationActive=t.data;break;case"WRAPPER_ASSETS_LOADED":GcwGameClient.loadingDeferred&&GcwGameClient.loadingDeferred.resolve(!0)}break;default:GcwGameClient.consoleLog&&console.log("Not found event: "+e+" with data: "+t)}},window.SNA={};for(var scriptElements=document.getElementsByTagName("script"),thisScriptElement=scriptElements[0],i=0;i<scriptElements.length;i++)if(-1!==scriptElements[i].src.indexOf("roostermobs.js")){thisScriptElement=scriptElements[i];break}var scriptPath=thisScriptElement.src,scriptFolder=scriptPath.substr(0,scriptPath.lastIndexOf("/")+1);window.SNA.basePath=scriptFolder,window.SNA.assetPath=scriptFolder+"assets/",window.SNA.configLocation=scriptFolder+"config.json";var gameWrapperRoot=gcw,gameWrapperGames=gameWrapperRoot.games||(gameWrapperRoot.games={});gameWrapperGames.roostermobs={base:null,Game:GcwGameClient};var setFocus=function(){setTimeout(function(){var e=document.getElementById("game");e?(e.style.outline="none",e.tabIndex=1,e.onclick=function(){e.focus()}):setFocus()},1e3)};setFocus(),console.warn=function(){},console.groupCollapsed=function(){},function(g){"use strict";function S(r,o){return o=o||Error,function(){var e,t,i=arguments,n=i[0],s="["+(r?r+":":"")+n+"] ";for(s+=i[1].replace(/\{\d+\}/g,function(e){var t=2+ +e.slice(1,-1);return t<i.length?Ge(i[t]):e}),s+="\nhttp://errors.angularjs.org/1.5.7/"+(r?r+"/":"")+n,t=2,e="?";t<i.length;t++,e="&")s+=e+"p"+(t-2)+"="+encodeURIComponent(Ge(i[t]));return new o(s)}}var r=/^\/(.+)\/([a-z]*)$/,p="validity",F=Object.prototype.hasOwnProperty,D=function(e){return U(e)?e.toLowerCase():e},c=function(e){return U(e)?e.toUpperCase():e};"i"!=="I".toLowerCase()&&(D=function(e){return U(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},c=function(e){return U(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e});var L,de,s,f,o=[].slice,i=[].splice,e=[].push,T=Object.prototype.toString,a=Object.getPrototypeOf,l=S("ng"),I=g.angular||(g.angular={}),h=0;function N(e){if(null!=e&&!E(e)){if(be(e)||U(e)||de&&e instanceof de)return 1;var t="length"in Object(e)&&e.length;return P(t)&&(0<=t&&(t-1 in e||e instanceof Array)||"function"==typeof e.item)}}function me(e,t,i){if(e)if(Se(e))for(s in e)"prototype"==s||"length"==s||"name"==s||e.hasOwnProperty&&!e.hasOwnProperty(s)||t.call(i,e[s],s,e);else if(be(e)||N(e))for(var n="object"!=typeof e,s=0,r=e.length;s<r;s++)(n||s in e)&&t.call(i,e[s],s,e);else if(e.forEach&&e.forEach!==me)e.forEach(t,i,e);else if(A(e))for(s in e)t.call(i,e[s],s,e);else if("function"==typeof e.hasOwnProperty)for(s in e)e.hasOwnProperty(s)&&t.call(i,e[s],s,e);else for(s in e)F.call(e,s)&&t.call(i,e[s],s,e);return e}function u(e,t,i){for(var n=Object.keys(e).sort(),s=0;s<n.length;s++)t.call(i,e[n[s]],n[s]);return n}function v(i){return function(e,t){i(t,e)}}function d(){return++h}function m(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function y(e,t,i){for(var n=e.$$hashKey,s=0,r=t.length;s<r;++s){var o=t[s];if(ye(o)||Se(o))for(var a=Object.keys(o),l=0,h=a.length;l<h;l++){var c=a[l],p=o[c];i&&ye(p)?x(p)?e[c]=new Date(p.valueOf()):B(p)?e[c]=new RegExp(p):p.nodeName?e[c]=p.cloneNode(!0):O(p)?e[c]=p.clone():(ye(e[c])||(e[c]=be(p)?[]:{}),y(e[c],[p],!0)):e[c]=p}}return m(e,n),e}function fe(e){return y(e,o.call(arguments,1),!1)}function t(e){return y(e,o.call(arguments,1),!0)}function b(e){return parseInt(e,10)}function ge(e,t){return fe(Object.create(e),t)}function k(){}function G(e){return e}function C(e){return function(){return e}}function _(e){return Se(e.toString)&&e.toString!==T}function ve(e){return void 0===e}function W(e){return void 0!==e}function ye(e){return null!==e&&"object"==typeof e}function A(e){return null!==e&&"object"==typeof e&&!a(e)}function U(e){return"string"==typeof e}function P(e){return"number"==typeof e}function x(e){return"[object Date]"===T.call(e)}L=g.document.documentMode,k.$inject=[],G.$inject=[];var be=Array.isArray;function Se(e){return"function"==typeof e}function B(e){return"[object RegExp]"===T.call(e)}function E(e){return e&&e.window===e}function Te(e){return e&&e.$evalAsync&&e.$watch}function V(e){return"boolean"==typeof e}function w(e){return e&&Se(e.then)}var R=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/;var _e=function(e){return U(e)?e.trim():e},M=function(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function O(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function Ae(e){return D(e.nodeName||e[0]&&e[0].nodeName)}function H(e,t){t=e.indexOf(t);return 0<=t&&e.splice(t,1),t}function $(e,i){var t,n=[],s=[];if(i){if((t=i)&&P(t.length)&&R.test(T.call(t))||"[object ArrayBuffer]"===T.call(i))throw l("cpta","Can't copy! TypedArray destination cannot be mutated.");if(e===i)throw l("cpi","Can't copy! Source and destination are identical.");return be(i)?i.length=0:me(i,function(e,t){"$$hashKey"!==t&&delete i[t]}),n.push(e),s.push(i),r(e,i)}return o(e);function r(e,t){var i,n=t.$$hashKey;if(be(e))for(var s=0,r=e.length;s<r;s++)t.push(o(e[s]));else if(A(e))for(i in e)t[i]=o(e[i]);else if(e&&"function"==typeof e.hasOwnProperty)for(i in e)e.hasOwnProperty(i)&&(t[i]=o(e[i]));else for(i in e)F.call(e,i)&&(t[i]=o(e[i]));return m(t,n),t}function o(e){if(!ye(e))return e;var t=n.indexOf(e);if(-1!==t)return s[t];if(E(e)||Te(e))throw l("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var i=!1,t=function(e){switch(T.call(e)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new e.constructor(o(e.buffer));case"[object ArrayBuffer]":if(e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t;case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new e.constructor(e.valueOf());case"[object RegExp]":t=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]);return t.lastIndex=e.lastIndex,t;case"[object Blob]":return new e.constructor([e],{type:e.type})}if(Se(e.cloneNode))return e.cloneNode(!0)}(e);return void 0===t&&(t=be(e)?[]:Object.create(a(e)),i=!0),n.push(e),s.push(t),i?r(e,t):t}}function Pe(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!=e&&t!=t)return!0;var i,n,s,r=typeof e;if(r==typeof t&&"object"==r){if(!be(e)){if(x(e))return!!x(t)&&Pe(e.getTime(),t.getTime());if(B(e))return!!B(t)&&e.toString()==t.toString();if(Te(e)||Te(t)||E(e)||E(t)||be(t)||x(t)||B(t))return!1;for(n in s=Me(),e)if("$"!==n.charAt(0)&&!Se(e[n])){if(!Pe(e[n],t[n]))return!1;s[n]=!0}for(n in t)if(!(n in s)&&"$"!==n.charAt(0)&&W(t[n])&&!Se(t[n]))return!1;return!0}if(!be(t))return!1;if((i=e.length)==t.length){for(n=0;n<i;n++)if(!Pe(e[n],t[n]))return!1;return!0}}return!1}var X=function(){var e;return W(X.rules)||((e=g.document.querySelector("[ng-csp]")||g.document.querySelector("[data-ng-csp]"))?(e=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp"),X.rules={noUnsafeEval:!e||-1!==e.indexOf("no-unsafe-eval"),noInlineStyle:!e||-1!==e.indexOf("no-inline-style")}):X.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(e){return!0}}(),noInlineStyle:!1}),X.rules},Y=function(){if(W(Y.name_))return Y.name_;for(var e,t,i,n=se.length,s=0;s<n;++s)if(t=se[s],e=g.document.querySelector("["+t.replace(":","\\:")+"jq]")){i=e.getAttribute(t+"jq");break}return Y.name_=i};function j(e,t,i){return e.concat(o.call(t,i))}function Ie(e,t){return o.call(e,t||0)}function Ce(e,t){var i=2<arguments.length?Ie(arguments,2):[];return!Se(t)||t instanceof RegExp?t:i.length?function(){return arguments.length?t.apply(e,j(i,arguments,0)):t.apply(e,i)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function n(e,t){var i=t;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?i=void 0:E(t)?i="$WINDOW":t&&g.document===t?i="$DOCUMENT":Te(t)&&(i="$SCOPE"),i}function z(e,t){if(!ve(e))return P(t)||(t=t?2:null),JSON.stringify(e,n,t)}function q(e){return U(e)?JSON.parse(e):e}var K=/:/g;function Q(e,t){e=e.replace(K,"");e=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(e)?t:e}function Z(e,t,i){i=i?-1:1;var n=e.getTimezoneOffset(),t=Q(t,n);return e=e,n=i*(t-n),(e=new Date(e.getTime())).setMinutes(e.getMinutes()+n),e}function xe(e){e=de(e).clone();try{e.empty()}catch(e){}var t=de("<div>").append(e).html();try{return e[0].nodeType===Ne?D(t):t.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(e,t){return"<"+D(t)})}catch(e){return D(t)}}function J(e){try{return decodeURIComponent(e)}catch(e){}}function ee(e){var s={};return me((e||"").split("&"),function(e){var t,i,n;e&&(i=e=e.replace(/\+/g,"%20"),-1!==(t=e.indexOf("="))&&(i=e.substring(0,t),n=e.substring(t+1)),W(i=J(i))&&(n=!W(n)||J(n),F.call(s,i)?be(s[i])?s[i].push(n):s[i]=[s[i],n]:s[i]=n))}),s}function te(e){var i=[];return me(e,function(e,t){be(e)?me(e,function(e){i.push(ne(t,!0)+(!0===e?"":"="+ne(e,!0)))}):i.push(ne(t,!0)+(!0===e?"":"="+ne(e,!0)))}),i.length?i.join("&"):""}function ie(e){return ne(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function ne(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}var se=["ng-","data-ng-","ng:","x-ng-"];function re(i,e){var n,s,t={};me(se,function(e){e+="app";!n&&i.hasAttribute&&i.hasAttribute(e)&&(s=(n=i).getAttribute(e))}),me(se,function(e){var t,e=e+"app";!n&&(t=i.querySelector("["+e.replace(":","\\:")+"]"))&&(s=(n=t).getAttribute(e))}),n&&(t.strictDi=null!==function(e,t){for(var i,n=se.length,s=0;s<n;++s)if(i=se[s]+t,U(i=e.getAttribute(i)))return i;return null}(n,"strict-di"),e(n,s?[s]:[],t))}function oe(t,i,n){n=fe({strictDi:!1},n=!ye(n)?{}:n);function s(){if((t=de(t)).injector()){var e=t[0]===g.document?"document":xe(t);throw l("btstrpd","App already bootstrapped with this element '{0}'",e.replace(/</,"&lt;").replace(/>/,"&gt;"))}return(i=i||[]).unshift(["$provide",function(e){e.value("$rootElement",t)}]),n.debugInfoEnabled&&i.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),i.unshift("ng"),(e=Vt(i,n.strictDi)).invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,i,n){e.$apply(function(){t.data("$injector",n),i(t)(e)})}]),e}var e=/^NG_ENABLE_DEBUG_INFO!/,r=/^NG_DEFER_BOOTSTRAP!/;if(g&&e.test(g.name)&&(n.debugInfoEnabled=!0,g.name=g.name.replace(e,"")),g&&!r.test(g.name))return s();g.name=g.name.replace(r,""),I.resumeBootstrap=function(e){return me(e,function(e){i.push(e)}),s()},Se(I.resumeDeferredBootstrap)&&I.resumeDeferredBootstrap()}function ae(){g.name="NG_ENABLE_DEBUG_INFO!"+g.name,g.location.reload()}function le(e){e=I.element(e).injector();if(!e)throw l("test","no injector found for element argument to getTestability");return e.get("$$testability")}var he=/[A-Z]/g;function Be(e,i){return i=i||"_",e.replace(he,function(e,t){return(t?i:"")+e.toLowerCase()})}var ce=!1;function Ee(e,t,i){if(!e)throw l("areq","Argument '{0}' is {1}",t||"?",i||"required");return e}function pe(e,t,i){return Ee(Se(e=i&&be(e)?e[e.length-1]:e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function ue(e,t){if("hasOwnProperty"===e)throw l("badname","hasOwnProperty is not a valid {0} name",t)}function we(e,t,i){if(!t)return e;for(var n,s=t.split("."),r=e,o=s.length,a=0;a<o;a++)n=s[a],e=e&&(r=e)[n];return!i&&Se(e)?Ce(r,e):e}function Re(e){for(var t,i=e[0],n=e[e.length-1],s=1;i!==n&&(i=i.nextSibling);s++)!t&&e[s]===i||(t=t||de(o.call(e,0,s))).push(i);return t||e}function Me(){return Object.create(null)}var Oe=1,Ne=3,Fe=8,De=9;function Le(e){var c=S("$injector"),i=S("ng");function t(e,t,i){return e[t]||(e[t]=i())}e=t(e,"angular",Object);return e.$$minErr=e.$$minErr||S,t(e,"module",function(){var e={};return function(a,l,h){return function(e,t){if("hasOwnProperty"===e)throw i("badname","hasOwnProperty is not a valid {0} name",t)}(a,"module"),l&&e.hasOwnProperty(a)&&(e[a]=null),t(e,a,function(){if(!l)throw c("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",a);var s=[],e=[],t=[],i=n("$injector","invoke","push",e),r={_invokeQueue:s,_configBlocks:e,_runBlocks:t,requires:l,name:a,provider:o("$provide","provider"),factory:o("$provide","factory"),service:o("$provide","service"),value:n("$provide","value"),constant:n("$provide","constant","unshift"),decorator:o("$provide","decorator"),animation:o("$animateProvider","register"),filter:o("$filterProvider","register"),controller:o("$controllerProvider","register"),directive:o("$compileProvider","directive"),component:o("$compileProvider","component"),config:i,run:function(e){return t.push(e),this}};return h&&i(h),r;function n(e,t,i,n){return n=n||s,function(){return n[i||"push"]([e,t,arguments]),r}}function o(i,n){return function(e,t){return t&&Se(t)&&(t.$$moduleName=a),s.push([i,n,arguments]),r}}})}})}function ke(e,t){if(be(e)){t=t||[];for(var i=0,n=e.length;i<n;i++)t[i]=e[i]}else if(ye(e))for(var s in t=t||{},e)"$"===s.charAt(0)&&"$"===s.charAt(1)||(t[s]=e[s]);return t||e}function Ge(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):ve(e)?"undefined":"string"!=typeof e?(i=[],JSON.stringify(e,function(e,t){if(ye(t=n(e,t))){if(0<=i.indexOf(t))return"...";i.push(t)}return t})):e;var i}var We={full:"1.5.7",major:1,minor:5,dot:7,codeName:"hexagonal-circumvolution"};ot.expando="ng339";function Ue(e,t,i){e.addEventListener(t,i,!1)}var Ve=ot.cache={},He=1,$e=function(e,t,i){e.removeEventListener(t,i,!1)};ot._data=function(e){return this.cache[e[this.expando]]||{}};var Xe=/([\:\-\_]+(.))/g,Ye=/^moz([A-Z])/,je={mouseleave:"mouseout",mouseenter:"mouseover"},ze=S("jqLite");function qe(e){return e.replace(Xe,function(e,t,i,n){return n?i.toUpperCase():i}).replace(Ye,"Moz$1")}var Ke=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Qe=/<|&#?\w+;/,Ze=/<([\w:-]+)/,Je=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,et={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function tt(e){return!Qe.test(e)}function it(e){e=e.nodeType;return e===Oe||!e||e===De}function nt(e,t){var i,n,s=t.createDocumentFragment(),r=[];if(tt(e))r.push(t.createTextNode(e));else{for(i=i||s.appendChild(t.createElement("div")),t=(Ze.exec(e)||["",""])[1].toLowerCase(),t=et[t]||et._default,i.innerHTML=t[1]+e.replace(Je,"<$1></$2>")+t[2],n=t[0];n--;)i=i.lastChild;r=j(r,i.childNodes),(i=s.firstChild).textContent=""}return s.textContent="",s.innerHTML="",me(r,function(e){s.appendChild(e)}),s}function st(e,t){var i=e.parentNode;i&&i.replaceChild(t,e),t.appendChild(e)}et.optgroup=et.option,et.tbody=et.tfoot=et.colgroup=et.caption=et.thead,et.th=et.td;var rt=g.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))};function ot(e){if(e instanceof ot)return e;var t,i,n;if(U(e)&&(e=_e(e),n=!0),!(this instanceof ot)){if(n&&"<"!=e.charAt(0))throw ze("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new ot(e)}gt(this,n?(t=e,i=i||g.document,(n=Ke.exec(t))?[i.createElement(n[1])]:(n=nt(t,i))?n.childNodes:[]):e)}function at(e){return e.cloneNode(!0)}function lt(e,t){if(t||ct(e),e.querySelectorAll)for(var i=e.querySelectorAll("*"),n=0,s=i.length;n<s;n++)ct(i[n])}function ht(i,e,n,t){if(W(t))throw ze("offargs","jqLite#off() does not support the `selector` argument");var t=pt(i),s=t&&t.events,r=t&&t.handle;if(r)if(e){var o=function(e){var t=s[e];W(n)&&H(t||[],n),W(n)&&t&&0<t.length||($e(i,e,r),delete s[e])};me(e.split(" "),function(e){o(e),je[e]&&o(je[e])})}else for(e in s)"$destroy"!==e&&$e(i,e,r),delete s[e]}function ct(e,t){var i=e.ng339,n=i&&Ve[i];n&&(t?delete n.data[t]:(n.handle&&(n.events.$destroy&&n.handle({},"$destroy"),ht(e)),delete Ve[i],e.ng339=void 0))}function pt(e,t){var i=e.ng339,n=i&&Ve[i];return t&&!n&&(e.ng339=i=++He,n=Ve[i]={events:{},data:{},handle:void 0}),n}function ut(e,t,i){if(it(e)){var n=W(i),s=!n&&t&&!ye(t),r=!t,e=pt(e,!s),e=e&&e.data;if(!n)return r?e:s?e&&e[t]:void fe(e,t);e[t]=i}}function dt(e,t){return!!e.getAttribute&&-1<(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")}function mt(t,e){e&&t.setAttribute&&me(e.split(" "),function(e){t.setAttribute("class",_e((" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+_e(e)+" "," ")))})}function ft(e,t){var i;t&&e.setAttribute&&(i=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),me(t.split(" "),function(e){e=_e(e),-1===i.indexOf(" "+e+" ")&&(i+=e+" ")}),e.setAttribute("class",_e(i)))}function gt(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var i=t.length;if("number"==typeof i&&t.window!==t){if(i)for(var n=0;n<i;n++)e[e.length++]=t[n]}else e[e.length++]=t}}function vt(e,t){return yt(e,"$"+(t||"ngController")+"Controller")}function yt(e,t,i){e.nodeType==De&&(e=e.documentElement);for(var n=be(t)?t:[t];e;){for(var s=0,r=n.length;s<r;s++)if(W(i=de.data(e,n[s])))return i;e=e.parentNode||11===e.nodeType&&e.host}}function bt(e){for(lt(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function St(e,t){t||lt(e);t=e.parentNode;t&&t.removeChild(e)}var Tt=ot.prototype={ready:function(e){var t=!1;function i(){t||(t=!0,e())}"complete"===g.document.readyState?g.setTimeout(i):(this.on("DOMContentLoaded",i),ot(g).on("load",i))},toString:function(){var t=[];return me(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(e){return de(0<=e?this[e]:this[this.length+e])},length:0,push:e,sort:[].sort,splice:[].splice},_t={};me("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){_t[D(e)]=e});var At={};me("input,select,option,textarea,button,form,details".split(","),function(e){At[e]=!0});var Pt={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};function It(e,t){t=_t[t.toLowerCase()];return t&&At[Ae(e)]&&t}function Ct(e,t){if(ve(t)){var i=e.nodeType;return i===Oe||i===Ne?e.textContent:""}e.textContent=t}function xt(a,l){function e(e,t){e.isDefaultPrevented=function(){return e.defaultPrevented};var i,n=l[t||e.type],s=n?n.length:0;if(s){ve(e.immediatePropagationStopped)&&(i=e.stopImmediatePropagation,e.stopImmediatePropagation=function(){e.immediatePropagationStopped=!0,e.stopPropagation&&e.stopPropagation(),i&&i.call(e)}),e.isImmediatePropagationStopped=function(){return!0===e.immediatePropagationStopped};var r=n.specialHandlerWrapper||Bt;1<s&&(n=ke(n));for(var o=0;o<s;o++)e.isImmediatePropagationStopped()||r(a,e,n[o])}}return e.elem=a,e}function Bt(e,t,i){i.call(e,t)}function Et(e,t,i){var n=t.relatedTarget;n&&(n===e||rt.call(e,n))||i.call(e,t)}function wt(){this.$get=function(){return fe(ot,{hasClass:function(e,t){return dt(e=e.attr?e[0]:e,t)},addClass:function(e,t){return ft(e=e.attr?e[0]:e,t)},removeClass:function(e,t){return mt(e=e.attr?e[0]:e,t)}})}}function Rt(e,t){var i=e&&e.$$hashKey;if(i)return i="function"==typeof i?e.$$hashKey():i;var n=typeof e;return i="function"==n||"object"==n&&null!==e?e.$$hashKey=n+":"+(t||d)():n+":"+e}function Mt(e,t){var i;t&&(i=0,this.nextUid=function(){return++i}),me(e,this.put,this)}me({data:ut,removeData:ct,hasData:function(e){for(var t in Ve[e.ng339])return!0;return!1},cleanData:function(e){for(var t=0,i=e.length;t<i;t++)ct(e[t])}},function(e,t){ot[t]=e}),me({data:ut,inheritedData:yt,scope:function(e){return de.data(e,"$scope")||yt(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return de.data(e,"$isolateScope")||de.data(e,"$isolateScopeNoTemplate")},controller:vt,injector:function(e){return yt(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:dt,css:function(e,t,i){if(t=qe(t),!W(i))return e.style[t];e.style[t]=i},attr:function(e,t,i){var n=e.nodeType;if(n!==Ne&&2!==n&&n!==Fe){n=D(t);if(_t[n]){if(!W(i))return e[t]||(e.attributes.getNamedItem(t)||k).specified?n:void 0;i?(e[t]=!0,e.setAttribute(t,n)):(e[t]=!1,e.removeAttribute(n))}else if(W(i))e.setAttribute(t,i);else if(e.getAttribute){t=e.getAttribute(t,2);return null===t?void 0:t}}},prop:function(e,t,i){if(!W(i))return e[t];e[t]=i},text:(Ct.$dv="",Ct),val:function(e,t){if(ve(t)){if(e.multiple&&"select"===Ae(e)){var i=[];return me(e.options,function(e){e.selected&&i.push(e.value||e.text)}),0===i.length?null:i}return e.value}e.value=t},html:function(e,t){if(ve(t))return e.innerHTML;lt(e,!0),e.innerHTML=t},empty:bt},function(h,e){ot.prototype[e]=function(e,t){var i,n,s=this.length;if(h!==bt&&ve(2==h.length&&h!==dt&&h!==vt?e:t)){if(ye(e)){for(i=0;i<s;i++)if(h===ut)h(this[i],e);else for(n in e)h(this[i],n,e[n]);return this}for(var r=ve(l=h.$dv)?Math.min(s,1):s,o=0;o<r;o++)var a=h(this[o],e,t),l=l?l+a:a;return l}for(i=0;i<s;i++)h(this[i],e,t);return this}}),me({removeData:ct,on:function(s,e,r,t){if(W(t))throw ze("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(it(s))for(var t=pt(s,!0),o=t.events,a=(a=t.handle)||(t.handle=xt(s,o)),i=0<=e.indexOf(" ")?e.split(" "):[e],n=i.length,l=function(e,t,i){var n=o[e];n||((n=o[e]=[]).specialHandlerWrapper=t,"$destroy"===e||i||Ue(s,e,a)),n.push(r)};n--;)e=i[n],je[e]?(l(je[e],Et),l(e,void 0,!0)):l(e)},off:ht,one:function(t,i,n){(t=de(t)).on(i,function e(){t.off(i,n),t.off(i,e)}),t.on(i,n)},replaceWith:function(t,e){var i,n=t.parentNode;lt(t),me(new ot(e),function(e){i?n.insertBefore(e,i.nextSibling):n.replaceChild(e,t),i=e})},children:function(e){var t=[];return me(e.childNodes,function(e){e.nodeType===Oe&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var i=e.nodeType;if(i===Oe||11===i)for(var n=0,s=(t=new ot(t)).length;n<s;n++){var r=t[n];e.appendChild(r)}},prepend:function(t,e){var i;t.nodeType===Oe&&(i=t.firstChild,me(new ot(e),function(e){t.insertBefore(e,i)}))},wrap:function(e,t){st(e,de(t).eq(0).clone()[0])},remove:St,detach:function(e){St(e,!0)},after:function(e,t){for(var i=e,n=e.parentNode,s=0,r=(t=new ot(t)).length;s<r;s++){var o=t[s];n.insertBefore(o,i.nextSibling),i=o}},addClass:ft,removeClass:mt,toggleClass:function(i,e,n){e&&me(e.split(" "),function(e){var t=n;((t=ve(n)?!dt(i,e):t)?ft:mt)(i,e)})},parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:at,triggerHandler:function(t,e,i){var n,s,r=e.type||e,o=pt(t),o=o&&o.events,o=o&&o[r];o&&(n={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:k,type:r,target:t},e.type&&(n=fe(n,e)),o=ke(o),s=i?[n].concat(i):[n],me(o,function(e){n.isImmediatePropagationStopped()||e.apply(t,s)}))}},function(o,e){ot.prototype[e]=function(e,t,i){for(var n,s=0,r=this.length;s<r;s++)ve(n)?W(n=o(this[s],e,t,i))&&(n=de(n)):gt(n,o(this[s],e,t,i));return W(n)?n:this},ot.prototype.bind=ot.prototype.on,ot.prototype.unbind=ot.prototype.off}),Mt.prototype={put:function(e,t){this[Rt(e,this.nextUid)]=t},get:function(e){return this[Rt(e,this.nextUid)]},remove:function(e){var t=this[e=Rt(e,this.nextUid)];return delete this[e],t}};var Ot=[function(){this.$get=[function(){return Mt}]}],Nt=/^([^\(]+?)=>/,Ft=/^[^\(]*\(\s*([^\)]*)\)/m,Dt=/,/,Lt=/^\s*(_?)(\S+?)\1\s*$/,kt=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Gt=S("$injector");function Wt(e){return Function.prototype.toString.call(e)+" "}function Ut(e){e=Wt(e).replace(kt,"");return e.match(Nt)||e.match(Ft)}function Vt(e,h){h=!0===h;var r={},o="Provider",a=[],l=new Mt([],!0),c={$provide:{provider:n(d),factory:n(s),service:n(function(e,t){return s(e,["$injector",function(e){return e.instantiate(t)}])}),value:n(function(e,t){return s(e,C(t),!1)}),constant:n(function(e,t){ue(e,"constant"),c[e]=t,i[e]=t}),decorator:function(e,t){var i=p.get(e+o),n=i.$get;i.$get=function(){var e=u.invoke(n,i);return u.invoke(t,null,{$delegate:e})}}}},p=c.$injector=m(c,function(e,t){throw I.isString(t)&&a.push(t),Gt("unpr","Unknown provider: {0}",a.join(" <- "))}),i={},t=m(i,function(e,t){t=p.get(e+o,t);return u.invoke(t.$get,t,void 0,e)}),u=t;c["$injector"+o]={$get:C(t)};e=function i(e){Ee(ve(e)||be(e),"modulesToLoad","not an array");var n,s=[];me(e,function(t){if(!l.get(t)){l.put(t,!0);try{U(t)?(n=f(t),s=s.concat(i(n.requires)).concat(n._runBlocks),e(n._invokeQueue),e(n._configBlocks)):Se(t)||be(t)?s.push(p.invoke(t)):pe(t,"module")}catch(e){throw be(t)&&(t=t[t.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Gt("modulerr","Failed to instantiate module {0} due to:\n{1}",t,e.stack||e.message||e)}}function e(e){var t,i;for(t=0,i=e.length;t<i;t++){var n=e[t],s=p.get(n[0]);s[n[1]].apply(s,n[2])}}});return s}(e);return(u=t.get("$injector")).strictDi=h,me(e,function(e){e&&u.invoke(e)}),u;function n(i){return function(e,t){if(!ye(e))return i(e,t);me(e,v(i))}}function d(e,t){if(ue(e,"service"),!(t=Se(t)||be(t)?p.instantiate(t):t).$get)throw Gt("pget","Provider '{0}' must define $get factory method.",e);return c[e+o]=t}function s(e,t,i){return d(e,{$get:!1!==i?(n=e,s=t,function(){var e=u.invoke(s,this);if(ve(e))throw Gt("undef","Provider '{0}' must return a value from $get factory method.",n);return e}):t});var n,s}function m(i,n){function l(t,e){if(i.hasOwnProperty(t)){if(i[t]===r)throw Gt("cdep","Circular dependency found: {0}",t+" <- "+a.join(" <- "));return i[t]}try{return a.unshift(t),i[t]=r,i[t]=n(t,e)}catch(e){throw i[t]===r&&delete i[t],e}finally{a.shift()}}function s(e,t,i){for(var n=[],s=Vt.$$annotate(e,h,i),r=0,o=s.length;r<o;r++){var a=s[r];if("string"!=typeof a)throw Gt("itkn","Incorrect injection token! Expected service name as string, got {0}",a);n.push(t&&t.hasOwnProperty(a)?t[a]:l(a,i))}return n}return{invoke:function(e,t,i,n){return"string"==typeof i&&(n=i,i=null),i=s(e,i,n),be(e)&&(e=e[e.length-1]),n=e,L<=11||("function"!=typeof n||!/^(?:class\s|constructor\()/.test(Wt(n)))?e.apply(t,i):(i.unshift(null),new(Function.prototype.bind.apply(e,i)))},instantiate:function(e,t,i){var n=be(e)?e[e.length-1]:e;return(i=s(e,t,i)).unshift(null),new(Function.prototype.bind.apply(n,i))},get:l,annotate:Vt.$$annotate,has:function(e){return c.hasOwnProperty(e+o)||i.hasOwnProperty(e)}}}}function Ht(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(n,s,r){var o=n.document;function a(e){var t,i;e?(e.scrollIntoView(),(i=(Se(i=l.yOffset)?i=i():O(i)?(t=i[0],i="fixed"!==n.getComputedStyle(t).position?0:t.getBoundingClientRect().bottom):P(i)||(i=0),i))&&(e=e.getBoundingClientRect().top,n.scrollBy(0,e-i))):n.scrollTo(0,0)}function l(e){var t,i,n;(e=U(e)?e:s.hash())?(t=o.getElementById(e))?a(t):(i=o.getElementsByName(e),n=null,Array.prototype.some.call(i,function(e){if("a"===Ae(e))return n=e,!0}),(t=n)?a(t):"top"===e&&a(null)):a(null)}return e&&r.$watch(function(){return s.hash()},function(e,t){var i;e===t&&""===e||(e=function(){r.$evalAsync(l)},"complete"===(i=i||g).document.readyState?i.setTimeout(e):de(i).on("load",e))}),l}]}Vt.$$annotate=function(e,t,i){var n;if("function"==typeof e){if(!(n=e.$inject)){if(n=[],e.length){if(t)throw U(i)&&i||(i=e.name||((t=Ut(t=e))?"function("+(t[1]||"").replace(/[\s\r\n]+/," ")+")":"fn")),Gt("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",i);me(Ut(e)[1].split(Dt),function(e){e.replace(Lt,function(e,t,i){n.push(i)})})}e.$inject=n}}else be(e)?(pe(e[i=e.length-1],"fn"),n=e.slice(0,i)):pe(e,"fn",!0);return n};var $t=S("$animate"),Xt=1,Yt="ng-animate";function jt(e,t){return e||t?e?t?(e=be(e)?e.join(" "):e)+" "+(t=be(t)?t.join(" "):t):e:t:""}function zt(e){return ye(e)?e:{}}function qt(){this.$get=k}function Kt(){var h=new Mt,c=[];this.$get=["$$AnimateRunner","$rootScope",function(r,o){return{enabled:k,on:k,off:k,pin:k,push:function(e,t,i,n){n&&n(),(i=i||{}).from&&e.css(i.from),i.to&&e.css(i.to),(i.addClass||i.removeClass)&&(s=e,n=i.addClass,e=i.removeClass,i=h.get(s)||{},n=a(i,n,!0),e=a(i,e,!1),(n||e)&&(h.put(s,i),c.push(s),1===c.length&&o.$$postDigest(l)));var s=new r;return s.complete(),s}};function a(t,e,i){var n=!1;return e&&me(e=U(e)?e.split(" "):be(e)?e:[],function(e){e&&(n=!0,t[e]=i)}),n}function l(){me(c,function(e){var i,n,s,t=h.get(e);t&&(i=function(e){U(e)&&(e=e.split(" "));var t=Me();return me(e,function(e){e.length&&(t[e]=!0)}),t}(e.attr("class")),s=n="",me(t,function(e,t){e!==!!i[t]&&(e?n+=(n.length?" ":"")+t:s+=(s.length?" ":"")+t)}),me(e,function(e){n&&ft(e,n),s&&mt(e,s)}),h.remove(e))}),c.length=0}}]}function Qt(){this.$get=["$$rAF",function(t){var i=[];function n(e){i.push(e),1<i.length||t(function(){for(var e=0;e<i.length;e++)i[e]();i=[]})}return function(){var t=!1;return n(function(){t=!0}),function(e){t?e():n(e)}}}]}function Zt(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function(t,e,n,s,r){function i(e){this.setHost(e);var i=n();this._doneCallbacks=[],this._tick=function(e){var t=s[0];t&&t.hidden?r(e,0,!1):i(e)},this._state=0}return i.chain=function(e,i){var n=0;!function t(){if(n===e.length)return void i(!0);e[n](function(e){!1!==e?(n++,t()):i(!1)})}()},i.all=function(t,i){var n=0,s=!0;function r(e){s=s&&e,++n===t.length&&i(s)}me(t,function(e){e.done(r)})},i.prototype={setHost:function(e){this.host=e||{}},done:function(e){2===this._state?e():this._doneCallbacks.push(e)},progress:k,getPromise:function(){var e;return this.promise||((e=this).promise=t(function(t,i){e.done(function(e){(!1===e?i:t)()})})),this.promise},then:function(e,t){return this.getPromise().then(e,t)},catch:function(e){return this.getPromise().catch(e)},finally:function(e){return this.getPromise().finally(e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;0===t._state&&(t._state=1,t._tick(function(){t._resolve(e)}))},_resolve:function(t){2!==this._state&&(me(this._doneCallbacks,function(e){e(t)}),this._doneCallbacks.length=0,this._state=2)}},i}]}function Jt(){this.$get=["$$rAF","$q","$$AnimateRunner",function(o,e,a){return function(e,t){var i=t||{};(i=!i.$$prepared?$(i):i).cleanupStyles&&(i.from=i.to=null),i.from&&(e.css(i.from),i.from=null);var n,s=new a;return{start:r,end:r};function r(){return o(function(){!function(){i.addClass&&(e.addClass(i.addClass),i.addClass=null);i.removeClass&&(e.removeClass(i.removeClass),i.removeClass=null);i.to&&(e.css(i.to),i.to=null)}(),n||s.complete(),n=!0}),s}}}]}var ei=["$provide",function(n){var s=this;this.$$registeredAnimations=Object.create(null),this.register=function(e,t){if(e&&"."!==e.charAt(0))throw $t("notcsel","Expecting class selector starting with '.' got '{0}'.",e);var i=e+"-animation";s.$$registeredAnimations[e.substr(1)]=i,n.factory(i,t)},this.classNameFilter=function(e){if(1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null,this.$$classNameFilter&&new RegExp("(\\s+|\\/)"+Yt+"(\\s+|\\/)").test(this.$$classNameFilter.toString())))throw $t("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',Yt);return this.$$classNameFilter},this.$get=["$$animateQueue",function(r){function s(e,t,i){var n;i&&(!(n=function(e){for(var t=0;t<e.length;t++){var i=e[t];if(i.nodeType===Xt)return i}}(i))||n.parentNode||n.previousElementSibling||(i=null)),i?i.after(e):t.prepend(e)}return{on:r.on,off:r.off,pin:r.pin,enabled:r.enabled,cancel:function(e){e.end&&e.end()},enter:function(e,t,i,n){return t=t&&de(t),i=i&&de(i),s(e,t=t||i.parent(),i),r.push(e,"enter",zt(n))},move:function(e,t,i,n){return t=t&&de(t),i=i&&de(i),s(e,t=t||i.parent(),i),r.push(e,"move",zt(n))},leave:function(e,t){return r.push(e,"leave",zt(t),function(){e.remove()})},addClass:function(e,t,i){return(i=zt(i)).addClass=jt(i.addclass,t),r.push(e,"addClass",i)},removeClass:function(e,t,i){return(i=zt(i)).removeClass=jt(i.removeClass,t),r.push(e,"removeClass",i)},setClass:function(e,t,i,n){return(n=zt(n)).addClass=jt(n.addClass,t),n.removeClass=jt(n.removeClass,i),r.push(e,"setClass",n)},animate:function(e,t,i,n,s){return(s=zt(s)).from=s.from?fe(s.from,t):t,s.to=s.to?fe(s.to,i):i,s.tempClasses=jt(s.tempClasses,n=n||"ng-inline-animate"),r.push(e,"animate",s)}}}]}];function ti(r,e,t,o){var a=this,l=r.location,h=r.history,n=r.setTimeout,i=r.clearTimeout,s={};a.isMock=!1;var c=0,p=[];function u(e){try{e.apply(null,Ie(arguments,1))}finally{if(0===--c)for(;p.length;)try{p.pop()()}catch(e){t.error(e)}}}a.$$completeOutstandingRequest=u,a.$$incOutstandingRequestCount=function(){c++},a.notifyWhenNoOutstandingRequests=function(e){0===c?e():p.push(e)};var d,m,f=l.href,g=e.find("base"),v=null,y=o.history?function(){try{return h.state}catch(e){}}:k;A(),m=d,a.url=function(e,t,i){if(ve(i)&&(i=null),l!==r.location&&(l=r.location),h!==r.history&&(h=r.history),e){var n=m===i;if(f===e&&(!o.history||n))return a;var s=f&&qi(f)===qi(e);return f=e,m=i,!o.history||s&&n?(s||(v=e),t?l.replace(e):s?l.hash=-1===(s=(n=e).indexOf("#"))?"":n.substr(s):l.href=e,l.href!==e&&(v=e)):(h[t?"replaceState":"pushState"](i,"",e),A(),m=d),v=v&&e,a}return v||l.href.replace(/%27/g,"'")},a.state=function(){return d};var b=[],S=!1;function T(){v=null,A(),P()}var _=null;function A(){Pe(d=ve(d=y())?null:d,_)&&(d=_),_=d}function P(){f===a.url()&&m===d||(f=a.url(),m=d,me(b,function(e){e(a.url(),d)}))}a.onUrlChange=function(e){return S||(o.history&&de(r).on("popstate",T),de(r).on("hashchange",T),S=!0),b.push(e),e},a.$$applicationDestroyed=function(){de(r).off("hashchange popstate",T)},a.$$checkUrlChange=P,a.baseHref=function(){var e=g.attr("href");return e?e.replace(/^(https?\:)?\/\/[^\/]*/,""):""},a.defer=function(e,t){var i;return c++,i=n(function(){delete s[i],u(e)},t||0),s[i]=!0,i},a.defer.cancel=function(e){return!!s[e]&&(delete s[e],i(e),u(k),!0)}}function ii(){this.$get=["$window","$log","$sniffer","$document",function(e,t,i,n){return new ti(e,n,t,i)}]}function ni(){this.$get=function(){var p={};function e(e,t){if(e in p)throw S("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var i=0,n=fe({},t,{id:e}),s=Me(),r=t&&t.capacity||Number.MAX_VALUE,o=Me(),a=null,l=null;return p[e]={put:function(e,t){if(!ve(t))return r<Number.MAX_VALUE&&h(o[e]||(o[e]={key:e})),e in s||i++,s[e]=t,r<i&&this.remove(l.key),t},get:function(e){if(r<Number.MAX_VALUE){var t=o[e];if(!t)return;h(t)}return s[e]},remove:function(e){if(r<Number.MAX_VALUE){var t=o[e];if(!t)return;t==a&&(a=t.p),t==l&&(l=t.n),c(t.n,t.p),delete o[e]}e in s&&(delete s[e],i--)},removeAll:function(){s=Me(),i=0,o=Me(),a=l=null},destroy:function(){o=n=s=null,delete p[e]},info:function(){return fe({},n,{size:i})}};function h(e){e!=a&&(l?l==e&&(l=e.n):l=e,c(e.n,e.p),c(e,a),(a=e).n=null)}function c(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}}return e.info=function(){var i={};return me(p,function(e,t){i[t]=e.info()}),i},e.get=function(e){return p[e]},e}}function si(){this.$get=["$cacheFactory",function(e){return e("templates")}]}var ri=S("$compile");var oi=new function(){};function ai(i,t){var E={},w="Directive",R=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,M=/(([\w\-]+)(?:\:([^;]+))?;?)/,O=function(e){for(var t={},i=e.split(","),n=0;n<i.length;n++)t[i[n]]=!0;return t}("ngSrc,ngSrcset,src,srcset"),p=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,N=/^(on[a-z]+|formaction)$/,a=Me();function f(e,n,s){var r=/^\s*([@&<]|=(\*?))(\??)\s*(\w*)\s*$/,o=Me();return me(e,function(e,t){if(e in a)o[t]=a[e];else{var i=e.match(r);if(!i)throw ri("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",n,t,e,s?"controller bindings definition":"isolate scope definition");o[t]={mode:i[1][0],collection:"*"===i[2],optional:"?"===i[3],attrName:i[4]||t},i[4]&&(a[e]=o[t])}}),o}this.directive=function e(l,t){return ue(l,"directive"),U(l)?(function(e){var t=e.charAt(0);if(!t||t!==D(t))throw ri("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",e);if(e!==e.trim())throw ri("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",e)}(l),Ee(t,"directiveFactory"),E.hasOwnProperty(l)||(E[l]=[],i.factory(l+w,["$injector","$exceptionHandler",function(r,o){var a=[];return me(E[l],function(e,t){try{var i=r.invoke(e);Se(i)?i={compile:C(i)}:!i.compile&&i.link&&(i.compile=C(i.link)),i.priority=i.priority||0,i.index=t,i.name=i.name||l,i.require=(s=(n=i).require||n.controller&&n.name,!be(s)&&ye(s)&&me(s,function(e,t){var i=e.match(p);e.substring(i[0].length)||(s[t]=i[0]+t)}),s),i.restrict=i.restrict||"EA",i.$$moduleName=e.$$moduleName,a.push(i)}catch(e){o(e)}var n,s}),a}])),E[l].push(t)):me(l,v(e)),this},this.component=function(e,s){var r=s.controller||function(){};function i(n){function e(i){return Se(i)||be(i)?function(e,t){return n.invoke(i,this,{$element:e,$attrs:t})}:i}var t=s.template||s.templateUrl?s.template:"",i={controller:r,controllerAs:fi(s.controller)||s.controllerAs||"$ctrl",template:e(t),templateUrl:e(s.templateUrl),transclude:s.transclude,scope:{},bindToController:s.bindings||{},restrict:"E",require:s.require};return me(s,function(e,t){"$"===t.charAt(0)&&(i[t]=e)}),i}return me(s,function(e,t){"$"===t.charAt(0)&&(i[t]=e,Se(r)&&(r[t]=e))}),i.$inject=["$injector"],this.directive(e,i)},this.aHrefSanitizationWhitelist=function(e){return W(e)?(t.aHrefSanitizationWhitelist(e),this):t.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return W(e)?(t.imgSrcSanitizationWhitelist(e),this):t.imgSrcSanitizationWhitelist()};var s=!0;this.debugInfoEnabled=function(e){return W(e)?(s=e,this):s};var l=10;this.onChangesTtl=function(e){return arguments.length?(l=e,this):l},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(_,A,$,X,v,Y,r,P,n,u){var o,d=/^\w/,m=g.document.createElement("div"),e=l;function a(){try{if(!--e)throw o=void 0,ri("infchng","{0} $onChanges() iterations reached. Aborting!\n",l);r.$apply(function(){for(var t=[],e=0,i=o.length;e<i;++e)try{o[e]()}catch(e){t.push(e)}if(o=void 0,t.length)throw t})}finally{e++}}function j(e,t){if(t)for(var i,n=Object.keys(t),s=0,r=n.length;s<r;s++)this[i=n[s]]=t[i];else this.$attr={};this.$$element=e}function z(e,t){try{e.addClass(t)}catch(e){}}j.prototype={$normalize:ci,$addClass:function(e){e&&0<e.length&&n.addClass(this.$$element,e)},$removeClass:function(e){e&&0<e.length&&n.removeClass(this.$$element,e)},$updateClass:function(e,t){var i=pi(e,t);i&&i.length&&n.addClass(this.$$element,i);e=pi(t,e);e&&e.length&&n.removeClass(this.$$element,e)},$set:function(e,t,i,n){var s=It(this.$$element[0],e),r=Pt[e],o=e;if(s?(this.$$element.prop(e,t),n=s):r&&(this[r]=t,o=r),this[e]=t,n?this.$attr[e]=n:(n=this.$attr[e])||(this.$attr[e]=n=Be(e,"-")),"a"===(s=Ae(this.$$element))&&("href"===e||"xlinkHref"===e)||"img"===s&&"src"===e)this[e]=t=u(t,"src"===e);else if("img"===s&&"srcset"===e&&W(t)){for(var a="",r=_e(t),s=/\s/.test(r)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,l=r.split(s),h=Math.floor(l.length/2),c=0;c<h;c++){var p=2*c;a+=u(_e(l[p]),!0),a+=" "+_e(l[1+p])}s=_e(l[2*c]).split(/\s/);a+=u(_e(s[0]),!0),2===s.length&&(a+=" "+_e(s[1])),this[e]=t=a}!1!==i&&(null===t||ve(t)?this.$$element.removeAttr(n):d.test(n)?this.$$element.attr(n,t):function(e,t,i){m.innerHTML="<span "+t+">";var n=m.firstChild.attributes,t=n[0];n.removeNamedItem(t.name),t.value=i,e.attributes.setNamedItem(t)}(this.$$element[0],n,t));n=this.$$observers;n&&me(n[o],function(e){try{e(t)}catch(e){$(e)}})},$observe:function(e,t){var i=this,n=i.$$observers||(i.$$observers=Me()),s=n[e]||(n[e]=[]);return s.push(t),r.$evalAsync(function(){s.$$inter||!i.hasOwnProperty(e)||ve(i[e])||t(i[e])}),function(){H(s,t)}}};var t=A.startSymbol(),i=A.endSymbol(),q="{{"==t&&"}}"==i?G:function(e){return e.replace(/\{\{/g,t).replace(/}}/g,i)},I=/^ngAttr[A-Z]/,C=/^(.+)Start$/;return K.$$addBindingInfo=s?function(e,t){var i=e.data("$binding")||[];be(t)?i=i.concat(t):i.push(t),e.data("$binding",i)}:k,K.$$addBindingClass=s?function(e){z(e,"ng-binding")}:k,K.$$addScopeInfo=s?function(e,t,i,n){e.data(i?n?"$isolateScopeNoTemplate":"$isolateScope":"$scope",t)}:k,K.$$addScopeClass=s?function(e,t){z(e,t?"ng-isolate-scope":"ng-scope")}:k,K.$$createComment=function(e,t){var i="";return s&&(i=" "+(e||"")+": ",t&&(i+=t+" ")),g.document.createComment(i)},K;function K(a,e,t,i,l){for(var n=/\S+/,s=0,r=(a=!(a instanceof de)?de(a):a).length;s<r;s++){var o=a[s];o.nodeType===Ne&&o.nodeValue.match(n)&&st(o,a[s]=g.document.createElement("span"))}var h=Q(a,e,a,t,i,l);K.$$addScopeClass(a);var c=null;return function(e,t,i){Ee(e,"scope"),l&&l.needsNewScope&&(e=e.$parent.$new());var n,s=(i=i||{}).parentBoundTranscludeFn,r=i.transcludeControllers,i=i.futureParentElement;if(s&&s.$$boundTransclude&&(s=s.$$boundTransclude),n="html"!==(c=c||function(e){e=e&&e[0];return e&&"foreignobject"!==Ae(e)&&T.call(e).match(/SVG/)?"svg":"html"}(i))?de(le(c,de("<div>").append(a).html())):t?Tt.clone.call(a):a,r)for(var o in r)n.data("$"+o+"Controller",r[o].instance);return K.$$addScopeInfo(n,e),t&&t(n,e),h&&h(e,n,n,s),n}}function Q(e,m,t,i,n,s){for(var r,o,a,l,f,g=[],h=0;h<e.length;h++)a=new j,(r=(r=J(e[h],[],a,0===h?i:void 0,n)).length?ne(r,e[h],a,m,t,null,[],[],s):null)&&r.scope&&K.$$addScopeClass(a.$$element),a=r&&r.terminal||!(o=e[h].childNodes)||!o.length?null:Q(o,r?(r.transcludeOnThisElement||!r.templateOnThisElement)&&r.transclude:m),(r||a)&&(g.push(h,r,a),l=!0,f=f||r),s=null;return l?function(e,t,i,n){var s,r,o,a,l,h,c,p,u;if(f){var d=t.length;for(u=new Array(d),l=0;l<g.length;l+=3)c=g[l],u[c]=t[c]}else u=t;for(l=0,h=g.length;l<h;)o=u[g[l++]],s=g[l++],r=g[l++],s?(s.scope?(a=e.$new(),K.$$addScopeInfo(de(o),a)):a=e,p=s.transcludeOnThisElement?Z(e,s.transclude,n):!s.templateOnThisElement&&n?n:!n&&m?Z(e,m):null,s(r,a,o,i,p)):r&&r(e,o.childNodes,void 0,n)}:null}function Z(r,o,a){function e(e,t,i,n,s){return e||((e=r.$new(!1,s)).$$transcluded=!0),o(e,t,{parentBoundTranscludeFn:a,transcludeControllers:i,futureParentElement:n})}var t,i=e.$$slots=Me();for(t in o.$$slots)o.$$slots[t]?i[t]=Z(r,o.$$slots[t],a):i[t]=null;return e}function J(e,t,i,n,s){var r,o,a,l,h,c=e.nodeType,p=i.$attr;switch(c){case Oe:x(t,ci(Ae(e)),"E",n,s);for(var u,d=e.attributes,m=0,f=d&&d.length;m<f;m++){var g,v=!1,y=!1,b=(g=d[m]).name,S=_e(g.value),T=ci(b);(g=I.test(T))&&(b=b.replace(hi,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()}));T=T.match(C);T&&function(e){if(E.hasOwnProperty(e))for(var t=_.get(e+w),i=0,n=t.length;i<n;i++)if(t[i].multiElement)return!0;return!1}(T[1])&&(y=(v=b).substr(0,b.length-5)+"end",b=b.substr(0,b.length-6)),p[u=ci(b.toLowerCase())]=b,!g&&i.hasOwnProperty(u)||(i[u]=S,It(e,u)&&(i[u]=!0)),function(e,t,r,o,a){var l=function(e,t){if("srcdoc"==t)return P.HTML;e=Ae(e);if("xlinkHref"==t||"form"==e&&"action"==t||"img"!=e&&("src"==t||"ngSrc"==t))return P.RESOURCE_URL}(e,o);a=O[o]||a;var h=A(r,!0,l,a);if(h){if("multiple"===o&&"select"===Ae(e))throw ri("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",xe(e));t.push({priority:100,compile:function(){return{pre:function(e,t,i){var n=i.$$observers||(i.$$observers=Me());if(N.test(o))throw ri("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var s=i[o];s!==r&&(h=s&&A(s,!0,l,a),r=s),h&&(i[o]=h(e),(n[o]||(n[o]=[])).$$inter=!0,(i.$$observers&&i.$$observers[o].$$scope||e).$watch(h,function(e,t){"class"===o&&e!=t?i.$updateClass(e,t):i.$set(o,e)}))}}}})}}(e,t,S,u,g),x(t,u,"A",n,s,v,y)}if(U(o=ye(o=e.className)?o.animVal:o)&&""!==o)for(;r=M.exec(o);)x(t,u=ci(r[2]),"C",n,s)&&(i[u]=_e(r[3])),o=o.substr(r.index+r[0].length);break;case Ne:if(11===L)for(;e.parentNode&&e.nextSibling&&e.nextSibling.nodeType===Ne;)e.nodeValue=e.nodeValue+e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);a=t,l=e.nodeValue,(h=A(l,!0))&&a.push({priority:0,compile:function(e){var e=e.parent(),n=!!e.length;return n&&K.$$addBindingClass(e),function(e,t){var i=t.parent();n||K.$$addBindingClass(i),K.$$addBindingInfo(i,h.expressions),e.$watch(h,function(e){t[0].nodeValue=e})}}});break;case Fe:try{(r=R.exec(e.nodeValue))&&x(t,u=ci(r[1]),"M",n,s)&&(i[u]=_e(r[2]))}catch(e){}}return t.sort(B),t}function ee(e,t,i){var n=[],s=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw ri("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,i)}while(e.nodeType==Oe&&(e.hasAttribute(t)&&s++,e.hasAttribute(i)&&s--),n.push(e),e=e.nextSibling,0<s)}else n.push(e);return de(n)}function te(r,o,a){return function(e,t,i,n,s){return t=ee(t[0],o,a),r(e,t,i,n,s)}}function ie(e,t,i,n,s,r){var o;return e?K(t,i,n,s,r):function(){return o||(o=K(t,i,n,s,r),t=i=r=null),o.apply(this,arguments)}}function ne(e,T,_,t,i,n,A,P,s){s=s||{};for(var r,o,a=-Number.MAX_VALUE,I=s.newScopeDirective,C=s.controllerDirectives,x=s.newIsolateScopeDirective,B=s.templateDirective,l=s.nonTlbTranscludeDirective,h=!1,c=!1,E=s.hasElementTranscludeDirective,p=_.$$element=de(T),u=n,d=t,m=!1,f=!1,g=0,v=e.length;g<v;g++){var y,b=(y=e[g]).$$start,S=y.$$end;if(b&&(p=ee(T,b,S)),N=void 0,a>y.priority)break;if((o=y.scope)&&(y.templateUrl||(ye(o)?(ae("new/isolated scope",x||I,y,p),x=y):ae("new/isolated scope",x,y,p)),I=I||y),r=y.name,!m&&(y.replace&&(y.templateUrl||y.template)||y.transclude&&!y.$$tlb)){for(var w,R=g+1;w=e[R++];)if(w.transclude&&!w.$$tlb||w.replace&&(w.templateUrl||w.template)){f=!0;break}m=!0}if(!y.templateUrl&&y.controller&&(o=y.controller,C=C||Me(),ae("'"+r+"' controller",C[r],y,p),C[r]=y),o=y.transclude)if(h=!0,y.$$tlb||(ae("transclusion",l,y,p),l=y),"element"==o)E=!0,a=y.priority,N=p,p=_.$$element=de(K.$$createComment(r,_[r])),T=p[0],he(i,Ie(N),T),N[0].$$parentNode=N[0].parentNode,d=ie(f,N,t,a,u&&u.name,{nonTlbTranscludeDirective:l});else{var M=Me();if(N=de(at(T)).contents(),ye(o)){var O,N=[],F=Me(),D=Me();for(O in me(o,function(e,t){var i="?"===e.charAt(0);e=i?e.substring(1):e,F[e]=t,M[t]=null,D[t]=i}),me(p.contents(),function(e){var t=F[ci(Ae(e))];t?(D[t]=!0,M[t]=M[t]||[],M[t].push(e)):N.push(e)}),me(D,function(e,t){if(!e)throw ri("reqslot","Required transclusion slot `{0}` was not filled.",t)}),M)M[O]&&(M[O]=ie(f,M[O],t))}p.empty(),(d=ie(f,N,t,void 0,void 0,{needsNewScope:y.$$isolateScope||y.$$newScope})).$$slots=M}if(y.template)if(c=!0,ae("template",B,y,p),o=Se((B=y).template)?y.template(p,_):y.template,o=q(o),y.replace){if(u=y,N=tt(o)?[]:ui(le(y.templateNamespace,_e(o))),T=N[0],1!=N.length||T.nodeType!==Oe)throw ri("tplrt","Template for directive '{0}' must have exactly one root element. {1}",r,"");he(i,p,T);var L={$attr:{}},k=J(T,[],L),G=e.splice(g+1,e.length-(g+1));(x||I)&&re(k,x,I),e=e.concat(k).concat(G),oe(_,L),v=e.length}else p.html(o);if(y.templateUrl)c=!0,ae("template",B,y,p),(B=y).replace&&(u=y),H=function(c,p,u,d,m,f,g,v){var y,b,S=[],T=p[0],_=c.shift(),A=ge(_,{templateUrl:null,transclude:null,replace:null,$$originalDirective:_}),P=Se(_.templateUrl)?_.templateUrl(p,u):_.templateUrl,I=_.templateNamespace;return p.empty(),X(P).then(function(e){var i,t;if(e=q(e),_.replace){if(n=tt(e)?[]:ui(le(I,_e(e))),i=n[0],1!=n.length||i.nodeType!==Oe)throw ri("tplrt","Template for directive '{0}' must have exactly one root element. {1}",_.name,P);t={$attr:{}},he(d,p,i);var n=J(i,[],t);ye(_.scope)&&re(n,!0),c=n.concat(c),oe(u,t)}else i=T,p.html(e);for(c.unshift(A),y=ne(c,i,u,m,p,_,f,g,v),me(d,function(e,t){e==i&&(d[t]=p[0])}),b=Q(p[0].childNodes,m);S.length;){var s,r=S.shift(),o=S.shift(),a=S.shift(),l=S.shift(),h=p[0];r.$$destroyed||(o!==T&&(s=o.className,v.hasElementTranscludeDirective&&_.replace||(h=at(i)),he(a,de(o),h),z(de(h),s)),l=y.transcludeOnThisElement?Z(r,y.transclude,l):l,y(b,r,h,d,l))}S=null}),function(e,t,i,n,s){var r=s;t.$$destroyed||(S?S.push(t,i,n,r):(y.transcludeOnThisElement&&(r=Z(t,y.transclude,s)),y(b,t,i,n,r)))}}(e.splice(g,e.length-g),p,_,i,h&&d,A,P,{controllerDirectives:C,newScopeDirective:I!==y&&I,newIsolateScopeDirective:x,templateDirective:B,nonTlbTranscludeDirective:l}),v=e.length;else if(y.compile)try{var W=y.compile(p,_,d),U=y.$$originalDirective||y;Se(W)?V(null,Ce(U,W),b,S):W&&V(Ce(U,W.pre),Ce(U,W.post),b,S)}catch(e){$(e,xe(p))}y.terminal&&(H.terminal=!0,a=Math.max(a,y.priority))}return H.scope=I&&!0===I.scope,H.transcludeOnThisElement=h,H.templateOnThisElement=c,H.transclude=d,s.hasElementTranscludeDirective=E,H;function V(e,t,i,n){e&&((e=i?te(e,i,n):e).require=y.require,e.directiveName=r,x!==y&&!y.$$isolateScope||(e=ce(e,{isolateScope:!0})),A.push(e)),t&&((t=i?te(t,i,n):t).require=y.require,t.directiveName=r,x!==y&&!y.$$isolateScope||(t=ce(t,{isolateScope:!0})),P.push(t))}function H(e,t,i,n,o){var s,r,a,l,h,c,p,u,d,m,f;for(f in T===i?u=(d=_).$$element:d=new j(u=de(i),_),h=t,x?l=t.$new(!0):I&&(h=t.$parent),o&&((p=function(e,t,i,n){var s;Te(e)||(n=i,i=t,t=e,e=void 0);E&&(s=c);i=i||(E?u.parent():u);{if(!n)return o(e,t,s,i,S);var r=o.$$slots[n];if(r)return r(e,t,s,i,S);if(ve(r))throw ri("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',n,xe(u))}}).$$boundTransclude=o,p.isSlotFilled=function(e){return!!o.$$slots[e]}),C&&(c=function(e,t,i,n,s,r,o){var a,l=Me();for(a in n){var h=n[a],c={$scope:h===o||h.$$isolateScope?s:r,$element:e,$attrs:t,$transclude:i},p=h.controller;"@"==p&&(p=t[h.name]);c=Y(p,c,!0,h.controllerAs);l[h.name]=c,e.data("$"+h.name+"Controller",c.instance)}return l}(u,d,p,C,l,t,x)),x&&(K.$$addScopeInfo(u,l,!0,!(B&&(B===x||B===x.$$originalDirective))),K.$$addScopeClass(u,!0),l.$$isolateBindings=x.$$isolateBindings,(m=ue(t,d,l,l.$$isolateBindings,x)).removeWatches&&l.$on("$destroy",m.removeWatches)),c){var g=C[f],v=c[f],y=g.$$bindings.bindToController;v.identifier&&y?v.bindingInfo=ue(h,d,v.instance,y,g):v.bindingInfo={};var b=v();b!==v.instance&&(v.instance=b,u.data("$"+g.name+"Controller",b),v.bindingInfo.removeWatches&&v.bindingInfo.removeWatches(),v.bindingInfo=ue(h,d,v.instance,y,g))}for(me(C,function(e,t){var i=e.require;e.bindToController&&!be(i)&&ye(i)&&fe(c[t].instance,se(t,i,u,c))}),me(c,function(e){var t=e.instance;if(Se(t.$onChanges))try{t.$onChanges(e.bindingInfo.initialChanges)}catch(e){$(e)}if(Se(t.$onInit))try{t.$onInit()}catch(e){$(e)}Se(t.$onDestroy)&&h.$on("$destroy",function(){t.$onDestroy()})}),s=0,r=A.length;s<r;s++)pe(a=A[s],a.isolateScope?l:t,u,d,a.require&&se(a.directiveName,a.require,u,c),p);var S=t;for(x&&(x.template||null===x.templateUrl)&&(S=l),e&&e(S,i.childNodes,void 0,o),s=P.length-1;0<=s;s--)pe(a=P[s],a.isolateScope?l:t,u,d,a.require&&se(a.directiveName,a.require,u,c),p);me(c,function(e){e=e.instance;Se(e.$postLink)&&e.$postLink()})}}function se(i,e,n,s){if(U(e)){var r,t=e.match(p),o=e.substring(t[0].length),a=t[1]||t[3],l="?"===t[2];if("^^"===a?n=n.parent():r=(r=s&&s[o])&&r.instance,r||(t="$"+o+"Controller",r=a?n.inheritedData(t):n.data(t)),!r&&!l)throw ri("ctreq","Controller '{0}', required by directive '{1}', can't be found!",o,i)}else if(be(e)){r=[];for(var h=0,c=e.length;h<c;h++)r[h]=se(i,e[h],n,s)}else ye(e)&&(r={},me(e,function(e,t){r[t]=se(i,e,n,s)}));return r||null}function re(e,t,i){for(var n=0,s=e.length;n<s;n++)e[n]=ge(e[n],{$$isolateScope:t,$$newScope:i})}function x(e,t,i,n,s,r,o){if(t!==s){var a=null;if(E.hasOwnProperty(t))for(var l=_.get(t+w),h=0,c=l.length;h<c;h++)try{var p,u=l[h];(ve(n)||n>u.priority)&&-1!=u.restrict.indexOf(i)&&((u=r?ge(u,{$$start:r,$$end:o}):u).$$bindings||(p=u.$$bindings=function(e,t){var i={isolateScope:null,bindToController:null};if(ye(e.scope)&&(!0===e.bindToController?(i.bindToController=f(e.scope,t,!0),i.isolateScope={}):i.isolateScope=f(e.scope,t,!1)),ye(e.bindToController)&&(i.bindToController=f(e.bindToController,t,!0)),ye(i.bindToController)){var n=e.controller,e=e.controllerAs;if(!n)throw ri("noctrl","Cannot bind to controller without directive '{0}'s controller.",t);if(!fi(n,e))throw ri("noident","Cannot bind to controller without identifier for directive '{0}'.",t)}return i}(u,u.name),ye(p.isolateScope)&&(u.$$isolateBindings=p.isolateScope)),e.push(u),a=u)}catch(e){$(e)}return a}}function oe(i,n){var s=n.$attr,r=i.$attr;i.$$element;me(i,function(e,t){"$"!=t.charAt(0)&&(n[t]&&n[t]!==e&&(e+=("style"===t?";":" ")+n[t]),i.$set(t,e,!0,s[t]))}),me(n,function(e,t){i.hasOwnProperty(t)||"$"===t.charAt(0)||(i[t]=e,"class"!==t&&"style"!==t&&(r[t]=s[t]))})}function B(e,t){var i=t.priority-e.priority;return 0!=i?i:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function ae(e,t,i,n){function s(e){return e?" (module: "+e+")":""}if(t)throw ri("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",t.name,s(t.$$moduleName),i.name,s(i.$$moduleName),e,xe(n))}function le(e,t){switch(e=D(e||"html")){case"svg":case"math":var i=g.document.createElement("div");return i.innerHTML="<"+e+">"+t+"</"+e+">",i.childNodes[0].childNodes;default:return t}}function he(e,t,i){var n,s=t[0],r=t.length,o=s.parentNode;if(e)for(p=0,n=e.length;p<n;p++)if(e[p]==s){e[p++]=i;for(var a=p,l=a+r-1,h=e.length;a<h;a++,l++)l<h?e[a]=e[l]:delete e[a];e.length-=r-1,e.context===s&&(e.context=i);break}o&&o.replaceChild(i,s);for(var c=g.document.createDocumentFragment(),p=0;p<r;p++)c.appendChild(t[p]);for(de.hasData(s)&&(de.data(i,de.data(s)),de(s).off("$destroy")),de.cleanData(c.querySelectorAll("*")),p=1;p<r;p++)delete t[p];t[0]=i,t.length=1}function ce(e,t){return fe(function(){return e.apply(null,arguments)},e,t)}function pe(e,t,i,n,s,r){try{e(t,i,n,s,r)}catch(e){$(e,xe(i))}}function ue(c,p,u,e,d){var n,m=[],f={};function g(e,t,i){Se(u.$onChanges)&&t!==i&&(o||(c.$$postDigest(a),o=[]),n||(n={},o.push(s)),n[e]&&(i=n[e].previousValue),n[e]=new li(i,t))}function s(){u.$onChanges(n),n=void 0}return me(e,function(e,i){var t=e.attrName,n=e.optional;switch(e.mode){case"@":n||F.call(p,t)||(u[i]=p[t]=void 0),p.$observe(t,function(e){var t;(U(e)||V(e))&&(t=u[i],g(i,e,t),u[i]=e)}),p.$$observers[t].$$scope=c,U(a=p[t])?u[i]=A(a)(c):V(a)&&(u[i]=a),f[i]=new li(oi,u[i]);break;case"=":if(!F.call(p,t)){if(n)break;p[t]=void 0}if(n&&!p[t])break;var s,r=(s=v(p[t])).literal?Pe:function(e,t){return e===t||e!=e&&t!=t},o=s.assign||function(){throw a=u[i]=s(c),ri("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",p[t],t,d.name)},a=u[i]=s(c),l=function(e){return r(e,u[i])||(r(e,a)?o(c,e=u[i]):u[i]=e),a=e};l.$stateful=!0,l=e.collection?c.$watchCollection(p[t],l):c.$watch(v(p[t],l),null,s.literal),m.push(l);break;case"<":if(!F.call(p,t)){if(n)break;p[t]=void 0}if(n&&!p[t])break;s=v(p[t]);var h=u[i]=s(c);f[i]=new li(oi,u[i]),l=c.$watch(s,function(e,t){if(t===e){if(t===h)return;t=h}g(i,e,t),u[i]=e},s.literal),m.push(l);break;case"&":if((s=p.hasOwnProperty(t)?v(p[t]):k)===k&&n)break;u[i]=function(e){return s(c,e)}}}),{initialChanges:f,removeWatches:m.length&&function(){for(var e=0,t=m.length;e<t;++e)m[e]()}}}}]}function li(e,t){this.previousValue=e,this.currentValue=t}ai.$inject=["$provide","$$sanitizeUriProvider"],li.prototype.isFirstChange=function(){return this.previousValue===oi};var hi=/^((?:x|data)[\:\-_])/i;function ci(e){return qe(e.replace(hi,""))}function pi(e,t){var i="",n=e.split(/\s+/),s=t.split(/\s+/);e:for(var r=0;r<n.length;r++){for(var o=n[r],a=0;a<s.length;a++)if(o==s[a])continue e;i+=(0<i.length?" ":"")+o}return i}function ui(e){var t=(e=de(e)).length;if(t<=1)return e;for(;t--;)e[t].nodeType===Fe&&i.call(e,t,1);return e}var di=S("$controller"),mi=/^(\S+)(\s+as\s+([\w$]+))?$/;function fi(e,t){if(t&&U(t))return t;if(U(e)){e=mi.exec(e);if(e)return e[3]}}function gi(){var c={},p=!1;this.has=function(e){return c.hasOwnProperty(e)},this.register=function(e,t){ue(e,"controller"),ye(e)?fe(c,e):c[e]=t},this.allowGlobals=function(){p=!0},this.$get=["$injector","$window",function(a,l){return function(t,i,e,n){var s,r;if(e=!0===e,n&&U(n)&&(r=n),U(t)){if(!(n=t.match(mi)))throw di("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",t);s=n[1],r=r||n[3],pe(t=c.hasOwnProperty(s)?c[s]:we(i.$scope,s,!0)||(p?we(l,s,!0):void 0),s,!0)}if(e){var e=(be(t)?t[t.length-1]:t).prototype,o=Object.create(e||null);return r&&h(i,r,o,s||t.name),fe(function(){var e=a.invoke(t,o,i,s);return e!==o&&(ye(e)||Se(e))&&(o=e,r&&h(i,r,o,s||t.name)),o},{instance:o,identifier:r})}return o=a.instantiate(t,i,s),r&&h(i,r,o,s||t.name),o};function h(e,t,i,n){if(!e||!ye(e.$scope))throw S("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",n,t);e.$scope[t]=i}}]}function vi(){this.$get=["$window",function(e){return de(e.document)}]}function yi(){this.$get=["$log",function(i){return function(e,t){i.error.apply(i,arguments)}}]}function bi(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof de&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]}var Si="application/json",Ti={"Content-Type":Si+";charset=utf-8"},_i=/^\[|^\{(?!\{)/,Ai={"[":/]$/,"{":/}$/},Pi=/^\)\]\}',?\n/,Ii=S("$http"),Ci=function(e){return function(){throw Ii("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",e)}};function xi(e){return ye(e)?x(e)?e.toISOString():z(e):e}function Bi(){this.$get=function(){return function(e){if(!e)return"";var i=[];return u(e,function(e,t){null===e||ve(e)||(be(e)?me(e,function(e){i.push(ne(t)+"="+ne(xi(e)))}):i.push(ne(t)+"="+ne(xi(e))))}),i.join("&")}}}function Ei(){this.$get=function(){return function(e){if(!e)return"";var t=[];return function i(e,n,s){if(null===e||ve(e))return;be(e)?me(e,function(e,t){i(e,n+"["+(ye(e)?t:"")+"]")}):ye(e)&&!x(e)?u(e,function(e,t){i(e,n+(s?"":"[")+t+(s?"":"]"))}):t.push(ne(n)+"="+ne(xi(e)))}(e,"",!0),t.join("&")}}}function wi(e,t){var i,n;return U(e)&&(!(i=e.replace(Pi,"").trim())||((n=t("Content-Type"))&&0===n.indexOf(Si)||(n=(t=i).match(_i))&&Ai[n[0]].test(t))&&(e=q(i))),e}function Ri(e){var t,i=Me();function n(e,t){e&&(i[e]=i[e]?i[e]+", "+t:t)}return U(e)?me(e.split("\n"),function(e){t=e.indexOf(":"),n(D(_e(e.substr(0,t))),_e(e.substr(t+1)))}):ye(e)&&me(e,function(e,t){n(D(t),_e(e))}),i}function Mi(t){var i;return function(e){if(i=i||Ri(t),e){e=i[D(e)];return e=void 0===e?null:e}return i}}function Oi(t,i,n,e){return Se(e)?e(t,i,n):(me(e,function(e){t=e(t,i,n)}),t)}function Ni(e){return 200<=e&&e<300}function Fi(){var y=this.defaults={transformResponse:[wi],transformRequest:[function(e){return ye(e)&&"[object File]"!==T.call(e)&&"[object Blob]"!==T.call(e)&&"[object FormData]"!==T.call(e)?z(e):e}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ke(Ti),put:ke(Ti),patch:ke(Ti)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},b=!1;this.useApplyAsync=function(e){return W(e)?(b=!!e,this):b};var h=!0;this.useLegacyPromiseExtensions=function(e){return W(e)?(h=!!e,this):h};var t=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(u,d,e,m,f,a){var g=e("$http");y.paramSerializer=U(y.paramSerializer)?a.get(y.paramSerializer):y.paramSerializer;var l=[];function v(e){if(!ye(e))throw S("$http")("badreq","Http request configuration must be an object.  Received: {0}",e);if(!U(e.url))throw S("$http")("badreq","Http request configuration url must be a string.  Received: {0}",e.url);var i=fe({method:"get",transformRequest:y.transformRequest,transformResponse:y.transformResponse,paramSerializer:y.paramSerializer},e);i.headers=function(e){var t,i,n,s=y.headers,r=fe({},e.headers);e:for(t in s=fe({},s.common,s[D(e.method)])){for(n in i=D(t),r)if(D(n)===i)continue e;r[t]=s[t]}return function(e,i){var n,s={};return me(e,function(e,t){Se(e)?null!=(n=e(i))&&(s[t]=n):s[t]=e}),s}(r,ke(e))}(e),i.method=c(i.method),i.paramSerializer=U(i.paramSerializer)?a.get(i.paramSerializer):i.paramSerializer;var t=[function(e){var i=e.headers,t=Oi(e.data,Mi(i),void 0,e.transformRequest);return ve(t)&&me(i,function(e,t){"content-type"===D(t)&&delete i[t]}),ve(e.withCredentials)&&!ve(y.withCredentials)&&(e.withCredentials=y.withCredentials),function(s,e){var r,o=f.defer(),t=o.promise,i=s.headers,a=function(e,t){0<t.length&&(e+=(-1==e.indexOf("?")?"?":"&")+t);return e}(s.url,s.paramSerializer(s.params));v.pendingRequests.push(s),t.then(p,p),!s.cache&&!y.cache||!1===s.cache||"GET"!==s.method&&"JSONP"!==s.method||(r=ye(s.cache)?s.cache:ye(y.cache)?y.cache:g);r&&(W(n=r.get(a))?w(n)?n.then(c,c):be(n)?h(n[1],n[0],ke(n[2]),n[3]):h(n,200,{},"OK"):r.put(a,t));{var n;ve(n)&&((n=es(s.url)?d()[s.xsrfCookieName||y.xsrfCookieName]:void 0)&&(i[s.xsrfHeaderName||y.xsrfHeaderName]=n),u(s.method,a,e,function(e,t,i,n){r&&(Ni(e)?r.put(a,[e,t,Ri(i),n]):r.remove(a));function s(){h(t,e,i,n)}b?m.$applyAsync(s):(s(),m.$$phase||m.$apply())},i,s.timeout,s.withCredentials,s.responseType,l(s.eventHandlers),l(s.uploadEventHandlers)))}return t;function l(e){if(e){var t={};return me(e,function(i,e){t[e]=function(e){function t(){i(e)}b?m.$applyAsync(t):m.$$phase?t():m.$apply(t)}}),t}}function h(e,t,i,n){(Ni(t=-1<=t?t:0)?o.resolve:o.reject)({data:e,status:t,headers:Mi(i),config:s,statusText:n})}function c(e){h(e.data,e.status,ke(e.headers()),e.statusText)}function p(){var e=v.pendingRequests.indexOf(s);-1!==e&&v.pendingRequests.splice(e,1)}}(e,t).then(o,o)},void 0],n=f.when(i);for(me(l,function(e){(e.request||e.requestError)&&t.unshift(e.request,e.requestError),(e.response||e.responseError)&&t.push(e.response,e.responseError)});t.length;)var s=t.shift(),r=t.shift(),n=n.then(s,r);return h?(n.success=function(t){return pe(t,"fn"),n.then(function(e){t(e.data,e.status,e.headers,i)}),n},n.error=function(t){return pe(t,"fn"),n.then(null,function(e){t(e.data,e.status,e.headers,i)}),n}):(n.success=Ci("success"),n.error=Ci("error")),n;function o(e){var t=fe({},e);return t.data=Oi(e.data,e.headers,e.status,i.transformResponse),Ni(e.status)?t:f.reject(t)}}return me(t,function(e){l.unshift(U(e)?a.get(e):a.invoke(e))}),v.pendingRequests=[],function(){me(arguments,function(i){v[i]=function(e,t){return v(fe({},t||{},{method:i,url:e}))}})}("get","delete","head","jsonp"),function(){me(arguments,function(n){v[n]=function(e,t,i){return v(fe({},i||{},{method:n,url:e,data:t}))}})}("post","put","patch"),v.defaults=y,v}]}function Di(){this.$get=function(){return function(){return new g.XMLHttpRequest}}}function Li(){this.$get=["$browser","$window","$document","$xhrFactory",function(e,t,i,n){return _=n,A=(T=e).defer,P=t.angular.callbacks,I=i[0],function(e,n,t,s,i,r,o,a,l,h){if(T.$$incOutstandingRequestCount(),n=n||T.url(),"jsonp"==D(e)){var c="_"+(P.counter++).toString(36);P[c]=function(e){P[c].data=e,P[c].called=!0};var p=(d=n.replace("JSON_CALLBACK","angular.callbacks."+c),m=c,f=function(e,t){S(s,e,P[c].data,"",t),P[c]=k},g=I.createElement("script"),v=null,g.type="text/javascript",g.src=d,g.async=!0,Ue(g,"load",v=function(e){$e(g,"load",v),$e(g,"error",v),I.body.removeChild(g),g=null;var t=-1,i="unknown";e&&(i=(e="load"===e.type&&!P[m].called?{type:"error"}:e).type,t="error"===e.type?404:200),f&&f(t,i)}),Ue(g,"error",v),I.body.appendChild(g),v)}else{var u=_(e,n);u.open(e,n,!0),me(i,function(e,t){W(e)&&u.setRequestHeader(t,e)}),u.onload=function(){var e=u.statusText||"",t="response"in u?u.response:u.responseText,i=1223===u.status?204:u.status;0===i&&(i=t?200:"file"==Jn(n).protocol?404:0),S(s,i,t,u.getAllResponseHeaders(),e)};i=function(){S(s,-1,null,null,"")};if(u.onerror=i,u.onabort=i,me(l,function(e,t){u.addEventListener(t,e)}),me(h,function(e,t){u.upload.addEventListener(t,e)}),o&&(u.withCredentials=!0),a)try{u.responseType=a}catch(e){if("json"!==a)throw e}u.send(ve(t)?null:t)}var d,m,f,g,v,y;function b(){p&&p(),u&&u.abort()}function S(e,t,i,n,s){W(y)&&A.cancel(y),p=u=null,e(t,i,n,s),T.$$completeOutstandingRequest(k)}0<r?y=A(b,r):w(r)&&r.then(b)};var T,_,A,P,I}]}var ki=I.$interpolateMinErr=S("$interpolate");function Gi(){var A="{{",P="}}";this.startSymbol=function(e){return e?(A=e,this):A},this.endSymbol=function(e){return e?(P=e,this):P},this.$get=["$parse","$exceptionHandler","$sce",function(g,v,y){var b=A.length,S=P.length,t=new RegExp(A.replace(/./g,e),"g"),i=new RegExp(P.replace(/./g,e),"g");function e(e){return"\\\\\\"+e}function T(e){return e.replace(t,A).replace(i,P)}function _(e,t,i,n){var s;return s=e.$watch(function(e){return s(),n(e)},t,i)}function n(s,e,t,n){var i;if(!s.length||-1===s.indexOf(A))return e||((i=C(T(s))).exp=s,i.expressions=[],i.$$watchDelegate=_),i;n=!!n;for(var r,o,a=0,l=[],h=[],c=s.length,p=[],u=[];a<c;){if(-1==(o=s.indexOf(A,a))||-1==(r=s.indexOf(P,o+b))){a!==c&&p.push(T(s.substring(a)));break}a!==o&&p.push(T(s.substring(a,o))),o=s.substring(o+b,r),l.push(o),h.push(g(o,f)),a=r+S,u.push(p.length),p.push("")}if(t&&1<p.length&&ki.throwNoconcat(s),!e||l.length){var d=function(e){for(var t=0,i=l.length;t<i;t++){if(n&&ve(e[t]))return;p[u[t]]=e[t]}return p.join("")},m=function(e){return t?y.getTrusted(t,e):y.valueOf(e)};return fe(function(e){var t=0,i=l.length,n=new Array(i);try{for(;t<i;t++)n[t]=h[t](e);return d(n)}catch(e){v(ki.interr(s,e))}},{exp:s,expressions:l,$$watchDelegate:function(n,s){var r;return n.$watchGroup(h,function(e,t){var i=d(e);Se(s)&&s.call(this,i,e!==t?r:i,n),r=i})}})}function f(e){try{return e=m(e),n&&!W(e)?e:function(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=z(e)}return e}(e)}catch(e){v(ki.interr(s,e))}}}return n.startSymbol=function(){return A},n.endSymbol=function(){return P},n}]}function Wi(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(d,m,f,g,v){var y={};function e(e,t,i,n){var s=4<arguments.length,r=s?Ie(arguments,4):[],o=m.setInterval,a=m.clearInterval,l=0,h=W(n)&&!n,c=(h?g:f).defer(),p=c.promise;return i=W(i)?i:0,p.$$intervalId=o(function(){h?v.defer(u):d.$evalAsync(u),c.notify(l++),0<i&&i<=l&&(c.resolve(l),a(p.$$intervalId),delete y[p.$$intervalId]),h||d.$apply()},t),y[p.$$intervalId]=c,p;function u(){s?e.apply(null,r):e(l)}}return e.cancel=function(e){return!!(e&&e.$$intervalId in y)&&(y[e.$$intervalId].reject("canceled"),m.clearInterval(e.$$intervalId),delete y[e.$$intervalId],!0)},e}]}ki.throwNoconcat=function(e){throw ki("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",e)},ki.interr=function(e,t){return ki("interr","Can't interpolate: {0}\n{1}",e,t.toString())};var Ui=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Vi={http:80,https:443,ftp:21},Hi=S("$location");function $i(e){for(var t=e.split("/"),i=t.length;i--;)t[i]=ie(t[i]);return t.join("/")}function Xi(e,t){e=Jn(e);t.$$protocol=e.protocol,t.$$host=e.hostname,t.$$port=b(e.port)||Vi[e.protocol]||null}function Yi(e,t){var i="/"!==e.charAt(0),e=Jn(e=i?"/"+e:e);t.$$path=decodeURIComponent(i&&"/"===e.pathname.charAt(0)?e.pathname.substring(1):e.pathname),t.$$search=ee(e.search),t.$$hash=decodeURIComponent(e.hash),t.$$path&&"/"!=t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function ji(e,t){return 0===e.lastIndexOf(t,0)}function zi(e,t){if(ji(t,e))return t.substr(e.length)}function qi(e){var t=e.indexOf("#");return-1==t?e:e.substr(0,t)}function Ki(e){return e.replace(/(#.+)|#$/,"$1")}function Qi(n,s,r){this.$$html5=!0,r=r||"",Xi(n,this),this.$$parse=function(e){var t=zi(s,e);if(!U(t))throw Hi("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,s);Yi(t,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=te(this.$$search),t=this.$$hash?"#"+ie(this.$$hash):"";this.$$url=$i(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=s+this.$$url.substr(1)},this.$$parseLinkUrl=function(e,t){return t&&"#"===t[0]?(this.hash(t.slice(1)),!0):(W(t=zi(n,e))?i=W(t=zi(r,i=t))?s+(zi("/",t)||t):n+i:W(t=zi(s,e))?i=s+t:s==e+"/"&&(i=s),i&&this.$$parse(i),!!i);var i}}function Zi(n,s,r){Xi(n,this),this.$$parse=function(e){var t,i=zi(n,e)||zi(s,e);ve(i)||"#"!==i.charAt(0)?this.$$html5?t=i:(t="",ve(i)&&(n=e,this.replace())):ve(t=zi(r,i))&&(t=i),Yi(t,this),this.$$path=function(e,t,i){var n=/^\/[A-Z]:(\/.*)/;ji(t,i)&&(t=t.replace(i,""));if(n.exec(t))return e;return(n=n.exec(e))?n[1]:e}(this.$$path,t,n),this.$$compose()},this.$$compose=function(){var e=te(this.$$search),t=this.$$hash?"#"+ie(this.$$hash):"";this.$$url=$i(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=n+(this.$$url?r+this.$$url:"")},this.$$parseLinkUrl=function(e,t){return qi(n)==qi(e)&&(this.$$parse(e),!0)}}function Ji(n,s,r){this.$$html5=!0,Zi.apply(this,arguments),this.$$parseLinkUrl=function(e,t){return t&&"#"===t[0]?(this.hash(t.slice(1)),!0):(n==qi(e)?i=e:(t=zi(s,e))?i=n+r+t:s===e+"/"&&(i=s),i&&this.$$parse(i),!!i);var i},this.$$compose=function(){var e=te(this.$$search),t=this.$$hash?"#"+ie(this.$$hash):"";this.$$url=$i(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=n+r+this.$$url}}var en={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:tn("$$absUrl"),url:function(e){if(ve(e))return this.$$url;var t=Ui.exec(e);return!t[1]&&""!==e||this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:tn("$$protocol"),host:tn("$$host"),port:tn("$$port"),path:nn("$$path",function(e){return"/"==(e=null!==e?e.toString():"").charAt(0)?e:"/"+e}),search:function(i,e){switch(arguments.length){case 0:return this.$$search;case 1:if(U(i)||P(i))i=i.toString(),this.$$search=ee(i);else{if(!ye(i))throw Hi("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");me(i=$(i,{}),function(e,t){null==e&&delete i[t]}),this.$$search=i}break;default:ve(e)||null===e?delete this.$$search[i]:this.$$search[i]=e}return this.$$compose(),this},hash:nn("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};function tn(e){return function(){return this[e]}}function nn(t,i){return function(e){return ve(e)?this[t]:(this[t]=i(e),this.$$compose(),this)}}function sn(){var f="",g={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return W(e)?(f=e,this):f},this.html5Mode=function(e){return V(e)?(g.enabled=e,this):ye(e)?(V(e.enabled)&&(g.enabled=e.enabled),V(e.requireBase)&&(g.requireBase=e.requireBase),V(e.rewriteLinks)&&(g.rewriteLinks=e.rewriteLinks),this):g},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(o,a,t,s,r){var e,i,n=a.baseHref(),l=a.url();if(g.enabled){if(!n&&g.requireBase)throw Hi("nobase","$location in HTML5 mode requires a <base> tag to be present!");i=l.substring(0,l.indexOf("/",l.indexOf("//")+2))+(n||"/"),e=t.history?Qi:Ji}else i=qi(l),e=Zi;var h,c=(n=i).substr(0,qi(n).lastIndexOf("/")+1);(h=new e(i,c,"#"+f)).$$parseLinkUrl(l,l),h.$$state=a.state();var p=/^\s*(javascript|mailto):/i;function u(e,t,i){var n=h.url(),s=h.$$state;try{a.url(e,t,i),h.$$state=a.state()}catch(e){throw h.url(n),h.$$state=s,e}}s.on("click",function(e){if(g.rewriteLinks&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!=e.which&&2!=e.button){for(var t=de(e.target);"a"!==Ae(t[0]);)if(t[0]===s[0]||!(t=t.parent())[0])return;var i=t.prop("href"),n=t.attr("href")||t.attr("xlink:href");ye(i)&&"[object SVGAnimatedString]"===i.toString()&&(i=Jn(i.animVal).href),p.test(i)||!i||t.attr("target")||e.isDefaultPrevented()||h.$$parseLinkUrl(i,n)&&(e.preventDefault(),h.absUrl()!=a.url()&&(o.$apply(),r.angular["ff-684208-preventDefault"]=!0))}}),Ki(h.absUrl())!=Ki(l)&&a.url(h.absUrl(),!0);var d=!0;return a.onUrlChange(function(n,s){ve(zi(c,n))?r.location.href=n:(o.$evalAsync(function(){var e,t=h.absUrl(),i=h.$$state;n=Ki(n),h.$$parse(n),h.$$state=s,e=o.$broadcast("$locationChangeStart",n,t,s,i).defaultPrevented,h.absUrl()===n&&(e?(h.$$parse(t),h.$$state=i,u(t,!1,i)):(d=!1,m(t,i)))}),o.$$phase||o.$digest())}),o.$watch(function(){var i=Ki(a.url()),e=Ki(h.absUrl()),n=a.state(),s=h.$$replace,r=i!==e||h.$$html5&&t.history&&n!==h.$$state;(d||r)&&(d=!1,o.$evalAsync(function(){var e=h.absUrl(),t=o.$broadcast("$locationChangeStart",e,i,h.$$state,n).defaultPrevented;h.absUrl()===e&&(t?(h.$$parse(i),h.$$state=n):(r&&u(e,s,n===h.$$state?null:h.$$state),m(i,n)))})),h.$$replace=!1}),h;function m(e,t){o.$broadcast("$locationChangeSuccess",h.absUrl(),e,h.$$state,t)}}]}function rn(){var n=!0,s=this;this.debugEnabled=function(e){return W(e)?(n=e,this):n},this.$get=["$window",function(t){return{log:i("log"),info:i("info"),warn:i("warn"),error:i("error"),debug:(e=i("debug"),function(){n&&e.apply(s,arguments)})};var e;function i(e){var i=t.console||{},n=i[e]||i.log||k,e=!1;try{e=!!n.apply}catch(e){}return e?function(){var t=[];return me(arguments,function(e){t.push(((e=e)instanceof Error&&(e.stack?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e))}),n.apply(i,t)}:function(e,t){n(e,null==t?"":t)}}}]}me([Ji,Zi,Qi],function(t){t.prototype=Object.create(en),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==Qi||!this.$$html5)throw Hi("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=ve(e)?null:e,this}});var on=S("$parse");function an(e,t){if("__defineGetter__"===e||"__defineSetter__"===e||"__lookupGetter__"===e||"__lookupSetter__"===e||"__proto__"===e)throw on("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",t);return e}function ln(e){return e+""}function hn(e,t){if(e){if(e.constructor===e)throw on("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e.window===e)throw on("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw on("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t);if(e===Object)throw on("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",t)}return e}var cn=Function.prototype.call,pn=Function.prototype.apply,un=Function.prototype.bind;function dn(e,t){if(e){if(e.constructor===e)throw on("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e===cn||e===pn||e===un)throw on("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",t)}}function mn(e,t){if(e&&(e===0..constructor||e===(!1).constructor||e==="".constructor||e==={}.constructor||e===[].constructor||e===Function.constructor))throw on("isecaf","Assigning to a constructor is disallowed! Expression: {0}",t)}var fn=Me();me("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){fn[e]=!0});var gn={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},vn=function(e){this.options=e};vn.prototype={constructor:vn,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t,i,n,s,r,o=this.text.charAt(this.index);'"'===o||"'"===o?this.readString(o):this.isNumber(o)||"."===o&&this.isNumber(this.peek())?this.readNumber():this.isIdentifierStart(this.peekMultichar())?this.readIdent():this.is(o,"(){}[].,;:?")?(this.tokens.push({index:this.index,text:o}),this.index++):this.isWhitespace(o)?this.index++:(i=(t=o+this.peek())+this.peek(2),n=fn[o],s=fn[t],r=fn[i],n||s||r?(this.tokens.push({index:this.index,text:o=r?i:s?t:o,operator:!0}),this.index+=o.length):this.throwError("Unexpected next character ",this.index,this.index+1))}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){e=e||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(e){return"0"<=e&&e<="9"&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"\t"===e||"\n"===e||"\v"===e||""===e},isIdentifierStart:function(e){return this.options.isIdentifierStart?this.options.isIdentifierStart(e,this.codePointAt(e)):this.isValidIdentifierStart(e)},isValidIdentifierStart:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||"$"===e},isIdentifierContinue:function(e){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(e,this.codePointAt(e)):this.isValidIdentifierContinue(e)},isValidIdentifierContinue:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)},codePointAt:function(e){return 1===e.length?e.charCodeAt(0):(e.charCodeAt(0)<<10)+e.charCodeAt(1)-56613888},peekMultichar:function(){var e=this.text.charAt(this.index),t=this.peek();if(!t)return e;var i=e.charCodeAt(0),n=t.charCodeAt(0);return 55296<=i&&i<=56319&&56320<=n&&n<=57343?e+t:e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,i){i=i||this.index;i=W(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,i)+"]":" "+i;throw on("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,i,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var i=D(this.text.charAt(this.index));if("."==i||this.isNumber(i))e+=i;else{var n=this.peek();if("e"==i&&this.isExpOperator(n))e+=i;else if(this.isExpOperator(i)&&n&&this.isNumber(n)&&"e"==e.charAt(e.length-1))e+=i;else{if(!this.isExpOperator(i)||n&&this.isNumber(n)||"e"!=e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){var e=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var t=this.peekMultichar();if(!this.isIdentifierContinue(t))break;this.index+=t.length}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var i="",n=e,s=!1;this.index<this.text.length;){var r,o=this.text.charAt(this.index);if(n+=o,s)"u"===o?((r=this.text.substring(this.index+1,this.index+5)).match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+r+"]"),this.index+=4,i+=String.fromCharCode(parseInt(r,16))):i+=gn[o]||o,s=!1;else if("\\"===o)s=!0;else{if(o===e)return this.index++,void this.tokens.push({index:t,text:n,constant:!0,value:i});i+=o}this.index++}this.throwError("Unterminated quote",t)}};var yn=function(e,t){this.lexer=e,this.options=t};function bn(e,t){return void 0!==e?e:t}function Sn(e,t){return void 0===e?t:void 0===t?e:e+t}function Tn(e,t){return!e(t).$stateful}function _n(e,t){var i,n;switch(e.type){case yn.Program:i=!0,me(e.body,function(e){_n(e.expression,t),i=i&&e.expression.constant}),e.constant=i;break;case yn.Literal:e.constant=!0,e.toWatch=[];break;case yn.UnaryExpression:_n(e.argument,t),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case yn.BinaryExpression:_n(e.left,t),_n(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case yn.LogicalExpression:_n(e.left,t),_n(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case yn.ConditionalExpression:_n(e.test,t),_n(e.alternate,t),_n(e.consequent,t),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case yn.Identifier:e.constant=!1,e.toWatch=[e];break;case yn.MemberExpression:_n(e.object,t),e.computed&&_n(e.property,t),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=[e];break;case yn.CallExpression:i=!!e.filter&&Tn(t,e.callee.name),n=[],me(e.arguments,function(e){_n(e,t),i=i&&e.constant,e.constant||n.push.apply(n,e.toWatch)}),e.constant=i,e.toWatch=e.filter&&Tn(t,e.callee.name)?n:[e];break;case yn.AssignmentExpression:_n(e.left,t),_n(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case yn.ArrayExpression:i=!0,n=[],me(e.elements,function(e){_n(e,t),i=i&&e.constant,e.constant||n.push.apply(n,e.toWatch)}),e.constant=i,e.toWatch=n;break;case yn.ObjectExpression:i=!0,n=[],me(e.properties,function(e){_n(e.value,t),i=i&&e.value.constant&&!e.computed,e.value.constant||n.push.apply(n,e.value.toWatch)}),e.constant=i,e.toWatch=n;break;case yn.ThisExpression:case yn.LocalsExpression:e.constant=!1,e.toWatch=[]}}function An(e){if(1==e.length){var t=e[0].expression,e=t.toWatch;return 1!==e.length||e[0]!==t?e:void 0}}function Pn(e){return e.type===yn.Identifier||e.type===yn.MemberExpression}function In(e){if(1===e.body.length&&Pn(e.body[0].expression))return{type:yn.AssignmentExpression,left:e.body[0].expression,right:{type:yn.NGValueParameter},operator:"="}}function Cn(e){return 0===e.body.length||1===e.body.length&&(e.body[0].expression.type===yn.Literal||e.body[0].expression.type===yn.ArrayExpression||e.body[0].expression.type===yn.ObjectExpression)}function xn(e){return e.constant}function Bn(e,t){this.astBuilder=e,this.$filter=t}function En(e,t){this.astBuilder=e,this.$filter=t}yn.Program="Program",yn.ExpressionStatement="ExpressionStatement",yn.AssignmentExpression="AssignmentExpression",yn.ConditionalExpression="ConditionalExpression",yn.LogicalExpression="LogicalExpression",yn.BinaryExpression="BinaryExpression",yn.UnaryExpression="UnaryExpression",yn.CallExpression="CallExpression",yn.MemberExpression="MemberExpression",yn.Identifier="Identifier",yn.Literal="Literal",yn.ArrayExpression="ArrayExpression",yn.Property="Property",yn.ObjectExpression="ObjectExpression",yn.ThisExpression="ThisExpression",yn.LocalsExpression="LocalsExpression",yn.NGValueParameter="NGValueParameter",yn.prototype={ast:function(e){this.text=e,this.tokens=this.lexer.lex(e);e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var e=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:yn.Program,body:e}},expressionStatement:function(){return{type:yn.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();return e=this.expect("=")?{type:yn.AssignmentExpression,left:e,right:this.assignment(),operator:"="}:e},ternary:function(){var e,t,i=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),{type:yn.ConditionalExpression,test:i,alternate:e,consequent:t}):i},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:yn.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:yn.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t={type:yn.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t={type:yn.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t={type:yn.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t={type:yn.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:yn.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e,t;for(this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?e=$(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?e={type:yn.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());t=this.expect("(","[",".");)"("===t.text?(e={type:yn.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(e={type:yn.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?e={type:yn.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){for(var t=[e],e={type:yn.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return e},parseArguments:function(){var e=[];if(")"!==this.peekToken().text)for(;e.push(this.filterChain()),this.expect(","););return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:yn.Identifier,name:e.text}},constant:function(){return{type:yn.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)for(;!this.peek("]")&&(e.push(this.expression()),this.expect(",")););return this.consume("]"),{type:yn.ArrayExpression,elements:e}},object:function(){var e,t=[];if("}"!==this.peekToken().text)for(;!this.peek("}")&&(e={type:yn.Property,kind:"init"},this.peek().constant?(e.key=this.constant(),e.computed=!1,this.consume(":"),e.value=this.expression()):this.peek().identifier?(e.key=this.identifier(),e.computed=!1,this.peek(":")?(this.consume(":"),e.value=this.expression()):e.value=e.key):this.peek("[")?(this.consume("["),e.key=this.expression(),this.consume("]"),e.computed=!0,this.consume(":"),e.value=this.expression()):this.throwError("invalid key",this.peek()),t.push(e),this.expect(",")););return this.consume("}"),{type:yn.ObjectExpression,properties:t}},throwError:function(e,t){throw on("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(0===this.tokens.length)throw on("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw on("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,i,n){return this.peekAhead(0,e,t,i,n)},peekAhead:function(e,t,i,n,s){if(this.tokens.length>e){var r=this.tokens[e],e=r.text;if(e===t||e===i||e===n||e===s||!t&&!i&&!n&&!s)return r}return!1},expect:function(e,t,i,n){n=this.peek(e,t,i,n);return!!n&&(this.tokens.shift(),n)},selfReferential:{this:{type:yn.ThisExpression},$locals:{type:yn.LocalsExpression}}},Bn.prototype={compile:function(e,t){var s=this,i=this.astBuilder.ast(e);this.state={nextId:0,filters:{},expensiveChecks:t,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},_n(i,s.$filter);var n="";this.stage="assign",(t=In(i))&&(this.state.computing="assign",r=this.nextId(),this.recurse(t,r),this.return_(r),n="fn.assign="+this.generateFunction("assign","s,v,l"));var r=An(i.body);s.stage="inputs",me(r,function(e,t){var i="fn"+t;s.state[i]={vars:[],body:[],own:{}},s.state.computing=i;var n=s.nextId();s.recurse(e,n),s.return_(n),s.state.inputs.push(i),e.watchId=t}),this.state.computing="fn",this.stage="main",this.recurse(i);n='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+n+this.watchFns()+"return fn;",e=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",n)(this.$filter,an,hn,dn,ln,mn,bn,Sn,e);return this.state=this.stage=void 0,e.literal=Cn(i),e.constant=xn(i),e},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,i=this;return me(e,function(e){t.push("var "+e+"="+i.generateFunction(e,"s"))}),e.length&&t.push("fn.inputs=["+e.join(",")+"];"),t.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var i=[],n=this;return me(this.state.filters,function(e,t){i.push(e+"=$filter("+n.escape(t)+")")}),i.length?"var "+i.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(i,t,e,n,s,r){var o,a,l,h,c,p=this;if(n=n||k,!r&&W(i.watchId))return t=t||this.nextId(),void this.if_("i",this.lazyAssign(t,this.computedMember("i",i.watchId)),this.lazyRecurse(i,t,e,n,s,!0));switch(i.type){case yn.Program:me(i.body,function(e,t){p.recurse(e.expression,void 0,void 0,function(e){a=e}),t!==i.body.length-1?p.current().body.push(a,";"):p.return_(a)});break;case yn.Literal:h=this.escape(i.value),this.assign(t,h),n(h);break;case yn.UnaryExpression:this.recurse(i.argument,void 0,void 0,function(e){a=e}),h=i.operator+"("+this.ifDefined(a,0)+")",this.assign(t,h),n(h);break;case yn.BinaryExpression:this.recurse(i.left,void 0,void 0,function(e){o=e}),this.recurse(i.right,void 0,void 0,function(e){a=e}),h="+"===i.operator?this.plus(o,a):"-"===i.operator?this.ifDefined(o,0)+i.operator+this.ifDefined(a,0):"("+o+")"+i.operator+"("+a+")",this.assign(t,h),n(h);break;case yn.LogicalExpression:t=t||this.nextId(),p.recurse(i.left,t),p.if_("&&"===i.operator?t:p.not(t),p.lazyRecurse(i.right,t)),n(t);break;case yn.ConditionalExpression:t=t||this.nextId(),p.recurse(i.test,t),p.if_(t,p.lazyRecurse(i.alternate,t),p.lazyRecurse(i.consequent,t)),n(t);break;case yn.Identifier:t=t||this.nextId(),e&&(e.context="inputs"===p.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",i.name)+"?l:s"),e.computed=!1,e.name=i.name),an(i.name),p.if_("inputs"===p.stage||p.not(p.getHasOwnProperty("l",i.name)),function(){p.if_("inputs"===p.stage||"s",function(){s&&1!==s&&p.if_(p.not(p.nonComputedMember("s",i.name)),p.lazyAssign(p.nonComputedMember("s",i.name),"{}")),p.assign(t,p.nonComputedMember("s",i.name))})},t&&p.lazyAssign(t,p.nonComputedMember("l",i.name))),(p.state.expensiveChecks||Rn(i.name))&&p.addEnsureSafeObject(t),n(t);break;case yn.MemberExpression:o=e&&(e.context=this.nextId())||this.nextId(),t=t||this.nextId(),p.recurse(i.object,o,void 0,function(){p.if_(p.notNull(o),function(){s&&1!==s&&p.addEnsureSafeAssignContext(o),i.computed?(a=p.nextId(),p.recurse(i.property,a),p.getStringValue(a),p.addEnsureSafeMemberName(a),s&&1!==s&&p.if_(p.not(p.computedMember(o,a)),p.lazyAssign(p.computedMember(o,a),"{}")),h=p.ensureSafeObject(p.computedMember(o,a)),p.assign(t,h),e&&(e.computed=!0,e.name=a)):(an(i.property.name),s&&1!==s&&p.if_(p.not(p.nonComputedMember(o,i.property.name)),p.lazyAssign(p.nonComputedMember(o,i.property.name),"{}")),h=p.nonComputedMember(o,i.property.name),(p.state.expensiveChecks||Rn(i.property.name))&&(h=p.ensureSafeObject(h)),p.assign(t,h),e&&(e.computed=!1,e.name=i.property.name))},function(){p.assign(t,"undefined")}),n(t)},!!s);break;case yn.CallExpression:t=t||this.nextId(),i.filter?(a=p.filter(i.callee.name),l=[],me(i.arguments,function(e){var t=p.nextId();p.recurse(e,t),l.push(t)}),h=a+"("+l.join(",")+")",p.assign(t,h),n(t)):(a=p.nextId(),o={},l=[],p.recurse(i.callee,a,o,function(){p.if_(p.notNull(a),function(){p.addEnsureSafeFunction(a),me(i.arguments,function(e){p.recurse(e,p.nextId(),void 0,function(e){l.push(p.ensureSafeObject(e))})}),h=o.name?(p.state.expensiveChecks||p.addEnsureSafeObject(o.context),p.member(o.context,o.name,o.computed)+"("+l.join(",")+")"):a+"("+l.join(",")+")",h=p.ensureSafeObject(h),p.assign(t,h)},function(){p.assign(t,"undefined")}),n(t)}));break;case yn.AssignmentExpression:if(a=this.nextId(),o={},!Pn(i.left))throw on("lval","Trying to assign a value to a non l-value");this.recurse(i.left,void 0,o,function(){p.if_(p.notNull(o.context),function(){p.recurse(i.right,a),p.addEnsureSafeObject(p.member(o.context,o.name,o.computed)),p.addEnsureSafeAssignContext(o.context),h=p.member(o.context,o.name,o.computed)+i.operator+a,p.assign(t,h),n(t||h)})},1);break;case yn.ArrayExpression:l=[],me(i.elements,function(e){p.recurse(e,p.nextId(),void 0,function(e){l.push(e)})}),h="["+l.join(",")+"]",this.assign(t,h),n(h);break;case yn.ObjectExpression:c=!(l=[]),me(i.properties,function(e){e.computed&&(c=!0)}),c?(t=t||this.nextId(),this.assign(t,"{}"),me(i.properties,function(e){e.computed?(o=p.nextId(),p.recurse(e.key,o)):o=e.key.type===yn.Identifier?e.key.name:""+e.key.value,a=p.nextId(),p.recurse(e.value,a),p.assign(p.member(t,o,e.computed),a)})):(me(i.properties,function(t){p.recurse(t.value,i.constant?void 0:p.nextId(),void 0,function(e){l.push(p.escape(t.key.type===yn.Identifier?t.key.name:""+t.key.value)+":"+e)})}),h="{"+l.join(",")+"}",this.assign(t,h)),n(t||h);break;case yn.ThisExpression:this.assign(t,"s"),n("s");break;case yn.LocalsExpression:this.assign(t,"l"),n("l");break;case yn.NGValueParameter:this.assign(t,"v"),n("v")}},getHasOwnProperty:function(e,t){var i=e+"."+t,n=this.current().own;return n.hasOwnProperty(i)||(n[i]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),n[i]},assign:function(e,t){if(e)return this.current().body.push(e,"=",t,";"),e},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,i){var n;!0===e?t():((n=this.current().body).push("if(",e,"){"),t(),n.push("}"),i&&(n.push("else{"),i(),n.push("}")))},not:function(e){return"!("+e+")"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){return/[$_a-zA-Z][$_a-zA-Z0-9]*/.test(t)?e+"."+t:e+'["'+t.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,i){return i?this.computedMember(e,t):this.nonComputedMember(e,t)},addEnsureSafeObject:function(e){this.current().body.push(this.ensureSafeObject(e),";")},addEnsureSafeMemberName:function(e){this.current().body.push(this.ensureSafeMemberName(e),";")},addEnsureSafeFunction:function(e){this.current().body.push(this.ensureSafeFunction(e),";")},addEnsureSafeAssignContext:function(e){this.current().body.push(this.ensureSafeAssignContext(e),";")},ensureSafeObject:function(e){return"ensureSafeObject("+e+",text)"},ensureSafeMemberName:function(e){return"ensureSafeMemberName("+e+",text)"},ensureSafeFunction:function(e){return"ensureSafeFunction("+e+",text)"},getStringValue:function(e){this.assign(e,"getStringValue("+e+")")},ensureSafeAssignContext:function(e){return"ensureSafeAssignContext("+e+",text)"},lazyRecurse:function(e,t,i,n,s,r){var o=this;return function(){o.recurse(e,t,i,n,s,r)}},lazyAssign:function(e,t){var i=this;return function(){i.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(U(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(P(e))return e.toString();if(!0===e)return"true";if(!1===e)return"false";if(null===e)return"null";if(void 0===e)return"undefined";throw on("esc","IMPOSSIBLE")},nextId:function(e,t){var i="v"+this.state.nextId++;return e||this.current().vars.push(i+(t?"="+t:"")),i},current:function(){return this.state[this.state.computing]}},En.prototype={compile:function(e,t){var n,s=this,i=this.astBuilder.ast(e);this.expression=e,this.expensiveChecks=t,_n(i,s.$filter),(t=In(i))&&(n=this.recurse(t));var r,t=An(i.body);t&&(r=[],me(t,function(e,t){var i=s.recurse(e);e.input=i,r.push(i),e.watchId=t}));var o=[];me(i.body,function(e){o.push(s.recurse(e.expression))});t=0===i.body.length?k:1===i.body.length?o[0]:function(t,i){var n;return me(o,function(e){n=e(t,i)}),n};return n&&(t.assign=function(e,t,i){return n(e,i,t)}),r&&(t.inputs=r),t.literal=Cn(i),t.constant=xn(i),t},recurse:function(e,l,t){var r,h,c,p=this;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case yn.Literal:return this.value(e.value,l);case yn.UnaryExpression:return h=this.recurse(e.argument),this["unary"+e.operator](h,l);case yn.BinaryExpression:case yn.LogicalExpression:return r=this.recurse(e.left),h=this.recurse(e.right),this["binary"+e.operator](r,h,l);case yn.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),l);case yn.Identifier:return an(e.name,p.expression),p.identifier(e.name,p.expensiveChecks||Rn(e.name),l,t,p.expression);case yn.MemberExpression:return r=this.recurse(e.object,!1,!!t),e.computed||(an(e.property.name,p.expression),h=e.property.name),e.computed&&(h=this.recurse(e.property)),e.computed?this.computedMember(r,h,l,t,p.expression):this.nonComputedMember(r,h,p.expensiveChecks,l,t,p.expression);case yn.CallExpression:return c=[],me(e.arguments,function(e){c.push(p.recurse(e))}),e.filter&&(h=this.$filter(e.callee.name)),e.filter||(h=this.recurse(e.callee,!0)),e.filter?function(e,t,i,n){for(var s=[],r=0;r<c.length;++r)s.push(c[r](e,t,i,n));var o=h.apply(void 0,s,n);return l?{context:void 0,name:void 0,value:o}:o}:function(e,t,i,n){var s,r=h(e,t,i,n);if(null!=r.value){hn(r.context,p.expression),dn(r.value,p.expression);for(var o=[],a=0;a<c.length;++a)o.push(hn(c[a](e,t,i,n),p.expression));s=hn(r.value.apply(r.context,o),p.expression)}return l?{value:s}:s};case yn.AssignmentExpression:return r=this.recurse(e.left,!0,1),h=this.recurse(e.right),function(e,t,i,n){var s=r(e,t,i,n),n=h(e,t,i,n);return hn(s.value,p.expression),mn(s.context),s.context[s.name]=n,l?{value:n}:n};case yn.ArrayExpression:return c=[],me(e.elements,function(e){c.push(p.recurse(e))}),function(e,t,i,n){for(var s=[],r=0;r<c.length;++r)s.push(c[r](e,t,i,n));return l?{value:s}:s};case yn.ObjectExpression:return c=[],me(e.properties,function(e){e.computed?c.push({key:p.recurse(e.key),computed:!0,value:p.recurse(e.value)}):c.push({key:e.key.type===yn.Identifier?e.key.name:""+e.key.value,computed:!1,value:p.recurse(e.value)})}),function(e,t,i,n){for(var s={},r=0;r<c.length;++r)c[r].computed?s[c[r].key(e,t,i,n)]=c[r].value(e,t,i,n):s[c[r].key]=c[r].value(e,t,i,n);return l?{value:s}:s};case yn.ThisExpression:return function(e){return l?{value:e}:e};case yn.LocalsExpression:return function(e,t){return l?{value:t}:t};case yn.NGValueParameter:return function(e,t,i){return l?{value:i}:i}}},"unary+":function(s,r){return function(e,t,i,n){n=W(n=s(e,t,i,n))?+n:0;return r?{value:n}:n}},"unary-":function(s,r){return function(e,t,i,n){n=W(n=s(e,t,i,n))?-n:0;return r?{value:n}:n}},"unary!":function(s,r){return function(e,t,i,n){n=!s(e,t,i,n);return r?{value:n}:n}},"binary+":function(s,r,o){return function(e,t,i,n){n=Sn(s(e,t,i,n),r(e,t,i,n));return o?{value:n}:n}},"binary-":function(r,o,a){return function(e,t,i,n){var s=r(e,t,i,n),n=o(e,t,i,n),n=(W(s)?s:0)-(W(n)?n:0);return a?{value:n}:n}},"binary*":function(s,r,o){return function(e,t,i,n){n=s(e,t,i,n)*r(e,t,i,n);return o?{value:n}:n}},"binary/":function(s,r,o){return function(e,t,i,n){n=s(e,t,i,n)/r(e,t,i,n);return o?{value:n}:n}},"binary%":function(s,r,o){return function(e,t,i,n){n=s(e,t,i,n)%r(e,t,i,n);return o?{value:n}:n}},"binary===":function(s,r,o){return function(e,t,i,n){n=s(e,t,i,n)===r(e,t,i,n);return o?{value:n}:n}},"binary!==":function(s,r,o){return function(e,t,i,n){n=s(e,t,i,n)!==r(e,t,i,n);return o?{value:n}:n}},"binary==":function(s,r,o){return function(e,t,i,n){n=s(e,t,i,n)==r(e,t,i,n);return o?{value:n}:n}},"binary!=":function(s,r,o){return function(e,t,i,n){n=s(e,t,i,n)!=r(e,t,i,n);return o?{value:n}:n}},"binary<":function(s,r,o){return function(e,t,i,n){n=s(e,t,i,n)<r(e,t,i,n);return o?{value:n}:n}},"binary>":function(s,r,o){return function(e,t,i,n){n=s(e,t,i,n)>r(e,t,i,n);return o?{value:n}:n}},"binary<=":function(s,r,o){return function(e,t,i,n){n=s(e,t,i,n)<=r(e,t,i,n);return o?{value:n}:n}},"binary>=":function(s,r,o){return function(e,t,i,n){n=s(e,t,i,n)>=r(e,t,i,n);return o?{value:n}:n}},"binary&&":function(s,r,o){return function(e,t,i,n){n=s(e,t,i,n)&&r(e,t,i,n);return o?{value:n}:n}},"binary||":function(s,r,o){return function(e,t,i,n){n=s(e,t,i,n)||r(e,t,i,n);return o?{value:n}:n}},"ternary?:":function(s,r,o,a){return function(e,t,i,n){n=(s(e,t,i,n)?r:o)(e,t,i,n);return a?{value:n}:n}},value:function(e,t){return function(){return t?{context:void 0,name:void 0,value:e}:e}},identifier:function(s,r,o,a,l){return function(e,t,i,n){t=t&&s in t?t:e;a&&1!==a&&t&&!t[s]&&(t[s]={});e=t?t[s]:void 0;return r&&hn(e,l),o?{context:t,name:s,value:e}:e}},computedMember:function(a,l,h,c,p){return function(e,t,i,n){var s,r,o=a(e,t,i,n);return null!=o&&(s=l(e,t,i,n),an(s+="",p),c&&1!==c&&(mn(o),o&&!o[s]&&(o[s]={})),hn(r=o[s],p)),h?{context:o,name:s,value:r}:r}},nonComputedMember:function(s,r,o,a,l,h){return function(e,t,i,n){i=s(e,t,i,n);l&&1!==l&&(mn(i),i&&!i[r]&&(i[r]={}));n=null!=i?i[r]:void 0;return(o||Rn(r))&&hn(n,h),a?{context:i,name:r,value:n}:n}},inputs:function(s,r){return function(e,t,i,n){return n?n[r]:s(e,t,i)}}};var wn=function(e,t,i){this.lexer=e,this.$filter=t,this.options=i,this.ast=new yn(e,i),this.astCompiler=new(i.csp?En:Bn)(this.ast,t)};function Rn(e){return"constructor"==e}wn.prototype={constructor:wn,parse:function(e){return this.astCompiler.compile(e,this.options.expensiveChecks)}};var Mn=Object.prototype.valueOf;function On(e){return Se(e.valueOf)?e.valueOf():Mn.call(e)}function Nn(){var i,n,b=Me(),S=Me(),s={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(e,t){s[e]=t},this.setIdentifierFns=function(e,t){return i=e,n=t,this},this.$get=["$filter",function(h){var e=X().noUnsafeEval,c={csp:e,expensiveChecks:!1,literals:$(s),isIdentifierStart:Se(i)&&i,isIdentifierContinue:Se(n)&&n},p={csp:e,expensiveChecks:!0,literals:$(s),isIdentifierStart:Se(i)&&i,isIdentifierContinue:Se(n)&&n},u=!1;return t.$$runningExpensiveChecks=function(){return u},t;function t(e,t,i){var n;switch(i=i||u,typeof e){case"string":e=e.trim();var s,r,o,a,l=i?S:b;return(a=l[s=e])||(":"===e.charAt(0)&&":"===e.charAt(1)&&(n=!0,e=e.substring(2)),o=new vn(r=i?p:c),(a=new wn(o,h,r).parse(e)).constant?a.$$watchDelegate=v:n?a.$$watchDelegate=a.literal?g:f:a.inputs&&(a.$$watchDelegate=m),i&&(a=function e(r){if(!r)return r;i.$$watchDelegate=r.$$watchDelegate;i.assign=e(r.assign);i.constant=r.constant;i.literal=r.literal;for(var t=0;r.inputs&&t<r.inputs.length;++t)r.inputs[t]=e(r.inputs[t]);i.inputs=r.inputs;return i;function i(e,t,i,n){var s=u;u=!0;try{return r(e,t,i,n)}finally{u=s}}}(a)),l[s]=a),y(a,t);case"function":return y(e,t);default:return y(k,t)}}function d(e,t){return null==e||null==t?e===t:("object"!=typeof e||"object"!=typeof(e=On(e)))&&(e===t||e!=e&&t!=t)}function m(e,t,i,r,n){var o;if(1===(a=r.inputs).length){var s=d,a=a[0];return e.$watch(function(e){var t=a(e);return d(t,s)||(o=r(e,void 0,void 0,[t]),s=t&&On(t)),o},t,i,n)}for(var l=[],h=[],c=0,p=a.length;c<p;c++)l[c]=d,h[c]=null;return e.$watch(function(e){for(var t=!1,i=0,n=a.length;i<n;i++){var s=a[i](e);(t=t||!d(s,l[i]))&&(h[i]=s,l[i]=s&&On(s))}return o=t?r(e,void 0,void 0,h):o},t,i,n)}function f(e,n,t,i){var s,r;return s=e.$watch(function(e){return i(e)},function(e,t,i){r=e,Se(n)&&n.apply(this,arguments),W(e)&&i.$$postDigest(function(){W(r)&&s()})},t)}function g(e,n,t,i){var s,r;return s=e.$watch(function(e){return i(e)},function(e,t,i){r=e,Se(n)&&n.call(this,e,t,i),o(e)&&i.$$postDigest(function(){o(r)&&s()})},t);function o(e){var t=!0;return me(e,function(e){W(e)||(t=!1)}),t}}function v(e,t,i,n){var s;return s=e.$watch(function(e){return s(),n(e)},t,i)}function y(s,r){if(!r)return s;var e=s.$$watchDelegate,o=!1,e=e!==g&&e!==f?function(e,t,i,n){n=o&&n?n[0]:s(e,t,i,n);return r(n,e,t)}:function(e,t,i,n){n=s(e,t,i,n),t=r(n,e,t);return W(n)?t:n};return s.$$watchDelegate&&s.$$watchDelegate!==m?e.$$watchDelegate=s.$$watchDelegate:r.$stateful||(e.$$watchDelegate=m,o=!s.inputs,e.inputs=s.inputs||[s]),e}}]}function Fn(){this.$get=["$rootScope","$exceptionHandler",function(t,e){return Ln(function(e){t.$evalAsync(e)},e)}]}function Dn(){this.$get=["$browser","$exceptionHandler",function(t,e){return Ln(function(e){t.defer(e)},e)}]}function Ln(t,o){var i=S("$q",TypeError);function e(){this.$$state={status:0}}function r(t,i){return function(e){i.call(t,e)}}function a(e){!e.processScheduled&&e.pending&&(e.processScheduled=!0,t(function(){!function(e){var t,i,n=e.pending;e.processScheduled=!1,e.pending=void 0;for(var s=0,r=n.length;s<r;++s){i=n[s][0],t=n[s][e.status];try{Se(t)?i.resolve(t(e.value)):1===e.status?i.resolve(e.value):i.reject(e.value)}catch(e){i.reject(e),o(e)}}}(e)}))}function l(){this.promise=new e}fe(e.prototype,{then:function(e,t,i){if(ve(e)&&ve(t)&&ve(i))return this;var n=new l;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([n,e,t,i]),0<this.$$state.status&&a(this.$$state),n.promise},catch:function(e){return this.then(null,e)},finally:function(t,e){return this.then(function(e){return n(e,!0,t)},function(e){return n(e,!1,t)},e)}}),fe(l.prototype,{resolve:function(e){this.promise.$$state.status||(e===this.promise?this.$$reject(i("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):this.$$resolve(e))},$$resolve:function(e){var t,i=this,n=!1;try{(ye(e)||Se(e))&&(t=e&&e.then),Se(t)?(this.promise.$$state.status=-1,t.call(e,function(e){n||(n=!0,i.$$resolve(e))},s,r(this,this.notify))):(this.promise.$$state.value=e,this.promise.$$state.status=1,a(this.promise.$$state))}catch(e){s(e),o(e)}function s(e){n||(n=!0,i.$$reject(e))}},reject:function(e){this.promise.$$state.status||this.$$reject(e)},$$reject:function(e){this.promise.$$state.value=e,this.promise.$$state.status=2,a(this.promise.$$state)},notify:function(s){var r=this.promise.$$state.pending;this.promise.$$state.status<=0&&r&&r.length&&t(function(){for(var e,t,i=0,n=r.length;i<n;i++){t=r[i][0],e=r[i][3];try{t.notify(Se(e)?e(s):s)}catch(e){o(e)}}})}});function s(e,t){var i=new l;return t?i.resolve(e):i.reject(e),i.promise}function h(e,t,i,n){var s=new l;return s.resolve(e),s.promise.then(t,i,n)}var n=function(e,t,i){var n=null;try{Se(i)&&(n=i())}catch(e){return s(e,!1)}return w(n)?n.then(function(){return s(e,t)},function(e){return s(e,!1)}):s(e,t)},c=h;function p(e){if(!Se(e))throw i("norslvr","Expected resolverFn, got '{0}'",e);var t=new l;return e(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}return p.prototype=e.prototype,p.defer=function(){var e=new l;return e.resolve=r(e,e.resolve),e.reject=r(e,e.reject),e.notify=r(e,e.notify),e},p.reject=function(e){var t=new l;return t.reject(e),t.promise},p.when=h,p.resolve=c,p.all=function(e){var i=new l,n=0,s=be(e)?[]:{};return me(e,function(e,t){n++,h(e).then(function(e){s.hasOwnProperty(t)||(s[t]=e,--n||i.resolve(s))},function(e){s.hasOwnProperty(t)||i.reject(e)})}),0===n&&i.resolve(s),i.promise},p}function kn(){this.$get=["$window","$timeout",function(e,i){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame,s=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,t=!!n,e=t?function(e){var t=n(e);return function(){s(t)}}:function(e){var t=i(e,16.66,!1);return function(){i.cancel(t)}};return e.supported=t,e}]}function Gn(){var P=10,I=S("$rootScope"),C=null,x=null;this.digestTtl=function(e){return P=arguments.length?e:P},this.$get=["$exceptionHandler","$parse","$browser",function(d,m,f){function s(e){e.currentScope.$$destroyed=!0}function r(){this.$id=++h,this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,(this.$root=this).$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}r.prototype={constructor:r,$new:function(e,t){var i;function n(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=++h,this.$$ChildScope=null}return t=t||this,e?(i=new r).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=(n.prototype=this,n)),i=new this.$$ChildScope),i.$parent=t,i.$$prevSibling=t.$$childTail,t.$$childHead?(t.$$childTail.$$nextSibling=i,t.$$childTail=i):t.$$childHead=t.$$childTail=i,!e&&t==this||i.$on("$destroy",s),i},$watch:function(e,t,i,n){var s=m(e);if(s.$$watchDelegate)return s.$$watchDelegate(this,t,i,s,e);var r=this,o=r.$$watchers,a={fn:t,last:_,get:s,exp:n||e,eq:!!i};return C=null,Se(t)||(a.fn=k),(o=o||(r.$$watchers=[])).unshift(a),l(this,1),function(){0<=H(o,a)&&l(r,-1),C=null}},$watchGroup:function(e,n){var s=new Array(e.length),r=new Array(e.length),t=[],o=this,a=!1,i=!0;if(e.length)return 1===e.length?this.$watch(e[0],function(e,t,i){r[0]=e,s[0]=t,n(r,e===t?r:s,i)}):(me(e,function(e,i){e=o.$watch(e,function(e,t){r[i]=e,s[i]=t,a||(a=!0,o.$evalAsync(h))});t.push(e)}),function(){for(;t.length;)t.shift()()});var l=!0;return o.$evalAsync(function(){l&&n(r,r,o)}),function(){l=!1};function h(){a=!1,i?(i=!1,n(r,r,o)):n(r,s,o)}},$watchCollection:function(e,i){t.$stateful=!0;var o,a,n,s=this,r=1<i.length,l=0,e=m(e,t),h=[],c={},p=!0,u=0;function t(e){var t,i,n,s;if(!ve(o=e)){if(ye(o))if(N(o)){a!==h&&(u=(a=h).length=0,l++),t=o.length,u!==t&&(l++,a.length=u=t);for(var r=0;r<t;r++)s=a[r],n=o[r],s!=s&&n!=n||s===n||(l++,a[r]=n)}else{for(i in a!==c&&(a=c={},u=0,l++),t=0,o)F.call(o,i)&&(t++,n=o[i],s=a[i],i in a?s!=s&&n!=n||s===n||(l++,a[i]=n):(u++,a[i]=n,l++));if(t<u)for(i in l++,a)F.call(o,i)||(u--,delete a[i])}else a!==o&&(a=o,l++);return l}}return this.$watch(e,function(){if(p?(p=!1,i(o,o,s)):i(o,n,s),r)if(ye(o))if(N(o)){n=new Array(o.length);for(var e=0;e<o.length;e++)n[e]=o[e]}else for(var t in n={},o)F.call(o,t)&&(n[t]=o[t]);else n=o})},$digest:function(){var e,t,i,n,s,r,o,a,l=P,h=[];S("$digest"),f.$$checkUrlChange(),this===g&&null!==x&&(f.defer.cancel(x),A()),C=null;do{for(var c=!1,p=this,u=0;u<v.length;u++){try{(a=v[u]).scope.$eval(a.expression,a.locals)}catch(e){d(e)}C=null}v.length=0;e:do{if(n=p.$$watchers)for(s=n.length;s--;)try{if(e=n[s])if((t=(0,e.get)(p))===(i=e.last)||(e.eq?Pe(t,i):"number"==typeof t&&"number"==typeof i&&isNaN(t)&&isNaN(i))){if(e===C){c=!1;break e}}else c=!0,(C=e).last=e.eq?$(t,null):t,(0,e.fn)(t,i===_?t:i,p),l<5&&(h[o=4-l]||(h[o]=[]),h[o].push({msg:Se(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:t,oldVal:i}))}catch(e){d(e)}if(!(r=p.$$watchersCount&&p.$$childHead||p!==this&&p.$$nextSibling))for(;p!==this&&!(r=p.$$nextSibling);)p=p.$parent}while(p=r);if((c||v.length)&&!l--)throw T(),I("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",P,h)}while(c||v.length);for(T();b<y.length;)try{y[b++]()}catch(e){d(e)}y.length=b=0},$destroy:function(){if(!this.$$destroyed){var e,t=this.$parent;for(e in this.$broadcast("$destroy"),this.$$destroyed=!0,this===g&&f.$$applicationDestroyed(),l(this,-this.$$watchersCount),this.$$listenerCount)o(this,this.$$listenerCount[e],e);t&&t.$$childHead==this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail==this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=k,this.$on=this.$watch=this.$watchGroup=function(){return k},this.$$listeners={},this.$$nextSibling=null,function e(t){9===L&&(t.$$childHead&&e(t.$$childHead),t.$$nextSibling&&e(t.$$nextSibling)),t.$parent=t.$$nextSibling=t.$$prevSibling=t.$$childHead=t.$$childTail=t.$root=t.$$watchers=null}(this)}},$eval:function(e,t){return m(e)(this,t)},$evalAsync:function(e,t){g.$$phase||v.length||f.defer(function(){v.length&&g.$digest()}),v.push({scope:this,expression:m(e),locals:t})},$$postDigest:function(e){y.push(e)},$apply:function(e){try{S("$apply");try{return this.$eval(e)}finally{T()}}catch(e){d(e)}finally{try{g.$digest()}catch(e){throw d(e),e}}},$applyAsync:function(e){var t=this;e&&i.push(function(){t.$eval(e)}),e=m(e),null===x&&(x=f.defer(function(){g.$apply(A)}))},$on:function(t,i){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(i);for(var e=this;e.$$listenerCount[t]||(e.$$listenerCount[t]=0),e.$$listenerCount[t]++,e=e.$parent;);var s=this;return function(){var e=n.indexOf(i);-1!==e&&(n[e]=null,o(s,1,t))}},$emit:function(e,t){var i,n,s,r=[],o=this,a=!1,l={name:e,targetScope:o,stopPropagation:function(){a=!0},preventDefault:function(){l.defaultPrevented=!0},defaultPrevented:!1},h=j([l],arguments,1);do{for(i=o.$$listeners[e]||r,l.currentScope=o,n=0,s=i.length;n<s;n++)if(i[n])try{i[n].apply(null,h)}catch(e){d(e)}else i.splice(n,1),n--,s--;if(a)return l.currentScope=null,l}while(o=o.$parent);return l.currentScope=null,l},$broadcast:function(e,t){var i=this,n=i,s=i,r={name:e,targetScope:i,preventDefault:function(){r.defaultPrevented=!0},defaultPrevented:!1};if(!i.$$listenerCount[e])return r;for(var o,a,l,h=j([r],arguments,1);n=s;){for(a=0,l=(o=(r.currentScope=n).$$listeners[e]||[]).length;a<l;a++)if(o[a])try{o[a].apply(null,h)}catch(e){d(e)}else o.splice(a,1),a--,l--;if(!(s=n.$$listenerCount[e]&&n.$$childHead||n!==i&&n.$$nextSibling))for(;n!==i&&!(s=n.$$nextSibling);)n=n.$parent}return r.currentScope=null,r}};var g=new r,v=g.$$asyncQueue=[],y=g.$$postDigestQueue=[],i=g.$$applyAsyncQueue=[],b=0;return g;function S(e){if(g.$$phase)throw I("inprog","{0} already in progress",g.$$phase);g.$$phase=e}function T(){g.$$phase=null}function l(e,t){for(;e.$$watchersCount+=t,e=e.$parent;);}function o(e,t,i){for(;e.$$listenerCount[i]-=t,0===e.$$listenerCount[i]&&delete e.$$listenerCount[i],e=e.$parent;);}function _(){}function A(){for(;i.length;)try{i.shift()()}catch(e){d(e)}x=null}}]}function Wn(){var n=/^\s*(https?|ftp|mailto|tel|file):/,s=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return W(e)?(n=e,this):n},this.imgSrcSanitizationWhitelist=function(e){return W(e)?(s=e,this):s},this.$get=function(){return function(e,t){var i=t?s:n,t=Jn(e).href;return""===t||t.match(i)?e:"unsafe:"+t}}}var Un=S("$sce"),Vn={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"};function Hn(e){var t=[];return W(e)&&me(e,function(e){t.push(function(e){if("self"===e)return e;if(U(e)){if(-1<e.indexOf("***"))throw Un("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=M(e).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")}if(B(e))return new RegExp("^"+e.source+"$");throw Un("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(e))}),t}function $n(){this.SCE_CONTEXTS=Vn;var o=["self"],a=[];this.resourceUrlWhitelist=function(e){return o=arguments.length?Hn(e):o},this.resourceUrlBlacklist=function(e){return a=arguments.length?Hn(e):a},this.$get=["$injector",function(e){var n=function(e){throw Un("unsafe","Attempting to use an unsafe value in a safe context.")};function r(e,t){return"self"===e?es(t):e.exec(t.href)}function t(e){function t(e){this.$$unwrapTrustedValue=function(){return e}}return(t.prototype=e?new e:t.prototype).valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}e.has("$sanitize")&&(n=e.get("$sanitize"));var i=t(),s={};return s[Vn.HTML]=t(i),s[Vn.CSS]=t(i),s[Vn.URL]=t(i),s[Vn.JS]=t(i),s[Vn.RESOURCE_URL]=t(s[Vn.URL]),{trustAs:function(e,t){var i=s.hasOwnProperty(e)?s[e]:null;if(!i)throw Un("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||ve(t)||""===t)return t;if("string"!=typeof t)throw Un("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new i(t)},getTrusted:function(e,t){if(null===t||ve(t)||""===t)return t;var i=s.hasOwnProperty(e)?s[e]:null;if(i&&t instanceof i)return t.$$unwrapTrustedValue();if(e===Vn.RESOURCE_URL){if(function(e){for(var t=Jn(e.toString()),i=!1,n=0,s=o.length;n<s;n++)if(r(o[n],t)){i=!0;break}if(i)for(n=0,s=a.length;n<s;n++)if(r(a[n],t)){i=!1;break}return i}(t))return t;throw Un("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===Vn.HTML)return n(t);throw Un("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(e){return e instanceof i?e.$$unwrapTrustedValue():e}}}]}function Xn(){var t=!0;this.enabled=function(e){return t=arguments.length?!!e:t},this.$get=["$parse","$sceDelegate",function(n,e){if(t&&L<8)throw Un("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var s=ke(Vn);s.isEnabled=function(){return t},s.trustAs=e.trustAs,s.getTrusted=e.getTrusted,s.valueOf=e.valueOf,t||(s.trustAs=s.getTrusted=function(e,t){return t},s.valueOf=G),s.parseAs=function(t,e){var i=n(e);return i.literal&&i.constant?i:n(e,function(e){return s.getTrusted(t,e)})};var i=s.parseAs,r=s.getTrusted,o=s.trustAs;return me(Vn,function(t,e){e=D(e);s[qe("parse_as_"+e)]=function(e){return i(t,e)},s[qe("get_trusted_"+e)]=function(e){return r(t,e)},s[qe("trust_as_"+e)]=function(e){return o(t,e)}}),s}]}function Yn(){this.$get=["$window","$document",function(e,t){var i,n={},s=!(e.chrome&&e.chrome.app&&e.chrome.app.runtime)&&e.history&&e.history.pushState,r=b((/android (\d+)/.exec(D((e.navigator||{}).userAgent))||[])[1]),o=/Boxee/i.test((e.navigator||{}).userAgent),a=t[0]||{},l=/^(Moz|webkit|ms)(?=[A-Z])/,h=a.body&&a.body.style,e=!1,t=!1;if(h){for(var c in h)if(c=l.exec(c)){i=(i=c[0])[0].toUpperCase()+i.substr(1);break}i=i||"WebkitOpacity"in h&&"webkit",e=!!("transition"in h||i+"Transition"in h),t=!!("animation"in h||i+"Animation"in h),!r||e&&t||(e=U(h.webkitTransition),t=U(h.webkitAnimation))}return{history:!(!s||r<4||o),hasEvent:function(e){return!("input"===e&&L<=11)&&(ve(n[e])&&(t=a.createElement("div"),n[e]="on"+e in t),n[e]);var t},csp:X(),vendorPrefix:i,transitions:e,animations:t,android:r}}]}var jn=S("$compile");function zn(){var l;this.httpOptions=function(e){return e?(l=e,this):l},this.$get=["$templateCache","$http","$q","$sce",function(n,s,r,o){function a(t,i){a.totalPendingRequests++,U(t)&&!ve(n.get(t))||(t=o.getTrustedResourceUrl(t));var e=s.defaults&&s.defaults.transformResponse;return be(e)?e=e.filter(function(e){return e!==wi}):e===wi&&(e=null),s.get(t,fe({cache:n,transformResponse:e},l)).finally(function(){a.totalPendingRequests--}).then(function(e){return n.put(t,e.data),e.data},function(e){if(i)return r.reject(e);throw jn("tpload","Failed to load template: {0} (HTTP status: {1} {2})",t,e.status,e.statusText)})}return a.totalPendingRequests=0,a}]}function qn(){this.$get=["$rootScope","$browser","$location",function(t,i,n){var e={findBindings:function(e,i,n){var e=e.getElementsByClassName("ng-binding"),s=[];return me(e,function(t){var e=I.element(t).data("$binding");e&&me(e,function(e){n?new RegExp("(^|\\s)"+M(i)+"(\\s|\\||$)").test(e)&&s.push(t):-1!=e.indexOf(i)&&s.push(t)})}),s},findModels:function(e,t,i){for(var n=["ng-","data-ng-","ng\\:"],s=0;s<n.length;++s){var r=e.querySelectorAll("["+n[s]+"model"+(i?"=":"*=")+'"'+t+'"]');if(r.length)return r}},getLocation:function(){return n.url()},setLocation:function(e){e!==n.url()&&(n.url(e),t.$digest())},whenStable:function(e){i.notifyWhenNoOutstandingRequests(e)}};return e}]}function Kn(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,l,h,c,p){var u={};function e(e,t,i){Se(e)||(i=t,t=e,e=k);var n=Ie(arguments,3),s=W(i)&&!i,r=(s?c:h).defer(),o=r.promise,t=l.defer(function(){try{r.resolve(e.apply(null,n))}catch(e){r.reject(e),p(e)}finally{delete u[o.$$timeoutId]}s||a.$apply()},t);return o.$$timeoutId=t,u[t]=r,o}return e.cancel=function(e){return!!(e&&e.$$timeoutId in u)&&(u[e.$$timeoutId].reject("canceled"),delete u[e.$$timeoutId],l.defer.cancel(e.$$timeoutId))},e}]}var Qn=g.document.createElement("a"),Zn=Jn(g.location.href);function Jn(e){return L&&(Qn.setAttribute("href",e),e=Qn.href),Qn.setAttribute("href",e),{href:Qn.href,protocol:Qn.protocol?Qn.protocol.replace(/:$/,""):"",host:Qn.host,search:Qn.search?Qn.search.replace(/^\?/,""):"",hash:Qn.hash?Qn.hash.replace(/^#/,""):"",hostname:Qn.hostname,port:Qn.port,pathname:"/"===Qn.pathname.charAt(0)?Qn.pathname:"/"+Qn.pathname}}function es(e){e=U(e)?Jn(e):e;return e.protocol===Zn.protocol&&e.host===Zn.host}function ts(){this.$get=C(g)}function is(e){var o=e[0]||{},a={},l="";function h(t){try{return decodeURIComponent(t)}catch(e){return t}}return function(){var e,t,i,n,s,r=o.cookie||"";if(r!==l)for(e=(l=r).split("; "),a={},i=0;i<e.length;i++)0<(n=(t=e[i]).indexOf("="))&&(s=h(t.substring(0,n)),ve(a[s])&&(a[s]=h(t.substring(n+1))));return a}}function ns(){this.$get=is}function ss(n){function s(e,t){if(ye(e)){var i={};return me(e,function(e,t){i[t]=s(t,e)}),i}return n.factory(e+"Filter",t)}this.register=s,this.$get=["$injector",function(t){return function(e){return t.get(e+"Filter")}}],s("currency",hs),s("date",Ts),s("filter",rs),s("json",_s),s("limitTo",Is),s("lowercase",As),s("number",cs),s("orderBy",xs),s("uppercase",Ps)}function rs(){return function(e,t,i){if(!N(e)){if(null==e)return e;throw S("filter")("notarray","Expected array but received: {0}",e)}var n,s;switch(as(t)){case"function":n=t;break;case"boolean":case"null":case"number":case"string":s=!0;case"object":n=function(t,i,n){var s=ye(t)&&"$"in t;!0===i?i=Pe:Se(i)||(i=function(e,t){return!ve(e)&&(null===e||null===t?e===t:!(ye(t)||ye(e)&&!_(e))&&(e=D(""+e),t=D(""+t),-1!==e.indexOf(t)))});return function(e){return s&&!ye(e)?os(e,t.$,i,!1):os(e,t,i,n)}}(t,i,s);break;default:return e}return Array.prototype.filter.call(e,n)}}function os(e,t,i,n,s){var r,o=as(e),a=as(t);if("string"===a&&"!"===t.charAt(0))return!os(e,t.substring(1),i,n);if(be(e))return e.some(function(e){return os(e,t,i,n)});switch(o){case"object":if(n){for(r in e)if("$"!==r.charAt(0)&&os(e[r],t,i,!0))return!0;return!s&&os(e,t,i,!1)}if("object"!==a)return i(e,t);for(r in t){var l=t[r];if(!Se(l)&&!ve(l)){var h="$"===r;if(!os(h?e:e[r],l,i,h,h))return!1}}return!0;case"function":return!1;default:return i(e,t)}}function as(e){return null===e?"null":typeof e}is.$inject=["$document"],ss.$inject=["$provide"];var ls="0";function hs(e){var n=e.NUMBER_FORMATS;return function(e,t,i){return ve(t)&&(t=n.CURRENCY_SYM),ve(i)&&(i=n.PATTERNS[1].maxFrac),null==e?e:ps(e,n.PATTERNS[1],n.GROUP_SEP,n.DECIMAL_SEP,i).replace(/\u00A4/g,t)}}function cs(e){var i=e.NUMBER_FORMATS;return function(e,t){return null==e?e:ps(e,i.PATTERNS[0],i.GROUP_SEP,i.DECIMAL_SEP,t)}}function ps(e,t,i,n,s){if(!U(e)&&!P(e)||isNaN(e))return"";var r=!isFinite(e),o=!1,a=Math.abs(e)+"",l="";if(r)l="";else{(function(e,t,i,n){var s=e.d,r=s.length-e.i,o=(t=ve(t)?Math.min(Math.max(i,r),n):+t)+e.i,n=s[o];if(0<o){s.splice(Math.max(e.i,o));for(var a=o;a<s.length;a++)s[a]=0}else{r=Math.max(0,r),e.i=1,s.length=Math.max(1,o=t+1),s[0]=0;for(var l=1;l<o;l++)s[l]=0}if(5<=n)if(o-1<0){for(var h=0;o<h;h--)s.unshift(0),e.i++;s.unshift(1),e.i++}else s[o-1]++;for(;r<Math.max(0,t);r++)s.push(0);(n=s.reduceRight(function(e,t,i,n){return n[i]=(t+=e)%10,Math.floor(t/10)},0))&&(s.unshift(n),e.i++)})(a=function(e){var t,i,n,s,r,o=0;for(0<(n=(e=-1<(i=e.indexOf("."))?e.replace(".",""):e).search(/e/i))?(i<0&&(i=n),i+=+e.slice(n+1),e=e.substring(0,n)):i<0&&(i=e.length),n=0;e.charAt(n)==ls;n++);if(n==(r=e.length))t=[0],i=1;else{for(r--;e.charAt(r)==ls;)r--;for(i-=n,t=[],s=0;n<=r;n++,s++)t[s]=+e.charAt(n)}return 22<i&&(t=t.splice(0,21),o=i-1,i=1),{d:t,e:o,i:i}}(a),s,t.minFrac,t.maxFrac);for(var h=a.d,c=a.i,s=a.e,a=[],o=h.reduce(function(e,t){return e&&!t},!0);c<0;)h.unshift(0),c++;0<c?a=h.splice(c,h.length):(a=h,h=[0]);var p=[];for(h.length>=t.lgSize&&p.unshift(h.splice(-t.lgSize,h.length).join(""));h.length>t.gSize;)p.unshift(h.splice(-t.gSize,h.length).join(""));h.length&&p.unshift(h.join("")),l=p.join(i),a.length&&(l+=n+a.join("")),s&&(l+="e+"+s)}return e<0&&!o?t.negPre+l+t.negSuf:t.posPre+l+t.posSuf}function us(e,t,i,n){var s="";for((e<0||n&&e<=0)&&(n?e=1-e:(e=-e,s="-")),e=""+e;e.length<t;)e=ls+e;return s+(e=i?e.substr(e.length-t):e)}function ds(t,i,n,s,r){return n=n||0,function(e){e=e["get"+t]();return(0<n||-n<e)&&(e+=n),us(e=0===e&&-12==n?12:e,i,s,r)}}function ms(i,n,s){return function(e,t){e=e["get"+i]();return t[c((s?"STANDALONE":"")+(n?"SHORT":"")+i)][e]}}function fs(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(t<=4?5:12)-t)}function gs(i){return function(e){var t=fs(e.getFullYear()),e=(e=e,new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay())));return us(1+Math.round((+e-+t)/6048e5),i)}}function vs(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}hs.$inject=["$locale"];var ys={yyyy:ds("FullYear",4,0,!(cs.$inject=["$locale"]),!0),yy:ds("FullYear",2,0,!0,!0),y:ds("FullYear",1,0,!1,!0),MMMM:ms("Month"),MMM:ms("Month",!0),MM:ds("Month",2,1),M:ds("Month",1,1),LLLL:ms("Month",!1,!0),dd:ds("Date",2),d:ds("Date",1),HH:ds("Hours",2),H:ds("Hours",1),hh:ds("Hours",2,-12),h:ds("Hours",1,-12),mm:ds("Minutes",2),m:ds("Minutes",1),ss:ds("Seconds",2),s:ds("Seconds",1),sss:ds("Milliseconds",3),EEEE:ms("Day"),EEE:ms("Day",!0),a:function(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]},Z:function(e,t,i){var n=-1*i,i=0<=n?"+":"";return i+=us(Math[0<n?"floor":"ceil"](n/60),2)+us(Math.abs(n%60),2)},ww:gs(2),w:gs(1),G:vs,GG:vs,GGG:vs,GGGG:function(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}},bs=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,Ss=/^\-?\d+$/;function Ts(l){var h=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(t,e,i){var n,s,r="",o=[];if(e=l.DATETIME_FORMATS[e=e||"mediumDate"]||e,!x(t=P(t=U(t)?(Ss.test(t)?b:function(e){if(o=e.match(h)){var t=new Date(0),i=0,n=0,s=o[8]?t.setUTCFullYear:t.setFullYear,r=o[8]?t.setUTCHours:t.setHours;o[9]&&(i=b(o[9]+o[10]),n=b(o[9]+o[11])),s.call(t,b(o[1]),b(o[2])-1,b(o[3]));var s=b(o[4]||0)-i,i=b(o[5]||0)-n,n=b(o[6]||0),o=Math.round(1e3*parseFloat("0."+(o[7]||0)));return r.call(t,s,i,n,o),t}return e})(t):t)?new Date(t):t)||!isFinite(t.getTime()))return t;for(;e;)e=(s=bs.exec(e))?(o=j(o,s,1)).pop():(o.push(e),null);var a=t.getTimezoneOffset();return i&&(a=Q(i,a),t=Z(t,i,!0)),me(o,function(e){n=ys[e],r+=n?n(t,l.DATETIME_FORMATS,a):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),r}}function _s(){return function(e,t){return z(e,t=ve(t)?2:t)}}Ts.$inject=["$locale"];var As=C(D),Ps=C(c);function Is(){return function(e,t,i){return t=(Math.abs(Number(t))===1/0?Number:b)(t),!isNaN(t)&&N(e=P(e)?e.toString():e)?(i=(i=!i||isNaN(i)?0:b(i))<0?Math.max(0,e.length+i):i,0<=t?Cs(e,i,i+t):0===i?Cs(e,t,e.length):Cs(e,Math.max(0,i+t),i)):e}}function Cs(e,t,i){return U(e)?e.slice(t,i):o.call(e,t,i)}function xs(s){return function(e,t,i,n){if(null==e)return e;if(!N(e))throw S("orderBy")("notarray","Expected array but received: {0}",e);var r=(t=0===(t=!be(t)?[t]:t).length?["+"]:t).map(function(e){var t,i=1,n=G;return Se(e)?n=e:U(e)&&("+"!=e.charAt(0)&&"-"!=e.charAt(0)||(i="-"==e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(n=s(e)).constant&&(t=n(),n=function(e){return e[t]})),{get:n,descending:i}}),o=i?-1:1,a=Se(n)?n:h,n=Array.prototype.map.call(e,function(t,i){return{value:t,tieBreaker:{value:i,type:"number",index:i},predicateValues:r.map(function(e){return function(e,t){var i=typeof e;null===e?(i="string",e="null"):"object"===i&&(e=function(e){if(Se(e.valueOf)&&l(e=e.valueOf()))return e;if(_(e)&&l(e=e.toString()))return e;return e}(e));return{value:e,type:i,index:t}}(e.get(t),i)})}});return n.sort(function(e,t){for(var i=0,n=r.length;i<n;i++){var s=a(e.predicateValues[i],t.predicateValues[i]);if(s)return s*r[i].descending*o}return a(e.tieBreaker,t.tieBreaker)*o}),e=n.map(function(e){return e.value})};function l(e){switch(typeof e){case"number":case"boolean":case"string":return 1;default:return}}function h(e,t){var i,n,s=0,r=e.type,o=t.type;return r===o?(i=e.value,n=t.value,"string"===r?(i=i.toLowerCase(),n=n.toLowerCase()):"object"===r&&(ye(i)&&(i=e.index),ye(n)&&(n=t.index)),i!==n&&(s=i<n?-1:1)):s=r<o?-1:1,s}}function Bs(e){return(e=Se(e)?{link:e}:e).restrict=e.restrict||"AC",C(e)}xs.$inject=["$parse"];var Es=C({restrict:"E",compile:function(e,t){if(!t.href&&!t.xlinkHref)return function(e,t){var i;"a"===t[0].nodeName.toLowerCase()&&(i="[object SVGAnimatedString]"===T.call(t.prop("href"))?"xlink:href":"href",t.on("click",function(e){t.attr(i)||e.preventDefault()}))}}}),ws={};me(_t,function(e,n){var s,t;function r(e,t,i){e.$watch(i[s],function(e){i.$set(n,!!e)})}"multiple"!=e&&(s=ci("ng-"+n),t="checked"===e?function(e,t,i){i.ngModel!==i[s]&&r(e,0,i)}:r,ws[s]=function(){return{restrict:"A",priority:100,link:t}})}),me(Pt,function(e,s){ws[s]=function(){return{priority:100,link:function(e,t,i){if("ngPattern"===s&&"/"==i.ngPattern.charAt(0)){var n=i.ngPattern.match(r);if(n)return void i.$set("ngPattern",new RegExp(n[1],n[2]))}e.$watch(i[s],function(e){i.$set(s,e)})}}}}),me(["src","srcset","href"],function(r){var o=ci("ng-"+r);ws[o]=function(){return{priority:99,link:function(e,t,i){var n=r,s=r;"href"===r&&"[object SVGAnimatedString]"===T.call(t.prop("href"))&&(s="xlinkHref",i.$attr[s]="xlink:href",n=null),i.$observe(o,function(e){e?(i.$set(s,e),L&&n&&t.prop(n,i[s])):"href"===r&&i.$set(s,null)})}}}});var Rs={$addControl:k,$$renameControl:function(e,t){e.$name=t},$removeControl:k,$setValidity:k,$setDirty:k,$setPristine:k,$setSubmitted:k},Ms="ng-submitted";function Os(e,t,i,n,s){var r=this,o=[];r.$error={},r.$$success={},r.$pending=void 0,r.$name=s(t.name||t.ngForm||"")(i),r.$dirty=!1,r.$pristine=!0,r.$valid=!0,r.$invalid=!1,r.$submitted=!1,r.$$parentForm=Rs,r.$rollbackViewValue=function(){me(o,function(e){e.$rollbackViewValue()})},r.$commitViewValue=function(){me(o,function(e){e.$commitViewValue()})},r.$addControl=function(e){ue(e.$name,"input"),o.push(e),e.$name&&(r[e.$name]=e),e.$$parentForm=r},r.$$renameControl=function(e,t){var i=e.$name;r[i]===e&&delete r[i],(r[t]=e).$name=t},r.$removeControl=function(i){i.$name&&r[i.$name]===i&&delete r[i.$name],me(r.$pending,function(e,t){r.$setValidity(t,null,i)}),me(r.$error,function(e,t){r.$setValidity(t,null,i)}),me(r.$$success,function(e,t){r.$setValidity(t,null,i)}),H(o,i),i.$$parentForm=Rs},Nr({ctrl:this,$element:e,set:function(e,t,i){var n=e[t];n?-1===n.indexOf(i)&&n.push(i):e[t]=[i]},unset:function(e,t,i){var n=e[t];n&&(H(n,i),0===n.length&&delete e[t])},$animate:n}),r.$setDirty=function(){n.removeClass(e,Ar),n.addClass(e,Pr),r.$dirty=!0,r.$pristine=!1,r.$$parentForm.$setDirty()},r.$setPristine=function(){n.setClass(e,Ar,Pr+" "+Ms),r.$dirty=!1,r.$pristine=!0,r.$submitted=!1,me(o,function(e){e.$setPristine()})},r.$setUntouched=function(){me(o,function(e){e.$setUntouched()})},r.$setSubmitted=function(){n.addClass(e,Ms),r.$submitted=!0,r.$$parentForm.$setSubmitted()}}Os.$inject=["$element","$attrs","$scope","$animate","$interpolate"];function Ns(i){return["$timeout","$parse",function(l,t){return{name:"form",restrict:i?"EAC":"E",require:["form","^^?form"],controller:Os,compile:function(e,t){e.addClass(Ar).addClass(Tr);var a=t.name?"name":!(!i||!t.ngForm)&&"ngForm";return{pre:function(t,e,i,n){var s,r=n[0];"action"in i||(Ue(e[0],"submit",s=function(e){t.$apply(function(){r.$commitViewValue(),r.$setSubmitted()}),e.preventDefault()}),e.on("$destroy",function(){l(function(){$e(e[0],"submit",s)},0,!1)})),(n[1]||r.$$parentForm).$addControl(r);var o=a?h(r.$name):k;a&&(o(t,r),i.$observe(a,function(e){r.$name!==e&&(o(t,void 0),r.$$parentForm.$$renameControl(r,e),(o=h(r.$name))(t,r))})),e.on("$destroy",function(){r.$$parentForm.$removeControl(r),o(t,void 0),fe(r,Rs)})}}}};function h(e){return""===e?t('this[""]').assign:t(e).assign||k}}]}var Fs=Ns(),Ds=Ns(!0),Ls=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,ks=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Gs=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Ws=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Us=/^(\d{4,})-(\d{2})-(\d{2})$/,Vs=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Hs=/^(\d{4,})-W(\d\d)$/,$s=/^(\d{4,})-(\d\d)$/,e=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Xs="keydown wheel mousedown",Ys=Me();me("date,datetime-local,month,time,week".split(","),function(e){Ys[e]=!0});var js={text:function(e,t,i,n,s,r){qs(0,t,i,n,s,r),zs(n)},date:Qs("date",Us,Ks(Us,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":Qs("datetimelocal",Vs,Ks(Vs,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:Qs("time",e,Ks(e,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:Qs("week",Hs,function(e,t){if(x(e))return e;if(U(e)){Hs.lastIndex=0;var i=Hs.exec(e);if(i){var n=+i[1],s=+i[2],r=0,o=0,a=0,e=0,i=fs(n),s=7*(s-1);return t&&(r=t.getHours(),o=t.getMinutes(),a=t.getSeconds(),e=t.getMilliseconds()),new Date(n,0,i.getDate()+s,r,o,a,e)}}return NaN},"yyyy-Www"),month:Qs("month",$s,Ks($s,["yyyy","MM"]),"yyyy-MM"),number:function(e,t,i,n,s,r){{var o;Zs(0,t,0,n),qs(0,t,i,n,s,r),n.$$parserName="number",n.$parsers.push(function(e){return n.$isEmpty(e)?null:Ws.test(e)?parseFloat(e):void 0}),n.$formatters.push(function(e){if(!n.$isEmpty(e)){if(!P(e))throw wr("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e}),(W(i.min)||i.ngMin)&&(n.$validators.min=function(e){return n.$isEmpty(e)||ve(o)||o<=e},i.$observe("min",function(e){W(e)&&!P(e)&&(e=parseFloat(e,10)),o=P(e)&&!isNaN(e)?e:void 0,n.$validate()}))}{var a;(W(i.max)||i.ngMax)&&(n.$validators.max=function(e){return n.$isEmpty(e)||ve(a)||e<=a},i.$observe("max",function(e){W(e)&&!P(e)&&(e=parseFloat(e,10)),a=P(e)&&!isNaN(e)?e:void 0,n.$validate()}))}},url:function(e,t,i,n,s,r){qs(0,t,i,n,s,r),zs(n),n.$$parserName="url",n.$validators.url=function(e,t){t=e||t;return n.$isEmpty(t)||ks.test(t)}},email:function(e,t,i,n,s,r){qs(0,t,i,n,s,r),zs(n),n.$$parserName="email",n.$validators.email=function(e,t){t=e||t;return n.$isEmpty(t)||Gs.test(t)}},radio:function(e,t,i,n){ve(i.name)&&t.attr("name",++h);t.on("click",function(e){t[0].checked&&n.$setViewValue(i.value,e&&e.type)}),n.$render=function(){var e=i.value;t[0].checked=e==n.$viewValue},i.$observe("value",n.$render)},checkbox:function(e,t,i,n,s,r,o,a){var l=Js(a,e,"ngTrueValue",i.ngTrueValue,!0),h=Js(a,e,"ngFalseValue",i.ngFalseValue,!1);t.on("click",function(e){n.$setViewValue(t[0].checked,e&&e.type)}),n.$render=function(){t[0].checked=n.$viewValue},n.$isEmpty=function(e){return!1===e},n.$formatters.push(function(e){return Pe(e,l)}),n.$parsers.push(function(e){return e?l:h})},hidden:k,button:k,submit:k,reset:k,file:k};function zs(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function qs(e,i,n,s,t,r){var o,a,l=D(i[0].type);t.android||(o=!1,i.on("compositionstart",function(){o=!0}),i.on("compositionend",function(){o=!1,c()}));var h,c=function(e){var t;a&&(r.defer.cancel(a),a=null),o||(t=i.val(),e=e&&e.type,"password"===l||n.ngTrim&&"false"===n.ngTrim||(t=_e(t)),(s.$viewValue!==t||""===t&&s.$$hasNativeValidators)&&s.$setViewValue(t,e))};t.hasEvent("input")?i.on("input",c):(h=function(e,t,i){a=a||r.defer(function(){a=null,t&&t.value===i||c(e)})},i.on("keydown",function(e){var t=e.keyCode;91===t||15<t&&t<19||37<=t&&t<=40||h(e,this,this.value)}),t.hasEvent("paste")&&i.on("paste cut",h)),i.on("change",c),Ys[l]&&s.$$hasNativeValidators&&l===n.type&&i.on(Xs,function(e){var t,i,n;a||(t=this[p],i=t.badInput,n=t.typeMismatch,a=r.defer(function(){a=null,t.badInput===i&&t.typeMismatch===n||c(e)}))}),s.$render=function(){var e=s.$isEmpty(s.$viewValue)?"":s.$viewValue;i.val()!==e&&i.val(e)}}function Ks(n,s){return function(e,t){var i;if(x(e))return e;if(U(e)){if('"'==e.charAt(0)&&'"'==e.charAt(e.length-1)&&(e=e.substring(1,e.length-1)),Ls.test(e))return new Date(e);if(n.lastIndex=0,e=n.exec(e))return e.shift(),i=t?{yyyy:t.getFullYear(),MM:t.getMonth()+1,dd:t.getDate(),HH:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds(),sss:t.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},me(e,function(e,t){t<s.length&&(i[s[t]]=+e)}),new Date(i.yyyy,i.MM-1,i.dd,i.HH,i.mm,i.ss||0,1e3*i.sss||0)}return NaN}}function Qs(d,m,f,g){return function(e,t,i,n,s,r,o){Zs(0,t,0,n),qs(0,t,i,n,s,r);var a,l,h,c=n&&n.$options&&n.$options.timezone;function p(e){return e&&(!e.getTime||e.getTime()===e.getTime())}function u(e){return W(e)&&!x(e)?f(e)||void 0:e}n.$$parserName=d,n.$parsers.push(function(e){if(n.$isEmpty(e))return null;if(m.test(e)){e=f(e,a);return e=c?Z(e,c):e}}),n.$formatters.push(function(e){if(e&&!x(e))throw wr("datefmt","Expected `{0}` to be a date",e);return p(e)?((a=e)&&c&&(a=Z(a,c,!0)),o("date")(e,g,c)):(a=null,"")}),(W(i.min)||i.ngMin)&&(n.$validators.min=function(e){return!p(e)||ve(l)||f(e)>=l},i.$observe("min",function(e){l=u(e),n.$validate()})),(W(i.max)||i.ngMax)&&(n.$validators.max=function(e){return!p(e)||ve(h)||f(e)<=h},i.$observe("max",function(e){h=u(e),n.$validate()}))}}function Zs(e,i,t,n){var s=i[0];(n.$$hasNativeValidators=ye(s.validity))&&n.$parsers.push(function(e){var t=i.prop(p)||{};return t.badInput||t.typeMismatch?void 0:e})}function Js(e,t,i,n,s){if(W(n)){if(!(e=e(n)).constant)throw wr("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",i,n);return e(t)}return s}function er(){return{restrict:"A",priority:100,compile:function(e,t){return ir.test(t.ngValue)?function(e,t,i){i.$set("value",e.$eval(i.ngValue))}:function(e,t,i){e.$watch(i.ngValue,function(e){i.$set("value",e)})}}}}var tr=["$browser","$sniffer","$filter","$parse",function(s,r,o,a){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,t,i,n){n[0]&&(js[D(i.type)]||js.text)(e,t,i,n[0],r,s,o,a)}}}}],ir=/^(true|false|\d+)$/,nr=["$compile",function(n){return{restrict:"AC",compile:function(e){return n.$$addBindingClass(e),function(e,t,i){n.$$addBindingInfo(t,i.ngBind),t=t[0],e.$watch(i.ngBind,function(e){t.textContent=ve(e)?"":e})}}}}],sr=["$interpolate","$compile",function(s,r){return{compile:function(e){return r.$$addBindingClass(e),function(e,t,i){var n=s(t.attr(i.$attr.ngBindTemplate));r.$$addBindingInfo(t,n.expressions),t=t[0],i.$observe("ngBindTemplate",function(e){t.textContent=ve(e)?"":e})}}}}],rr=["$sce","$parse","$compile",function(r,i,o){return{restrict:"A",compile:function(e,t){var n=i(t.ngBindHtml),s=i(t.ngBindHtml,function(e){return r.valueOf(e)});return o.$$addBindingClass(e),function(t,i,e){o.$$addBindingInfo(i,e.ngBindHtml),t.$watch(s,function(){var e=n(t);i.html(r.getTrustedHtml(e)||"")})}}}}],or=C({restrict:"A",require:"ngModel",link:function(e,t,i,n){n.$viewChangeListeners.push(function(){e.$eval(i.ngChange)})}});function ar(n,d){return n="ngClass"+n,["$animate",function(c){return{restrict:"AC",link:function(r,o,i){var a;function l(e){e=h(e,1);i.$addClass(e)}function h(e,t){var i=o.data("$classCounts")||Me(),n=[];return me(e,function(e){(0<t||i[e])&&(i[e]=(i[e]||0)+t,i[e]===+(0<t)&&n.push(e))}),o.data("$classCounts",i),n.join(" ")}function t(e){var t,i,n,s;!0!==d&&(1&r.$index)!==d||(t=u(e||[]),a?Pe(e,a)||(s=u(a),s=p(n=t,i=s),n=p(i,n),s=h(s,1),n=h(n,-1),s&&s.length&&c.addClass(o,s),n&&n.length&&c.removeClass(o,n)):l(t)),a=be(e)?e.map(function(e){return ke(e)}):ke(e)}r.$watch(i[n],t,!0),i.$observe("class",function(e){t(r.$eval(i[n]))}),"ngClass"!==n&&r.$watch("$index",function(e,t){e&=1;e!=(1&t)&&(t=u(r.$eval(i[n])),(e===d?l:function(e){e=h(e,-1);i.$removeClass(e)})(t))})}};function p(e,t){var i=[];e:for(var n=0;n<e.length;n++){for(var s=e[n],r=0;r<t.length;r++)if(s==t[r])continue e;i.push(s)}return i}function u(e){var i=[];return be(e)?(me(e,function(e){i=i.concat(u(e))}),i):U(e)?e.split(" "):ye(e)?(me(e,function(e,t){e&&(i=i.concat(t.split(" ")))}),i):e}}]}var lr=ar("",!0),hr=ar("Odd",0),cr=ar("Even",1),pr=Bs({compile:function(e,t){t.$set("ngCloak",void 0),e.removeClass("ng-cloak")}}),ur=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],dr={},mr={blur:!0,focus:!0};me("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(r){var o=ci("ng-"+r);dr[o]=["$parse","$rootScope",function(i,s){return{restrict:"A",compile:function(e,t){var n=i(t[o],null,!0);return function(i,e){e.on(r,function(e){function t(){n(i,{$event:e})}mr[r]&&s.$$phase?i.$evalAsync(t):i.$apply(t)})}}}}]});function fr(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,i,n){var s=t.attr(i.$attr.ngList)||", ",r="false"!==i.ngTrim,o=r?_e(s):s;n.$parsers.push(function(e){if(!ve(e)){var t=[];return e&&me(e.split(o),function(e){e&&t.push(r?_e(e):e)}),t}}),n.$formatters.push(function(e){if(be(e))return e.join(s)}),n.$isEmpty=function(e){return!e||!e.length}}}}function gr(){return{restrict:"A",controller:["$scope","$attrs",function(e,t){var i=this;this.$options=$(e.$eval(t.ngModelOptions)),W(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=_e(this.$options.updateOn.replace(Or,function(){return i.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}}var vr=["$animate","$compile",function(l,h){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(e,i,n,t,s){var r,o,a;e.$watch(n.ngIf,function(e){e?o||s(function(e,t){o=t,e[e.length++]=h.$$createComment("end ngIf",n.ngIf),r={clone:e},l.enter(e,i.parent(),i)}):(a&&(a.remove(),a=null),o&&(o.$destroy(),o=null),r&&(a=Re(r.clone),l.leave(a).then(function(){a=null}),r=null))})}}}],yr=["$templateRequest","$anchorScroll","$animate",function(f,g,v){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:I.noop,compile:function(e,t){var i=t.ngInclude||t.src,d=t.onload||"",m=t.autoscroll;return function(r,o,e,a,l){function h(){t&&(t.remove(),t=null),c&&(c.$destroy(),c=null),p&&(v.leave(p).then(function(){t=null}),t=p,p=null)}var c,t,p,u=0;r.$watch(i,function(i){function n(){!W(m)||m&&!r.$eval(m)||g()}var s=++u;i?(f(i,!0).then(function(e){var t;r.$$destroyed||s===u&&(t=r.$new(),a.template=e,e=l(t,function(e){h(),v.enter(e,null,o).then(n)}),p=e,(c=t).$emit("$includeContentLoaded",i),r.$eval(d))},function(){r.$$destroyed||s===u&&(h(),r.$emit("$includeContentError",i))}),r.$emit("$includeContentRequested",i)):(h(),a.template=null)})}}}}],br=["$compile",function(s){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(e,t,i,n){if(T.call(t[0]).match(/SVG/))return t.empty(),void s(nt(n.template,g.document).childNodes)(e,function(e){t.append(e)},{futureParentElement:t});t.html(n.template),s(t.contents())(e)}}}],Sr=Bs({priority:450,compile:function(){return{pre:function(e,t,i){e.$eval(i.ngInit)}}}}),Tr="ng-valid",_r="ng-invalid",Ar="ng-pristine",Pr="ng-dirty",Ir="ng-untouched",Cr="ng-touched",xr="ng-pending",Br="ng-empty",Er="ng-not-empty",wr=S("ngModel"),Rr=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(r,t,s,o,a,i,n,l,h,e){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=e(s.name||"",!1)(r),this.$$parentForm=Rs;var c,p=a(s.ngModel),u=p.assign,d=p,m=u,f=null,g=this;this.$$setOptions=function(e){if((g.$options=e)&&e.getterSetter){var i=a(s.ngModel+"()"),n=a(s.ngModel+"($$$p)");d=function(e){var t=p(e);return t=Se(t)?i(e):t},m=function(e,t){Se(p(e))?n(e,{$$$p:t}):u(e,t)}}else if(!p.assign)throw wr("nonassign","Expression '{0}' is non-assignable. Element: {1}",s.ngModel,xe(o))},this.$render=k,this.$isEmpty=function(e){return ve(e)||""===e||null===e||e!=e},this.$$updateEmptyClasses=function(e){g.$isEmpty(e)?(i.removeClass(o,Er),i.addClass(o,Br)):(i.removeClass(o,Br),i.addClass(o,Er))};var v=0;Nr({ctrl:this,$element:o,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]},$animate:i}),this.$setPristine=function(){g.$dirty=!1,g.$pristine=!0,i.removeClass(o,Pr),i.addClass(o,Ar)},this.$setDirty=function(){g.$dirty=!0,g.$pristine=!1,i.removeClass(o,Ar),i.addClass(o,Pr),g.$$parentForm.$setDirty()},this.$setUntouched=function(){g.$touched=!1,g.$untouched=!0,i.setClass(o,Ir,Cr)},this.$setTouched=function(){g.$touched=!0,g.$untouched=!1,i.setClass(o,Cr,Ir)},this.$rollbackViewValue=function(){n.cancel(f),g.$viewValue=g.$$lastCommittedViewValue,g.$render()},this.$validate=function(){var e,t,i,n,s;P(g.$modelValue)&&isNaN(g.$modelValue)||(e=g.$$lastCommittedViewValue,t=g.$$rawModelValue,i=g.$valid,n=g.$modelValue,s=g.$options&&g.$options.allowInvalid,g.$$runValidators(t,e,function(e){s||i===e||(g.$modelValue=e?t:void 0,g.$modelValue!==n&&g.$$writeModelToScope())}))},this.$$runValidators=function(i,n,t){var s,r,o,a=++v;function l(e,t){a===v&&g.$setValidity(e,t)}function e(e){a===v&&t(e)}!function(){var e=g.$$parserName||"parse";{if(!ve(c))return c||(me(g.$validators,function(e,t){l(t,null)}),me(g.$asyncValidators,function(e,t){l(t,null)})),l(e,c),c;l(e,null)}return!0}()?e(!1):(s=!0,me(g.$validators,function(e,t){e=e(i,n);s=s&&e,l(t,e)}),s||(me(g.$asyncValidators,function(e,t){l(t,null)}),0)?(r=[],o=!0,me(g.$asyncValidators,function(e,t){e=e(i,n);if(!w(e))throw wr("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",e);l(t,void 0),r.push(e.then(function(){l(t,!0)},function(){l(t,o=!1)}))}),r.length?h.all(r).then(function(){e(o)},k):e(!0)):e(!1))},this.$commitViewValue=function(){var e=g.$viewValue;n.cancel(f),(g.$$lastCommittedViewValue!==e||""===e&&g.$$hasNativeValidators)&&(g.$$updateEmptyClasses(e),g.$$lastCommittedViewValue=e,g.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){var t=g.$$lastCommittedViewValue;if(c=!ve(t)||void 0)for(var e=0;e<g.$parsers.length;e++)if(ve(t=g.$parsers[e](t))){c=!1;break}P(g.$modelValue)&&isNaN(g.$modelValue)&&(g.$modelValue=d(r));var i=g.$modelValue,n=g.$options&&g.$options.allowInvalid;function s(){g.$modelValue!==i&&g.$$writeModelToScope()}g.$$rawModelValue=t,n&&(g.$modelValue=t,s()),g.$$runValidators(t,g.$$lastCommittedViewValue,function(e){n||(g.$modelValue=e?t:void 0,s())})},this.$$writeModelToScope=function(){m(r,g.$modelValue),me(g.$viewChangeListeners,function(e){try{e()}catch(e){t(e)}})},this.$setViewValue=function(e,t){g.$viewValue=e,g.$options&&!g.$options.updateOnDefault||g.$$debounceViewValueCommit(t)},this.$$debounceViewValueCommit=function(e){var t=0,i=g.$options;i&&W(i.debounce)&&(P(i=i.debounce)?t=i:P(i[e])?t=i[e]:P(i.default)&&(t=i.default)),n.cancel(f),t?f=n(function(){g.$commitViewValue()},t):l.$$phase?g.$commitViewValue():r.$apply(function(){g.$commitViewValue()})},r.$watch(function(){var e=d(r);if(e!==g.$modelValue&&(g.$modelValue==g.$modelValue||e==e)){g.$modelValue=g.$$rawModelValue=e,c=void 0;for(var t=g.$formatters,i=t.length,n=e;i--;)n=t[i](n);g.$viewValue!==n&&(g.$$updateEmptyClasses(n),g.$viewValue=g.$$lastCommittedViewValue=n,g.$render(),g.$$runValidators(e,n,k))}return e})}],Mr=["$rootScope",function(r){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Rr,priority:1,compile:function(e){return e.addClass(Ar).addClass(Ir).addClass(Tr),{pre:function(e,t,i,n){var s=n[0],r=n[1]||s.$$parentForm;s.$$setOptions(n[2]&&n[2].$options),r.$addControl(s),i.$observe("name",function(e){s.$name!==e&&s.$$parentForm.$$renameControl(s,e)}),e.$on("$destroy",function(){s.$$parentForm.$removeControl(s)})},post:function(e,t,i,n){var s=n[0];s.$options&&s.$options.updateOn&&t.on(s.$options.updateOn,function(e){s.$$debounceViewValueCommit(e&&e.type)}),t.on("blur",function(){s.$touched||(r.$$phase?e.$evalAsync(s.$setTouched):e.$apply(s.$setTouched))})}}}}}],Or=/(\s+|^)default(\s+|$)/;function Nr(e){var n=e.ctrl,i=e.$element,s={},r=e.set,o=e.unset,a=e.$animate;function l(e,t){t&&!s[e]?(a.addClass(i,e),s[e]=!0):!t&&s[e]&&(a.removeClass(i,e),s[e]=!1)}function h(e,t){e=e?"-"+Be(e,"-"):"",l(Tr+e,!0===t),l(_r+e,!1===t)}s[_r]=!(s[Tr]=i.hasClass(Tr)),n.$setValidity=function(e,t,i){(ve(t)?function(e,t,i){n[e]||(n[e]={});r(n[e],t,i)}:function(e,t,i){n[e]&&o(n[e],t,i);Fr(n[e])&&(n[e]=void 0)})("$pending",e,i);V(t)?t?(o(n.$error,e,i),r(n.$$success,e,i)):(r(n.$error,e,i),o(n.$$success,e,i)):(o(n.$error,e,i),o(n.$$success,e,i));n.$pending?(l(xr,!0),n.$valid=n.$invalid=void 0,h("",null)):(l(xr,!1),n.$valid=Fr(n.$error),n.$invalid=!n.$valid,h("",n.$valid));i=n.$pending&&n.$pending[e]?void 0:!n.$error[e]&&(!!n.$$success[e]||null);h(e,i),n.$$parentForm.$setValidity(e,i,n)}}function Fr(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var Dr=Bs({terminal:!0,priority:1e3}),Lr=S("ngOptions"),kr=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Gr=["$compile","$document","$parse",function(S,T,o){function _(e,t,h){var a=e.match(kr);if(!a)throw Lr("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",e,xe(t));function c(e,t){return d(e,y(e,t))}var i=a[5]||a[7],n=a[6],e=/ as /.test(a[0])&&a[1],p=a[9],t=o(a[2]?a[1]:i),u=e&&o(e)||t,s=p&&o(p),d=p?function(e,t){return s(h,t)}:function(e){return Rt(e)},m=o(a[2]||a[1]),f=o(a[3]||""),g=o(a[4]||""),v=o(a[8]),r={},y=n?function(e,t){return r[n]=t,r[i]=e,r}:function(e){return r[i]=e,r};function b(e,t,i,n,s){this.selectValue=e,this.viewValue=t,this.label=i,this.group=n,this.disabled=s}function S(e){var t;if(!n&&N(e))t=e;else for(var i in t=[],e)e.hasOwnProperty(i)&&"$"!==i.charAt(0)&&t.push(i);return t}return{trackBy:p,getTrackByValue:c,getWatchables:o(v,function(e){for(var t=[],i=S(e=e||[]),n=i.length,s=0;s<n;s++){var r=e===i?s:i[s],o=e[r],r=y(o,r),o=d(o,r);t.push(o),(a[2]||a[1])&&(o=m(h,r),t.push(o)),a[4]&&(r=g(h,r),t.push(r))}return t}),getOptions:function(){for(var e=[],t={},i=v(h)||[],n=S(i),s=n.length,r=0;r<s;r++){var o=i===n?r:n[r],a=i[o],l=y(a,o),a=u(h,l),o=d(a,l),l=new b(o,a,m(h,l),f(h,l),g(h,l));e.push(l),t[o]=l}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[c(e)]},getViewValueFromOption:function(e){return p?I.copy(e.viewValue):e.viewValue}}}}}var A=g.document.createElement("option"),P=g.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(e,t,i,n){n[0].registerOption=k},post:function(e,r,t,i){for(var o,a=i[0],l=i[1],h=t.multiple,n=0,s=r.children(),c=s.length;n<c;n++)if(""===s[n].value){o=s.eq(n);break}var p,u=!!o,d=de(A.cloneNode(!1));function m(){u||o.remove()}function f(){d.remove()}d.val("?");var g=_(t.ngOptions,r,e),v=T[0].createDocumentFragment();function y(e,t){var i=A.cloneNode(!1);t.appendChild(i),function(e,t){(e.element=t).disabled=e.disabled,e.label!==t.label&&(t.label=e.label,t.textContent=e.label);e.value!==t.value&&(t.value=e.selectValue)}(e,i)}function b(){var e=p&&a.readValue();if(p)for(var t=p.items.length-1;0<=t;t--){var i=p.items[t];i.group?St(i.element.parentNode):St(i.element)}p=g.getOptions();var n,s={};u&&r.prepend(o),p.items.forEach(function(e){var t;W(e.group)?((t=s[e.group])||(t=P.cloneNode(!1),v.appendChild(t),t.label=e.group,s[e.group]=t),y(e,t)):y(e,v)}),r[0].appendChild(v),l.$render(),l.$isEmpty(e)||(n=a.readValue(),(g.trackBy||h?Pe(e,n):e===n)||(l.$setViewValue(n),l.$render()))}h?(l.$isEmpty=function(e){return!e||0===e.length},a.writeValue=function(e){p.items.forEach(function(e){e.element.selected=!1}),e&&e.forEach(function(e){e=p.getOptionFromViewValue(e);e&&(e.element.selected=!0)})},a.readValue=function(){var e=r.val()||[],t=[];return me(e,function(e){e=p.selectValueMap[e];e&&!e.disabled&&t.push(p.getViewValueFromOption(e))}),t},g.trackBy&&e.$watchCollection(function(){if(be(l.$viewValue))return l.$viewValue.map(function(e){return g.getTrackByValue(e)})},function(){l.$render()})):(a.writeValue=function(e){var t=p.getOptionFromViewValue(e);t?(r[0].value!==t.selectValue&&(f(),m(),r[0].value=t.selectValue,t.element.selected=!0),t.element.setAttribute("selected","selected")):null===e||u?(f(),u||r.prepend(o),r.val(""),o.prop("selected",!0),o.attr("selected",!0)):(m(),r.prepend(d),r.val("?"),d.prop("selected",!0),d.attr("selected",!0))},a.readValue=function(){var e=p.selectValueMap[r.val()];return e&&!e.disabled?(m(),f(),p.getViewValueFromOption(e)):null},g.trackBy&&e.$watch(function(){return g.getTrackByValue(l.$viewValue)},function(){l.$render()})),u?(o.remove(),S(o)(e),o.removeClass("ng-scope")):o=de(A.cloneNode(!1)),r.empty(),b(),e.$watchCollection(g.getWatchables,b)}}}}],Wr=["$locale","$interpolate","$log",function(m,f,g){var v=/{}/g,y=/^when(Minus)?(.+)$/;return{link:function(n,s,r){var o,e=r.count,a=r.$attr.when&&s.attr(r.$attr.when),l=r.offset||0,h=n.$eval(a)||{},c={},t=f.startSymbol(),i=f.endSymbol(),p=t+e+"-"+l+i,u=I.noop;function d(e){s.text(e||"")}me(r,function(e,t){var i=y.exec(t);i&&(i=(i[1]?"-":"")+D(i[2]),h[i]=s.attr(r.$attr[t]))}),me(h,function(e,t){c[t]=f(e.replace(v,p))}),n.$watch(e,function(e){var t=parseFloat(e),i=isNaN(t);(t=!(i||t in h)?m.pluralCat(t-l):t)===o||i&&P(o)&&isNaN(o)||(u(),ve(i=c[t])?(null!=e&&g.debug("ngPluralize: no rule defined for '"+t+"' in "+a),u=k,d()):u=n.$watch(i,d),o=t)})}}}],Ur=["$parse","$animate","$compile",function(a,w,l){function R(e,t,i,n,s,r,o){e[i]=n,s&&(e[s]=r),e.$index=t,e.$first=0===t,e.$last=t===o-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0==(1&t))}var M="$$NG_REMOVED",O=S("ngRepeat");return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(e,t){var _=t.ngRepeat,A=l.$$createComment("end ngRepeat",_),i=_.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!i)throw O("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",_);var n=i[1],s=i[2],P=i[3],t=i[4];if(!(i=n.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/)))throw O("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",n);var r,I,C,x,B=i[3]||i[1],E=i[2];if(P&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(P)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(P)))throw O("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",P);var o={$id:Rt};return t?r=a(t):(C=function(e,t){return Rt(t)},x=function(e){return e}),function(y,b,e,t,S){r&&(I=function(e,t,i){return E&&(o[E]=e),o[B]=t,o.$index=i,r(y,o)});var T=Me();y.$watchCollection(s,function(e){var i,t,n,s,r,o,a,l,h,c,p,u,d,m,f=b[0],g=Me();if(P&&(y[P]=e),N(e))h=e,l=I||C;else for(var v in l=I||x,h=[],e)F.call(e,v)&&"$"!==v.charAt(0)&&h.push(v);for(s=h.length,p=new Array(s),i=0;i<s;i++)if(r=e===h?i:h[i],o=e[r],a=l(r,o,i),T[a])c=T[a],delete T[a],g[a]=c,p[i]=c;else{if(g[a])throw me(p,function(e){e&&e.scope&&(T[e.id]=e)}),O("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",_,a,o);p[i]={id:a,scope:void 0,clone:void 0},g[a]=!0}for(d in T){if(u=Re((c=T[d]).clone),w.leave(u),u[0].parentNode)for(i=0,t=u.length;i<t;i++)u[i][M]=!0;c.scope.$destroy()}for(i=0;i<s;i++)if(r=e===h?i:h[i],o=e[r],(c=p[i]).scope){for(n=f;(n=n.nextSibling)&&n[M];);c.clone[0]!=n&&w.move(Re(c.clone),null,f),f=(m=c).clone[m.clone.length-1],R(c.scope,i,B,o,E,r,s)}else S(function(e,t){c.scope=t;t=A.cloneNode(!1);e[e.length++]=t,w.enter(e,null,f),f=t,c.clone=e,g[c.id]=c,R(c.scope,i,B,o,E,r,s)});T=g})}}}}],Vr="ng-hide",Hr="ng-hide-animate",$r=["$animate",function(n){return{restrict:"A",multiElement:!0,link:function(e,t,i){e.$watch(i.ngShow,function(e){n[e?"removeClass":"addClass"](t,Vr,{tempClasses:Hr})})}}}],Xr=["$animate",function(n){return{restrict:"A",multiElement:!0,link:function(e,t,i){e.$watch(i.ngHide,function(e){n[e?"addClass":"removeClass"](t,Vr,{tempClasses:Hr})})}}}],Yr=Bs(function(e,i,t){e.$watch(t.ngStyle,function(e,t){t&&e!==t&&me(t,function(e,t){i.css(t,"")}),e&&i.css(e)},!0)}),jr=["$animate","$compile",function(h,c){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(e,t,i,s){var r,i=i.ngSwitch||i.on,o=[],a=[],l=[];e.$watch(i,function(e){for(var t=0,i=a.length;t<i;++t)h.cancel(a[t]);for(t=a.length=0,i=l.length;t<i;++t){var n=Re(o[t].clone);l[t].$destroy(),(a[t]=h.leave(n)).then(function(e,t){return function(){e.splice(t,1)}}(a,t))}o.length=0,l.length=0,(r=s.cases["!"+e]||s.cases["?"])&&me(r,function(i){i.transclude(function(e,t){l.push(t);t=i.element;e[e.length++]=c.$$createComment("end ngSwitchWhen"),o.push({clone:e}),h.enter(e,t.parent(),t)})})})}}}],zr=Bs({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,i,n,s){n.cases["!"+i.ngSwitchWhen]=n.cases["!"+i.ngSwitchWhen]||[],n.cases["!"+i.ngSwitchWhen].push({transclude:s,element:t})}}),qr=Bs({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,i,n,s){n.cases["?"]=n.cases["?"]||[],n.cases["?"].push({transclude:s,element:t})}}),Kr=S("ngTransclude"),Qr=Bs({restrict:"EAC",link:function(e,t,i,n,s){if(i.ngTransclude===i.$attr.ngTransclude&&(i.ngTransclude=""),!s)throw Kr("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",xe(t));s(function(e){e.length&&(t.empty(),t.append(e))},null,i.ngTransclude||i.ngTranscludeSlot)}}),Zr=["$templateCache",function(i){return{restrict:"E",terminal:!0,compile:function(e,t){"text/ng-template"==t.type&&(t=t.id,e=e[0].text,i.put(t,e))}}}],Jr={$setViewValue:k,$render:k};function eo(){return{restrict:"E",require:["select","?ngModel"],controller:oo,priority:1,link:{pre:function(e,i,t,n){var s,r,o,a=n[1];a&&((s=n[0]).ngModelCtrl=a,i.on("change",function(){e.$apply(function(){a.$setViewValue(s.readValue())})}),t.multiple&&(s.readValue=function(){var t=[];return me(i.find("option"),function(e){e.selected&&t.push(e.value)}),t},s.writeValue=function(e){var t=new Mt(e);me(i.find("option"),function(e){e.selected=W(t.get(e.value))})},o=NaN,e.$watch(function(){o!==a.$viewValue||Pe(r,a.$viewValue)||(r=ke(a.$viewValue),a.$render()),o=a.$viewValue}),a.$isEmpty=function(e){return!e||0===e.length}))},post:function(e,t,i,n){var s,r=n[1];r&&(s=n[0],r.$render=function(){s.writeValue(r.$viewValue)})}}}}function to(){return{restrict:"A",require:"?ngModel",link:function(e,t,i,n){n&&(i.required=!0,n.$validators.required=function(e,t){return!i.required||!n.$isEmpty(t)},i.$observe("required",function(){n.$validate()}))}}}function io(){return{restrict:"A",require:"?ngModel",link:function(e,t,i,n){var s,r;n&&(r=i.ngPattern||i.pattern,i.$observe("pattern",function(e){if((e=U(e)&&0<e.length?new RegExp("^"+e+"$"):e)&&!e.test)throw S("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",r,e,xe(t));s=e||void 0,n.$validate()}),n.$validators.pattern=function(e,t){return n.$isEmpty(t)||ve(s)||s.test(t)})}}}function no(){return{restrict:"A",require:"?ngModel",link:function(e,t,i,n){var s;n&&(s=-1,i.$observe("maxlength",function(e){e=b(e);s=isNaN(e)?-1:e,n.$validate()}),n.$validators.maxlength=function(e,t){return s<0||n.$isEmpty(t)||t.length<=s})}}}function so(){return{restrict:"A",require:"?ngModel",link:function(e,t,i,n){var s;n&&(s=0,i.$observe("minlength",function(e){s=b(e)||0,n.$validate()}),n.$validators.minlength=function(e,t){return n.$isEmpty(t)||t.length>=s})}}}var ro,oo=["$element","$scope",function(t,e){var o=this,n=new Mt;o.ngModelCtrl=Jr,o.unknownOption=de(g.document.createElement("option")),o.renderUnknownOption=function(e){e="? "+Rt(e)+" ?";o.unknownOption.val(e),t.prepend(o.unknownOption),t.val(e)},e.$on("$destroy",function(){o.renderUnknownOption=k}),o.removeUnknownOption=function(){o.unknownOption.parent()&&o.unknownOption.remove()},o.readValue=function(){return o.removeUnknownOption(),t.val()},o.writeValue=function(e){o.hasOption(e)?(o.removeUnknownOption(),t.val(e),""===e&&o.emptyOption.prop("selected",!0)):null==e&&o.emptyOption?(o.removeUnknownOption(),t.val("")):o.renderUnknownOption(e)},o.addOption=function(e,t){var i;t[0].nodeType!==Fe&&(ue(e,'"option value"'),""===e&&(o.emptyOption=t),i=n.get(e)||0,n.put(e,i+1),o.ngModelCtrl.$render(),(t=t)[0].hasAttribute("selected")&&(t[0].selected=!0))},o.removeOption=function(e){var t=n.get(e);t&&(1===t?(n.remove(e),""===e&&(o.emptyOption=void 0)):n.put(e,t-1))},o.hasOption=function(e){return!!n.get(e)},o.registerOption=function(e,i,n,t,s){var r;t?n.$observe("value",function(e){W(r)&&o.removeOption(r),r=e,o.addOption(e,i)}):s?e.$watch(s,function(e,t){n.$set("value",e),t!==e&&o.removeOption(t),o.addOption(e,i)}):o.addOption(n.value,i),i.on("$destroy",function(){o.removeOption(n.value),o.ngModelCtrl.$render()})}}],ao=["$interpolate",function(i){return{restrict:"E",priority:100,compile:function(e,t){var r,o;return W(t.value)?r=i(t.value,!0):(o=i(e.text(),!0))||t.$set("value",e.text()),function(e,t,i){var n="$selectController",s=t.parent(),n=s.data(n)||s.parent().data(n);n&&n.registerOption(e,t,i,r,o)}}}}],lo=C({restrict:"E",terminal:!1});g.angular.bootstrap?g.console&&console.log("WARNING: Tried to load angular more than once."):(ce||($s=Y(),(s=ve($s)?g.jQuery:$s?g[$s]:void 0)&&s.fn.on?(fe((de=s).fn,{scope:Tt.scope,isolateScope:Tt.isolateScope,controller:Tt.controller,injector:Tt.injector,inheritedData:Tt.inheritedData}),ro=s.cleanData,s.cleanData=function(e){for(var t,i,n=0;null!=(i=e[n]);n++)(t=s._data(i,"events"))&&t.$destroy&&s(i).triggerHandler("$destroy");ro(e)}):de=ot,I.element=de,ce=!0),fe(I,{bootstrap:oe,copy:$,extend:fe,merge:t,equals:Pe,element:de,forEach:me,injector:Vt,noop:k,bind:Ce,toJson:z,fromJson:q,identity:G,isUndefined:ve,isDefined:W,isString:U,isFunction:Se,isObject:ye,isNumber:P,isElement:O,isArray:be,version:We,isDate:x,lowercase:D,uppercase:c,callbacks:{counter:0},getTestability:le,$$minErr:S,$$csp:X,reloadWithDebugInfo:ae}),(f=Le(g))("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:Wn}),e.provider("$compile",ai).directive({a:Es,input:tr,textarea:tr,form:Fs,script:Zr,select:eo,style:lo,option:ao,ngBind:nr,ngBindHtml:rr,ngBindTemplate:sr,ngClass:lr,ngClassEven:cr,ngClassOdd:hr,ngCloak:pr,ngController:ur,ngForm:Ds,ngHide:Xr,ngIf:vr,ngInclude:yr,ngInit:Sr,ngNonBindable:Dr,ngPluralize:Wr,ngRepeat:Ur,ngShow:$r,ngStyle:Yr,ngSwitch:jr,ngSwitchWhen:zr,ngSwitchDefault:qr,ngOptions:Gr,ngTransclude:Qr,ngModel:Mr,ngList:fr,ngChange:or,pattern:io,ngPattern:io,required:to,ngRequired:to,minlength:so,ngMinlength:so,maxlength:no,ngMaxlength:no,ngValue:er,ngModelOptions:gr}).directive({ngInclude:br}).directive(ws).directive(dr),e.provider({$anchorScroll:Ht,$animate:ei,$animateCss:Jt,$$animateJs:qt,$$animateQueue:Kt,$$AnimateRunner:Zt,$$animateAsyncRun:Qt,$browser:ii,$cacheFactory:ni,$controller:gi,$document:vi,$exceptionHandler:yi,$filter:ss,$$forceReflow:bi,$interpolate:Gi,$interval:Wi,$http:Fi,$httpParamSerializer:Bi,$httpParamSerializerJQLike:Ei,$httpBackend:Li,$xhrFactory:Di,$location:sn,$log:rn,$parse:Nn,$rootScope:Gn,$q:Fn,$$q:Dn,$sce:Xn,$sceDelegate:$n,$sniffer:Yn,$templateCache:si,$templateRequest:zn,$$testability:qn,$timeout:Kn,$window:ts,$$rAF:kn,$$jqLite:wt,$$HashMap:Ot,$$cookieReader:ns})}]),I.module("ngLocale",[],["$provide",function(e){var n="one",s="other";e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(e,t){var i=0|e,t=function(e,t){var i=t;void 0===i&&(i=Math.min((t=e,-1==(n=(t+="").indexOf("."))?0:t.length-n-1),3));var n=Math.pow(10,i);return{v:i,f:(e*n|0)%n}}(e,t);return 1==i&&0==t.v?n:s}})}]),de(g.document).ready(function(){re(g.document,oe)}))}(window),window.angular.$$csp().noInlineStyle||window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),function(f,y){"use strict";var g,v,b,S,T,_,A,P,I=y.$$minErr("$sanitize");y.module("ngSanitize",[]).provider("$sanitize",function(){var t=!1;this.$get=["$$sanitizeUri",function(i){return t&&v(c,l),function(e){var t=[];return A(e,P(t,function(e,t){return!/^unsafe:/.test(i(e,t))})),t.join("")}}],this.enableSvg=function(e){return S(e)?(t=e,this):t},g=y.bind,v=y.extend,b=y.forEach,S=y.isDefined,T=y.lowercase,_=y.noop,A=function(e,t){null==e?e="":"string"!=typeof e&&(e=""+e);r.innerHTML=e;var i=5;do{if(0===i)throw I("uinput","Failed to sanitize html because the input is unstable");i--,f.document.documentMode&&function e(t){for(;t;){if(t.nodeType===f.Node.ELEMENT_NODE)for(var i=t.attributes,n=0,s=i.length;n<s;n++){var r=i[n],o=r.name.toLowerCase();"xmlns:ns1"!==o&&0!==o.lastIndexOf("ns1:",0)||(t.removeAttributeNode(r),n--,s--)}var a=t.firstChild;a&&e(a),t=t.nextSibling}}(r),e=r.innerHTML,r.innerHTML=e}while(e!==r.innerHTML);var n,s=r.firstChild;for(;s;){switch(s.nodeType){case 1:t.start(s.nodeName.toLowerCase(),function(e){for(var t={},i=0,n=e.length;i<n;i++){var s=e[i];t[s.name]=s.value}return t}(s.attributes));break;case 3:t.chars(s.textContent)}if(!((n=s.firstChild)||(1===s.nodeType&&t.end(s.nodeName.toLowerCase()),n=s.nextSibling)))for(;null==n&&(s=s.parentNode)!==r;)n=s.nextSibling,1===s.nodeType&&t.end(s.nodeName.toLowerCase());s=n}for(;s=r.firstChild;)r.removeChild(s)},P=function(e,r){var t=!1,o=g(e,e.push);return{start:function(s,e){s=T(s),(t=!t&&h[s]?s:t)||!0!==c[s]||(o("<"),o(s),b(e,function(e,t){var i=T(t),n="img"===s&&"src"===i||"background"===i;!0!==u[i]||!0===p[i]&&!r(e,n)||(o(" "),o(t),o('="'),o(m(e)),o('"'))}),o(">"))},end:function(e){e=T(e),t||!0!==c[e]||!0===s[e]||(o("</"),o(e),o(">")),e==t&&(t=!1)},chars:function(e){t||o(m(e))}}};var r,i=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,n=/([^#-~ |!])/g,s=d("area,br,col,hr,img,wbr"),e=d("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),o=d("rp,rt"),a=v({},o,e),e=v({},e,d("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),o=v({},o,d("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),l=d("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),h=d("script,style"),c=v({},s,e,o,a),p=d("background,cite,href,longdesc,src,xlink:href"),o=d("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),a=d("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),u=v({},p,a,o);function d(e,t){for(var i={},n=e.split(","),s=0;s<n.length;s++)i[t?T(n[s]):n[s]]=!0;return i}function m(e){return e.replace(/&/g,"&amp;").replace(i,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(n,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}!function(e){if(!e.document||!e.document.implementation)throw I("noinert","Can't create an inert html document");var t,e=((t=e.document.implementation.createHTMLDocument("inert")).documentElement||t.getDocumentElement()).getElementsByTagName("body");1===e.length?r=e[0]:(e=t.createElement("html"),r=t.createElement("body"),e.appendChild(r),t.appendChild(e))}(f)}),y.module("ngSanitize").filter("linky",["$sanitize",function(c){var p=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,u=/^mailto:/i,d=y.$$minErr("linky"),m=y.isDefined,f=y.isFunction,g=y.isObject,v=y.isString;return function(e,s,t){if(null==e||""===e)return e;if(!v(e))throw d("notstring","Expected string but received: {0}",e);for(var i,n,r,o=f(t)?t:g(t)?function(){return t}:function(){return{}},a=e,l=[];i=a.match(p);)n=i[0],i[2]||i[4]||(n=(i[3]?"http://":"mailto:")+n),r=i.index,h(a.substr(0,r)),function(e,t){var i,n=o(e);for(i in l.push("<a "),n)l.push(i+'="'+n[i]+'" ');!m(s)||"target"in n||l.push('target="',s,'" ');l.push('href="',e.replace(/"/g,"&quot;"),'">'),h(t),l.push("</a>")}(n,i[0].replace(u,"")),a=a.substring(r+i[0].length);return h(a),c(l.join(""));function h(e){var t;e&&l.push((t=e,P(e=[],_).chars(t),e.join("")))}}}])}(window,window.angular),function(){"use strict";function e(){this.init()}e.prototype={init:function(){var e=this||b;return e._counter=1e3,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.mobileAutoEnable=!0,e._setup(),e},volume:function(e){var t=this||b;if(e=parseFloat(e),t.ctx||p(),void 0!==e&&0<=e&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,b.ctx.currentTime);for(var i=0;i<t._howls.length;i++)if(!t._howls[i]._webAudio)for(var n=t._howls[i]._getSoundIds(),s=0;s<n.length;s++){var r=t._howls[i]._soundById(n[s]);r&&r._node&&(r._node.volume=r._volume*e)}return t}return t._volume},mute:function(e){var t=this||b;t.ctx||p(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,b.ctx.currentTime);for(var i=0;i<t._howls.length;i++)if(!t._howls[i]._webAudio)for(var n=t._howls[i]._getSoundIds(),s=0;s<n.length;s++){var r=t._howls[i]._soundById(n[s]);r&&r._node&&(r._node.muted=!!e||r._muted)}return t},unload:function(){for(var e=this||b,t=e._howls.length-1;0<=t;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,p()),e},codecs:function(e){return(this||b)._codecs[e.replace(/^x-/,"")]},_setup:function(){var t=this||b;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(e){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||b,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var i=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n=t._navigator&&t._navigator.userAgent.match(/OPR\/([0-6].)/g),n=n&&parseInt(n[0].split("/")[1],10)<33;return t._codecs={mp3:!(n||!i&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!i,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_enableMobileAudio:function(){var i=this||b,e=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi|Chrome|Safari/i.test(i._navigator&&i._navigator.userAgent);if(!i._mobileEnabled&&i.ctx&&e){i._mobileEnabled=!1,i.mobileAutoEnable=!1,i._mobileUnloaded||44100===i.ctx.sampleRate||(i._mobileUnloaded=!0,i.unload()),i._scratchBuffer=i.ctx.createBuffer(1,1,22050);var n=function(e){b._autoResume();var t=i.ctx.createBufferSource();t.buffer=i._scratchBuffer,t.connect(i.ctx.destination),void 0===t.start?t.noteOn(0):t.start(0),"function"==typeof i.ctx.resume&&i.ctx.resume(),t.onended=function(){t.disconnect(0),i._mobileEnabled=!0,document.removeEventListener("touchstart",n,!0),document.removeEventListener("touchend",n,!0),document.removeEventListener("click",n,!0);for(var e=0;e<i._howls.length;e++)i._howls[e]._emit("unlock")}};return document.addEventListener("touchstart",n,!0),document.addEventListener("touchend",n,!0),document.addEventListener("click",n,!0),i}},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&b.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var i=0;i<e._howls[t]._sounds.length;i++)if(!e._howls[t]._sounds[i]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then(function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())}))},3e4),e}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&b.usingWebAudio)return"running"===t.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state?(t.ctx.resume().then(function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")}),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};function t(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")}var b=new e;t.prototype={init:function(e){var t=this;return b.ctx||p(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhrWithCredentials=e.xhrWithCredentials||!1,t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=b.usingWebAudio&&!t._html5,void 0!==b.ctx&&b.ctx&&b.mobileAutoEnable&&b._enableMobileAudio(),b._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&t.load(),t},load:function(){var e=this,t=null;if(b.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var i,n,s=0;s<e._src.length;s++){if(e._format&&e._format[s])i=e._format[s];else{if("string"!=typeof(n=e._src[s])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}i=(i=(i=/^data:audio\/([^;,]+);/i.exec(n))||/\.([^.]+)$/.exec(n.split("?",1)[0]))&&i[1].toLowerCase()}if(i||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),i&&b.codecs(i)){t=e._src[s];break}}if(t)return e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new r(e),e._webAudio&&a(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,i){var n=this,e=null;if("number"==typeof t)e=t,t=null;else{if("string"==typeof t&&"loaded"===n._state&&!n._sprite[t])return null;if(void 0===t){t="__default";for(var s=0,r=0;r<n._sounds.length;r++)n._sounds[r]._paused&&!n._sounds[r]._ended&&(s++,e=n._sounds[r]._id);1===s?t=null:e=null}}var o=e?n._soundById(e):n._inactiveSound();if(!o)return null;if(e&&!t&&(t=o._sprite||"__default"),"loaded"!==n._state){o._sprite=t,o._ended=!1;var a=o._id;return n._queue.push({event:"play",action:function(){n.play(a)}}),a}if(e&&!o._paused)return i||n._loadQueue("play"),o._id;n._webAudio&&b._autoResume();var l=Math.max(0,0<o._seek?o._seek:n._sprite[t][0]/1e3),h=Math.max(0,(n._sprite[t][0]+n._sprite[t][1])/1e3-l),c=1e3*h/Math.abs(o._rate),p=n._sprite[t][0]/1e3,u=(n._sprite[t][0]+n._sprite[t][1])/1e3,d=!(!o._loop&&!n._sprite[t][2]);o._sprite=t;var m=function(){o._paused=!1,o._ended=!1,o._seek=l,o._start=p,o._stop=u,o._loop=d};if(!(u<=l)){var f,g,v,y=o._node;return n._webAudio?(g=function(){m(),n._refreshBuffer(o);var e=o._muted||n._muted?0:o._volume;y.gain.setValueAtTime(e,b.ctx.currentTime),o._playStart=b.ctx.currentTime,void 0===y.bufferSource.start?o._loop?y.bufferSource.noteGrainOn(0,l,86400):y.bufferSource.noteGrainOn(0,l,h):o._loop?y.bufferSource.start(0,l,86400):y.bufferSource.start(0,l,h),c!==1/0&&(n._endTimers[o._id]=setTimeout(n._ended.bind(n,o),c)),i||setTimeout(function(){n._emit("play",o._id)},0)},"running"===b.state?g():(n.once("resume",g),n._clearTimer(o._id))):(f=function(){y.currentTime=l,y.muted=o._muted||n._muted||b._muted||y.muted,y.volume=o._volume*b.volume(),y.playbackRate=o._rate;try{var e=y.play();if(e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)?(n._playLock=!0,e.then(function(){m(),n._playLock=!1,i||n._emit("play",o._id)}).catch(function(){n._playLock=!1,n._emit("playerror",o._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.")})):i||(m(),n._emit("play",o._id)),y.playbackRate=o._rate,y.paused)return void n._emit("playerror",o._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||o._loop?n._endTimers[o._id]=setTimeout(n._ended.bind(n,o),c):(n._endTimers[o._id]=function(){n._ended(o),y.removeEventListener("ended",n._endTimers[o._id],!1)},y.addEventListener("ended",n._endTimers[o._id],!1))}catch(e){n._emit("playerror",o._id,e)}},g=window&&window.ejecta||!y.readyState&&b._navigator.isCocoonJS,3<=y.readyState||g?f():(y.addEventListener(b._canPlayEvent,v=function(){f(),y.removeEventListener(b._canPlayEvent,v,!1)},!1),n._clearTimer(o._id))),o._id}n._ended(o)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var i=t._getSoundIds(e),n=0;n<i.length;n++){t._clearTimer(i[n]);var s=t._soundById(i[n]);if(s&&!s._paused&&(s._seek=t.seek(i[n]),s._rateSeek=0,s._paused=!0,t._stopFade(i[n]),s._node))if(t._webAudio){if(!s._node.bufferSource)continue;void 0===s._node.bufferSource.stop?s._node.bufferSource.noteOff(0):s._node.bufferSource.stop(0),t._cleanBuffer(s._node)}else isNaN(s._node.duration)&&s._node.duration!==1/0||s._node.pause();arguments[1]||t._emit("pause",s?s._id:null)}return t},stop:function(e,t){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"stop",action:function(){i.stop(e)}}),i;for(var n=i._getSoundIds(e),s=0;s<n.length;s++){i._clearTimer(n[s]);var r=i._soundById(n[s]);r&&(r._seek=r._start||0,r._rateSeek=0,r._paused=!0,r._ended=!0,i._stopFade(n[s]),r._node&&(i._webAudio?r._node.bufferSource&&(void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),i._cleanBuffer(r._node)):isNaN(r._node.duration)&&r._node.duration!==1/0||(r._node.currentTime=r._start||0,r._node.pause())),t||i._emit("stop",r._id))}return i},mute:function(e,t){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"mute",action:function(){i.mute(e,t)}}),i;if(void 0===t){if("boolean"!=typeof e)return i._muted;i._muted=e}for(var n=i._getSoundIds(t),s=0;s<n.length;s++){var r=i._soundById(n[s]);r&&(r._muted=e,r._interval&&i._stopFade(r._id),i._webAudio&&r._node?r._node.gain.setValueAtTime(e?0:r._volume,b.ctx.currentTime):r._node&&(r._node.muted=!!b._muted||e),i._emit("mute",r._id))}return i},volume:function(){var e,t,i=this,n=arguments;if(0===n.length)return i._volume;if(1===n.length||2===n.length&&void 0===n[1]?0<=i._getSoundIds().indexOf(n[0])?s=parseInt(n[0],10):e=parseFloat(n[0]):2<=n.length&&(e=parseFloat(n[0]),s=parseInt(n[1],10)),!(void 0!==e&&0<=e&&e<=1))return(t=s?i._soundById(s):i._sounds[0])?t._volume:0;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"volume",action:function(){i.volume.apply(i,n)}}),i;void 0===s&&(i._volume=e);for(var s=i._getSoundIds(s),r=0;r<s.length;r++)(t=i._soundById(s[r]))&&(t._volume=e,n[2]||i._stopFade(s[r]),i._webAudio&&t._node&&!t._muted?t._node.gain.setValueAtTime(e,b.ctx.currentTime):t._node&&!t._muted&&(t._node.volume=e*b.volume()),i._emit("volume",t._id));return i},fade:function(e,t,i,n){var s=this;if("loaded"!==s._state||s._playLock)return s._queue.push({event:"fade",action:function(){s.fade(e,t,i,n)}}),s;e=parseFloat(e),t=parseFloat(t),i=parseFloat(i),s.volume(e,n);for(var r=s._getSoundIds(n),o=0;o<r.length;o++){var a,l,h=s._soundById(r[o]);h&&(n||s._stopFade(r[o]),s._webAudio&&!h._muted&&(l=(a=b.ctx.currentTime)+i/1e3,h._volume=e,h._node.gain.setValueAtTime(e,a),h._node.gain.linearRampToValueAtTime(t,l)),s._startFadeInterval(h,e,t,i,r[o],void 0===n))}return s},_startFadeInterval:function(t,i,n,s,e,r){var o=this,a=i,l=n-i,h=Math.abs(l/.01),h=Math.max(4,0<h?s/h:s),c=Date.now();t._fadeTo=n,t._interval=setInterval(function(){var e=(Date.now()-c)/s;c=Date.now(),a+=l*e,a=Math.max(0,a),a=Math.min(1,a),a=Math.round(100*a)/100,o._webAudio?t._volume=a:o.volume(a,t._id,!0),r&&(o._volume=a),(n<i&&a<=n||i<n&&n<=a)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,o.volume(n,t._id),o._emit("fade",t._id))},h)},_stopFade:function(e){var t=this._soundById(e);return t&&t._interval&&(this._webAudio&&t._node.gain.cancelScheduledValues(b.ctx.currentTime),clearInterval(t._interval),t._interval=null,this.volume(t._fadeTo,e),t._fadeTo=null,this._emit("fade",e)),this},loop:function(){var e,t,i,n=arguments;if(0===n.length)return this._loop;if(1===n.length){if("boolean"!=typeof n[0])return!!(i=this._soundById(parseInt(n[0],10)))&&i._loop;this._loop=e=n[0]}else 2===n.length&&(e=n[0],t=parseInt(n[1],10));for(var s=this._getSoundIds(t),r=0;r<s.length;r++)(i=this._soundById(s[r]))&&(i._loop=e,this._webAudio&&i._node&&i._node.bufferSource&&(i._node.bufferSource.loop=e)&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop));return this},rate:function(){var e,t=this,i=arguments;if(0===i.length?r=t._sounds[0]._id:1===i.length?0<=t._getSoundIds().indexOf(i[0])?r=parseInt(i[0],10):e=parseFloat(i[0]):2===i.length&&(e=parseFloat(i[0]),r=parseInt(i[1],10)),"number"!=typeof e)return((s=t._soundById(r))||t)._rate;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"rate",action:function(){t.rate.apply(t,i)}}),t;void 0===r&&(t._rate=e);for(var n,s,r=t._getSoundIds(r),o=0;o<r.length;o++)(s=t._soundById(r[o]))&&(s._rateSeek=t.seek(r[o]),s._playStart=t._webAudio?b.ctx.currentTime:s._playStart,s._rate=e,t._webAudio&&s._node&&s._node.bufferSource?s._node.bufferSource.playbackRate.setValueAtTime(e,b.ctx.currentTime):s._node&&(s._node.playbackRate=e),n=t.seek(r[o]),n=1e3*((t._sprite[s._sprite][0]+t._sprite[s._sprite][1])/1e3-n)/Math.abs(s._rate),!t._endTimers[r[o]]&&s._paused||(t._clearTimer(r[o]),t._endTimers[r[o]]=setTimeout(t._ended.bind(t,s),n)),t._emit("rate",s._id));return t},seek:function(){var e,t,i=this,n=arguments;if(0===n.length?t=i._sounds[0]._id:1===n.length?0<=i._getSoundIds().indexOf(n[0])?t=parseInt(n[0],10):i._sounds.length&&(t=i._sounds[0]._id,e=parseFloat(n[0])):2===n.length&&(e=parseFloat(n[0]),t=parseInt(n[1],10)),void 0===t)return i;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"seek",action:function(){i.seek.apply(i,n)}}),i;var s=i._soundById(t);if(s){if(!("number"==typeof e&&0<=e)){if(i._webAudio){var r=i.playing(t)?b.ctx.currentTime-s._playStart:0,o=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(o+r*Math.abs(s._rate))}return s._node.currentTime}var a=i.playing(t);a&&i.pause(t,!0),s._seek=e,s._ended=!1,i._clearTimer(t),!i._webAudio&&s._node&&(s._node.currentTime=e);var l,h=function(){i._emit("seek",t),a&&i.play(t,!0)};a&&!i._webAudio?(l=function(){i._playLock?setTimeout(l,0):h()},setTimeout(l,0)):h()}return i},playing:function(e){if("number"==typeof e){e=this._soundById(e);return!!e&&!e._paused}for(var t=0;t<this._sounds.length;t++)if(!this._sounds[t]._paused)return!0;return!1},duration:function(e){var t=this._duration,e=this._soundById(e);return t=e?this._sprite[e._sprite][1]/1e3:t},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,i=0;i<t.length;i++)t[i]._paused||e.stop(t[i]._id),e._webAudio||(/MSIE |Trident\//.test(b._navigator&&b._navigator.userAgent)||(t[i]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),t[i]._node.removeEventListener("error",t[i]._errorFn,!1),t[i]._node.removeEventListener(b._canPlayEvent,t[i]._loadFn,!1)),delete t[i]._node,e._clearTimer(t[i]._id);var n=b._howls.indexOf(e);0<=n&&b._howls.splice(n,1);for(var s=!0,i=0;i<b._howls.length;i++)if(b._howls[i]._src===e._src){s=!1;break}return o&&s&&delete o[e._src],b.noAudio=!1,e._state="unloaded",e._sounds=[],e=null},on:function(e,t,i,n){e=this["_on"+e];return"function"==typeof t&&e.push(n?{id:i,fn:t,once:n}:{id:i,fn:t}),this},off:function(e,t,i){var n=this["_on"+e],s=0;if("number"==typeof t&&(i=t,t=null),t||i)for(s=0;s<n.length;s++){var r=i===n[s].id;if(t===n[s].fn&&r||!t&&r){n.splice(s,1);break}}else if(e)this["_on"+e]=[];else for(var o=Object.keys(this),s=0;s<o.length;s++)0===o[s].indexOf("_on")&&Array.isArray(this[o[s]])&&(this[o[s]]=[]);return this},once:function(e,t,i){return this.on(e,t,i,1),this},_emit:function(e,t,i){for(var n=this["_on"+e],s=n.length-1;0<=s;s--)n[s].id&&n[s].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,i)}.bind(this,n[s].fn),0),n[s].once&&this.off(e,n[s].fn,n[s].id));return this._loadQueue(e),this},_loadQueue:function(e){var t;return 0<this._queue.length&&((t=this._queue[0]).event===e&&(this._queue.shift(),this._loadQueue()),e||t.action()),this},_ended:function(e){var t=this,i=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var n=!(!e._loop&&!t._sprite[i][2]);return t._emit("end",e._id),!t._webAudio&&n&&t.stop(e._id,!0).play(e._id),t._webAudio&&n&&(t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=b.ctx.currentTime,i=1e3*(e._stop-e._start)/Math.abs(e._rate),t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),i)),t._webAudio&&!n&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),b._autoSuspend()),t._webAudio||n||t.stop(e._id,!0),t},_clearTimer:function(e){var t;return this._endTimers[e]&&("function"!=typeof this._endTimers[e]?clearTimeout(this._endTimers[e]):(t=this._soundById(e))&&t._node&&t._node.removeEventListener("ended",this._endTimers[e],!1),delete this._endTimers[e]),this},_soundById:function(e){for(var t=0;t<this._sounds.length;t++)if(e===this._sounds[t]._id)return this._sounds[t];return null},_inactiveSound:function(){this._drain();for(var e=0;e<this._sounds.length;e++)if(this._sounds[e]._ended)return this._sounds[e].reset();return new r(this)},_drain:function(){var e=this,t=e._pool,i=0,n=0;if(!(e._sounds.length<t)){for(n=0;n<e._sounds.length;n++)e._sounds[n]._ended&&i++;for(n=e._sounds.length-1;0<=n;n--){if(i<=t)return;e._sounds[n]._ended&&(e._webAudio&&e._sounds[n]._node&&e._sounds[n]._node.disconnect(0),e._sounds.splice(n,1),i--)}}},_getSoundIds:function(e){if(void 0!==e)return[e];for(var t=[],i=0;i<this._sounds.length;i++)t.push(this._sounds[i]._id);return t},_refreshBuffer:function(e){return e._node.bufferSource=b.ctx.createBufferSource(),e._node.bufferSource.buffer=o[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,b.ctx.currentTime),this},_cleanBuffer:function(e){if(b._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),e&&e.bufferSource))try{e.bufferSource.buffer=b._scratchBuffer}catch(e){}return e.bufferSource=null,this}};var r=function(e){this._parent=e,this.init()};r.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++b._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,i=b._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=void 0===b.ctx.createGain?b.ctx.createGainNode():b.ctx.createGain(),e._node.gain.setValueAtTime(i,b.ctx.currentTime),e._node.paused=!0,e._node.connect(b.masterGain)):(e._node=new Audio,e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(b._canPlayEvent,e._loadFn,!1),e._node.src=t._src,e._node.preload="auto",e._node.volume=i*b.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++b._counter,e},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),this._node.removeEventListener(b._canPlayEvent,this._loadFn,!1)}};var o={},a=function(t){var e=t._src;if(o[e])return t._duration=o[e].duration,void c(t);if(/^data:[^;]+;base64,/.test(e)){for(var i=atob(e.split(",")[1]),n=new Uint8Array(i.length),s=0;s<i.length;++s)n[s]=i.charCodeAt(s);h(n.buffer,t)}else{var r=new XMLHttpRequest;r.open("GET",e,!0),r.withCredentials=t._xhrWithCredentials,r.responseType="arraybuffer",r.onload=function(){var e=(r.status+"")[0];"0"===e||"2"===e||"3"===e?h(r.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+r.status+".")},r.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete o[e],t.load())},l(r)}},l=function(t){try{t.send()}catch(e){t.onerror()}},h=function(e,t){function i(){t._emit("loaderror",null,"Decoding audio data failed.")}function n(e){e&&0<t._sounds.length?(o[t._src]=e,c(t,e)):i()}"undefined"!=typeof Promise&&1===b.ctx.decodeAudioData.length?b.ctx.decodeAudioData(e).then(n).catch(i):b.ctx.decodeAudioData(e,n,i)},c=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},p=function(){if(b.usingWebAudio){try{"undefined"!=typeof AudioContext?b.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?b.ctx=new webkitAudioContext:b.usingWebAudio=!1}catch(e){b.usingWebAudio=!1}var e=/iP(hone|od|ad)/.test(b._navigator&&b._navigator.platform),t=b._navigator&&b._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),t=t?parseInt(t[1],10):null;e&&t&&t<9&&(t=/safari/.test(b._navigator&&b._navigator.userAgent.toLowerCase()),(b._navigator&&b._navigator.standalone&&!t||b._navigator&&!b._navigator.standalone&&!t)&&(b.usingWebAudio=!1)),b.usingWebAudio&&(b.masterGain=void 0===b.ctx.createGain?b.ctx.createGainNode():b.ctx.createGain(),b.masterGain.gain.setValueAtTime(b._muted?0:1,b.ctx.currentTime),b.masterGain.connect(b.ctx.destination)),b._setup()}};"function"==typeof define&&define.amd&&define([],function(){return{Howler:b,Howl:t}}),"undefined"!=typeof exports&&(exports.Howler=b,exports.Howl=t),"undefined"!=typeof window?(window.HowlerGlobal=e,window.Howler=b,window.Howl=t,window.Sound=r):"undefined"!=typeof global&&(global.HowlerGlobal=e,global.Howler=b,global.Howl=t,global.Sound=r)}(),function(){"use strict";var t,i,n;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){if(!this.ctx||!this.ctx.listener)return this;for(var t=this._howls.length-1;0<=t;t--)this._howls[t].stereo(e);return this},HowlerGlobal.prototype.pos=function(e,t,i){var n=this;return n.ctx&&n.ctx.listener?(t="number"!=typeof t?n._pos[1]:t,i="number"!=typeof i?n._pos[2]:i,"number"!=typeof e?n._pos:(n._pos=[e,t,i],void 0!==n.ctx.listener.positionX?(n.ctx.listener.positionX.setTargetAtTime(n._pos[0],Howler.ctx.currentTime,.1),n.ctx.listener.positionY.setTargetAtTime(n._pos[1],Howler.ctx.currentTime,.1),n.ctx.listener.positionZ.setTargetAtTime(n._pos[2],Howler.ctx.currentTime,.1)):n.ctx.listener.setPosition(n._pos[0],n._pos[1],n._pos[2]),n)):n},HowlerGlobal.prototype.orientation=function(e,t,i,n,s,r){var o=this;if(!o.ctx||!o.ctx.listener)return o;var a=o._orientation;return t="number"!=typeof t?a[1]:t,i="number"!=typeof i?a[2]:i,n="number"!=typeof n?a[3]:n,s="number"!=typeof s?a[4]:s,r="number"!=typeof r?a[5]:r,"number"!=typeof e?a:(o._orientation=[e,t,i,n,s,r],void 0!==o.ctx.listener.forwardX?(o.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),o.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),o.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),o.ctx.listener.upX.setTargetAtTime(e,Howler.ctx.currentTime,.1),o.ctx.listener.upY.setTargetAtTime(t,Howler.ctx.currentTime,.1),o.ctx.listener.upZ.setTargetAtTime(i,Howler.ctx.currentTime,.1)):o.ctx.listener.setOrientation(e,t,i,n,s,r),o)},Howl.prototype.init=(t=Howl.prototype.init,function(e){return this._orientation=e.orientation||[1,0,0],this._stereo=e.stereo||null,this._pos=e.pos||null,this._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},this._onstereo=e.onstereo?[{fn:e.onstereo}]:[],this._onpos=e.onpos?[{fn:e.onpos}]:[],this._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}),Howl.prototype.stereo=function(e,t){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"stereo",action:function(){i.stereo(e,t)}}),i;var n=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===t){if("number"!=typeof e)return i._stereo;i._stereo=e,i._pos=[e,0,0]}for(var s=i._getSoundIds(t),r=0;r<s.length;r++){var o=i._soundById(s[r]);if(o){if("number"!=typeof e)return o._stereo;o._stereo=e,o._pos=[e,0,0],o._node&&(o._pannerAttr.panningModel="equalpower",o._panner&&o._panner.pan||h(o,n),"spatial"==n?void 0!==o._panner.positionX?(o._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),o._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),o._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):o._panner.setPosition(e,0,0):o._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),i._emit("stereo",o._id)}}return i},Howl.prototype.pos=function(e,t,i,n){var s=this;if(!s._webAudio)return s;if("loaded"!==s._state)return s._queue.push({event:"pos",action:function(){s.pos(e,t,i,n)}}),s;if(t="number"!=typeof t?0:t,i="number"!=typeof i?-.5:i,void 0===n){if("number"!=typeof e)return s._pos;s._pos=[e,t,i]}for(var r=s._getSoundIds(n),o=0;o<r.length;o++){var a=s._soundById(r[o]);if(a){if("number"!=typeof e)return a._pos;a._pos=[e,t,i],a._node&&(a._panner&&!a._panner.pan||h(a,"spatial"),void 0!==a._panner.positionX?(a._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(t,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):a._panner.setPosition(e,t,i)),s._emit("pos",a._id)}}return s},Howl.prototype.orientation=function(e,t,i,n){var s=this;if(!s._webAudio)return s;if("loaded"!==s._state)return s._queue.push({event:"orientation",action:function(){s.orientation(e,t,i,n)}}),s;if(t="number"!=typeof t?s._orientation[1]:t,i="number"!=typeof i?s._orientation[2]:i,void 0===n){if("number"!=typeof e)return s._orientation;s._orientation=[e,t,i]}for(var r=s._getSoundIds(n),o=0;o<r.length;o++){var a=s._soundById(r[o]);if(a){if("number"!=typeof e)return a._orientation;a._orientation=[e,t,i],a._node&&(a._panner||(a._pos||(a._pos=s._pos||[0,0,-.5]),h(a,"spatial")),void 0!==a._panner.orientationX?(a._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),a._panner.orientationY.setValueAtTime(t,Howler.ctx.currentTime),a._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):a._panner.setOrientation(e,t,i)),s._emit("orientation",a._id)}}return s},Howl.prototype.pannerAttr=function(){var e,t,i=this,n=arguments;if(!i._webAudio)return i;if(0===n.length)return i._pannerAttr;if(1===n.length){if("object"!=typeof n[0])return((o=i._soundById(parseInt(n[0],10)))||i)._pannerAttr;e=n[0],void 0===t&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),i._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:i._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:i._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:i._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:i._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:i._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:i._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:i._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:i._panningModel})}else 2===n.length&&(e=n[0],t=parseInt(n[1],10));for(var s,r,o,a=i._getSoundIds(t),l=0;l<a.length;l++)(o=i._soundById(a[l]))&&(s=o._pannerAttr,s={coneInnerAngle:(void 0!==e.coneInnerAngle?e:s).coneInnerAngle,coneOuterAngle:(void 0!==e.coneOuterAngle?e:s).coneOuterAngle,coneOuterGain:(void 0!==e.coneOuterGain?e:s).coneOuterGain,distanceModel:(void 0!==e.distanceModel?e:s).distanceModel,maxDistance:(void 0!==e.maxDistance?e:s).maxDistance,refDistance:(void 0!==e.refDistance?e:s).refDistance,rolloffFactor:(void 0!==e.rolloffFactor?e:s).rolloffFactor,panningModel:(void 0!==e.panningModel?e:s).panningModel},(r=o._panner)?(r.coneInnerAngle=s.coneInnerAngle,r.coneOuterAngle=s.coneOuterAngle,r.coneOuterGain=s.coneOuterGain,r.distanceModel=s.distanceModel,r.maxDistance=s.maxDistance,r.refDistance=s.refDistance,r.rolloffFactor=s.rolloffFactor,r.panningModel=s.panningModel):(o._pos||(o._pos=i._pos||[0,0,-.5]),h(o,"spatial")));return i},Sound.prototype.init=(i=Sound.prototype.init,function(){var e=this,t=e._parent;e._orientation=t._orientation,e._stereo=t._stereo,e._pos=t._pos,e._pannerAttr=t._pannerAttr,i.call(this),e._stereo?t.stereo(e._stereo):e._pos&&t.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}),Sound.prototype.reset=(n=Sound.prototype.reset,function(){var e=this,t=e._parent;return e._orientation=t._orientation,e._stereo=t._stereo,e._pos=t._pos,e._pannerAttr=t._pannerAttr,e._stereo?t.stereo(e._stereo):e._pos?t.pos(e._pos[0],e._pos[1],e._pos[2],e._id):e._panner&&(e._panner.disconnect(0),e._panner=void 0,t._refreshBuffer(e)),n.call(this)});var h=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}();var PIXI=function(e){"use strict";var E="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}var i=t(function(e,I){!function(e){var t,i=e.Promise,n=i&&"resolve"in i&&"reject"in i&&"all"in i&&"race"in i&&(new i(function(e){t=e}),"function"==typeof t);I?(I.Promise=n?i:P,I.Polyfill=P):n||(e.Promise=P);function s(){}var r="pending",o="sealed",a="fulfilled",l="rejected";function h(e){return"[object Array]"===Object.prototype.toString.call(e)}var c,p="undefined"!=typeof setImmediate?setImmediate:setTimeout,u=[];function d(){for(var e=0;e<u.length;e++)u[e][0](u[e][1]);c=!(u=[])}function m(e,t){u.push([e,t]),c||(c=!0,p(d,0))}function f(e,t){function i(e){S(t,e)}try{e(function(e){y(t,e)},i)}catch(e){i(e)}}function g(t){var e=t.owner,i=e.state_,n=e.data_,e=t[i],t=t.then;if("function"==typeof e){i=a;try{n=e(n)}catch(e){S(t,e)}}v(t,n)||(i===a&&y(t,n),i===l&&S(t,n))}function v(t,i){var n;try{if(t===i)throw new TypeError("A promises callback cannot return that same promise.");if(i&&("function"==typeof i||"object"==typeof i)){var e=i.then;if("function"==typeof e)return e.call(i,function(e){n||(n=!0,(i!==e?y:b)(t,e))},function(e){n||(n=!0,S(t,e))}),1}}catch(e){return n||S(t,e),1}}function y(e,t){e!==t&&v(e,t)||b(e,t)}function b(e,t){e.state_===r&&(e.state_=o,e.data_=t,m(_,e))}function S(e,t){e.state_===r&&(e.state_=o,e.data_=t,m(A,e))}function T(e){var t=e.then_;e.then_=void 0;for(var i=0;i<t.length;i++)g(t[i])}function _(e){e.state_=a,T(e)}function A(e){e.state_=l,T(e)}function P(e){if("function"!=typeof e)throw new TypeError("Promise constructor takes a function argument");if(this instanceof P==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],f(e,this)}P.prototype={constructor:P,state_:r,then_:null,data_:void 0,then:function(e,t){t={owner:this,then:new this.constructor(s),fulfilled:e,rejected:t};return this.state_===a||this.state_===l?m(g,t):this.then_.push(t),t.then},catch:function(e){return this.then(null,e)}},P.all=function(o){if(!h(o))throw new TypeError("You must pass an array to Promise.all().");return new this(function(i,e){var n=[],s=0;for(var t,r=0;r<o.length;r++)(t=o[r])&&"function"==typeof t.then?t.then(function(t){return s++,function(e){n[t]=e,--s||i(n)}}(r),e):n[r]=t;s||i(n)})},P.race=function(s){if(!h(s))throw new TypeError("You must pass an array to Promise.race().");return new this(function(e,t){for(var i,n=0;n<s.length;n++)(i=s[n])&&"function"==typeof i.then?i.then(e,t):e(i)})},P.resolve=function(t){return t&&"object"==typeof t&&t.constructor===this?t:new this(function(e){e(t)})},P.reject=function(i){return new this(function(e,t){t(i)})}}("undefined"!=typeof window?window:0?self:E)}),n=(i.Promise,i.Polyfill),h=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;var s=function(){try{if(!Object.assign)return;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},n)).join("")?void 0:1}catch(e){return}}()?Object.assign:function(e,t){for(var i,n=arguments,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),r=1;r<arguments.length;r++){for(var o in i=Object(n[r]))c.call(i,o)&&(s[o]=i[o]);if(h)for(var a=h(i),l=0;l<a.length;l++)p.call(i,a[l])&&(s[a[l]]=i[a[l]])}return s};window.Promise||(window.Promise=n),Object.assign||(Object.assign=s);var r,o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),o.performance&&o.performance.now||(r=Date.now(),o.performance||(o.performance={}),o.performance.now=function(){return Date.now()-r});for(var a=Date.now(),l=["ms","moz","webkit","o"],u=0;u<l.length&&!o.requestAnimationFrame;++u){var d=l[u];o.requestAnimationFrame=o[d+"RequestAnimationFrame"],o.cancelAnimationFrame=o[d+"CancelAnimationFrame"]||o[d+"CancelRequestAnimationFrame"]}o.requestAnimationFrame||(o.requestAnimationFrame=function(e){if("function"!=typeof e)throw new TypeError(e+"is not a function");var t=Date.now(),i=16+a-t;return i<0&&(i=0),a=t,setTimeout(function(){a=Date.now(),e(performance.now())},i)}),o.cancelAnimationFrame||(o.cancelAnimationFrame=function(e){return clearTimeout(e)}),Math.sign||(Math.sign=function(e){return 0===(e=Number(e))||isNaN(e)?e:0<e?1:-1}),Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array),window.Uint8Array||(window.Uint8Array=Array),window.Int32Array||(window.Int32Array=Array);var m=t(function(e){function i(e,t){return e.test(t)}function t(e){var t=e||("undefined"!=typeof navigator?navigator.userAgent:""),e=t.split("[FBAN");void 0!==(e=(t=void 0!==e[1]?e[0]:t).split("Twitter"))[1]&&(t=e[0]);t={apple:{phone:i(s,t)&&!i(p,t),ipod:i(r,t),tablet:!i(s,t)&&i(o,t)&&!i(p,t),device:(i(s,t)||i(r,t)||i(o,t))&&!i(p,t)},amazon:{phone:i(h,t),tablet:!i(h,t)&&i(c,t),device:i(h,t)||i(c,t)},android:{phone:!i(p,t)&&i(h,t)||!i(p,t)&&i(a,t),tablet:!i(p,t)&&!i(h,t)&&!i(a,t)&&(i(c,t)||i(l,t)),device:!i(p,t)&&(i(h,t)||i(c,t)||i(a,t)||i(l,t))||i(/\bokhttp\b/i,t)},windows:{phone:i(p,t),tablet:i(u,t),device:i(p,t)||i(u,t)},other:{blackberry:i(d,t),blackberry10:i(m,t),opera:i(f,t),firefox:i(v,t),chrome:i(g,t),device:i(d,t)||i(m,t)||i(f,t)||i(v,t)||i(g,t)}};return t.any=t.apple.device||t.android.device||t.windows.device||t.other.device,t.phone=t.apple.phone||t.android.phone||t.windows.phone,t.tablet=t.apple.tablet||t.android.tablet||t.windows.tablet,t}var n,s,r,o,a,l,h,c,p,u,d,m,f,g,v;n=E,s=/iPhone/i,r=/iPod/i,o=/iPad/i,a=/\bAndroid(?:.+)Mobile\b/i,l=/Android/i,h=/\bAndroid(?:.+)SD4930UR\b/i,c=/\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i,p=/Windows Phone/i,u=/\bWindows(?:.+)ARM\b/i,d=/BlackBerry/i,m=/BB10/i,f=/Opera Mini/i,g=/\b(CriOS|Chrome)(?:.+)Mobile/i,v=/Mobile(?:.+)Firefox\b/i,e.exports&&"undefined"==typeof window?e.exports=t:e.exports&&"undefined"!=typeof window?(e.exports=t(),e.exports.isMobile=t):n.isMobile=t()});m.isMobile;var C={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:($n=32,Un=!0,(m.tablet||m.phone)&&(Un=!1,!m.apple.device||(Wn=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&11<=parseInt(Wn[1],10)&&(Un=!0),!m.android.device||(Wn=navigator.userAgent.match(/Android\s([0-9.]*)/))&&7<=parseInt(Wn[1],10)&&(Un=!0)),Un?$n:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:m.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!m.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},f=t(function(e){var n=Object.prototype.hasOwnProperty,m="~";function i(){}function r(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function s(e,t,i,n,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");s=new r(i,n||e,s),t=m?m+t:t;return e._events[t]?e._events[t].fn?e._events[t]=[e._events[t],s]:e._events[t].push(s):(e._events[t]=s,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function t(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(m=!1)),t.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)n.call(e,t)&&i.push(m?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},t.prototype.listeners=function(e){var e=m?m+e:e,t=this._events[e];if(!t)return[];if(t.fn)return[t.fn];for(var i=0,n=t.length,s=new Array(n);i<n;i++)s[i]=t[i].fn;return s},t.prototype.listenerCount=function(e){e=m?m+e:e,e=this._events[e];return e?e.fn?1:e.length:0},t.prototype.emit=function(e,t,i,n,s,r){var o=arguments,a=m?m+e:e;if(!this._events[a])return!1;var l,h=this._events[a],c=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),c){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,i),!0;case 4:return h.fn.call(h.context,t,i,n),!0;case 5:return h.fn.call(h.context,t,i,n,s),!0;case 6:return h.fn.call(h.context,t,i,n,s,r),!0}for(d=1,l=new Array(c-1);d<c;d++)l[d-1]=o[d];h.fn.apply(h.context,l)}else for(var p,u=h.length,d=0;d<u;d++)switch(h[d].once&&this.removeListener(e,h[d].fn,void 0,!0),c){case 1:h[d].fn.call(h[d].context);break;case 2:h[d].fn.call(h[d].context,t);break;case 3:h[d].fn.call(h[d].context,t,i);break;case 4:h[d].fn.call(h[d].context,t,i,n);break;default:if(!l)for(p=1,l=new Array(c-1);p<c;p++)l[p-1]=o[p];h[d].fn.apply(h[d].context,l)}return!0},t.prototype.on=function(e,t,i){return s(this,e,t,i,!1)},t.prototype.once=function(e,t,i){return s(this,e,t,i,!0)},t.prototype.removeListener=function(e,t,i,n){e=m?m+e:e;if(!this._events[e])return this;if(!t)return l(this,e),this;var s=this._events[e];if(s.fn)s.fn!==t||n&&!s.once||i&&s.context!==i||l(this,e);else{for(var r=0,o=[],a=s.length;r<a;r++)(s[r].fn!==t||n&&!s[r].once||i&&s[r].context!==i)&&o.push(s[r]);o.length?this._events[e]=1===o.length?o[0]:o:l(this,e)}return this},t.prototype.removeAllListeners=function(e){return e?(e=m?m+e:e,this._events[e]&&l(this,e)):(this._events=new i,this._eventsCount=0),this},t.prototype.off=t.prototype.removeListener,t.prototype.addListener=t.prototype.on,t.prefixed=m,e.exports=t.EventEmitter=t}),g=y,v=y;function y(e,t,i){i=i||2;var n,s,r,o,a,l=t&&t.length,h=l?t[0]*i:e.length,c=b(e,0,h,i,!0),p=[];if(!c||c.next===c.prev)return p;if(l&&(c=function(e,t,i,n){var s,r,o,a,l=[];for(s=0,r=t.length;s<r;s++)o=t[s]*n,a=s<r-1?t[s+1]*n:e.length,(a=b(e,o,a,n,!1))===a.next&&(a.steiner=!0),l.push(function(e){var t=e,i=e;for(;(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next,t!==e;);return i}(a));for(l.sort(_),s=0;s<l.length;s++)!function(e,t){(t=function(e,t){var i,n=t,s=e.x,r=e.y,o=-1/0;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){var a=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=s&&o<a){if((o=a)===s){if(r===n.y)return n;if(r===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}}while(n=n.next,n!==t);if(!i)return null;if(s===o)return i.prev;var l,h=i,c=i.x,p=i.y,u=1/0;n=i.next;for(;n!==h;)s>=n.x&&n.x>=c&&s!==n.x&&P(r<p?s:o,r,c,p,r<p?o:s,r,n.x,n.y)&&((l=Math.abs(r-n.y)/(s-n.x))<u||l===u&&n.x>i.x)&&w(n,e)&&(i=n,u=l),n=n.next;return i}(e,t))&&S(e=R(t,e),e.next)}(l[s],i),i=S(i,i.next);return i}(e,t,c,i)),e.length>80*i){for(var u=n=e[0],d=s=e[1],m=i;m<h;m+=i)(r=e[m])<u&&(u=r),(o=e[m+1])<d&&(d=o),n<r&&(n=r),s<o&&(s=o);a=0!==(a=Math.max(n-u,s-d))?1/a:0}return T(c,p,i,u,d,a),p}function b(e,t,i,n,s){var r,o;if(s===0<F(e,t,i,n))for(r=t;r<i;r+=n)o=M(r,e[r],e[r+1],o);else for(r=i-n;t<=r;r-=n)o=M(r,e[r],e[r+1],o);return o&&x(o,o.next)&&(O(o),o=o.next),o}function S(e,t){if(!e)return e;t=t||e;var i,n=e;do{if(i=!1,n.steiner||!x(n,n.next)&&0!==I(n.prev,n,n.next))n=n.next;else{if(O(n),(n=t=n.prev)===n.next)break;i=!0}}while(i||n!==t);return t}function T(e,t,i,n,s,r,o){if(e){!o&&r&&function(e,t,i,n){var s=e;for(;null===s.z&&(s.z=A(s.x,s.y,t,i,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next,s!==e;);s.prevZ.nextZ=null,s.prevZ=null,function(e){var t,i,n,s,r,o,a,l,h=1;do{for(i=e,r=e=null,o=0;i;){for(o++,n=i,t=a=0;t<h&&(a++,n=n.nextZ);t++);for(l=h;0<a||0<l&&n;)0!==a&&(0===l||!n||i.z<=n.z)?(i=(s=i).nextZ,a--):(n=(s=n).nextZ,l--),r?r.nextZ=s:e=s,s.prevZ=r,r=s;i=n}}while(r.nextZ=null,h*=2,1<o)}(s)}(e,n,s,r);for(var a,l,h=e;e.prev!==e.next;)if(a=e.prev,l=e.next,r?function(e,t,i,n){var s=e.prev,r=e,o=e.next;if(0<=I(s,r,o))return!1;var a=(s.x<r.x?s.x<o.x?s:o:r.x<o.x?r:o).x,l=(s.y<r.y?s.y<o.y?s:o:r.y<o.y?r:o).y,h=(s.x>r.x?s.x>o.x?s:o:r.x>o.x?r:o).x,c=(s.y>r.y?s.y>o.y?s:o:r.y>o.y?r:o).y,p=A(a,l,t,i,n),u=A(h,c,t,i,n),d=e.prevZ,m=e.nextZ;for(;d&&d.z>=p&&m&&m.z<=u;){if(d!==e.prev&&d!==e.next&&P(s.x,s.y,r.x,r.y,o.x,o.y,d.x,d.y)&&0<=I(d.prev,d,d.next))return!1;if(d=d.prevZ,m!==e.prev&&m!==e.next&&P(s.x,s.y,r.x,r.y,o.x,o.y,m.x,m.y)&&0<=I(m.prev,m,m.next))return!1;m=m.nextZ}for(;d&&d.z>=p;){if(d!==e.prev&&d!==e.next&&P(s.x,s.y,r.x,r.y,o.x,o.y,d.x,d.y)&&0<=I(d.prev,d,d.next))return!1;d=d.prevZ}for(;m&&m.z<=u;){if(m!==e.prev&&m!==e.next&&P(s.x,s.y,r.x,r.y,o.x,o.y,m.x,m.y)&&0<=I(m.prev,m,m.next))return!1;m=m.nextZ}return!0}(e,n,s,r):function(e){var t=e.prev,i=e,n=e.next;if(0<=I(t,i,n))return!1;var s=e.next.next;for(;s!==e.prev;){if(P(t.x,t.y,i.x,i.y,n.x,n.y,s.x,s.y)&&0<=I(s.prev,s,s.next))return!1;s=s.next}return!0}(e))t.push(a.i/i),t.push(e.i/i),t.push(l.i/i),O(e),e=l.next,h=l.next;else if((e=l)===h){o?1===o?T(e=function(e,t,i){var n=e;do{var s=n.prev,r=n.next.next}while(!x(s,r)&&B(s,n,n.next,r)&&w(s,r)&&w(r,s)&&(t.push(s.i/i),t.push(n.i/i),t.push(r.i/i),O(n),O(n.next),n=e=r),n=n.next,n!==e);return n}(e,t,i),t,i,n,s,r,2):2===o&&function(e,t,i,n,s,r){var o=e;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&function(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&B(i,i.next,e,t))return!0}while(i=i.next,i!==e);return!1}(e,t)&&w(e,t)&&w(t,e)&&function(e,t){var i=e,n=!1,s=(e.x+t.x)/2,r=(e.y+t.y)/2;for(;i.y>r!=i.next.y>r&&i.next.y!==i.y&&s<(i.next.x-i.x)*(r-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next,i!==e;);return n}(e,t)}(o,a)){var l=R(o,a);return o=S(o,o.next),l=S(l,l.next),T(o,t,i,n,s,r),T(l,t,i,n,s,r)}a=a.next}}while(o=o.next,o!==e)}(e,t,i,n,s,r):T(S(e),t,i,n,s,r,1);break}}}function _(e,t){return e.x-t.x}function A(e,t,i,n,s){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*s)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*s)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function P(e,t,i,n,s,r,o,a){return 0<=(s-o)*(t-a)-(e-o)*(r-a)&&0<=(e-o)*(n-a)-(i-o)*(t-a)&&0<=(i-o)*(r-a)-(s-o)*(n-a)}function I(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function x(e,t){return e.x===t.x&&e.y===t.y}function B(e,t,i,n){return x(e,t)&&x(i,n)||x(e,n)&&x(i,t)||0<I(e,t,i)!=0<I(e,t,n)&&0<I(i,n,e)!=0<I(i,n,t)}function w(e,t){return I(e.prev,e,e.next)<0?0<=I(e,t,e.next)&&0<=I(e,e.prev,t):I(e,t,e.prev)<0||I(e,e.next,t)<0}function R(e,t){var i=new N(e.i,e.x,e.y),n=new N(t.i,t.x,t.y),s=e.next,r=t.prev;return(e.next=t).prev=e,(i.next=s).prev=i,(n.next=i).prev=n,(r.next=n).prev=r,n}function M(e,t,i,n){i=new N(e,t,i);return n?(i.next=n.next,(i.prev=n).next.prev=i,n.next=i):(i.prev=i).next=i,i}function O(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function N(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function F(e,t,i,n){for(var s=0,r=t,o=i-n;r<i;r+=n)s+=(e[o]-e[r])*(e[r+1]+e[o+1]),o=r;return s}y.deviation=function(e,t,i,n){var s=t&&t.length,r=s?t[0]*i:e.length,o=Math.abs(F(e,0,r,i));if(s)for(var a=0,l=t.length;a<l;a++){var h=t[a]*i,c=a<l-1?t[a+1]*i:e.length;o-=Math.abs(F(e,h,c,i))}for(var p=0,a=0;a<n.length;a+=3){var u=n[a]*i,d=n[a+1]*i,m=n[a+2]*i;p+=Math.abs((e[u]-e[m])*(e[1+d]-e[1+u])-(e[u]-e[d])*(e[1+m]-e[1+u]))}return 0===o&&0===p?0:Math.abs((p-o)/o)},y.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},n=0,s=0;s<e.length;s++){for(var r=0;r<e[s].length;r++)for(var o=0;o<t;o++)i.vertices.push(e[s][r][o]);0<s&&(n+=e[s-1].length,i.holes.push(n))}return i},g.default=v;var D=t(function(x,B){!function(e){var t=B&&!B.nodeType&&B,i=x&&!x.nodeType&&x,n="object"==typeof E&&E;n.global!==n&&n.window!==n&&n.self!==n||(e=n);var s,r,g=2147483647,v=36,y=26,o=38,a=700,l=/^xn--/,h=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},u=v-1,b=Math.floor,S=String.fromCharCode;function T(e){throw RangeError(p[e])}function d(e,t){for(var i=e.length,n=[];i--;)n[i]=t(e[i]);return n}function m(e,t){var i=e.split("@"),n="";return 1<i.length&&(n=i[0]+"@",e=i[1]),n+d((e=e.replace(c,".")).split("."),t).join(".")}function _(e){for(var t,i,n=[],s=0,r=e.length;s<r;)55296<=(t=e.charCodeAt(s++))&&t<=56319&&s<r?56320==(64512&(i=e.charCodeAt(s++)))?n.push(((1023&t)<<10)+(1023&i)+65536):(n.push(t),s--):n.push(t);return n}function f(e){return d(e,function(e){var t="";return 65535<e&&(t+=S((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=S(e)}).join("")}function A(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function P(e,t,i){var n=0;for(e=i?b(e/a):e>>1,e+=b(e/t);u*y>>1<e;n+=v)e=b(e/u);return b(n+(u+1)*e/(e+o))}function I(e){var t,i,n,s,r,o,a,l=[],h=e.length,c=0,p=128,u=72,d=e.lastIndexOf("-");for(d<0&&(d=0),i=0;i<d;++i)128<=e.charCodeAt(i)&&T("not-basic"),l.push(e.charCodeAt(i));for(n=0<d?d+1:0;n<h;){for(s=c,r=1,o=v;h<=n&&T("invalid-input"),a=e.charCodeAt(n++),(v<=(a=a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:v)||a>b((g-c)/r))&&T("overflow"),c+=a*r,!(a<(a=o<=u?1:u+y<=o?y:o-u));o+=v)r>b(g/(a=v-a))&&T("overflow"),r*=a;u=P(c-s,t=l.length+1,0==s),b(c/t)>g-p&&T("overflow"),p+=b(c/t),c%=t,l.splice(c++,0,p)}return f(l)}function C(e){for(var t,i,n,s,r,o,a,l,h,c,p=[],u=(e=_(e)).length,d=128,m=72,f=t=0;f<u;++f)(a=e[f])<128&&p.push(S(a));for(i=n=p.length,n&&p.push("-");i<u;){for(s=g,f=0;f<u;++f)d<=(a=e[f])&&a<s&&(s=a);for(s-d>b((g-t)/(l=i+1))&&T("overflow"),t+=(s-d)*l,d=s,f=0;f<u;++f)if((a=e[f])<d&&++t>g&&T("overflow"),a==d){for(r=t,o=v;!(r<(h=o<=m?1:m+y<=o?y:o-m));o+=v)p.push(S(A(h+(c=r-h)%(h=v-h),0))),r=b(c/h);p.push(S(A(r,0))),m=P(t,l,i==n),t=0,++i}++t,++d}return p.join("")}if(s={version:"1.3.2",ucs2:{decode:_,encode:f},decode:I,encode:C,toASCII:function(e){return m(e,function(e){return h.test(e)?"xn--"+C(e):e})},toUnicode:function(e){return m(e,function(e){return l.test(e)?I(e.slice(4).toLowerCase()):e})}},0,t&&i)if(x.exports==t)i.exports=s;else for(r in s)s.hasOwnProperty(r)&&(t[r]=s[r]);else e.punycode=s}(E)}),L=function(e){return"string"==typeof e},k=function(e){return"object"==typeof e&&null!==e},G=function(e){return null===e},W=function(e){return null==e};function U(e,t,i,n){i=i||"=";var s={};if("string"!=typeof e||0===e.length)return s;var r=/\+/g;e=e.split(t=t||"&"),t=1e3,n&&"number"==typeof n.maxKeys&&(t=n.maxKeys);var o=e.length;0<t&&t<o&&(o=t);for(var a=0;a<o;++a){var l,h=e[a].replace(r,"%20"),c=h.indexOf(i),c=0<=c?(l=h.substr(0,c),h.substr(c+1)):(l=h,""),h=decodeURIComponent(l),c=decodeURIComponent(c);Object.prototype.hasOwnProperty.call(s,h)?Array.isArray(s[h])?s[h].push(c):s[h]=[s[h],c]:s[h]=c}return s}function V(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function H(i,n,s,e){return n=n||"&",s=s||"=","object"==typeof(i=null===i?void 0:i)?Object.keys(i).map(function(e){var t=encodeURIComponent(V(e))+s;return Array.isArray(i[e])?i[e].map(function(e){return t+encodeURIComponent(V(e))}).join(n):t+encodeURIComponent(V(i[e]))}).join(n):e?encodeURIComponent(V(e))+s+encodeURIComponent(V(i)):""}function $(e,t){return he(e,!1,!0).resolve(t)}function X(e,t){return e?he(e,!1,!0).resolveObject(t):t}function Y(e){return(e=L(e)?he(e):e)instanceof K?e.format():K.prototype.format.call(e)}var j=t(function(e,t){t.decode=t.parse=U,t.encode=t.stringify=H}),z=(j.decode,j.parse,j.encode,j.stringify,he),q=K;function K(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Q=/^([a-z0-9.+-]+:)/i,Z=/:[0-9]*$/,J=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,ee=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),te=["'"].concat(ee),ie=["%","/","?",";","#"].concat(te),ne=["/","?","#"],se=/^[+a-z0-9A-Z_-]{0,63}$/,re=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,oe={javascript:!0,"javascript:":!0},ae={javascript:!0,"javascript:":!0},le={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function he(e,t,i){if(e&&k(e)&&e instanceof K)return e;var n=new K;return n.parse(e,t,i),n}K.prototype.parse=function(e,t,i){if(!L(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),s=-1!==n&&n<e.indexOf("#")?"?":"#",n=e.split(s);n[0]=n[0].replace(/\\/g,"/");var r=(r=e=n.join(s)).trim();if(!i&&1===e.split("#").length){var o=J.exec(r);if(o)return this.path=r,this.href=r,this.pathname=o[1],o[2]?(this.search=o[2],this.query=t?j.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var a,o=Q.exec(r);if(o&&(I=(o=o[0]).toLowerCase(),this.protocol=I,r=r.substr(o.length)),(i||o||r.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(a="//"===r.substr(0,2))||o&&ae[o]||(r=r.substr(2),this.slashes=!0)),!ae[o]&&(a||o&&!le[o])){for(var l=-1,h=0;h<ne.length;h++)-1!==(c=r.indexOf(ne[h]))&&(-1===l||c<l)&&(l=c);-1!==(T=-1===l?r.lastIndexOf("@"):r.lastIndexOf("@",l))&&(_=r.slice(0,T),r=r.slice(T+1),this.auth=decodeURIComponent(_));for(var c,l=-1,h=0;h<ie.length;h++)-1!==(c=r.indexOf(ie[h]))&&(-1===l||c<l)&&(l=c);-1===l&&(l=r.length),this.host=r.slice(0,l),r=r.slice(l),this.parseHost(),this.hostname=this.hostname||"";var p="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!p)for(var u=this.hostname.split(/\./),h=0,d=u.length;h<d;h++){var m=u[h];if(m&&!m.match(se)){for(var f="",g=0,v=m.length;g<v;g++)127<m.charCodeAt(g)?f+="x":f+=m[g];if(!f.match(se)){var y=u.slice(0,h),b=u.slice(h+1),S=m.match(re);S&&(y.push(S[1]),b.unshift(S[2])),b.length&&(r="/"+b.join(".")+r),this.hostname=y.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),p||(this.hostname=D.toASCII(this.hostname));var T=this.port?":"+this.port:"",_=this.hostname||"";this.host=_+T,this.href+=this.host,p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!oe[I])for(h=0,d=te.length;h<d;h++){var A,P=te[h];-1!==r.indexOf(P)&&((A=encodeURIComponent(P))===P&&(A=escape(P)),r=r.split(P).join(A))}p=r.indexOf("#");-1!==p&&(this.hash=r.substr(p),r=r.slice(0,p));var I,p=r.indexOf("?");return-1!==p?(this.search=r.substr(p),this.query=r.substr(p+1),t&&(this.query=j.parse(this.query)),r=r.slice(0,p)):t&&(this.search="",this.query={}),r&&(this.pathname=r),le[I]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(T=this.pathname||"",I=this.search||"",this.path=T+I),this.href=this.format(),this},K.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",i=this.pathname||"",n=this.hash||"",s=!1,r="";this.host?s=e+this.host:this.hostname&&(s=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&k(this.query)&&Object.keys(this.query).length&&(r=j.stringify(this.query));r=this.search||r&&"?"+r||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||le[t])&&!1!==s?(s="//"+(s||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):s=s||"",n&&"#"!==n.charAt(0)&&(n="#"+n),r&&"?"!==r.charAt(0)&&(r="?"+r),t+s+(i=i.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(r=r.replace("#","%23"))+n},K.prototype.resolve=function(e){return this.resolveObject(he(e,!1,!0)).format()},K.prototype.resolveObject=function(e){L(e)&&((d=new K).parse(e,!1,!0),e=d);for(var t=new K,i=Object.keys(this),n=0;n<i.length;n++){var s=i[n];t[s]=this[s]}if(t.hash=e.hash,""===e.href)return t.href=t.format(),t;if(e.slashes&&!e.protocol){for(var r=Object.keys(e),o=0;o<r.length;o++){var a=r[o];"protocol"!==a&&(t[a]=e[a])}return le[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(e.protocol&&e.protocol!==t.protocol){if(!le[e.protocol]){for(var l=Object.keys(e),h=0;h<l.length;h++){var c=l[h];t[c]=e[c]}return t.href=t.format(),t}if(t.protocol=e.protocol,e.host||ae[e.protocol])t.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),t.pathname=p.join("/")}return t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,(t.pathname||t.search)&&(m=t.pathname||"",f=t.search||"",t.path=m+f),t.slashes=t.slashes||e.slashes,t.href=t.format(),t}var u=t.pathname&&"/"===t.pathname.charAt(0),d=e.host||e.pathname&&"/"===e.pathname.charAt(0),m=d||u||t.host&&e.pathname,f=m,g=t.pathname&&t.pathname.split("/")||[],p=e.pathname&&e.pathname.split("/")||[],u=t.protocol&&!le[t.protocol];if(u&&(t.hostname="",t.port=null,t.host&&(""===g[0]?g[0]=t.host:g.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),m=m&&(""===p[0]||""===g[0])),d)t.host=(e.host||""===e.host?e:t).host,t.hostname=(e.hostname||""===e.hostname?e:t).hostname,t.search=e.search,t.query=e.query,g=p;else if(p.length)(g=g||[]).pop(),g=g.concat(p),t.search=e.search,t.query=e.query;else if(!W(e.search))return u&&(t.hostname=t.host=g.shift(),(S=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=S.shift(),t.host=t.hostname=S.shift())),t.search=e.search,t.query=e.query,G(t.pathname)&&G(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.href=t.format(),t;if(!g.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var v=g.slice(-1)[0],d=(t.host||e.host||1<g.length)&&("."===v||".."===v)||""===v,y=0,b=g.length;0<=b;b--)"."===(v=g[b])?g.splice(b,1):".."===v?(g.splice(b,1),y++):y&&(g.splice(b,1),y--);if(!m&&!f)for(;y--;)g.unshift("..");!m||""===g[0]||g[0]&&"/"===g[0].charAt(0)||g.unshift(""),d&&"/"!==g.join("/").substr(-1)&&g.push("");var S,d=""===g[0]||g[0]&&"/"===g[0].charAt(0);return u&&(t.hostname=t.host=!d&&g.length?g.shift():"",(S=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=S.shift(),t.host=t.hostname=S.shift())),(m=m||t.host&&g.length)&&!d&&g.unshift(""),g.length?t.pathname=g.join("/"):(t.pathname=null,t.path=null),G(t.pathname)&&G(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t.href=t.format(),t},K.prototype.parseHost=function(){var e=this.host,t=Z.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};var ce={parse:z,resolve:$,resolveObject:X,format:Y,Url:q},pe={WEBGL_LEGACY:0,WEBGL:1,WEBGL2:2},ue={UNKNOWN:0,WEBGL:1,CANVAS:2},de={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19,NONE:20,SRC_OVER:0,SRC_IN:21,SRC_OUT:22,SRC_ATOP:23,DST_OVER:24,DST_IN:25,DST_OUT:26,DST_ATOP:27,ERASE:26,SUBTRACT:28},me={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},fe={RGBA:6408,RGB:6407,ALPHA:6406,LUMINANCE:6409,LUMINANCE_ALPHA:6410,DEPTH_COMPONENT:6402,DEPTH_STENCIL:34041},ge={TEXTURE_2D:3553,TEXTURE_CUBE_MAP:34067,TEXTURE_2D_ARRAY:35866,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074},ve={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_5_6_5:33635,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,FLOAT:5126,HALF_FLOAT:36193},ye={LINEAR:1,NEAREST:0},be={CLAMP:33071,REPEAT:10497,MIRRORED_REPEAT:33648},Se={OFF:0,POW2:1,ON:2},Te={AUTO:0,MANUAL:1},_e={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"};C.RETINA_PREFIX=/@([0-9\.]+)x/;var Ae,Pe=!(C.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0);function Ie(e){Pe||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?window.console.log.apply(console,["\n %c %c %c PixiJS 5.1.3 -  "+e+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):window.console&&window.console.log("PixiJS 5.1.3 - "+e+" - http://www.pixijs.com/"),Pe=!0)}function Ce(){return Ae=void 0===Ae?function(){var e={stencil:!0,failIfMajorPerformanceCaveat:C.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var t,i=document.createElement("canvas"),n=i.getContext("webgl",e)||i.getContext("experimental-webgl",e),s=!(!n||!n.getContextAttributes().stencil);return!n||(t=n.getExtension("WEBGL_lose_context"))&&t.loseContext(),n=null,s}catch(e){return!1}}():Ae}function xe(e,t){return(t=t||[])[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255,t}function Be(e){return e=e.toString(16),"#"+(e="000000".substr(0,6-e.length)+e)}function Ee(e){return"string"==typeof e&&"#"===e[0]&&(e=e.substr(1)),parseInt(e,16)}var we=function(){for(var e=[],t=[],i=0;i<32;i++)t[e[i]=i]=i;e[de.NORMAL_NPM]=de.NORMAL,e[de.ADD_NPM]=de.ADD,e[de.SCREEN_NPM]=de.SCREEN,t[de.NORMAL]=de.NORMAL_NPM,t[de.ADD]=de.ADD_NPM,t[de.SCREEN]=de.SCREEN_NPM;var n=[];return n.push(t),n.push(e),n}();function Re(e,t){return we[t?1:0][e]}function Me(e,t,i,n){return i=i||new Float32Array(4),n||void 0===n?(i[0]=e[0]*t,i[1]=e[1]*t,i[2]=e[2]*t):(i[0]=e[0],i[1]=e[1],i[2]=e[2]),i[3]=t,i}function Oe(e,t){return 1===t?(255*t<<24)+e:0===t?0:(255*t<<24)+(((e>>16&255)*t+.5|0)<<16)+(((e>>8&255)*t+.5|0)<<8)+((255&e)*t+.5|0)}function Ne(e,t,i,n){return(i=i||new Float32Array(4))[0]=(e>>16&255)/255,i[1]=(e>>8&255)/255,i[2]=(255&e)/255,!n&&void 0!==n||(i[0]*=t,i[1]*=t,i[2]*=t),i[3]=t,i}function Fe(e,t){var i=6*e;if((t=(t=void 0===t?null:t)||new Uint16Array(i)).length!==i)throw new Error("Out buffer length is incorrect, got "+t.length+" and expected "+i);for(var n=0,s=0;n<i;n+=6,s+=4)t[n+0]=s+0,t[n+1]=s+1,t[n+2]=s+2,t[n+3]=s+0,t[n+4]=s+2,t[n+5]=s+3;return t}function De(e,t,i){var n=e.length;if(!(n<=t||0===i)){for(var s=n-(i=n<t+i?n-t:i),r=t;r<s;++r)e[r]=e[r+i];e.length=s}}var Le=0;function ke(){return++Le}function Ge(e){return 0===e?0:e<0?-1:1}function We(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1}function Ue(e){return!(e&e-1||!e)}function Ve(e){var t=(65535<e)<<4,i=(255<(e>>>=t))<<3;return t|=i,t|=i=(15<(e>>>=i))<<2,(t|=i=(3<(e>>>=i))<<1)|(e>>>=i)>>1}var He={},$e=Object.create(null),Xe=Object.create(null);function Ye(e){for(var t,i,n=e.width,s=e.height,r=e.getContext("2d"),o=r.getImageData(0,0,n,s).data,a=o.length,l={top:null,left:null,right:null,bottom:null},e=null,h=0;h<a;h+=4)0!==o[h+3]&&(t=h/4%n,i=~~(h/4/n),null===l.top&&(l.top=i),(null===l.left||t<l.left)&&(l.left=t),(null===l.right||l.right<t)&&(l.right=1+t),(null===l.bottom||l.bottom<i)&&(l.bottom=i));return null!==l.top&&(n=l.right-l.left,s=l.bottom-l.top+1,e=r.getImageData(l.left,l.top,n,s)),{height:s,width:n,data:e}}function je(e,t,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||C.RESOLUTION,this.resize(e,t)}var ze={width:{configurable:!0},height:{configurable:!0}};je.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},je.prototype.resize=function(e,t){this.canvas.width=e*this.resolution,this.canvas.height=t*this.resolution},je.prototype.destroy=function(){this.context=null,this.canvas=null},ze.width.get=function(){return this.canvas.width},ze.width.set=function(e){this.canvas.width=e},ze.height.get=function(){return this.canvas.height},ze.height.set=function(e){this.canvas.height=e},Object.defineProperties(je.prototype,ze);var qe,Ke=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function Qe(e,t){if(void 0===t&&(t=window.location),0===e.indexOf("data:"))return"";t=t||window.location,(qe=qe||document.createElement("a")).href=e;var i=!(e=ce.parse(qe.href)).port&&""===t.port||e.port===t.port;return e.hostname===t.hostname&&i&&e.protocol===t.protocol?"":"anonymous"}function Ze(e,t){e=C.RETINA_PREFIX.exec(e);return e?parseFloat(e[1]):void 0!==t?t:1}var Je={};function et(e,t,i){var n;void 0===i&&(i=3),Je[t]||(void 0===(n=(new Error).stack)?console.warn("PixiJS Deprecation Warning: ",t+"\nDeprecated since v"+e):(n=n.split("\n").splice(i).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t+"\nDeprecated since v"+e),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",t+"\nDeprecated since v"+e),console.warn(n))),Je[t]=!0)}var tt={BaseTextureCache:Xe,CanvasRenderTarget:je,DATA_URI:Ke,ProgramCache:He,TextureCache:$e,clearTextureCache:function(){for(var e in $e)delete $e[e];for(e in Xe)delete Xe[e]},correctBlendMode:Re,createIndicesForQuads:Fe,decomposeDataUri:function(e){if(e=Ke.exec(e))return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}},deprecation:et,destroyTextureCache:function(){for(var e in $e)$e[e].destroy();for(e in Xe)Xe[e].destroy()},determineCrossOrigin:Qe,getResolutionOfUrl:Ze,hex2rgb:xe,hex2string:Be,isPow2:Ue,isWebGLSupported:Ce,log2:Ve,nextPow2:We,premultiplyBlendMode:we,premultiplyRgba:Me,premultiplyTint:Oe,premultiplyTintToRgba:Ne,removeItems:De,rgb2hex:function(e){return(255*e[0]<<16)+(255*e[1]<<8)+(255*e[2]|0)},sayHello:Ie,sign:Ge,skipHello:function(){Pe=!0},string2hex:Ee,trimCanvas:Ye,uid:ke,isMobile:m,EventEmitter:f,earcut:g,url:ce},it=function(e,t){void 0===t&&(t=0),this.x=e=void 0===e?0:e,this.y=t};it.prototype.clone=function(){return new it(this.x,this.y)},it.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},it.prototype.copyTo=function(e){return e.set(this.x,this.y),e},it.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},it.prototype.set=function(e,t){this.x=e||0,this.y=t||(0!==t?this.x:0)};function nt(e,t,i,n){void 0===n&&(n=0),this._x=i=void 0===i?0:i,this._y=n,this.cb=e,this.scope=t}var st={x:{configurable:!0},y:{configurable:!0}};nt.prototype.clone=function(e,t){e=(e=void 0===e?null:e)||this.cb,t=(t=void 0===t?null:t)||this.scope;return new nt(e,t,this._x,this._y)},nt.prototype.set=function(e,t){e=e||0,t=t||(0!==t?e:0);this._x===e&&this._y===t||(this._x=e,this._y=t,this.cb.call(this.scope))},nt.prototype.copyFrom=function(e){return this._x===e.x&&this._y===e.y||(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},nt.prototype.copyTo=function(e){return e.set(this._x,this._y),e},nt.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},st.x.get=function(){return this._x},st.x.set=function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))},st.y.get=function(){return this._y},st.y.set=function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))},Object.defineProperties(nt.prototype,st);function rt(e,t,i,n,s,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===s&&(s=0),void 0===r&&(r=0),this.a=e=void 0===e?1:e,this.b=t,this.c=i,this.d=n,this.tx=s,this.ty=r,this.array=null}var ot=2*Math.PI,at=180/Math.PI,lt=Math.PI/180,ht={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},ct={IDENTITY:{configurable:!0},TEMP_MATRIX:{configurable:!0}};rt.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},rt.prototype.set=function(e,t,i,n,s,r){return this.a=e,this.b=t,this.c=i,this.d=n,this.tx=s,this.ty=r,this},rt.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));t=t||this.array;return e?(t[0]=this.a,t[1]=this.b,t[2]=0,t[3]=this.c,t[4]=this.d,t[5]=0,t[6]=this.tx,t[7]=this.ty):(t[0]=this.a,t[1]=this.c,t[2]=this.tx,t[3]=this.b,t[4]=this.d,t[5]=this.ty,t[6]=0,t[7]=0),t[8]=1,t},rt.prototype.apply=function(e,t){t=t||new it;var i=e.x,e=e.y;return t.x=this.a*i+this.c*e+this.tx,t.y=this.b*i+this.d*e+this.ty,t},rt.prototype.applyInverse=function(e,t){t=t||new it;var i=1/(this.a*this.d+this.c*-this.b),n=e.x,e=e.y;return t.x=this.d*i*n+-this.c*i*e+(this.ty*this.c-this.tx*this.d)*i,t.y=this.a*i*e+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,t},rt.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},rt.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},rt.prototype.rotate=function(e){var t=Math.cos(e),i=Math.sin(e),n=this.a,s=this.c,e=this.tx;return this.a=n*t-this.b*i,this.b=n*i+this.b*t,this.c=s*t-this.d*i,this.d=s*i+this.d*t,this.tx=e*t-this.ty*i,this.ty=e*i+this.ty*t,this},rt.prototype.append=function(e){var t=this.a,i=this.b,n=this.c,s=this.d;return this.a=e.a*t+e.b*n,this.b=e.a*i+e.b*s,this.c=e.c*t+e.d*n,this.d=e.c*i+e.d*s,this.tx=e.tx*t+e.ty*n+this.tx,this.ty=e.tx*i+e.ty*s+this.ty,this},rt.prototype.setTransform=function(e,t,i,n,s,r,o,a,l){return this.a=Math.cos(o+l)*s,this.b=Math.sin(o+l)*s,this.c=-Math.sin(o-a)*r,this.d=Math.cos(o-a)*r,this.tx=e-(i*this.a+n*this.c),this.ty=t-(i*this.b+n*this.d),this},rt.prototype.prepend=function(e){var t,i,n=this.tx;return 1===e.a&&0===e.b&&0===e.c&&1===e.d||(t=this.a,i=this.c,this.a=t*e.a+this.b*e.c,this.b=t*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d),this.tx=n*e.a+this.ty*e.c+e.tx,this.ty=n*e.b+this.ty*e.d+e.ty,this},rt.prototype.decompose=function(e){var t=this.a,i=this.b,n=this.c,s=this.d,r=-Math.atan2(-n,s),o=Math.atan2(i,t),a=Math.abs(r+o);return a<1e-5||Math.abs(ot-a)<1e-5?(e.rotation=o,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=r,e.skew.y=o),e.scale.x=Math.sqrt(t*t+i*i),e.scale.y=Math.sqrt(n*n+s*s),e.position.x=this.tx,e.position.y=this.ty,e},rt.prototype.invert=function(){var e=this.a,t=this.b,i=this.c,n=this.d,s=this.tx,r=e*n-t*i;return this.a=n/r,this.b=-t/r,this.c=-i/r,this.d=e/r,this.tx=(i*this.ty-n*s)/r,this.ty=-(e*this.ty-t*s)/r,this},rt.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},rt.prototype.clone=function(){var e=new rt;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},rt.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},rt.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},ct.IDENTITY.get=function(){return new rt},ct.TEMP_MATRIX.get=function(){return new rt},Object.defineProperties(rt,ct);var pt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ut=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],dt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],mt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],ft=[],gt=[],vt=Math.sign;!function(){for(var e=0;e<16;e++){var t=[];ft.push(t);for(var i=0;i<16;i++)for(var n=vt(pt[e]*pt[i]+dt[e]*ut[i]),s=vt(ut[e]*pt[i]+mt[e]*ut[i]),r=vt(pt[e]*dt[i]+dt[e]*mt[i]),o=vt(ut[e]*dt[i]+mt[e]*mt[i]),a=0;a<16;a++)if(pt[a]===n&&ut[a]===s&&dt[a]===r&&mt[a]===o){t.push(a);break}}for(var l=0;l<16;l++){var h=new rt;h.set(pt[l],ut[l],dt[l],mt[l],0,0),gt.push(h)}}();function yt(){this.worldTransform=new rt,this.localTransform=new rt,this.position=new nt(this.onChange,this,0,0),this.scale=new nt(this.onChange,this,1,1),this.pivot=new nt(this.onChange,this,0,0),this.skew=new nt(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}var bt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(e){return pt[e]},uY:function(e){return ut[e]},vX:function(e){return dt[e]},vY:function(e){return mt[e]},inv:function(e){return 8&e?15&e:7&-e},add:function(e,t){return ft[e][t]},sub:function(e,t){return ft[e][bt.inv(t)]},rotate180:function(e){return 4^e},isVertical:function(e){return 2==(3&e)},byDirection:function(e,t){return 2*Math.abs(e)<=Math.abs(t)?0<=t?bt.S:bt.N:2*Math.abs(t)<=Math.abs(e)?0<e?bt.E:bt.W:0<t?0<e?bt.SE:bt.SW:0<e?bt.NE:bt.NW},matrixAppendRotationInv:function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=0);t=gt[bt.inv(t)];t.tx=i,t.ty=n,e.append(t)}},St={rotation:{configurable:!0}};yt.prototype.onChange=function(){this._localID++},yt.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},yt.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},yt.prototype.updateTransform=function(e){var t,i,n=this.localTransform;this._localID!==this._currentLocalID&&(n.a=this._cx*this.scale._x,n.b=this._sx*this.scale._x,n.c=this._cy*this.scale._y,n.d=this._sy*this.scale._y,n.tx=this.position._x-(this.pivot._x*n.a+this.pivot._y*n.c),n.ty=this.position._y-(this.pivot._x*n.b+this.pivot._y*n.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID&&(t=e.worldTransform,(i=this.worldTransform).a=n.a*t.a+n.b*t.c,i.b=n.a*t.b+n.b*t.d,i.c=n.c*t.a+n.d*t.c,i.d=n.c*t.b+n.d*t.d,i.tx=n.tx*t.a+n.ty*t.c+t.tx,i.ty=n.tx*t.b+n.ty*t.d+t.ty,this._parentID=e._worldID,this._worldID++)},yt.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},St.rotation.get=function(){return this._rotation},St.rotation.set=function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())},Object.defineProperties(yt.prototype,St),yt.IDENTITY=new yt;function Tt(e,t,i,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=Number(e),this.y=Number(t),this.width=Number(i),this.height=Number(n),this.type=ht.RECT}var _t={left:{configurable:!0},right:{configurable:!0},top:{configurable:!0},bottom:{configurable:!0}},At={EMPTY:{configurable:!0}};_t.left.get=function(){return this.x},_t.right.get=function(){return this.x+this.width},_t.top.get=function(){return this.y},_t.bottom.get=function(){return this.y+this.height},At.EMPTY.get=function(){return new Tt(0,0,0,0)},Tt.prototype.clone=function(){return new Tt(this.x,this.y,this.width,this.height)},Tt.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},Tt.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},Tt.prototype.contains=function(e,t){return!(this.width<=0||this.height<=0)&&(e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height)},Tt.prototype.pad=function(e,t){e=e||0,t=t||(0!==t?e:0),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t},Tt.prototype.fit=function(e){var t=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),n=Math.max(this.y,e.y),e=Math.min(this.y+this.height,e.y+e.height);this.x=t,this.width=Math.max(i-t,0),this.y=n,this.height=Math.max(e-n,0)},Tt.prototype.ceil=function(e,t){void 0===e&&(e=1),void 0===t&&(t=.001);var i=Math.ceil((this.x+this.width-t)*e)/e,n=Math.ceil((this.y+this.height-t)*e)/e;this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=i-this.x,this.height=n-this.y},Tt.prototype.enlarge=function(e){var t=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),n=Math.min(this.y,e.y),e=Math.max(this.y+this.height,e.y+e.height);this.x=t,this.width=i-t,this.y=n,this.height=e-n},Object.defineProperties(Tt.prototype,_t),Object.defineProperties(Tt,At);function Pt(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.x=e=void 0===e?0:e,this.y=t,this.radius=i,this.type=ht.CIRC}Pt.prototype.clone=function(){return new Pt(this.x,this.y,this.radius)},Pt.prototype.contains=function(e,t){if(this.radius<=0)return!1;var i=this.radius*this.radius,e=this.x-e,t=this.y-t;return(e*=e)+(t*=t)<=i},Pt.prototype.getBounds=function(){return new Tt(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)};function It(e,t,i,n){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=e=void 0===e?0:e,this.y=t,this.width=i,this.height=n,this.type=ht.ELIP}It.prototype.clone=function(){return new It(this.x,this.y,this.width,this.height)},It.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;e=(e-this.x)/this.width,t=(t-this.y)/this.height;return(e*=e)+(t*=t)<=1},It.prototype.getBounds=function(){return new Tt(this.x-this.width,this.y-this.height,this.width,this.height)};function Ct(){for(var e=arguments,t=[],i=arguments.length;i--;)t[i]=e[i];if((t=Array.isArray(t[0])?t[0]:t)[0]instanceof it){for(var n=[],s=0,r=t.length;s<r;s++)n.push(t[s].x,t[s].y);t=n}this.points=t,this.type=ht.POLY,this.closeStroke=!0}Ct.prototype.clone=function(){var e=new Ct(this.points.slice());return e.closeStroke=this.closeStroke,e},Ct.prototype.contains=function(e,t){for(var i=!1,n=this.points.length/2,s=0,r=n-1;s<n;r=s++){var o=this.points[2*s],a=this.points[2*s+1],l=this.points[2*r],h=this.points[2*r+1];t<a!=t<h&&e<(t-a)/(h-a)*(l-o)+o&&(i=!i)}return i};function xt(e,t,i,n,s){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=20),this.x=e=void 0===e?0:e,this.y=t,this.width=i,this.height=n,this.radius=s,this.type=ht.RREC}xt.prototype.clone=function(){return new xt(this.x,this.y,this.width,this.height,this.radius)},C.SORTABLE_CHILDREN=!(xt.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){if(t>=this.y+this.radius&&t<=this.y+this.height-this.radius||e>=this.x+this.radius&&e<=this.x+this.width-this.radius)return!0;var i=e-(this.x+this.radius),n=t-(this.y+this.radius),s=this.radius*this.radius;if(i*i+n*n<=s)return!0;if((i=e-(this.x+this.width-this.radius))*i+n*n<=s)return!0;if(i*i+(n=t-(this.y+this.height-this.radius))*n<=s)return!0;if((i=e-(this.x+this.radius))*i+n*n<=s)return!0}return!1});function Bt(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}Bt.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},Bt.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},Bt.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?Tt.EMPTY:((e=e||new Tt(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},Bt.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},Bt.prototype.addQuad=function(e){var t=this.minX,i=this.minY,n=this.maxX,s=this.maxY,r=e[0],o=e[1],t=r<t?r:t,i=o<i?o:i,n=n<r?r:n,s=s<o?o:s;t=(r=e[2])<t?r:t,i=(o=e[3])<i?o:i,n=n<r?r:n,s=s<o?o:s,t=(r=e[4])<t?r:t,i=(o=e[5])<i?o:i,n=n<r?r:n,s=s<o?o:s,r=e[6],i=(o=e[7])<i?o:i,n=n<r?r:n,s=s<o?o:s,this.minX=t=r<t?r:t,this.minY=i,this.maxX=n,this.maxY=s},Bt.prototype.addFrame=function(e,t,i,n,s){var r=e.worldTransform,o=r.a,a=r.b,l=r.c,h=r.d,c=r.tx,p=r.ty,u=o*t+l*i+c,d=a*t+h*i+p,m=u<(m=this.minX)?u:m,f=d<(f=this.minY)?d:f,e=(e=this.maxX)<u?u:e,r=(r=this.maxY)<d?d:r;m=(u=o*n+l*i+c)<m?u:m,f=(d=a*n+h*i+p)<f?d:f,e=e<u?u:e,r=r<d?d:r,m=(u=o*t+l*s+c)<m?u:m,f=(d=a*t+h*s+p)<f?d:f,r=r<d?d:r,f=(d=a*n+h*s+p)<f?d:f,e=(e=e<u?u:e)<(u=o*n+l*s+c)?u:e,r=r<d?d:r,this.minX=m=u<m?u:m,this.minY=f,this.maxX=e,this.maxY=r},Bt.prototype.addVertexData=function(e,t,i){for(var n=this.minX,s=this.minY,r=this.maxX,o=this.maxY,a=t;a<i;a+=2)var l=e[a],h=e[a+1],n=l<n?l:n,s=h<s?h:s,r=r<l?l:r,o=o<h?h:o;this.minX=n,this.minY=s,this.maxX=r,this.maxY=o},Bt.prototype.addVertices=function(e,t,i,n){for(var e=e.worldTransform,s=e.a,r=e.b,o=e.c,a=e.d,l=e.tx,h=e.ty,c=this.minX,p=this.minY,u=this.maxX,d=this.maxY,m=i;m<n;m+=2)var f=t[m],g=t[m+1],v=s*f+o*g+l,f=a*g+r*f+h,c=v<c?v:c,p=f<p?f:p,u=u<v?v:u,d=d<f?f:d;this.minX=c,this.minY=p,this.maxX=u,this.maxY=d},Bt.prototype.addBounds=function(e){var t=this.minX,i=this.minY,n=this.maxX,s=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<i?e.minY:i,this.maxX=e.maxX>n?e.maxX:n,this.maxY=e.maxY>s?e.maxY:s},Bt.prototype.addBoundsMask=function(e,t){var i,n,s=(e.minX>t.minX?e:t).minX,r=(e.minY>t.minY?e:t).minY,o=(e.maxX<t.maxX?e:t).maxX,a=(e.maxY<t.maxY?e:t).maxY;s<=o&&r<=a&&(i=this.minX,n=this.minY,e=this.maxX,t=this.maxY,this.minX=s<i?s:i,this.minY=r<n?r:n,this.maxX=e<o?o:e,this.maxY=t<a?a:t)},Bt.prototype.addBoundsArea=function(e,t){var i,n,s=e.minX>t.x?e.minX:t.x,r=e.minY>t.y?e.minY:t.y,o=e.maxX<t.x+t.width?e.maxX:t.x+t.width,a=e.maxY<t.y+t.height?e.maxY:t.y+t.height;s<=o&&r<=a&&(i=this.minX,n=this.minY,e=this.maxX,t=this.maxY,this.minX=s<i?s:i,this.minY=r<n?r:n,this.maxX=e<o?o:e,this.maxY=t<a?a:t)};var Et=function(e){function s(){e.call(this),this.tempDisplayObjectParent=null,this.transform=new yt,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Bt,this._boundsID=0,this._lastBoundsID=-1,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._destroyed=!1,this.isSprite=!1}e&&(s.__proto__=e);var t={_tempDisplayObjectParent:{configurable:!0},x:{configurable:!0},y:{configurable:!0},worldTransform:{configurable:!0},localTransform:{configurable:!0},position:{configurable:!0},scale:{configurable:!0},pivot:{configurable:!0},skew:{configurable:!0},rotation:{configurable:!0},angle:{configurable:!0},zIndex:{configurable:!0},worldVisible:{configurable:!0},mask:{configurable:!0}};return((s.prototype=Object.create(e&&e.prototype)).constructor=s).mixin=function(e){for(var t=Object.keys(e),i=0;i<t.length;++i){var n=t[i];Object.defineProperty(s.prototype,n,Object.getOwnPropertyDescriptor(e,n))}},t._tempDisplayObjectParent.get=function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new s),this.tempDisplayObjectParent},s.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},s.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},s.prototype.getBounds=function(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&(this.calculateBounds(),this._lastBoundsID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new Tt),t=this._boundsRect),this._bounds.getRectangle(t)},s.prototype.getLocalBounds=function(e){var t=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,e||(this._localBoundsRect||(this._localBoundsRect=new Tt),e=this._localBoundsRect);e=this.getBounds(!1,e);return this.parent=i,this.transform=t,e},s.prototype.toGlobal=function(e,t,i){return(i=void 0===i?!1:i)||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)},s.prototype.toLocal=function(e,t,i,n){return t&&(e=t.toGlobal(e,i,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,i)},s.prototype.render=function(e){},s.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},s.prototype.setTransform=function(e,t,i,n,s,r,o,a,l){return void 0===t&&(t=0),void 0===i&&(i=1),void 0===n&&(n=1),void 0===s&&(s=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===l&&(l=0),this.position.x=e=void 0===e?0:e,this.position.y=t,this.scale.x=i||1,this.scale.y=n||1,this.rotation=s,this.skew.x=r,this.skew.y=o,this.pivot.x=a,this.pivot.y=l,this},s.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},t.x.get=function(){return this.position.x},t.x.set=function(e){this.transform.position.x=e},t.y.get=function(){return this.position.y},t.y.set=function(e){this.transform.position.y=e},t.worldTransform.get=function(){return this.transform.worldTransform},t.localTransform.get=function(){return this.transform.localTransform},t.position.get=function(){return this.transform.position},t.position.set=function(e){this.transform.position.copyFrom(e)},t.scale.get=function(){return this.transform.scale},t.scale.set=function(e){this.transform.scale.copyFrom(e)},t.pivot.get=function(){return this.transform.pivot},t.pivot.set=function(e){this.transform.pivot.copyFrom(e)},t.skew.get=function(){return this.transform.skew},t.skew.set=function(e){this.transform.skew.copyFrom(e)},t.rotation.get=function(){return this.transform.rotation},t.rotation.set=function(e){this.transform.rotation=e},t.angle.get=function(){return this.transform.rotation*at},t.angle.set=function(e){this.transform.rotation=e*lt},t.zIndex.get=function(){return this._zIndex},t.zIndex.set=function(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)},t.worldVisible.get=function(){var e=this;do{if(!e.visible)return!1}while(e=e.parent);return!0},t.mask.get=function(){return this._mask},t.mask.set=function(e){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=e,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)},Object.defineProperties(s.prototype,t),s}(f);function wt(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}Et.prototype.displayObjectUpdateTransform=Et.prototype.updateTransform;var Rt=function(s){function e(){s.call(this),this.children=[],this.sortableChildren=C.SORTABLE_CHILDREN,this.sortDirty=!1}s&&(e.__proto__=s);var t={width:{configurable:!0},height:{configurable:!0}};return((e.prototype=Object.create(s&&s.prototype)).constructor=e).prototype.onChildrenChange=function(){},e.prototype.addChild=function(e){var t=arguments,i=arguments.length;if(1<i)for(var n=0;n<i;n++)this.addChild(t[n]);else e.parent&&e.parent.removeChild(e),(e.parent=this).sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this);return e},e.prototype.addChildAt=function(e,t){if(t<0||t>this.children.length)throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),(e.parent=this).sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e},e.prototype.swapChildren=function(e,t){var i,n;e!==t&&(i=this.getChildIndex(e),n=this.getChildIndex(t),this.children[i]=t,this.children[n]=e,this.onChildrenChange(i<n?i:n))},e.prototype.getChildIndex=function(e){e=this.children.indexOf(e);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(e,t){if(t<0||t>=this.children.length)throw new Error("The index "+t+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(e);De(this.children,i,1),this.children.splice(t,0,e),this.onChildrenChange(t)},e.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},e.prototype.removeChild=function(e){var t=arguments,i=arguments.length;if(1<i)for(var n=0;n<i;n++)this.removeChild(t[n]);else{var s=this.children.indexOf(e);if(-1===s)return null;e.parent=null,e.transform._parentID=-1,De(this.children,s,1),this._boundsID++,this.onChildrenChange(s),e.emit("removed",this),this.emit("childRemoved",e,this,s)}return e},e.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,De(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t},e.prototype.removeChildren=function(e,t){var i=e=void 0===e?0:e,n="number"==typeof t?t:this.children.length,t=n-i;if(0<t&&t<=n){for(var s=this.children.splice(i,t),r=0;r<s.length;++r)s[r].parent=null,s[r].transform&&(s[r].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var o=0;o<s.length;++o)s[o].emit("removed",this),this.emit("childRemoved",s[o],this,o);return s}if(0==t&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var e=!1,t=0,i=this.children.length;t<i;++t){var n=this.children[t];n._lastSortedIndex=t,e||0===n.zIndex||(e=!0)}e&&1<this.children.length&&this.children.sort(wt),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,t=this.children.length;e<t;++e){var i=this.children[e];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var t=this.children[e];t.visible&&t.renderable&&(t.calculateBounds(),t._mask?(t._mask.calculateBounds(),this._bounds.addBoundsMask(t._bounds,t._mask._bounds)):t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds))}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.render=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(e);else{this._render(e);for(var t=0,i=this.children.length;t<i;++t)this.children[t].render(e)}},e.prototype.renderAdvanced=function(e){e.batch.flush();var t=this.filters,i=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]);for(var n=this._enabledFilters.length=0;n<t.length;n++)t[n].enabled&&this._enabledFilters.push(t[n]);this._enabledFilters.length&&e.filter.push(this,this._enabledFilters)}i&&e.mask.push(this,this._mask),this._render(e);for(var s=0,r=this.children.length;s<r;s++)this.children[s].render(e);e.batch.flush(),i&&e.mask.pop(this,this._mask),t&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()},e.prototype._render=function(e){},e.prototype.destroy=function(e){s.prototype.destroy.call(this),this.sortDirty=!1;var t="boolean"==typeof e?e:e&&e.children,i=this.removeChildren(0,this.children.length);if(t)for(var n=0;n<i.length;++n)i[n].destroy(e)},t.width.get=function(){return this.scale.x*this.getLocalBounds().width},t.width.set=function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e},t.height.get=function(){return this.scale.y*this.getLocalBounds().height},t.height.set=function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e},Object.defineProperties(e.prototype,t),e}(Et);Rt.prototype.containerUpdateTransform=Rt.prototype.updateTransform;var Mt={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1};Et.mixin(Mt);function Ot(e){this._hookDiv=null,(m.tablet||m.phone)&&this.createTouchHook();var t=document.createElement("div");t.style.width="100px",t.style.height="100px",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.zIndex=2,this.div=t,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=e,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessibility=!1,window.addEventListener("keydown",this._onKeyDown,!1)}Ot.prototype.createTouchHook=function(){var e=this,t=document.createElement("button");t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.zIndex=2,t.style.backgroundColor="#FF0000",t.title="HOOK DIV",t.addEventListener("focus",function(){e.isMobileAccessibility=!0,e.activate(),e.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t},Ot.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},Ot.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},Ot.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessibility&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},Ot.prototype.updateAccessibleObjects=function(e){if(e.visible){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);for(var t=e.children,i=0;i<t.length;i++)this.updateAccessibleObjects(t[i])}},Ot.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),t=e.width/this.renderer.width,i=e.height/this.renderer.height;(s=this.div).style.left=e.left+"px",s.style.top=e.top+"px",s.style.width=this.renderer.width+"px",s.style.height=this.renderer.height+"px";for(var n=0;n<this.children.length;n++){var s,r,o,a=this.children[n];a.renderId!==this.renderId?(a._accessibleActive=!1,De(this.children,n,1),this.div.removeChild(a._accessibleDiv),this.pool.push(a._accessibleDiv),a._accessibleDiv=null,n--,0===this.children.length&&this.deactivate()):(s=a._accessibleDiv,r=a.hitArea,o=a.worldTransform,a.hitArea?(s.style.left=(o.tx+r.x*o.a)*t+"px",s.style.top=(o.ty+r.y*o.d)*i+"px",s.style.width=r.width*o.a*t+"px",s.style.height=r.height*o.d*i+"px"):(r=a.getBounds(),this.capHitArea(r),s.style.left=r.x*t+"px",s.style.top=r.y*i+"px",s.style.width=r.width*t+"px",s.style.height=r.height*i+"px",s.title!==a.accessibleTitle&&null!==a.accessibleTitle&&(s.title=a.accessibleTitle),s.getAttribute("aria-label")!==a.accessibleHint&&null!==a.accessibleHint&&s.setAttribute("aria-label",a.accessibleHint)))}this.renderId++}},Ot.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0),e.x+e.width>this.renderer.width&&(e.width=this.renderer.width-e.x),e.y+e.height>this.renderer.height&&(e.height=this.renderer.height-e.y)},Ot.prototype.addChild=function(e){var t=this.pool.pop();t||((t=document.createElement("button")).style.width="100px",t.style.height="100px",t.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=2,t.style.borderStyle="none",-1<navigator.userAgent.toLowerCase().indexOf("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),e.accessibleTitle&&null!==e.accessibleTitle?t.title=e.accessibleTitle:e.accessibleHint&&null!==e.accessibleHint||(t.title="displayObject "+e.tabIndex),e.accessibleHint&&null!==e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),e._accessibleActive=!0,(e._accessibleDiv=t).displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},Ot.prototype._onClick=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"click",t.eventData),t.dispatchEvent(e.target.displayObject,"pointertap",t.eventData),t.dispatchEvent(e.target.displayObject,"tap",t.eventData)},Ot.prototype._onFocus=function(e){e.target.getAttribute("aria-live","off")||e.target.setAttribute("aria-live","assertive");var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseover",t.eventData)},Ot.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live","off")||e.target.setAttribute("aria-live","polite");var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseout",t.eventData)},Ot.prototype._onKeyDown=function(e){9===e.keyCode&&this.activate()},Ot.prototype._onMouseMove=function(e){0===e.movementX&&0===e.movementY||this.deactivate()},Ot.prototype.destroy=function(){this.destroyTouchHook(),this.div=null;for(var e=0;e<this.children.length;e++)this.children[e].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null};function Nt(e){this.items=[],this._name=e,this._aliasCount=0}var Ft={AccessibilityManager:Ot,accessibleTarget:Mt},Dt={empty:{configurable:!0},name:{configurable:!0}};Nt.prototype.emit=function(e,t,i,n,s,r,o,a){if(8<arguments.length)throw new Error("max arguments reached");var l=this.name,h=this.items;this._aliasCount++;for(var c=0,p=h.length;c<p;c++)h[c][l](e,t,i,n,s,r,o,a);return h===this.items&&this._aliasCount--,this},Nt.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},Nt.prototype.add=function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this},Nt.prototype.remove=function(e){e=this.items.indexOf(e);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},Nt.prototype.contains=function(e){return-1!==this.items.indexOf(e)},Nt.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},Nt.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Dt.empty.get=function(){return 0===this.items.length},Dt.name.get=function(){return this._name},Object.defineProperties(Nt.prototype,Dt),Nt.prototype.dispatch=Nt.prototype.emit,Nt.prototype.run=Nt.prototype.emit,C.TARGET_FPMS=.06;function Lt(e,t,i,n){void 0===t&&(t=null),void 0===i&&(i=0),void 0===n&&(n=!1),this.fn=e,this.context=t,this.priority=i,this.once=n,this.next=null,this.previous=null,this._destroyed=!1}var kt={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50};Lt.prototype.match=function(e,t){return t=t||null,this.fn===e&&this.context===t},Lt.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},Lt.prototype.connect=function(e){(this.previous=e).next&&(e.next.previous=this),this.next=e.next,e.next=this},Lt.prototype.destroy=function(e){void 0===e&&(e=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=e?null:t,this.previous=null,t};function Gt(){var t=this;this._head=new Lt(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/C.TARGET_FPMS,this.elapsedMS=1/C.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}var Wt={FPS:{configurable:!0},minFPS:{configurable:!0},maxFPS:{configurable:!0}},Ut={shared:{configurable:!0},system:{configurable:!0}};Gt.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},Gt.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},Gt.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},Gt.prototype.add=function(e,t,i){return this._addListener(new Lt(e,t,i=void 0===i?kt.NORMAL:i))},Gt.prototype.addOnce=function(e,t,i){return this._addListener(new Lt(e,t,i=void 0===i?kt.NORMAL:i,!0))},Gt.prototype._addListener=function(e){var t=this._head.next,i=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(i);break}t=(i=t).next}e.previous||e.connect(i)}else e.connect(i);return this._startIfPossible(),this},Gt.prototype.remove=function(e,t){for(var i=this._head.next;i;)i=i.match(e,t)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},Gt.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},Gt.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},Gt.prototype.destroy=function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},Gt.prototype.update=function(e){if((e=void 0===e?performance.now():e)>this.lastTime){if((i=this.elapsedMS=e-this.lastTime)>this._maxElapsedMS&&(i=this._maxElapsedMS),i*=this.speed,this._minElapsedMS){var t=e-this._lastFrame|0;if(t<this._minElapsedMS)return;this._lastFrame=e-t%this._minElapsedMS}this.deltaMS=i,this.deltaTime=this.deltaMS*C.TARGET_FPMS;for(var i=this._head,n=i.next;n;)n=n.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e},Wt.FPS.get=function(){return 1e3/this.elapsedMS},Wt.minFPS.get=function(){return 1e3/this._maxElapsedMS},Wt.minFPS.set=function(e){e=Math.min(this.maxFPS,e),e=Math.min(Math.max(0,e)/1e3,C.TARGET_FPMS);this._maxElapsedMS=1/e},Wt.maxFPS.get=function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},Wt.maxFPS.set=function(e){0===e?this._minElapsedMS=0:(e=Math.max(this.minFPS,e),this._minElapsedMS=1/(e/1e3))},Ut.shared.get=function(){var e;return Gt._shared||((e=Gt._shared=new Gt).autoStart=!0,e._protected=!0),Gt._shared},Ut.system.get=function(){var e;return Gt._system||((e=Gt._system=new Gt).autoStart=!0,e._protected=!0),Gt._system},Object.defineProperties(Gt.prototype,Wt),Object.defineProperties(Gt,Ut);function Vt(){}Vt.init=function(e){var t=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(e){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=e)&&e.add(this.render,this,kt.LOW)},get:function(){return this._ticker}}),this.stop=function(){t._ticker.stop()},this.start=function(){t._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Gt.shared:new Gt,e.autoStart&&this.start()},Vt.destroy=function(){var e;this._ticker&&(e=this._ticker,this.ticker=null,e.destroy())};function Ht(e,t){void 0===t&&(t=0),this._width=e=void 0===e?0:e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new Nt("setRealSize"),this.onUpdate=new Nt("update"),this.onError=new Nt("onError")}var $t={valid:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};Ht.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.run(this._width,this._height)},Ht.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},Ht.prototype.resize=function(e,t){e===this._width&&t===this._height||(this._width=e,this._height=t,this.onResize.run(e,t))},$t.valid.get=function(){return!!this._width&&!!this._height},Ht.prototype.update=function(){this.destroyed||this.onUpdate.run()},Ht.prototype.load=function(){return Promise.resolve()},$t.width.get=function(){return this._width},$t.height.get=function(){return this._height},Ht.prototype.upload=function(e,t,i){return!1},Ht.prototype.style=function(e,t,i){return!1},Ht.prototype.dispose=function(){},Ht.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},Object.defineProperties(Ht.prototype,$t);var Xt,Yt=((Xt=Ht)&&(jt.__proto__=Xt),((jt.prototype=Object.create(Xt&&Xt.prototype)).constructor=jt).crossOrigin=function(e,t,i){void 0===i&&0!==t.indexOf("data:")?e.crossOrigin=Qe(t):!1!==i&&(e.crossOrigin="string"==typeof i?i:"anonymous")},jt.prototype.upload=function(e,t,i,n){var s=e.gl,r=t.realWidth,e=t.realHeight;return n=n||this.source,s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),t.target===s.TEXTURE_2D&&i.width===r&&i.height===e?s.texSubImage2D(s.TEXTURE_2D,0,0,0,t.format,t.type,n):(i.width=r,i.height=e,s.texImage2D(t.target,0,t.format,t.format,t.type,n)),!0},jt.prototype.update=function(){var e,t;this.destroyed||(e=this.source.naturalWidth||this.source.videoWidth||this.source.width,t=this.source.naturalHeight||this.source.videoHeight||this.source.height,this.resize(e,t),Xt.prototype.update.call(this))},jt.prototype.dispose=function(){this.source=null},jt);function jt(e){var t=e.naturalWidth||e.videoWidth||e.width,i=e.naturalHeight||e.videoHeight||e.height;Xt.call(this,t,i),this.source=e}var zt,qt=((zt=Yt)&&(Kt.__proto__=zt),((Kt.prototype=Object.create(zt&&zt.prototype)).constructor=Kt).prototype.load=function(e){var n=this;return void 0!==e&&(this.createBitmap=e),this._load||(this._load=new Promise(function(e){n.url=n.source.src;function t(){n.destroyed||(i.onload=null,i.onerror=null,n.resize(i.width,i.height),n._load=null,n.createBitmap?e(n.process()):e(n))}var i=n.source;i.complete&&i.src?t():(i.onload=t,i.onerror=function(e){return n.onError.run(e)})}),this._load)},Kt.prototype.process=function(){var t=this;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(this.source,0,0,this.source.width,this.source.height,{premultiplyAlpha:this.premultiplyAlpha?"premultiply":"none"}).then(function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))}),this._process):Promise.resolve(this)},Kt.prototype.upload=function(e,t,i){if(t.premultiplyAlpha=this.premultiplyAlpha,!this.createBitmap)return zt.prototype.upload.call(this,e,t,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(zt.prototype.upload.call(this,e,t,i,this.bitmap),!this.preserveBitmap){var n,s=!0;for(n in t._glTextures){var r=t._glTextures[n];if(r!==i&&r.dirtyId!==t.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},Kt.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,zt.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},Kt);function Kt(e,t){var i;t=t||{},e instanceof HTMLImageElement||(i=new Image,zt.crossOrigin(i,e,t.crossorigin),i.src=e,e=i),zt.call(this,e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(void 0!==t.createBitmap?t.createBitmap:C.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,this.premultiplyAlpha=!1!==t.premultiplyAlpha,this.bitmap=null,this._load=null,!1!==t.autoLoad&&this.load()}var Qt=[];function Zt(e,t){if(!e)return null;var i,n="";"string"!=typeof e||(i=/\.(\w{3,4})(?:$|\?|#)/i.exec(e))&&(n=i[1].toLowerCase());for(var s=Qt.length-1;0<=s;--s){var r=Qt[s];if(r.test&&r.test(e,n))return new r(e,t)}return new qt(e,t)}var Jt,ei=((Jt=Ht)&&(ti.__proto__=Jt),((ti.prototype=Object.create(Jt&&Jt.prototype)).constructor=ti).prototype.upload=function(e,t,i){e=e.gl;return e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),i.width===t.width&&i.height===t.height?e.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.type,this.data):(i.width=t.width,i.height=t.height,e.texImage2D(t.target,0,i.internalFormat,t.width,t.height,0,t.format,i.type,this.data)),!0},ti.prototype.dispose=function(){this.data=null},ti.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},ti);function ti(e,t){var i=t||{},t=i.width,i=i.height;if(!t||!i)throw new Error("BufferResource width or height invalid");Jt.call(this,t,i),this.data=e}var ii={scaleMode:ye.NEAREST,format:fe.RGBA,premultiplyAlpha:!1},ni=function(d){function r(e,t){void 0===e&&(e=null),void 0===t&&(t=null),d.call(this);var i=(t=t||{}).premultiplyAlpha,n=t.mipmap,s=t.anisotropicLevel,r=t.scaleMode,o=t.width,a=t.height,l=t.wrapMode,h=t.format,c=t.type,p=t.target,u=t.resolution,t=t.resourceOptions;!e||e instanceof Ht||((e=Zt(e,t)).internal=!0),this.width=o||0,this.height=a||0,this.resolution=u||C.RESOLUTION,this.mipmap=void 0!==n?n:C.MIPMAP_TEXTURES,this.anisotropicLevel=void 0!==s?s:C.ANISOTROPIC_LEVEL,this.wrapMode=l||C.WRAP_MODE,this.scaleMode=void 0!==r?r:C.SCALE_MODE,this.format=h||fe.RGBA,this.type=c||ve.UNSIGNED_BYTE,this.target=p||ge.TEXTURE_2D,this.premultiplyAlpha=!1!==i,this.uid=++Le,this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=0<o&&0<a,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this.setResource(e)}d&&(r.__proto__=d),(r.prototype=Object.create(d&&d.prototype)).constructor=r;var e={realWidth:{configurable:!0},realHeight:{configurable:!0}};return e.realWidth.get=function(){return Math.ceil(this.width*this.resolution-1e-4)},e.realHeight.get=function(){return Math.ceil(this.height*this.resolution-1e-4)},r.prototype.setStyle=function(e,t){var i;return void 0!==e&&e!==this.scaleMode&&(this.scaleMode=e,i=!0),void 0!==t&&t!==this.mipmap&&(this.mipmap=t,i=!0),i&&this.dirtyStyleId++,this},r.prototype.setSize=function(e,t,i){return this.resolution=i||this.resolution,this.width=e,this.height=t,this._refreshPOT(),this.update(),this},r.prototype.setRealSize=function(e,t,i){return this.resolution=i||this.resolution,this.width=e/this.resolution,this.height=t/this.resolution,this._refreshPOT(),this.update(),this},r.prototype._refreshPOT=function(){this.isPowerOfTwo=Ue(this.realWidth)&&Ue(this.realHeight)},r.prototype.setResolution=function(e){var t=this.resolution;return t===e||(this.resolution=e,this.valid&&(this.width=this.width*t/e,this.height=this.height*t/e,this.emit("update",this)),this._refreshPOT()),this},r.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},r.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},r.prototype.onError=function(e){this.emit("error",this,e)},r.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Xe[this.cacheId],delete $e[this.cacheId],this.cacheId=null),this.dispose(),r.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},r.prototype.dispose=function(){this.emit("dispose",this)},r.from=function(e,t){var i=null,i="string"==typeof e?e:(e._pixiId||(e._pixiId="pixiid_"+ ++Le),e._pixiId),n=Xe[i];return n||((n=new r(e,t)).cacheId=i,r.addToCache(n,i)),n},r.fromBuffer=function(e,t,i,n){e=e||new Float32Array(t*i*4);var s=new ei(e,{width:t,height:i}),e=e instanceof Float32Array?ve.FLOAT:ve.UNSIGNED_BYTE;return new r(s,Object.assign(ii,n||{width:t,height:i,type:e}))},r.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),Xe[t]&&console.warn("BaseTexture added to the cache with an id ["+t+"] that already had an entry"),Xe[t]=e)},r.removeFromCache=function(e){if("string"==typeof e){var t=Xe[e];if(t){var i=t.textureCacheIds.indexOf(e);return-1<i&&t.textureCacheIds.splice(i,1),delete Xe[e],t}}else if(e&&e.textureCacheIds){for(var n=0;n<e.textureCacheIds.length;++n)delete Xe[e.textureCacheIds[n]];return e.textureCacheIds.length=0,e}return null},Object.defineProperties(r.prototype,e),r}(f);ni._globalBatch=0;var si,ri=((si=Ht)&&(oi.__proto__=si),((oi.prototype=Object.create(si&&si.prototype)).constructor=oi).prototype.dispose=function(){for(var e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},oi.prototype.addResourceAt=function(e,t){if(!this.items[t])throw new Error("Index "+t+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this},oi.prototype.bind=function(e){si.prototype.bind.call(this,e),e.target=ge.TEXTURE_2D_ARRAY;for(var t=0;t<this.length;t++)this.items[t].on("update",e.update,e)},oi.prototype.unbind=function(e){si.prototype.unbind.call(this,e);for(var t=0;t<this.length;t++)this.items[t].off("update",e.update,e)},oi.prototype.load=function(){var i=this;if(this._load)return this._load;var n=this.items.map(function(e){return e.resource}),e=n.map(function(e){return e.load()});return this._load=Promise.all(e).then(function(){var e=n[0],t=e.width,e=e.height;return i.resize(t,e),Promise.resolve(i)}),this._load},oi.prototype.upload=function(e,t,i){var n=this.length,s=this.itemDirtyIds,r=this.items,o=e.gl;i.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,t.format,this._width,this._height,n,0,t.format,t.type,null);for(var a=0;a<n;a++){var l=r[a];s[a]<l.dirtyId&&(s[a]=l.dirtyId,l.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,l.resource.width,l.resource.height,1,t.format,t.type,l.resource.source))}return!0},oi);function oi(e,t){var i;t=t||{};var n=e;Array.isArray(e)&&(n=(i=e).length),si.call(this,t.width,t.height),this.items=[],this.itemDirtyIds=[];for(var s=0;s<n;s++){var r=new ni;this.items.push(r),this.itemDirtyIds.push(-1)}if(this.length=n,this._load=null,i)for(var o=0;o<n;o++)this.addResourceAt(Zt(i[o],t),o)}var ai,li=((ai=Yt)&&(hi.__proto__=ai),((hi.prototype=Object.create(ai&&ai.prototype)).constructor=hi).test=function(e){var t=window.OffscreenCanvas;return!!(t&&e instanceof t)||e instanceof HTMLCanvasElement},hi);function hi(){ai.apply(this,arguments)}var ci,pi=((ci=ri)&&(ui.__proto__=ci),((ui.prototype=Object.create(ci&&ci.prototype)).constructor=ui).prototype.bind=function(e){ci.prototype.bind.call(this,e),e.target=ge.TEXTURE_CUBE_MAP},ui.prototype.upload=function(e,t,i){for(var n=this.itemDirtyIds,s=0;s<ui.SIDES;s++){var r=this.items[s];n[s]<r.dirtyId&&(n[s]=r.dirtyId,r.valid&&r.resource.upload(e,r,i))}return!0},ui);function ui(e,t){if(ci.call(this,e,t=t||{}),this.length!==ui.SIDES)throw new Error("Invalid length. Got "+this.length+", expected 6");for(var i=0;i<ui.SIDES;i++)this.items[i].target=ge.TEXTURE_CUBE_MAP_POSITIVE_X+i;!1!==t.autoLoad&&this.load()}pi.SIDES=6;var di,mi=((di=Yt)&&(fi.__proto__=di),((fi.prototype=Object.create(di&&di.prototype)).constructor=fi).prototype.load=function(){var t=this;return this._load||(this._load=new Promise(function(e){if(t._resolve=function(){t.resize(t.source.width,t.source.height),e(t)},/^\<svg/.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}),this._load)},fi.prototype._loadSvg=function(){var r=this,o=new Image;di.crossOrigin(o,this.svg,this._crossorigin),o.src=this.svg,o.onerror=function(e){o.onerror=null,r.onError.run(e)},o.onload=function(){var e=o.width,t=o.height;if(!e||!t)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var i=e*r.scale,n=t*r.scale;(r._overrideWidth||r._overrideHeight)&&(i=r._overrideWidth||r._overrideHeight/t*e,n=r._overrideHeight||r._overrideWidth/e*t);var i=Math.round(i),n=Math.round(n),s=r.source;s.width=i,s.height=n,s._pixiId="canvas_"+ ++Le,s.getContext("2d").drawImage(o,0,0,e,t,0,0,i,n),r._resolve(),r._resolve=null}},fi.getSize=function(e){var t=fi.SVG_SIZE.exec(e),e={};return t&&(e[t[1]]=Math.round(parseFloat(t[3])),e[t[5]]=Math.round(parseFloat(t[7]))),e},fi.prototype.dispose=function(){di.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},fi.test=function(e,t){return"svg"===t||"string"==typeof e&&0===e.indexOf("data:image/svg+xml;base64")||"string"==typeof e&&0===e.indexOf("<svg")},fi);function fi(e,t){t=t||{},di.call(this,document.createElement("canvas")),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,!1!==t.autoLoad&&this.load()}mi.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;var gi=function(l){function i(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){var i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline",""),l.crossOrigin(i,(e="string"==typeof e?[e]:e)[0].src||e[0],t.crossorigin);for(var n=0;n<e.length;++n){var s=document.createElement("source"),r=e[n],o=r.src,a=r.mime,r=(o=o||e[n]).split("?").shift().toLowerCase(),r=r.substr(r.lastIndexOf(".")+1),a=a||"video/"+r;s.src=o,s.type=a,i.appendChild(s)}e=i}l.call(this,e),this._autoUpdate=!0,this._isAutoUpdating=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==t.autoPlay,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),!1!==t.autoLoad&&this.load()}l&&(i.__proto__=l);var e={autoUpdate:{configurable:!0},updateFPS:{configurable:!0}};return((i.prototype=Object.create(l&&l.prototype)).constructor=i).prototype.update=function(e){var t;void 0===e&&(e=0),this.destroyed||(t=Gt.shared.elapsedMS*this.source.playbackRate,this._msToNextUpdate=Math.floor(this._msToNextUpdate-t),(!this._updateFPS||this._msToNextUpdate<=0)&&(l.prototype.update.call(this,e),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},i.prototype.load=function(){var t=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(e){t.valid?e(t):(t._resolve=e,i.load())}),this._load},i.prototype._onError=function(){this.source.removeEventListener("error",this._onError,!0),this.onError.run(event)},i.prototype._isSourcePlaying=function(){var e=this.source;return 0<e.currentTime&&!1===e.paused&&!1===e.ended&&2<e.readyState},i.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},i.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(Gt.shared.add(this.update,this),this._isAutoUpdating=!0)},i.prototype._onPlayStop=function(){this._isAutoUpdating&&(Gt.shared.remove(this.update,this),this._isAutoUpdating=!1)},i.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var t=this.valid;this.resize(e.videoWidth,e.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},i.prototype.dispose=function(){this._isAutoUpdating&&Gt.shared.remove(this.update,this),this.source&&(this.source.removeEventListener("error",this._onError,!0),this.source.pause(),this.source.src="",this.source.load()),l.prototype.dispose.call(this)},e.autoUpdate.get=function(){return this._autoUpdate},e.autoUpdate.set=function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isAutoUpdating?(Gt.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(Gt.shared.add(this.update,this),this._isAutoUpdating=!0))},e.updateFPS.get=function(){return this._updateFPS},e.updateFPS.set=function(e){e!==this._updateFPS&&(this._updateFPS=e)},i.test=function(e,t){return e instanceof HTMLVideoElement||-1<i.TYPES.indexOf(t)},Object.defineProperties(i.prototype,e),i}(Yt);gi.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];var vi,yi=((vi=Yt)&&(bi.__proto__=vi),((bi.prototype=Object.create(vi&&vi.prototype)).constructor=bi).test=function(e){return!!window.createImageBitmap&&e instanceof ImageBitmap},bi);function bi(){vi.apply(this,arguments)}Qt.push(qt,yi,li,gi,mi,ei,pi,ri);function Si(e){this.renderer=e}var Ti={INSTALLED:Qt,autoDetectResource:Zt,ArrayResource:ri,BufferResource:ei,CanvasResource:li,CubeResource:pi,ImageResource:qt,ImageBitmapResource:yi,SVGResource:mi,VideoResource:gi,Resource:Ht,BaseImageResource:Yt};Si.prototype.destroy=function(){this.renderer=null};var _i,Ai=((_i=ei)&&(Pi.__proto__=_i),((Pi.prototype=Object.create(_i&&_i.prototype)).constructor=Pi).prototype.upload=function(e,t,i){e=e.gl;return e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),i.width===t.width&&i.height===t.height?e.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.type,this.data):(i.width=t.width,i.height=t.height,e.texImage2D(t.target,0,e.DEPTH_COMPONENT16,t.width,t.height,0,t.format,t.type,this.data)),!0},Pi);function Pi(){_i.apply(this,arguments)}function Ii(e,t){this.width=Math.ceil(e||100),this.height=Math.ceil(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Nt("disposeFramebuffer")}i={colorTexture:{configurable:!0}};i.colorTexture.get=function(){return this.colorTextures[0]},Ii.prototype.addColorTexture=function(e,t){return this.colorTextures[e=void 0===e?0:e]=t||new ni(null,{scaleMode:0,resolution:1,mipmap:!1,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},Ii.prototype.addDepthTexture=function(e){return this.depthTexture=e||new ni(new Ai(null,{width:this.width,height:this.height}),{scaleMode:0,resolution:1,width:this.width,height:this.height,mipmap:!1,format:fe.DEPTH_COMPONENT,type:ve.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},Ii.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},Ii.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},Ii.prototype.resize=function(e,t){if(e=Math.ceil(e),t=Math.ceil(t),e!==this.width||t!==this.height){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(var i,n=0;n<this.colorTextures.length;n++){var s=this.colorTextures[n],r=s.resolution;s.setSize(e/r,t/r)}this.depthTexture&&(i=this.depthTexture.resolution,this.depthTexture.setSize(e/i,t/i))}},Ii.prototype.dispose=function(){this.disposeRunner.run(this,!1)},Object.defineProperties(Ii.prototype,i);var Ci,xi=((Ci=ni)&&(Bi.__proto__=Ci),((Bi.prototype=Object.create(Ci&&Ci.prototype)).constructor=Bi).prototype.resize=function(e,t){e=Math.ceil(e),t=Math.ceil(t),this.framebuffer.resize(e*this.resolution,t*this.resolution)},Bi.prototype.dispose=function(){this.framebuffer.dispose(),Ci.prototype.dispose.call(this)},Bi.prototype.destroy=function(){Ci.prototype.destroy.call(this,!0),this.framebuffer=null},Bi);function Bi(e){Ci.call(this,null,e="number"==typeof e?{width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:e);var t=e||{},e=t.width,t=t.height;this.mipmap=!1,this.width=Math.ceil(e)||100,this.height=Math.ceil(t)||100,this.valid=!0,this._canvasRenderTarget=null,this.clearColor=[0,0,0,0],this.framebuffer=new Ii(this.width*this.resolution,this.height*this.resolution).addColorTexture(0,this).enableStencil(),this.stencilMaskStack=[],this.filterStack=[{}]}function Ei(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}Ei.prototype.set=function(e,t,i){var n,s,r,o=t.width,a=t.height;i?(n=e.width/2/o,s=e.height/2/a,r=e.x/o+n,t=e.y/a+s,i=bt.add(i,bt.NW),this.x0=r+n*bt.uX(i),this.y0=t+s*bt.uY(i),i=bt.add(i,2),this.x1=r+n*bt.uX(i),this.y1=t+s*bt.uY(i),i=bt.add(i,2),this.x2=r+n*bt.uX(i),this.y2=t+s*bt.uY(i),i=bt.add(i,2),this.x3=r+n*bt.uX(i),this.y3=t+s*bt.uY(i)):(this.x0=e.x/o,this.y0=e.y/a,this.x1=(e.x+e.width)/o,this.y1=e.y/a,this.x2=(e.x+e.width)/o,this.y2=(e.y+e.height)/a,this.x3=e.x/o,this.y3=(e.y+e.height)/a),this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3};var wi=new Ei,Ri=function(o){function a(e,t,i,n,s,r){if(o.call(this),this.noFrame=!1,t||(this.noFrame=!0,t=new Tt(0,0,1,1)),e instanceof a&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=n,this.valid=!1,this.requiresUpdate=!1,this._uvs=wi,this.uvMatrix=null,this.orig=i||t,this._rotate=Number(s||0),!0===s)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=r?new it(r.x,r.y):new it(0,0),this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=t:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}o&&(a.__proto__=o);var e={resolution:{configurable:!0},frame:{configurable:!0},rotate:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};return((a.prototype=Object.create(o&&o.prototype)).constructor=a).prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},a.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},a.prototype.destroy=function(e){this.baseTexture&&(e&&((e=this.baseTexture.resource)&&$e[e.url]&&a.removeFromCache(e.url),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,a.removeFromCache(this),this.textureCacheIds=null},a.prototype.clone=function(){return new a(this.baseTexture,this.frame,this.orig,this.trim,this.rotate,this.defaultAnchor)},a.prototype.updateUvs=function(){this._uvs===wi&&(this._uvs=new Ei),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},a.from=function(e,t){void 0===t&&(t={});var i=null,i="string"==typeof e?e:(e._pixiId||(e._pixiId="pixiid_"+ ++Le),e._pixiId),n=$e[i];return n||(t.resolution||(t.resolution=Ze(e)),(n=new a(new ni(e,t))).baseTexture.cacheId=i,ni.addToCache(n.baseTexture,i),a.addToCache(n,i)),n},a.fromBuffer=function(e,t,i,n){return new a(ni.fromBuffer(e,t,i,n))},a.fromLoader=function(e,t,i){e=new qt(e);e.url=t;e=new a(new ni(e,{scaleMode:C.SCALE_MODE,resolution:Ze(t)}));return ni.addToCache(e.baseTexture,i=i||t),a.addToCache(e,i),i!==t&&(ni.addToCache(e.baseTexture,t),a.addToCache(e,t)),e},a.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),$e[t]&&console.warn("Texture added to the cache with an id ["+t+"] that already had an entry"),$e[t]=e)},a.removeFromCache=function(e){if("string"==typeof e){var t=$e[e];if(t){var i=t.textureCacheIds.indexOf(e);return-1<i&&t.textureCacheIds.splice(i,1),delete $e[e],t}}else if(e&&e.textureCacheIds){for(var n=0;n<e.textureCacheIds.length;++n)$e[e.textureCacheIds[n]]===e&&delete $e[e.textureCacheIds[n]];return e.textureCacheIds.length=0,e}return null},e.resolution.get=function(){return this.baseTexture.resolution},e.frame.get=function(){return this._frame},e.frame.set=function(e){this._frame=e,this.noFrame=!1;var t=e.x,i=e.y,n=e.width,s=e.height,r=t+n>this.baseTexture.width,o=i+s>this.baseTexture.height;if(r||o){t="X: "+t+" + "+n+" = "+(t+n)+" > "+this.baseTexture.width,i="Y: "+i+" + "+s+" = "+(i+s)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+t+" "+(r&&o?"and":"or")+" "+i)}this.valid=n&&s&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=e),this.valid&&this.updateUvs()},e.rotate.get=function(){return this._rotate},e.rotate.set=function(e){this._rotate=e,this.valid&&this.updateUvs()},e.width.get=function(){return this.orig.width},e.height.get=function(){return this.orig.height},Object.defineProperties(a.prototype,e),a}(f);function Mi(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}Ri.EMPTY=new Ri(new ni),Mi(Ri.EMPTY),Mi(Ri.EMPTY.baseTexture),Ri.WHITE=function(){var e=document.createElement("canvas");e.width=16,e.height=16;var t=e.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,16,16),new Ri(new ni(new li(e)))}(),Mi(Ri.WHITE),Mi(Ri.WHITE.baseTexture);var Oi,Ni=((Oi=Ri)&&(Fi.__proto__=Oi),((Fi.prototype=Object.create(Oi&&Oi.prototype)).constructor=Fi).prototype.resize=function(e,t,i){void 0===i&&(i=!0),e=Math.ceil(e),t=Math.ceil(t),this.valid=0<e&&0<t,this._frame.width=this.orig.width=e,this._frame.height=this.orig.height=t,i&&this.baseTexture.resize(e,t),this.updateUvs()},Fi.prototype.setResolution=function(e){var t=this.baseTexture;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))},Fi.create=function(e){return new Fi(new xi(e="number"==typeof e?{width:e,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:e))},Fi);function Fi(e,t){var i,n,s,r,o=null;e instanceof xi||(i=arguments[1],n=arguments[2],s=arguments[3],r=arguments[4],console.warn("Please use RenderTexture.create("+i+", "+n+") instead of the ctor directly."),o=arguments[0],t=null,e=new xi({width:i,height:n,scaleMode:s,resolution:r})),Oi.call(this,e,t),this.legacyRenderer=o,this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}function Di(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}Di.prototype.createTexture=function(e,t){t=new xi(Object.assign({width:e,height:t,resolution:1},this.textureOptions));return new Ni(t)},Di.prototype.getOptimalTexture=function(e,t,i){var n=Di.SCREEN_KEY;e*=i=void 0===i?1:i,t*=i,this.enableFullScreen&&e===this._pixelsWidth&&t===this._pixelsHeight||(n=(65535&(e=We(e)))<<16|65535&(t=We(t))),this.texturePool[n]||(this.texturePool[n]=[]);var s=this.texturePool[n].pop();return(s=s||this.createTexture(e,t)).filterPoolKey=n,s.setResolution(i),s},Di.prototype.getFilterTexture=function(e,t){t=this.getOptimalTexture(e.width,e.height,t||e.resolution);return t.filterFrame=e.filterFrame,t},Di.prototype.returnTexture=function(e){var t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)},Di.prototype.returnFilterTexture=function(e){this.returnTexture(e)},Di.prototype.clear=function(e){if(e=!1!==e)for(var t in this.texturePool){var i=this.texturePool[t];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},Di.prototype.setScreenSize=function(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){var t=Di.SCREEN_KEY,i=this.texturePool[t];if(this.enableFullScreen=0<e.width&&0<e.height,i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[t]=[],this._pixelsWidth=e.width,this._pixelsHeight=e.height}},Di.SCREEN_KEY="screen";function Li(e,t,i,n,s,r,o){void 0===i&&(i=!1),void 0===n&&(n=5126),this.buffer=e,this.size=t,this.normalized=i,this.type=n,this.stride=s,this.start=r,this.instance=o}Li.prototype.destroy=function(){this.buffer=null},Li.from=function(e,t,i,n,s){return new Li(e,t,i,n,s)};function ki(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=t,this.id=Gi++,this.disposeRunner=new Nt("disposeBuffer")}var Gi=0;function Wi(e){if(4===e.BYTES_PER_ELEMENT)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===e.BYTES_PER_ELEMENT){if(e instanceof Uint16Array)return"Uint16Array"}else if(1===e.BYTES_PER_ELEMENT&&e instanceof Uint8Array)return"Uint8Array";return null}ki.prototype.update=function(e){this.data=e||this.data,this._updateID++},ki.prototype.dispose=function(){this.disposeRunner.run(this,!1)},ki.prototype.destroy=function(){this.dispose(),this.data=null},ki.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new ki(e)};var Ui={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function Vi(e,t){void 0===t&&(t={}),this.buffers=e=void 0===e?[]:e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=$i++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Nt("disposeGeometry"),this.refCount=0}var Hi={5126:4,5123:2,5121:1},$i=0,Xi={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array};Vi.prototype.addAttribute=function(e,t,i,n,s,r,o,a){if(void 0===n&&(n=!1),void 0===a&&(a=!1),!t)throw new Error("You must pass a buffer when creating an attribute");t.data||(t instanceof Array&&(t=new Float32Array(t)),t=new ki(t));var l=e.split("|");if(1<l.length){for(var h=0;h<l.length;h++)this.addAttribute(l[h],t,i,n,s);return this}var c=this.buffers.indexOf(t);return-1===c&&(this.buffers.push(t),c=this.buffers.length-1),this.attributes[e]=new Li(c,i,n,s,r,o,a),this.instanced=this.instanced||a,this},Vi.prototype.getAttribute=function(e){return this.attributes[e]},Vi.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},Vi.prototype.addIndex=function(e){return e.data||(e instanceof Array&&(e=new Uint16Array(e)),e=new ki(e)),e.index=!0,this.indexBuffer=e,-1===this.buffers.indexOf(e)&&this.buffers.push(e),this},Vi.prototype.getIndex=function(){return this.indexBuffer},Vi.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var e,t=[],i=[],n=new ki;for(e in this.attributes){var s=this.attributes[e],r=this.buffers[s.buffer];t.push(r.data),i.push(s.size*Hi[s.type]/4),s.buffer=0}for(n.data=function(e,t){for(var i=0,n=0,s={},r=0;r<e.length;r++)n+=t[r],i+=e[r].length;for(var o=new ArrayBuffer(4*i),a=null,l=0,h=0;h<e.length;h++){var c=t[h],p=e[h],u=Wi(p);s[u]||(s[u]=new Ui[u](o));for(var a=s[u],d=0;d<p.length;d++)a[(d/c|0)*n+l+d%c]=p[d];l+=c}return new Float32Array(o)}(t,i),e=0;e<this.buffers.length;e++)this.buffers[e]!==this.indexBuffer&&this.buffers[e].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},Vi.prototype.getSize=function(){for(var e in this.attributes){e=this.attributes[e];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},Vi.prototype.dispose=function(){this.disposeRunner.run(this,!1)},Vi.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer.destroy(),this.attributes=null},Vi.prototype.clone=function(){for(var e,t=new Vi,i=0;i<this.buffers.length;i++)t.buffers[i]=new ki(this.buffers[i].data.slice());for(e in this.attributes){var n=this.attributes[e];t.attributes[e]=new Li(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},Vi.merge=function(e){for(var t=new Vi,i=[],n=[],s=[],r=0;r<e.length;r++)for(var o=e[r],a=0;a<o.buffers.length;a++)n[a]=n[a]||0,n[a]+=o.buffers[a].data.length,s[a]=0;for(var l=0;l<o.buffers.length;l++)i[l]=new Xi[Wi(o.buffers[l].data)](n[l]),t.buffers[l]=new ki(i[l]);for(var h=0;h<e.length;h++){o=e[h];for(var c=0;c<o.buffers.length;c++)i[c].set(o.buffers[c].data,s[c]),s[c]+=o.buffers[c].data.length}if(t.attributes=o.attributes,o.indexBuffer){t.indexBuffer=t.buffers[o.buffers.indexOf(o.indexBuffer)],t.indexBuffer.index=!0;for(var p,u=0,d=0,m=0,f=0,g=0;g<o.buffers.length;g++)if(o.buffers[g]!==o.indexBuffer){f=g;break}for(p in o.attributes){var v=o.attributes[p];(0|v.buffer)===f&&(d+=v.size*Hi[v.type]/4)}for(var y=0;y<e.length;y++){for(var b=e[y].indexBuffer.data,S=0;S<b.length;S++)t.indexBuffer.data[S+m]+=u;u+=o.buffers[f].data.length/d,m+=b.length}}return t};var Yi,ji=((Yi=Vi)&&(zi.__proto__=Yi),(zi.prototype=Object.create(Yi&&Yi.prototype)).constructor=zi);function zi(){Yi.call(this),this.addAttribute("aVertexPosition",[0,0,1,0,1,1,0,1]).addIndex([0,1,3,2])}var qi,Ki=((qi=Vi)&&(Qi.__proto__=qi),((Qi.prototype=Object.create(qi&&qi.prototype)).constructor=Qi).prototype.map=function(e,t){var i;return this.uvs[0]=0,this.uvs[1]=0,this.uvs[2]=0+t.width/e.width,this.uvs[3]=0,this.uvs[4]=0+t.width/e.width,this.uvs[5]=0+t.height/e.height,this.uvs[6]=0,this.uvs[7]=0+t.height/e.height,i=t.x,e=t.y,this.vertices[0]=i,this.vertices[1]=e,this.vertices[2]=i+t.width,this.vertices[3]=e,this.vertices[4]=i+t.width,this.vertices[5]=e+t.height,this.vertices[6]=i,this.vertices[7]=e+t.height,this.invalidate(),this},Qi.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},Qi);function Qi(){qi.call(this),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new ki(this.vertices),this.uvBuffer=new ki(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}function Zi(e,t){this.uniforms=e,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Ji++,this.static=!!t}var Ji=0;Zi.prototype.update=function(){this.dirtyId++},Zi.prototype.add=function(e,t,i){this.uniforms[e]=new Zi(t,i)},Zi.from=function(e,t){return new Zi(e,t)};function en(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new Tt,this.destinationFrame=new Tt,this.filters=[]}en.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null};var tn,nn=((tn=Si)&&(sn.__proto__=tn),((sn.prototype=Object.create(tn&&tn.prototype)).constructor=sn).prototype.push=function(e,t){for(var i=this.renderer,n=this.defaultFilterStack,s=this.statePool.pop()||new en,r=t[0].resolution,o=t[0].padding,a=t[0].autoFit,l=t[0].legacy,h=1;h<t.length;h++)var c=t[h],r=Math.min(r,c.resolution),o=Math.max(o,c.padding),a=a||c.autoFit,l=l||c.legacy;1===n.length&&(this.defaultFilterStack[0].renderTexture=i.renderTexture.current),n.push(s),s.resolution=r,s.legacy=l,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(o),a&&s.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),s.sourceFrame.ceil(r),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,r),s.filters=t,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height,s.renderTexture.filterFrame=s.sourceFrame,i.renderTexture.bind(s.renderTexture,s.sourceFrame),i.renderTexture.clear()},sn.prototype.pop=function(){var e=this.defaultFilterStack,t=e.pop(),i=t.filters;this.activeState=t;var n=this.globalUniforms.uniforms;n.outputFrame=t.sourceFrame,n.resolution=t.resolution;var s=n.inputSize,r=n.inputPixel,o=n.inputClamp;s[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],r[0]=s[0]*t.resolution,r[1]=s[1]*t.resolution,r[2]=1/r[0],r[3]=1/r[1],o[0]=.5*r[2],o[1]=.5*r[3],o[2]=t.sourceFrame.width*s[2]-.5*r[2],o[3]=t.sourceFrame.height*s[3]-.5*r[3],t.legacy&&((r=n.filterArea)[0]=t.destinationFrame.width,r[1]=t.destinationFrame.height,r[2]=t.sourceFrame.x,r[3]=t.sourceFrame.y,n.filterClamp=n.inputClamp),this.globalUniforms.update();e=e[e.length-1];if(1===i.length)i[0].apply(this,t.renderTexture,e.renderTexture,!1,t),this.returnFilterTexture(t.renderTexture);else{var a=t.renderTexture;(c=this.getOptimalFilterTexture(a.width,a.height,t.resolution)).filterFrame=a.filterFrame;for(var l=0,l=0;l<i.length-1;++l){i[l].apply(this,a,c,!0,t);var h=a,a=c,c=h}i[l].apply(this,a,e.renderTexture,!1,t),this.returnFilterTexture(a),this.returnFilterTexture(c)}t.clear(),this.statePool.push(t)},sn.prototype.applyFilter=function(e,t,i,n){var s=this.renderer;s.renderTexture.bind(i,i?i.filterFrame:null),n&&s.renderTexture.clear(),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,s.state.set(e.state),s.shader.bind(e),e.legacy?(this.quadUv.map(t._frame,t.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(me.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(me.TRIANGLE_STRIP))},sn.prototype.calculateSpriteMatrix=function(e,t){var i=this.activeState,n=i.sourceFrame,s=i.destinationFrame,i=t._texture.orig,s=e.set(s.width,0,0,s.height,n.x,n.y),n=t.worldTransform.copyTo(rt.TEMP_MATRIX);return n.invert(),s.prepend(n),s.scale(1/i.width,1/i.height),s.translate(t.anchor.x,t.anchor.y),s},sn.prototype.destroy=function(){this.texturePool.clear(!1)},sn.prototype.getOptimalFilterTexture=function(e,t,i){return this.texturePool.getOptimalTexture(e,t,i=void 0===i?1:i)},sn.prototype.getFilterTexture=function(e,t){var i;"number"==typeof e&&(i=e,e=t,t=i),e=e||this.activeState.renderTexture;t=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution);return t.filterFrame=e.filterFrame,t},sn.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},sn.prototype.emptyPool=function(){this.texturePool.clear(!0)},sn.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},sn);function sn(e){tn.call(this,e),this.defaultFilterStack=[{}],this.texturePool=new Di,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new ji,this.quadUv=new Ki,this.tempRect=new Tt,this.activeState={},this.globalUniforms=new Zi({outputFrame:this.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this._pixelsWidth=e.view.width,this._pixelsHeight=e.view.height}function rn(e){this.renderer=e}rn.prototype.flush=function(){},rn.prototype.destroy=function(){this.renderer=null},rn.prototype.start=function(){},rn.prototype.stop=function(){this.flush()},rn.prototype.render=function(e){};var on,an=((on=Si)&&(ln.__proto__=on),((ln.prototype=Object.create(on&&on.prototype)).constructor=ln).prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},ln.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},ln.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},ln);function ln(e){on.call(this,e),this.emptyRenderer=new rn(e),this.currentRenderer=this.emptyRenderer}C.PREFER_ENV=m.any?pe.WEBGL:pe.WEBGL2;function hn(e){this.buffer=e,this.updateID=-1,this.byteLength=-1,this.refCount=0}var cn,pn=0,un=function(t){function e(e){t.call(this,e),this.webGLVersion=1,this.extensions={},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={isLost:{configurable:!0}};return i.isLost.get=function(){return!this.gl||this.gl.isContextLost()},e.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=pn++,e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=pn++,this.renderer.runners.contextChange.run(e)},e.prototype.initFromOptions=function(e){e=this.createContext(this.renderer.view,e);this.initFromContext(e)},e.prototype.createContext=function(e,t){var i;if(i=C.PREFER_ENV>=pe.WEBGL2?e.getContext("webgl2",t):i)this.webGLVersion=2;else if(this.webGLVersion=1,!(i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),i},e.prototype.getExtensions=function(){var e=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBKIT_WEBGL_depth_texture"),loseContext:e.getExtension("WEBGL_lose_context"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:e.getExtension("EXT_color_buffer_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear")})},e.prototype.handleContextLost=function(e){e.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.run(this.gl)},e.prototype.destroy=function(){var e=this.renderer.view;e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.gl.flush()},e.prototype.validateContext=function(e){e.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")},Object.defineProperties(e.prototype,i),e}(Si),dn=function(t){function e(e){t.call(this,e),this.managedFramebuffers=[],this.unknownFramebuffer=new Ii(10,10)}t&&(e.__proto__=t);var i={size:{configurable:!0}};return((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.contextChange=function(){var t,e,i=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Tt,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion&&(t=this.renderer.context.extensions.drawBuffers,e=this.renderer.context.extensions.depthTexture,C.PREFER_ENV===pe.WEBGL_LEGACY&&(e=t=null),t?i.drawBuffers=function(e){return t.drawBuffersWEBGL(e)}:(this.hasMRT=!1,i.drawBuffers=function(){}),e||(this.writeDepthTexture=!1))},e.prototype.bind=function(e,t){var i=this.gl;if(e){var n=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,n.framebuffer)),n.dirtyId!==e.dirtyId&&(n.dirtyId=e.dirtyId,n.dirtyFormat!==e.dirtyFormat?(n.dirtyFormat=e.dirtyFormat,this.updateFramebuffer(e)):n.dirtySize!==e.dirtySize&&(n.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var s=0;s<e.colorTextures.length;s++)e.colorTextures[s].texturePart?this.renderer.texture.unbind(e.colorTextures[s].texture):this.renderer.texture.unbind(e.colorTextures[s]);e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,e.width,e.height)}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(e,t,i,n){var s=this.viewport;s.width===i&&s.height===n&&s.x===e&&s.y===t||(s.x=e,s.y=t,s.width=i,s.height=n,this.gl.viewport(e,t,i,n))},i.size.get=function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},e.prototype.clear=function(e,t,i,n){var s=this.gl;s.clearColor(e,t,i,n),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT)},e.prototype.initFramebuffer=function(e){var t={framebuffer:this.gl.createFramebuffer(),stencil:null,dirtyId:0,dirtyFormat:0,dirtySize:0};return e.glFramebuffers[this.CONTEXT_UID]=t,this.managedFramebuffers.push(e),e.disposeRunner.add(this),t},e.prototype.resizeFramebuffer=function(e){var t=this.gl,i=e.glFramebuffers[this.CONTEXT_UID];i.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,i.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height));for(var n=e.colorTextures,s=0;s<n.length;s++)this.renderer.texture.bind(n[s],0);e.depthTexture&&this.renderer.texture.bind(e.depthTexture,0)},e.prototype.updateFramebuffer=function(e){var t=this.gl,i=e.glFramebuffers[this.CONTEXT_UID],n=e.colorTextures.length;t.drawBuffers||(n=Math.min(n,1));for(var s,r=[],o=0;o<n;o++){var a=e.colorTextures[o];a.texturePart?(this.renderer.texture.bind(a.texture,0),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+o,t.TEXTURE_CUBE_MAP_NEGATIVE_X+a.side,a.texture._glTextures[this.CONTEXT_UID].texture,0)):(this.renderer.texture.bind(a,0),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+o,t.TEXTURE_2D,a._glTextures[this.CONTEXT_UID].texture,0)),r.push(t.COLOR_ATTACHMENT0+o)}1<r.length&&t.drawBuffers(r),e.depthTexture&&this.writeDepthTexture&&(s=e.depthTexture,this.renderer.texture.bind(s,0),t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,s._glTextures[this.CONTEXT_UID].texture,0)),i.stencil||!e.stencil&&!e.depth||(i.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,i.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height),e.depthTexture||t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,i.stencil))},e.prototype.disposeFramebuffer=function(e,t){var i,n=e.glFramebuffers[this.CONTEXT_UID],s=this.gl;n&&(delete e.glFramebuffers[this.CONTEXT_UID],0<=(i=this.managedFramebuffers.indexOf(e))&&this.managedFramebuffers.splice(i,1),e.disposeRunner.remove(this),t||(s.deleteFramebuffer(n.framebuffer),n.stencil&&s.deleteRenderbuffer(n.stencil)))},e.prototype.disposeAll=function(e){var t=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<t.length;i++)this.disposeFramebuffer(t[i],e)},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Tt},Object.defineProperties(e.prototype,i),e}(Si),mn={5126:4,5123:2,5121:1},fn=((cn=Si)&&(gn.__proto__=cn),((gn.prototype=Object.create(cn&&cn.prototype)).constructor=gn).prototype.contextChange=function(){this.disposeAll(!0);var t,r,e=this.gl=this.renderer.gl,i=this.renderer.context;this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.createVertexArray||(t=this.renderer.context.extensions.vertexArrayObject,(t=C.PREFER_ENV===pe.WEBGL_LEGACY?null:t)?(e.createVertexArray=function(){return t.createVertexArrayOES()},e.bindVertexArray=function(e){return t.bindVertexArrayOES(e)},e.deleteVertexArray=function(e){return t.deleteVertexArrayOES(e)}):(this.hasVao=!1,e.createVertexArray=function(){},e.bindVertexArray=function(){},e.deleteVertexArray=function(){})),e.vertexAttribDivisor||((r=e.getExtension("ANGLE_instanced_arrays"))?(e.vertexAttribDivisor=function(e,t){return r.vertexAttribDivisorANGLE(e,t)},e.drawElementsInstanced=function(e,t,i,n,s){return r.drawElementsInstancedANGLE(e,t,i,n,s)},e.drawArraysInstanced=function(e,t,i,n){return r.drawArraysInstancedANGLE(e,t,i,n)}):this.hasInstance=!1),this.canUseUInt32ElementIndex=2===i.webGLVersion||!!i.extensions.uint32ElementIndex},gn.prototype.bind=function(e,t){t=t||this.renderer.shader.shader;var i=this.gl,n=e.glVertexArrayObjects[this.CONTEXT_UID];n||((this.managedGeometries[e.id]=e).disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=n={});n=n[t.program.id]||this.initGeometryVao(e,t.program);this._activeGeometry=e,this._activeVao!==n&&(this._activeVao=n,this.hasVao?i.bindVertexArray(n):this.activateVao(e,t.program)),this.updateBuffers()},gn.prototype.reset=function(){this.unbind()},gn.prototype.updateBuffers=function(){for(var e=this._activeGeometry,t=this.gl,i=0;i<e.buffers.length;i++){var n,s,r=e.buffers[i],o=r._glBuffers[this.CONTEXT_UID];r._updateID!==o.updateID&&(o.updateID=r._updateID,n=r.index?t.ELEMENT_ARRAY_BUFFER:t.ARRAY_BUFFER,t.bindBuffer(n,o.buffer),(this._boundBuffer=o).byteLength>=r.data.byteLength?t.bufferSubData(n,0,r.data):(s=r.static?t.STATIC_DRAW:t.DYNAMIC_DRAW,o.byteLength=r.data.byteLength,t.bufferData(n,r.data,s)))}},gn.prototype.checkCompatibility=function(e,t){var i,n=e.attributes;for(i in t.attributeData)if(!n[i])throw new Error('shader and geometry incompatible, geometry missing the "'+i+'" attribute')},gn.prototype.getSignature=function(e,t){var i,n=e.attributes,s=t.attributeData,r=["g",e.id];for(i in n)s[i]&&r.push(i);return r.join("-")},gn.prototype.initGeometryVao=function(e,t){this.checkCompatibility(e,t);var i=this.gl,n=this.CONTEXT_UID,s=this.getSignature(e,t),r=e.glVertexArrayObjects[this.CONTEXT_UID],o=r[s];if(o)return r[t.id]=o;var a,l,h,c=e.buffers,p=e.attributes,u={},d={};for(a in c)u[a]=0,d[a]=0;for(l in p)!p[l].size&&t.attributeData[l]?p[l].size=t.attributeData[l].size:p[l].size||console.warn("PIXI Geometry attribute '"+l+"' size cannot be determined (likely the bound shader does not have the attribute)"),u[p[l].buffer]+=p[l].size*mn[p[l].type];for(h in p){var m=p[h],f=m.size;void 0===m.stride&&(u[m.buffer]===f*mn[m.type]?m.stride=0:m.stride=u[m.buffer]),void 0===m.start&&(m.start=d[m.buffer],d[m.buffer]+=f*mn[m.type])}o=i.createVertexArray(),i.bindVertexArray(o);for(var g=0;g<c.length;g++){var v=c[g];v._glBuffers[n]||(v._glBuffers[n]=new hn(i.createBuffer()),(this.managedBuffers[v.id]=v).disposeRunner.add(this)),v._glBuffers[n].refCount++}return this.activateVao(e,t),this._activeVao=o,r[t.id]=o,r[s]=o},gn.prototype.disposeBuffer=function(e,t){var i,n;this.managedBuffers[e.id]&&(delete this.managedBuffers[e.id],i=e._glBuffers[this.CONTEXT_UID],n=this.gl,e.disposeRunner.remove(this),i&&(t||n.deleteBuffer(i.buffer),delete e._glBuffers[this.CONTEXT_UID]))},gn.prototype.disposeGeometry=function(e,t){if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var i=e.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,s=e.buffers;if(e.disposeRunner.remove(this),i){for(var r=0;r<s.length;r++){var o=s[r]._glBuffers[this.CONTEXT_UID];o.refCount--,0!==o.refCount||t||this.disposeBuffer(s[r],t)}if(!t)for(var a in i)"g"===a[0]&&(a=i[a],this._activeVao===a&&this.unbind(),n.deleteVertexArray(a));delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},gn.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedGeometries),i=0;i<t.length;i++)this.disposeGeometry(this.managedGeometries[t[i]],e);for(var t=Object.keys(this.managedBuffers),n=0;n<t.length;n++)this.disposeBuffer(this.managedBuffers[t[n]],e)},gn.prototype.activateVao=function(e,t){var i=this.gl,n=this.CONTEXT_UID,s=e.buffers,r=e.attributes;e.indexBuffer&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.indexBuffer._glBuffers[n].buffer);var o,a=null;for(o in r){var l=r[o],h=s[l.buffer]._glBuffers[n];if(t.attributeData[o]){a!==h&&(i.bindBuffer(i.ARRAY_BUFFER,h.buffer),a=h);h=t.attributeData[o].location;if(i.enableVertexAttribArray(h),i.vertexAttribPointer(h,l.size,l.type||i.FLOAT,l.normalized,l.stride,l.start),l.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");i.vertexAttribDivisor(h,1)}}}},gn.prototype.draw=function(e,t,i,n){var s,r,o=this.gl,a=this._activeGeometry;return a.indexBuffer?(r=2===(s=a.indexBuffer.data.BYTES_PER_ELEMENT)?o.UNSIGNED_SHORT:o.UNSIGNED_INT,2===s||4===s&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(e,t||a.indexBuffer.data.length,r,(i||0)*s,n||1):o.drawElements(e,t||a.indexBuffer.data.length,r,(i||0)*s):console.warn("unsupported index buffer type: uint32")):a.instanced?o.drawArraysInstanced(e,i,t||a.getSize(),n||1):o.drawArrays(e,i,t||a.getSize()),this},gn.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},gn);function gn(e){cn.call(this,e),this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.boundBuffers={},this.managedGeometries={},this.managedBuffers={}}function vn(e,t,i,n){var t=yn(e,e.VERTEX_SHADER,t),i=yn(e,e.FRAGMENT_SHADER,i),s=e.createProgram();if(e.attachShader(s,t),e.attachShader(s,i),n)for(var r in n)e.bindAttribLocation(s,n[r],r);return e.linkProgram(s),e.getProgramParameter(s,e.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",e.getProgramParameter(s,e.VALIDATE_STATUS)),console.error("gl.getError()",e.getError()),""!==e.getProgramInfoLog(s)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(s)),e.deleteProgram(s),s=null),e.deleteShader(t),e.deleteShader(i),s}function yn(e,t,i){t=e.createShader(t);return e.shaderSource(t,i),e.compileShader(t),e.getShaderParameter(t,e.COMPILE_STATUS)?t:(console.warn(i),console.error(e.getShaderInfoLog(t)),null)}function bn(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"bool":return!1;case"bvec2":return Sn(2*t);case"bvec3":return Sn(3*t);case"bvec4":return Sn(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function Sn(e){for(var t=new Array(e),i=0;i<t.length;i++)t[i]=!1;return t}var Tn,_n={},An=_n;function Pn(){var e,t;return An===_n&&(e=document.createElement("canvas"),(t=C.PREFER_ENV>=pe.WEBGL2?e.getContext("webgl2",{}):t)||((t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}))?t.getExtension("WEBGL_draw_buffers"):t=null),An=t),An}function In(e,t,i){if("precision"===e.substring(0,9))return i!==_e.HIGH&&"precision highp"===e.substring(0,15)?e.replace("precision highp","precision mediump"):e;var n=t;return"precision "+(n=t===_e.HIGH&&i!==_e.HIGH?_e.MEDIUM:n)+" float;\n"+e}var Cn={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};var xn=null,Bn={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray"};function En(e,t){if(!xn){var i=Object.keys(Bn);xn={};for(var n=0;n<i.length;++n){var s=i[n];xn[e[s]]=Bn[s]}}return xn[t]}var wn={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Rn={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var Mn,On=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Nn(e,t){if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var i=t.createShader(t.FRAGMENT_SHADER);;){var n=On.replace(/%forloop%/gi,function(e){for(var t="",i=0;i<e;++i)0<i&&(t+="\nelse "),i<e-1&&(t+="if(test == "+i+".0){}");return t}(e));if(t.shaderSource(i,n),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS))break;e=e/2|0}return e}function Fn(e,t,i){void 0===i&&(i="pixi-shader"),this.id=Dn++,this.vertexSrc=e||Fn.defaultVertexSrc,this.fragmentSrc=t||Fn.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(i=i.replace(/\s+/g,"-"),Ln[i]?(Ln[i]++,i+="-"+Ln[i]):Ln[i]=1,this.vertexSrc="#define SHADER_NAME "+i+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+"\n"+this.fragmentSrc,this.vertexSrc=In(this.vertexSrc,C.PRECISION_VERTEX,_e.HIGH),this.fragmentSrc=In(this.fragmentSrc,C.PRECISION_FRAGMENT,(Tn||(Tn=_e.MEDIUM,(i=Pn())&&i.getShaderPrecisionFormat&&(i=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT),Tn=i.precision?_e.HIGH:_e.MEDIUM)),Tn))),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}var Dn=0,Ln={},n={defaultVertexSrc:{configurable:!0},defaultFragmentSrc:{configurable:!0}};Fn.prototype.extractData=function(e,t){var i=Pn();i?(t=vn(i,e,t),this.attributeData=this.getAttributeData(t,i),this.uniformData=this.getUniformData(t,i),i.deleteProgram(t)):(this.uniformData={},this.attributeData={})},Fn.prototype.getAttributeData=function(e,t){for(var i={},n=[],s=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),r=0;r<s;r++){var o=t.getActiveAttrib(e,r),a=En(t,o.type),a={type:a,name:o.name,size:Cn[a],location:0};i[o.name]=a,n.push(a)}n.sort(function(e,t){return e.name>t.name?1:-1});for(var l=0;l<n.length;l++)n[l].location=l;return i},Fn.prototype.getUniformData=function(e,t){for(var i={},n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),s=0;s<n;s++){var r=t.getActiveUniform(e,s),o=r.name.replace(/\[.*?\]/,""),a=r.name.match(/\[.*?\]/,""),l=En(t,r.type);i[o]={type:l,size:r.size,isArray:a,value:bn(l,r.size)}}return i},n.defaultVertexSrc.get=function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},n.defaultFragmentSrc.get=function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},Fn.from=function(e,t,i){var n=e+t,s=He[n];return s||(He[n]=s=new Fn(e,t,i)),s},Object.defineProperties(Fn,n);function kn(e,t){for(var i in this.program=e,this.uniformGroup=t?t instanceof Zi?t:new Zi(t):new Zi({}),e.uniformData)this.uniformGroup.uniforms[i]instanceof Array&&(this.uniformGroup.uniforms[i]=new Float32Array(this.uniformGroup.uniforms[i]))}s={uniforms:{configurable:!0}};kn.prototype.checkUniformExists=function(e,t){if(t.uniforms[e])return!0;for(var i in t.uniforms){i=t.uniforms[i];if(i.group&&this.checkUniformExists(e,i))return!0}return!1},kn.prototype.destroy=function(){this.uniformGroup=null},s.uniforms.get=function(){return this.uniformGroup.uniforms},kn.from=function(e,t,i){t=Fn.from(e,t);return new kn(t,i)},Object.defineProperties(kn.prototype,s);function Gn(){this.data=0,this.blendMode=de.NORMAL,this.polygonOffset=0,this.blend=!0}var Wn={blend:{configurable:!0},offsets:{configurable:!0},culling:{configurable:!0},depthTest:{configurable:!0},clockwiseFrontFace:{configurable:!0},blendMode:{configurable:!0},polygonOffset:{configurable:!0}};Wn.blend.get=function(){return!!(1&this.data)},Wn.blend.set=function(e){!!(1&this.data)!==e&&(this.data^=1)},Wn.offsets.get=function(){return!!(2&this.data)},Wn.offsets.set=function(e){!!(2&this.data)!==e&&(this.data^=2)},Wn.culling.get=function(){return!!(4&this.data)},Wn.culling.set=function(e){!!(4&this.data)!==e&&(this.data^=4)},Wn.depthTest.get=function(){return!!(8&this.data)},Wn.depthTest.set=function(e){!!(8&this.data)!==e&&(this.data^=8)},Wn.clockwiseFrontFace.get=function(){return!!(16&this.data)},Wn.clockwiseFrontFace.set=function(e){!!(16&this.data)!==e&&(this.data^=16)},Wn.blendMode.get=function(){return this._blendMode},Wn.blendMode.set=function(e){this.blend=e!==de.NONE,this._blendMode=e},Wn.polygonOffset.get=function(){return this._polygonOffset},Wn.polygonOffset.set=function(e){this.offsets=!!e,this._polygonOffset=e},Gn.for2d=function(){var e=new Gn;return e.depthTest=!1,e.blend=!0,e},Object.defineProperties(Gn.prototype,Wn);var Un=function(n){function s(e,t,i){t=Fn.from(e||s.defaultVertexSrc,t||s.defaultFragmentSrc);n.call(this,t,i),this.padding=0,this.resolution=C.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0,this.legacy=!!this.program.attributeData.aTextureCoord,this.state=new Gn}n&&(s.__proto__=n);var e={blendMode:{configurable:!0}},t={defaultVertexSrc:{configurable:!0},defaultFragmentSrc:{configurable:!0}};return((s.prototype=Object.create(n&&n.prototype)).constructor=s).prototype.apply=function(e,t,i,n,s){e.applyFilter(this,t,i,n,s)},e.blendMode.get=function(){return this.state.blendMode},e.blendMode.set=function(e){this.state.blendMode=e},t.defaultVertexSrc.get=function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},t.defaultFragmentSrc.get=function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},Object.defineProperties(s.prototype,e),Object.defineProperties(s,t),s}(kn);Un.SOURCE_KEY_MAP={};function Vn(e,t){this._texture=e,this.mapCoord=new rt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._updateID=-1,this.clampOffset=0,this.clampMargin=void 0===t?.5:t,this.isSimple=!1}var Hn=new rt,$n={texture:{configurable:!0}};$n.texture.get=function(){return this._texture},$n.texture.set=function(e){this._texture=e,this._updateID=-1},Vn.prototype.multiplyUvs=function(e,t){void 0===t&&(t=e);for(var i=this.mapCoord,n=0;n<e.length;n+=2){var s=e[n],r=e[n+1];t[n]=s*i.a+r*i.c+i.tx,t[n+1]=s*i.b+r*i.d+i.ty}return t},Vn.prototype.update=function(e){var t=this._texture;if(!t||!t.valid)return!1;if(!e&&this._updateID===t._updateID)return!1;this._updateID=t._updateID;var i=t._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=t.orig,s=t.trim;s&&(Hn.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(Hn));e=t.baseTexture,i=this.uClampFrame,n=this.clampMargin/e.resolution,s=this.clampOffset;return i[0]=(t._frame.x+n+s)/e.width,i[1]=(t._frame.y+n+s)/e.height,i[2]=(t._frame.x+t._frame.width-n+s)/e.width,i[3]=(t._frame.y+t._frame.height-n+s)/e.height,this.uClampOffset[0]=s/e.realWidth,this.uClampOffset[1]=s/e.realHeight,this.isSimple=t._frame.width===e.width&&t._frame.height===e.height&&0===t.rotate,!0},Object.defineProperties(Vn.prototype,$n);var Xn,Yn=((Xn=Un)&&(jn.__proto__=Xn),((jn.prototype=Object.create(Xn&&Xn.prototype)).constructor=jn).prototype.apply=function(e,t,i,n){var s=this.maskSprite,r=this.maskSprite.texture;r.valid&&(r.transform||(r.transform=new Vn(r,0)),r.transform.update(),this.uniforms.npmAlpha=r.baseTexture.premultiplyAlpha?0:1,this.uniforms.mask=r,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(r.transform.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=r.transform.uClampFrame,e.applyFilter(this,t,i,n))},jn);function jn(e){var t=new rt;Xn.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n"),e.renderable=!1,this.maskSprite=e,this.maskMatrix=t}var zn,qn=((zn=Si)&&(Kn.__proto__=zn),((Kn.prototype=Object.create(zn&&zn.prototype)).constructor=Kn).prototype.push=function(e,t){var i;t.isSprite?this.pushSpriteMask(e,t):this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencil.stencilMaskStack.length&&t.isFastRect()?(i=t.worldTransform,i=Math.atan2(i.b,i.a),(i=Math.round(i*(180/Math.PI)))%90?this.pushStencilMask(t):this.pushScissorMask(e,t)):this.pushStencilMask(t)},Kn.prototype.pop=function(e,t){t.isSprite?this.popSpriteMask(e,t):this.enableScissor&&!this.renderer.stencil.stencilMaskStack.length?this.popScissorMask(e,t):this.popStencilMask(e,t)},Kn.prototype.pushSpriteMask=function(e,t){var i=this.alphaMaskPool[this.alphaMaskIndex];(i=i||(this.alphaMaskPool[this.alphaMaskIndex]=[new Yn(t)]))[0].resolution=this.renderer.resolution,i[0].maskSprite=t;var n=e.filterArea;e.filterArea=t.getBounds(!0),this.renderer.filter.push(e,i),e.filterArea=n,this.alphaMaskIndex++},Kn.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},Kn.prototype.pushStencilMask=function(e){this.renderer.batch.flush(),this.renderer.stencil.pushStencil(e)},Kn.prototype.popStencilMask=function(){this.renderer.stencil.popStencil()},Kn.prototype.pushScissorMask=function(e,t){t.renderable=!0;var i=this.renderer._activeRenderTarget,n=t.getBounds();n.fit(i.size),t.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var s=this.renderer.resolution;this.renderer.gl.scissor(n.x*s,(i.root?i.size.height-n.y-n.height:n.y)*s,n.width*s,n.height*s),this.scissorRenderTarget=i,this.scissorData=t,this.scissor=!0},Kn.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var e=this.renderer.gl;e.disable(e.SCISSOR_TEST)},Kn);function Kn(e){zn.call(this,e),this.scissor=!1,this.scissorData=null,this.scissorRenderTarget=null,this.enableScissor=!1,this.alphaMaskPool=[],this.alphaMaskIndex=0}var Qn,Zn=((Qn=Si)&&(Jn.__proto__=Qn),((Jn.prototype=Object.create(Qn&&Qn.prototype)).constructor=Jn).prototype.setMaskStack=function(e){var t=this.renderer.gl,i=this.stencilMaskStack.length;(this.stencilMaskStack=e).length!==i&&(0===e.length?t.disable(t.STENCIL_TEST):(t.enable(t.STENCIL_TEST),this._useCurrent()))},Jn.prototype.pushStencil=function(e){var t=this.renderer.gl,i=this.stencilMaskStack.length;0===i&&t.enable(t.STENCIL_TEST),this.stencilMaskStack.push(e),t.colorMask(!1,!1,!1,!1),t.stencilFunc(t.EQUAL,i,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},Jn.prototype.popStencil=function(){var e=this.renderer.gl,t=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},Jn.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},Jn.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},Jn.prototype.destroy=function(){Qn.prototype.destroy.call(this,this),this.stencilMaskStack=null},Jn);function Jn(e){Qn.call(this,e),this.stencilMaskStack=[]}var es,ts=((es=Si)&&(is.__proto__=es),((is.prototype=Object.create(es&&es.prototype)).constructor=is).prototype.update=function(e,t,i,n){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)},is.prototype.calculateProjection=function(e,t,i,n){var s=this.projectionMatrix;n?(s.a=1/e.width*2*i,s.d=-1/e.height*2*i,s.tx=-1-t.x*s.a,s.ty=1-t.y*s.d):(s.a=1/e.width*2*i,s.d=1/e.height*2*i,s.tx=-1-t.x*s.a,s.ty=-1-t.y*s.d)},is.prototype.setTransform=function(){},is);function is(e){es.call(this,e),this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new rt,this.transform=null}var ns,ss=new Tt,rs=((ns=Si)&&(os.__proto__=ns),((os.prototype=Object.create(ns&&ns.prototype)).constructor=os).prototype.bind=function(e,t,i){this.current=e=void 0===e?null:e;var n,s=this.renderer;e?(n=(e=e.baseTexture).resolution,i||(ss.width=e.realWidth,ss.height=e.realHeight,i=ss),t=t||i,this.renderer.framebuffer.bind(e.framebuffer,i),this.renderer.projection.update(i,t,n,!1),this.renderer.stencil.setMaskStack(e.stencilMaskStack)):(n=this.renderer.resolution,i||(ss.width=s.width,ss.height=s.height,i=ss),t=t||i,s.framebuffer.bind(null,i),this.renderer.projection.update(i,t,n,!0),this.renderer.stencil.setMaskStack(this.defaultMaskStack)),this.sourceFrame.copyFrom(t),this.destinationFrame.x=i.x/n,this.destinationFrame.y=i.y/n,this.destinationFrame.width=i.width/n,this.destinationFrame.height=i.height/n,t===i&&this.sourceFrame.copyFrom(this.destinationFrame)},os.prototype.clear=function(e){e=this.current?e||this.current.baseTexture.clearColor:e||this.clearColor,this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3])},os.prototype.resize=function(){this.bind(null)},os.prototype.reset=function(){this.bind(null)},os);function os(e){ns.call(this,e),this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Tt,this.destinationFrame=new Tt}function as(e,t){this.program=e,this.uniformData=t,this.uniformGroups={}}as.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null};var ls,hs=0,cs=((ls=Si)&&(ps.__proto__=ls),((ps.prototype=Object.create(ls&&ls.prototype)).constructor=ps).prototype.systemCheck=function(){if(!function(){if("boolean"==typeof Mn)return Mn;try{var e=new Function("param1","param2","param3","return param1[param2] === param3;");Mn=!0===e({a:"b"},"a","b")}catch(e){Mn=!1}return Mn}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},ps.prototype.contextChange=function(e){this.gl=e,this.reset()},ps.prototype.bind=function(e,t){e.uniforms.globals=this.renderer.globalUniforms;var i=e.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(e);return this.shader=e,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),t||this.syncUniformGroup(e.uniformGroup),n},ps.prototype.setUniforms=function(e){var t=this.shader.program,i=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(i.uniformData,e,this.renderer)},ps.prototype.syncUniformGroup=function(e){var t=this.getglProgram();e.static&&e.dirtyId===t.uniformGroups[e.id]||(t.uniformGroups[e.id]=e.dirtyId,this.syncUniforms(e,t))},ps.prototype.syncUniforms=function(e,t){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer)},ps.prototype.createSyncGroups=function(e){var t=this.getSignature(e,this.shader.program.uniformData);return this.cache[t]||(this.cache[t]=function(e,t){var i,n=0,s="var v = null;\n    var cv = null\n    var gl = renderer.gl";for(i in e.uniforms){var r=t[i];r?"float"===r.type&&1===r.size?s+="\n            if(uv."+i+" !== ud."+i+".value)\n            {\n                ud."+i+".value = uv."+i+"\n                gl.uniform1f(ud."+i+".location, uv."+i+")\n            }\n":"sampler2D"!==r.type&&"samplerCube"!==r.type&&"sampler2DArray"!==r.type||1!==r.size||r.isArray?"mat3"===r.type&&1===r.size?void 0!==e.uniforms[i].a?s+="\n                gl.uniformMatrix3fv(ud."+i+".location, false, uv."+i+".toArray(true));\n                \n":s+="\n                gl.uniformMatrix3fv(ud."+i+".location, false, uv."+i+");\n                \n":"vec2"===r.type&&1===r.size?void 0!==e.uniforms[i].x?s+="\n                cv = ud."+i+".value;\n                v = uv."+i+";\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud."+i+".location, v.x, v.y);\n                }\n":s+="\n                cv = ud."+i+".value;\n                v = uv."+i+";\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud."+i+".location, v[0], v[1]);\n                }\n                \n":"vec4"===r.type&&1===r.size?void 0!==e.uniforms[i].width?s+="\n                cv = ud."+i+".value;\n                v = uv."+i+";\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud."+i+".location, v.x, v.y, v.width, v.height)\n                }\n":s+="\n                cv = ud."+i+".value;\n                v = uv."+i+";\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud."+i+".location, v[0], v[1], v[2], v[3])\n                }\n                \n":s+="\n            cv = ud."+i+".value;\n            v = uv."+i+";\n            "+(1===r.size?wn:Rn)[r.type].replace("location","ud."+i+".location")+";\n":(s+="\n            renderer.texture.bind(uv."+i+", "+n+");\n\n            if(ud."+i+".value !== "+n+")\n            {\n                ud."+i+".value = "+n+";\n                gl.uniform1i(ud."+i+".location, "+n+");\n; // eslint-disable-line max-len\n            }\n",n++):e.uniforms[i].group&&(s+="\n                    renderer.shader.syncUniformGroup(uv."+i+");\n                ")}return new Function("ud","uv","renderer",s)}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]},ps.prototype.getSignature=function(e,t){var i,n=[];for(i in e.uniforms)n.push(i),t[i]&&n.push(t[i].type);return n.join("-")},ps.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},ps.prototype.generateShader=function(e){var t,i=this.gl,n=e.program,s={};for(t in n.attributeData)s[t]=n.attributeData[t].location;var r,o=vn(i,n.vertexSrc,n.fragmentSrc,s),a={};for(r in n.uniformData){var l=n.uniformData[r];a[r]={location:i.getUniformLocation(o,r),value:bn(l.type,l.size)}}e=new as(o,a);return n.glPrograms[this.renderer.CONTEXT_UID]=e},ps.prototype.reset=function(){this.program=null,this.shader=null},ps.prototype.destroy=function(){this.destroyed=!0},ps);function ps(e){ls.call(this,e),this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this.id=hs++}var us,ds=((us=Si)&&(ms.__proto__=us),((ms.prototype=Object.create(us&&us.prototype)).constructor=ms).prototype.contextChange=function(e){var t;this.gl=e,this.blendModes=(e=e,(t=void 0===t?[]:t)[de.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[de.ADD]=[e.ONE,e.ONE],t[de.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[de.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[de.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[de.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[de.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[de.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[de.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[de.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[de.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[de.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[de.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[de.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[de.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[de.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[de.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[de.NONE]=[0,0],t[de.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[de.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[de.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[de.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[de.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[de.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[de.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[de.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[de.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[de.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[de.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t),this.set(this.defaultState),this.reset()},ms.prototype.set=function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var t=this.stateId^e.data,i=0;t;)1&t&&this.map[i].call(this,!!(e.data&1<<i)),t>>=1,i++;this.stateId=e.data}for(var n=0;n<this.checks.length;n++)this.checks[n](this,e)},ms.prototype.forceState=function(e){e=e||this.defaultState;for(var t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(var i=0;i<this.checks.length;i++)this.checks[i](this,e);this.stateId=e.data},ms.prototype.setBlend=function(e){this.updateCheck(ms.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},ms.prototype.setOffset=function(e){this.updateCheck(ms.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},ms.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},ms.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},ms.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},ms.prototype.setBlendMode=function(e){var t;e!==this.blendMode&&void 0!==e&&(this.blendMode=e,t=this.blendModes[e],e=this.gl,2===t.length?e.blendFunc(t[0],t[1]):e.blendFuncSeparate(t[0],t[1],t[2],t[3]),6===t.length?(this._blendEq=!0,e.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD)))},ms.prototype.setPolygonOffset=function(e,t){this.gl.polygonOffset(e,t)},ms.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(0),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},ms.prototype.updateCheck=function(e,t){var i=this.checks.indexOf(e);t&&-1===i?this.checks.push(e):t||-1===i||this.checks.splice(i,1)},ms.checkBlendMode=function(e,t){e.setBlendMode(t.blendMode)},ms.checkPolygonOffset=function(e,t){e.setPolygonOffset(t.polygonOffset,0)},ms);function ms(e){us.call(this,e),this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=de.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.checks=[],this.defaultState=new Gn,this.defaultState.blend=!0,this.defaultState.depth=!0}var fs,gs=((fs=Si)&&(vs.__proto__=fs),((vs.prototype=Object.create(fs&&fs.prototype)).constructor=vs).prototype.postrender=function(){this.count++,this.mode!==Te.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},vs.prototype.run=function(){for(var e=this.renderer.texture,t=e.managedTextures,i=!1,n=0;n<t.length;n++){var s=t[n];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),i=!(t[n]=null))}if(i){for(var r=0,o=0;o<t.length;o++)null!==t[o]&&(t[r++]=t[o]);t.length=r}},vs.prototype.unload=function(e){var t=this.renderer.textureSystem;e._texture&&e._texture._glRenderTargets&&t.destroyTexture(e._texture);for(var i=e.children.length-1;0<=i;i--)this.unload(e.children[i])},vs);function vs(e){fs.call(this,e),this.count=0,this.checkCount=0,this.maxIdle=C.GC_MAX_IDLE,this.checkCountMax=C.GC_MAX_CHECK_COUNT,this.mode=C.GC_MODE}function ys(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121}var bs,Ss=((bs=Si)&&(Ts.__proto__=bs),((Ts.prototype=Object.create(bs&&bs.prototype)).constructor=Ts).prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(var i=0;i<t;i++)this.boundTextures[i]=null;this.emptyTextures={};var n=new ys(e.createTexture());e.bindTexture(e.TEXTURE_2D,n.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=n,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new ys(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(var s=0;s<6;s++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(var r=0;r<this.boundTextures.length;r++)this.bind(null,r)},Ts.prototype.bind=function(e,t){void 0===t&&(t=0);var i,n=this.gl;e?(e=e.baseTexture||e).valid&&(e.touched=this.renderer.textureGC.count,i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e),this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),this.boundTextures[t]!==e&&n.bindTexture(e.target,i.texture),i.dirtyId!==e.dirtyId&&this.updateTexture(e),this.boundTextures[t]=e):(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[t]=null)},Ts.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},Ts.prototype.unbind=function(e){var t=this.gl,i=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var n=0;n<i.length;n++)i[n]===this.unknownTexture&&this.bind(null,n)}for(var s=0;s<i.length;s++)i[s]===e&&(this.currentLocation!==s&&(t.activeTexture(t.TEXTURE0+s),this.currentLocation=s),t.bindTexture(t.TEXTURE_2D,this.emptyTextures[e.target].texture),i[s]=null)},Ts.prototype.initTexture=function(e){var t=new ys(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t},Ts.prototype.initTextureType=function(e,t){var i;t.internalFormat=e.format,t.type=e.type,2===this.webGLVersion&&(i=this.renderer.gl,e.type===i.FLOAT&&e.format===i.RGBA&&(t.internalFormat=i.RGBA32F),e.type===ve.HALF_FLOAT&&(t.type=i.HALF_FLOAT),t.type===i.HALF_FLOAT&&e.format===i.RGBA&&(t.internalFormat=i.RGBA16F))},Ts.prototype.updateTexture=function(e){var t,i,n,s=e._glTextures[this.CONTEXT_UID];s&&(n=this.renderer,this.initTextureType(e,s),e.resource&&e.resource.upload(n,e,s)||(t=e.realWidth,i=e.realHeight,n=n.gl,(s.width!==t||s.height!==i||s.dirtyId<0)&&(s.width=t,s.height=i,n.texImage2D(e.target,0,s.internalFormat,t,i,0,e.format,s.type,null))),e.dirtyStyleId!==s.dirtyStyleId&&this.updateTextureStyle(e),s.dirtyId=e.dirtyId)},Ts.prototype.destroyTexture=function(e,t){var i=this.gl;(e=e.baseTexture||e)._glTextures[this.CONTEXT_UID]&&(this.unbind(e),i.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],t||-1!==(e=this.managedTextures.indexOf(e))&&De(this.managedTextures,e,1))},Ts.prototype.updateTextureStyle=function(e){var t=e._glTextures[this.CONTEXT_UID];t&&(e.mipmap!==Se.POW2&&2===this.webGLVersion||e.isPowerOfTwo?(t.mipmap=1<=e.mipmap,t.wrapMode=e.wrapMode):(t.mipmap=0,t.wrapMode=be.CLAMP),e.resource&&e.resource.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)},Ts.prototype.setStyle=function(e,t){var i,n=this.gl;t.mipmap&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,t.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,t.wrapMode),t.mipmap?(n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST),(i=this.renderer.context.extensions.anisotropicFiltering)&&0<e.anisotropicLevel&&e.scaleMode===ye.LINEAR&&(t=Math.min(e.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),n.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,t))):n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode?n.LINEAR:n.NEAREST),n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode?n.LINEAR:n.NEAREST)},Ts);function Ts(e){bs.call(this,e),this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new ni}var _s,v={FilterSystem:nn,BatchSystem:an,ContextSystem:un,FramebufferSystem:dn,GeometrySystem:fn,MaskSystem:qn,StencilSystem:Zn,ProjectionSystem:ts,RenderTextureSystem:rs,ShaderSystem:cs,StateSystem:ds,TextureGCSystem:gs,TextureSystem:Ss},As=new rt,ee=function(i){function e(e,t){i.call(this),(t=Object.assign({},C.RENDER_OPTIONS,t)).roundPixels&&(C.ROUND_PIXELS=t.roundPixels,et("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),this.options=t,this.type=ue.UNKNOWN,this.screen=new Tt(0,0,t.width,t.height),this.view=t.view||document.createElement("canvas"),this.resolution=t.resolution||C.RESOLUTION,this.transparent=t.transparent,this.autoDensity=t.autoDensity||t.autoResize||!1,this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.clearBeforeRender=t.clearBeforeRender,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,0],this._backgroundColorString="#000000",this.backgroundColor=t.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent=new Rt,this._lastObjectRendered=this._tempDisplayObjectParent,this.plugins={}}i&&(e.__proto__=i);var t={width:{configurable:!0},height:{configurable:!0},backgroundColor:{configurable:!0}};return((e.prototype=Object.create(i&&i.prototype)).constructor=e).prototype.initPlugins=function(e){for(var t in e)this.plugins[t]=new e[t](this)},t.width.get=function(){return this.view.width},t.height.get=function(){return this.view.height},e.prototype.resize=function(e,t){this.screen.width=e,this.screen.height=t,this.view.width=e*this.resolution,this.view.height=t*this.resolution,this.autoDensity&&(this.view.style.width=e+"px",this.view.style.height=t+"px")},e.prototype.generateTexture=function(e,t,i,n){0===(n=n||e.getLocalBounds()).width&&(n.width=1),0===n.height&&(n.height=1);i=Ni.create(0|n.width,0|n.height,t,i);return As.tx=-n.x,As.ty=-n.y,this.render(e,i,!1,As,!!e.parent),i},e.prototype.destroy=function(e){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.plugins=null,this.type=ue.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoDensity=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},t.backgroundColor.get=function(){return this._backgroundColor},t.backgroundColor.set=function(e){this._backgroundColor=e,this._backgroundColorString=Be(e),xe(e,this._backgroundColorRgba)},Object.defineProperties(e.prototype,t),e}(f),Ps=((_s=ee)&&(Is.__proto__=_s),((Is.prototype=Object.create(_s&&_s.prototype)).constructor=Is).create=function(e){if(Ce())return new Is(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},Is.prototype.addSystem=function(e,t){t=t||e.name;var i,n=new e(this);if(this[t])throw new Error('Whoops! The name "'+t+'" is already in use');for(i in this[t]=n,this.runners)this.runners[i].add(n);return this},Is.prototype.render=function(e,t,i,n,s){this.renderingToScreen=!t,this.runners.prerender.run(),this.emit("prerender"),this.projection.transform=n,this.context.isLost||(t||(this._lastObjectRendered=e),s||(s=e.parent,e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=s),this.renderTexture.bind(t),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),t&&t.baseTexture.update(),this.runners.postrender.run(),this.projection.transform=null,this.emit("postrender"))},Is.prototype.resize=function(e,t){_s.prototype.resize.call(this,e,t),this.runners.resize.run(e,t)},Is.prototype.reset=function(){return this.runners.reset.run(),this},Is.prototype.clear=function(){this.framebuffer.bind(),this.framebuffer.clear()},Is.prototype.destroy=function(e){for(var t in this.runners.destroy.run(),this.runners)this.runners[t].destroy();_s.prototype.destroy.call(this,e),this.gl=null},Is.registerPlugin=function(e,t){(Is.__plugins=Is.__plugins||{})[e]=t},Is);function Is(e){_s.call(this,"WebGL",e=void 0===e?{}:e),e=this.options,this.type=ue.WEBGL,this.gl=null,this.CONTEXT_UID=0,this.runners={destroy:new Nt("destroy"),contextChange:new Nt("contextChange"),reset:new Nt("reset"),update:new Nt("update"),postrender:new Nt("postrender"),prerender:new Nt("prerender"),resize:new Nt("resize")},this.globalUniforms=new Zi({projectionMatrix:new rt},!0),this.addSystem(qn,"mask").addSystem(un,"context").addSystem(ds,"state").addSystem(cs,"shader").addSystem(Ss,"texture").addSystem(fn,"geometry").addSystem(dn,"framebuffer").addSystem(Zn,"stencil").addSystem(ts,"projection").addSystem(gs,"textureGC").addSystem(nn,"filter").addSystem(rs,"renderTexture").addSystem(an,"batch"),this.initPlugins(Is.__plugins),e.context?this.context.initFromContext(e.context):this.context.initFromOptions({alpha:this.transparent,antialias:e.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:this.options.powerPreference}),this.renderingToScreen=!0,Ie(2===this.context.webGLVersion?"WebGL 2":"WebGL 1"),this.resize(this.options.width,this.options.height)}function Cs(e){return Ps.create(e)}var xs,Bs="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",Es="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",z=((xs=ni)&&(ws.__proto__=xs),((ws.prototype=Object.create(xs&&xs.prototype)).constructor=ws).from=function(e,t){return new ws(new pi(e,t))},ws);function ws(){xs.apply(this,arguments)}function Rs(){this.textures=[],this.ids=[],this.blend=0,this.textureCount=0,this.start=0,this.size=0,this.type=4}function Ms(e){this.rawBinaryData=new ArrayBuffer(e),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}q={int8View:{configurable:!0},uint8View:{configurable:!0},int16View:{configurable:!0},uint16View:{configurable:!0},int32View:{configurable:!0}};q.int8View.get=function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},q.uint8View.get=function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},q.int16View.get=function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},q.uint16View.get=function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},q.int32View.get=function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},Ms.prototype.view=function(e){return this[e+"View"]},Ms.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},Ms.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(e+" isn't a valid view type")}},Object.defineProperties(Ms.prototype,q);var Os,Ns=((Os=rn)&&(Fs.__proto__=Os),((Fs.prototype=Object.create(Os&&Os.prototype)).constructor=Fs).prototype.contextChange=function(){var e=this.renderer.gl;C.PREFER_ENV===pe.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),C.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Nn(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass},Fs.prototype.onPrerender=function(){this._flushId=0},Fs.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedElements[this._bufferSize++]=e)},Fs.prototype.flush=function(){if(0!==this._vertexCount){var e,t=this.getAttributeBuffer(this._vertexCount),i=this.getIndexBuffer(this._indexCount),n=this.renderer.gl,s=this._bufferedElements,r=this._drawCalls,o=this.MAX_TEXTURES,a=this._packedGeometries,l=this.vertexSize,h=this.renderer.textureGC.count,c=0,p=0,u=0,d=r[0],m=0,f=-1;d.textureCount=0,d.start=0,d.blend=f;for(var g=++ni._globalBatch,v=0;v<this._bufferSize;++v){var y=s[v];s[v]=null;var b=y._texture.baseTexture,S=we[b.premultiplyAlpha?1:0][y.blendMode];f!==S&&(f=S,e=null,u=o,g++),e!==b&&(e=b)._batchEnabled!==g&&(u===o&&(g++,u=0,d.size=p-d.start,(d=r[m++]).textureCount=0,d.blend=f,d.start=p),b.touched=h,b._batchEnabled=g,b._id=u,d.textures[d.textureCount++]=b,u++),this.packInterleavedGeometry(y,t,i,c,p),c+=y.vertexData.length/2*l,p+=y.indices.length}ni._globalBatch=g,d.size=p-d.start,C.CAN_UPLOAD_SAME_BUFFER?(a[this._flushId]._buffer.update(t.rawBinaryData,0),a[this._flushId]._indexBuffer.update(i,0),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,a[this._flushId]=new this.geometryClass),a[this._flushId]._buffer.update(t.rawBinaryData,0),a[this._flushId]._indexBuffer.update(i,0),this.renderer.geometry.bind(a[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++);var T=this.renderer.texture,_=this.renderer.state;for(v=0;v<m;v++){for(var A=r[v],P=A.textureCount,I=0;I<P;I++)T.bind(A.textures[I],I),A.textures[I]=null;_.setBlendMode(A.blend),n.drawElements(A.type,A.size,n.UNSIGNED_SHORT,2*A.start)}this._bufferSize=0,this._vertexCount=0,this._indexCount=0}},Fs.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),C.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},Fs.prototype.stop=function(){this.flush()},Fs.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._drawCalls=null,this._shader&&(this._shader.destroy(),this._shader=null),Os.prototype.destroy.call(this)},Fs.prototype.getAttributeBuffer=function(e){var t=We(Math.ceil(e/8)),e=Ve(t),t=8*t;this._aBuffers.length<=e&&(this._iBuffers.length=e+1);e=this._aBuffers[t];return e||(this._aBuffers[t]=e=new Ms(t*this.vertexSize*4)),e},Fs.prototype.getIndexBuffer=function(e){var t=We(Math.ceil(e/12)),i=Ve(t),e=12*t;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);t=this._iBuffers[i];return t||(this._iBuffers[i]=t=new Uint16Array(e)),t},Fs.prototype.packInterleavedGeometry=function(e,t,i,n,s){for(var r=t.uint32View,o=t.float32View,a=n/this.vertexSize,l=e.uvs,h=e.indices,c=e.vertexData,p=e._texture.baseTexture._id,t=Math.min(e.worldAlpha,1),u=t<1&&e._texture.baseTexture.premultiplyAlpha?Oe(e._tintRGB,t):e._tintRGB+(255*t<<24),d=0;d<c.length;d+=2)o[n++]=c[d],o[n++]=c[d+1],o[n++]=l[d],o[n++]=l[d+1],r[n++]=u,o[n++]=p;for(var m=0;m<h.length;m++)i[s++]=a+h[m]},Fs);function Fs(e){Os.call(this,e),this.shaderGenerator=null,this.geometryClass=null,this.vertexSize=null,this.state=Gn.for2d(),this.size=8e3,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._drawCalls=[];for(var t=0;t<this.size/4;t++)this._drawCalls[t]=new Rs;this._aBuffers={},this._iBuffers={},this.MAX_TEXTURES=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this)}function Ds(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},t.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(t.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}Ds.prototype.generateShader=function(e){if(!this.programCache[e]){for(var t=new Int32Array(e),i=0;i<e;i++)t[i]=i;this.defaultGroupCache[e]=Zi.from({uSamplers:t},!0);var n=this.fragTemplate;n=(n=n.replace(/%count%/gi,""+e)).replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Fn(this.vertexSrc,n)}n={tint:new Float32Array([1,1,1,1]),translationMatrix:new rt,default:this.defaultGroupCache[e]};return new kn(this.programCache[e],n)},Ds.prototype.generateSampleSrc=function(e){var t="";t+="\n",t+="\n";for(var i=0;i<e;i++)0<i&&(t+="\nelse "),i<e-1&&(t+="if(vTextureId < "+i+".5)"),t+="\n{",t+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",t+="\n}";return t+="\n",t+="\n"};var Ls,ks=((Ls=Vi)&&(Gs.__proto__=Ls),(Gs.prototype=Object.create(Ls&&Ls.prototype)).constructor=Gs);function Gs(e){void 0===e&&(e=!1),Ls.call(this),this._buffer=new ki(null,e,!1),this._indexBuffer=new ki(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,ve.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,ve.FLOAT).addAttribute("aColor",this._buffer,4,!0,ve.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,ve.FLOAT).addIndex(this._indexBuffer)}function Ws(){}var Us="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",Vs="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",ze={defaultVertexSrc:{configurable:!0},defaultFragmentTemplate:{configurable:!0}};Ws.create=function(e){var t,e=Object.assign({vertex:Us,fragment:Vs,geometryClass:ks,vertexSize:6},e),i=e.vertex,n=e.fragment,s=e.vertexSize,r=e.geometryClass;return(t=Ns)&&(o.__proto__=t),(o.prototype=Object.create(t&&t.prototype)).constructor=o;function o(e){t.call(this,e),this.shaderGenerator=new Ds(i,n),this.geometryClass=r,this.vertexSize=s}},ze.defaultVertexSrc.get=function(){return Us},ze.defaultFragmentTemplate.get=function(){return Vs},Object.defineProperties(Ws,ze);function Hs(e){(this.renderer=e).extract=this}var st=Ws.create(),$s=new Tt;Hs.prototype.image=function(e,t,i){var n;return(n=new Image).src=this.base64(e,t,i),n},Hs.prototype.base64=function(e,t,i){return this.canvas(e).toDataURL(t,i)},Hs.prototype.canvas=function(e){var t,i,n,s=this.renderer,r=!1,o=!1;e&&(e instanceof Ni?n=e:(n=this.renderer.generateTexture(e),o=!0)),n?(t=n.baseTexture.resolution,i=n.frame,r=!1,s.renderTexture.bind(n)):(t=this.renderer.resolution,r=!0,(i=$s).width=this.renderer.width,i.height=this.renderer.height,s.renderTexture.bind(null));var a=Math.floor(i.width*t),l=Math.floor(i.height*t),h=new je(a,l,1),e=new Uint8Array(4*a*l),s=s.gl;s.readPixels(i.x*t,i.y*t,a,l,s.RGBA,s.UNSIGNED_BYTE,e);a=h.context.getImageData(0,0,a,l);return Hs.arrayPostDivide(e,a.data),h.context.putImageData(a,0,0),r&&(h.context.scale(1,-1),h.context.drawImage(h.canvas,0,-l)),o&&n.destroy(!0),h.canvas},Hs.prototype.pixels=function(e){var t,i,n,s=this.renderer,r=!1;e&&(e instanceof Ni?n=e:(n=this.renderer.generateTexture(e),r=!0)),n?(t=n.baseTexture.resolution,i=n.frame,s.renderTexture.bind(n)):(t=s.resolution,(i=$s).width=s.width,i.height=s.height,s.renderTexture.bind(null));var o=i.width*t,a=i.height*t,e=new Uint8Array(4*o*a),s=s.gl;return s.readPixels(i.x*t,i.y*t,o,a,s.RGBA,s.UNSIGNED_BYTE,e),r&&n.destroy(!0),Hs.arrayPostDivide(e,e),e},Hs.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},Hs.arrayPostDivide=function(e,t){for(var i=0;i<e.length;i+=4){var n=t[i+3]=e[i+3];0!==n?(t[i]=Math.round(Math.min(255*e[i]/n,255)),t[i+1]=Math.round(Math.min(255*e[i+1]/n,255)),t[i+2]=Math.round(Math.min(255*e[i+2]/n,255))):(t[i]=e[i],t[i+1]=e[i+1],t[i+2]=e[i+2])}};function Xs(){this.global=new it,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}ct={Extract:Hs},St={pointerId:{configurable:!0}};St.pointerId.get=function(){return this.identifier},Xs.prototype.getLocalPosition=function(e,t,i){return e.worldTransform.applyInverse(i||this.global,t)},Xs.prototype.copyEvent=function(e){e.isPrimary&&(this.isPrimary=!0),this.button=e.button,this.buttons=Number.isInteger(e.buttons)?e.buttons:e.which,this.width=e.width,this.height=e.height,this.tiltX=e.tiltX,this.tiltY=e.tiltY,this.pointerType=e.pointerType,this.pressure=e.pressure,this.rotationAngle=e.rotationAngle,this.twist=e.twist||0,this.tangentialPressure=e.tangentialPressure||0},Xs.prototype.reset=function(){this.isPrimary=!1},Object.defineProperties(Xs.prototype,St);function Ys(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}Ys.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},Ys.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null};function js(e){this._pointerId=e,this._flags=js.FLAGS.NONE}_t={pointerId:{configurable:!0},flags:{configurable:!0},none:{configurable:!0},over:{configurable:!0},rightDown:{configurable:!0},leftDown:{configurable:!0}};js.prototype._doSet=function(e,t){this._flags=t?this._flags|e:this._flags&~e},_t.pointerId.get=function(){return this._pointerId},_t.flags.get=function(){return this._flags},_t.flags.set=function(e){this._flags=e},_t.none.get=function(){return this._flags===this.constructor.FLAGS.NONE},_t.over.get=function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},_t.over.set=function(e){this._doSet(this.constructor.FLAGS.OVER,e)},_t.rightDown.get=function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},_t.rightDown.set=function(e){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,e)},_t.leftDown.get=function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},_t.leftDown.set=function(e){this._doSet(this.constructor.FLAGS.LEFT_DOWN,e)},Object.defineProperties(js.prototype,_t),js.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4});At={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(e){e?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Et.mixin(At);var zs,qs={target:null,data:{global:null}},Mt=((zs=f)&&(Ks.__proto__=zs),((Ks.prototype=Object.create(zs&&zs.prototype)).constructor=Ks).prototype.hitTest=function(e,t){return qs.target=null,qs.data.global=e,t=t||this.renderer._lastObjectRendered,this.processInteractive(qs,t,null,!0),qs.target},Ks.prototype.setTargetElement=function(e,t){void 0===t&&(t=1),this.removeEvents(),this.interactionDOMElement=e,this.resolution=t,this.addEvents()},Ks.prototype.addEvents=function(){this.interactionDOMElement&&(Gt.system.add(this.update,this,kt.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},Ks.prototype.removeEvents=function(){this.interactionDOMElement&&(Gt.system.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},Ks.prototype.update=function(e){if(this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement))if(this.didMove)this.didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)!this.activeInteractionData.hasOwnProperty(t)||(t=this.activeInteractionData[t]).originalEvent&&"touch"!==t.pointerType&&(t=this.configureInteractionEventForDOMEvent(this.eventData,t.originalEvent,t),this.processInteractive(t,this.renderer._lastObjectRendered,this.processPointerOverOut,!0));this.setCursorMode(this.cursor)}},Ks.prototype.setCursorMode=function(e){if(this.currentCursorMode!==(e=e||"default")){this.currentCursorMode=e;var t=this.cursorStyles[e];if(t)switch(typeof t){case"string":this.interactionDOMElement.style.cursor=t;break;case"function":t(e);break;case"object":Object.assign(this.interactionDOMElement.style,t)}else"string"!=typeof e||Object.prototype.hasOwnProperty.call(this.cursorStyles,e)||(this.interactionDOMElement.style.cursor=e)}},Ks.prototype.dispatchEvent=function(e,t,i){i.stopPropagationHint&&e!==i.stopsPropagatingAt||(i.currentTarget=e,i.type=t,e.emit(t,i),e[t]&&e[t](i))},Ks.prototype.delayDispatchEvent=function(e,t,i){this.delayedEvents.push({displayObject:e,eventString:t,eventData:i})},Ks.prototype.mapPositionToPoint=function(e,t,i){var n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0},s=1/this.resolution;e.x=(t-n.left)*(this.interactionDOMElement.width/n.width)*s,e.y=(i-n.top)*(this.interactionDOMElement.height/n.height)*s},Ks.prototype.processInteractive=function(e,t,i,n,s,r){if(!t||!t.visible)return!1;var o=e.data.global,a=!1,l=s=t.interactive||s,h=!0;if(t.hitArea?(n&&(t.worldTransform.applyInverse(o,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?a=!0:h=n=!1),l=!1):t._mask&&n&&(t._mask.containsPoint&&t._mask.containsPoint(o)||(n=!1)),h&&t.interactiveChildren&&t.children)for(var c=t.children,p=c.length-1;0<=p;p--){var u=c[p],d=this.processInteractive(e,u,i,n,l,!0);d&&u.parent&&(l=!1,d&&(e.target&&(n=!1),a=!0))}s&&(n&&!e.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(o)&&(a=!0),t.interactive&&(a&&!e.target&&(e.target=t),i&&i(e,t,!!a)));var m=this.delayedEvents;if(m.length&&!r){e.stopPropagationHint=!1;var f=m.length;this.delayedEvents=[];for(var g=0;g<f;g++){var v=m[g],y=v.displayObject,b=v.eventString,v=v.eventData;v.stopsPropagatingAt===y&&(v.stopPropagationHint=!0),this.dispatchEvent(y,b,v)}}return a},Ks.prototype.onPointerDown=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);!this.autoPreventDefault||!t[0].isNormalized||!e.cancelable&&"cancelable"in e||e.preventDefault();for(var i=t.length,n=0;n<i;n++){var s=t[n],r=this.getInteractionDataForPointerId(s),r=this.configureInteractionEventForDOMEvent(this.eventData,s,r);r.data.originalEvent=e,this.processInteractive(r,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",r),"touch"===s.pointerType?this.emit("touchstart",r):"mouse"!==s.pointerType&&"pen"!==s.pointerType||(s=2===s.button,this.emit(s?"rightdown":"mousedown",this.eventData))}}},Ks.prototype.processPointerDown=function(e,t,i){var n=e.data,s=e.data.identifier;i&&(t.trackedPointers[s]||(t.trackedPointers[s]=new js(s)),this.dispatchEvent(t,"pointerdown",e),"touch"===n.pointerType?this.dispatchEvent(t,"touchstart",e):"mouse"!==n.pointerType&&"pen"!==n.pointerType||((n=2===n.button)?t.trackedPointers[s].rightDown=!0:t.trackedPointers[s].leftDown=!0,this.dispatchEvent(t,n?"rightdown":"mousedown",e)))},Ks.prototype.onPointerComplete=function(e,t,i){for(var n=this.normalizeToPointerData(e),s=n.length,r=e.target!==this.interactionDOMElement?"outside":"",o=0;o<s;o++){var a,l=n[o],h=this.getInteractionDataForPointerId(l),c=this.configureInteractionEventForDOMEvent(this.eventData,l,h);c.data.originalEvent=e,this.processInteractive(c,this.renderer._lastObjectRendered,i,t||!r),this.emit(t?"pointercancel":"pointerup"+r,c),"mouse"===l.pointerType||"pen"===l.pointerType?(a=2===l.button,this.emit(a?"rightup"+r:"mouseup"+r,c)):"touch"===l.pointerType&&(this.emit(t?"touchcancel":"touchend"+r,c),this.releaseInteractionDataForPointerId(l.pointerId,h))}},Ks.prototype.onPointerCancel=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!0,this.processPointerCancel)},Ks.prototype.processPointerCancel=function(e,t){var i=e.data,n=e.data.identifier;void 0!==t.trackedPointers[n]&&(delete t.trackedPointers[n],this.dispatchEvent(t,"pointercancel",e),"touch"===i.pointerType&&this.dispatchEvent(t,"touchcancel",e))},Ks.prototype.onPointerUp=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!1,this.processPointerUp)},Ks.prototype.processPointerUp=function(e,t,i){var n,s=e.data,r=e.data.identifier,o=t.trackedPointers[r],a="touch"===s.pointerType,l="mouse"===s.pointerType||"pen"===s.pointerType,h=!1;l&&(n=2===s.button,s=js.FLAGS,s=n?s.RIGHT_DOWN:s.LEFT_DOWN,s=void 0!==o&&o.flags&s,i?(this.dispatchEvent(t,n?"rightup":"mouseup",e),s&&(this.dispatchEvent(t,n?"rightclick":"click",e),h=!0)):s&&this.dispatchEvent(t,n?"rightupoutside":"mouseupoutside",e),o&&(n?o.rightDown=!1:o.leftDown=!1)),i?(this.dispatchEvent(t,"pointerup",e),a&&this.dispatchEvent(t,"touchend",e),o&&(l&&!h||this.dispatchEvent(t,"pointertap",e),a&&(this.dispatchEvent(t,"tap",e),o.over=!1))):o&&(this.dispatchEvent(t,"pointerupoutside",e),a&&this.dispatchEvent(t,"touchendoutside",e)),o&&o.none&&delete t.trackedPointers[r]},Ks.prototype.onPointerMove=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);"mouse"!==t[0].pointerType&&"pen"!==t[0].pointerType||(this.didMove=!0,this.cursor=null);for(var i=t.length,n=0;n<i;n++){var s=t[n],r=this.getInteractionDataForPointerId(s),r=this.configureInteractionEventForDOMEvent(this.eventData,s,r);r.data.originalEvent=e,this.processInteractive(r,this.renderer._lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",r),"touch"===s.pointerType&&this.emit("touchmove",r),"mouse"!==s.pointerType&&"pen"!==s.pointerType||this.emit("mousemove",r)}"mouse"===t[0].pointerType&&this.setCursorMode(this.cursor)}},Ks.prototype.processPointerMove=function(e,t,i){var n=e.data,s="touch"===n.pointerType,n="mouse"===n.pointerType||"pen"===n.pointerType;n&&this.processPointerOverOut(e,t,i),this.moveWhenInside&&!i||(this.dispatchEvent(t,"pointermove",e),s&&this.dispatchEvent(t,"touchmove",e),n&&this.dispatchEvent(t,"mousemove",e))},Ks.prototype.onPointerOut=function(e){var t,i;this.supportsTouchEvents&&"touch"===e.pointerType||("mouse"===(t=this.normalizeToPointerData(e)[0]).pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null)),i=this.getInteractionDataForPointerId(t),(e=this.configureInteractionEventForDOMEvent(this.eventData,t,i)).data.originalEvent=t,this.processInteractive(e,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",e),"mouse"===t.pointerType||"pen"===t.pointerType?this.emit("mouseout",e):this.releaseInteractionDataForPointerId(i.identifier))},Ks.prototype.processPointerOverOut=function(e,t,i){var n=e.data,s=e.data.identifier,r="mouse"===n.pointerType||"pen"===n.pointerType,n=t.trackedPointers[s];void 0!==(n=i&&!n?t.trackedPointers[s]=new js(s):n)&&(i&&this.mouseOverRenderer?(n.over||(n.over=!0,this.delayDispatchEvent(t,"pointerover",e),r&&this.delayDispatchEvent(t,"mouseover",e)),r&&null===this.cursor&&(this.cursor=t.cursor)):n.over&&(n.over=!1,this.dispatchEvent(t,"pointerout",this.eventData),r&&this.dispatchEvent(t,"mouseout",e),n.none&&delete t.trackedPointers[s]))},Ks.prototype.onPointerOver=function(e){var t=this.normalizeToPointerData(e)[0],e=this.getInteractionDataForPointerId(t),e=this.configureInteractionEventForDOMEvent(this.eventData,t,e);"mouse"===(e.data.originalEvent=t).pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",e),"mouse"!==t.pointerType&&"pen"!==t.pointerType||this.emit("mouseover",e)},Ks.prototype.getInteractionDataForPointerId=function(e){var t,i=e.pointerId;return 1===i||"mouse"===e.pointerType?t=this.mouse:this.activeInteractionData[i]?t=this.activeInteractionData[i]:((t=this.interactionDataPool.pop()||new Xs).identifier=i,this.activeInteractionData[i]=t),t.copyEvent(e),t},Ks.prototype.releaseInteractionDataForPointerId=function(e){var t=this.activeInteractionData[e];t&&(delete this.activeInteractionData[e],t.reset(),this.interactionDataPool.push(t))},Ks.prototype.configureInteractionEventForDOMEvent=function(e,t,i){return e.data=i,this.mapPositionToPoint(i.global,t.clientX,t.clientY),"touch"===t.pointerType&&(t.globalX=i.global.x,t.globalY=i.global.y),i.originalEvent=t,e.reset(),e},Ks.prototype.normalizeToPointerData=function(e){var t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(var i=0,n=e.changedTouches.length;i<n;i++){var s=e.changedTouches[i];void 0===s.button&&(s.button=e.touches.length?1:0),void 0===s.buttons&&(s.buttons=e.touches.length?1:0),void 0===s.isPrimary&&(s.isPrimary=1===e.touches.length&&"touchstart"===e.type),void 0===s.width&&(s.width=s.radiusX||1),void 0===s.height&&(s.height=s.radiusY||1),void 0===s.tiltX&&(s.tiltX=0),void 0===s.tiltY&&(s.tiltY=0),void 0===s.pointerType&&(s.pointerType="touch"),void 0===s.pointerId&&(s.pointerId=s.identifier||0),void 0===s.pressure&&(s.pressure=s.force||.5),void 0===s.twist&&(s.twist=0),void 0===s.tangentialPressure&&(s.tangentialPressure=0),void 0===s.layerX&&(s.layerX=s.offsetX=s.clientX),void 0===s.layerY&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,t.push(s)}else!(e instanceof MouseEvent)||this.supportsPointerEvents&&e instanceof window.PointerEvent||(void 0===e.isPrimary&&(e.isPrimary=!0),void 0===e.width&&(e.width=1),void 0===e.height&&(e.height=1),void 0===e.tiltX&&(e.tiltX=0),void 0===e.tiltY&&(e.tiltY=0),void 0===e.pointerType&&(e.pointerType="mouse"),void 0===e.pointerId&&(e.pointerId=1),void 0===e.pressure&&(e.pressure=.5),void 0===e.twist&&(e.twist=0),void 0===e.tangentialPressure&&(e.tangentialPressure=0),e.isNormalized=!0),t.push(e);return t},Ks.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},Ks);function Ks(e,t){zs.call(this),t=t||{},this.renderer=e,this.autoPreventDefault=void 0===t.autoPreventDefault||t.autoPreventDefault,this.interactionFrequency=t.interactionFrequency||10,this.mouse=new Xs,this.mouse.identifier=1,this.mouse.global.set(-999999),this.activeInteractionData={},this.activeInteractionData[1]=this.mouse,this.interactionDataPool=[],this.eventData=new Ys,this.interactionDOMElement=null,this.moveWhenInside=!1,this.eventsAdded=!1,this.mouseOverRenderer=!1,this.supportsTouchEvents="ontouchstart"in window,this.supportsPointerEvents=!!window.PointerEvent,this.onPointerUp=this.onPointerUp.bind(this),this.processPointerUp=this.processPointerUp.bind(this),this.onPointerCancel=this.onPointerCancel.bind(this),this.processPointerCancel=this.processPointerCancel.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.processPointerDown=this.processPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.processPointerMove=this.processPointerMove.bind(this),this.onPointerOut=this.onPointerOut.bind(this),this.processPointerOverOut=this.processPointerOverOut.bind(this),this.onPointerOver=this.onPointerOver.bind(this),this.cursorStyles={default:"inherit",pointer:"pointer"},this.currentCursorMode=null,this.cursor=null,this._tempPoint=new it,this.resolution=1,this.delayedEvents=[],this.setTargetElement(this.renderer.view,this.renderer.resolution)}function Qs(){this.reset()}var Dt={InteractionData:Xs,InteractionEvent:Ys,InteractionManager:Mt,InteractionTrackingData:js,interactiveTarget:At},Zs={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,_segmentsCount:function(e,t){if(void 0===t&&(t=20),!this.adaptive)return t;e=Math.ceil(e/this.maxLength);return e<this.minSegments?e=this.minSegments:e>this.maxSegments&&(e=this.maxSegments),e}};Qs.prototype.clone=function(){var e=new Qs;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},Qs.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Ri.WHITE,this.matrix=null,this.visible=!1},Qs.prototype.destroy=function(){this.texture=null,this.matrix=null};function Js(e,t,i,n){void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=null),this.shape=e,this.lineStyle=i,this.fillStyle=t,this.matrix=n,this.type=e.type,this.points=[],this.holes=[]}Js.prototype.clone=function(){return new Js(this.shape,this.fillStyle,this.lineStyle,this.matrix)},Js.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null};Wt={build:function(e){var t,i,n=e.shape,s=e.points,r=n.x,o=n.y;if(s.length=0,i=e.type===ht.CIRC?(t=n.radius,n.radius):(t=n.width,n.height),0!==t&&0!==i){var a=Math.floor(30*Math.sqrt(n.radius))||Math.floor(15*Math.sqrt(n.width+n.height));a/=2.3;for(var l=2*Math.PI/a,h=0;h<a;h++)s.push(r+Math.sin(-l*h)*t,o+Math.cos(-l*h)*i);s.push(s[0],s[1])}},triangulate:function(e,t){var i=e.points,n=t.points,s=t.indices,r=n.length/2,o=r;n.push(e.shape.x,e.shape.y);for(var a=0;a<i.length;a+=2)n.push(i[a],i[a+1]),s.push(r++,o,r)}};function er(e,t){(e.lineStyle.native?function(e,t){var i=0,n=e.shape,s=e.points||n.points,n=n.type!==ht.POLY||n.closeStroke;if(0!==s.length){var r=t.points,o=t.indices,a=s.length/2,t=r.length/2,l=t;for(r.push(s[0],s[1]),i=1;i<a;i++)r.push(s[2*i],s[2*i+1]),o.push(l,l+1),l++;n&&o.push(l,t)}}:function(e,t){var i=e.shape,n=e.points||i.points.slice(),s=t.closePointEps;if(0!==n.length){var r=e.lineStyle,o=new it(n[0],n[1]),e=new it(n[n.length-2],n[n.length-1]),i=i.type!==ht.POLY||i.closeStroke,s=Math.abs(o.x-e.x)<s&&Math.abs(o.y-e.y)<s;i&&(n=n.slice(),s&&(n.pop(),n.pop(),e.set(n[n.length-2],n[n.length-1])),s=e.x+.5*(o.x-e.x),e=e.y+.5*(o.y-e.y),n.unshift(s,e),n.push(s,e));var a=t.points,l=n.length/2,h=n.length,c=a.length/2,p=r.width/2,u=n[0],d=n[1],m=n[2],f=n[3],g=0,v=0,y=-(d-f),b=u-m,S=0,T=0,_=0,A=0,P=Math.sqrt(y*y+b*b);y/=P,b/=P,y*=p,b*=p;var r=r.alignment,I=2*(1-r),C=2*r;a.push(u-y*I,d-b*I),a.push(u+y*C,d+b*C);for(var x=1;x<l-1;++x){u=n[2*(x-1)],d=n[2*(x-1)+1],m=n[2*x],f=n[2*x+1],g=n[2*(x+1)],v=n[2*(x+1)+1],y=-(d-f),b=u-m,P=Math.sqrt(y*y+b*b),y/=P,b/=P,y*=p,b*=p,S=-(f-v),T=m-g,P=Math.sqrt(S*S+T*T),S/=P,T/=P;var B=-b+d-(-b+f),E=-y+m-(-y+u),w=(-y+u)*(-b+f)-(-y+m)*(-b+d),R=-(T*=p)+v-(-T+f),M=-(S*=p)+m-(-S+g),O=(-S+g)*(-T+f)-(-S+m)*(-T+v),N=B*M-R*E;Math.abs(N)<.1?(N+=10.1,a.push(m-y*I,f-b*I),a.push(m+y*C,f+b*C)):196*p*p<((M=(E*O-M*w)/N)-m)*(M-m)+((N=(R*w-B*O)/N)-f)*(N-f)?(_=y-S,A=b-T,P=Math.sqrt(_*_+A*A),_/=P,A/=P,_*=p,A*=p,a.push(m-_*I,f-A*I),a.push(m+_*C,f+A*C),a.push(m-_*C*I,f-A*I),h++):(a.push(m+(M-m)*I,f+(N-f)*I),a.push(m-(M-m)*C,f-(N-f)*C))}u=n[2*(l-2)],d=n[2*(l-2)+1],m=n[2*(l-1)],f=n[2*(l-1)+1],y=-(d-f),b=u-m,P=Math.sqrt(y*y+b*b),y/=P,b/=P,y*=p,b*=p,a.push(m-y*I,f-b*I),a.push(m+y*C,f+b*C);for(var F=t.indices,D=0;D<h-2;++D)F.push(c,c+1,c+2),c++}})(e,t)}var tr={build:function(e){e.points=e.shape.points.slice()},triangulate:function(e,t){var i=e.points,n=e.holes,s=t.points,r=t.indices;if(6<=i.length){for(var o=[],a=0;a<n.length;a++){var l=n[a];o.push(i.length/2),i=i.concat(l.points)}var h=g(i,o,2);if(h){for(var c=s.length/2,p=0;p<h.length;p+=3)r.push(h[p]+c),r.push(h[p+1]+c),r.push(h[p+2]+c);for(var u=0;u<i.length;u++)s.push(i[u])}}}},Ut={build:function(e){var t=e.shape,i=e.points,n=t.x,s=t.y,r=t.width,e=t.height,t=t.radius;i.length=0,nr(n,s+t,n,s,n+t,s,i),nr(n+r-t,s,n+r,s,n+r,s+t,i),nr(n+r,s+e-t,n+r,s+e,n+r-t,s+e,i),nr(n+t,s+e,n,s+e,n,s+e-t,i)},triangulate:function(e,t){for(var i=e.points,n=t.points,s=t.indices,r=n.length/2,o=g(i,null,2),a=0,l=o.length;a<l;a+=3)s.push(o[a]+r),s.push(o[a+1]+r),s.push(o[a+2]+r);for(var h=0,c=i.length;h<c;h++)n.push(i[h],i[++h])}};function ir(e,t,i){return e+(t-e)*i}function nr(e,t,i,n,s,r,o){for(var a,l,h,c,p,u=o=void 0===o?[]:o,d=0;d<=20;++d)a=ir(e,i,p=d/20),l=ir(t,n,p),c=ir(i,s,p),h=ir(n,r,p),c=ir(a,c,p),p=ir(l,h,p),u.push(c,p);return u}var sr=[],rr=[],or=new it,ar={};ar[ht.POLY]=tr,ar[ht.CIRC]=Wt,ar[ht.ELIP]=Wt,ar[ht.RECT]={build:function(e){var t=e.shape,i=t.x,n=t.y,s=t.width,t=t.height,e=e.points;e.length=0,e.push(i,n,i+s,n,i+s,n+t,i,n+t)},triangulate:function(e,t){var i=e.points,n=t.points,e=n.length/2;n.push(i[0],i[1],i[2],i[3],i[6],i[7],i[4],i[5]),t.indices.push(e,1+e,2+e,1+e,2+e,3+e)}},ar[ht.RREC]=Ut;function lr(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}var hr=function(i){function n(){i.call(this),this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.dirty=0,this.batchDirty=-1,this.cacheDirty=-1,this.clearDirty=0,this.drawCalls=[],this.batches=[],this.shapeIndex=0,this._bounds=new Bt,this.boundsDirty=-1,this.boundsPadding=0,this.batchable=!1,this.indicesUint16=null,this.uvsFloat32=null,this.closePointEps=1e-4}i&&(n.__proto__=i),(n.prototype=Object.create(i&&i.prototype)).constructor=n;var e={bounds:{configurable:!0}};return e.bounds.get=function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},n.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0;for(var e=this.textureIds.length=0;e<this.drawCalls.length;e++)this.drawCalls[e].textures.length=0,rr.push(this.drawCalls[e]);for(var t=this.drawCalls.length=0;t<this.batches.length;t++){var i=this.batches[t];i.start=0,i.attribStart=0,i.style=null,sr.push(i)}this.batches.length=0},n.prototype.clear=function(){return 0<this.graphicsData.length&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},n.prototype.drawShape=function(e,t,i,n){n=new Js(e,t,i,n);return this.graphicsData.push(n),this.dirty++,this},n.prototype.drawHole=function(e,t){if(!this.graphicsData.length)return null;e=new Js(e,null,null,t),t=this.graphicsData[this.graphicsData.length-1];return e.lineStyle=t.lineStyle,t.holes.push(e),this.dirty++,this},n.prototype.destroy=function(e){i.prototype.destroy.call(this,e);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},n.prototype.containsPoint=function(e){for(var t=this.graphicsData,i=0;i<t.length;++i){var n=t[i];if(n.fillStyle.visible&&(n.shape&&(n.matrix?n.matrix.applyInverse(e,or):or.copyFrom(e),n.shape.contains(or.x,or.y)))){if(n.holes)for(var s=0;s<n.holes.length;s++)if(n.holes[s].shape.contains(or.x,or.y))return!1;return!0}}return!1},n.prototype.updateBatches=function(){if(this.dirty!==this.cacheDirty)if(0!==this.graphicsData.length){if(this.dirty!==this.cacheDirty)for(var e=0;e<this.graphicsData.length;e++){var t=this.graphicsData[e];if(t.fillStyle&&!t.fillStyle.texture.baseTexture.valid)return;if(t.lineStyle&&!t.lineStyle.texture.baseTexture.valid)return}this.cacheDirty=this.dirty;var i=this.uvs,n=null,s=null,r=0,o=!1;0<this.batches.length&&(s=(b=(n=this.batches[this.batches.length-1]).style).texture.baseTexture,r=b.color+b.alpha,o=!!b.native);for(var a=this.shapeIndex;a<this.graphicsData.length;a++){this.shapeIndex++;var l=this.graphicsData[a],h=ar[l.type],c=l.fillStyle,p=l.lineStyle;h.build(l),l.matrix&&this.transformPoints(l.points,l.matrix);for(var u=0;u<2;u++){var d=0===u?c:p;if(d.visible){var m=d.texture.baseTexture,f=this.indices.length,g=this.points.length/2;!n||s===m&&r===d.color+d.alpha&&o===!!d.native||(n.size=f-n.start,n.attribSize=g-n.attribStart,0<n.size&&(n=null)),n||(n=sr.pop()||new lr,this.batches.push(n),m.wrapMode=be.REPEAT,s=m,r=d.color+d.alpha,o=d.native,n.style=d,n.start=f,n.attribStart=g);f=this.points.length/2;if(0===u)l.holes.length?(this.processHoles(l.holes),tr.triangulate(l,this)):h.triangulate(l,this);else{er(l,this);for(var v=0;v<l.holes.length;v++)er(l.holes[v],this)}g=this.points.length/2-f;this.addUvs(this.points,i,d.texture,f,g,d.matrix)}}}var y=this.indices.length,b=this.points.length/2;if(n)if(n.size=y-n.start,n.attribSize=b-n.attribStart,this.indicesUint16=new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var S=0;S<this.batches.length;S++)for(var T=this.batches[S],_=0;_<T.size;_++){var A=T.start+_;this.indicesUint16[A]=this.indicesUint16[A]-T.attribStart}}else this.buildDrawCalls();else this.batchable=!0}else this.batchable=!0},n.prototype.isBatchable=function(){for(var e=this.batches,t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<2*n.BATCHABLE_SIZE},n.prototype.buildDrawCalls=function(){for(var e=++ni._globalBatch,t=0;t<this.drawCalls.length;t++)this.drawCalls[t].textures.length=0,rr.push(this.drawCalls[t]);this.drawCalls.length=0;var i=this.uvs,n=this.colors,s=this.textureIds,r=rr.pop()||new Rs;r.textureCount=0,r.start=0,r.size=0,r.type=me.TRIANGLES;var o=0,a=null,l=!1,h=me.TRIANGLES,c=0;this.drawCalls.push(r);for(var p=0;p<this.batches.length;p++){var u=this.batches[p],d=u.style,m=d.texture.baseTexture;l!==!!d.native&&(h=(l=d.native)?me.LINES:me.TRIANGLES,a=null,o=8,e++),a!==m&&(a=m)._batchEnabled!==e&&(8===o&&(e++,(o=0)<r.size&&(r=rr.pop()||new Rs,this.drawCalls.push(r)),r.start=c,r.size=0,r.textureCount=0,r.type=h),m.touched=1,m._batchEnabled=e,m._id=o,m.wrapMode=10497,r.textures[r.textureCount++]=m,o++),r.size+=u.size,c+=u.size,m=m._id,this.addColors(n,d.color,d.alpha,u.attribSize),this.addTextureIds(s,m,u.attribSize)}ni._globalBatch=e;for(var f=this.points,g=new ArrayBuffer(3*f.length*4),v=new Float32Array(g),y=new Uint32Array(g),b=0,S=0;S<f.length/2;S++)v[b++]=f[2*S],v[b++]=f[2*S+1],v[b++]=i[2*S],v[b++]=i[2*S+1],y[b++]=n[S],v[b++]=s[S];this._buffer.update(g),this._indexBuffer.update(this.indicesUint16)},n.prototype.processHoles=function(e){for(var t=0;t<e.length;t++){var i=e[t];ar[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},n.prototype.calculateBounds=function(){var e=1/0,t=-1/0,i=1/0,n=-1/0;if(this.graphicsData.length)for(var s=0,r=0,o=0,a=0,l=0;l<this.graphicsData.length;l++){var h=this.graphicsData[l],c=h.type,p=h.lineStyle?h.lineStyle.width:0,h=h.shape;if(c===ht.RECT||c===ht.RREC)s=h.x-p/2,r=h.y-p/2,e=s<e?s:e,t=t<s+(o=h.width+p)?s+o:t,i=r<i?r:i,n=n<r+(a=h.height+p)?r+a:n;else if(c===ht.CIRC)s=h.x,r=h.y,e=s-(o=h.radius+p/2)<e?s-o:e,t=t<s+o?s+o:t,i=r-(a=h.radius+p/2)<i?r-a:i,n=n<r+a?r+a:n;else if(c===ht.ELIP)s=h.x,r=h.y,e=s-(o=h.width+p/2)<e?s-o:e,t=t<s+o?s+o:t,i=r-(a=h.height+p/2)<i?r-a:i,n=n<r+a?r+a:n;else for(var u,d,m,f,g,v=h.points,y=0;y+2<v.length;y+=2)s=v[y],r=v[y+1],d=v[y+2],g=v[y+3],u=Math.abs(d-s),m=Math.abs(g-r),a=p,(o=Math.sqrt(u*u+m*m))<1e-9||(e=(f=(d+s)/2)-(d=(a/o*m+u)/2)<e?f-d:e,t=t<f+d?f+d:t,i=(g=(g+r)/2)-(m=(a/o*u+m)/2)<i?g-m:i,n=n<g+m?g+m:n)}else n=i=t=e=0;var b=this.boundsPadding;this._bounds.minX=e-b,this._bounds.maxX=t+b,this._bounds.minY=i-b,this._bounds.maxY=n+b},n.prototype.transformPoints=function(e,t){for(var i=0;i<e.length/2;i++){var n=e[2*i],s=e[2*i+1];e[2*i]=t.a*n+t.c*s+t.tx,e[2*i+1]=t.b*n+t.d*s+t.ty}},n.prototype.addColors=function(e,t,i,n){for(var s=Oe((t>>16)+(65280&t)+((255&t)<<16),i);0<n--;)e.push(s)},n.prototype.addTextureIds=function(e,t,i){for(;0<i--;)e.push(t)},n.prototype.addUvs=function(e,t,i,n,s,r){for(var o=0,a=t.length,l=i.frame;o<s;){var h,c=e[2*(n+o)],p=e[2*(n+o)+1];r&&(h=r.a*c+r.c*p+r.tx,p=r.b*c+r.d*p+r.ty,c=h),o++,t.push(c/l.width,p/l.height)}var u=i.baseTexture;(l.width<u.width||l.height<u.height)&&this.adjustUvs(t,i,a,s)},n.prototype.adjustUvs=function(e,t,i,n){for(var s=t.baseTexture,r=i+2*n,t=t.frame,o=t.width/s.width,a=t.height/s.height,l=t.x/t.width,h=t.y/t.height,c=Math.floor(e[i]+1e-6),p=Math.floor(e[i+1]+1e-6),u=i+2;u<r;u+=2)c=Math.min(c,Math.floor(e[u]+1e-6)),p=Math.min(p,Math.floor(e[u+1]+1e-6));l-=c,h-=p;for(var d=i;d<r;d+=2)e[d]=(e[d]+l)*o,e[d+1]=(e[d+1]+h)*a},Object.defineProperties(n.prototype,e),n}(ks);hr.BATCHABLE_SIZE=100;var cr,pr=((cr=Qs)&&(ur.__proto__=cr),((ur.prototype=Object.create(cr&&cr.prototype)).constructor=ur).prototype.clone=function(){var e=new ur;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e},ur.prototype.reset=function(){cr.prototype.reset.call(this),this.color=0,this.width=0,this.alignment=.5,this.native=!1},ur);function ur(){cr.apply(this,arguments)}function dr(){}dr.curveLength=function(e,t,i,n,s,r,o,a){for(var l,h,c,p,u,d,m,f,g=0,v=e,y=t,b=1;b<=10;++b)m=v-(u=(p=(c=(h=1-(l=b/10))*h)*h)*e+3*c*l*i+3*h*(d=l*l)*s+(f=d*l)*o),f=y-(d=p*t+3*c*l*n+3*h*d*r+f*a),v=u,y=d,g+=Math.sqrt(m*m+f*f);return g},dr.curveTo=function(e,t,i,n,s,r,o){var a=o[o.length-2],l=o[o.length-1];o.length-=2;var h,c,p,u,d,m=Zs._segmentsCount(dr.curveLength(a,l,e,t,i,n,s,r));o.push(a,l);for(var f,g=1;g<=m;++g)o.push((p=(c=(h=1-(f=g/m))*h)*h)*a+3*c*f*e+3*h*(u=f*f)*i+(d=u*f)*s,p*l+3*c*f*t+3*h*u*n+d*r)};function mr(){}mr.curveLength=function(e,t,i,n,s,r){var o=e-2*i+s,a=t-2*n+r,s=2*i-2*e,r=2*n-2*t,i=4*(o*o+a*a),e=4*(o*s+a*r),n=s*s+r*r,t=2*Math.sqrt(i+e+n),o=Math.sqrt(i),a=2*i*o,s=2*Math.sqrt(n),r=e/o;return(a*t+o*e*(t-s)+(4*n*i-e*e)*Math.log((2*o+r+t)/(r+s)))/(4*a)},mr.curveTo=function(e,t,i,n,s){for(var r=s[s.length-2],o=s[s.length-1],a=Zs._segmentsCount(mr.curveLength(r,o,e,t,i,n)),l=0,h=0,c=1;c<=a;++c){var p=c/a;s.push((l=r+(e-r)*p)+(e+(i-e)*p-l)*p,(h=o+(t-o)*p)+(t+(n-t)*p-h)*p)}};function fr(){}fr.curveTo=function(e,t,i,n,s,r){var o=r[r.length-2],a=r[r.length-1]-t,l=o-e,h=n-t,c=i-e,p=Math.abs(a*c-l*h);if(p<1e-8||0===s)return r[r.length-2]===e&&r[r.length-1]===t||r.push(e,t),null;var u=a*a+l*l,d=h*h+c*c,o=a*h+l*c,n=s*Math.sqrt(u)/p,i=s*Math.sqrt(d)/p,r=n*o/u,p=i*o/d,u=n*c+i*l,o=n*h+i*a,d=c*(n+p),p=h*(n+p);return{cx:u+e,cy:o+t,radius:s,startAngle:Math.atan2(a*(i+r)-o,l*(i+r)-u),endAngle:Math.atan2(p-o,d-u),anticlockwise:c*a<l*h}},fr.arc=function(e,t,i,n,s,r,o,a,l){for(var h=o-r,o=Zs._segmentsCount(Math.abs(h)*s,40*Math.ceil(Math.abs(h)/ot)),c=h/(2*o),p=2*c,u=Math.cos(c),d=Math.sin(c),m=o-1,f=m%1/m,g=0;g<=m;++g){var v=c+r+p*(g+f*g),y=Math.cos(v),v=-Math.sin(v);l.push((u*y+d*v)*s+i,(u*-v+d*y)*s+n)}};var gr,vr=((gr=Ct)&&(yr.__proto__=gr),(yr.prototype=Object.create(gr&&gr.prototype)).constructor=yr);function yr(e,t,i,n,s,r){s=s||n/2;for(var o=-1*Math.PI/2+r,a=2*i,l=ot/a,h=[],c=0;c<a;c++){var p=c%2?s:n,u=c*l+o;h.push(e+p*Math.cos(u),t+p*Math.sin(u))}gr.call(this,h)}var br=new Float32Array(3),Sr={},Tr=function(t){function i(e){void 0===e&&(e=null),t.call(this),this.geometry=e||new hr,this.geometry.refCount++,this.shader=null,this.state=Gn.for2d(),this._fillStyle=new Qs,this._lineStyle=new pr,this._matrix=null,this._holeMode=!1,this.currentPath=null,this.batches=[],this.batchTint=-1,this.vertexData=null,this._transformID=-1,this.batchDirty=-1,this.pluginName="batch",this.tint=16777215,this.blendMode=de.NORMAL}t&&(i.__proto__=t);var e={blendMode:{configurable:!0},tint:{configurable:!0},fill:{configurable:!0},line:{configurable:!0}};return((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.clone=function(){return this.finishPoly(),new i(this.geometry)},e.blendMode.set=function(e){this.state.blendMode=e},e.blendMode.get=function(){return this.state.blendMode},e.tint.get=function(){return this._tint},e.tint.set=function(e){this._tint=e},e.fill.get=function(){return this._fillStyle},e.line.get=function(){return this._lineStyle},i.prototype.lineStyle=function(e,t,i,n,s){return this.lineTextureStyle(e=void 0===e?0:e,Ri.WHITE,t=void 0===t?0:t,i=void 0===i?1:i,null,n=void 0===n?.5:n,s=void 0===s?!1:s),this},i.prototype.lineTextureStyle=function(e,t,i,n,s,r,o){void 0===e&&(e=0),void 0===t&&(t=Ri.WHITE),void 0===i&&(i=16777215),void 0===n&&(n=1),void 0===s&&(s=null),void 0===r&&(r=.5),void 0===o&&(o=!1),this.currentPath&&this.startPoly();var a=0<e&&0<n;return a?(s&&(s=s.clone()).invert(),Object.assign(this._lineStyle,{color:i,width:e,alpha:n,matrix:s,texture:t,alignment:r,native:o,visible:a})):this._lineStyle.reset(),this},i.prototype.startPoly=function(){var e,t;this.currentPath?(e=this.currentPath.points,2<(t=this.currentPath.points.length)&&(this.drawShape(this.currentPath),this.currentPath=new Ct,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))):(this.currentPath=new Ct,this.currentPath.closeStroke=!1)},i.prototype.finishPoly=function(){this.currentPath&&(2<this.currentPath.points.length?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},i.prototype.moveTo=function(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this},i.prototype.lineTo=function(e,t){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,n=i[i.length-2],s=i[i.length-1];return n===e&&s===t||i.push(e,t),this},i.prototype._initCurve=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[e,t]):this.moveTo(e,t)},i.prototype.quadraticCurveTo=function(e,t,i,n){this._initCurve();var s=this.currentPath.points;return 0===s.length&&this.moveTo(0,0),mr.curveTo(e,t,i,n,s),this},i.prototype.bezierCurveTo=function(e,t,i,n,s,r){return this._initCurve(),dr.curveTo(e,t,i,n,s,r,this.currentPath.points),this},i.prototype.arcTo=function(e,t,i,n,s){this._initCurve(e,t);var r=this.currentPath.points,e=fr.curveTo(e,t,i,n,s,r);return e&&(t=e.cx,i=e.cy,n=e.radius,s=e.startAngle,r=e.endAngle,e=e.anticlockwise,this.arc(t,i,n,s,r,e)),this},i.prototype.arc=function(e,t,i,n,s,r){if(n===s)return this;if(!(r=void 0===r?!1:r)&&s<=n?s+=ot:r&&n<=s&&(n+=ot),0==s-n)return this;var o,a,l=e+Math.cos(n)*i,h=t+Math.sin(n)*i,c=this.geometry.closePointEps,p=this.currentPath?this.currentPath.points:null;return p?(o=Math.abs(p[p.length-2]-l),a=Math.abs(p[p.length-1]-h),o<c&&a<c||p.push(l,h)):(this.moveTo(l,h),p=this.currentPath.points),fr.arc(l,h,e,t,i,n,s,r,p),this},i.prototype.beginFill=function(e,t){return this.beginTextureFill(Ri.WHITE,e=void 0===e?0:e,t=void 0===t?1:t)},i.prototype.beginTextureFill=function(e,t,i,n){void 0===e&&(e=Ri.WHITE),void 0===t&&(t=16777215),void 0===i&&(i=1),void 0===n&&(n=null),this.currentPath&&this.startPoly();var s=0<i;return s?(n&&(n=n.clone()).invert(),Object.assign(this._fillStyle,{color:t,alpha:i,texture:e,matrix:n,visible:s})):this._fillStyle.reset(),this},i.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},i.prototype.drawRect=function(e,t,i,n){return this.drawShape(new Tt(e,t,i,n))},i.prototype.drawRoundedRect=function(e,t,i,n,s){return this.drawShape(new xt(e,t,i,n,s))},i.prototype.drawCircle=function(e,t,i){return this.drawShape(new Pt(e,t,i))},i.prototype.drawEllipse=function(e,t,i,n){return this.drawShape(new It(e,t,i,n))},i.prototype.drawPolygon=function(e){var t=arguments,i=!0;if((n=e).points&&(i=n.closeStroke,n=n.points),!Array.isArray(n))for(var n=new Array(arguments.length),s=0;s<n.length;++s)n[s]=t[s];e=new Ct(n);return e.closeStroke=i,this.drawShape(e),this},i.prototype.drawShape=function(e){return this._holeMode?this.geometry.drawHole(e,this._matrix):this.geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},i.prototype.drawStar=function(e,t,i,n,s,r){return this.drawPolygon(new vr(e,t,i,n,s,r=void 0===r?0:r))},i.prototype.clear=function(){return this.geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._matrix=null,this._holeMode=!1,this.currentPath=null,this},i.prototype.isFastRect=function(){return!1},i.prototype._render=function(e){this.finishPoly();var t=this.geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))},i.prototype._populateBatches=function(){var e=this.geometry,t=this.blendMode;this.batches=[],this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.vertexData=new Float32Array(e.points);for(var i=0,n=e.batches.length;i<n;i++){var s=e.batches[i],r=s.style.color,o=new Float32Array(this.vertexData.buffer,4*s.attribStart*2,2*s.attribSize),a=new Float32Array(e.uvsFloat32.buffer,4*s.attribStart*2,2*s.attribSize),s={vertexData:o,blendMode:t,indices:new Uint16Array(e.indicesUint16.buffer,2*s.start,s.size),uvs:a,_batchRGB:xe(r),_tintRGB:r,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[i]=s}},i.prototype._renderBatched=function(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var t=0,i=this.batches.length;t<i;t++){var n=this.batches[t];n.worldAlpha=this.worldAlpha*n.alpha,e.plugins[this.pluginName].render(n)}}},i.prototype._renderDirect=function(e){var t=this._resolveDirectShader(e),i=this.geometry,n=this.tint,s=this.worldAlpha,r=t.uniforms,o=i.drawCalls;r.translationMatrix=this.transform.worldTransform,r.tint[0]=(n>>16&255)/255*s,r.tint[1]=(n>>8&255)/255*s,r.tint[2]=(255&n)/255*s,r.tint[3]=s,e.shader.bind(t),e.geometry.bind(i,t),e.state.set(this.state);for(var a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(e,i.drawCalls[a])},i.prototype._renderDrawCallDirect=function(e,t){for(var i=t.textureCount,n=0;n<i;n++)e.texture.bind(t.textures[n],n);e.geometry.draw(t.type,t.size,t.start)},i.prototype._resolveDirectShader=function(e){var t=this.shader,i=this.pluginName;if(!t){if(!Sr[i]){for(var n=new Int32Array(16),s=0;s<16;s++)n[s]=s;var r={tint:new Float32Array([1,1,1,1]),translationMatrix:new rt,default:Zi.from({uSamplers:n},!0)},e=e.plugins[i]._shader.program;Sr[i]=new kn(e,r)}t=Sr[i]}return t},i.prototype._calculateBounds=function(){this.finishPoly();var e=this.geometry.bounds;this._bounds.addFrame(this.transform,e.minX,e.minY,e.maxX,e.maxY)},i.prototype.containsPoint=function(e){return this.worldTransform.applyInverse(e,i._TEMP_POINT),this.geometry.containsPoint(i._TEMP_POINT)},i.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var e=xe(this.tint,br),t=0;t<this.batches.length;t++){var i=this.batches[t],n=i._batchRGB,n=(e[0]*n[0]*255<<16)+(e[1]*n[1]*255<<8)+(0|e[2]*n[2]*255);i._tintRGB=(n>>16)+(65280&n)+((255&n)<<16)}}},i.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID;for(var e=this.transform.worldTransform,t=e.a,i=e.b,n=e.c,s=e.d,r=e.tx,o=e.ty,a=this.geometry.points,l=this.vertexData,h=0,c=0;c<a.length;c+=2){var p=a[c],u=a[c+1];l[h++]=t*p+n*u+r,l[h++]=s*u+i*p+o}}},i.prototype.closePath=function(){var e=this.currentPath;return e&&(e.closeStroke=!0),this},i.prototype.setMatrix=function(e){return this._matrix=e,this},i.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},i.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},i.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this.geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,e)},Object.defineProperties(i.prototype,e),i}(Rt);Tr._TEMP_POINT=new it;var _r=new it,Ar=new Uint16Array([0,1,2,0,2,3]),Pr=function(t){function i(e){t.call(this),this._anchor=new nt(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tint=null,this._tintRGB=null,this.tint=16777215,this.blendMode=de.NORMAL,this.shader=null,this._cachedTint=16777215,this.uvs=null,this.texture=e||Ri.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=Ar,this.size=4,this.start=0,this.pluginName="batch",this.isSprite=!0,this._roundPixels=C.ROUND_PIXELS}t&&(i.__proto__=t);var e={roundPixels:{configurable:!0},width:{configurable:!0},height:{configurable:!0},anchor:{configurable:!0},tint:{configurable:!0},texture:{configurable:!0}};return((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Ge(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Ge(this.scale.y)*this._height/this._texture.orig.height)},i.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},i.prototype.calculateVertices=function(){var e=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==e._updateID){this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;var t=this.transform.worldTransform,i=t.a,n=t.b,s=t.c,r=t.d,o=t.tx,a=t.ty,l=this.vertexData,h=e.trim,c=e.orig,p=this._anchor,u=0,d=0,t=0,e=0,t=h?(u=(d=h.x-p._x*c.width)+h.width,(e=h.y-p._y*c.height)+h.height):(u=(d=-p._x*c.width)+c.width,(e=-p._y*c.height)+c.height);if(l[0]=i*d+s*e+o,l[1]=r*e+n*d+a,l[2]=i*u+s*e+o,l[3]=r*e+n*u+a,l[4]=i*u+s*t+o,l[5]=r*t+n*u+a,l[6]=i*d+s*t+o,l[7]=r*t+n*d+a,this._roundPixels)for(var m=0;m<8;m++)l[m]=Math.round(l[m])}},i.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,t=this.vertexTrimmedData,i=e.orig,n=this._anchor,s=this.transform.worldTransform,r=s.a,o=s.b,a=s.c,l=s.d,h=s.tx,c=s.ty,e=-n._x*i.width,s=e+i.width,n=-n._y*i.height,i=n+i.height;t[0]=r*e+a*n+h,t[1]=l*n+o*e+c,t[2]=r*s+a*n+h,t[3]=l*n+o*s+c,t[4]=r*s+a*i+h,t[5]=l*i+o*s+c,t[6]=r*e+a*i+h,t[7]=l*i+o*e+c},i.prototype._render=function(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},i.prototype._calculateBounds=function(){var e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},i.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Tt),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},i.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,_r);var t=this._texture.orig.width,i=this._texture.orig.height,e=-t*this.anchor.x;return _r.x>=e&&_r.x<e+t&&(t=-i*this.anchor.y,_r.y>=t&&_r.y<t+i)},i.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,("boolean"==typeof e?e:e&&e.texture)&&(e="boolean"==typeof e?e:e&&e.baseTexture,this._texture.destroy(!!e)),this._texture=null,this.shader=null},i.from=function(e,t){return new i(e instanceof Ri?e:Ri.from(e,t))},e.roundPixels.set=function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},e.roundPixels.get=function(){return this._roundPixels},e.width.get=function(){return Math.abs(this.scale.x)*this._texture.orig.width},e.width.set=function(e){var t=Ge(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e},e.height.get=function(){return Math.abs(this.scale.y)*this._texture.orig.height},e.height.set=function(e){var t=Ge(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e},e.anchor.get=function(){return this._anchor},e.anchor.set=function(e){this._anchor.copyFrom(e)},e.tint.get=function(){return this._tint},e.tint.set=function(e){this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16)},e.texture.get=function(){return this._texture},e.texture.set=function(e){this._texture!==e&&(this._texture=e||Ri.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))},Object.defineProperties(i.prototype,e),i}(Rt),Ir={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},Cr={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Ir.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},xr=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Br=function(e){this.styleID=0,this.reset(),Rr(this,e,e)},$t={align:{configurable:!0},breakWords:{configurable:!0},dropShadow:{configurable:!0},dropShadowAlpha:{configurable:!0},dropShadowAngle:{configurable:!0},dropShadowBlur:{configurable:!0},dropShadowColor:{configurable:!0},dropShadowDistance:{configurable:!0},fill:{configurable:!0},fillGradientType:{configurable:!0},fillGradientStops:{configurable:!0},fontFamily:{configurable:!0},fontSize:{configurable:!0},fontStyle:{configurable:!0},fontVariant:{configurable:!0},fontWeight:{configurable:!0},letterSpacing:{configurable:!0},lineHeight:{configurable:!0},leading:{configurable:!0},lineJoin:{configurable:!0},miterLimit:{configurable:!0},padding:{configurable:!0},stroke:{configurable:!0},strokeThickness:{configurable:!0},textBaseline:{configurable:!0},trim:{configurable:!0},whiteSpace:{configurable:!0},wordWrap:{configurable:!0},wordWrapWidth:{configurable:!0}};function Er(e){return"number"==typeof e?Be(e):"string"==typeof e&&0===e.indexOf("0x")?e.replace("0x","#"):e}function wr(e){if(Array.isArray(e)){for(var t=0;t<e.length;++t)e[t]=Er(e[t]);return e}return Er(e)}function Rr(e,t,i){for(var n in i)Array.isArray(t[n])?e[n]=t[n].slice():e[n]=t[n]}Br.prototype.clone=function(){var e={};return Rr(e,this,Cr),new Br(e)},Br.prototype.reset=function(){Rr(this,Cr,Cr)},$t.align.get=function(){return this._align},$t.align.set=function(e){this._align!==e&&(this._align=e,this.styleID++)},$t.breakWords.get=function(){return this._breakWords},$t.breakWords.set=function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)},$t.dropShadow.get=function(){return this._dropShadow},$t.dropShadow.set=function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)},$t.dropShadowAlpha.get=function(){return this._dropShadowAlpha},$t.dropShadowAlpha.set=function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)},$t.dropShadowAngle.get=function(){return this._dropShadowAngle},$t.dropShadowAngle.set=function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)},$t.dropShadowBlur.get=function(){return this._dropShadowBlur},$t.dropShadowBlur.set=function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)},$t.dropShadowColor.get=function(){return this._dropShadowColor},$t.dropShadowColor.set=function(e){e=wr(e);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},$t.dropShadowDistance.get=function(){return this._dropShadowDistance},$t.dropShadowDistance.set=function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)},$t.fill.get=function(){return this._fill},$t.fill.set=function(e){e=wr(e);this._fill!==e&&(this._fill=e,this.styleID++)},$t.fillGradientType.get=function(){return this._fillGradientType},$t.fillGradientType.set=function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)},$t.fillGradientStops.get=function(){return this._fillGradientStops},$t.fillGradientStops.set=function(e){!function(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(var i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}(this._fillGradientStops,e)&&(this._fillGradientStops=e,this.styleID++)},$t.fontFamily.get=function(){return this._fontFamily},$t.fontFamily.set=function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)},$t.fontSize.get=function(){return this._fontSize},$t.fontSize.set=function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)},$t.fontStyle.get=function(){return this._fontStyle},$t.fontStyle.set=function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)},$t.fontVariant.get=function(){return this._fontVariant},$t.fontVariant.set=function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)},$t.fontWeight.get=function(){return this._fontWeight},$t.fontWeight.set=function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)},$t.letterSpacing.get=function(){return this._letterSpacing},$t.letterSpacing.set=function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)},$t.lineHeight.get=function(){return this._lineHeight},$t.lineHeight.set=function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)},$t.leading.get=function(){return this._leading},$t.leading.set=function(e){this._leading!==e&&(this._leading=e,this.styleID++)},$t.lineJoin.get=function(){return this._lineJoin},$t.lineJoin.set=function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)},$t.miterLimit.get=function(){return this._miterLimit},$t.miterLimit.set=function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)},$t.padding.get=function(){return this._padding},$t.padding.set=function(e){this._padding!==e&&(this._padding=e,this.styleID++)},$t.stroke.get=function(){return this._stroke},$t.stroke.set=function(e){e=wr(e);this._stroke!==e&&(this._stroke=e,this.styleID++)},$t.strokeThickness.get=function(){return this._strokeThickness},$t.strokeThickness.set=function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)},$t.textBaseline.get=function(){return this._textBaseline},$t.textBaseline.set=function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)},$t.trim.get=function(){return this._trim},$t.trim.set=function(e){this._trim!==e&&(this._trim=e,this.styleID++)},$t.whiteSpace.get=function(){return this._whiteSpace},$t.whiteSpace.set=function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)},$t.wordWrap.get=function(){return this._wordWrap},$t.wordWrap.set=function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)},$t.wordWrapWidth.get=function(){return this._wordWrapWidth},$t.wordWrapWidth.set=function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)},Br.prototype.toFontString=function(){for(var e="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,t=this.fontFamily,i=(t=!Array.isArray(this.fontFamily)?this.fontFamily.split(","):t).length-1;0<=i;i--){var n=t[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&xr.indexOf(n)<0&&(n='"'+n+'"'),t[i]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+t.join(",")},Object.defineProperties(Br.prototype,$t);var Mr=function(e,t,i,n,s,r,o,a,l){this.text=e,this.style=t,this.width=i,this.height=n,this.lines=s,this.lineWidths=r,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=l};Mr.measureText=function(e,t,i,n){void 0===n&&(n=Mr._canvas),i=null==i?t.wordWrap:i;var s=t.toFontString(),r=Mr.measureFont(s);0===r.fontSize&&(r.fontSize=t.fontSize,r.ascent=t.fontSize);var o=n.getContext("2d");o.font=s;for(var a=(i?Mr.wordWrap(e,t,n):e).split(/(?:\r\n|\r|\n)/),l=new Array(a.length),h=0,c=0;c<a.length;c++){var p=o.measureText(a[c]).width+(a[c].length-1)*t.letterSpacing;l[c]=p,h=Math.max(h,p)}s=h+t.strokeThickness;t.dropShadow&&(s+=t.dropShadowDistance);i=t.lineHeight||r.fontSize+t.strokeThickness,n=Math.max(i,r.fontSize+t.strokeThickness)+(a.length-1)*(i+t.leading);return t.dropShadow&&(n+=t.dropShadowDistance),new Mr(e,t,s,n,a,l,i+t.leading,h,r)},Mr.wordWrap=function(e,t,i){for(var n=(i=void 0===i?Mr._canvas:i).getContext("2d"),s=0,r="",o="",a={},l=t.letterSpacing,i=t.whiteSpace,h=Mr.collapseSpaces(i),c=Mr.collapseNewlines(i),p=!h,u=t.wordWrapWidth+l,d=Mr.tokenize(e),m=0;m<d.length;m++){var f=d[m];if(Mr.isNewline(f)){if(!c){o+=Mr.addLine(r),p=!h,r="",s=0;continue}f=" "}if(h){var g=Mr.isBreakingSpace(f),v=Mr.isBreakingSpace(r[r.length-1]);if(g&&v)continue}g=Mr.getFromCache(f,l,a,n);if(u<g)if(""!==r&&(o+=Mr.addLine(r),r="",s=0),Mr.canBreakWords(f,t.breakWords))for(var y=f.split(""),b=0;b<y.length;b++){for(var S=y[b],T=1;y[b+T];){var _=y[b+T],A=S[S.length-1];if(Mr.canBreakChars(A,_,f,b,t.breakWords))break;S+=_,T++}b+=S.length-1;var P=Mr.getFromCache(S,l,a,n);u<P+s&&(o+=Mr.addLine(r),p=!1,r="",s=0),r+=S,s+=P}else{0<r.length&&(o+=Mr.addLine(r),r="",s=0);v=m===d.length-1;o+=Mr.addLine(f,!v),p=!1,r="",s=0}else u<g+s&&(p=!1,o+=Mr.addLine(r),r="",s=0),(0<r.length||!Mr.isBreakingSpace(f)||p)&&(r+=f,s+=g)}return o+=Mr.addLine(r,!1)},Mr.addLine=function(e,t){return void 0===t&&(t=!0),e=Mr.trimRight(e),e=t?e+"\n":e},Mr.getFromCache=function(e,t,i,n){var s=i[e];return void 0===s&&(t=e.length*t,s=n.measureText(e).width+t,i[e]=s),s},Mr.collapseSpaces=function(e){return"normal"===e||"pre-line"===e},Mr.collapseNewlines=function(e){return"normal"===e},Mr.trimRight=function(e){if("string"!=typeof e)return"";for(var t=e.length-1;0<=t;t--){var i=e[t];if(!Mr.isBreakingSpace(i))break;e=e.slice(0,-1)}return e},Mr.isNewline=function(e){return"string"==typeof e&&0<=Mr._newlines.indexOf(e.charCodeAt(0))},Mr.isBreakingSpace=function(e){return"string"==typeof e&&0<=Mr._breakingSpaces.indexOf(e.charCodeAt(0))},Mr.tokenize=function(e){var t=[],i="";if("string"!=typeof e)return t;for(var n=0;n<e.length;n++){var s=e[n];Mr.isBreakingSpace(s)||Mr.isNewline(s)?(""!==i&&(t.push(i),i=""),t.push(s)):i+=s}return""!==i&&t.push(i),t},Mr.canBreakWords=function(e,t){return t},Mr.canBreakChars=function(e,t,i,n,s){return!0},Mr.measureFont=function(e){if(Mr._fonts[e])return Mr._fonts[e];var t={},i=Mr._canvas,n=Mr._context;n.font=e;var s=Mr.METRICS_STRING+Mr.BASELINE_SYMBOL,r=Math.ceil(n.measureText(s).width),o=2*(a=Math.ceil(n.measureText(Mr.BASELINE_SYMBOL).width)),a=a*Mr.BASELINE_MULTIPLIER|0;i.width=r,i.height=o,n.fillStyle="#f00",n.fillRect(0,0,r,o),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(s,0,a);for(var l=n.getImageData(0,0,r,o).data,n=l.length,h=4*r,c=0,p=0,u=!1,c=0;c<a;++c){for(var d=0;d<h;d+=4)if(255!==l[p+d]){u=!0;break}if(u)break;p+=h}for(t.ascent=a-c,p=n-h,u=!1,c=o;a<c;--c){for(var m=0;m<h;m+=4)if(255!==l[p+m]){u=!0;break}if(u)break;p-=h}return t.descent=c-a,t.fontSize=t.ascent+t.descent,Mr._fonts[e]=t},Mr.clearMetrics=function(e){(e=void 0===e?"":e)?delete Mr._fonts[e]:Mr._fonts={}};ri=function(){try{var e=new OffscreenCanvas(0,0);return e.getContext("2d")?e:document.createElement("canvas")}catch(e){return document.createElement("canvas")}}();ri.width=ri.height=10,Mr._canvas=ri,Mr._context=ri.getContext("2d"),Mr._fonts={},Mr.METRICS_STRING="|q",Mr.BASELINE_SYMBOL="M",Mr.BASELINE_MULTIPLIER=1.4,Mr._newlines=[10,13];var Or={texture:!0,children:!(Mr._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]),baseTexture:!0},Nr=function(s){function e(e,t,i){(i=i||document.createElement("canvas")).width=3,i.height=3;var n=Ri.from(i);n.orig=new Tt,n.trim=new Tt,s.call(this,n),this.canvas=i,this.context=this.canvas.getContext("2d"),this._resolution=C.RESOLUTION,this._autoResolution=!0,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}s&&(e.__proto__=s);var t={width:{configurable:!0},height:{configurable:!0},style:{configurable:!0},text:{configurable:!0},resolution:{configurable:!0}};return((e.prototype=Object.create(s&&s.prototype)).constructor=e).prototype.updateText=function(e){var t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),this.dirty||!e){this._font=this._style.toFontString();var i,n,s=this.context,r=Mr.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),e=r.width,o=r.height,a=r.lines,l=r.lineHeight,h=r.lineWidths,c=r.maxLineWidth,p=r.fontProperties;this.canvas.width=Math.ceil((Math.max(1,e)+2*t.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,o)+2*t.padding)*this._resolution),s.scale(this._resolution,this._resolution),s.clearRect(0,0,this.canvas.width,this.canvas.height),s.font=this._font,s.lineWidth=t.strokeThickness,s.textBaseline=t.textBaseline,s.lineJoin=t.lineJoin,s.miterLimit=t.miterLimit;for(var u=t.dropShadow?2:1,d=0;d<u;++d){var m=t.dropShadow&&0===d,f=m?2*o:0,g=f*this.resolution;m?(s.fillStyle="black",s.strokeStyle="black",m=xe("number"==typeof(m=t.dropShadowColor)?m:Ee(m)),s.shadowColor="rgba("+255*m[0]+","+255*m[1]+","+255*m[2]+","+t.dropShadowAlpha+")",s.shadowBlur=t.dropShadowBlur,s.shadowOffsetX=Math.cos(t.dropShadowAngle)*t.dropShadowDistance,s.shadowOffsetY=Math.sin(t.dropShadowAngle)*t.dropShadowDistance+g):(s.fillStyle=this._generateFillStyle(t,a),s.strokeStyle=t.stroke,s.shadowColor=0,s.shadowBlur=0,s.shadowOffsetX=0,s.shadowOffsetY=0);for(var v=0;v<a.length;v++)i=t.strokeThickness/2,n=t.strokeThickness/2+v*l+p.ascent,"right"===t.align?i+=c-h[v]:"center"===t.align&&(i+=(c-h[v])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(a[v],i+t.padding,n+t.padding-f,!0),t.fill&&this.drawLetterSpacing(a[v],i+t.padding,n+t.padding-f)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(e,t,i,n){void 0===n&&(n=!1);var s=this._style.letterSpacing;if(0!==s)for(var r=t,o=Array.from?Array.from(e):e.split(""),a=0;a<o.length;++a){var l=o[a];n?this.context.strokeText(l,r,i):this.context.fillText(l,r,i),r+=this.context.measureText(l).width+s}else n?this.context.strokeText(e,t,i):this.context.fillText(e,t,i)},e.prototype.updateTexture=function(){var e=this.canvas;!this._style.trim||(n=Ye(e)).data&&(e.width=n.width,e.height=n.height,this.context.putImageData(n.data,0,0));var t=this._texture,i=this._style,n=i.trim?0:i.padding,i=t.baseTexture;t.trim.width=t._frame.width=Math.ceil(e.width/this._resolution),t.trim.height=t._frame.height=Math.ceil(e.height/this._resolution),t.trim.x=-n,t.trim.y=-n,t.orig.width=t._frame.width-2*n,t.orig.height=t._frame.height-2*n,this._onTextureUpdate(),i.setRealSize(e.width,e.height,this._resolution),this.dirty=!1},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),s.prototype._render.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),s.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(e,t){if(!Array.isArray(e.fill))return e.fill;if(1===e.fill.length)return e.fill[0];var i,n=Math.ceil(this.canvas.width/this._resolution),s=Math.ceil(this.canvas.height/this._resolution),r=e.fill.slice(),o=e.fillGradientStops.slice();if(!o.length)for(var a=r.length+1,l=1;l<a;++l)o.push(l/a);if(r.unshift(e.fill[0]),o.unshift(0),r.push(e.fill[e.fill.length-1]),o.push(1),e.fillGradientType===Ir.LINEAR_VERTICAL)for(var h=this.context.createLinearGradient(n/2,0,n/2,s),c=(r.length+1)*t.length,p=0,u=0;u<t.length;u++){p+=1;for(var d=0;d<r.length;d++)i="number"==typeof o[d]?o[d]/t.length+u/t.length:p/c,h.addColorStop(i,r[d]),p++}else{h=this.context.createLinearGradient(0,s/2,n,s/2),c=r.length+1,p=1;for(var m=0;m<r.length;m++)i="number"==typeof o[m]?o[m]:p/c,h.addColorStop(i,r[m]),p++}return h},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},Or,e),s.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},t.width.get=function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},t.width.set=function(e){this.updateText(!0);var t=Ge(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e},t.height.get=function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},t.height.set=function(e){this.updateText(!0);var t=Ge(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e},t.style.get=function(){return this._style},t.style.set=function(e){this._style=(e=e||{})instanceof Br?e:new Br(e),this.localStyleID=-1,this.dirty=!0},t.text.get=function(){return this._text},t.text.set=function(e){e=String(null==e?"":e),this._text!==e&&(this._text=e,this.dirty=!0)},t.resolution.get=function(){return this._resolution},t.resolution.set=function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)},Object.defineProperties(e.prototype,t),e}(Pr);C.UPLOADS_PER_FRAME=4;function Fr(e){this.maxItemsPerFrame=e,this.itemsLeft=0}Fr.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},Fr.prototype.allowedToUpload=function(){return 0<this.itemsLeft--};function Dr(e){var t=this;this.limiter=new Fr(C.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){t.queue&&t.prepareItems()},this.registerFindHook(Vr),this.registerFindHook(Hr),this.registerFindHook(Lr),this.registerFindHook(kr),this.registerFindHook(Gr),this.registerUploadHook(Wr),this.registerUploadHook(Ur)}function Lr(e,t){var i=!1;if(e&&e._textures&&e._textures.length)for(var n,s=0;s<e._textures.length;s++)e._textures[s]instanceof Ri&&(n=e._textures[s].baseTexture,-1===t.indexOf(n)&&(t.push(n),i=!0));return i}function kr(e,t){return e instanceof ni&&(-1===t.indexOf(e)&&t.push(e),!0)}function Gr(e,t){if(e._texture&&e._texture instanceof Ri){e=e._texture.baseTexture;return-1===t.indexOf(e)&&t.push(e),!0}return!1}function Wr(e,t){return t instanceof Nr&&(t.updateText(!0),!0)}function Ur(e,t){if(t instanceof Br){t=t.toFontString();return Mr.measureFont(t),!0}return!1}function Vr(e,t){if(e instanceof Nr){-1===t.indexOf(e.style)&&t.push(e.style),-1===t.indexOf(e)&&t.push(e);e=e._texture.baseTexture;return-1===t.indexOf(e)&&t.push(e),!0}return!1}function Hr(e,t){return e instanceof Br&&(-1===t.indexOf(e)&&t.push(e),!0)}Dr.prototype.upload=function(e,t){"function"==typeof e&&(t=e,e=null),e&&this.add(e),this.queue.length?(t&&this.completes.push(t),this.ticking||(this.ticking=!0,Gt.system.addOnce(this.tick,this,kt.UTILITY))):t&&t()},Dr.prototype.tick=function(){setTimeout(this.delayedTick,0)},Dr.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed)for(var i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)Gt.system.addOnce(this.tick,this,kt.UTILITY);else{this.ticking=!1;for(var s=this.completes.slice(0),r=this.completes.length=0,o=s.length;r<o;r++)s[r]()}},Dr.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},Dr.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},Dr.prototype.add=function(e){for(var t=0,i=this.addHooks.length;t<i&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Rt)for(var n=e.children.length-1;0<=n;n--)this.add(e.children[n]);return this},Dr.prototype.destroy=function(){this.ticking&&Gt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null};var $r,yi=(($r=Dr)&&(Xr.__proto__=$r),(Xr.prototype=Object.create($r&&$r.prototype)).constructor=Xr);function Xr(e){$r.call(this,e),this.uploadHookHelper=this.renderer,this.registerFindHook(zr),this.registerUploadHook(Yr),this.registerUploadHook(jr)}function Yr(e,t){return t instanceof ni&&(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0)}function jr(e,t){return t instanceof Tr&&(!t.dirty&&!t.clearDirty&&t._webGL[e.plugins.graphics.CONTEXT_UID]||e.plugins.graphics.updateGraphics(t),!0)}function zr(e,t){return e instanceof Tr&&(t.push(e),!0)}function qr(e){this.maxMilliseconds=e,this.frameStart=0}qr.prototype.beginFrame=function(){this.frameStart=Date.now()},qr.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds};function Kr(t){var i=this;t=Object.assign({forceCanvas:!1},t),this.renderer=Cs(t),this.stage=new Rt,Kr._plugins.forEach(function(e){e.init.call(i,t)})}mi={BasePrepare:Dr,CountLimiter:Fr,Prepare:yi,TimeLimiter:qr},gi={view:{configurable:!0},screen:{configurable:!0}};Kr.registerPlugin=function(e){Kr._plugins.push(e)},Kr.prototype.render=function(){this.renderer.render(this.stage)},gi.view.get=function(){return this.renderer.view},gi.screen.get=function(){return this.renderer.screen},Kr.prototype.destroy=function(e,t){var i=this,n=Kr._plugins.slice(0);n.reverse(),n.forEach(function(e){e.destroy.call(i)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null,this._options=null},Object.defineProperties(Kr.prototype,gi),Kr._plugins=[];function Qr(){}Qr.init=function(e){var t=this;Object.defineProperty(this,"resizeTo",{set:function(e){window.removeEventListener("resize",this.resize),(this._resizeTo=e)&&(window.addEventListener("resize",this.resize),this.resize())},get:function(){return this._resizeTo}}),this.resize=function(){t._resizeTo&&(t._resizeTo===window?t.renderer.resize(window.innerWidth,window.innerHeight):t.renderer.resize(t._resizeTo.clientWidth,t._resizeTo.clientHeight))},this._resizeTo=null,this.resizeTo=e.resizeTo||null},Qr.destroy=function(){this.resizeTo=null,this.resize=null},Kr.registerPlugin(Qr);function Zr(e,t){for(var n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=n.parser[(t=t||{}).strictMode?"strict":"loose"].exec(e),s={},r=14;r--;)s[n.key[r]]=i[r]||"";return s[n.q.name]={},s[n.key[12]].replace(n.q.parser,function(e,t,i){t&&(s[n.q.name][t]=i)}),s}var Yt=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e};function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=(i(o,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),o);function o(e,t,i){void 0===t&&(t=!1),s(this,o),this._fn=e,this._once=t,this._thisArg=i,this._next=this._prev=this._owner=null}function a(e,t){return e._head?(e._tail._next=t)._prev=e._tail:e._head=t,(e._tail=t)._owner=e,t}i(l,[{key:"handlers",value:function(){var e=this._head;if(!(arguments.length<=0||void 0===arguments[0])&&arguments[0])return!!e;for(var t=[];e;)t.push(e),e=e._next;return t}},{key:"has",value:function(e){if(!(e instanceof r))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return e._owner===this}},{key:"dispatch",value:function(){var e=arguments,t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,e),t=t._next;return!0}},{key:"add",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof e)throw new Error("MiniSignal#add(): First arg must be a Function.");return a(this,new r(e,!1,t))}},{key:"once",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof e)throw new Error("MiniSignal#once(): First arg must be a Function.");return a(this,new r(e,!0,t))}},{key:"detach",value:function(e){if(!(e instanceof r))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return e._owner!==this||(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,null===e._next&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null),this}},{key:"detachAll",value:function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this}}]),i=l;function l(){s(this,l),this._head=this._tail=void 0}i.MiniSignalBinding=r,t.default=i,e.exports=t.default}),Jr=(i=Yt)&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;function eo(){}function to(i,n,s,r){var o=0,a=i.length;!function e(t){t||o===a?s&&s(t):r?setTimeout(function(){n(i[o++],e)},1):n(i[o++],e)}()}function io(t,e){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var i=0,n={_tasks:[],concurrency:e,saturated:eo,unsaturated:eo,buffer:e/4,empty:eo,drain:eo,error:eo,started:!1,paused:!1,push:function(e,t){s(e,!1,t)},kill:function(){i=0,n.drain=eo,n.started=!1,n._tasks=[]},unshift:function(e,t){s(e,!0,t)},process:function(){for(;!n.paused&&i<n.concurrency&&n._tasks.length;){var e=n._tasks.shift();0===n._tasks.length&&n.empty(),(i+=1)===n.concurrency&&n.saturated(),t(e.data,function(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}(function(e){return function(){--i,e.callback.apply(e,arguments),null!=arguments[0]&&n.error(arguments[0],e.data),i<=n.concurrency-n.buffer&&n.unsaturated(),n.idle()&&n.drain(),n.process()}}(e)))}},length:function(){return n._tasks.length},running:function(){return i},idle:function(){return n._tasks.length+i===0},pause:function(){!0!==n.paused&&(n.paused=!0)},resume:function(){if(!1!==n.paused){n.paused=!1;for(var e=1;e<=n.concurrency;e++)n.process()}}};function s(e,t,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");n.started=!0,null==e&&n.idle()?setTimeout(function(){return n.drain()},1):(i={data:e,callback:"function"==typeof i?i:eo},t?n._tasks.unshift(i):n._tasks.push(i),setTimeout(function(){return n.process()},1))}return n}var no={};function so(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ro(e,t,i){return t&&so(e.prototype,t),i&&so(e,i),e}var oo=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),ao=null;function lo(){}var ho=function(){function r(e,t,i){if("string"!=typeof e||"string"!=typeof t)throw new Error("Both name and url are required for constructing a resource.");i=i||{},this._flags=0,this._setFlag(r.STATUS_FLAGS.DATA_URL,0===t.indexOf("data:")),this.name=e,this.url=t,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===i.crossOrigin?"anonymous":i.crossOrigin,this.timeout=i.timeout||0,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.metadata=i.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=r.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=lo,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Jr,this.onProgress=new Jr,this.onComplete=new Jr,this.onAfterMiddleware=new Jr}r.setExtensionLoadType=function(e,t){co(r._loadTypeMap,e,t)},r.setExtensionXhrType=function(e,t){co(r._xhrTypeMap,e,t)};var e=r.prototype;return e.complete=function(){this._clearEvents(),this._finish()},e.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=r.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.load=function(e){var t=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout(function(){return e(t)},1);else switch(e&&this.onComplete.once(e),this._setFlag(r.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case r.LOAD_TYPE.IMAGE:this.type=r.TYPE.IMAGE,this._loadElement("image");break;case r.LOAD_TYPE.AUDIO:this.type=r.TYPE.AUDIO,this._loadSourceElement("audio");break;case r.LOAD_TYPE.VIDEO:this.type=r.TYPE.VIDEO,this._loadSourceElement("video");break;default:r.LOAD_TYPE.XHR;oo&&this.crossOrigin?this._loadXdr():this._loadXhr()}},e._hasFlag=function(e){return 0!=(this._flags&e)},e._setFlag=function(e,t){this._flags=t?this._flags|e:this._flags&~e},e._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(r.STATUS_FLAGS.COMPLETE,!0),this._setFlag(r.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===e&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===e&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(e),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(e,this.url[i],Array.isArray(t)?t[i]:t));else{var n=this.metadata.mimeType;this.data.appendChild(this._createSource(e,this.url,Array.isArray(n)?n[0]:n))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+e)},e._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===r.XHR_RESPONSE_TYPE.JSON||this.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=r.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},e._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},e._createSource=function(e,t,i){i=i||e+"/"+this._getExtension(t);e=document.createElement("source");return e.src=t,e.type=i,e},e._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},e._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},e._onTimeout=function(){this.abort("Load timed out.")},e._xhrOnError=function(){var e=this.xhr;this.abort(po(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},e._xhrOnTimeout=function(){var e=this.xhr;this.abort(po(e)+" Request timed out.")},e._xhrOnAbort=function(){var e=this.xhr;this.abort(po(e)+" Request was aborted by the user.")},e._xhrOnLoad=function(){var e,t,i=this.xhr,n="",s=void 0===i.status?200:i.status;if(""!==i.responseType&&"text"!==i.responseType&&void 0!==i.responseType||(n=i.responseText),0===s&&(0<n.length||i.responseType===r.XHR_RESPONSE_TYPE.BUFFER)?s=200:1223===s&&(s=204),2==(s/100|0)){if(this.xhrType===r.XHR_RESPONSE_TYPE.TEXT)this.data=n,this.type=r.TYPE.TEXT;else if(this.xhrType===r.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(n),this.type=r.TYPE.JSON}catch(e){return void this.abort("Error trying to parse loaded json: "+e)}else if(this.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT)try{window.DOMParser?(e=new DOMParser,this.data=e.parseFromString(n,"text/xml")):((t=document.createElement("div")).innerHTML=n,this.data=t),this.type=r.TYPE.XML}catch(e){return void this.abort("Error trying to parse loaded xml: "+e)}else this.data=i.response||n;this.complete()}else this.abort("["+i.status+"] "+i.statusText+": "+i.responseURL)},e._determineCrossOrigin=function(e,t){if(0===e.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";t=t||window.location,(ao=ao||document.createElement("a")).href=e;var i=!(e=Zr(ao.href,{strictMode:!0})).port&&""===t.port||e.port===t.port,n=e.protocol?e.protocol+":":"";return e.host===t.hostname&&i&&n===t.protocol?"":"anonymous"},e._determineXhrType=function(){return r._xhrTypeMap[this.extension]||r.XHR_RESPONSE_TYPE.TEXT},e._determineLoadType=function(){return r._loadTypeMap[this.extension]||r.LOAD_TYPE.XHR},e._getExtension=function(){var e,t,i=this.url;return(this.isDataUrl?(t=i.indexOf("/"),i.substring(t+1,i.indexOf(";",t))):(e=i.indexOf("?"),t=i.indexOf("#"),t=Math.min(-1<e?e:i.length,-1<t?t:i.length),(i=i.substring(0,t)).substring(i.lastIndexOf(".")+1))).toLowerCase()},e._getMimeFromXhrType=function(e){switch(e){case r.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case r.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case r.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case r.XHR_RESPONSE_TYPE.JSON:return"application/json";case r.XHR_RESPONSE_TYPE.DEFAULT:case r.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},ro(r,[{key:"isDataUrl",get:function(){return this._hasFlag(r.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(r.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(r.STATUS_FLAGS.LOADING)}}]),r}();function co(e,t,i){(t=t&&0===t.indexOf(".")?t.substring(1):t)&&(e[t]=i)}function po(e){return e.toString().replace("object ","")}ho.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},ho.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},ho.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},ho.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},ho._loadTypeMap={gif:ho.LOAD_TYPE.IMAGE,png:ho.LOAD_TYPE.IMAGE,bmp:ho.LOAD_TYPE.IMAGE,jpg:ho.LOAD_TYPE.IMAGE,jpeg:ho.LOAD_TYPE.IMAGE,tif:ho.LOAD_TYPE.IMAGE,tiff:ho.LOAD_TYPE.IMAGE,webp:ho.LOAD_TYPE.IMAGE,tga:ho.LOAD_TYPE.IMAGE,svg:ho.LOAD_TYPE.IMAGE,"svg+xml":ho.LOAD_TYPE.IMAGE,mp3:ho.LOAD_TYPE.AUDIO,ogg:ho.LOAD_TYPE.AUDIO,wav:ho.LOAD_TYPE.AUDIO,mp4:ho.LOAD_TYPE.VIDEO,webm:ho.LOAD_TYPE.VIDEO},ho._xhrTypeMap={xhtml:ho.XHR_RESPONSE_TYPE.DOCUMENT,html:ho.XHR_RESPONSE_TYPE.DOCUMENT,htm:ho.XHR_RESPONSE_TYPE.DOCUMENT,xml:ho.XHR_RESPONSE_TYPE.DOCUMENT,tmx:ho.XHR_RESPONSE_TYPE.DOCUMENT,svg:ho.XHR_RESPONSE_TYPE.DOCUMENT,tsx:ho.XHR_RESPONSE_TYPE.DOCUMENT,gif:ho.XHR_RESPONSE_TYPE.BLOB,png:ho.XHR_RESPONSE_TYPE.BLOB,bmp:ho.XHR_RESPONSE_TYPE.BLOB,jpg:ho.XHR_RESPONSE_TYPE.BLOB,jpeg:ho.XHR_RESPONSE_TYPE.BLOB,tif:ho.XHR_RESPONSE_TYPE.BLOB,tiff:ho.XHR_RESPONSE_TYPE.BLOB,webp:ho.XHR_RESPONSE_TYPE.BLOB,tga:ho.XHR_RESPONSE_TYPE.BLOB,json:ho.XHR_RESPONSE_TYPE.JSON,text:ho.XHR_RESPONSE_TYPE.TEXT,txt:ho.XHR_RESPONSE_TYPE.TEXT,ttf:ho.XHR_RESPONSE_TYPE.BUFFER,otf:ho.XHR_RESPONSE_TYPE.BUFFER},ho.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var uo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var mo=window.URL||window.webkitURL;var n={caching:function(e,t){var i=this;no[e.url]?(e.data=no[e.url],e.complete()):e.onComplete.once(function(){return no[i.url]=i.data}),t()},parsing:function(e,t){if(e.data){if(e.xhr&&e.xhrType===ho.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof e.data){if(0===e.data.type.indexOf("image")){var i=mo.createObjectURL(e.data);return e.blob=e.data,e.data=new Image,e.data.src=i,e.type=ho.TYPE.IMAGE,void(e.data.onload=function(){mo.revokeObjectURL(i),e.data.onload=null,t()})}}else{var n=e.xhr.getResponseHeader("content-type");if(n&&0===n.indexOf("image"))return e.data=new Image,e.data.src="data:"+n+";base64,"+function(e){for(var t="",i=0;i<e.length;){for(var n=[0,0,0],s=[0,0,0,0],r=0;r<n.length;++r)i<e.length?n[r]=255&e.charCodeAt(i++):n[r]=0;switch(s[0]=n[0]>>2,s[1]=(3&n[0])<<4|n[1]>>4,s[2]=(15&n[1])<<2|n[2]>>6,s[3]=63&n[2],i-(e.length-1)){case 2:s[3]=64,s[2]=64;break;case 1:s[3]=64}for(var o=0;o<s.length;++o)t+=uo.charAt(s[o])}return t}(e.xhr.responseText),e.type=ho.TYPE.IMAGE,void(e.data.onload=function(){e.data.onload=null,t()})}t()}else t()}},fo=/(#[\w-]+)?$/,go=((s=vo.prototype).add=function(e,t,i,n){if(Array.isArray(e)){for(var s=0;s<e.length;++s)this.add(e[s]);return this}if("object"==typeof e&&(n=t||e.callback||e.onComplete,t=(i=e).url,e=e.name||e.key||e.url),"string"!=typeof t&&(n=i,i=t,t=e),"string"!=typeof t)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(n=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e],t=this._prepareUrl(t),this.resources[e]=new ho(e,t,i),"function"==typeof n&&this.resources[e].onAfterMiddleware.once(n),this.loading){for(var r=i.parentResource,o=[],a=0;a<r.children.length;++a)r.children[a].isComplete||o.push(r.children[a]);var l=r.progressChunk*(o.length+1)/(o.length+2);r.children.push(this.resources[e]),r.progressChunk=l;for(var h=0;h<o.length;++h)o[h].progressChunk=l;this.resources[e].progressChunk=l}return this._queue.push(this.resources[e]),this},s.pre=function(e){return this._beforeMiddleware.push(e),this},s.use=function(e){return this._afterMiddleware.push(e),this},s.reset=function(){for(var e in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){e=this.resources[e];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},s.load=function(e){if("function"==typeof e&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var t=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=t;this._onStart(),this._queue.resume()}return this},s._prepareUrl=function(e){var t=Zr(e,{strictMode:!0});return t=t.protocol||!t.path||0===e.indexOf("//")?e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==e.charAt(0)?this.baseUrl+"/"+e:this.baseUrl+e,this.defaultQueryString&&(e=fo.exec(t)[0],-1!==(t=t.substr(0,t.length-e.length)).indexOf("?")?t+="&"+this.defaultQueryString:t+="?"+this.defaultQueryString,t+=e),t},s._loadResource=function(i,e){var n=this;i._dequeue=e,to(this._beforeMiddleware,function(e,t){e.call(n,i,function(){t(i.isComplete?{}:null)})},function(){i.isComplete?n._onLoad(i):(i._onLoadBinding=i.onComplete.once(n._onLoad,n),i.load())},!0)},s._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},s._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},s._onLoad=function(i){var n=this;i._onLoadBinding=null,this._resourcesParsing.push(i),i._dequeue(),to(this._afterMiddleware,function(e,t){e.call(n,i,t)},function(){i.onAfterMiddleware.dispatch(i),n.progress=Math.min(100,n.progress+i.progressChunk),n.onProgress.dispatch(n,i),i.error?n.onError.dispatch(i.error,n,i):n.onLoad.dispatch(n,i),n._resourcesParsing.splice(n._resourcesParsing.indexOf(i),1),n._queue.idle()&&0===n._resourcesParsing.length&&n._onComplete()},!0)},ro(vo,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e}}]),vo);function vo(e,t){var i=this;void 0===t&&(t=10),this.baseUrl=e=void 0===e?"":e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(e,t){return i._loadResource(e,t)},this._queue=io(this._boundLoadResource,t),this._queue.pause(),this.resources={},this.onProgress=new Jr,this.onError=new Jr,this.onLoad=new Jr,this.onStart=new Jr,this.onComplete=new Jr;for(var n=0;n<vo._defaultBeforeMiddleware.length;++n)this.pre(vo._defaultBeforeMiddleware[n]);for(var s=0;s<vo._defaultAfterMiddleware.length;++s)this.use(vo._defaultAfterMiddleware[s])}go._defaultBeforeMiddleware=[],go._defaultAfterMiddleware=[],go.pre=function(e){return go._defaultBeforeMiddleware.push(e),go},go.use=function(e){return go._defaultAfterMiddleware.push(e),go};function yo(){}yo.use=function(e,t){e.data&&e.type===ho.TYPE.IMAGE&&(e.texture=Ri.fromLoader(e.data,e.url,e.name)),t()};var bo=function(o){function a(e,t){var n=this;o.call(this,e,t),f.call(this);for(var i=0;i<a._plugins.length;++i){var s=a._plugins[i],r=s.pre,s=s.use;r&&this.pre(r),s&&this.use(s)}this.onStart.add(function(e){return n.emit("start",e)}),this.onProgress.add(function(e,t){return n.emit("progress",e,t)}),this.onError.add(function(e,t,i){return n.emit("error",e,t,i)}),this.onLoad.add(function(e,t){return n.emit("load",e,t)}),this.onComplete.add(function(e,t){return n.emit("complete",e,t)}),this._protected=!1}o&&(a.__proto__=o);var e={shared:{configurable:!0}};return((a.prototype=Object.create(o&&o.prototype)).constructor=a).prototype.destroy=function(){this._protected||(this.removeAllListeners(),this.reset())},e.shared.get=function(){var e=a._shared;return e||((e=new a)._protected=!0,a._shared=e),e},Object.defineProperties(a,e),a}(go);Object.assign(bo.prototype,f.prototype),bo._plugins=[],bo.registerPlugin=function(e){return bo._plugins.push(e),e.add&&e.add(),bo},bo.registerPlugin({use:n.parsing}),bo.registerPlugin(yo);function So(){}So.init=function(e){e=Object.assign({sharedLoader:!1},e),this.loader=e.sharedLoader?bo.shared:new bo},So.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)};function To(e,t,i){this.geometry=new Vi,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<e.length;++n){var s={attributeName:(s=e[n]).attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||ve.FLOAT,offset:s.offset};(t[n]?this.dynamicProperties:this.staticProperties).push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}var _o=ho,Wn=function(s){function e(e,t,i,n){void 0===e&&(e=1500),void 0===i&&(i=16384),void 0===n&&(n=!1),s.call(this);16384<i&&(i=16384),this._properties=[!1,!0,!1,!1,!1],this._maxSize=e,this._batchSize=i,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=de.NORMAL,this.autoResize=n,this.roundPixels=!0,this.baseTexture=null,this.setProperties(t),this._tint=0,this.tintRgb=new Float32Array(4),this.tint=16777215}s&&(e.__proto__=s);var t={tint:{configurable:!0}};return((e.prototype=Object.create(s&&s.prototype)).constructor=e).prototype.setProperties=function(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},t.tint.get=function(){return this._tint},t.tint.set=function(e){xe(this._tint=e,this.tintRgb)},e.prototype.render=function(e){var t=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return t.onChildrenChange(0)})),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},e.prototype.onChildrenChange=function(e){for(var t=Math.floor(e/this._batchSize);this._bufferUpdateIDs.length<t;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[t]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}},e.prototype.destroy=function(e){s.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},Object.defineProperties(e.prototype,t),e}(Rt);To.prototype.initBuffers=function(){var e=this.geometry,t=0;this.indexBuffer=new ki(Fe(this.size),!0,!0),e.addIndex(this.indexBuffer);for(var i=this.dynamicStride=0;i<this.dynamicProperties.length;++i){var n=this.dynamicProperties[i];n.offset=t,t+=n.size,this.dynamicStride+=n.size}var s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=new ki(this.dynamicData,!1,!1);for(var r=0,o=this.staticStride=0;o<this.staticProperties.length;++o){var a=this.staticProperties[o];a.offset=r,r+=a.size,this.staticStride+=a.size}s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new ki(this.staticData,!0,!1);for(var l=0;l<this.dynamicProperties.length;++l){var h=this.dynamicProperties[l];e.addAttribute(h.attributeName,this.dynamicBuffer,0,h.type===ve.UNSIGNED_BYTE,h.type,4*this.dynamicStride,4*h.offset)}for(var c=0;c<this.staticProperties.length;++c){var p=this.staticProperties[c];e.addAttribute(p.attributeName,this.staticBuffer,0,p.type===ve.UNSIGNED_BYTE,p.type,4*this.staticStride,4*p.offset)}},To.prototype.uploadDynamic=function(e,t,i){for(var n=0;n<this.dynamicProperties.length;n++){var s=this.dynamicProperties[n];s.uploadFunction(e,t,i,s.type===ve.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++},To.prototype.uploadStatic=function(e,t,i){for(var n=0;n<this.staticProperties.length;n++){var s=this.staticProperties[n];s.uploadFunction(e,t,i,s.type===ve.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++},To.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()};var Ao,$n=((Ao=rn)&&(Po.__proto__=Ao),((Po.prototype=Object.create(Ao&&Ao.prototype)).constructor=Po).prototype.render=function(e){var t=e.children,i=e._maxSize,n=e._batchSize,s=this.renderer,r=t.length;if(0!==r){i<r&&!e.autoResize&&(r=i);var o=(o=e._buffers)||(e._buffers=this.generateBuffers(e)),a=t[0]._texture.baseTexture;this.renderer.state.setBlendMode(Re(e.blendMode,a.premultiplyAlpha));var l=s.gl,i=e.worldTransform.copyTo(this.tempMatrix);i.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=i.toArray(!0),this.shader.uniforms.uColor=Me(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,a.premultiplyAlpha),this.shader.uniforms.uSampler=a,this.renderer.shader.bind(this.shader);for(var h=!1,c=0,p=0;c<r;c+=n,p+=1){var u=r-c;n<u&&(u=n),p>=o.length&&o.push(this._generateOneMoreBuffer(e));var d=o[p];d.uploadDynamic(t,c,u);var m=e._bufferUpdateIDs[p]||0;(h=h||d._updateID<m)&&(d._updateID=e._updateID,d.uploadStatic(t,c,u)),s.geometry.bind(d.geometry),l.drawElements(l.TRIANGLES,6*u,l.UNSIGNED_SHORT,0)}}},Po.prototype.generateBuffers=function(e){for(var t=[],i=e._maxSize,n=e._batchSize,s=e._properties,r=0;r<i;r+=n)t.push(new To(this.properties,s,n));return t},Po.prototype._generateOneMoreBuffer=function(e){var t=e._batchSize,e=e._properties;return new To(this.properties,e,t)},Po.prototype.uploadVertices=function(e,t,i,n,s,r){for(var o=0,a=0,l=0,h=0,c=0;c<i;++c){var p=e[t+c],u=p._texture,d=p.scale.x,m=p.scale.y,f=u.trim,u=u.orig;f?(o=(a=f.x-p.anchor.x*u.width)+f.width,l=(h=f.y-p.anchor.y*u.height)+f.height):(o=u.width*(1-p.anchor.x),a=u.width*-p.anchor.x,l=u.height*(1-p.anchor.y),h=u.height*-p.anchor.y),n[r]=a*d,n[r+1]=h*m,n[r+s]=o*d,n[r+s+1]=h*m,n[r+2*s]=o*d,n[r+2*s+1]=l*m,n[r+3*s]=a*d,n[r+3*s+1]=l*m,r+=4*s}},Po.prototype.uploadPosition=function(e,t,i,n,s,r){for(var o=0;o<i;o++){var a=e[t+o].position;n[r]=a.x,n[r+1]=a.y,n[r+s]=a.x,n[r+s+1]=a.y,n[r+2*s]=a.x,n[r+2*s+1]=a.y,n[r+3*s]=a.x,n[r+3*s+1]=a.y,r+=4*s}},Po.prototype.uploadRotation=function(e,t,i,n,s,r){for(var o=0;o<i;o++){var a=e[t+o].rotation;n[r]=a,n[r+s]=a,n[r+2*s]=a,n[r+3*s]=a,r+=4*s}},Po.prototype.uploadUvs=function(e,t,i,n,s,r){for(var o=0;o<i;++o){var a=e[t+o]._texture._uvs;a?(n[r]=a.x0,n[r+1]=a.y0,n[r+s]=a.x1,n[r+s+1]=a.y1,n[r+2*s]=a.x2,n[r+2*s+1]=a.y2,n[r+3*s]=a.x3,n[r+3*s+1]=a.y3):(n[r]=0,n[r+1]=0,n[r+s]=0,n[r+s+1]=0,n[r+2*s]=0,n[r+2*s+1]=0,n[r+3*s]=0,n[r+3*s+1]=0),r+=4*s}},Po.prototype.uploadTint=function(e,t,i,n,s,r){for(var o=0;o<i;++o){var a=e[t+o],l=a._texture.baseTexture.premultiplyAlpha,h=a.alpha,h=h<1&&l?Oe(a._tintRGB,h):a._tintRGB+(255*h<<24);n[r]=h,n[r+s]=h,n[r+2*s]=h,n[r+3*s]=h,r+=4*s}},Po.prototype.destroy=function(){Ao.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},Po);function Po(e){Ao.call(this,e),this.shader=null,this.properties=null,this.tempMatrix=new rt,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ve.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=kn.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{})}function Io(e,t,i){void 0===i&&(i=null),this.baseTexture=e,this.textures={},this.animations={},this.data=t,this.resolution=this._updateResolution(i||(this.baseTexture.resource?this.baseTexture.resource.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}q={BATCH_SIZE:{configurable:!0}};q.BATCH_SIZE.get=function(){return 1e3},Io.prototype._updateResolution=function(e){var t=this.data.meta.scale,e=Ze(e,null);return 1!==(e=null===e?void 0!==t?parseFloat(t):1:e)&&this.baseTexture.setResolution(e),e},Io.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=Io.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},Io.prototype._processFrames=function(e){for(var t=e,i=Io.BATCH_SIZE;t-e<i&&t<this._frameKeys.length;){var n,s,r,o=this._frameKeys[t],a=this._frames[o],l=a.frame;l&&(n=r=null,s=!1!==a.trimmed&&a.sourceSize?a.sourceSize:a.frame,s=new Tt(0,0,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),r=a.rotated?new Tt(Math.floor(l.x)/this.resolution,Math.floor(l.y)/this.resolution,Math.floor(l.h)/this.resolution,Math.floor(l.w)/this.resolution):new Tt(Math.floor(l.x)/this.resolution,Math.floor(l.y)/this.resolution,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution),!1!==a.trimmed&&a.spriteSourceSize&&(n=new Tt(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution)),this.textures[o]=new Ri(this.baseTexture,r,s,n,a.rotated?2:0,a.anchor),Ri.addToCache(this.textures[o],o)),t++}},Io.prototype._processAnimations=function(){var e,t=this.data.animations||{};for(e in t){this.animations[e]=[];for(var i=0;i<t[e].length;i++){var n=t[e][i];this.animations[e].push(this.textures[n])}}},Io.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},Io.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*Io.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*Io.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},Io.prototype.destroy=function(e){for(var t in void 0===e&&(e=!1),this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&this.baseTexture.destroy(),this.baseTexture=null},Object.defineProperties(Io,q);function Co(){}Co.use=function(i,n){var e,t,s=i.name+"_image";i.data&&i.type===_o.TYPE.JSON&&i.data.frames&&!this.resources[s]?(e={crossOrigin:i.crossOrigin,metadata:i.metadata.imageMetadata,parentResource:i},t=Co.getResourcePath(i,this.baseUrl),this.add(s,t,e,function(e){var t;e.error?n(e.error):(t=new Io(e.texture.baseTexture,i.data,i.url)).parse(function(){i.spritesheet=t,i.textures=t.textures,n()})})):n()},Co.getResourcePath=function(e,t){return e.isDataUrl?e.data.meta.image:ce.resolve(e.url.replace(t,""),e.data.meta.image)};var xo,Bo=new it,ze=function(n){function s(e,t,i){void 0===t&&(t=100),void 0===i&&(i=100),n.call(this,e),this.tileTransform=new yt,this._width=t,this._height=i,this._canvasPattern=null,this.uvMatrix=e.uvMatrix||new Vn(e),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var e={clampMargin:{configurable:!0},tileScale:{configurable:!0},tilePosition:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};return e.clampMargin.get=function(){return this.uvMatrix.clampMargin},e.clampMargin.set=function(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)},e.tileScale.get=function(){return this.tileTransform.scale},e.tileScale.set=function(e){this.tileTransform.scale.copyFrom(e)},e.tilePosition.get=function(){return this.tileTransform.position},e.tilePosition.set=function(e){this.tileTransform.position.copyFrom(e)},s.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},s.prototype._render=function(e){var t=this._texture;t&&t.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))},s.prototype._calculateBounds=function(){var e=this._width*-this._anchor._x,t=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,t,i,n)},s.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Tt),e=this._localBoundsRect),this._bounds.getRectangle(e)):n.prototype.getLocalBounds.call(this,e)},s.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,Bo);var t=this._width,i=this._height,e=-t*this.anchor._x;if(Bo.x>=e&&Bo.x<e+t){t=-i*this.anchor._y;if(Bo.y>=t&&Bo.y<t+i)return!0}return!1},s.prototype.destroy=function(e){n.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},s.from=function(e,t,i){return new s(Ri.from(e),t,i)},s.fromFrame=function(e,t,i){var n=$e[e];if(!n)throw new Error('The frameId "'+e+'" does not exist in the texture cache '+this);return new s(n,t,i)},s.fromImage=function(e,t,i,n){return new s(Ri.from(e,n=n&&"object"!=typeof n?{scaleMode:arguments[4],resourceOptions:{crossorigin:arguments[3]}}:n),t,i)},e.width.get=function(){return this._width},e.width.set=function(e){this._width=e},e.height.get=function(){return this._height},e.height.set=function(e){this._height=e},Object.defineProperties(s.prototype,e),s}(Pr),Eo="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",wo=new rt,St=((xo=rn)&&(Ro.__proto__=xo),((Ro.prototype=Object.create(xo&&xo.prototype)).constructor=Ro).prototype.render=function(e){var t=this.renderer,i=this.quad,n=i.vertices;n[0]=n[6]=e._width*-e.anchor.x,n[1]=n[3]=e._height*-e.anchor.y,n[2]=n[4]=e._width*(1-e.anchor.x),n[5]=n[7]=e._height*(1-e.anchor.y),e.uvRespectAnchor&&((n=i.uvs)[0]=n[6]=-e.anchor.x,n[1]=n[3]=-e.anchor.y,n[2]=n[4]=1-e.anchor.x,n[5]=n[7]=1-e.anchor.y),i.invalidate();var s=e._texture,r=s.baseTexture,o=e.tileTransform.localTransform,a=e.uvMatrix,l=r.isPowerOfTwo&&s.frame.width===r.width&&s.frame.height===r.height;l&&(r._glTextures[t.CONTEXT_UID]?l=r.wrapMode!==be.CLAMP:r.wrapMode===be.CLAMP&&(r.wrapMode=be.REPEAT));var h=l?this.simpleShader:this.shader,c=s.width,p=s.height,u=e._width,n=e._height;wo.set(o.a*c/u,o.b*c/n,o.c*p/u,o.d*p/n,o.tx/u,o.ty/n),wo.invert(),l?wo.prepend(a.mapCoord):(h.uniforms.uMapCoord=a.mapCoord.toArray(!0),h.uniforms.uClampFrame=a.uClampFrame,h.uniforms.uClampOffset=a.uClampOffset),h.uniforms.uTransform=wo.toArray(!0),h.uniforms.uColor=Ne(e.tint,e.worldAlpha,h.uniforms.uColor,r.premultiplyAlpha),h.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),h.uniforms.uSampler=s,t.shader.bind(h),t.geometry.bind(i),t.state.setBlendMode(Re(e.blendMode,r.premultiplyAlpha)),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},Ro);function Ro(e){xo.call(this,e);e={globals:this.renderer.globalUniforms};this.shader=kn.from(Eo,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n",e),this.simpleShader=kn.from(Eo,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n",e),this.quad=new Ki}var Mo=function(n){function E(e,t){var i=this;void 0===t&&(t={}),n.call(this),this._textWidth=0,this._textHeight=0,this._glyphs=[],this._font={tint:void 0!==t.tint?t.tint:16777215,align:t.align||"left",name:null,size:0},this.font=t.font,this._text=e,this._maxWidth=0,this._maxLineHeight=0,this._letterSpacing=0,this._anchor=new nt(function(){i.dirty=!0},this,0,0),this.dirty=!1,this.roundPixels=C.ROUND_PIXELS,this.updateText()}n&&(E.__proto__=n);var e={tint:{configurable:!0},align:{configurable:!0},anchor:{configurable:!0},font:{configurable:!0},text:{configurable:!0},maxWidth:{configurable:!0},maxLineHeight:{configurable:!0},textWidth:{configurable:!0},letterSpacing:{configurable:!0},textHeight:{configurable:!0}};return((E.prototype=Object.create(n&&n.prototype)).constructor=E).prototype.updateText=function(){for(var e=E.fonts[this._font.name],t=this._font.size/e.size,i=new it,n=[],s=[],r=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",o=r.length,a=this._maxWidth*e.size/this._font.size,l=null,h=0,c=0,p=0,u=-1,d=0,m=0,f=0,g=0;g<o;g++){var v=r.charCodeAt(g),y=r.charAt(g);/(?:\s)/.test(y)&&(u=g,d=h),"\r"!==y&&"\n"!==y?(y=e.chars[v])&&(l&&y.kerning[l]&&(i.x+=y.kerning[l]),n.push({texture:y.texture,line:p,charCode:v,position:new it(i.x+y.xOffset+this._letterSpacing/2,i.y+y.yOffset)}),i.x+=y.xAdvance+this._letterSpacing,h=i.x,f=Math.max(f,y.yOffset+y.texture.height),l=v,-1!==u&&0<a&&i.x>a&&(De(n,1+u-++m,1+g-u),g=u,u=-1,s.push(d),c=Math.max(c,d),p++,i.x=0,i.y+=e.lineHeight,l=null)):(s.push(h),c=Math.max(c,h),++p,++m,i.x=0,i.y+=e.lineHeight,l=null)}var b=r.charAt(r.length-1);"\r"!==b&&"\n"!==b&&(/(?:\s)/.test(b)&&(h=d),s.push(h),c=Math.max(c,h));for(var S=[],T=0;T<=p;T++){var _=0;"right"===this._font.align?_=c-s[T]:"center"===this._font.align&&(_=(c-s[T])/2),S.push(_)}for(var A=n.length,P=this.tint,I=0;I<A;I++){var C=this._glyphs[I];C?C.texture=n[I].texture:((C=new Pr(n[I].texture)).roundPixels=this.roundPixels,this._glyphs.push(C)),C.position.x=(n[I].position.x+S[n[I].line])*t,C.position.y=n[I].position.y*t,C.scale.x=C.scale.y=t,C.tint=P,C.parent||this.addChild(C)}for(var x=A;x<this._glyphs.length;++x)this.removeChild(this._glyphs[x]);if(this._textWidth=c*t,this._textHeight=(i.y+e.lineHeight)*t,0!==this.anchor.x||0!==this.anchor.y)for(var B=0;B<A;B++)this._glyphs[B].x-=this._textWidth*this.anchor.x,this._glyphs[B].y-=this._textHeight*this.anchor.y;this._maxLineHeight=f*t},E.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},E.prototype.getLocalBounds=function(){return this.validate(),n.prototype.getLocalBounds.call(this)},E.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},e.tint.get=function(){return this._font.tint},e.tint.set=function(e){this._font.tint="number"==typeof e&&0<=e?e:16777215,this.dirty=!0},e.align.get=function(){return this._font.align},e.align.set=function(e){this._font.align=e||"left",this.dirty=!0},e.anchor.get=function(){return this._anchor},e.anchor.set=function(e){"number"==typeof e?this._anchor.set(e):this._anchor.copyFrom(e)},e.font.get=function(){return this._font},e.font.set=function(e){e&&("string"==typeof e?(e=e.split(" "),this._font.name=1===e.length?e[0]:e.slice(1).join(" "),this._font.size=2<=e.length?parseInt(e[0],10):E.fonts[this._font.name].size):(this._font.name=e.name,this._font.size="number"==typeof e.size?e.size:parseInt(e.size,10)),this.dirty=!0)},e.text.get=function(){return this._text},e.text.set=function(e){e=String(null==e?"":e),this._text!==e&&(this._text=e,this.dirty=!0)},e.maxWidth.get=function(){return this._maxWidth},e.maxWidth.set=function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)},e.maxLineHeight.get=function(){return this.validate(),this._maxLineHeight},e.textWidth.get=function(){return this.validate(),this._textWidth},e.letterSpacing.get=function(){return this._letterSpacing},e.letterSpacing.set=function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)},e.textHeight.get=function(){return this.validate(),this._textHeight},E.registerFont=function(e,t){var i={},n=e.getElementsByTagName("info")[0],s=e.getElementsByTagName("common")[0],r=e.getElementsByTagName("page"),o=Ze(r[0].getAttribute("file"),C.RESOLUTION),a={};i.font=n.getAttribute("face"),i.size=parseInt(n.getAttribute("size"),10),i.lineHeight=parseInt(s.getAttribute("lineHeight"),10)/o,i.chars={},t instanceof Ri&&(t=[t]);for(var l=0;l<r.length;l++){var h=r[l].getAttribute("id"),c=r[l].getAttribute("file");a[h]=t instanceof Array?t[l]:t[c]}for(var p=e.getElementsByTagName("char"),u=0;u<p.length;u++){var d=p[u],m=parseInt(d.getAttribute("id"),10),f=d.getAttribute("page")||0,g=new Tt(parseInt(d.getAttribute("x"),10)/o+a[f].frame.x/o,parseInt(d.getAttribute("y"),10)/o+a[f].frame.y/o,parseInt(d.getAttribute("width"),10)/o,parseInt(d.getAttribute("height"),10)/o);i.chars[m]={xOffset:parseInt(d.getAttribute("xoffset"),10)/o,yOffset:parseInt(d.getAttribute("yoffset"),10)/o,xAdvance:parseInt(d.getAttribute("xadvance"),10)/o,kerning:{},texture:new Ri(a[f].baseTexture,g),page:f}}for(var v=e.getElementsByTagName("kerning"),y=0;y<v.length;y++){var b=v[y],S=parseInt(b.getAttribute("first"),10)/o,T=parseInt(b.getAttribute("second"),10)/o,b=parseInt(b.getAttribute("amount"),10)/o;i.chars[T]&&(i.chars[T].kerning[S]=b)}return E.fonts[i.font]=i},Object.defineProperties(E.prototype,e),E}(Rt);Mo.fonts={};function Oo(){}Oo.parse=function(e,t){e.bitmapFont=Mo.registerFont(e.data,t)},Oo.add=function(){_o.setExtensionXhrType("fnt",_o.XHR_RESPONSE_TYPE.DOCUMENT)},Oo.dirname=function(e){var t=e.replace(/\/$/,"").replace(/\/[^\/]*$/,"");return t===e?".":""===t?"/":t},Oo.use=function(t,i){if(t.data&&t.type===_o.TYPE.XML)if(0!==t.data.getElementsByTagName("page").length&&0!==t.data.getElementsByTagName("info").length&&null!==t.data.getElementsByTagName("info")[0].getAttribute("face")){var e=t.isDataUrl?"":Oo.dirname(t.url);t.isDataUrl&&("."===e&&(e=""),this.baseUrl&&e&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(e+="/")),(e=e.replace(this.baseUrl,""))&&"/"!==e.charAt(e.length-1)&&(e+="/");for(var n=t.data.getElementsByTagName("page"),s={},r=function(e){s[e.metadata.pageFile]=e.texture,Object.keys(s).length===n.length&&(Oo.parse(t,s),i())},o=0;o<n.length;++o){var a,l,h=n[o].getAttribute("file"),c=e+h,p=!1;for(a in this.resources){var u=this.resources[a];if(u.url===c){u.metadata.pageFile=h,u.texture?r(u):u.onAfterMiddleware.add(r),p=!0;break}}p||(l={crossOrigin:t.crossOrigin,loadType:_o.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:h},t.metadata.imageMetadata),parentResource:t},this.add(c,l,r))}}else i();else i()};var _t=function(t){function e(e){void 0===e&&(e=1),t.call(this,Bs,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1}),this.alpha=e}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={alpha:{configurable:!0}};return i.alpha.get=function(){return this.uniforms.uAlpha},i.alpha.set=function(e){this.uniforms.uAlpha=e},Object.defineProperties(e.prototype,i),e}(Un),No="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n    \n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n    \n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n    \n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }";var Fo={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Do=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");var Lo=function(o){function e(e,t,i,n,s){var r=function(e,t){for(var i=Math.ceil(e/2),n=No,s="",r=t?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);",o=0;o<e;o++)s+=r.replace("%index%",o).replace("%sampleIndex%",o-(i-1)+".0"),s+="\n";return n=(n=n.replace("%blur%",s)).replace("%size%",e)}(s=s||5,e),s=function(e){for(var t=Fo[e],i=t.length,n=Do,s="",r=0;r<e;r++){var o="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",r),a=r;s+=o=o.replace("%value%",t[a=i<=r?e-r-1:a]),s+="\n"}return n=(n=n.replace("%blur%",s)).replace("%size%",e)}(s);o.call(this,r,s),this.horizontal=e,this.resolution=n||C.RESOLUTION,this._quality=0,this.quality=i||4,this.blur=t||8}o&&(e.__proto__=o);var t={blur:{configurable:!0},quality:{configurable:!0}};return((e.prototype=Object.create(o&&o.prototype)).constructor=e).prototype.apply=function(e,t,i,n){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/t.width):this.uniforms.strength=1/i.height*(i.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,i,n);else{var s=e.getFilterTexture(),r=e.renderer,o=t,a=s;this.state.blend=!1,e.applyFilter(this,o,a,!1);for(var l=1;l<this.passes-1;l++){r.renderTexture.bind(o,o.filterFrame);var h=this.uniforms.uSampler=a,a=o,o=h;r.shader.bind(this),r.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,a,i,n),e.returnFilterTexture(s)}},t.blur.get=function(){return this.strength},t.blur.set=function(e){this.padding=1+2*Math.abs(e),this.strength=e},t.quality.get=function(){return this._quality},t.quality.set=function(e){this._quality=e,this.passes=e},Object.defineProperties(e.prototype,t),e}(Un),At=function(s){function e(e,t,i,n){s.call(this),this.blurXFilter=new Lo(!0,e,t,i,n),this.blurYFilter=new Lo(!1,e,t,i,n),this.resolution=i||C.RESOLUTION,this.quality=t||4,this.blur=e||8,this.repeatEdgePixels=!1}s&&(e.__proto__=s);var t={blur:{configurable:!0},quality:{configurable:!0},blurX:{configurable:!0},blurY:{configurable:!0},blendMode:{configurable:!0},repeatEdgePixels:{configurable:!0}};return((e.prototype=Object.create(s&&s.prototype)).constructor=e).prototype.apply=function(e,t,i,n){var s=Math.abs(this.blurXFilter.strength),r=Math.abs(this.blurYFilter.strength);s&&r?(s=e.getFilterTexture(),this.blurXFilter.apply(e,t,s,!0),this.blurYFilter.apply(e,s,i,n),e.returnFilterTexture(s)):(r?this.blurYFilter:this.blurXFilter).apply(e,t,i,n)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},t.blur.get=function(){return this.blurXFilter.blur},t.blur.set=function(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()},t.quality.get=function(){return this.blurXFilter.quality},t.quality.set=function(e){this.blurXFilter.quality=this.blurYFilter.quality=e},t.blurX.get=function(){return this.blurXFilter.blur},t.blurX.set=function(e){this.blurXFilter.blur=e,this.updatePadding()},t.blurY.get=function(){return this.blurYFilter.blur},t.blurY.set=function(e){this.blurYFilter.blur=e,this.updatePadding()},t.blendMode.get=function(){return this.blurYFilter.blendMode},t.blendMode.set=function(e){this.blurYFilter.blendMode=e},t.repeatEdgePixels.get=function(){return this._repeatEdgePixels},t.repeatEdgePixels.set=function(e){this._repeatEdgePixels=e,this.updatePadding()},Object.defineProperties(e.prototype,t),e}(Un),Wt=function(t){function e(){var e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};t.call(this,Es,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",e),this.alpha=1}t&&(e.__proto__=t);var i={matrix:{configurable:!0},alpha:{configurable:!0}};return((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._loadMatrix=function(e,t){var i=e;(t=void 0===t?!1:t)&&(this._multiply(i,this.uniforms.m,e),i=this._colorMatrix(i)),this.uniforms.m=i},e.prototype._multiply=function(e,t,i){return e[0]=t[0]*i[0]+t[1]*i[5]+t[2]*i[10]+t[3]*i[15],e[1]=t[0]*i[1]+t[1]*i[6]+t[2]*i[11]+t[3]*i[16],e[2]=t[0]*i[2]+t[1]*i[7]+t[2]*i[12]+t[3]*i[17],e[3]=t[0]*i[3]+t[1]*i[8]+t[2]*i[13]+t[3]*i[18],e[4]=t[0]*i[4]+t[1]*i[9]+t[2]*i[14]+t[3]*i[19]+t[4],e[5]=t[5]*i[0]+t[6]*i[5]+t[7]*i[10]+t[8]*i[15],e[6]=t[5]*i[1]+t[6]*i[6]+t[7]*i[11]+t[8]*i[16],e[7]=t[5]*i[2]+t[6]*i[7]+t[7]*i[12]+t[8]*i[17],e[8]=t[5]*i[3]+t[6]*i[8]+t[7]*i[13]+t[8]*i[18],e[9]=t[5]*i[4]+t[6]*i[9]+t[7]*i[14]+t[8]*i[19]+t[9],e[10]=t[10]*i[0]+t[11]*i[5]+t[12]*i[10]+t[13]*i[15],e[11]=t[10]*i[1]+t[11]*i[6]+t[12]*i[11]+t[13]*i[16],e[12]=t[10]*i[2]+t[11]*i[7]+t[12]*i[12]+t[13]*i[17],e[13]=t[10]*i[3]+t[11]*i[8]+t[12]*i[13]+t[13]*i[18],e[14]=t[10]*i[4]+t[11]*i[9]+t[12]*i[14]+t[13]*i[19]+t[14],e[15]=t[15]*i[0]+t[16]*i[5]+t[17]*i[10]+t[18]*i[15],e[16]=t[15]*i[1]+t[16]*i[6]+t[17]*i[11]+t[18]*i[16],e[17]=t[15]*i[2]+t[16]*i[7]+t[17]*i[12]+t[18]*i[17],e[18]=t[15]*i[3]+t[16]*i[8]+t[17]*i[13]+t[18]*i[18],e[19]=t[15]*i[4]+t[16]*i[9]+t[17]*i[14]+t[18]*i[19]+t[19],e},e.prototype._colorMatrix=function(e){e=new Float32Array(e);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(e,t){this._loadMatrix([e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0],t)},e.prototype.greyscale=function(e,t){this._loadMatrix([e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0],t)},e.prototype.blackAndWhite=function(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)},e.prototype.hue=function(e,t){e=(e||0)/180*Math.PI;var i=Math.cos(e),n=Math.sin(e),e=(0,Math.sqrt)(1/3);this._loadMatrix([i+1/3*(1-i),1/3*(1-i)-e*n,1/3*(1-i)+e*n,0,0,1/3*(1-i)+e*n,i+1/3*(1-i),1/3*(1-i)-e*n,0,0,1/3*(1-i)-e*n,1/3*(1-i)+e*n,i+1/3*(1-i),0,0,0,0,0,1,0],t)},e.prototype.contrast=function(e,t){var i=(e||0)+1,e=-.5*(i-1);this._loadMatrix([i,0,0,0,e,0,i,0,0,e,0,0,i,0,e,0,0,0,1,0],t)},e.prototype.saturate=function(e,t){var i=2*(e=void 0===e?0:e)/3+1,e=-.5*(i-1);this._loadMatrix([i,e,e,0,0,e,i,e,0,0,e,e,i,0,0,0,0,0,1,0],t)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(e){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e)},e.prototype.sepia=function(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)},e.prototype.technicolor=function(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)},e.prototype.polaroid=function(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)},e.prototype.toBGR=function(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)},e.prototype.kodachrome=function(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)},e.prototype.browni=function(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)},e.prototype.vintage=function(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)},e.prototype.colorTone=function(e,t,i,n,s){var r=((i=i||16770432)>>16&255)/255,o=(i>>8&255)/255,a=(255&i)/255,l=((n=n||3375104)>>16&255)/255,i=(n>>8&255)/255,n=(255&n)/255;this._loadMatrix([.3,.59,.11,0,0,r,o,a,e=e||.2,0,l,i,n,t=t||.15,0,r-l,o-i,a-n,0,0],s)},e.prototype.night=function(e,t){this._loadMatrix([-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0],t)},e.prototype.predator=function(e,t){this._loadMatrix([11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0],t)},e.prototype.lsd=function(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},i.matrix.get=function(){return this.uniforms.m},i.matrix.set=function(e){this.uniforms.m=e},i.alpha.get=function(){return this.uniforms.uAlpha},i.alpha.set=function(e){this.uniforms.uAlpha=e},Object.defineProperties(e.prototype,i),e}(Un);Wt.prototype.grayscale=Wt.prototype.greyscale;var ko,Ut=function(n){function e(e,t){var i=new rt;e.renderable=!1,n.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=i,this.scale=new it(t=null==t?20:t,t)}n&&(e.__proto__=n);var t={map:{configurable:!0}};return((e.prototype=Object.create(n&&n.prototype)).constructor=e).prototype.apply=function(e,t,i,n){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var s=this.maskSprite.transform.worldTransform,r=Math.sqrt(s.a*s.a+s.b*s.b),o=Math.sqrt(s.c*s.c+s.d*s.d);0!==r&&0!==o&&(this.uniforms.rotation[0]=s.a/r,this.uniforms.rotation[1]=s.b/r,this.uniforms.rotation[2]=s.c/o,this.uniforms.rotation[3]=s.d/o),e.applyFilter(this,t,i,n)},t.map.get=function(){return this.uniforms.mapSampler},t.map.set=function(e){this.uniforms.mapSampler=e},Object.defineProperties(e.prototype,t),e}(Un),$t=((ko=Un)&&(Go.__proto__=ko),(Go.prototype=Object.create(ko&&ko.prototype)).constructor=Go);function Go(){ko.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputPixel;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputPixel;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')}var ri=function(i){function e(e,t){void 0===e&&(e=.5),void 0===t&&(t=Math.random()),i.call(this,Es,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0}),this.noise=e,this.seed=t}i&&(e.__proto__=i),(e.prototype=Object.create(i&&i.prototype)).constructor=e;var t={noise:{configurable:!0},seed:{configurable:!0}};return t.noise.get=function(){return this.uniforms.uNoise},t.noise.set=function(e){this.uniforms.uNoise=e},t.seed.get=function(){return this.uniforms.uSeed},t.seed.set=function(e){this.uniforms.uSeed=e},Object.defineProperties(e.prototype,t),e}(Un),Wo=new rt;Et.prototype._cacheAsBitmap=!1,Et.prototype._cacheData=!1;function Uo(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null}Object.defineProperties(Et.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){var t;this._cacheAsBitmap!==e&&((this._cacheAsBitmap=e)?(this._cacheData||(this._cacheData=new Uo),(t=this._cacheData).originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((t=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea))}}}),Et.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))},Et.prototype._initCachedDisplayObject=function(e){var t,i,n,s,r,o,a;this._cacheData&&this._cacheData.sprite||(t=this.alpha,this.alpha=1,e.batch.flush(),i=this.getLocalBounds().clone(),this.filters&&(o=this.filters[0].padding,i.pad(o)),i.ceil(C.RESOLUTION),n=e.renderTexture.current,s=e.renderTexture.sourceFrame,r=e.projection.transform,a=Ni.create(i.width,i.height),o="cacheAsBitmap_"+ ++Le,this._cacheData.textureCacheId=o,ni.addToCache(a.baseTexture,o),Ri.addToCache(a,o),(o=Wo).tx=-i.x,o.ty=-i.y,this.transform.worldTransform.identity(),this.render=this._cacheData.originalRender,e.render(this,a,!0,o,!0),e.projection.transform=r,e.renderTexture.bind(n,s),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,(a=new Pr(a)).transform.worldTransform=this.transform.worldTransform,a.anchor.x=-(i.x/i.width),a.anchor.y=-(i.y/i.height),a.alpha=t,a._bounds=this._bounds,this._cacheData.sprite=a,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=a.containsPoint.bind(a))},Et.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},Et.prototype._initCachedDisplayObjectCanvas=function(e){var t,i,n,s,r;this._cacheData&&this._cacheData.sprite||(t=this.getLocalBounds(),i=this.alpha,this.alpha=1,n=e.context,t.ceil(C.RESOLUTION),r=Ni.create(t.width,t.height),s="cacheAsBitmap_"+ ++Le,this._cacheData.textureCacheId=s,ni.addToCache(r.baseTexture,s),Ri.addToCache(r,s),this.transform.localTransform.copyTo(s=Wo),s.invert(),s.tx-=t.x,s.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,r,!0,s,!1),e.context=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,(r=new Pr(r)).transform.worldTransform=this.transform.worldTransform,r.anchor.x=-(t.x/t.width),r.anchor.y=-(t.y/t.height),r.alpha=i,r._bounds=this._bounds,this._cacheData.sprite=r,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=r.containsPoint.bind(r))},Et.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._lastBoundsID=this._boundsID},Et.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},Et.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,ni.removeFromCache(this._cacheData.textureCacheId),Ri.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},Et.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)},Et.prototype.name=null,Rt.prototype.getChildByName=function(e){for(var t=0;t<this.children.length;t++)if(this.children[t].name===e)return this.children[t];return null},Et.prototype.getGlobalPosition=function(e,t){return void 0===e&&(e=new it),void 0===t&&(t=!1),this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e};var Vo="5.0.0";function Ho(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}Ho.prototype.update=function(e){!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID||(this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID,e=this.uvBuffer.data,this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++)};var $o=new it,Xo=new Ct,gi=function(s){function i(e,t,i,n){void 0===n&&(n=me.TRIANGLES),s.call(this),(this.geometry=e).refCount++,this.shader=t,this.state=i||Gn.for2d(),this.drawMode=n,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=0,this._transformID=-1,this.tint=16777215,this.blendMode=de.NORMAL,this._roundPixels=C.ROUND_PIXELS,this.batchUvs=null}s&&(i.__proto__=s),(i.prototype=Object.create(s&&s.prototype)).constructor=i;var e={uvBuffer:{configurable:!0},verticesBuffer:{configurable:!0},material:{configurable:!0},blendMode:{configurable:!0},roundPixels:{configurable:!0},tint:{configurable:!0},texture:{configurable:!0}};return e.uvBuffer.get=function(){return this.geometry.buffers[1]},e.verticesBuffer.get=function(){return this.geometry.buffers[0]},e.material.set=function(e){this.shader=e},e.material.get=function(){return this.shader},e.blendMode.set=function(e){this.state.blendMode=e},e.blendMode.get=function(){return this.state.blendMode},e.roundPixels.set=function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},e.roundPixels.get=function(){return this._roundPixels},e.tint.get=function(){return this.shader.tint},e.tint.set=function(e){this.shader.tint=e},e.texture.get=function(){return this.shader.texture},e.texture.set=function(e){this.shader.texture=e},i.prototype._render=function(e){var t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===me.TRIANGLES&&t.length<2*i.BATCHABLE_SIZE?this._renderToBatch(e):this._renderDefault(e)},i.prototype._renderDefault=function(e){var t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.program.uniformData.translationMatrix&&(t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},i.prototype._renderToBatch=function(e){var t=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;t=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[t]),e.plugins[t].render(this)},i.prototype.calculateVertices=function(){var e=this.geometry,t=e.buffers[0].data;if(e.vertexDirtyId!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));for(var i=this.transform.worldTransform,n=i.a,s=i.b,r=i.c,o=i.d,a=i.tx,l=i.ty,h=this.vertexData,c=0;c<h.length/2;c++){var p=t[2*c],u=t[2*c+1];h[2*c]=n*p+r*u+a,h[2*c+1]=s*p+o*u+l}if(this._roundPixels)for(var d=0;d<h.length;d++)h[d]=Math.round(h[d]);this.vertexDirty=e.vertexDirtyId}},i.prototype.calculateUvs=function(){var e=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new Ho(e,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},i.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},i.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,$o);for(var t=this.geometry.getBuffer("aVertexPosition").data,i=Xo.points,n=this.geometry.getIndex().data,s=n.length,r=4===this.drawMode?3:1,o=0;o+2<s;o+=r){var a=2*n[o],l=2*n[o+1],h=2*n[o+2];if(i[0]=t[a],i[1]=t[1+a],i[2]=t[l],i[3]=t[1+l],i[4]=t[h],i[5]=t[1+h],Xo.contains($o.x,$o.y))return!0}return!1},i.prototype.destroy=function(e){s.prototype.destroy.call(this,e),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},Object.defineProperties(i.prototype,e),i}(Rt);gi.BATCHABLE_SIZE=100;var Yo,jo=function(n){function e(e,t){var i={uSampler:e,alpha:1,uTextureMatrix:rt.IDENTITY,uColor:new Float32Array([1,1,1,1])};(t=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},t)).uniforms&&Object.assign(i,t.uniforms),n.call(this,t.program||Fn.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),i),this._colorDirty=!1,this.uvMatrix=new Vn(e),this.batchable=void 0===t.program,this.pluginName=t.pluginName,this.tint=t.tint,this.alpha=t.alpha}n&&(e.__proto__=n),(e.prototype=Object.create(n&&n.prototype)).constructor=e;var t={texture:{configurable:!0},alpha:{configurable:!0},tint:{configurable:!0}};return t.texture.get=function(){return this.uniforms.uSampler},t.texture.set=function(e){this.uniforms.uSampler!==e&&(this.uniforms.uSampler=e,this.uvMatrix.texture=e)},t.alpha.set=function(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)},t.alpha.get=function(){return this._alpha},t.tint.set=function(e){e!==this._tint&&(this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16),this._colorDirty=!0)},t.tint.get=function(){return this._tint},e.prototype.update=function(){var e;this._colorDirty&&(this._colorDirty=!1,e=this.texture.baseTexture,Ne(this._tint,this._alpha,this.uniforms.uColor,e.premultiplyAlpha)),this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},Object.defineProperties(e.prototype,t),e}(kn),zo=function(n){function e(e,t,i){n.call(this);e=new ki(e),t=new ki(t,!0),i=new ki(i,!0,!0);this.addAttribute("aVertexPosition",e,2,!1,ve.FLOAT).addAttribute("aTextureCoord",t,2,!1,ve.FLOAT).addIndex(i),this._updateId=-1}n&&(e.__proto__=n),(e.prototype=Object.create(n&&n.prototype)).constructor=e;var t={vertexDirtyId:{configurable:!0}};return t.vertexDirtyId.get=function(){return this.buffers[0]._updateID},Object.defineProperties(e.prototype,t),e}(Vi),qo=((Yo=zo)&&(Ko.__proto__=Yo),((Ko.prototype=Object.create(Yo&&Yo.prototype)).constructor=Ko).prototype.build=function(){for(var e=this.segWidth*this.segHeight,t=[],i=[],n=[],s=this.segWidth-1,r=this.segHeight-1,o=this.width/s,a=this.height/r,l=0;l<e;l++){var h=l%this.segWidth,c=l/this.segWidth|0;t.push(h*o,c*a),i.push(h/s,c/r)}for(var p=s*r,u=0;u<p;u++){var d=u%s,m=u/s|0,f=m*this.segWidth+d,g=m*this.segWidth+d+1,v=(1+m)*this.segWidth+d,d=(1+m)*this.segWidth+d+1;n.push(f,g,v,g,d,v)}this.buffers[0].data=new Float32Array(t),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(n),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},Ko);function Ko(e,t,i,n){void 0===e&&(e=100),void 0===t&&(t=100),void 0===i&&(i=10),void 0===n&&(n=10),Yo.call(this),this.segWidth=i,this.segHeight=n,this.width=e,this.height=t,this.build()}var Qo,Zo=((Qo=zo)&&(Jo.__proto__=Qo),((Jo.prototype=Object.create(Qo&&Qo.prototype)).constructor=Jo).prototype.build=function(){var e=this.points;if(e){var t=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),n=this.getIndex();if(!(e.length<1)){t.data.length/4!==e.length&&(t.data=new Float32Array(4*e.length),i.data=new Float32Array(4*e.length),n.data=new Uint16Array(6*(e.length-1)));var s=i.data,r=n.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;for(var o=e.length,a=0;a<o;a++){var l=4*a,h=a/(o-1);s[l]=h,s[1+l]=0,s[2+l]=h,s[3+l]=1}for(var c=0,p=0;p<o-1;p++){var u=2*p;r[c++]=u,r[c++]=1+u,r[c++]=2+u,r[c++]=2+u,r[c++]=1+u,r[c++]=3+u}i.update(),n.update(),this.updateVertices()}}},Jo.prototype.updateVertices=function(){var e=this.points;if(!(e.length<1)){for(var t=e[0],i=this.buffers[0].data,n=e.length,s=0;s<n;s++){var r=e[s],o=4*s,a=-((c=s<e.length-1?e[s+1]:r).x-t.x),l=c.y-t.y,h=Math.sqrt(l*l+a*a),c=this.width/2;l/=h,a/=h,l*=c,a*=c,i[o]=r.x+l,i[1+o]=r.y+a,i[2+o]=r.x-l,i[3+o]=r.y-a,t=r}this.buffers[0].update()}},Jo.prototype.update=function(){this.updateVertices()},Jo);function Jo(e,t){void 0===e&&(e=200),Qo.call(this,new Float32Array(4*t.length),new Float32Array(4*t.length),new Uint16Array(6*(t.length-1))),this.points=t,this.width=e,this.build()}var ea,Yt=((ea=gi)&&(ta.__proto__=ea),((ta.prototype=Object.create(ea&&ea.prototype)).constructor=ta).prototype._render=function(e){!this.autoUpdate&&this.geometry.width===this.shader.texture.height||(this.geometry.width=this.shader.texture.height,this.geometry.update()),ea.prototype._render.call(this,e)},ta);function ta(e,t){t=new Zo(e.height,t),e=new jo(e);ea.call(this,t,e),this.autoUpdate=!0}i=function(n){function e(e,t,i){t=new qo(e.width,e.height,t,i),i=new jo(Ri.WHITE);n.call(this,t,i),this.texture=e}n&&(e.__proto__=n);var t={texture:{configurable:!0}};return((e.prototype=Object.create(n&&n.prototype)).constructor=e).prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this.geometry.width=this.shader.texture.width,this.geometry.height=this.shader.texture.height,this.geometry.build()},t.texture.set=function(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))},t.texture.get=function(){return this.shader.texture},e.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),n.prototype._render.call(this,e)},Object.defineProperties(e.prototype,t),e}(gi),s=function(r){function e(e,t,i,n,s){void 0===e&&(e=Ri.EMPTY);n=new zo(t,i,n);n.getBuffer("aVertexPosition").static=!1;e=new jo(e);r.call(this,n,e,null,s),this.autoUpdate=!0}r&&(e.__proto__=r),(e.prototype=Object.create(r&&r.prototype)).constructor=e;var t={vertices:{configurable:!0}};return t.vertices.get=function(){return this.geometry.getBuffer("aVertexPosition").data},t.vertices.set=function(e){this.geometry.getBuffer("aVertexPosition").data=e},e.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),r.prototype._render.call(this,e)},Object.defineProperties(e.prototype,t),e}(gi),n=function(r){function e(e,t,i,n,s){r.call(this,Ri.WHITE,4,4),this._origWidth=e.orig.width,this._origHeight=e.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=void 0!==t?t:10,this._rightWidth=void 0!==n?n:10,this._topHeight=void 0!==i?i:10,this._bottomHeight=void 0!==s?s:10,this.texture=e}r&&(e.__proto__=r);var t={vertices:{configurable:!0},width:{configurable:!0},height:{configurable:!0},leftWidth:{configurable:!0},rightWidth:{configurable:!0},topHeight:{configurable:!0},bottomHeight:{configurable:!0}};return((e.prototype=Object.create(r&&r.prototype)).constructor=e).prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},t.vertices.get=function(){return this.geometry.getBuffer("aVertexPosition").data},t.vertices.set=function(e){this.geometry.getBuffer("aVertexPosition").data=e},e.prototype.updateHorizontalVertices=function(){var e=this.vertices,t=this._topHeight+this._bottomHeight,t=this._height>t?1:this._height/t;e[9]=e[11]=e[13]=e[15]=this._topHeight*t,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*t,e[25]=e[27]=e[29]=e[31]=this._height},e.prototype.updateVerticalVertices=function(){var e=this.vertices,t=this._leftWidth+this._rightWidth,t=this._width>t?1:this._width/t;e[2]=e[10]=e[18]=e[26]=this._leftWidth*t,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*t,e[6]=e[14]=e[22]=e[30]=this._width},t.width.get=function(){return this._width},t.width.set=function(e){this._width=e,this._refresh()},t.height.get=function(){return this._height},t.height.set=function(e){this._height=e,this._refresh()},t.leftWidth.get=function(){return this._leftWidth},t.leftWidth.set=function(e){this._leftWidth=e,this._refresh()},t.rightWidth.get=function(){return this._rightWidth},t.rightWidth.set=function(e){this._rightWidth=e,this._refresh()},t.topHeight.get=function(){return this._topHeight},t.topHeight.set=function(e){this._topHeight=e,this._refresh()},t.bottomHeight.get=function(){return this._bottomHeight},t.bottomHeight.set=function(e){this._bottomHeight=e,this._refresh()},e.prototype._refresh=function(){var e=this.texture,t=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;var i=1/this._origWidth,e=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=i*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-i*this._rightWidth,t[9]=t[11]=t[13]=t[15]=e*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-e*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},Object.defineProperties(e.prototype,t),e}(i),q=function(i){function n(e,t){i.call(this,e[0]instanceof Ri?e[0]:e[0].texture),this._textures=null,this._durations=null,this.textures=e,this._autoUpdate=!1!==t,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this.playing=!1}i&&(n.__proto__=i);var e={totalFrames:{configurable:!0},textures:{configurable:!0},currentFrame:{configurable:!0}};return((n.prototype=Object.create(i&&i.prototype)).constructor=n).prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&Gt.shared.remove(this.update,this))},n.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&Gt.shared.add(this.update,this,kt.HIGH))},n.prototype.gotoAndStop=function(e){this.stop();var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture()},n.prototype.gotoAndPlay=function(e){var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture(),this.play()},n.prototype.update=function(e){var t=this.animationSpeed*e,i=this.currentFrame;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=t/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var s=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(0<this.animationSpeed&&this.currentFrame<i||this.animationSpeed<0&&this.currentFrame>i)&&this.onLoop(),this.updateTexture())},n.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame)},n.prototype.destroy=function(e){this.stop(),i.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},n.fromFrames=function(e){for(var t=[],i=0;i<e.length;++i)t.push(Ri.from(e[i]));return new n(t)},n.fromImages=function(e){for(var t=[],i=0;i<e.length;++i)t.push(Ri.from(e[i]));return new n(t)},e.totalFrames.get=function(){return this._textures.length},e.textures.get=function(){return this._textures},e.textures.set=function(e){if(e[0]instanceof Ri)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this.gotoAndStop(0),this.updateTexture()},e.currentFrame.get=function(){var e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e},Object.defineProperties(n.prototype,e),n}(Pr);Ps.registerPlugin("accessibility",Ot),Ps.registerPlugin("extract",Hs),Ps.registerPlugin("interaction",Mt),Ps.registerPlugin("particle",$n),Ps.registerPlugin("prepare",yi),Ps.registerPlugin("batch",st),Ps.registerPlugin("tilingSprite",St),bo.registerPlugin(Oo),bo.registerPlugin(Co),Kr.registerPlugin(Vt),Kr.registerPlugin(So);ri={AlphaFilter:_t,BlurFilter:At,BlurFilterPass:Lo,ColorMatrixFilter:Wt,DisplacementFilter:Ut,FXAAFilter:$t,NoiseFilter:ri};return e.AbstractBatchRenderer=Ns,e.AbstractRenderer=ee,e.AnimatedSprite=q,e.AppLoaderPlugin=So,e.Application=Kr,e.Attribute=Li,e.BLEND_MODES=de,e.BaseRenderTexture=xi,e.BaseTexture=ni,e.BatchDrawCall=Rs,e.BatchGeometry=ks,e.BatchPluginFactory=Ws,e.BatchRenderer=st,e.BatchShaderGenerator=Ds,e.BitmapFontLoader=Oo,e.BitmapText=Mo,e.Bounds=Bt,e.Buffer=ki,e.Circle=Pt,e.Container=Rt,e.CubeTexture=z,e.DEG_TO_RAD=lt,e.DRAW_MODES=me,e.DisplayObject=Et,e.ENV=pe,e.Ellipse=It,e.FORMATS=fe,e.FillStyle=Qs,e.Filter=Un,e.Framebuffer=Ii,e.GC_MODES=Te,e.GLProgram=as,e.GLTexture=ni,e.GRAPHICS_CURVES=Zs,e.Geometry=Vi,e.Graphics=Tr,e.GraphicsData=Js,e.GraphicsGeometry=hr,e.GroupD8=bt,e.LineStyle=pr,e.Loader=bo,e.LoaderResource=_o,e.MIPMAP_MODES=Se,e.Matrix=rt,e.Mesh=gi,e.MeshBatchUvs=Ho,e.MeshGeometry=zo,e.MeshMaterial=jo,e.NineSlicePlane=n,e.ObjectRenderer=rn,e.ObservablePoint=nt,e.PI_2=ot,e.PRECISION=_e,e.ParticleContainer=Wn,e.ParticleRenderer=$n,e.PlaneGeometry=qo,e.Point=it,e.Polygon=Ct,e.Program=Fn,e.Quad=ji,e.QuadUv=Ki,e.RAD_TO_DEG=at,e.RENDERER_TYPE=ue,e.Rectangle=Tt,e.RenderTexture=Ni,e.RenderTexturePool=Di,e.Renderer=Ps,e.RopeGeometry=Zo,e.RoundedRectangle=xt,e.Runner=Nt,e.SCALE_MODES=ye,e.SHAPES=ht,e.Shader=kn,e.SimpleMesh=s,e.SimplePlane=i,e.SimpleRope=Yt,e.Sprite=Pr,e.SpriteMaskFilter=Yn,e.Spritesheet=Io,e.SpritesheetLoader=Co,e.State=Gn,e.System=Si,e.TARGETS=ge,e.TEXT_GRADIENT=Ir,e.TYPES=ve,e.Text=Nr,e.TextMetrics=Mr,e.TextStyle=Br,e.Texture=Ri,e.TextureLoader=yo,e.TextureMatrix=Vn,e.TextureUvs=Ei,e.Ticker=Gt,e.TickerPlugin=Vt,e.TilingSprite=ze,e.TilingSpriteRenderer=St,e.Transform=yt,e.UPDATE_PRIORITY=kt,e.UniformGroup=Zi,e.VERSION="5.1.3",e.ViewableBuffer=Ms,e.WRAP_MODES=be,e.accessibility=Ft,e.autoDetectRenderer=Cs,e.checkMaxIfStatementsInShader=Nn,e.defaultFilterVertex=Es,e.defaultVertex=Bs,e.extract=ct,e.filters=ri,e.interaction=Dt,e.isMobile=m,e.prepare=mi,e.resources=Ti,e.settings=C,e.systems=v,e.useDeprecated=function(){var t=this;Object.defineProperties(t,{SVG_SIZE:{get:function(){return et(Vo,"PIXI.utils.SVG_SIZE property has moved to PIXI.resources.SVGResource.SVG_SIZE"),t.SVGResource.SVG_SIZE}},TransformStatic:{get:function(){return et(Vo,"PIXI.TransformStatic class has been removed, use PIXI.Transform"),t.Transform}},TransformBase:{get:function(){return et(Vo,"PIXI.TransformBase class has been removed, use PIXI.Transform"),t.Transform}},TRANSFORM_MODE:{get:function(){return et(Vo,"PIXI.TRANSFORM_MODE property has been removed"),{STATIC:0,DYNAMIC:1}}},WebGLRenderer:{get:function(){return et(Vo,"PIXI.WebGLRenderer class has moved to PIXI.Renderer"),t.Renderer}},CanvasRenderTarget:{get:function(){return et(Vo,"PIXI.CanvasRenderTarget class has moved to PIXI.utils.CanvasRenderTarget"),t.utils.CanvasRenderTarget}},loader:{get:function(){return et(Vo,"PIXI.loader instance has moved to PIXI.Loader.shared"),t.Loader.shared}},FilterManager:{get:function(){return et(Vo,"PIXI.FilterManager class has moved to PIXI.systems.FilterSystem"),t.systems.FilterSystem}}}),t.extras={},Object.defineProperties(t.extras,{TilingSprite:{get:function(){return et(Vo,"PIXI.extras.TilingSprite class has moved to PIXI.TilingSprite"),t.TilingSprite}},TilingSpriteRenderer:{get:function(){return et(Vo,"PIXI.extras.TilingSpriteRenderer class has moved to PIXI.TilingSpriteRenderer"),t.TilingSpriteRenderer}},AnimatedSprite:{get:function(){return et(Vo,"PIXI.extras.AnimatedSprite class has moved to PIXI.AnimatedSprite"),t.AnimatedSprite}},BitmapText:{get:function(){return et(Vo,"PIXI.extras.BitmapText class has moved to PIXI.BitmapText"),t.BitmapText}}}),Object.defineProperties(t.utils,{getSvgSize:{get:function(){return et(Vo,"PIXI.utils.getSvgSize function has moved to PIXI.resources.SVGResource.getSize"),t.SVGResource.getSize}}}),t.mesh={},Object.defineProperties(t.mesh,{Mesh:{get:function(){return et(Vo,"PIXI.mesh.Mesh class has moved to PIXI.SimpleMesh"),t.SimpleMesh}},NineSlicePlane:{get:function(){return et(Vo,"PIXI.mesh.NineSlicePlane class has moved to PIXI.NineSlicePlane"),t.NineSlicePlane}},Plane:{get:function(){return et(Vo,"PIXI.mesh.Plane class has moved to PIXI.SimplePlane"),t.SimplePlane}},Rope:{get:function(){return et(Vo,"PIXI.mesh.Rope class has moved to PIXI.SimpleRope"),t.SimpleRope}},RawMesh:{get:function(){return et(Vo,"PIXI.mesh.RawMesh class has moved to PIXI.Mesh"),t.Mesh}},CanvasMeshRenderer:{get:function(){return et(Vo,"PIXI.mesh.CanvasMeshRenderer class has moved to PIXI.CanvasMeshRenderer"),t.CanvasMeshRenderer}},MeshRenderer:{get:function(){return et(Vo,"PIXI.mesh.MeshRenderer class has moved to PIXI.MeshRenderer"),t.MeshRenderer}}}),t.particles={},Object.defineProperties(t.particles,{ParticleContainer:{get:function(){return et(Vo,"PIXI.particles.ParticleContainer class has moved to PIXI.ParticleContainer"),t.ParticleContainer}},ParticleRenderer:{get:function(){return et(Vo,"PIXI.particles.ParticleRenderer class has moved to PIXI.ParticleRenderer"),t.ParticleRenderer}}}),t.ticker={},Object.defineProperties(t.ticker,{Ticker:{get:function(){return et(Vo,"PIXI.ticker.Ticker class has moved to PIXI.Ticker"),t.Ticker}},shared:{get:function(){return et(Vo,"PIXI.ticker.shared instance has moved to PIXI.Ticker.shared"),t.Ticker.shared}}}),t.loaders={},Object.defineProperties(t.loaders,{Loader:{get:function(){return et(Vo,"PIXI.loaders.Loader class has moved to PIXI.Loader"),t.Loader}},Resource:{get:function(){return et(Vo,"PIXI.loaders.Resource class has moved to PIXI.LoaderResource"),t.LoaderResource}},bitmapFontParser:{get:function(){return et(Vo,"PIXI.loaders.bitmapFontParser function has moved to PIXI.BitmapFontLoader.use"),t.BitmapFontLoader.use}},parseBitmapFontData:{get:function(){return et(Vo,"PIXI.loaders.parseBitmapFontData function has moved to PIXI.BitmapFontLoader.parse"),t.BitmapFontLoader.parse}},spritesheetParser:{get:function(){return et(Vo,"PIXI.loaders.spritesheetParser function has moved to PIXI.SpritesheetLoader.use"),t.SpritesheetLoader.use}},getResourcePath:{get:function(){return et(Vo,"PIXI.loaders.getResourcePath property has moved to PIXI.SpritesheetLoader.getResourcePath"),t.SpritesheetLoader.getResourcePath}}}),t.Loader.addPixiMiddleware=function(e){return et(Vo,"PIXI.loaders.Loader.addPixiMiddleware function is deprecated, use PIXI.loaders.Loader.registerPlugin"),t.loaders.Loader.registerPlugin({use:e()})},Object.defineProperty(t.extract,"WebGLExtract",{get:function(){return et(Vo,"PIXI.extract.WebGLExtract method has moved to PIXI.extract.Extract"),t.extract.Extract}}),Object.defineProperty(t.prepare,"WebGLPrepare",{get:function(){return et(Vo,"PIXI.prepare.WebGLPrepare class has moved to PIXI.prepare.Prepare"),t.prepare.Prepare}}),t.Container.prototype._renderWebGL=function(e){et(Vo,"PIXI.Container._renderWebGL method has moved to PIXI.Container._render"),this._render(e)},t.Container.prototype.renderWebGL=function(e){et(Vo,"PIXI.Container.renderWebGL method has moved to PIXI.Container.render"),this.render(e)},t.DisplayObject.prototype.renderWebGL=function(e){et(Vo,"PIXI.DisplayObject.renderWebGL method has moved to PIXI.DisplayObject.render"),this.render(e)},t.Container.prototype.renderAdvancedWebGL=function(e){et(Vo,"PIXI.Container.renderAdvancedWebGL method has moved to PIXI.Container.renderAdvanced"),this.renderAdvanced(e)},Object.defineProperties(t.settings,{TRANSFORM_MODE:{get:function(){return et(Vo,"PIXI.settings.TRANSFORM_MODE property has been removed"),0},set:function(){et(Vo,"PIXI.settings.TRANSFORM_MODE property has been removed")}}});var s=t.BaseTexture;s.prototype.loadSource=function(e){et(Vo,"PIXI.BaseTexture.loadSource method has been deprecated");e=t.resources.autoDetectResource(e);e.internal=!0,this.setResource(e),this.update()},Object.defineProperties(s.prototype,{hasLoaded:{get:function(){return et(Vo,"PIXI.BaseTexture.hasLoaded property has been removed, use PIXI.BaseTexture.valid"),this.valid}},imageUrl:{get:function(){return et(Vo,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),this.resource&&this.resource.url},set:function(e){et(Vo,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),this.resource&&(this.resource.url=e)}},source:{get:function(){return et(Vo,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source`"),this.resource&&this.resource.source},set:function(e){et(Vo,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source` if you want to set HTMLCanvasElement. Otherwise, create new BaseTexture."),this.resource&&(this.resource.source=e)}}}),s.fromImage=function(e,t,i,n){return et(Vo,"PIXI.BaseTexture.fromImage method has been replaced with PIXI.BaseTexture.from"),s.from(e,{scaleMode:i,resourceOptions:{scale:n,crossorigin:t}})},s.fromCanvas=function(e,t){return et(Vo,"PIXI.BaseTexture.fromCanvas method has been replaced with PIXI.BaseTexture.from"),s.from(e,{scaleMode:t})},s.fromSVG=function(e,t,i,n){return et(Vo,"PIXI.BaseTexture.fromSVG method has been replaced with PIXI.BaseTexture.from"),s.from(e,{scaleMode:i,resourceOptions:{scale:n,crossorigin:t}})},t.Point.prototype.copy=function(e){return et(Vo,"PIXI.Point.copy method has been replaced with PIXI.Point.copyFrom"),this.copyFrom(e)},t.ObservablePoint.prototype.copy=function(e){return et(Vo,"PIXI.ObservablePoint.copy method has been replaced with PIXI.ObservablePoint.copyFrom"),this.copyFrom(e)},t.Rectangle.prototype.copy=function(e){return et(Vo,"PIXI.Rectangle.copy method has been replaced with PIXI.Rectangle.copyFrom"),this.copyFrom(e)},t.Matrix.prototype.copy=function(e){return et(Vo,"PIXI.Matrix.copy method has been replaced with PIXI.Matrix.copyTo"),this.copyTo(e)},t.systems.StateSystem.prototype.setState=function(e){return et("v5.1.0","StateSystem.setState has been renamed to StateSystem.set"),this.set(e)},Object.assign(t.systems.FilterSystem.prototype,{getRenderTarget:function(e,t){return et(Vo,"PIXI.FilterManager.getRenderTarget method has been replaced with PIXI.systems.FilterSystem#getFilterTexture"),this.getFilterTexture(t)},returnRenderTarget:function(e){et(Vo,"PIXI.FilterManager.returnRenderTarget method has been replaced with PIXI.systems.FilterSystem.returnFilterTexture"),this.returnFilterTexture(e)},calculateScreenSpaceMatrix:function(e){et(Vo,"PIXI.systems.FilterSystem.calculateScreenSpaceMatrix method is removed, use `(vTextureCoord * inputSize.xy) + outputFrame.xy` instead");var t=e.identity(),i=this.activeState,e=i.sourceFrame,i=i.destinationFrame;return t.translate(e.x/i.width,e.y/i.height),t.scale(i.width,i.height),t},calculateNormalizedScreenSpaceMatrix:function(e){et(Vo,"PIXI.systems.FilterManager.calculateNormalizedScreenSpaceMatrix method is removed, use `((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw` instead.");var t=this.activeState,i=t.sourceFrame,n=t.destinationFrame,t=e.identity();t.translate(i.x/n.width,i.y/n.height);e=n.width/i.width,i=n.height/i.height;return t.scale(e,i),t}}),Object.defineProperties(t.RenderTexture.prototype,{sourceFrame:{get:function(){return et(Vo,"PIXI.RenderTexture.sourceFrame property has been removed"),this.filterFrame}},size:{get:function(){return et(Vo,"PIXI.RenderTexture.size property has been removed"),this._frame}}});var r,e=((r=t.filters.BlurFilterPass)&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i);function i(e,t,i,n){et(Vo,"PIXI.filters.BlurXFilter class is deprecated, use PIXI.filters.BlurFilterPass"),r.call(this,!0,e,t,i,n)}var o,n=((o=t.filters.BlurFilterPass)&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a);function a(e,t,i,n){et(Vo,"PIXI.filters.BlurYFilter class is deprecated, use PIXI.filters.BlurFilterPass"),o.call(this,!1,e,t,i,n)}Object.assign(t.filters,{BlurXFilter:e,BlurYFilter:n});var l=t.Sprite,h=t.Texture;function c(e,t,i,n){return et(Vo,"PIXI.Sprite."+e+" method is deprecated, use PIXI.Sprite.from"),l.from(t,{resourceOptions:{scale:n,crossorigin:i}})}function p(e,t,i,n){return et(Vo,"PIXI.Texture."+e+" method is deprecated, use PIXI.Texture.from"),h.from(t,{resourceOptions:{scale:n,crossorigin:i}})}(n=t.Graphics).prototype.generateCanvasTexture||(n.prototype.generateCanvasTexture=function(){et(Vo,'PIXI.Graphics.generateCanvasTexture method is only available in "pixi.js-legacy"')}),Object.defineProperty(t.Graphics.prototype,"graphicsData",{get:function(){return et(Vo,"PIXI.Graphics.graphicsData property is deprecated, use PIXI.Graphics.geometry.graphicsData"),this.geometry.graphicsData}}),l.fromImage=c.bind(null,"fromImage"),l.fromSVG=c.bind(null,"fromSVG"),l.fromCanvas=c.bind(null,"fromCanvas"),l.fromVideo=c.bind(null,"fromVideo"),l.fromFrame=c.bind(null,"fromFrame"),h.fromImage=p.bind(null,"fromImage"),h.fromSVG=p.bind(null,"fromSVG"),h.fromCanvas=p.bind(null,"fromCanvas"),h.fromVideo=p.bind(null,"fromVideo"),h.fromFrame=p.bind(null,"fromFrame"),Object.defineProperty(t.AbstractRenderer.prototype,"autoResize",{get:function(){return et(Vo,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity},set:function(e){et(Vo,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity=e}}),Object.defineProperty(t.Renderer.prototype,"textureManager",{get:function(){return et(Vo,"PIXI.Renderer.textureManager property is deprecated, use PIXI.Renderer.texture"),this.texture}}),t.utils.mixins={mixin:function(){et(Vo,"PIXI.utils.mixins.mixin function is no longer available")},delayMixin:function(){et(Vo,"PIXI.utils.mixins.delayMixin function is no longer available")},performMixins:function(){et(Vo,"PIXI.utils.mixins.performMixins function is no longer available")}}},e.utils=tt,e}({});PIXI.useDeprecated(),Array.prototype.shuffle||Object.defineProperty(Array.prototype,"shuffle",{enumerable:!1,writable:!1,value:function(){for(var e,t,i=this.length;i;e=Math.floor(Math.random()*i),t=this[--i],this[i]=this[e],this[e]=t);return this}}),Array.prototype.random||Object.defineProperty(Array.prototype,"random",{enumerable:!1,writable:!1,value:function(){return this[Math.floor(Math.random()*this.length)]}}),function(){"use strict";var e="undefined"!=typeof window?window:GLOBAL,t={};if("undefined"!=typeof module&&module.exports)void 0===PIXI&&require("pixi.js"),module.exports=t;else if(void 0===PIXI)throw"pixi-particles requires pixi.js to be loaded first";e.PIXI.particles=e.PIXI.particles||t}(),function(e){"use strict";var t=e.BLEND_MODES||e.blendModes,i=e.Texture,n={},s=n.DEG_TO_RADS=Math.PI/180;n.useAPI3=!1;var r=e.VERSION;r&&3<=parseInt(r.substring(0,r.indexOf(".")))&&(n.useAPI3=!0);r=n.EMPTY_TEXTURE=null;n.useAPI3?(r=n.EMPTY_TEXTURE=i.EMPTY).on=r.destroy=r.once=r.emit=function(){}:((i=document.createElement("canvas")).width=i.height=1,(r=n.EMPTY_TEXTURE=e.Texture.fromCanvas(i)).baseTexture.hasLoaded=!1,r.on=r.destroy=r.once=r.emit=function(){}),n.rotatePoint=function(e,t){var i,n;e&&(e*=s,i=Math.sin(e),n=Math.cos(e),e=t.x*n-t.y*i,n=t.x*i+t.y*n,t.x=e,t.y=n)},n.combineRGBComponents=function(e,t,i){return e<<16|t<<8|i},n.normalize=function(e){var t=1/n.length(e);e.x*=t,e.y*=t},n.scaleBy=function(e,t){e.x*=t,e.y*=t},n.length=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},n.hexToRGB=function(e,t){var i;return t?t.length=0:t=[],"#"==e.charAt(0)?e=e.substr(1):0===e.indexOf("0x")&&(e=e.substr(2)),8==e.length&&(i=e.substr(0,2),e=e.substr(2)),t.push(parseInt(e.substr(0,2),16)),t.push(parseInt(e.substr(2,2),16)),t.push(parseInt(e.substr(4,2),16)),i&&t.push(parseInt(i,16)),t},n.generateEase=function(i){var n=i.length,s=1/n;return function(e){var t=n*e|0,e=(e-t*s)*n,t=i[t]||i[n-1];return t.s+e*(2*(1-e)*(t.cp-t.s)+e*(t.e-t.s))}},n.getBlendMode=function(e){if(!e)return t.NORMAL;for(e=e.toUpperCase();0<=e.indexOf(" ");)e=e.replace(" ","_");return t[e]||t.NORMAL},e.particles.ParticleUtils=n}(PIXI),function(i){"use strict";function e(e){n?t.call(this):t.call(this,r.EMPTY_TEXTURE),this.emitter=e,this.anchor.x=this.anchor.y=.5,this.velocity=new i.Point,this.maxLife=0,this.age=0,this.ease=null,this.extraData=null,this.startAlpha=0,this.endAlpha=0,this.startSpeed=0,this.endSpeed=0,this.acceleration=new i.Point,this.startScale=0,this.endScale=0,this.startColor=null,this._sR=0,this._sG=0,this._sB=0,this.endColor=null,this._eR=0,this._eG=0,this._eB=0,this._doAlpha=!1,this._doScale=!1,this._doSpeed=!1,this._doAcceleration=!1,this._doColor=!1,this._doNormalMovement=!1,this._oneOverLife=0,this.next=null,this.prev=null,this.init=this.init,this.Particle_init=this.Particle_init,this.update=this.update,this.Particle_update=this.Particle_update,this.applyArt=this.applyArt,this.kill=this.kill}var r=i.particles.ParticleUtils,t=i.Sprite,n=r.useAPI3,s=e.prototype=Object.create(t.prototype);s.init=s.Particle_init=function(){this.age=0,this.velocity.x=this.startSpeed,this.velocity.y=0,r.rotatePoint(this.rotation,this.velocity),this.noRotation?this.rotation=0:this.rotation*=r.DEG_TO_RADS,this.rotationSpeed*=r.DEG_TO_RADS,this.alpha=this.startAlpha,this.scale.x=this.scale.y=this.startScale,this.startColor&&(this._sR=this.startColor[0],this._sG=this.startColor[1],this._sB=this.startColor[2],this.endColor&&(this._eR=this.endColor[0],this._eG=this.endColor[1],this._eB=this.endColor[2])),this._doAlpha=this.startAlpha!=this.endAlpha,this._doSpeed=this.startSpeed!=this.endSpeed,this._doScale=this.startScale!=this.endScale,this._doColor=!!this.endColor,this._doAcceleration=0!==this.acceleration.x||0!==this.acceleration.y,this._doNormalMovement=this._doSpeed||0!==this.startSpeed||this._doAcceleration,this._oneOverLife=1/this.maxLife,this.tint=r.combineRGBComponents(this._sR,this._sG,this._sB),this.visible=!0},s.applyArt=function(e){n?this.texture=e||r.EMPTY_TEXTURE:this.setTexture(e||r.EMPTY_TEXTURE)},s.update=s.Particle_update=function(e){if(this.age+=e,this.age>=this.maxLife)return this.kill(),-1;var t,i,n,s=this.age*this._oneOverLife;return this.ease&&(s=4==this.ease.length?this.ease(s,0,1,1):this.ease(s)),this._doAlpha&&(this.alpha=(this.endAlpha-this.startAlpha)*s+this.startAlpha),this._doScale&&(i=(this.endScale-this.startScale)*s+this.startScale,this.scale.x=this.scale.y=i),this._doNormalMovement&&(this._doSpeed?(n=(this.endSpeed-this.startSpeed)*s+this.startSpeed,r.normalize(this.velocity),r.scaleBy(this.velocity,n)):this._doAcceleration&&(this.velocity.x+=this.acceleration.x*e,this.velocity.y+=this.acceleration.y*e),this.position.x+=this.velocity.x*e,this.position.y+=this.velocity.y*e),this._doColor&&(t=(this._eR-this._sR)*s+this._sR,i=(this._eG-this._sG)*s+this._sG,n=(this._eB-this._sB)*s+this._sB,this.tint=r.combineRGBComponents(t,i,n)),0!==this.rotationSpeed?this.rotation+=this.rotationSpeed*e:this.acceleration&&!this.noRotation&&(this.rotation=Math.atan2(this.velocity.y,this.velocity.x)),s},s.kill=function(){this.emitter.recycle(this)},s.Sprite_Destroy=t.prototype.destroy,s.destroy=function(){this.parent&&this.parent.removeChild(this),this.Sprite_Destroy&&this.Sprite_Destroy(),this.emitter=this.velocity=this.startColor=this.endColor=this.ease=this.next=this.prev=null},e.parseArt=function(e){for(var t=e.length;0<=t;--t)"string"==typeof e[t]&&(e[t]=i.Texture.fromImage(e[t]));for(1,t=e.length-1;0<t;--t)if(e[t].baseTexture!=e[t-1].baseTexture){window.console&&console.warn("PixiParticles: using particle textures from different images may hinder performance in WebGL");break}return e},e.parseData=function(e){return e},i.particles.Particle=e}(PIXI),function(r){"use strict";function e(e,t,i){this._particleConstructor=n,this.particleImages=null,this.startAlpha=1,this.endAlpha=1,this.startSpeed=0,this.endSpeed=0,this.acceleration=null,this.startScale=1,this.endScale=1,this.minimumScaleMultiplier=1,this.startColor=null,this.endColor=null,this.minLifetime=0,this.maxLifetime=0,this.minStartRotation=0,this.maxStartRotation=0,this.noRotation=!1,this.minRotationSpeed=0,this.maxRotationSpeed=0,this.particleBlendMode=0,this.customEase=null,this.extraData=null,this._frequency=1,this.maxParticles=1e3,this.emitterLifetime=-1,this.spawnPos=null,this.spawnType=null,this._spawnFunc=null,this.spawnRect=null,this.spawnCircle=null,this.particlesPerWave=1,this.particleSpacing=0,this.angleStart=0,this.rotation=0,this.ownerPos=null,this._prevEmitterPos=null,this._prevPosIsValid=!1,this._posChanged=!1,this._parentIsPC=!1,this._parent=null,this.addAtBack=!1,this.particleCount=0,this._emit=!1,this._spawnTimer=0,this._emitterLife=-1,this._activeParticlesFirst=null,this._activeParticlesLast=null,this._poolFirst=null,this._origConfig=null,this._origArt=null,this.parent=e,t&&i&&this.init(t,i),this.recycle=this.recycle,this.update=this.update,this.rotate=this.rotate,this.updateSpawnPos=this.updateSpawnPos,this.updateOwnerPos=this.updateOwnerPos}var o=r.particles.ParticleUtils,n=r.particles.Particle,i=r.particles.ParticleContainer||r.ParticleContainer,t=e.prototype={},a=new r.Point;Object.defineProperty(t,"frequency",{get:function(){return this._frequency},set:function(e){this._frequency="number"==typeof e&&0<e?e:1}}),Object.defineProperty(t,"particleConstructor",{get:function(){return this._particleConstructor},set:function(e){if(e!=this._particleConstructor){this._particleConstructor=e,this.cleanup();for(var t=this._poolFirst;t;t=t.next)t.destroy();this._poolFirst=null,this._origConfig&&this._origArt&&this.init(this._origArt,this._origConfig)}}}),Object.defineProperty(t,"parent",{get:function(){return this._parent},set:function(e){if(this._parentIsPC)for(var t=this._poolFirst;t;t=t.next)t.parent&&t.parent.removeChild(t);this.cleanup(),this._parent=e,this._parentIsPC=i&&e&&e instanceof i}}),t.init=function(e,t){if(e&&t){this.cleanup(),this._origConfig=t,this._origArt=e,e=Array.isArray(e)?e.slice():[e];var i=this._particleConstructor;this.particleImages=i.parseArt?i.parseArt(e):e,t.alpha?(this.startAlpha=t.alpha.start,this.endAlpha=t.alpha.end):this.startAlpha=this.endAlpha=1,t.speed?(this.startSpeed=t.speed.start,this.endSpeed=t.speed.end):this.startSpeed=this.endSpeed=0;var n,e=t.acceleration;switch(e&&(e.x||e.y)?(this.endSpeed=this.startSpeed,this.acceleration=new r.Point(e.x,e.y)):this.acceleration=new r.Point,t.scale?(this.startScale=t.scale.start,this.endScale=t.scale.end,this.minimumScaleMultiplier=t.scale.minimumScaleMultiplier||1):this.startScale=this.endScale=this.minimumScaleMultiplier=1,t.color&&(this.startColor=o.hexToRGB(t.color.start),t.color.start!=t.color.end?this.endColor=o.hexToRGB(t.color.end):this.endColor=null),t.startRotation?(this.minStartRotation=t.startRotation.min,this.maxStartRotation=t.startRotation.max):this.minStartRotation=this.maxStartRotation=0,t.noRotation&&(this.minStartRotation||this.maxStartRotation)?this.noRotation=!!t.noRotation:this.noRotation=!1,t.rotationSpeed?(this.minRotationSpeed=t.rotationSpeed.min,this.maxRotationSpeed=t.rotationSpeed.max):this.minRotationSpeed=this.maxRotationSpeed=0,this.minLifetime=t.lifetime.min,this.maxLifetime=t.lifetime.max,this.particleBlendMode=o.getBlendMode(t.blendMode),t.ease?this.customEase="function"==typeof t.ease?t.ease:o.generateEase(t.ease):this.customEase=null,i.parseData?this.extraData=i.parseData(t.extraData):this.extraData=t.extraData||null,this.spawnRect=this.spawnCircle=null,this.particlesPerWave=1,this.particleSpacing=0,this.angleStart=0,t.spawnType){case"rect":this.spawnType="rect",this._spawnFunc=this._spawnRect;var s=t.spawnRect;this.spawnRect=new r.Rectangle(s.x,s.y,s.w,s.h);break;case"circle":this.spawnType="circle",this._spawnFunc=this._spawnCircle,n=t.spawnCircle,this.spawnCircle=new r.Circle(n.x,n.y,n.r);break;case"ring":this.spawnType="ring",this._spawnFunc=this._spawnRing,n=t.spawnCircle,this.spawnCircle=new r.Circle(n.x,n.y,n.r),this.spawnCircle.minRadius=n.minR;break;case"burst":this.spawnType="burst",this._spawnFunc=this._spawnBurst,this.particlesPerWave=t.particlesPerWave,this.particleSpacing=t.particleSpacing,this.angleStart=t.angleStart||0;break;default:this.spawnType="point",this._spawnFunc=this._spawnPoint}this.frequency=t.frequency,this.emitterLifetime=t.emitterLifetime||-1,this.maxParticles=0<t.maxParticles?t.maxParticles:1e3,this.addAtBack=!!t.addAtBack,this.rotation=0,this.ownerPos=new r.Point,this.spawnPos=new r.Point(t.pos.x,t.pos.y),this._prevEmitterPos=this.spawnPos.clone(),this._prevPosIsValid=!1,this._spawnTimer=0,this.emit=void 0===t.emit||!!t.emit}},t.recycle=function(e){e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next),e==this._activeParticlesLast&&(this._activeParticlesLast=e.prev),e==this._activeParticlesFirst&&(this._activeParticlesFirst=e.next),e.prev=null,e.next=this._poolFirst,this._poolFirst=e,this._parentIsPC?(e.alpha=0,e.visible=!1):e.parent&&e.parent.removeChild(e),--this.particleCount},t.rotate=function(e){var t;this.rotation!=e&&(t=e-this.rotation,this.rotation=e,o.rotatePoint(t,this.spawnPos),this._posChanged=!0)},t.updateSpawnPos=function(e,t){this._posChanged=!0,this.spawnPos.x=e,this.spawnPos.y=t},t.updateOwnerPos=function(e,t){this._posChanged=!0,this.ownerPos.x=e,this.ownerPos.y=t},t.resetPositionTracking=function(){this._prevPosIsValid=!1},Object.defineProperty(t,"emit",{get:function(){return this._emit},set:function(e){this._emit=!!e,this._emitterLife=this.emitterLifetime}}),t.update=function(e){if(this._parent){for(var t,i,n,s=this._activeParticlesFirst;s;s=t)t=s.next,s.update(e);this._prevPosIsValid&&(i=this._prevEmitterPos.x,n=this._prevEmitterPos.y);var r=this.ownerPos.x+this.spawnPos.x,o=this.ownerPos.y+this.spawnPos.y;if(this.emit)for(this._spawnTimer-=e;this._spawnTimer<=0;){if(0<this._emitterLife&&(this._emitterLife-=this._frequency,this._emitterLife<=0)){this._spawnTimer=0,this._emitterLife=0,this.emit=!1;break}if(this.particleCount>=this.maxParticles)this._spawnTimer+=this._frequency;else{var a,l,h,c=this.minLifetime==this.maxLifetime?this.minLifetime:Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime;if(-this._spawnTimer<c){h=this._prevPosIsValid&&this._posChanged?(l=(r-i)*(a=1+this._spawnTimer/e)+i,(o-n)*a+n):(l=r,o);for(var p,u,d,m=0,f=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount);m<f;++m)this._poolFirst?(p=this._poolFirst,this._poolFirst=this._poolFirst.next,p.next=null):p=new this.particleConstructor(this),1<this.particleImages.length?p.applyArt(this.particleImages.random()):p.applyArt(this.particleImages[0]),p.startAlpha=this.startAlpha,p.endAlpha=this.endAlpha,p.startSpeed=this.startSpeed,p.endSpeed=this.endSpeed,p.acceleration.x=this.acceleration.x,p.acceleration.y=this.acceleration.y,1!=this.minimumScaleMultiplier?(d=Math.random()*(1-this.minimumScaleMultiplier)+this.minimumScaleMultiplier,p.startScale=this.startScale*d,p.endScale=this.endScale*d):(p.startScale=this.startScale,p.endScale=this.endScale),p.startColor=this.startColor,p.endColor=this.endColor,this.minRotationSpeed==this.maxRotationSpeed?p.rotationSpeed=this.minRotationSpeed:p.rotationSpeed=Math.random()*(this.maxRotationSpeed-this.minRotationSpeed)+this.minRotationSpeed,p.noRotation=this.noRotation,p.maxLife=c,p.blendMode=this.particleBlendMode,p.ease=this.customEase,p.extraData=this.extraData,this._spawnFunc(p,l,h,m),p.init(),p.update(-this._spawnTimer),this._parentIsPC&&p.parent?((u=this._parent.children)[0]==p?u.shift():u[u.length-1]==p?u.pop():(d=u.indexOf(p),u.splice(d,1)),this.addAtBack?u.unshift(p):u.push(p)):this.addAtBack?this._parent.addChildAt(p,0):this._parent.addChild(p),this._activeParticlesLast?((this._activeParticlesLast.next=p).prev=this._activeParticlesLast,this._activeParticlesLast=p):this._activeParticlesLast=this._activeParticlesFirst=p,++this.particleCount}this._spawnTimer+=this._frequency}}this._posChanged&&(this._prevEmitterPos.x=r,this._prevEmitterPos.y=o,this._prevPosIsValid=!0,this._posChanged=!1)}},t._spawnPoint=function(e,t,i,n){this.minStartRotation==this.maxStartRotation?e.rotation=this.minStartRotation+this.rotation:e.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,e.position.x=t,e.position.y=i},t._spawnRect=function(e,t,i,n){this.minStartRotation==this.maxStartRotation?e.rotation=this.minStartRotation+this.rotation:e.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,a.x=Math.random()*this.spawnRect.width+this.spawnRect.x,a.y=Math.random()*this.spawnRect.height+this.spawnRect.y,0!==this.rotation&&o.rotatePoint(this.rotation,a),e.position.x=t+a.x,e.position.y=i+a.y},t._spawnCircle=function(e,t,i,n){this.minStartRotation==this.maxStartRotation?e.rotation=this.minStartRotation+this.rotation:e.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,a.x=Math.random()*this.spawnCircle.radius,a.y=0,o.rotatePoint(360*Math.random(),a),a.x+=this.spawnCircle.x,a.y+=this.spawnCircle.y,0!==this.rotation&&o.rotatePoint(this.rotation,a),e.position.x=t+a.x,e.position.y=i+a.y},t._spawnRing=function(e,t,i,n){var s=this.spawnCircle;this.minStartRotation==this.maxStartRotation?e.rotation=this.minStartRotation+this.rotation:e.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,s.minRadius==s.radius?a.x=Math.random()*(s.radius-s.minRadius)+s.minRadius:a.x=s.radius,a.y=0;s=360*Math.random();e.rotation+=s,o.rotatePoint(s,a),a.x+=this.spawnCircle.x,a.y+=this.spawnCircle.y,0!==this.rotation&&o.rotatePoint(this.rotation,a),e.position.x=t+a.x,e.position.y=i+a.y},t._spawnBurst=function(e,t,i,n){0===this.particleSpacing?e.rotation=360*Math.random():e.rotation=this.angleStart+this.particleSpacing*n+this.rotation,e.position.x=t,e.position.y=i},t.cleanup=function(){for(var e,t=this._activeParticlesFirst;t;t=e)e=t.next,this.recycle(t),t.parent&&t.parent.removeChild(t);this._activeParticlesFirst=this._activeParticlesLast=null,this.particleCount=0},t.destroy=function(){var e;this.cleanup();for(var t=this._poolFirst;t;t=e)e=t.next,t.destroy();this._poolFirst=this._parent=this.particleImages=this.spawnPos=this.ownerPos=this.startColor=this.endColor=this.customEase=null},r.particles.Emitter=e}(PIXI),function(){var e="undefined"!=typeof window?window:GLOBAL;"undefined"==typeof cloudkid&&(e.cloudkid={}),Object.defineProperties(e.cloudkid,{AnimatedParticle:{get:function(){return console.warn("cloudkid namespace is deprecated, please use PIXI.particles"),PIXI.particles.AnimatedParticle}},Emitter:{get:function(){return console.warn("cloudkid namespace is deprecated, please use PIXI.particles"),PIXI.particles.Emitter}},Particle:{get:function(){return console.warn("cloudkid namespace is deprecated, please use PIXI.particles"),PIXI.particles.Particle}},ParticleUtils:{get:function(){return console.warn("cloudkid namespace is deprecated, please use PIXI.particles"),PIXI.particles.ParticleUtils}},PathParticle:{get:function(){return console.warn("cloudkid namespace is deprecated, please use PIXI.particles"),PIXI.particles.PathParticle}}})}(),pixi_display=pixi_display||{},Object.assign(PIXI.Container.prototype,{render:function(e){this._activeParentLayer&&this._activeParentLayer!=e._activeLayer||(this.visible?(this.displayOrder=e.incDisplayOrder(),this.worldAlpha<=0||!this.renderable||(e._activeLayer=null,this.containerRenderWebGL(e),e._activeLayer=this._activeParentLayer)):this.displayOrder=0)},renderCanvas:function(e){this._activeParentLayer&&this._activeParentLayer!=e._activeLayer||(this.visible?(this.displayOrder=e.incDisplayOrder(),this.worldAlpha<=0||!this.renderable||(e._activeLayer=null,this.containerRenderCanvas(e),e._activeLayer=this._activeParentLayer)):this.displayOrder=0)},containerRenderWebGL:PIXI.Container.prototype.render,containerRenderCanvas:PIXI.Container.prototype.renderCanvas}),Object.assign(PIXI.DisplayObject.prototype,{parentLayer:null,_activeParentLayer:null,parentGroup:null,zOrder:0,zIndex:0,updateOrder:0,displayOrder:0,layerableChildren:!0,isLayer:!1}),(PIXI.ParticleContainer||PIXI.ParticleContainer)&&(PIXI.ParticleContainer.prototype.layerableChildren=!1);var pixi_display,__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(e){var n,t=PIXI.utils,t=(n=t.EventEmitter,__extends(s,n),s.prototype.doSort=function(e,t){if(this.listeners("sort",!0))for(var i=0;i<t.length;i++)this.emit("sort",t[i]);this.useZeroOptimization?this.doSortWithZeroOptimization(e,t):t.sort(s.compareZIndex)},s.compareZIndex=function(e,t){return e.zOrder<t.zOrder?-1:e.zOrder>t.zOrder?1:e.updateOrder-t.updateOrder},s.prototype.doSortWithZeroOptimization=function(e,t){throw new Error("not implemented yet")},s.prototype.clear=function(){this._activeLayer=null,this._activeStage=null,this._activeChildren.length=0},s.prototype.addDisplayObject=function(e,t){this.check(e),t._activeParentLayer=this._activeLayer,(this._activeLayer||this)._activeChildren.push(t)},s.prototype.foundLayer=function(e,t){this.check(e),null!=this._activeLayer&&s.conflict(),this._activeLayer=t,this._activeStage=e},s.prototype.foundStage=function(e){this._activeLayer||this.canDrawInParentStage||this.clear()},s.prototype.check=function(e){if(this._lastUpdateId<s._layerUpdateId)this._lastUpdateId=s._layerUpdateId,this.clear(),this._activeStage=e;else if(this.canDrawInParentStage){for(var t=this._activeStage;t&&t!=e;)t=t._activeParentStage;null==(this._activeStage=t)&&this.clear()}},s.conflict=function(){s._lastLayerConflict+5e3<Date.now()&&(s._lastLayerConflict=Date.now(),console.log("PIXI-display plugin found two layers with the same group in one stage - that's not healthy. Please place a breakpoint here and debug it"))},s._layerUpdateId=0,s._lastLayerConflict=0,s);function s(e,t){var i=n.call(this)||this;return i._activeLayer=null,i._activeStage=null,i._activeChildren=[],i._lastUpdateId=-1,i.useRenderTexture=!1,i.useDoubleBuffer=!1,i.sortPriority=0,i.clearColor=new Float32Array([0,0,0,0]),i.canDrawWithoutLayer=!1,i.canDrawInParentStage=!0,i.zIndex=0,i.enableSort=!1,i._tempResult=[],i._tempZero=[],i.useZeroOptimization=!1,i.zIndex=e,i.enableSort=!!t,"function"==typeof t&&i.on("sort",t),i}e.Group=t}(pixi_display=pixi_display||{}),function(p){function t(e,t,i,n,s){this.search||(this.search=new p.LayersTreeSearch),this.search.findHit(e,t,i,n);var r=this.delayedEvents;if(r&&r.length){e.stopPropagationHint=!1;var o=r.length;this.delayedEvents=[];for(var a=0;a<o;a++){var l=r[a],h=l.displayObject,c=l.eventString,l=l.eventData;l.stopsPropagatingAt===h&&(l.stopPropagationHint=!0),this.dispatchEvent(h,c,l)}}}p.processInteractive51=t,p.patchInteractionManager=function(e){e&&(e.search?e.search.worksWithDisplay||(e.search=new p.LayersTreeSearch):e.processInteractive=t)}}(pixi_display=pixi_display||{}),function(i){var t=(e.prototype.initRenderTexture=function(e){var t=e?e.screen.width:100,i=e?e.screen.height:100,e=e?e.resolution:PIXI.settings.RESOLUTION;this.renderTexture=PIXI.RenderTexture.create({width:t,height:i,resolution:e}),this.layer.group.useDoubleBuffer&&(this.doubleBuffer=[PIXI.RenderTexture.create({width:t,height:i,resolution:e}),PIXI.RenderTexture.create({width:t,height:i,resolution:e})])},e.prototype.getRenderTexture=function(){return this.renderTexture||this.initRenderTexture(),this.renderTexture},e.prototype.pushTexture=function(e){var t=e.screen;this.renderTexture||this.initRenderTexture(e);var i=this.renderTexture,n=this.layer.group,s=this.doubleBuffer;i.width===t.width&&i.height===t.height&&i.baseTexture.resolution===e.resolution||(i.baseTexture.resolution=e.resolution,i.resize(t.width,t.height),s&&(s[0].baseTexture.resolution=e.resolution,s[0].resize(t.width,t.height),s[1].baseTexture.resolution=e.resolution,s[1].resize(t.width,t.height))),this._tempRenderTarget=e.renderTexture.current,this._tempRenderTargetSource.copyFrom(e.renderTexture.sourceFrame),e.batch.flush(),n.useDoubleBuffer?((t=s[this.currentBufferIndex]).baseTexture._glTextures[e.CONTEXT_UID]||(e.renderTexture.bind(t,void 0,void 0),e.texture.bind(t),n.clearColor&&e.renderTexture.clear(n.clearColor)),e.texture.unbind(i),i.baseTexture._glTextures=t.baseTexture._glTextures,i.baseTexture.framebuffer=t.baseTexture.framebuffer,t=s[1-this.currentBufferIndex],e.renderTexture.bind(t,void 0,void 0)):e.renderTexture.bind(i,void 0,void 0),n.clearColor&&e.renderTexture.clear(n.clearColor);n=e.filter.defaultFilterStack;1<n.length&&(n[n.length-1].renderTexture=e.renderTexture.current)},e.prototype.popTexture=function(e){e.batch.flush();var t=e.filter.defaultFilterStack;1<t.length&&(t[t.length-1].renderTexture=this._tempRenderTarget),e.renderTexture.bind(this._tempRenderTarget,this._tempRenderTargetSource,void 0),this._tempRenderTarget=null;var i=this.renderTexture,n=this.layer.group,t=this.doubleBuffer;n.useDoubleBuffer&&(e.texture.unbind(i),this.currentBufferIndex=1-this.currentBufferIndex,t=t[this.currentBufferIndex],i.baseTexture._glTextures=t.baseTexture._glTextures,i.baseTexture.framebuffer=t.baseTexture.framebuffer)},e.prototype.destroy=function(){this.renderTexture&&(this.renderTexture.destroy(),this.doubleBuffer&&(this.doubleBuffer[0].destroy(!0),this.doubleBuffer[1].destroy(!0)))},e);function e(e){this.layer=e,this.renderTexture=null,this.doubleBuffer=null,this.currentBufferIndex=0,this._tempRenderTarget=null,this._tempRenderTargetSource=new PIXI.Rectangle}i.LayerTextureCache=t;var n,s=(n=PIXI.Container,__extends(r,n),r.prototype.beginWork=function(e){var t=this._activeChildren;this._activeStageParent=e,this.group.foundLayer(e,this);for(var i=this.group._activeChildren,n=t.length=0;n<i.length;n++)i[n]._activeParentLayer=this,t.push(i[n]);i.length=0},r.prototype.endWork=function(){for(var e=this.children,t=this._activeChildren,i=this._sortedChildren,n=0;n<t.length;n++)this.emit("display",t[n]);if(i.length=0,this.insertChildrenBeforeActive)for(n=0;n<e.length;n++)i.push(e[n]);for(n=0;n<t.length;n++)i.push(t[n]);if(!this.insertChildrenBeforeActive&&this.insertChildrenAfterActive)for(n=0;n<e.length;n++)i.push(e[n]);this.group.enableSort&&this.doSort()},Object.defineProperty(r.prototype,"useRenderTexture",{get:function(){return this.group.useRenderTexture},set:function(e){this.group.useRenderTexture=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"useDoubleBuffer",{get:function(){return this.group.useDoubleBuffer},set:function(e){this.group.useDoubleBuffer=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"clearColor",{get:function(){return this.group.clearColor},set:function(e){this.group.clearColor=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"sortPriority",{get:function(){return this.group.sortPriority},set:function(e){this.group.sortPriority=e},enumerable:!0,configurable:!0}),r.prototype.getRenderTexture=function(){return this.textureCache||(this.textureCache=new t(this)),this.textureCache.getRenderTexture()},r.prototype.updateDisplayLayers=function(){},r.prototype.doSort=function(){this.group.doSort(this,this._sortedChildren)},r.prototype._preRender=function(e){return(!this._activeParentLayer||this._activeParentLayer==e._activeLayer)&&(this.visible?(this.displayOrder=e.incDisplayOrder(),!(this.worldAlpha<=0||!this.renderable)&&(this.children!==this._sortedChildren&&this._tempChildren!=this.children&&(this._tempChildren=this.children),this._boundsID++,this.children=this._sortedChildren,this._tempLayerParent=e._activeLayer,e._activeLayer=this,!0)):(this.displayOrder=0,!1))},r.prototype._postRender=function(e){this.children=this._tempChildren,e._activeLayer=this._tempLayerParent,this._tempLayerParent=null},r.prototype.render=function(e){this._preRender(e)&&(this.group.useRenderTexture&&(this.textureCache||(this.textureCache=new t(this)),this.textureCache.pushTexture(e)),this.containerRenderWebGL(e),this._postRender(e),this.group.useRenderTexture&&this.textureCache.popTexture(e))},r.prototype.destroy=function(e){this.textureCache&&(this.textureCache.destroy(),this.textureCache=null),n.prototype.destroy.call(this,e)},r);function r(e){void 0===e&&(e=null);var t=n.call(this)||this;return t.isLayer=!0,t.group=null,t._activeChildren=[],t._tempChildren=null,t._activeStageParent=null,t._sortedChildren=[],t._tempLayerParent=null,t.insertChildrenBeforeActive=!0,t.insertChildrenAfterActive=!0,null!=e?(t.group=e,t.zIndex=e.zIndex):t.group=new i.Group(0,!1),t._tempChildren=t.children,t}(i.Layer=s).prototype.renderCanvas=function(e){this._preRender(e)&&(this.containerRenderCanvas(e),this._postRender(e))}}(pixi_display=pixi_display||{}),function(e){var t=PIXI.Point,i=(n.prototype.recursiveFindHit=function(e,t,i,n,s){if(!t||!t.visible)return 0;var r=0,o=n=t.interactive||n;t.hitArea&&(o=!1),t._activeParentLayer&&(s=!1);var a=t._mask;i<1/0&&a&&(a.containsPoint(e)||(s=!0)),i<1/0&&t.filterArea&&(t.filterArea.contains(e.x,e.y)||(s=!0));var l=t.children;if(t.interactiveChildren&&l)for(var h=l.length-1;0<=h;h--){var c=l[h],p=this.recursiveFindHit(e,c,i,o,s);p&&c.parent&&(i=r=p)}return n&&(s?t.interactive&&this._queueAdd(t,0):(i<t.displayOrder&&(t.hitArea?(t.worldTransform.applyInverse(e,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)&&(r=t.displayOrder)):t.containsPoint&&t.containsPoint(e)&&(r=t.displayOrder)),t.interactive&&this._queueAdd(t,r===1/0?0:r))),r},n.prototype.findHit=function(e,t,i,n){var s=null,r=null,r=e.data&&e.data.global?(s=e).data.global:e;this._startInteractionProcess(),this.recursiveFindHit(r,t,n?0:1/0,!1,!1),this._finishInteractionProcess(s,i)},n.prototype._startInteractionProcess=function(){this._eventDisplayOrder=1,this._queue||(this._queue=[[],[]]),this._queue[0].length=0,this._queue[1].length=0},n.prototype._queueAdd=function(e,t){var i=this._queue;if(t<this._eventDisplayOrder)i[0].push(e);else{if(t>this._eventDisplayOrder){this._eventDisplayOrder=t;for(var n=i[1],s=0,r=n.length;s<r;s++)i[0].push(n[s]);i[1].length=0}i[1].push(e)}},n.prototype._finishInteractionProcess=function(e,t){for(var i=this._queue,n=i[0],s=0,r=n.length;s<r;s++)e?t&&t(e,n[s],!1):t(n[s],!1);for(s=0,r=(n=i[1]).length;s<r;s++)e?(e.target||(e.target=n[s]),t&&t(e,n[s],!0)):t(n[s],!0)},n);function n(){this._tempPoint=new t,this._queue=[[],[]],this._eventDisplayOrder=0,this.worksWithDisplay=!0}e.LayersTreeSearch=i}(pixi_display=pixi_display||{}),function(e){var t,i=(t=e.Layer,__extends(r,t),r.prototype.clear=function(){this._activeLayers.length=0,this._tempGroups.length=0},r.prototype.destroy=function(e){this.clear(),t.prototype.destroy.call(this,e)},r.prototype._addRecursive=function(e){if(e.visible)if(e.isLayer&&(this._activeLayers.push(i=e),i.beginWork(this)),e!=this&&e.isStage)e.updateAsChildStage(this);else{var t=e.parentGroup;null!=t&&t.addDisplayObject(this,e);var i=e.parentLayer;if(null!=i&&(t=i.group).addDisplayObject(this,e),e.updateOrder=++r._updateOrderCounter,!(e.alpha<=0||!e.renderable||!e.layerableChildren||t&&t.sortPriority)){var n=e.children;if(n&&n.length)for(var s=0;s<n.length;s++)this._addRecursive(n[s])}}},r.prototype._addRecursiveChildren=function(e){if(!(e.alpha<=0)&&e.renderable&&e.layerableChildren){var t=e.children;if(t&&t.length)for(var i=0;i<t.length;i++)this._addRecursive(t[i])}},r.prototype._updateStageInner=function(){this.clear(),this._addRecursive(this);for(var e=this._activeLayers,t=0;t<e.length;t++)if((s=e[t]).group.sortPriority){s.endWork();for(var i=s._sortedChildren,n=0;n<i.length;n++)this._addRecursiveChildren(i[n])}for(var s,t=0;t<e.length;t++)(s=e[t]).group.sortPriority||s.endWork()},r.prototype.updateAsChildStage=function(e){this._activeParentStage=e,r._updateOrderCounter=0,this._updateStageInner()},r.prototype.updateStage=function(){this._activeParentStage=null,e.Group._layerUpdateId++,this._updateStageInner()},r._updateOrderCounter=0,r);function r(){var e=t.call(this)||this;return e.isStage=!0,e._tempGroups=[],e._activeLayers=[],e._activeParentStage=null,e}e.Stage=i}(pixi_display=pixi_display||{}),function(r){Object.assign(PIXI.Renderer.prototype,{_lastDisplayOrder:0,_activeLayer:null,incDisplayOrder:function(){return++this._lastDisplayOrder},_oldRender:PIXI.Renderer.prototype.render,render:function(e,t,i,n,s){t||(this._lastDisplayOrder=0),this._activeLayer=null,e.isStage&&e.updateStage(),r.patchInteractionManager(this.plugins.interaction),this._oldRender(e,t,i,n,s)}});var e=PIXI.CanvasRenderer;e&&Object.assign(e.prototype,{_lastDisplayOrder:0,_activeLayer:null,incDisplayOrder:function(){return++this._lastDisplayOrder},_oldRender:e.prototype.render,render:function(e,t,i,n,s){t||(this._lastDisplayOrder=0),this._activeLayer=null,e.isStage&&e.updateStage(),r.patchInteractionManager(this.plugins.interaction),this._oldRender(e,t,i,n,s)}})}(pixi_display=pixi_display||{}),function(e){PIXI.display=e}(pixi_display=pixi_display||{}),function(e){"use strict";function t(e){n.call(this,e),this.textures=null,this.duration=0,this.framerate=0,this.elapsed=0,this.loop=!1}var i=e.particles.ParticleUtils,n=e.particles.Particle,h=e.Texture,s=i.useAPI3,r=n.prototype,r=t.prototype=Object.create(r);r.init=function(){this.Particle_init(),this.elapsed=0,this.framerate<0&&(this.duration=this.maxLife,this.framerate=this.textures.length/this.duration)},r.applyArt=function(e){this.textures=e.textures,this.framerate=e.framerate,this.duration=e.duration,this.loop=e.loop},r.update=function(e){0<=this.Particle_update(e)&&(this.elapsed+=e,this.elapsed>this.duration&&(this.loop?this.elapsed=this.elapsed%this.duration:this.elapsed=this.duration-1e-6),e=this.elapsed*this.framerate+1e-7|0,s?this.texture=this.textures[e]||i.EMPTY_TEXTURE:this.setTexture(this.textures[e]||i.EMPTY_TEXTURE))},r.Particle_destroy=n.prototype.destroy,r.destroy=function(){this.Particle_destroy(),this.textures=null},t.parseArt=function(e){for(var t,i,n,s,r=[],o=0;o<e.length;++o){for(t=e[o],e[o]=r={},r.textures=s=[],n=t.textures,i=0;i<n.length;++i)if("string"==typeof(l=n[i]))s.push(h.fromImage(l));else if(l instanceof h)s.push(l);else for(var a=l.count||1,l="string"==typeof l.texture?h.fromImage(l.texture):l.texture;0<a;--a)s.push(l);"matchLife"==t.framerate?(r.framerate=-1,r.duration=0,r.loop=!1):(r.loop=!!t.loop,r.framerate=0<t.framerate?t.framerate:60,r.duration=s.length/r.framerate)}return e},e.particles.AnimatedParticle=t}(PIXI),function(e){var t=/Android/gi.test(navigator.userAgent),i=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),n="data:video/webm;base64,GkXfo0AgQoaBAUL3gQFC8oEEQvOBCEKCQAR3ZWJtQoeBAkKFgQIYU4BnQI0VSalmQCgq17FAAw9CQE2AQAZ3aGFtbXlXQUAGd2hhbW15RIlACECPQAAAAAAAFlSua0AxrkAu14EBY8WBAZyBACK1nEADdW5khkAFVl9WUDglhohAA1ZQOIOBAeBABrCBCLqBCB9DtnVAIueBAKNAHIEAAIAwAQCdASoIAAgAAUAmJaQAA3AA/vz0AAA=",s="data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAG21kYXQAAAGzABAHAAABthADAowdbb9/AAAC6W1vb3YAAABsbXZoZAAAAAB8JbCAfCWwgAAAA+gAAAAAAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAIVdHJhawAAAFx0a2hkAAAAD3wlsIB8JbCAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAIAAAACAAAAAABsW1kaWEAAAAgbWRoZAAAAAB8JbCAfCWwgAAAA+gAAAAAVcQAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAAAVxtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAEcc3RibAAAALhzdHNkAAAAAAAAAAEAAACobXA0dgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAIAAgASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAAFJlc2RzAAAAAANEAAEABDwgEQAAAAADDUAAAAAABS0AAAGwAQAAAbWJEwAAAQAAAAEgAMSNiB9FAEQBFGMAAAGyTGF2YzUyLjg3LjQGAQIAAAAYc3R0cwAAAAAAAAABAAAAAQAAAAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAEAAAABAAAAFHN0c3oAAAAAAAAAEwAAAAEAAAAUc3RjbwAAAAAAAAABAAAALAAAAGB1ZHRhAAAAWG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAK2lsc3QAAAAjqXRvbwAAABtkYXRhAAAAAQAAAABMYXZmNTIuNzguMw==";function r(e,t,i){var n=document.createElement("source");n.src=i,n.type="video/"+t,e.appendChild(n)}function o(){return i?this.noSleepTimer=null:t&&(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("loop",""),r(this.noSleepVideo,"webm",n),r(this.noSleepVideo,"mp4",s)),this}o.prototype.enable=function(e){i?(this.disable(),this.noSleepTimer=window.setInterval(function(){window.location.reload(),window.setTimeout(window.stop,0)},e||15e3)):t&&this.noSleepVideo.play()},o.prototype.disable=function(){i?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):t&&this.noSleepVideo.pause()},e.NoSleep=o}(this);var _createClass=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Tink=function(){function n(e,t){var i=arguments.length<=2||void 0===arguments[2]?1:arguments[2];_classCallCheck(this,n),this.element=t,this.scale=i,this.draggableSprites=[],this.pointers=[],this.buttons=[],this.PIXI=e,this.TextureCache=this.PIXI.utils.TextureCache,this.MovieClip=this.PIXI.AnimatedSprite||this.PIXI.extras.MovieClip,this.Texture=this.PIXI.Texture}return _createClass(n,[{key:"makeDraggable",value:function(){for(var t=this,e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];if(i[0]instanceof Array){var s=i[0];if(0<s.length)for(var r=s.length-1;0<=r;r--){var o=s[r];this.draggableSprites.push(o),void 0===o.draggable&&(o.draggable=!0,o._localDraggableAllocation=!0)}}else i.forEach(function(e){t.draggableSprites.push(e),void 0===e.draggable&&(e.draggable=!0,e._localDraggableAllocation=!0)})}},{key:"makeUndraggable",value:function(){for(var t=this,e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];if(i[0]instanceof Array){var s=i[0];if(0<s.length)for(var r=s.length-1;0<=r;r--){var o=s[r];this.draggableSprites.splice(this.draggableSprites.indexOf(o),1),!0===o._localDraggableAllocation&&(o.draggable=!1)}}else i.forEach(function(e){t.draggableSprites.splice(t.draggableSprites.indexOf(e),1),!0===e._localDraggableAllocation&&(e.draggable=!1)})}},{key:"makePointer",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.element:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.scale:arguments[1],f=(this.draggableSprites,this.addGlobalPositionProperties),t={element:e,scale:t,_x:0,_y:0,width:1,height:1,get x(){return(this._x-(this.screenOffset?this.screenOffset.x:0))/this.scale},get y(){return(this._y-(this.screenOffset?this.screenOffset.y:0))/this.scale},get centerX(){return this.x},get centerY(){return this.y},get position(){return{x:this.x,y:this.y}},get cursor(){return this.element.style.cursor},set cursor(e){this.element.style.cursor=e,this.overrideCursor&&(this.element.style.cursor="none")},wasDown:!1,wasUp:!1,isDown:!1,isUp:!0,tapped:!1,downTime:0,elapsedTime:0,press:void 0,release:void 0,tap:void 0,dragSprite:null,dragOffsetX:0,dragOffsetY:0,_visible:!0,get visible(){return this._visible},set visible(e){this.cursor=!0===e?"auto":"none",this._visible=e},moveHandler:function(e){var t=e.target,i=document.documentElement,n=(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0),i=(window.pageYOffset||i.scrollTop)-(i.clientTop||0),t=t.getBoundingClientRect(),n=t.left-n,i=t.top-i;this._x=e.pageX-n,this._y=e.pageY-i,e.preventDefault()},touchmoveHandler:function(e){var t=e.target,i=document.documentElement,n=(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0),i=(window.pageYOffset||i.scrollTop)-(i.clientTop||0),t=t.getBoundingClientRect(),n=t.left-n,i=t.top-i;this._x=e.targetTouches[0].pageX-n,this._y=e.targetTouches[0].pageY-i,e.preventDefault()},downHandler:function(e){this.isDown=!0,this.isUp=!1,this.tapped=!1,this.downTime=Date.now(),this.press&&this.press(),e.preventDefault()},touchstartHandler:function(e){var t=e.target,i=document.documentElement,n=(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0),i=(window.pageYOffset||i.scrollTop)-(i.clientTop||0),t=t.getBoundingClientRect(),n=t.left-n,i=t.top-i;this._x=e.targetTouches[0].pageX-n,this._y=e.targetTouches[0].pageY-i,this.isDown=!0,this.isUp=!1,this.tapped=!1,this.downTime=Date.now(),this.press&&this.press(),e.preventDefault()},upHandler:function(e){this.elapsedTime=Math.abs(this.downTime-Date.now()),this.elapsedTime<=200&&!1===this.tapped&&(this.tapped=!0,this.tap&&this.tap()),this.isUp=!0,this.isDown=!1,this.release&&this.release(),e.preventDefault()},touchendHandler:function(e){this.elapsedTime=Math.abs(this.downTime-Date.now()),this.elapsedTime<=200&&!1===this.tapped&&(this.tapped=!0,this.tap&&this.tap()),this.isUp=!0,this.isDown=!1,this.release&&this.release()},hitTestSprite:function(e){for(var t={x:1,y:1},i=e.parent;i;)i.scale&&(t.x*=i.scale.x,t.y*=i.scale.y),i=i.parent;f(e);var n=!1,s=void 0,r=void 0,r=void 0!==e.anchor?(s=(e.interactionWidth||e.width)*e.anchor.x*t.x,(e.interactionHeight||e.height)*e.anchor.y*t.y):s=0;if(e.circular)var o=this.x-(e.gx+e.width/2-s),a=this.y-(e.gy+e.width/2-r),n=Math.sqrt(o*o+a*a)<e.width/2;else{var l=e.gx-s-(e.interactionOffsetX||0),s=e.gx+(e.interactionWidth||e.width)*t.x-s-(e.interactionOffsetX||0),h=e.gy-r-(e.interactionOffsetY||0),r=e.gy+(e.interactionHeight||e.height)*t.y-r-(e.interactionOffsetY||0);if(void 0!==e.scope&&void 0!==e.scope.config&&void 0!==e.scope.config.interactionArea){for(var c=e.scope.config.interactionArea,p=[],u=0;u<c.length;u++){var d=l+c[u].x*t.x,m=h+c[u].y*t.y;p.push(d),p.push(m)}new PIXI.Polygon(p).contains(this.x,this.y)&&(n=!0)}else n=this.x>l&&this.x<s&&this.y>h&&this.y<r}return n}};return e.addEventListener("mousemove",t.moveHandler.bind(t),!1),e.addEventListener("mousedown",t.downHandler.bind(t),!1),e.addEventListener("touchmove",t.touchmoveHandler.bind(t),!1),e.addEventListener("touchstart",t.touchstartHandler.bind(t),!1),e.addEventListener("touchend",t.touchendHandler.bind(t),!1),e.addEventListener("mouseup",t.upHandler.bind(t),!1),e.style.touchAction="none",this.pointers.push(t),t}},{key:"addGlobalPositionProperties",value:function(e){void 0===e.gx&&Object.defineProperty(e,"gx",{get:function(){return e.getGlobalPosition().x}}),void 0===e.gy&&Object.defineProperty(e,"gy",{get:function(){return e.getGlobalPosition().y}})}},{key:"updateDragAndDrop",value:function(s){0===this.pointers.length&&this.makePointer(this.element,this.scale),this.pointers.forEach(function(t){if(t.isDown)if(null===t.dragSprite)for(var e=s.length-1;-1<e;e--){var i=s[e];if(t.hitTestSprite(i)&&i.draggable){t.dragOffsetX=t.x-i.gx,t.dragOffsetY=t.y-i.gy;var n=(t.dragSprite=i).parent.children;n.splice(n.indexOf(i),1),n.push(i),s.splice(s.indexOf(i),1),s.push(i);break}}else t.dragSprite.x=t.x-t.dragOffsetX,t.dragSprite.y=t.y-t.dragOffsetY;t.isUp&&(t.dragSprite=null),s.some(function(e){return t.hitTestSprite(e)&&e.draggable?(t.visible&&(t.cursor="pointer"),!0):(t.visible&&(t.cursor="auto"),!1)})})}},{key:"makeInteractive",value:function(e){e.press=e.press||void 0,e.release=e.release||void 0,e.over=e.over||void 0,e.out=e.out||void 0,e.tap=e.tap||void 0,e.state="up",e.action="",e.pressed=!1,e.hoverOver=!1,e.tinkType="Sprite",e.enabled=!0,this.buttons.push(e)}},{key:"followCursor",value:function(e){this.cursorObjects=this.cursorObjects||[],this.cursorObjects.push(e)}},{key:"unfollowCursor",value:function(e){e=this.cursorObjects.indexOf(e);-1!==e&&this.cursorObjects.splice(e,1)}},{key:"updateCursorObjects",value:function(){this.cursorObjects.forEach(function(e){if(e.worldVisible){for(var t=this.pointers[0],i={x:1,y:1},n=e.parent;n;)n.scale&&(i.x*=n.scale.x,i.y*=n.scale.y),n=n.parent;var s=(t.x-e.parent.getGlobalPosition().x)/i.x,r=(t.y-e.parent.getGlobalPosition().y)/i.y,o=e.followCursorRules||{};s+=o.offsetX||0,r+=o.offsetY||0,(s=s>o.maxX?o.maxX:s)<o.minX&&(s=o.minX),(r=r>o.maxY?o.maxY:r)<o.minY&&(r=o.minY);t=!1;(e.x!=s||e.y!=r)&&o.notifyChange&&e.onFollow&&(t=!0),o.disableX||(e.x=s),o.disableY||(e.y=r),t&&e.onFollow(s,r)}}.bind(this))}},{key:"sortButtons",value:function(e){do{for(var t,i=!1,n=0;n<this.buttons.length-1;n++)void 0===this.buttons[n].tinkZ&&(this.buttons[n].tinkZ=-1),void 0===this.buttons[n+1].tinkZ&&(this.buttons[n+1].tinkZ=-1),void 0===this.buttons[n].tinkZ&&console.log(sna.presentation.util.describe(this.buttons[n])),this.buttons[n].tinkZ<this.buttons[n+1].tinkZ&&(t=this.buttons[n],this.buttons[n]=this.buttons[n+1],this.buttons[n+1]=t,i=!0)}while(i)}},{key:"remove",value:function(e){e=this.buttons.indexOf(e);-1!==e&&this.buttons.splice(e,1)}},{key:"updateButtons",value:function(){var n=this;0===this.pointers.length&&this.makePointer(this.element,this.scale);var s="auto",r=!1;this.buttons.forEach(function(i){i.enabled&&i.worldVisible||(i.state="up",i.hoverOver=!1,i.pressed=!1),i.enabled&&i.worldVisible&&n.pointers.forEach(function(e){var t=!r&&(e.hitTestSprite(i)||i.screenClickHitDetected);r=r||t,e.isUp&&(i.state="up","button"===i.tinkType&&i.gotoAndStop(0)),t&&i.worldVisible&&(i.state="over",i.totalFrames&&3<=i.totalFrames&&"button"===i.tinkType&&i.enabled&&void 0===n.firstDown&&i.gotoAndStop(1),e.isDown&&(i.state="down",void 0===n.firstDown&&(n.firstDown=i),"button"===i.tinkType&&i.enabled&&i===n.firstDown&&(3<=i.totalFrames?i.gotoAndStop(2):i.gotoAndStop(1))),e.visible&&i.worldVisible&&i.enabled&&!i.noPointer&&(s="pointer")),"down"===i.state&&(i.pressed||i!==n.firstDown||(i.press&&i.press(),i.pressed=!0,i.action="pressed")),"over"===i.state&&(i.pressed&&i===n.firstDown&&(i.release&&i.release(),i.pressed=!1,i.action="released",e.tapped&&i.enabled&&i.worldVisible&&i.tap&&i.tap(),delete n.firstDown),i.hoverOver||(i.over&&i.over(),i.hoverOver=!0)),"up"===i.state&&(i.pressed&&i===n.firstDown&&(i.release&&i.canReleaseOutside&&i.release(),i.pressed=!1,i.action="released"),i.hoverOver&&(i.out&&i.out(),i.hoverOver=!1))}),i.screenClickHitDetected=!1}),this.pointers[0].isUp&&delete n.firstDown,n.firstDown&&(s="pointer"),this.pointers[0].skipCursorUpdate||(this.pointers[0].cursor=s)}},{key:"button",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],i=arguments.length<=2||void 0===arguments[2]?0:arguments[2],n=void 0;return"string"==typeof e[0]?n=this.TextureCache[e[0]]?this.MovieClip.fromFrames(e):this.MovieClip.fromImages(e):e[0]instanceof this.Texture&&(n=new this.MovieClip(e)),this.makeInteractive(n),n.tinkType="button",n.x=t,n.y=i,n}},{key:"update",value:function(){0!==this.draggableSprites.length&&this.updateDragAndDrop(this.draggableSprites),0!==this.buttons.length&&this.updateButtons(),this.cursorObjects&&this.updateCursorObjects()}},{key:"keyboard",value:function(e){var t={};return t.code=e,t.isDown=!1,t.isUp=!0,t.press=void 0,t.release=void 0,t.downHandler=function(e){e.keyCode===t.code&&(t.isUp&&t.press&&t.press(),t.isDown=!0,t.isUp=!1,e.preventDefault())}.bind(t),t.upHandler=function(e){e.keyCode===t.code&&(t.isDown&&t.release&&t.release(),t.isDown=!1,t.isUp=!0,e.preventDefault())}.bind(t),window.addEventListener("keydown",t.downHandler,!1),window.addEventListener("keyup",t.upHandler,!1),t}},{key:"keyboardRemove",value:function(e){window.removeEventListener("keydown",e.downHandler,!1),window.removeEventListener("keyup",e.upHandler,!1)}},{key:"arrowControl",value:function(e,t){if(void 0===t)throw new Error("Please supply the arrowControl method with the speed at which you want the sprite to move");var i=this.keyboard(38),n=this.keyboard(39),s=this.keyboard(40),r=this.keyboard(37);r.press=function(){e.vx=-t,e.vy=0},r.release=function(){n.isDown||0!==e.vy||(e.vx=0)},i.press=function(){e.vy=-t,e.vx=0},i.release=function(){s.isDown||0!==e.vx||(e.vy=0)},n.press=function(){e.vx=t,e.vy=0},n.release=function(){r.isDown||0!==e.vy||(e.vx=0)},s.press=function(){e.vy=t,e.vx=0},s.release=function(){i.isDown||0!==e.vx||(e.vy=0)}}}]),n}(),__filters=function(e,a){"use strict";var t,i,n="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",s=((i=a.Filter)&&(B.__proto__=i),((B.prototype=Object.create(i&&i.prototype)).constructor=B).prototype.apply=function(e,t,i,n){this.uniforms.gamma=Math.max(this.gamma,1e-4),this.uniforms.saturation=this.saturation,this.uniforms.contrast=this.contrast,this.uniforms.brightness=this.brightness,this.uniforms.red=this.red,this.uniforms.green=this.green,this.uniforms.blue=this.blue,this.uniforms.alpha=this.alpha,e.applyFilter(this,t,i,n)},B),l=function(n){function e(e,t,i){void 0===e&&(e=4),void 0===t&&(t=3),n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",(i=void 0===i?!1:i)?"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}\n":"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}"),this.uniforms.uOffset=new Float32Array(2),this._pixelSize=new a.Point,this.pixelSize=1,this._clamp=i,this._kernels=null,Array.isArray(e)?this.kernels=e:(this._blur=e,this.quality=t)}n&&(e.__proto__=n);var t={kernels:{configurable:!0},clamp:{configurable:!0},pixelSize:{configurable:!0},quality:{configurable:!0},blur:{configurable:!0}};return((e.prototype=Object.create(n&&n.prototype)).constructor=e).prototype.apply=function(e,t,i,n){var s,r=this.pixelSize.x/t.size.width,o=this.pixelSize.y/t.size.height;if(1===this._quality||0===this._blur)s=this._kernels[0]+.5,this.uniforms.uOffset[0]=s*r,this.uniforms.uOffset[1]=s*o,e.applyFilter(this,t,i,n);else{for(var a,l=e.getRenderTarget(!0),h=t,c=l,p=this._quality-1,u=0;u<p;u++)s=this._kernels[u]+.5,this.uniforms.uOffset[0]=s*r,this.uniforms.uOffset[1]=s*o,e.applyFilter(this,h,c,!0),a=h,h=c,c=a;s=this._kernels[p]+.5,this.uniforms.uOffset[0]=s*r,this.uniforms.uOffset[1]=s*o,e.applyFilter(this,h,i,n),e.returnRenderTarget(l)}},e.prototype._generateKernels=function(){var e=this._blur,t=this._quality,i=[e];if(0<e)for(var n=e,s=e/t,r=1;r<t;r++)i.push(n-=s);this._kernels=i},t.kernels.get=function(){return this._kernels},t.kernels.set=function(e){Array.isArray(e)&&0<e.length?(this._kernels=e,this._quality=e.length,this._blur=Math.max.apply(Math,e)):(this._kernels=[0],this._quality=1)},t.clamp.get=function(){return this._clamp},t.pixelSize.set=function(e){"number"==typeof e?(this._pixelSize.x=e,this._pixelSize.y=e):Array.isArray(e)?(this._pixelSize.x=e[0],this._pixelSize.y=e[1]):e instanceof a.Point?(this._pixelSize.x=e.x,this._pixelSize.y=e.y):(this._pixelSize.x=1,this._pixelSize.y=1)},t.pixelSize.get=function(){return this._pixelSize},t.quality.get=function(){return this._quality},t.quality.set=function(e){this._quality=Math.max(1,Math.round(e)),this._generateKernels()},t.blur.get=function(){return this._blur},t.blur.set=function(e){this._blur=e,this._generateKernels()},Object.defineProperties(e.prototype,t),e}(a.Filter),h=n,c=function(t){function e(e){void 0===e&&(e=.5),t.call(this,h,"\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform float threshold;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    // A simple & fast algorithm for getting brightness.\n    // It's inaccuracy , but good enought for this feature.\n    float _max = max(max(color.r, color.g), color.b);\n    float _min = min(min(color.r, color.g), color.b);\n    float brightness = (_max + _min) * 0.5;\n\n    if(brightness > threshold) {\n        gl_FragColor = color;\n    } else {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n    }\n}\n"),this.threshold=e}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={threshold:{configurable:!0}};return i.threshold.get=function(){return this.uniforms.threshold},i.threshold.set=function(e){this.uniforms.threshold=e},Object.defineProperties(e.prototype,i),e}(a.Filter),r=function(o){function e(e){o.call(this,h,"uniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D bloomTexture;\nuniform float bloomScale;\nuniform float brightness;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    color.rgb *= brightness;\n    vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);\n    bloomColor.rgb *= bloomScale;\n    gl_FragColor = color + bloomColor;\n}\n"),"number"==typeof e&&(e={threshold:e}),e=Object.assign({threshold:.5,bloomScale:1,brightness:1,kernels:null,blur:8,quality:4,pixelSize:1,resolution:a.settings.RESOLUTION},e),this.bloomScale=e.bloomScale,this.brightness=e.brightness;var t=e.kernels,i=e.blur,n=e.quality,s=e.pixelSize,r=e.resolution;this._extractFilter=new c(e.threshold),this._extractFilter.resolution=r,this._blurFilter=t?new l(t):new l(i,n),this.pixelSize=s,this.resolution=r}o&&(e.__proto__=o);var t={resolution:{configurable:!0},threshold:{configurable:!0},kernels:{configurable:!0},blur:{configurable:!0},quality:{configurable:!0},pixelSize:{configurable:!0}};return((e.prototype=Object.create(o&&o.prototype)).constructor=e).prototype.apply=function(e,t,i,n,s){var r=e.getRenderTarget(!0);this._extractFilter.apply(e,t,r,!0,s);var o=e.getRenderTarget(!0);this._blurFilter.apply(e,r,o,!0,s),this.uniforms.bloomScale=this.bloomScale,this.uniforms.brightness=this.brightness,this.uniforms.bloomTexture=o,e.applyFilter(this,t,i,n),e.returnRenderTarget(o),e.returnRenderTarget(r)},t.resolution.get=function(){return this._resolution},t.resolution.set=function(e){this._resolution=e,this._extractFilter&&(this._extractFilter.resolution=e),this._blurFilter&&(this._blurFilter.resolution=e)},t.threshold.get=function(){return this._extractFilter.threshold},t.threshold.set=function(e){this._extractFilter.threshold=e},t.kernels.get=function(){return this._blurFilter.kernels},t.kernels.set=function(e){this._blurFilter.kernels=e},t.blur.get=function(){return this._blurFilter.blur},t.blur.set=function(e){this._blurFilter.blur=e},t.quality.get=function(){return this._blurFilter.quality},t.quality.set=function(e){this._blurFilter.quality=e},t.pixelSize.get=function(){return this._blurFilter.pixelSize},t.pixelSize.set=function(e){this._blurFilter.pixelSize=e},Object.defineProperties(e.prototype,t),e}(a.Filter),o=function(t){function e(e){void 0===e&&(e=8),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform vec4 filterArea;\nuniform float pixelSize;\nuniform sampler2D uSampler;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 pixelate(vec2 coord, vec2 size)\n{\n    return floor( coord / size ) * size;\n}\n\nvec2 getMod(vec2 coord, vec2 size)\n{\n    return mod( coord , size) / size;\n}\n\nfloat character(float n, vec2 p)\n{\n    p = floor(p*vec2(4.0, -4.0) + 2.5);\n    if (clamp(p.x, 0.0, 4.0) == p.x && clamp(p.y, 0.0, 4.0) == p.y)\n    {\n        if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\n    }\n    return 0.0;\n}\n\nvoid main()\n{\n    vec2 coord = mapCoord(vTextureCoord);\n\n    // get the rounded color..\n    vec2 pixCoord = pixelate(coord, vec2(pixelSize));\n    pixCoord = unmapCoord(pixCoord);\n\n    vec4 color = texture2D(uSampler, pixCoord);\n\n    // determine the character to use\n    float gray = (color.r + color.g + color.b) / 3.0;\n\n    float n =  65536.0;             // .\n    if (gray > 0.2) n = 65600.0;    // :\n    if (gray > 0.3) n = 332772.0;   // *\n    if (gray > 0.4) n = 15255086.0; // o\n    if (gray > 0.5) n = 23385164.0; // &\n    if (gray > 0.6) n = 15252014.0; // 8\n    if (gray > 0.7) n = 13199452.0; // @\n    if (gray > 0.8) n = 11512810.0; // #\n\n    // get the mod..\n    vec2 modd = getMod(coord, vec2(pixelSize));\n\n    gl_FragColor = color * character( n, vec2(-1.0) + modd * 2.0);\n\n}"),this.size=e}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={size:{configurable:!0}};return i.size.get=function(){return this.uniforms.pixelSize},i.size.set=function(e){this.uniforms.pixelSize=e},Object.defineProperties(e.prototype,i),e}(a.Filter),p=function(t){function e(e){void 0===e&&(e={}),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform float transformX;\nuniform float transformY;\nuniform vec3 lightColor;\nuniform float lightAlpha;\nuniform vec3 shadowColor;\nuniform float shadowAlpha;\n\nvoid main(void) {\n    vec2 transform = vec2(1.0 / filterArea) * vec2(transformX, transformY);\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float light = texture2D(uSampler, vTextureCoord - transform).a;\n    float shadow = texture2D(uSampler, vTextureCoord + transform).a;\n\n    color.rgb = mix(color.rgb, lightColor, clamp((color.a - light) * lightAlpha, 0.0, 1.0));\n    color.rgb = mix(color.rgb, shadowColor, clamp((color.a - shadow) * shadowAlpha, 0.0, 1.0));\n    gl_FragColor = vec4(color.rgb * color.a, color.a);\n}\n"),this.uniforms.lightColor=new Float32Array(3),this.uniforms.shadowColor=new Float32Array(3),e=Object.assign({rotation:45,thickness:2,lightColor:16777215,lightAlpha:.7,shadowColor:0,shadowAlpha:.7},e),this.rotation=e.rotation,this.thickness=e.thickness,this.lightColor=e.lightColor,this.lightAlpha=e.lightAlpha,this.shadowColor=e.shadowColor,this.shadowAlpha=e.shadowAlpha}t&&(e.__proto__=t);var i={rotation:{configurable:!0},thickness:{configurable:!0},lightColor:{configurable:!0},lightAlpha:{configurable:!0},shadowColor:{configurable:!0},shadowAlpha:{configurable:!0}};return((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._updateTransform=function(){this.uniforms.transformX=this._thickness*Math.cos(this._angle),this.uniforms.transformY=this._thickness*Math.sin(this._angle)},i.rotation.get=function(){return this._angle/a.DEG_TO_RAD},i.rotation.set=function(e){this._angle=e*a.DEG_TO_RAD,this._updateTransform()},i.thickness.get=function(){return this._thickness},i.thickness.set=function(e){this._thickness=e,this._updateTransform()},i.lightColor.get=function(){return a.utils.rgb2hex(this.uniforms.lightColor)},i.lightColor.set=function(e){a.utils.hex2rgb(e,this.uniforms.lightColor)},i.lightAlpha.get=function(){return this.uniforms.lightAlpha},i.lightAlpha.set=function(e){this.uniforms.lightAlpha=e},i.shadowColor.get=function(){return a.utils.rgb2hex(this.uniforms.shadowColor)},i.shadowColor.set=function(e){a.utils.hex2rgb(e,this.uniforms.shadowColor)},i.shadowAlpha.get=function(){return this.uniforms.shadowAlpha},i.shadowAlpha.set=function(e){this.uniforms.shadowAlpha=e},Object.defineProperties(e.prototype,i),e}(a.Filter),u=a.filters,d=u.BlurXFilter,m=u.BlurYFilter,f=u.AlphaFilter,g=function(o){function e(e,t,i,n){var s,r;void 0===e&&(e=2),void 0===t&&(t=4),void 0===i&&(i=a.settings.RESOLUTION),void 0===n&&(n=5),o.call(this),"number"==typeof e?r=s=e:e instanceof a.Point?(s=e.x,r=e.y):Array.isArray(e)&&(s=e[0],r=e[1]),this.blurXFilter=new d(s,t,i,n),this.blurYFilter=new m(r,t,i,n),this.blurYFilter.blendMode=a.BLEND_MODES.SCREEN,this.defaultFilter=new f}o&&(e.__proto__=o);var t={blur:{configurable:!0},blurX:{configurable:!0},blurY:{configurable:!0}};return((e.prototype=Object.create(o&&o.prototype)).constructor=e).prototype.apply=function(e,t,i){var n=e.getRenderTarget(!0);this.defaultFilter.apply(e,t,i),this.blurXFilter.apply(e,t,n),this.blurYFilter.apply(e,n,i),e.returnRenderTarget(n)},t.blur.get=function(){return this.blurXFilter.blur},t.blur.set=function(e){this.blurXFilter.blur=this.blurYFilter.blur=e},t.blurX.get=function(){return this.blurXFilter.blur},t.blurX.set=function(e){this.blurXFilter.blur=e},t.blurY.get=function(){return this.blurYFilter.blur},t.blurY.set=function(e){this.blurYFilter.blur=e},Object.defineProperties(e.prototype,t),e}(a.Filter),v=function(n){function e(e,t,i){n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","uniform float radius;\nuniform float strength;\nuniform vec2 center;\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nvoid main()\n{\n    vec2 coord = vTextureCoord * filterArea.xy;\n    coord -= center * dimensions.xy;\n    float distance = length(coord);\n    if (distance < radius) {\n        float percent = distance / radius;\n        if (strength > 0.0) {\n            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);\n        } else {\n            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);\n        }\n    }\n    coord += center * dimensions.xy;\n    coord /= filterArea.xy;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    gl_FragColor = color;\n}\n"),this.uniforms.dimensions=new Float32Array(2),this.center=e||[.5,.5],this.radius=t||100,this.strength=i||1}n&&(e.__proto__=n);var t={radius:{configurable:!0},strength:{configurable:!0},center:{configurable:!0}};return((e.prototype=Object.create(n&&n.prototype)).constructor=e).prototype.apply=function(e,t,i,n){this.uniforms.dimensions[0]=t.sourceFrame.width,this.uniforms.dimensions[1]=t.sourceFrame.height,e.applyFilter(this,t,i,n)},t.radius.get=function(){return this.uniforms.radius},t.radius.set=function(e){this.uniforms.radius=e},t.strength.get=function(){return this.uniforms.strength},t.strength.set=function(e){this.uniforms.strength=e},t.center.get=function(){return this.uniforms.center},t.center.set=function(e){this.uniforms.center=e},Object.defineProperties(e.prototype,t),e}(a.Filter),y=function(n){function e(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=1),n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform sampler2D colorMap;\n\nuniform float _mix;\nuniform float _size;\nuniform float _sliceSize;\nuniform float _slicePixelSize;\nuniform float _sliceInnerSize;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord.xy);\n\n    float sliceIndex = color.b * (_size - 1.0);\n    float zSlice0 = floor(sliceIndex);\n    float zSlice1 = ceil(sliceIndex);\n\n    float xOffset = _slicePixelSize * 0.5 + color.r * _sliceInnerSize;\n    float s0 = xOffset + zSlice0 * _sliceSize;\n    float s1 = xOffset + zSlice1 * _sliceSize;\n    vec4 slice0Color = texture2D(colorMap, vec2(s0, color.g));\n    vec4 slice1Color = texture2D(colorMap, vec2(s1, color.g));\n    vec4 adjusted = mix(slice0Color, slice1Color, fract(sliceIndex));\n\n    gl_FragColor = mix(color, adjusted, _mix);\n}\n"),this._size=0,this._sliceSize=0,this._slicePixelSize=0,this._sliceInnerSize=0,this._scaleMode=null,this._nearest=!1,this.nearest=t,this.mix=i,this.colorMap=e}n&&(e.__proto__=n);var t={colorSize:{configurable:!0},colorMap:{configurable:!0},nearest:{configurable:!0}};return((e.prototype=Object.create(n&&n.prototype)).constructor=e).prototype.apply=function(e,t,i,n){this.uniforms._mix=this.mix,e.applyFilter(this,t,i,n)},t.colorSize.get=function(){return this._size},t.colorMap.get=function(){return this._colorMap},t.colorMap.set=function(e){(e=!(e instanceof a.Texture)?a.Texture.from(e):e)&&e.baseTexture&&(e.baseTexture.scaleMode=this._scaleMode,e.baseTexture.mipmap=!1,this._size=e.height,this._sliceSize=1/this._size,this._slicePixelSize=this._sliceSize/this._size,this._sliceInnerSize=this._slicePixelSize*(this._size-1),this.uniforms._size=this._size,this.uniforms._sliceSize=this._sliceSize,this.uniforms._slicePixelSize=this._slicePixelSize,this.uniforms._sliceInnerSize=this._sliceInnerSize,this.uniforms.colorMap=e),this._colorMap=e},t.nearest.get=function(){return this._nearest},t.nearest.set=function(e){this._nearest=e,this._scaleMode=e?a.SCALE_MODES.NEAREST:a.SCALE_MODES.LINEAR;e=this._colorMap;e&&e.baseTexture&&(e.baseTexture._glTextures={},e.baseTexture.scaleMode=this._scaleMode,e.baseTexture.mipmap=!1,e._updateID++,e.baseTexture.emit("update",e.baseTexture))},e.prototype.updateColorMap=function(){var e=this._colorMap;e&&e.baseTexture&&(e._updateID++,e.baseTexture.emit("update",e.baseTexture),this.colorMap=e)},e.prototype.destroy=function(e){this._colorMap&&this._colorMap.destroy(e),n.prototype.destroy.call(this)},Object.defineProperties(e.prototype,t),e}(a.Filter),b=function(n){function e(e,t,i){void 0===e&&(e=16711680),void 0===t&&(t=0),void 0===i&&(i=.4),n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec3 originalColor;\nuniform vec3 newColor;\nuniform float epsilon;\nvoid main(void) {\n    vec4 currentColor = texture2D(uSampler, vTextureCoord);\n    vec3 colorDiff = originalColor - (currentColor.rgb / max(currentColor.a, 0.0000000001));\n    float colorDistance = length(colorDiff);\n    float doReplace = step(colorDistance, epsilon);\n    gl_FragColor = vec4(mix(currentColor.rgb, (newColor + colorDiff) * currentColor.a, doReplace), currentColor.a);\n}\n"),this.uniforms.originalColor=new Float32Array(3),this.uniforms.newColor=new Float32Array(3),this.originalColor=e,this.newColor=t,this.epsilon=i}n&&(e.__proto__=n),(e.prototype=Object.create(n&&n.prototype)).constructor=e;var t={originalColor:{configurable:!0},newColor:{configurable:!0},epsilon:{configurable:!0}};return t.originalColor.set=function(e){var t=this.uniforms.originalColor;"number"==typeof e?(a.utils.hex2rgb(e,t),this._originalColor=e):(t[0]=e[0],t[1]=e[1],t[2]=e[2],this._originalColor=a.utils.rgb2hex(t))},t.originalColor.get=function(){return this._originalColor},t.newColor.set=function(e){var t=this.uniforms.newColor;"number"==typeof e?(a.utils.hex2rgb(e,t),this._newColor=e):(t[0]=e[0],t[1]=e[1],t[2]=e[2],this._newColor=a.utils.rgb2hex(t))},t.newColor.get=function(){return this._newColor},t.epsilon.set=function(e){this.uniforms.epsilon=e},t.epsilon.get=function(){return this.uniforms.epsilon},Object.defineProperties(e.prototype,t),e}(a.Filter),S=function(n){function e(e,t,i){n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying mediump vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 texelSize;\nuniform float matrix[9];\n\nvoid main(void)\n{\n   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left\n   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center\n   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right\n\n   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left\n   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center\n   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right\n\n   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left\n   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center\n   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right\n\n   gl_FragColor =\n       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\n       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\n       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\n\n   gl_FragColor.a = c22.a;\n}\n"),this.uniforms.texelSize=new Float32Array(9),this.matrix=e,this.width=t,this.height=i}n&&(e.__proto__=n),(e.prototype=Object.create(n&&n.prototype)).constructor=e;var t={matrix:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};return t.matrix.get=function(){return this.uniforms.matrix},t.matrix.set=function(e){this.uniforms.matrix=new Float32Array(e)},t.width.get=function(){return 1/this.uniforms.texelSize[0]},t.width.set=function(e){this.uniforms.texelSize[0]=1/e},t.height.get=function(){return 1/this.uniforms.texelSize[1]},t.height.set=function(e){this.uniforms.texelSize[1]=1/e},Object.defineProperties(e.prototype,t),e}(a.Filter),T=((t=a.Filter)&&(x.__proto__=t),(x.prototype=Object.create(t&&t.prototype)).constructor=x),_=function(t){function e(e){t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nconst float SQRT_2 = 1.414213;\n\nconst float light = 1.0;\n\nuniform float curvature;\nuniform float lineWidth;\nuniform float lineContrast;\nuniform bool verticalLine;\nuniform float noise;\nuniform float noiseSize;\n\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\n\nuniform float seed;\nuniform float time;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n    vec2 coord = pixelCoord / dimensions;\n\n    vec2 dir = vec2(coord - vec2(0.5, 0.5));\n\n    float _c = curvature > 0. ? curvature : 1.;\n    float k = curvature > 0. ?(length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;\n    vec2 uv = dir * k;\n\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 rgb = gl_FragColor.rgb;\n\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        rgb += _noise * noise;\n    }\n\n    if (lineWidth > 0.0) {\n        float v = (verticalLine ? uv.x * dimensions.x : uv.y * dimensions.y) * min(1.0, 2.0 / lineWidth ) / _c;\n        float j = 1. + cos(v * 1.2 - time) * 0.5 * lineContrast;\n        rgb *= j;\n        float segment = verticalLine ? mod((dir.x + .5) * dimensions.x, 4.) : mod((dir.y + .5) * dimensions.y, 4.);\n        rgb *= 0.99 + ceil(segment) * 0.015;\n    }\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    gl_FragColor.rgb = rgb;\n}\n"),this.uniforms.dimensions=new Float32Array(2),this.time=0,this.seed=0,Object.assign(this,{curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,seed:0,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0},e)}t&&(e.__proto__=t);var i={curvature:{configurable:!0},lineWidth:{configurable:!0},lineContrast:{configurable:!0},verticalLine:{configurable:!0},noise:{configurable:!0},noiseSize:{configurable:!0},vignetting:{configurable:!0},vignettingAlpha:{configurable:!0},vignettingBlur:{configurable:!0}};return((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.apply=function(e,t,i,n){this.uniforms.dimensions[0]=t.sourceFrame.width,this.uniforms.dimensions[1]=t.sourceFrame.height,this.uniforms.seed=this.seed,this.uniforms.time=this.time,e.applyFilter(this,t,i,n)},i.curvature.set=function(e){this.uniforms.curvature=e},i.curvature.get=function(){return this.uniforms.curvature},i.lineWidth.set=function(e){this.uniforms.lineWidth=e},i.lineWidth.get=function(){return this.uniforms.lineWidth},i.lineContrast.set=function(e){this.uniforms.lineContrast=e},i.lineContrast.get=function(){return this.uniforms.lineContrast},i.verticalLine.set=function(e){this.uniforms.verticalLine=e},i.verticalLine.get=function(){return this.uniforms.verticalLine},i.noise.set=function(e){this.uniforms.noise=e},i.noise.get=function(){return this.uniforms.noise},i.noiseSize.set=function(e){this.uniforms.noiseSize=e},i.noiseSize.get=function(){return this.uniforms.noiseSize},i.vignetting.set=function(e){this.uniforms.vignetting=e},i.vignetting.get=function(){return this.uniforms.vignetting},i.vignettingAlpha.set=function(e){this.uniforms.vignettingAlpha=e},i.vignettingAlpha.get=function(){return this.uniforms.vignettingAlpha},i.vignettingBlur.set=function(e){this.uniforms.vignettingBlur=e},i.vignettingBlur.get=function(){return this.uniforms.vignettingBlur},Object.defineProperties(e.prototype,i),e}(a.Filter),A=function(i){function e(e,t){void 0===e&&(e=1),void 0===t&&(t=5),i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec4 filterArea;\nuniform sampler2D uSampler;\n\nuniform float angle;\nuniform float scale;\n\nfloat pattern()\n{\n   float s = sin(angle), c = cos(angle);\n   vec2 tex = vTextureCoord * filterArea.xy;\n   vec2 point = vec2(\n       c * tex.x - s * tex.y,\n       s * tex.x + c * tex.y\n   ) * scale;\n   return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main()\n{\n   vec4 color = texture2D(uSampler, vTextureCoord);\n   float average = (color.r + color.g + color.b) / 3.0;\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n}\n"),this.scale=e,this.angle=t}i&&(e.__proto__=i),(e.prototype=Object.create(i&&i.prototype)).constructor=e;var t={scale:{configurable:!0},angle:{configurable:!0}};return t.scale.get=function(){return this.uniforms.scale},t.scale.set=function(e){this.uniforms.scale=e},t.angle.get=function(){return this.uniforms.angle},t.angle.set=function(e){this.uniforms.angle=e},Object.defineProperties(e.prototype,t),e}(a.Filter),P=function(o){function e(e){e&&e.constructor!==Object&&(console.warn("DropShadowFilter now uses options instead of (rotation, distance, blur, color, alpha)"),e={rotation:e},void 0!==arguments[1]&&(e.distance=arguments[1]),void 0!==arguments[2]&&(e.blur=arguments[2]),void 0!==arguments[3]&&(e.color=arguments[3]),void 0!==arguments[4]&&(e.alpha=arguments[4])),e=Object.assign({rotation:45,distance:5,color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:a.settings.RESOLUTION},e),o.call(this);var t=e.kernels,i=e.blur,n=e.quality,s=e.pixelSize,r=e.resolution;this._tintFilter=new a.Filter("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform vec3 color;\nvoid main(void){\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n\n    // Un-premultiply alpha before applying the color\n    if (sample.a > 0.0) {\n        sample.rgb /= sample.a;\n    }\n\n    // Premultiply alpha again\n    sample.rgb = color.rgb * sample.a;\n\n    // alpha user alpha\n    sample *= alpha;\n\n    gl_FragColor = sample;\n}"),this._tintFilter.uniforms.color=new Float32Array(4),this._tintFilter.resolution=r,this._blurFilter=t?new l(t):new l(i,n),this.pixelSize=s,this.resolution=r,this.targetTransform=new a.Matrix;i=e.shadowOnly,n=e.rotation,s=e.distance,r=e.alpha,e=e.color;this.shadowOnly=i,this.rotation=n,this.distance=s,this.alpha=r,this.color=e,this._updatePadding()}o&&(e.__proto__=o);var t={resolution:{configurable:!0},distance:{configurable:!0},rotation:{configurable:!0},alpha:{configurable:!0},color:{configurable:!0},kernels:{configurable:!0},blur:{configurable:!0},quality:{configurable:!0},pixelSize:{configurable:!0}};return((e.prototype=Object.create(o&&o.prototype)).constructor=e).prototype.apply=function(e,t,i,n){var s=e.getRenderTarget();s.transform=this.targetTransform,this._tintFilter.apply(e,t,s,!0),s.transform=null,this._blurFilter.apply(e,s,i),!0!==this.shadowOnly&&e.applyFilter(this,t,i,n),e.returnRenderTarget(s)},e.prototype._updatePadding=function(){this.padding=this.distance+2*this.blur},e.prototype._updateTargetTransform=function(){this.targetTransform.tx=this.distance*Math.cos(this.angle),this.targetTransform.ty=this.distance*Math.sin(this.angle)},t.resolution.get=function(){return this._resolution},t.resolution.set=function(e){this._resolution=e,this._tintFilter&&(this._tintFilter.resolution=e),this._blurFilter&&(this._blurFilter.resolution=e)},t.distance.get=function(){return this._distance},t.distance.set=function(e){this._distance=e,this._updatePadding(),this._updateTargetTransform()},t.rotation.get=function(){return this.angle/a.DEG_TO_RAD},t.rotation.set=function(e){this.angle=e*a.DEG_TO_RAD,this._updateTargetTransform()},t.alpha.get=function(){return this._tintFilter.uniforms.alpha},t.alpha.set=function(e){this._tintFilter.uniforms.alpha=e},t.color.get=function(){return a.utils.rgb2hex(this._tintFilter.uniforms.color)},t.color.set=function(e){a.utils.hex2rgb(e,this._tintFilter.uniforms.color)},t.kernels.get=function(){return this._blurFilter.kernels},t.kernels.set=function(e){this._blurFilter.kernels=e},t.blur.get=function(){return this._blurFilter.blur},t.blur.set=function(e){this._blurFilter.blur=e,this._updatePadding()},t.quality.get=function(){return this._blurFilter.quality},t.quality.set=function(e){this._blurFilter.quality=e},t.pixelSize.get=function(){return this._blurFilter.pixelSize},t.pixelSize.set=function(e){this._blurFilter.pixelSize=e},Object.defineProperties(e.prototype,t),e}(a.Filter),I=function(t){function e(e){void 0===e&&(e=5),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float strength;\nuniform vec4 filterArea;\n\n\nvoid main(void)\n{\n\tvec2 onePixel = vec2(1.0 / filterArea);\n\n\tvec4 color;\n\n\tcolor.rgb = vec3(0.5);\n\n\tcolor -= texture2D(uSampler, vTextureCoord - onePixel) * strength;\n\tcolor += texture2D(uSampler, vTextureCoord + onePixel) * strength;\n\n\tcolor.rgb = vec3((color.r + color.g + color.b) / 3.0);\n\n\tfloat alpha = texture2D(uSampler, vTextureCoord).a;\n\n\tgl_FragColor = vec4(color.rgb * alpha, alpha);\n}\n"),this.strength=e}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={strength:{configurable:!0}};return i.strength.get=function(){return this.uniforms.strength},i.strength.set=function(e){this.uniforms.strength=e},Object.defineProperties(e.prototype,i),e}(a.Filter),C=function(t){function e(e){void 0===e&&(e={}),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","// precision highp float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\nuniform float aspect;\n\nuniform sampler2D displacementMap;\nuniform float offset;\nuniform float sinDir;\nuniform float cosDir;\nuniform int fillMode;\n\nuniform float seed;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nconst int TRANSPARENT = 0;\nconst int ORIGINAL = 1;\nconst int LOOP = 2;\nconst int CLAMP = 3;\nconst int MIRROR = 4;\n\nvoid main(void)\n{\n    vec2 coord = (vTextureCoord * filterArea.xy) / dimensions;\n\n    if (coord.x > 1.0 || coord.y > 1.0) {\n        return;\n    }\n\n    float cx = coord.x - 0.5;\n    float cy = (coord.y - 0.5) * aspect;\n    float ny = (-sinDir * cx + cosDir * cy) / aspect + 0.5;\n\n    // displacementMap: repeat\n    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);\n\n    // displacementMap: mirror\n    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);\n\n    vec4 dc = texture2D(displacementMap, vec2(0.5, ny));\n\n    float displacement = (dc.r - dc.g) * (offset / filterArea.x);\n\n    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * aspect);\n\n    if (fillMode == CLAMP) {\n        coord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    } else {\n        if( coord.x > filterClamp.z ) {\n            if (fillMode == ORIGINAL) {\n                gl_FragColor = texture2D(uSampler, vTextureCoord);\n                return;\n            } else if (fillMode == LOOP) {\n                coord.x -= filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x = filterClamp.z * 2.0 - coord.x;\n            } else {\n                gl_FragColor = vec4(0., 0., 0., 0.);\n                return;\n            }\n        } else if( coord.x < filterClamp.x ) {\n            if (fillMode == ORIGINAL) {\n                gl_FragColor = texture2D(uSampler, vTextureCoord);\n                return;\n            } else if (fillMode == LOOP) {\n                coord.x += filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x *= -filterClamp.z;\n            } else {\n                gl_FragColor = vec4(0., 0., 0., 0.);\n                return;\n            }\n        }\n\n        if( coord.y > filterClamp.w ) {\n            if (fillMode == ORIGINAL) {\n                gl_FragColor = texture2D(uSampler, vTextureCoord);\n                return;\n            } else if (fillMode == LOOP) {\n                coord.y -= filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y = filterClamp.w * 2.0 - coord.y;\n            } else {\n                gl_FragColor = vec4(0., 0., 0., 0.);\n                return;\n            }\n        } else if( coord.y < filterClamp.y ) {\n            if (fillMode == ORIGINAL) {\n                gl_FragColor = texture2D(uSampler, vTextureCoord);\n                return;\n            } else if (fillMode == LOOP) {\n                coord.y += filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y *= -filterClamp.w;\n            } else {\n                gl_FragColor = vec4(0., 0., 0., 0.);\n                return;\n            }\n        }\n    }\n\n    gl_FragColor.r = texture2D(uSampler, coord + red * (1.0 - seed * 0.4) / filterArea.xy).r;\n    gl_FragColor.g = texture2D(uSampler, coord + green * (1.0 - seed * 0.3) / filterArea.xy).g;\n    gl_FragColor.b = texture2D(uSampler, coord + blue * (1.0 - seed * 0.2) / filterArea.xy).b;\n    gl_FragColor.a = texture2D(uSampler, coord).a;\n}\n"),this.uniforms.dimensions=new Float32Array(2),e=Object.assign({slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:[0,0],green:[0,0],blue:[0,0],minSize:8,sampleSize:512},e),this.direction=e.direction,this.red=e.red,this.green=e.green,this.blue=e.blue,this.offset=e.offset,this.fillMode=e.fillMode,this.average=e.average,this.seed=e.seed,this.minSize=e.minSize,this.sampleSize=e.sampleSize,this._canvas=document.createElement("canvas"),this._canvas.width=4,this._canvas.height=this.sampleSize,this.texture=a.Texture.fromCanvas(this._canvas,a.SCALE_MODES.NEAREST),this._slices=0,this.slices=e.slices}t&&(e.__proto__=t);var i={sizes:{configurable:!0},offsets:{configurable:!0},slices:{configurable:!0},direction:{configurable:!0},red:{configurable:!0},green:{configurable:!0},blue:{configurable:!0}};return((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.apply=function(e,t,i,n){var s=t.sourceFrame.width,r=t.sourceFrame.height;this.uniforms.dimensions[0]=s,this.uniforms.dimensions[1]=r,this.uniforms.aspect=r/s,this.uniforms.seed=this.seed,this.uniforms.offset=this.offset,this.uniforms.fillMode=this.fillMode,e.applyFilter(this,t,i,n)},e.prototype._randomizeSizes=function(){var e=this._sizes,t=this._slices-1,i=this.sampleSize,n=Math.min(this.minSize/i,.9/this._slices);if(this.average){for(var s=this._slices,r=1,o=0;o<t;o++){var a=Math.max(r/(s-o)*(1-.6*Math.random()),n);r-=e[o]=a}e[t]=r}else{for(var l=1,h=Math.sqrt(1/this._slices),c=0;c<t;c++){var p=Math.max(h*l*Math.random(),n);l-=e[c]=p}e[t]=l}this.shuffle()},e.prototype.shuffle=function(){for(var e=this._sizes,t=this._slices-1;0<t;t--){var i=Math.random()*t>>0,n=e[t];e[t]=e[i],e[i]=n}},e.prototype._randomizeOffsets=function(){for(var e=0;e<this._slices;e++)this._offsets[e]=Math.random()*(Math.random()<.5?-1:1)},e.prototype.refresh=function(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()},e.prototype.redraw=function(){var e=this.sampleSize,t=this.texture,i=this._canvas.getContext("2d");i.clearRect(0,0,8,e);for(var n=0,s=0;s<this._slices;s++){var r=Math.floor(256*this._offsets[s]),o=this._sizes[s]*e;i.fillStyle="rgba("+(0<r?r:0)+", "+(r<0?-r:0)+", 0, 1)",i.fillRect(0,n>>0,e,1+o>>0),n+=o}t.baseTexture.emit("update",t.baseTexture),this.uniforms.displacementMap=t},i.sizes.set=function(e){for(var t=Math.min(this._slices,e.length),i=0;i<t;i++)this._sizes[i]=e[i]},i.sizes.get=function(){return this._sizes},i.offsets.set=function(e){for(var t=Math.min(this._slices,e.length),i=0;i<t;i++)this._offsets[i]=e[i]},i.offsets.get=function(){return this._offsets},i.slices.get=function(){return this._slices},i.slices.set=function(e){this._slices!==e&&(this._slices=e,this.uniforms.slices=e,this._sizes=this.uniforms.slicesWidth=new Float32Array(e),this._offsets=this.uniforms.slicesOffset=new Float32Array(e),this.refresh())},i.direction.get=function(){return this._direction},i.direction.set=function(e){this._direction!==e&&(e=(this._direction=e)*a.DEG_TO_RAD,this.uniforms.sinDir=Math.sin(e),this.uniforms.cosDir=Math.cos(e))},i.red.get=function(){return this.uniforms.red},i.red.set=function(e){this.uniforms.red=e},i.green.get=function(){return this.uniforms.green},i.green.set=function(e){this.uniforms.green=e},i.blue.get=function(){return this.uniforms.blue},i.blue.set=function(e){this.uniforms.blue=e},e.prototype.destroy=function(){this.texture.destroy(!0),this.texture=null,this._canvas=null,this.red=null,this.green=null,this.blue=null,this._sizes=null,this._offsets=null},Object.defineProperties(e.prototype,i),e}(a.Filter);function x(){t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);\n\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n    if (lum < 1.00)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.75)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.50)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.3)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n}\n")}function B(e){i.call(this,n,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform float gamma;\nuniform float contrast;\nuniform float saturation;\nuniform float brightness;\nuniform float red;\nuniform float green;\nuniform float blue;\nuniform float alpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (c.a > 0.0) {\n        c.rgb /= c.a;\n\n        vec3 rgb = pow(c.rgb, vec3(1. / gamma));\n        rgb = mix(vec3(.5), mix(vec3(dot(vec3(.2125, .7154, .0721), rgb)), rgb, saturation), contrast);\n        rgb.r *= red;\n        rgb.g *= green;\n        rgb.b *= blue;\n        c.rgb = rgb * brightness;\n\n        c.rgb *= c.a;\n    }\n\n    gl_FragColor = c * alpha;\n}\n"),Object.assign(this,{gamma:1,saturation:1,contrast:1,brightness:1,red:1,green:1,blue:1,alpha:1},e)}C.TRANSPARENT=0,C.ORIGINAL=1,C.LOOP=2,C.CLAMP=3,C.MIRROR=4;var E=function(r){function e(e,t,i,n,s){void 0===t&&(t=4),void 0===i&&(i=0),void 0===n&&(n=16777215),r.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nuniform float distance;\nuniform float outerStrength;\nuniform float innerStrength;\nuniform vec4 glowColor;\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nconst float PI = 3.14159265358979323846264;\n\nvoid main(void) {\n    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\n    vec4 curColor;\n    float totalAlpha = 0.0;\n    float maxTotalAlpha = 0.0;\n    float cosAngle;\n    float sinAngle;\n    vec2 displaced;\n    for (float angle = 0.0; angle <= PI * 2.0; angle += %QUALITY_DIST%) {\n       cosAngle = cos(angle);\n       sinAngle = sin(angle);\n       for (float curDistance = 1.0; curDistance <= %DIST%; curDistance++) {\n           displaced.x = vTextureCoord.x + cosAngle * curDistance * px.x;\n           displaced.y = vTextureCoord.y + sinAngle * curDistance * px.y;\n           curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));\n           totalAlpha += (distance - curDistance) * curColor.a;\n           maxTotalAlpha += (distance - curDistance);\n       }\n    }\n    maxTotalAlpha = max(maxTotalAlpha, 0.0001);\n\n    ownColor.a = max(ownColor.a, 0.0001);\n    ownColor.rgb = ownColor.rgb / ownColor.a;\n    float outerGlowAlpha = (totalAlpha / maxTotalAlpha)  * outerStrength * (1. - ownColor.a);\n    float innerGlowAlpha = ((maxTotalAlpha - totalAlpha) / maxTotalAlpha) * innerStrength * ownColor.a;\n    float resultAlpha = (ownColor.a + outerGlowAlpha);\n    gl_FragColor = vec4(mix(mix(ownColor.rgb, glowColor.rgb, innerGlowAlpha / ownColor.a), glowColor.rgb, outerGlowAlpha / resultAlpha) * resultAlpha, resultAlpha);\n}\n".replace(/%QUALITY_DIST%/gi,""+(1/(s=void 0===s?.1:s)/(e=void 0===e?10:e)).toFixed(7)).replace(/%DIST%/gi,""+e.toFixed(7))),this.uniforms.glowColor=new Float32Array([0,0,0,1]),this.distance=e,this.color=n,this.outerStrength=t,this.innerStrength=i}r&&(e.__proto__=r),(e.prototype=Object.create(r&&r.prototype)).constructor=e;var t={color:{configurable:!0},distance:{configurable:!0},outerStrength:{configurable:!0},innerStrength:{configurable:!0}};return t.color.get=function(){return a.utils.rgb2hex(this.uniforms.glowColor)},t.color.set=function(e){a.utils.hex2rgb(e,this.uniforms.glowColor)},t.distance.get=function(){return this.uniforms.distance},t.distance.set=function(e){this.uniforms.distance=e},t.outerStrength.get=function(){return this.uniforms.outerStrength},t.outerStrength.set=function(e){this.uniforms.outerStrength=e},t.innerStrength.get=function(){return this.uniforms.innerStrength},t.innerStrength.set=function(e){this.uniforms.innerStrength=e},Object.defineProperties(e.prototype,t),e}(a.Filter),w=function(t){function e(e){t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform vec2 light;\nuniform bool parallel;\nuniform float aspect;\n\nuniform float gain;\nuniform float lacunarity;\nuniform float time;\n\n${perlin}\n\nvoid main(void) {\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    float d;\n\n    if (parallel) {\n        float _cos = light.x;\n        float _sin = light.y;\n        d = (_cos * coord.x) + (_sin * coord.y * aspect);\n    } else {\n        float dx = coord.x - light.x / dimensions.x;\n        float dy = (coord.y - light.y / dimensions.y) * aspect;\n        float dis = sqrt(dx * dx + dy * dy) + 0.00001;\n        d = dy / dis;\n    }\n\n    vec3 dir = vec3(d, d, 0.0);\n\n    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);\n    noise = mix(noise, 0.0, 0.3);\n    //fade vertically.\n    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);\n    mist.a = 1.0;\n\n    gl_FragColor = texture2D(uSampler, vTextureCoord) + mist;\n}\n".replace("${perlin}","vec3 mod289(vec3 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 mod289(vec4 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 permute(vec4 x)\n{\n    return mod289(((x * 34.0) + 1.0) * x);\n}\nvec4 taylorInvSqrt(vec4 r)\n{\n    return 1.79284291400159 - 0.85373472095314 * r;\n}\nvec3 fade(vec3 t)\n{\n    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\n}\n// Classic Perlin noise, periodic variant\nfloat pnoise(vec3 P, vec3 rep)\n{\n    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\n    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\n    Pi0 = mod289(Pi0);\n    Pi1 = mod289(Pi1);\n    vec3 Pf0 = fract(P); // Fractional part for interpolation\n    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n    vec4 iy = vec4(Pi0.yy, Pi1.yy);\n    vec4 iz0 = Pi0.zzzz;\n    vec4 iz1 = Pi1.zzzz;\n    vec4 ixy = permute(permute(ix) + iy);\n    vec4 ixy0 = permute(ixy + iz0);\n    vec4 ixy1 = permute(ixy + iz1);\n    vec4 gx0 = ixy0 * (1.0 / 7.0);\n    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n    gx0 = fract(gx0);\n    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n    vec4 sz0 = step(gz0, vec4(0.0));\n    gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n    gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n    vec4 gx1 = ixy1 * (1.0 / 7.0);\n    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n    gx1 = fract(gx1);\n    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n    vec4 sz1 = step(gz1, vec4(0.0));\n    gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n    gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n    g000 *= norm0.x;\n    g010 *= norm0.y;\n    g100 *= norm0.z;\n    g110 *= norm0.w;\n    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n    g001 *= norm1.x;\n    g011 *= norm1.y;\n    g101 *= norm1.z;\n    g111 *= norm1.w;\n    float n000 = dot(g000, Pf0);\n    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n    float n111 = dot(g111, Pf1);\n    vec3 fade_xyz = fade(Pf0);\n    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n    return 2.2 * n_xyz;\n}\nfloat turb(vec3 P, vec3 rep, float lacunarity, float gain)\n{\n    float sum = 0.0;\n    float sc = 1.0;\n    float totalgain = 1.0;\n    for (float i = 0.0; i < 6.0; i++)\n    {\n        sum += totalgain * pnoise(P * sc, rep);\n        sc *= lacunarity;\n        totalgain *= gain;\n    }\n    return abs(sum);\n}\n")),this.uniforms.dimensions=new Float32Array(2),"number"==typeof e&&(console.warn("GodrayFilter now uses options instead of (angle, gain, lacunarity, time)"),e={angle:e},void 0!==arguments[1]&&(e.gain=arguments[1]),void 0!==arguments[2]&&(e.lacunarity=arguments[2]),void 0!==arguments[3]&&(e.time=arguments[3])),e=Object.assign({angle:30,gain:.5,lacunarity:2.5,time:0,parallel:!0,center:[0,0]},e),this._angleLight=new a.Point,this.angle=e.angle,this.gain=e.gain,this.lacunarity=e.lacunarity,this.parallel=e.parallel,this.center=e.center,this.time=e.time}t&&(e.__proto__=t);var i={angle:{configurable:!0},gain:{configurable:!0},lacunarity:{configurable:!0}};return((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.apply=function(e,t,i,n){var s=t.sourceFrame,r=s.width,s=s.height;this.uniforms.light=this.parallel?this._angleLight:this.center,this.uniforms.parallel=this.parallel,this.uniforms.dimensions[0]=r,this.uniforms.dimensions[1]=s,this.uniforms.aspect=s/r,this.uniforms.time=this.time,e.applyFilter(this,t,i,n)},i.angle.get=function(){return this._angle},i.angle.set=function(e){e=(this._angle=e)*a.DEG_TO_RAD;this._angleLight.x=Math.cos(e),this._angleLight.y=Math.sin(e)},i.gain.get=function(){return this.uniforms.gain},i.gain.set=function(e){this.uniforms.gain=e},i.lacunarity.get=function(){return this.uniforms.lacunarity},i.lacunarity.set=function(e){this.uniforms.lacunarity=e},Object.defineProperties(e.prototype,i),e}(a.Filter),R=function(n){function e(e,t,i){void 0===e&&(e=[0,0]),void 0===t&&(t=5),void 0===i&&(i=0),n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform vec2 uVelocity;\nuniform int uKernelSize;\nuniform float uOffset;\n\nconst int MAX_KERNEL_SIZE = 2048;\n\n// Notice:\n// the perfect way:\n//    int kernelSize = min(uKernelSize, MAX_KERNELSIZE);\n// BUT in real use-case , uKernelSize < MAX_KERNELSIZE almost always.\n// So use uKernelSize directly.\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    if (uKernelSize == 0)\n    {\n        gl_FragColor = color;\n        return;\n    }\n\n    vec2 velocity = uVelocity / filterArea.xy;\n    float offset = -uOffset / length(uVelocity) - 0.5;\n    int k = uKernelSize - 1;\n\n    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {\n        if (i == k) {\n            break;\n        }\n        vec2 bias = velocity * (float(i) / float(k) + offset);\n        color += texture2D(uSampler, vTextureCoord + bias);\n    }\n    gl_FragColor = color / float(uKernelSize);\n}\n"),this.uniforms.uVelocity=new Float32Array(2),this._velocity=new a.ObservablePoint(this.velocityChanged,this),this.velocity=e,this.kernelSize=t,this.offset=i}n&&(e.__proto__=n);var t={velocity:{configurable:!0},offset:{configurable:!0}};return((e.prototype=Object.create(n&&n.prototype)).constructor=e).prototype.apply=function(e,t,i,n){var s=this.velocity,r=s.x,s=s.y;this.uniforms.uKernelSize=0!==r||0!==s?this.kernelSize:0,e.applyFilter(this,t,i,n)},t.velocity.set=function(e){Array.isArray(e)?this._velocity.set(e[0],e[1]):(e instanceof a.Point||e instanceof a.ObservablePoint)&&this._velocity.copy(e)},t.velocity.get=function(){return this._velocity},e.prototype.velocityChanged=function(){this.uniforms.uVelocity[0]=this._velocity.x,this.uniforms.uVelocity[1]=this._velocity.y},t.offset.set=function(e){this.uniforms.uOffset=e},t.offset.get=function(){return this.uniforms.uOffset},Object.defineProperties(e.prototype,t),e}(a.Filter),M=function(n){function e(e,t,i){void 0===t&&(t=.05),i=(i=void 0===i?null:i)||e.length,n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform float epsilon;\n\nconst int MAX_COLORS = %maxColors%;\n\nuniform vec3 originalColors[MAX_COLORS];\nuniform vec3 targetColors[MAX_COLORS];\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    float alpha = gl_FragColor.a;\n    if (alpha < 0.0001)\n    {\n      return;\n    }\n\n    vec3 color = gl_FragColor.rgb / alpha;\n\n    for(int i = 0; i < MAX_COLORS; i++)\n    {\n      vec3 origColor = originalColors[i];\n      if (origColor.r < 0.0)\n      {\n        break;\n      }\n      vec3 colorDiff = origColor - color;\n      if (length(colorDiff) < epsilon)\n      {\n        vec3 targetColor = targetColors[i];\n        gl_FragColor = vec4((targetColor + colorDiff) * alpha, alpha);\n        return;\n      }\n    }\n}\n".replace(/%maxColors%/g,i)),this.epsilon=t,this._maxColors=i,this._replacements=null,this.uniforms.originalColors=new Float32Array(3*i),this.uniforms.targetColors=new Float32Array(3*i),this.replacements=e}n&&(e.__proto__=n),(e.prototype=Object.create(n&&n.prototype)).constructor=e;var t={replacements:{configurable:!0},maxColors:{configurable:!0},epsilon:{configurable:!0}};return t.replacements.set=function(e){var t=this.uniforms.originalColors,i=this.uniforms.targetColors,n=e.length;if(n>this._maxColors)throw"Length of replacements ("+n+") exceeds the maximum colors length ("+this._maxColors+")";t[3*n]=-1;for(var s=0;s<n;s++){var r=e[s],o=r[0];"number"==typeof o?o=a.utils.hex2rgb(o):r[0]=a.utils.rgb2hex(o),t[3*s]=o[0],t[3*s+1]=o[1],t[3*s+2]=o[2];o=r[1];"number"==typeof o?o=a.utils.hex2rgb(o):r[1]=a.utils.rgb2hex(o),i[3*s]=o[0],i[3*s+1]=o[1],i[3*s+2]=o[2]}this._replacements=e},t.replacements.get=function(){return this._replacements},e.prototype.refresh=function(){this.replacements=this._replacements},t.maxColors.get=function(){return this._maxColors},t.epsilon.set=function(e){this.uniforms.epsilon=e},t.epsilon.get=function(){return this.uniforms.epsilon},Object.defineProperties(e.prototype,t),e}(a.Filter),O=function(i){function e(e,t){void 0===t&&(t=0),i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform float sepia;\nuniform float noise;\nuniform float noiseSize;\nuniform float scratch;\nuniform float scratchDensity;\nuniform float scratchWidth;\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\nuniform float seed;\n\nconst float SQRT_2 = 1.414213;\nconst vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvec3 Overlay(vec3 src, vec3 dst)\n{\n    // if (dst <= 0.5) then: 2 * src * dst\n    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)\n    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),\n                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),\n                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));\n}\n\n\nvoid main()\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 color = gl_FragColor.rgb;\n\n    if (sepia > 0.0)\n    {\n        float gray = (color.x + color.y + color.z) / 3.0;\n        vec3 grayscale = vec3(gray);\n\n        color = Overlay(SEPIA_RGB, grayscale);\n\n        color = grayscale + sepia * (color - grayscale);\n    }\n\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        vec2 dir = vec2(vec2(0.5, 0.5) - coord);\n        dir.y *= dimensions.y / dimensions.x;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        color.rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    if (scratchDensity > seed && scratch != 0.0)\n    {\n        float phase = seed * 256.0;\n        float s = mod(floor(phase), 2.0);\n        float dist = 1.0 / scratchDensity;\n        float d = distance(coord, vec2(seed * dist, abs(s - seed * dist)));\n        if (d < seed * 0.6 + 0.4)\n        {\n            highp float period = scratchDensity * 10.0;\n\n            float xx = coord.x * period + phase;\n            float aa = abs(mod(xx, 0.5) * 4.0);\n            float bb = mod(floor(xx / 0.5), 2.0);\n            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);\n\n            float kk = 2.0 * period;\n            float dw = scratchWidth / dimensions.x * (0.75 + seed);\n            float dh = dw * kk;\n\n            float tine = (yy - (2.0 - dh));\n\n            if (tine > 0.0) {\n                float _sign = sign(scratch);\n\n                tine = s * tine / period + scratch + 0.1;\n                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);\n\n                color.rgb *= tine;\n            }\n        }\n    }\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + seed * 512.0, 1024.0 - seed * 512.0);\n        // float _noise = snoise(d) * 0.5;\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        color += _noise * noise;\n    }\n\n    gl_FragColor.rgb = color;\n}\n"),this.uniforms.dimensions=new Float32Array(2),"number"==typeof e?(this.seed=e,e=null):this.seed=t,Object.assign(this,{sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3},e)}i&&(e.__proto__=i);var t={sepia:{configurable:!0},noise:{configurable:!0},noiseSize:{configurable:!0},scratch:{configurable:!0},scratchDensity:{configurable:!0},scratchWidth:{configurable:!0},vignetting:{configurable:!0},vignettingAlpha:{configurable:!0},vignettingBlur:{configurable:!0}};return((e.prototype=Object.create(i&&i.prototype)).constructor=e).prototype.apply=function(e,t,i,n){this.uniforms.dimensions[0]=t.sourceFrame.width,this.uniforms.dimensions[1]=t.sourceFrame.height,this.uniforms.seed=this.seed,e.applyFilter(this,t,i,n)},t.sepia.set=function(e){this.uniforms.sepia=e},t.sepia.get=function(){return this.uniforms.sepia},t.noise.set=function(e){this.uniforms.noise=e},t.noise.get=function(){return this.uniforms.noise},t.noiseSize.set=function(e){this.uniforms.noiseSize=e},t.noiseSize.get=function(){return this.uniforms.noiseSize},t.scratch.set=function(e){this.uniforms.scratch=e},t.scratch.get=function(){return this.uniforms.scratch},t.scratchDensity.set=function(e){this.uniforms.scratchDensity=e},t.scratchDensity.get=function(){return this.uniforms.scratchDensity},t.scratchWidth.set=function(e){this.uniforms.scratchWidth=e},t.scratchWidth.get=function(){return this.uniforms.scratchWidth},t.vignetting.set=function(e){this.uniforms.vignetting=e},t.vignetting.get=function(){return this.uniforms.vignetting},t.vignettingAlpha.set=function(e){this.uniforms.vignettingAlpha=e},t.vignettingAlpha.get=function(){return this.uniforms.vignettingAlpha},t.vignettingBlur.set=function(e){this.uniforms.vignettingBlur=e},t.vignettingBlur.get=function(){return this.uniforms.vignettingBlur},Object.defineProperties(e.prototype,t),e}(a.Filter),N=function(s){function r(e,t,i){void 0===e&&(e=1),void 0===t&&(t=0),void 0===i&&(i=.1);var n=Math.max(i*r.MAX_SAMPLES,r.MIN_SAMPLES),n=(2*Math.PI/n).toFixed(7);s.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 thickness;\nuniform vec4 outlineColor;\nuniform vec4 filterClamp;\n\nconst float DOUBLE_PI = 3.14159265358979323846264 * 2.;\n\nvoid main(void) {\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\n    vec4 curColor;\n    float maxAlpha = 0.;\n    vec2 displaced;\n    for (float angle = 0.; angle <= DOUBLE_PI; angle += ${angleStep}) {\n        displaced.x = vTextureCoord.x + thickness.x * cos(angle);\n        displaced.y = vTextureCoord.y + thickness.y * sin(angle);\n        curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));\n        maxAlpha = max(maxAlpha, curColor.a);\n    }\n    float resultAlpha = max(maxAlpha, ownColor.a);\n    gl_FragColor = vec4((ownColor.rgb + outlineColor.rgb * (1. - ownColor.a)) * resultAlpha, resultAlpha);\n}\n".replace(/\$\{angleStep\}/,n)),this.uniforms.thickness=new Float32Array([0,0]),this.thickness=e,this.uniforms.outlineColor=new Float32Array([0,0,0,1]),this.color=t,this.quality=i}s&&(r.__proto__=s);var e={color:{configurable:!0}};return((r.prototype=Object.create(s&&s.prototype)).constructor=r).prototype.apply=function(e,t,i,n){this.uniforms.thickness[0]=this.thickness/t.size.width,this.uniforms.thickness[1]=this.thickness/t.size.height,e.applyFilter(this,t,i,n)},e.color.get=function(){return a.utils.rgb2hex(this.uniforms.outlineColor)},e.color.set=function(e){a.utils.hex2rgb(e,this.uniforms.outlineColor)},Object.defineProperties(r.prototype,e),r}(a.Filter);N.MIN_SAMPLES=1,N.MAX_SAMPLES=100;var F,D,L=function(t){function e(e){void 0===e&&(e=10),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform vec2 size;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 pixelate(vec2 coord, vec2 size)\n{\n\treturn floor( coord / size ) * size;\n}\n\nvoid main(void)\n{\n    vec2 coord = mapCoord(vTextureCoord);\n\n    coord = pixelate(coord, size);\n\n    coord = unmapCoord(coord);\n\n    gl_FragColor = texture2D(uSampler, coord);\n}\n"),this.size=e}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={size:{configurable:!0}};return i.size.get=function(){return this.uniforms.size},i.size.set=function(e){this.uniforms.size=e="number"==typeof e?[e,e]:e},Object.defineProperties(e.prototype,i),e}(a.Filter),k=function(s){function e(e,t,i,n){void 0===e&&(e=0),void 0===t&&(t=[0,0]),void 0===i&&(i=5),void 0===n&&(n=-1),s.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform float uRadian;\nuniform vec2 uCenter;\nuniform float uRadius;\nuniform int uKernelSize;\n\nconst int MAX_KERNEL_SIZE = 2048;\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    if (uKernelSize == 0)\n    {\n        gl_FragColor = color;\n        return;\n    }\n\n    float aspect = filterArea.y / filterArea.x;\n    vec2 center = uCenter.xy / filterArea.xy;\n    float gradient = uRadius / filterArea.x * 0.3;\n    float radius = uRadius / filterArea.x - gradient * 0.5;\n    int k = uKernelSize - 1;\n\n    vec2 coord = vTextureCoord;\n    vec2 dir = vec2(center - coord);\n    float dist = length(vec2(dir.x, dir.y * aspect));\n\n    float radianStep = uRadian;\n    if (radius >= 0.0 && dist > radius) {\n        float delta = dist - radius;\n        float gap = gradient;\n        float scale = 1.0 - abs(delta / gap);\n        if (scale <= 0.0) {\n            gl_FragColor = color;\n            return;\n        }\n        radianStep *= scale;\n    }\n    radianStep /= float(k);\n\n    float s = sin(radianStep);\n    float c = cos(radianStep);\n    mat2 rotationMatrix = mat2(vec2(c, -s), vec2(s, c));\n\n    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {\n        if (i == k) {\n            break;\n        }\n\n        coord -= center;\n        coord.y *= aspect;\n        coord = rotationMatrix * coord;\n        coord.y /= aspect;\n        coord += center;\n\n        vec4 sample = texture2D(uSampler, coord);\n\n        // switch to pre-multiplied alpha to correctly blur transparent images\n        // sample.rgb *= sample.a;\n\n        color += sample;\n    }\n\n    gl_FragColor = color / float(uKernelSize);\n}\n"),this._angle=0,this.angle=e,this.center=t,this.kernelSize=i,this.radius=n}s&&(e.__proto__=s);var t={angle:{configurable:!0},center:{configurable:!0},radius:{configurable:!0}};return((e.prototype=Object.create(s&&s.prototype)).constructor=e).prototype.apply=function(e,t,i,n){this.uniforms.uKernelSize=0!==this._angle?this.kernelSize:0,e.applyFilter(this,t,i,n)},t.angle.set=function(e){this._angle=e,this.uniforms.uRadian=e*Math.PI/180},t.angle.get=function(){return this._angle},t.center.get=function(){return this.uniforms.uCenter},t.center.set=function(e){this.uniforms.uCenter=e},t.radius.get=function(){return this.uniforms.uRadius},t.radius.set=function(e){this.uniforms.uRadius=e=e<0||e===1/0?-1:e},Object.defineProperties(e.prototype,t),e}(a.Filter),G=function(t){function e(e){t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nuniform bool mirror;\nuniform float boundary;\nuniform vec2 amplitude;\nuniform vec2 waveLength;\nuniform vec2 alpha;\nuniform float time;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n    vec2 coord = pixelCoord / dimensions;\n\n    if (coord.y < boundary) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n        return;\n    }\n\n    float k = (coord.y - boundary) / (1. - boundary + 0.0001);\n    float areaY = boundary * dimensions.y / filterArea.y;\n    float v = areaY + areaY - vTextureCoord.y;\n    float y = mirror ? v : vTextureCoord.y;\n\n    float _amplitude = ((amplitude.y - amplitude.x) * k + amplitude.x ) / filterArea.x;\n    float _waveLength = ((waveLength.y - waveLength.x) * k + waveLength.x) / filterArea.y;\n    float _alpha = (alpha.y - alpha.x) * k + alpha.x;\n\n    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - time) * _amplitude;\n    x = clamp(x, filterClamp.x, filterClamp.z);\n\n    vec4 color = texture2D(uSampler, vec2(x, y));\n\n    gl_FragColor = color * _alpha;\n}\n"),this.uniforms.amplitude=new Float32Array(2),this.uniforms.waveLength=new Float32Array(2),this.uniforms.alpha=new Float32Array(2),this.uniforms.dimensions=new Float32Array(2),Object.assign(this,{mirror:!0,boundary:.5,amplitude:[0,20],waveLength:[30,100],alpha:[1,1],time:0},e)}t&&(e.__proto__=t);var i={mirror:{configurable:!0},boundary:{configurable:!0},amplitude:{configurable:!0},waveLength:{configurable:!0},alpha:{configurable:!0}};return((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.apply=function(e,t,i,n){this.uniforms.dimensions[0]=t.sourceFrame.width,this.uniforms.dimensions[1]=t.sourceFrame.height,this.uniforms.time=this.time,e.applyFilter(this,t,i,n)},i.mirror.set=function(e){this.uniforms.mirror=e},i.mirror.get=function(){return this.uniforms.mirror},i.boundary.set=function(e){this.uniforms.boundary=e},i.boundary.get=function(){return this.uniforms.boundary},i.amplitude.set=function(e){this.uniforms.amplitude[0]=e[0],this.uniforms.amplitude[1]=e[1]},i.amplitude.get=function(){return this.uniforms.amplitude},i.waveLength.set=function(e){this.uniforms.waveLength[0]=e[0],this.uniforms.waveLength[1]=e[1]},i.waveLength.get=function(){return this.uniforms.waveLength},i.alpha.set=function(e){this.uniforms.alpha[0]=e[0],this.uniforms.alpha[1]=e[1]},i.alpha.get=function(){return this.uniforms.alpha},Object.defineProperties(e.prototype,i),e}(a.Filter),W=function(n){function e(e,t,i){void 0===e&&(e=[-10,0]),void 0===t&&(t=[0,10]),void 0===i&&(i=[0,0]),n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/filterArea.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/filterArea.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/filterArea.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n"),this.red=e,this.green=t,this.blue=i}n&&(e.__proto__=n),(e.prototype=Object.create(n&&n.prototype)).constructor=e;var t={red:{configurable:!0},green:{configurable:!0},blue:{configurable:!0}};return t.red.get=function(){return this.uniforms.red},t.red.set=function(e){this.uniforms.red=e},t.green.get=function(){return this.uniforms.green},t.green.set=function(e){this.uniforms.green=e},t.blue.get=function(){return this.uniforms.blue},t.blue.set=function(e){this.uniforms.blue=e},Object.defineProperties(e.prototype,t),e}(a.Filter),U=function(n){function e(e,t,i){void 0===e&&(e=[0,0]),void 0===t&&(t={}),void 0===i&&(i=0),n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nuniform vec2 center;\n\nuniform float amplitude;\nuniform float wavelength;\n// uniform float power;\nuniform float brightness;\nuniform float speed;\nuniform float radius;\n\nuniform float time;\n\nconst float PI = 3.14159;\n\nvoid main()\n{\n    float halfWavelength = wavelength * 0.5 / filterArea.x;\n    float maxRadius = radius / filterArea.x;\n    float currentRadius = time * speed / filterArea.x;\n\n    float fade = 1.0;\n\n    if (maxRadius > 0.0) {\n        if (currentRadius > maxRadius) {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);\n    }\n\n    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);\n    dir.y *= filterArea.y / filterArea.x;\n    float dist = length(dir);\n\n    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n        return;\n    }\n\n    vec2 diffUV = normalize(dir);\n\n    float diff = (dist - currentRadius) / halfWavelength;\n\n    float p = 1.0 - pow(abs(diff), 2.0);\n\n    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );\n    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );\n\n    vec2 offset = diffUV * powDiff / filterArea.xy;\n\n    // Do clamp :\n    vec2 coord = vTextureCoord + offset;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    // No clamp :\n    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);\n\n    color.rgb *= 1.0 + (brightness - 1.0) * p * fade;\n\n    gl_FragColor = color;\n}\n"),this.center=e,Array.isArray(t)&&(console.warn("Deprecated Warning: ShockwaveFilter params Array has been changed to options Object."),t={}),t=Object.assign({amplitude:30,wavelength:160,brightness:1,speed:500,radius:-1},t),this.amplitude=t.amplitude,this.wavelength=t.wavelength,this.brightness=t.brightness,this.speed=t.speed,this.radius=t.radius,this.time=i}n&&(e.__proto__=n);var t={center:{configurable:!0},amplitude:{configurable:!0},wavelength:{configurable:!0},brightness:{configurable:!0},speed:{configurable:!0},radius:{configurable:!0}};return((e.prototype=Object.create(n&&n.prototype)).constructor=e).prototype.apply=function(e,t,i,n){this.uniforms.time=this.time,e.applyFilter(this,t,i,n)},t.center.get=function(){return this.uniforms.center},t.center.set=function(e){this.uniforms.center=e},t.amplitude.get=function(){return this.uniforms.amplitude},t.amplitude.set=function(e){this.uniforms.amplitude=e},t.wavelength.get=function(){return this.uniforms.wavelength},t.wavelength.set=function(e){this.uniforms.wavelength=e},t.brightness.get=function(){return this.uniforms.brightness},t.brightness.set=function(e){this.uniforms.brightness=e},t.speed.get=function(){return this.uniforms.speed},t.speed.set=function(e){this.uniforms.speed=e},t.radius.get=function(){return this.uniforms.radius},t.radius.set=function(e){this.uniforms.radius=e},Object.defineProperties(e.prototype,t),e}(a.Filter),V=function(n){function e(e,t,i){void 0===t&&(t=0),void 0===i&&(i=1),n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform sampler2D uLightmap;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\nuniform vec4 ambientColor;\nvoid main() {\n    vec4 diffuseColor = texture2D(uSampler, vTextureCoord);\n    vec2 lightCoord = (vTextureCoord * filterArea.xy) / dimensions;\n    vec4 light = texture2D(uLightmap, lightCoord);\n    vec3 ambient = ambientColor.rgb * ambientColor.a;\n    vec3 intensity = ambient + light.rgb;\n    vec3 finalColor = diffuseColor.rgb * intensity;\n    gl_FragColor = vec4(finalColor, diffuseColor.a);\n}\n"),this.uniforms.dimensions=new Float32Array(2),this.uniforms.ambientColor=new Float32Array([0,0,0,i]),this.texture=e,this.color=t}n&&(e.__proto__=n);var t={texture:{configurable:!0},color:{configurable:!0},alpha:{configurable:!0}};return((e.prototype=Object.create(n&&n.prototype)).constructor=e).prototype.apply=function(e,t,i,n){this.uniforms.dimensions[0]=t.sourceFrame.width,this.uniforms.dimensions[1]=t.sourceFrame.height,e.applyFilter(this,t,i,n)},t.texture.get=function(){return this.uniforms.uLightmap},t.texture.set=function(e){this.uniforms.uLightmap=e},t.color.set=function(e){var t=this.uniforms.ambientColor;"number"==typeof e?(a.utils.hex2rgb(e,t),this._color=e):(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],this._color=a.utils.rgb2hex(t))},t.color.get=function(){return this._color},t.alpha.get=function(){return this.uniforms.ambientColor[3]},t.alpha.set=function(e){this.uniforms.ambientColor[3]=e},Object.defineProperties(e.prototype,t),e}(a.Filter),H=function(s){function e(e,t,i,n){void 0===e&&(e=100),void 0===t&&(t=600),void 0===i&&(i=null),void 0===n&&(n=null),s.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    color /= total;\n    color.rgb /= color.a + 0.00001;\n\n    gl_FragColor = color;\n}\n"),this.uniforms.blur=e,this.uniforms.gradientBlur=t,this.uniforms.start=i||new a.Point(0,window.innerHeight/2),this.uniforms.end=n||new a.Point(600,window.innerHeight/2),this.uniforms.delta=new a.Point(30,30),this.uniforms.texSize=new a.Point(window.innerWidth,window.innerHeight),this.updateDelta()}s&&(e.__proto__=s);var t={blur:{configurable:!0},gradientBlur:{configurable:!0},start:{configurable:!0},end:{configurable:!0}};return((e.prototype=Object.create(s&&s.prototype)).constructor=e).prototype.updateDelta=function(){this.uniforms.delta.x=0,this.uniforms.delta.y=0},t.blur.get=function(){return this.uniforms.blur},t.blur.set=function(e){this.uniforms.blur=e},t.gradientBlur.get=function(){return this.uniforms.gradientBlur},t.gradientBlur.set=function(e){this.uniforms.gradientBlur=e},t.start.get=function(){return this.uniforms.start},t.start.set=function(e){this.uniforms.start=e,this.updateDelta()},t.end.get=function(){return this.uniforms.end},t.end.set=function(e){this.uniforms.end=e,this.updateDelta()},Object.defineProperties(e.prototype,t),e}(a.Filter),$=((D=H)&&(q.__proto__=D),((q.prototype=Object.create(D&&D.prototype)).constructor=q).prototype.updateDelta=function(){var e=this.uniforms.end.x-this.uniforms.start.x,t=this.uniforms.end.y-this.uniforms.start.y,i=Math.sqrt(e*e+t*t);this.uniforms.delta.x=e/i,this.uniforms.delta.y=t/i},q),X=((F=H)&&(z.__proto__=F),((z.prototype=Object.create(F&&F.prototype)).constructor=z).prototype.updateDelta=function(){var e=this.uniforms.end.x-this.uniforms.start.x,t=this.uniforms.end.y-this.uniforms.start.y,i=Math.sqrt(e*e+t*t);this.uniforms.delta.x=-t/i,this.uniforms.delta.y=e/i},z),Y=function(s){function e(e,t,i,n){void 0===e&&(e=100),void 0===t&&(t=600),void 0===i&&(i=null),void 0===n&&(n=null),s.call(this),this.tiltShiftXFilter=new $(e,t,i,n),this.tiltShiftYFilter=new X(e,t,i,n)}s&&(e.__proto__=s);var t={blur:{configurable:!0},gradientBlur:{configurable:!0},start:{configurable:!0},end:{configurable:!0}};return((e.prototype=Object.create(s&&s.prototype)).constructor=e).prototype.apply=function(e,t,i){var n=e.getRenderTarget(!0);this.tiltShiftXFilter.apply(e,t,n),this.tiltShiftYFilter.apply(e,n,i),e.returnRenderTarget(n)},t.blur.get=function(){return this.tiltShiftXFilter.blur},t.blur.set=function(e){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=e},t.gradientBlur.get=function(){return this.tiltShiftXFilter.gradientBlur},t.gradientBlur.set=function(e){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=e},t.start.get=function(){return this.tiltShiftXFilter.start},t.start.set=function(e){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=e},t.end.get=function(){return this.tiltShiftXFilter.end},t.end.set=function(e){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=e},Object.defineProperties(e.prototype,t),e}(a.Filter),j=function(n){function e(e,t,i){void 0===e&&(e=200),void 0===t&&(t=4),void 0===i&&(i=20),n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform vec4 filterArea;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 twist(vec2 coord)\n{\n    coord -= offset;\n\n    float dist = length(coord);\n\n    if (dist < radius)\n    {\n        float ratioDist = (radius - dist) / radius;\n        float angleMod = ratioDist * ratioDist * angle;\n        float s = sin(angleMod);\n        float c = cos(angleMod);\n        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n    }\n\n    coord += offset;\n\n    return coord;\n}\n\nvoid main(void)\n{\n\n    vec2 coord = mapCoord(vTextureCoord);\n\n    coord = twist(coord);\n\n    coord = unmapCoord(coord);\n\n    gl_FragColor = texture2D(uSampler, coord );\n\n}\n"),this.radius=e,this.angle=t,this.padding=i}n&&(e.__proto__=n),(e.prototype=Object.create(n&&n.prototype)).constructor=e;var t={offset:{configurable:!0},radius:{configurable:!0},angle:{configurable:!0}};return t.offset.get=function(){return this.uniforms.offset},t.offset.set=function(e){this.uniforms.offset=e},t.radius.get=function(){return this.uniforms.radius},t.radius.set=function(e){this.uniforms.radius=e},t.angle.get=function(){return this.uniforms.angle},t.angle.set=function(e){this.uniforms.angle=e},Object.defineProperties(e.prototype,t),e}(a.Filter),u=function(s){function e(e,t,i,n){void 0===e&&(e=.1),void 0===t&&(t=[0,0]),void 0===i&&(i=0),void 0===n&&(n=-1),s.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform vec2 uCenter;\nuniform float uStrength;\nuniform float uInnerRadius;\nuniform float uRadius;\n\nconst float MAX_KERNEL_SIZE = 32.0;\n\nfloat random(vec3 scale, float seed) {\n    // use the fragment position for a different seed per-pixel\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main() {\n\n    float minGradient = uInnerRadius * 0.3;\n    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;\n\n    float gradient = uRadius * 0.3;\n    float radius = (uRadius - gradient * 0.5) / filterArea.x;\n\n    float countLimit = MAX_KERNEL_SIZE;\n\n    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);\n    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));\n\n    float strength = uStrength;\n\n    float delta = 0.0;\n    float gap;\n    if (dist < innerRadius) {\n        delta = innerRadius - dist;\n        gap = minGradient;\n    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity\n        delta = dist - radius;\n        gap = gradient;\n    }\n\n    if (delta > 0.0) {\n        float normalCount = gap / filterArea.x;\n        delta = (normalCount - delta) / normalCount;\n        countLimit *= delta;\n        strength *= delta;\n        if (countLimit < 1.0)\n        {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n    }\n\n    // randomize the lookup values to hide the fixed number of samples\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n    float total = 0.0;\n    vec4 color = vec4(0.0);\n\n    dir *= strength;\n\n    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {\n        float percent = (t + offset) / MAX_KERNEL_SIZE;\n        float weight = 4.0 * (percent - percent * percent);\n        vec2 p = vTextureCoord + dir * percent;\n        vec4 sample = texture2D(uSampler, p);\n\n        // switch to pre-multiplied alpha to correctly blur transparent images\n        // sample.rgb *= sample.a;\n\n        color += sample * weight;\n        total += weight;\n\n        if (t > countLimit){\n            break;\n        }\n    }\n\n    color /= total;\n    // switch back from pre-multiplied alpha\n    color.rgb /= color.a + 0.00001;\n\n    gl_FragColor = color;\n}\n"),this.center=t,this.strength=e,this.innerRadius=i,this.radius=n}s&&(e.__proto__=s),(e.prototype=Object.create(s&&s.prototype)).constructor=e;var t={center:{configurable:!0},strength:{configurable:!0},innerRadius:{configurable:!0},radius:{configurable:!0}};return t.center.get=function(){return this.uniforms.uCenter},t.center.set=function(e){this.uniforms.uCenter=e},t.strength.get=function(){return this.uniforms.uStrength},t.strength.set=function(e){this.uniforms.uStrength=e},t.innerRadius.get=function(){return this.uniforms.uInnerRadius},t.innerRadius.set=function(e){this.uniforms.uInnerRadius=e},t.radius.get=function(){return this.uniforms.uRadius},t.radius.set=function(e){this.uniforms.uRadius=e=e<0||e===1/0?-1:e},Object.defineProperties(e.prototype,t),e}(a.Filter);function z(){F.apply(this,arguments)}function q(){D.apply(this,arguments)}return e.AdjustmentFilter=s,e.AdvancedBloomFilter=r,e.AsciiFilter=o,e.BevelFilter=p,e.BloomFilter=g,e.BulgePinchFilter=v,e.ColorMapFilter=y,e.ColorReplaceFilter=b,e.ConvolutionFilter=S,e.CrossHatchFilter=T,e.CRTFilter=_,e.DotFilter=A,e.DropShadowFilter=P,e.EmbossFilter=I,e.GlitchFilter=C,e.GlowFilter=E,e.GodrayFilter=w,e.KawaseBlurFilter=l,e.MotionBlurFilter=R,e.MultiColorReplaceFilter=M,e.OldFilmFilter=O,e.OutlineFilter=N,e.PixelateFilter=L,e.RadialBlurFilter=k,e.ReflectionFilter=G,e.RGBSplitFilter=W,e.ShockwaveFilter=U,e.SimpleLightmapFilter=V,e.TiltShiftFilter=Y,e.TiltShiftAxisFilter=H,e.TiltShiftXFilter=$,e.TiltShiftYFilter=X,e.TwistFilter=j,e.ZoomBlurFilter=u,e}({},PIXI);Object.assign(PIXI.filters,this?this.__filters:__filters),function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).MultiStyleText=e()}(function(){return function n(s,r,o){function a(i,e){if(!r[i]){if(!s[i]){var t="function"==typeof require&&require;if(!e&&t)return t(i,!0);if(l)return l(i,!0);t=new Error("Cannot find module '"+i+"'");throw t.code="MODULE_NOT_FOUND",t}t=r[i]={exports:{}};s[i][0].call(t.exports,function(e){var t=s[i][1][e];return a(t||e)},t,t.exports,n,s,r,o)}return r[i].exports}for(var l="function"==typeof require&&require,e=0;e<o.length;e++)a(o[e]);return a}({1:[function(e,t,i){t.exports=e("./pixi-multistyle-text").default},{"./pixi-multistyle-text":2}],2:[function(e,t,i){var n,s,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});s=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=["pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture","mouseover","mouseenter","mousedown","mousemove","mouseup","mousecancel","mouseout","mouseleave","touchover","touchenter","touchdown","touchmove","touchup","touchcancel","touchout","touchleave"],i=(n=PIXI.Text,r(w,n),w.prototype.handleInteraction=function(e){var t=e,i=e.data.getLocalPosition(this),e=this.hitboxes.reduce(function(e,t){return void 0!==e?e:t.hitbox.contains(i.x,i.y)?t:void 0},void 0);t.targetTag=void 0===e?void 0:e.tag},Object.defineProperty(w.prototype,"styles",{set:function(e){for(var t in this.textStyles={},this.textStyles.default=this.assign({},w.DEFAULT_TAG_STYLE),e)"default"===t?this.assign(this.textStyles.default,e[t]):this.textStyles[t]=this.assign({},e[t]);this._style=new PIXI.TextStyle(this.textStyles.default),this.dirty=!0},enumerable:!0,configurable:!0}),w.prototype.setTagStyle=function(e,t){e in this.textStyles?this.assign(this.textStyles[e],t):this.textStyles[e]=this.assign({},t),this._style=new PIXI.TextStyle(this.textStyles.default),this.dirty=!0},w.prototype.deleteTagStyle=function(e){"default"===e?this.textStyles.default=this.assign({},w.DEFAULT_TAG_STYLE):delete this.textStyles[e],this._style=new PIXI.TextStyle(this.textStyles.default),this.dirty=!0},w.prototype.getTagRegex=function(e,t){var i=Object.keys(this.textStyles).join("|"),i="<"+(i=e?"("+i+")":"(?:"+i+")")+"(?:\\s+[A-Za-z0-9_\\-]+=(?:\"(?:[^\"]+|\\\\\")*\"|'(?:[^']+|\\\\')*'))*\\s*>|</"+i+"\\s*>";return t&&(i="("+i+")"),new RegExp(i,"g")},w.prototype.getPropertyRegex=function(){return new RegExp("([A-Za-z0-9_\\-]+)=(?:\"((?:[^\"]+|\\\\\")*)\"|'((?:[^']+|\\\\')*)')","g")},w.prototype._getTextDataPerLine=function(e){for(var t=[],i=this.getTagRegex(!0,!1),n=[this.assign({},this.textStyles.default)],s=[{name:"default",properties:{}}],r=0;r<e.length;r++){for(var o,a=[],l=[];o=i.exec(e[r]);)l.push(o);if(0===l.length)a.push(this.createTextData(e[r],n[n.length-1],s[s.length-1]));else{for(var h=0,c=0;c<l.length;c++){if(l[c].index>h&&a.push(this.createTextData(e[r].substring(h,l[c].index),n[n.length-1],s[s.length-1])),"/"===l[c][0][1])1<n.length&&(n.pop(),s.pop());else{n.push(this.assign({},n[n.length-1],this.textStyles[l[c][1]]));for(var p,u={},d=this.getPropertyRegex();p=d.exec(l[c][0]);)u[p[1]]=p[2]||p[3];s.push({name:l[c][1],properties:u})}h=l[c].index+l[c][0].length}h<e[r].length&&a.push(this.createTextData(e[r].substring(h),n[n.length-1],s[s.length-1]))}t.push(a)}return t},w.prototype.getFontString=function(e){return new PIXI.TextStyle(e).toFontString()},w.prototype.createTextData=function(e,t,i){return{text:e,style:t,width:0,height:0,fontProperties:void 0,tag:i}},w.prototype.getDropShadowPadding=function(){var i=this,n=0,s=0;return Object.keys(this.textStyles).forEach(function(e){var t=i.textStyles[e],e=t.dropShadowDistance,t=t.dropShadowBlur;n=Math.max(n,e||0),s=Math.max(s,t||0)}),n+s},w.prototype.updateText=function(){var u=this;if(this.dirty){this.hitboxes=[],this.texture.baseTexture.resolution=this.resolution;for(var t=this.textStyles,e=this.text,i=(e=this._style.wordWrap?this.wordWrap(this.text):e).split(/(?:\r\n|\r|\n)/),n=this._getTextDataPerLine(i),s=[],r=[],o=[],a=0,l=0;l<i.length;l++){for(var h=0,c=0,p=0,d=0;d<n[l].length;d++){var m=n[l][d].style;this.context.font=this.getFontString(m),n[l][d].width=this.context.measureText(n[l][d].text).width,0===n[l][d].text.length&&(n[l][d].width+=(n[l][d].text.length-1)*m.letterSpacing,0<d&&(h+=m.letterSpacing/2),d<n[l].length-1&&(h+=m.letterSpacing/2)),h+=n[l][d].width,n[l][d].fontProperties=PIXI.TextMetrics.measureFont(this.context.font),n[l][d].height=n[l][d].fontProperties.fontSize+n[l][d].style.strokeThickness,p="number"==typeof m.valign?(c=Math.min(c,m.valign-n[l][d].fontProperties.descent),Math.max(p,m.valign+n[l][d].fontProperties.ascent)):(c=Math.min(c,-n[l][d].fontProperties.descent),Math.max(p,n[l][d].fontProperties.ascent))}s[l]=h,r[l]=c,o[l]=p,a=Math.max(a,h)}var f=Object.keys(t).map(function(e){return t[e]}).reduce(function(e,t){return Math.max(e,t.strokeThickness||0)},0),g=this.getDropShadowPadding(),v=a+f+2*g,e=o.reduce(function(e,t){return e+t},0)-r.reduce(function(e,t){return e+t},0)+2*g;this.canvas.width=(v+this.context.lineWidth)*this.resolution,this.canvas.height=e*this.resolution,this.context.scale(this.resolution,this.resolution),this.context.textBaseline="alphabetic",this.context.lineJoin="round";for(var y=g,b=[],l=0;l<n.length;l++){var S=n[l],T=void 0;switch(this._style.align){case"left":T=g;break;case"center":T=g+(a-s[l])/2;break;case"right":T=g+a-s[l]}for(d=0;d<S.length;d++){var _=S[d],A=_.style,P=_.text,I=_.fontProperties,C=_.width,x=(_.height,_.tag);T+=f/2;var B=f/2+y+I.ascent;switch(A.valign){case"top":break;case"baseline":B+=o[l]-I.ascent;break;case"middle":B+=(o[l]-r[l]-I.ascent-I.descent)/2;break;case"bottom":B+=o[l]-r[l]-I.ascent-I.descent;break;default:B+=o[l]-I.ascent-A.valign}if(0===A.letterSpacing)b.push({text:P,style:A,x:T,y:B,width:C,ascent:I.ascent,descent:I.descent,tag:x}),T+=S[d].width;else{this.context.font=this.getFontString(S[d].style);for(var E=0;E<P.length;E++)(0<E||0<d)&&(T+=A.letterSpacing/2),b.push({text:P.charAt(E),style:A,x:T,y:B,width:C,ascent:I.ascent,descent:I.descent,tag:x}),T+=this.context.measureText(P.charAt(E)).width,(E<P.length-1||d<S.length-1)&&(T+=A.letterSpacing/2)}T-=f/2}y+=o[l]-r[l]}this.context.save(),b.forEach(function(e){var t=e.style,i=e.text,n=e.x,s=e.y;t.dropShadow&&(u.context.font=u.getFontString(t),"number"==typeof(e=t.dropShadowColor)&&(e=PIXI.utils.hex2string(e)),u.context.shadowColor=e,u.context.shadowBlur=t.dropShadowBlur,u.context.shadowOffsetX=Math.cos(t.dropShadowAngle)*t.dropShadowDistance*u.resolution,u.context.shadowOffsetY=Math.sin(t.dropShadowAngle)*t.dropShadowDistance*u.resolution,u.context.fillText(i,n,s))}),this.context.restore(),b.forEach(function(e){var t=e.style,i=e.text,n=e.x,s=e.y,r=e.width,o=e.ascent,a=e.descent,l=e.tag;u.context.font=u.getFontString(t);e=t.stroke;"number"==typeof e&&(e=PIXI.utils.hex2string(e)),u.context.strokeStyle=e,u.context.lineWidth=t.strokeThickness;var h=t.fill;if("number"==typeof h)h=PIXI.utils.hex2string(h);else if(Array.isArray(h))for(var c=0;c<h.length;c++){var p=h[c];"number"==typeof p&&(h[c]=PIXI.utils.hex2string(p))}u.context.fillStyle=u._generateFillStyle(new PIXI.TextStyle(t),[i]),t.stroke&&t.strokeThickness&&u.context.strokeText(i,n,s),t.fill&&u.context.fillText(i,n,s);i=-u._style.padding-u.getDropShadowPadding();u.hitboxes.push({tag:l,hitbox:new PIXI.Rectangle(n+i,s-o+i,r,o+a)}),(void 0===t.debug?w.debugOptions.spans.enabled:t.debug)&&(u.context.lineWidth=1,w.debugOptions.spans.bounding&&(u.context.fillStyle=w.debugOptions.spans.bounding,u.context.strokeStyle=w.debugOptions.spans.bounding,u.context.beginPath(),u.context.rect(n,s-o,r,o+a),u.context.fill(),u.context.stroke(),u.context.stroke()),w.debugOptions.spans.baseline&&(u.context.strokeStyle=w.debugOptions.spans.baseline,u.context.beginPath(),u.context.moveTo(n,s),u.context.lineTo(n+r,s),u.context.closePath(),u.context.stroke()),w.debugOptions.spans.top&&(u.context.strokeStyle=w.debugOptions.spans.top,u.context.beginPath(),u.context.moveTo(n,s-o),u.context.lineTo(n+r,s-o),u.context.closePath(),u.context.stroke()),w.debugOptions.spans.bottom&&(u.context.strokeStyle=w.debugOptions.spans.bottom,u.context.beginPath(),u.context.moveTo(n,s+a),u.context.lineTo(n+r,s+a),u.context.closePath(),u.context.stroke()),w.debugOptions.spans.text&&(u.context.fillStyle="#ffffff",u.context.strokeStyle="#000000",u.context.lineWidth=2,u.context.font="8px monospace",u.context.strokeText(l.name,n,s-o+8),u.context.fillText(l.name,n,s-o+8),u.context.strokeText(r.toFixed(2)+"x"+(o+a).toFixed(2),n,s-o+16),u.context.fillText(r.toFixed(2)+"x"+(o+a).toFixed(2),n,s-o+16)))}),w.debugOptions.objects.enabled&&(w.debugOptions.objects.bounding&&(this.context.fillStyle=w.debugOptions.objects.bounding,this.context.beginPath(),this.context.rect(0,0,v,e),this.context.fill()),w.debugOptions.objects.text&&(this.context.fillStyle="#ffffff",this.context.strokeStyle="#000000",this.context.lineWidth=2,this.context.font="8px monospace",this.context.strokeText(v.toFixed(2)+"x"+e.toFixed(2),0,8,v),this.context.fillText(v.toFixed(2)+"x"+e.toFixed(2),0,8,v))),this.updateTexture()}},w.prototype.wordWrap=function(e){var t="",i=this.getTagRegex(!0,!0),n=e.split("\n"),s=this._style.wordWrapWidth,r=[this.assign({},this.textStyles.default)];this.context.font=this.getFontString(this.textStyles.default);for(var o=0;o<n.length;o++){for(var a=s,l=n[o].split(i),h=!0,c=0;c<l.length;c++)if(i.test(l[c]))t+=l[c],"/"===l[c][1]?(c+=2,r.pop()):(c++,r.push(this.assign({},r[r.length-1],this.textStyles[l[c]])),c++),this.context.font=this.getFontString(r[r.length-1]);else for(var p=l[c].split(" "),u=0;u<p.length;u++){var d,m=this.context.measureText(p[u]).width;if(this._style.breakWords&&a<m){var f=p[u].split("");0<u&&(t+=" ",a-=this.context.measureText(" ").width);for(var g=0;g<f.length;g++){var v=this.context.measureText(f[g]).width;a<v?(t+="\n"+f[g],a=s-v):(t+=f[g],a-=v)}}else this._style.breakWords?(t+=p[u],a-=m):a<(d=m+(0<u?this.context.measureText(" ").width:0))?(h||(t+="\n"),t+=p[u],a=s-m):(a-=d,0<u&&(t+=" "),t+=p[u]);h=!1}o<n.length-1&&(t+="\n")}return t},w.prototype.assign=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];for(var n=0,s=t;n<s.length;n++){var r,o=s[n];for(r in o)e[r]=o[r]}return e},w.DEFAULT_TAG_STYLE={align:"left",breakWords:!1,dropShadow:!1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"#000000",dropShadowDistance:5,fill:"black",fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",valign:"baseline",wordWrap:!1,wordWrapWidth:100},w.debugOptions={spans:{enabled:!1,baseline:"#44BB44",top:"#BB4444",bottom:"#4444BB",bounding:"rgba(255, 255, 255, 0.1)",text:!0},objects:{enabled:!1,bounding:"rgba(255, 255, 255, 0.05)",text:!0}},w);function w(e,t){var i=n.call(this,e)||this;return i.styles=t,s.forEach(function(e){i.on(e,function(e){return i.handleInteraction(e)})}),i}t.default=i},"object"==typeof t&&"object"==typeof t.exports&&s(0,i)},{}]},{},[1])(1)});var pixi_spine,__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(e){!function(k){var G,m,e,W=(t.prototype.apply=function(e,t,i,n,s,r,o,a){if(null==e)throw new Error("skeleton cannot be null.");n&&0!=this.duration&&(i%=this.duration,0<t&&(t%=this.duration));for(var l=this.timelines,h=0,c=l.length;h<c;h++)l[h].apply(e,t,i,s,r,o,a)},t.binarySearch=function(e,t,i){var n=0,s=e.length/(i=void 0===i?1:i)-2;if(0==s)return i;for(var r=s>>>1;;){if(e[(r+1)*i]<=t?n=r+1:s=r,n==s)return(n+1)*i;r=n+s>>>1}},t.linearSearch=function(e,t,i){for(var n=0,s=e.length-i;n<=s;n+=i)if(e[n]>t)return n;return-1},t);function t(e,t,i){if(null==e)throw new Error("name cannot be null.");if(null==t)throw new Error("timelines cannot be null.");this.name=e,this.timelines=t,this.duration=i}k.Animation=W,(i=G=k.MixBlend||(k.MixBlend={}))[i.setup=0]="setup",i[i.first=1]="first",i[i.replace=2]="replace",i[i.add=3]="add",(s=m=k.MixDirection||(k.MixDirection={}))[s.mixIn=0]="mixIn",s[s.mixOut=1]="mixOut",(o=e=k.TimelineType||(k.TimelineType={}))[o.rotate=0]="rotate",o[o.translate=1]="translate",o[o.scale=2]="scale",o[o.shear=3]="shear",o[o.attachment=4]="attachment",o[o.color=5]="color",o[o.deform=6]="deform",o[o.event=7]="event",o[o.drawOrder=8]="drawOrder",o[o.ikConstraint=9]="ikConstraint",o[o.transformConstraint=10]="transformConstraint",o[o.pathConstraintPosition=11]="pathConstraintPosition",o[o.pathConstraintSpacing=12]="pathConstraintSpacing",o[o.pathConstraintMix=13]="pathConstraintMix",o[o.twoColor=14]="twoColor";var i=(y.prototype.getFrameCount=function(){return this.curves.length/y.BEZIER_SIZE+1},y.prototype.setLinear=function(e){this.curves[e*y.BEZIER_SIZE]=y.LINEAR},y.prototype.setStepped=function(e){this.curves[e*y.BEZIER_SIZE]=y.STEPPED},y.prototype.getCurveType=function(e){e*=y.BEZIER_SIZE;if(e==this.curves.length)return y.LINEAR;e=this.curves[e];return e==y.LINEAR?y.LINEAR:e==y.STEPPED?y.STEPPED:y.BEZIER},y.prototype.setCurve=function(e,t,i,n,s){var r=.03*(2*-t+n),o=.03*(2*-i+s),a=.006*(3*(t-n)+1),l=.006*(3*(i-s)+1),h=2*r+a,c=2*o+l,p=.3*t+r+.16666667*a,u=.3*i+o+.16666667*l,d=e*y.BEZIER_SIZE,m=this.curves;m[d++]=y.BEZIER;for(var f=p,g=u,v=d+y.BEZIER_SIZE-1;d<v;d+=2)m[d]=f,m[d+1]=g,p+=h,u+=c,h+=a,c+=l,f+=p,g+=u},y.prototype.getCurvePercent=function(e,t){t=k.MathUtils.clamp(t,0,1);var i=this.curves,n=e*y.BEZIER_SIZE,e=i[n];if(e==y.LINEAR)return t;if(e==y.STEPPED)return 0;for(var s=0,r=++n,o=n+y.BEZIER_SIZE-1;n<o;n+=2)if(t<=(s=i[n])){var a=void 0,l=void 0;return(l=n==r?a=0:(a=i[n-2],i[n-1]))+(i[n+1]-l)*(t-a)/(s-a)}e=i[n-1];return e+(1-e)*(t-s)/(1-s)},y.LINEAR=0,y.STEPPED=1,y.BEZIER=2,y.BEZIER_SIZE=19,y);function y(e){if(e<=0)throw new Error("frameCount must be > 0: "+e);this.curves=k.Utils.newFloatArray((e-1)*y.BEZIER_SIZE)}k.CurveTimeline=i;var n,s=(__extends(f,n=i),f.prototype.getPropertyId=function(){return(e.rotate<<24)+this.boneIndex},f.prototype.setFrame=function(e,t,i){this.frames[e<<=1]=t,this.frames[e+f.ROTATION]=i},f.prototype.apply=function(e,t,i,n,s,r,o){var a=this.frames,l=e.bones[this.boneIndex];if(l.active)if(i<a[0])switch(r){case G.setup:return void(l.rotation=l.data.rotation);case G.first:var h=l.data.rotation-l.rotation;l.rotation+=(h-360*(16384-(16384.499999999996-h/360|0)))*s}else if(i>=a[a.length-f.ENTRIES]){var c=a[a.length+f.PREV_ROTATION];switch(r){case G.setup:l.rotation=l.data.rotation+c*s;break;case G.first:case G.replace:c+=l.data.rotation-l.rotation,c-=360*(16384-(16384.499999999996-c/360|0));case G.add:l.rotation+=c*s}}else{var p=W.binarySearch(a,i,f.ENTRIES),u=a[p+f.PREV_ROTATION],e=a[p],e=this.getCurvePercent((p>>1)-1,1-(i-e)/(a[p+f.PREV_TIME]-e)),d=u+((d=a[p+f.ROTATION]-u)-360*(16384-(16384.499999999996-d/360|0)))*e;switch(r){case G.setup:l.rotation=l.data.rotation+(d-360*(16384-(16384.499999999996-d/360|0)))*s;break;case G.first:case G.replace:d+=l.data.rotation-l.rotation;case G.add:l.rotation+=(d-360*(16384-(16384.499999999996-d/360|0)))*s}}},f.ENTRIES=2,f.PREV_TIME=-2,f.PREV_ROTATION=-1,f.ROTATION=1,f);function f(e){var t=n.call(this,e)||this;return t.frames=k.Utils.newFloatArray(e<<1),t}k.RotateTimeline=s;var r,o=(__extends(u,r=i),u.prototype.getPropertyId=function(){return(e.translate<<24)+this.boneIndex},u.prototype.setFrame=function(e,t,i,n){this.frames[e*=u.ENTRIES]=t,this.frames[e+u.X]=i,this.frames[e+u.Y]=n},u.prototype.apply=function(e,t,i,n,s,r,o){var a=this.frames,l=e.bones[this.boneIndex];if(l.active)if(i<a[0])switch(r){case G.setup:return l.x=l.data.x,void(l.y=l.data.y);case G.first:l.x+=(l.data.x-l.x)*s,l.y+=(l.data.y-l.y)*s}else{var h,c=0,p=0;switch(i>=a[a.length-u.ENTRIES]?(c=a[a.length+u.PREV_X],p=a[a.length+u.PREV_Y]):(c=a[(h=W.binarySearch(a,i,u.ENTRIES))+u.PREV_X],p=a[h+u.PREV_Y],e=a[h],e=this.getCurvePercent(h/u.ENTRIES-1,1-(i-e)/(a[h+u.PREV_TIME]-e)),c+=(a[h+u.X]-c)*e,p+=(a[h+u.Y]-p)*e),r){case G.setup:l.x=l.data.x+c*s,l.y=l.data.y+p*s;break;case G.first:case G.replace:l.x+=(l.data.x+c-l.x)*s,l.y+=(l.data.y+p-l.y)*s;break;case G.add:l.x+=c*s,l.y+=p*s}}},u.ENTRIES=3,u.PREV_TIME=-3,u.PREV_X=-2,u.PREV_Y=-1,u.X=1,u.Y=2,u);function u(e){var t=r.call(this,e)||this;return t.frames=k.Utils.newFloatArray(e*u.ENTRIES),t}k.TranslateTimeline=o;var a,s=(__extends(g,a=o),g.prototype.getPropertyId=function(){return(e.scale<<24)+this.boneIndex},g.prototype.apply=function(e,t,i,n,s,r,o){var a=this.frames,l=e.bones[this.boneIndex];if(l.active)if(i<a[0])switch(r){case G.setup:return l.scaleX=l.data.scaleX,void(l.scaleY=l.data.scaleY);case G.first:l.scaleX+=(l.data.scaleX-l.scaleX)*s,l.scaleY+=(l.data.scaleY-l.scaleY)*s}else{var h,c=0,p=0;if(p=i>=a[a.length-g.ENTRIES]?(c=a[a.length+g.PREV_X]*l.data.scaleX,a[a.length+g.PREV_Y]*l.data.scaleY):(c=a[(h=W.binarySearch(a,i,g.ENTRIES))+g.PREV_X],p=a[h+g.PREV_Y],e=a[h],e=this.getCurvePercent(h/g.ENTRIES-1,1-(i-e)/(a[h+g.PREV_TIME]-e)),c=(c+(a[h+g.X]-c)*e)*l.data.scaleX,(p+(a[h+g.Y]-p)*e)*l.data.scaleY),1==s)r==G.add?(l.scaleX+=c-l.data.scaleX,l.scaleY+=p-l.data.scaleY):(l.scaleX=c,l.scaleY=p);else{var u=0,d=0;if(o==m.mixOut)switch(r){case G.setup:u=l.data.scaleX,d=l.data.scaleY,l.scaleX=u+(Math.abs(c)*k.MathUtils.signum(u)-u)*s,l.scaleY=d+(Math.abs(p)*k.MathUtils.signum(d)-d)*s;break;case G.first:case G.replace:u=l.scaleX,d=l.scaleY,l.scaleX=u+(Math.abs(c)*k.MathUtils.signum(u)-u)*s,l.scaleY=d+(Math.abs(p)*k.MathUtils.signum(d)-d)*s;break;case G.add:u=l.scaleX,d=l.scaleY,l.scaleX=u+(Math.abs(c)*k.MathUtils.signum(u)-l.data.scaleX)*s,l.scaleY=d+(Math.abs(p)*k.MathUtils.signum(d)-l.data.scaleY)*s}else switch(r){case G.setup:u=Math.abs(l.data.scaleX)*k.MathUtils.signum(c),d=Math.abs(l.data.scaleY)*k.MathUtils.signum(p),l.scaleX=u+(c-u)*s,l.scaleY=d+(p-d)*s;break;case G.first:case G.replace:u=Math.abs(l.scaleX)*k.MathUtils.signum(c),d=Math.abs(l.scaleY)*k.MathUtils.signum(p),l.scaleX=u+(c-u)*s,l.scaleY=d+(p-d)*s;break;case G.add:u=k.MathUtils.signum(c),d=k.MathUtils.signum(p),l.scaleX=Math.abs(l.scaleX)*u+(c-Math.abs(l.data.scaleX)*u)*s,l.scaleY=Math.abs(l.scaleY)*d+(p-Math.abs(l.data.scaleY)*d)*s}}}},g);function g(e){return a.call(this,e)||this}k.ScaleTimeline=s;var l,o=(__extends(d,l=o),d.prototype.getPropertyId=function(){return(e.shear<<24)+this.boneIndex},d.prototype.apply=function(e,t,i,n,s,r,o){var a=this.frames,l=e.bones[this.boneIndex];if(l.active)if(i<a[0])switch(r){case G.setup:return l.shearX=l.data.shearX,void(l.shearY=l.data.shearY);case G.first:l.shearX+=(l.data.shearX-l.shearX)*s,l.shearY+=(l.data.shearY-l.shearY)*s}else{var h,c=0,p=0;switch(i>=a[a.length-d.ENTRIES]?(c=a[a.length+d.PREV_X],p=a[a.length+d.PREV_Y]):(c=a[(h=W.binarySearch(a,i,d.ENTRIES))+d.PREV_X],p=a[h+d.PREV_Y],e=a[h],e=this.getCurvePercent(h/d.ENTRIES-1,1-(i-e)/(a[h+d.PREV_TIME]-e)),c+=(a[h+d.X]-c)*e,p+=(a[h+d.Y]-p)*e),r){case G.setup:l.shearX=l.data.shearX+c*s,l.shearY=l.data.shearY+p*s;break;case G.first:case G.replace:l.shearX+=(l.data.shearX+c-l.shearX)*s,l.shearY+=(l.data.shearY+p-l.shearY)*s;break;case G.add:l.shearX+=c*s,l.shearY+=p*s}}},d);function d(e){return l.call(this,e)||this}k.ShearTimeline=o;var h,o=(__extends(v,h=i),v.prototype.getPropertyId=function(){return(e.color<<24)+this.slotIndex},v.prototype.setFrame=function(e,t,i,n,s,r){this.frames[e*=v.ENTRIES]=t,this.frames[e+v.R]=i,this.frames[e+v.G]=n,this.frames[e+v.B]=s,this.frames[e+v.A]=r},v.prototype.apply=function(e,t,i,n,s,r,o){var a=e.slots[this.slotIndex];if(a.bone.active){var l=this.frames;if(i<l[0])switch(r){case G.setup:return void a.color.setFromColor(a.data.color);case G.first:var h=a.color,c=a.data.color;h.add((c.r-h.r)*s,(c.g-h.g)*s,(c.b-h.b)*s,(c.a-h.a)*s)}else{var p,u=0,d=0,m=0,f=0;i>=l[l.length-v.ENTRIES]?(u=l[(p=l.length)+v.PREV_R],d=l[p+v.PREV_G],m=l[p+v.PREV_B],f=l[p+v.PREV_A]):(u=l[(e=W.binarySearch(l,i,v.ENTRIES))+v.PREV_R],d=l[e+v.PREV_G],m=l[e+v.PREV_B],f=l[e+v.PREV_A],p=l[e],p=this.getCurvePercent(e/v.ENTRIES-1,1-(i-p)/(l[e+v.PREV_TIME]-p)),u+=(l[e+v.R]-u)*p,d+=(l[e+v.G]-d)*p,m+=(l[e+v.B]-m)*p,f+=(l[e+v.A]-f)*p),1==s?a.color.set(u,d,m,f):(h=a.color,r==G.setup&&h.setFromColor(a.data.color),h.add((u-h.r)*s,(d-h.g)*s,(m-h.b)*s,(f-h.a)*s))}}},v.ENTRIES=5,v.PREV_TIME=-5,v.PREV_R=-4,v.PREV_G=-3,v.PREV_B=-2,v.PREV_A=-1,v.R=1,v.G=2,v.B=3,v.A=4,v);function v(e){var t=h.call(this,e)||this;return t.frames=k.Utils.newFloatArray(e*v.ENTRIES),t}k.ColorTimeline=o;var c,o=(__extends(T,c=i),T.prototype.getPropertyId=function(){return(e.twoColor<<24)+this.slotIndex},T.prototype.setFrame=function(e,t,i,n,s,r,o,a,l){this.frames[e*=T.ENTRIES]=t,this.frames[e+T.R]=i,this.frames[e+T.G]=n,this.frames[e+T.B]=s,this.frames[e+T.A]=r,this.frames[e+T.R2]=o,this.frames[e+T.G2]=a,this.frames[e+T.B2]=l},T.prototype.apply=function(e,t,i,n,s,r,o){var a=e.slots[this.slotIndex];if(a.bone.active){var l=this.frames;if(i<l[0])switch(r){case G.setup:return a.color.setFromColor(a.data.color),void a.darkColor.setFromColor(a.data.darkColor);case G.first:var h=a.color,c=a.darkColor,p=a.data.color,u=a.data.darkColor;h.add((p.r-h.r)*s,(p.g-h.g)*s,(p.b-h.b)*s,(p.a-h.a)*s),c.add((u.r-c.r)*s,(u.g-c.g)*s,(u.b-c.b)*s,0)}else{var d,m=0,f=0,g=0,v=0,y=0,b=0,S=0;i>=l[l.length-T.ENTRIES]?(m=l[(d=l.length)+T.PREV_R],f=l[d+T.PREV_G],g=l[d+T.PREV_B],v=l[d+T.PREV_A],y=l[d+T.PREV_R2],b=l[d+T.PREV_G2],S=l[d+T.PREV_B2]):(m=l[(e=W.binarySearch(l,i,T.ENTRIES))+T.PREV_R],f=l[e+T.PREV_G],g=l[e+T.PREV_B],v=l[e+T.PREV_A],y=l[e+T.PREV_R2],b=l[e+T.PREV_G2],S=l[e+T.PREV_B2],d=l[e],d=this.getCurvePercent(e/T.ENTRIES-1,1-(i-d)/(l[e+T.PREV_TIME]-d)),m+=(l[e+T.R]-m)*d,f+=(l[e+T.G]-f)*d,g+=(l[e+T.B]-g)*d,v+=(l[e+T.A]-v)*d,y+=(l[e+T.R2]-y)*d,b+=(l[e+T.G2]-b)*d,S+=(l[e+T.B2]-S)*d),1==s?(a.color.set(m,f,g,v),a.darkColor.set(y,b,S,1)):(h=a.color,c=a.darkColor,r==G.setup&&(h.setFromColor(a.data.color),c.setFromColor(a.data.darkColor)),h.add((m-h.r)*s,(f-h.g)*s,(g-h.b)*s,(v-h.a)*s),c.add((y-c.r)*s,(b-c.g)*s,(S-c.b)*s,0))}}},T.ENTRIES=8,T.PREV_TIME=-8,T.PREV_R=-7,T.PREV_G=-6,T.PREV_B=-5,T.PREV_A=-4,T.PREV_R2=-3,T.PREV_G2=-2,T.PREV_B2=-1,T.R=1,T.G=2,T.B=3,T.A=4,T.R2=5,T.G2=6,T.B2=7,T);function T(e){var t=c.call(this,e)||this;return t.frames=k.Utils.newFloatArray(e*T.ENTRIES),t}k.TwoColorTimeline=o;p.prototype.getPropertyId=function(){return(e.attachment<<24)+this.slotIndex},p.prototype.getFrameCount=function(){return this.frames.length},p.prototype.setFrame=function(e,t,i){this.frames[e]=t,this.attachmentNames[e]=i},p.prototype.apply=function(e,t,i,n,s,r,o){var a,l=e.slots[this.slotIndex];l.bone.active&&(o!=m.mixOut||r!=G.setup?i<(o=this.frames)[0]?r!=G.setup&&r!=G.first||(r=l.data.attachmentName,l.setAttachment(null==r?null:e.getAttachment(this.slotIndex,r))):(a=0,a=i>=o[o.length-1]?o.length-1:W.binarySearch(o,i,1)-1,a=this.attachmentNames[a],e.slots[this.slotIndex].setAttachment(null==a?null:e.getAttachment(this.slotIndex,a))):(a=l.data.attachmentName,l.setAttachment(null==a?null:e.getAttachment(this.slotIndex,a))))},o=p;function p(e){this.frames=k.Utils.newFloatArray(e),this.attachmentNames=new Array(e)}k.AttachmentTimeline=o;var b,S=null,o=(__extends(_,b=i),_.prototype.getPropertyId=function(){return(e.deform<<27)+ +this.attachment.id+this.slotIndex},_.prototype.setFrame=function(e,t,i){this.frames[e]=t,this.frameVertices[e]=i},_.prototype.apply=function(e,t,i,n,s,r,o){var a=e.slots[this.slotIndex];if(a.bone.active){var l=a.getAttachment();if(l instanceof k.VertexAttachment&&l.deformAttachment==this.attachment){var h=a.deform;0==h.length&&(r=G.setup);var c=this.frameVertices,p=c[0].length,e=this.frames;if(i<e[0]){var u=l;switch(r){case G.setup:return void(h.length=0);case G.first:if(1==s){h.length=0;break}var d=k.Utils.setArraySize(h,p);if(null==u.bones)for(var m=u.vertices,f=0;f<p;f++)d[f]+=(m[f]-d[f])*s;else{s=1-s;for(f=0;f<p;f++)d[f]*=s}}}else{var g=k.Utils.setArraySize(h,p);if(i>=e[e.length-1]){var v=c[e.length-1];if(1==s)if(r==G.add)if(null==(u=l).bones)for(var m=u.vertices,y=0;y<p;y++)g[y]+=v[y]-m[y];else for(var b=0;b<p;b++)g[b]+=v[b];else k.Utils.arrayCopy(v,0,g,0,p);else switch(r){case G.setup:if(null==l.bones)for(var m=l.vertices,S=0;S<p;S++){var T=m[S];g[S]=T+(v[S]-T)*s}else for(var _=0;_<p;_++)g[_]=v[_]*s;break;case G.first:case G.replace:for(var A=0;A<p;A++)g[A]+=(v[A]-g[A])*s;case G.add:if(null==(u=l).bones)for(var m=u.vertices,P=0;P<p;P++)g[P]+=(v[P]-m[P])*s;else for(var I=0;I<p;I++)g[I]+=v[I]*s}}else{var a=W.binarySearch(e,i),C=c[a-1],x=c[a],c=e[a],B=this.getCurvePercent(a-1,1-(i-c)/(e[a-1]-c));if(1==s)if(r==G.add)if(null==(u=l).bones)for(var m=u.vertices,E=0;E<p;E++){var w=C[E];g[E]+=w+(x[E]-w)*B-m[E]}else for(var R=0;R<p;R++){w=C[R];g[R]+=w+(x[R]-w)*B}else for(var M=0;M<p;M++){w=C[M];g[M]=w+(x[M]-w)*B}else switch(r){case G.setup:if(null==l.bones)for(var m=l.vertices,O=0;O<p;O++){w=C[O],T=m[O];g[O]=T+(w+(x[O]-w)*B-T)*s}else for(var N=0;N<p;N++){w=C[N];g[N]=(w+(x[N]-w)*B)*s}break;case G.first:case G.replace:for(var F=0;F<p;F++){w=C[F];g[F]+=(w+(x[F]-w)*B-g[F])*s}break;case G.add:if(null==(u=l).bones)for(var m=u.vertices,D=0;D<p;D++){w=C[D];g[D]+=(w+(x[D]-w)*B-m[D])*s}else for(var L=0;L<p;L++){w=C[L];g[L]+=(w+(x[L]-w)*B)*s}}}}}}},_);function _(e){var t=b.call(this,e)||this;return t.frames=k.Utils.newFloatArray(e),t.frameVertices=new Array(e),null==S&&(S=k.Utils.newFloatArray(64)),t}k.DeformTimeline=o;A.prototype.getPropertyId=function(){return e.event<<24},A.prototype.getFrameCount=function(){return this.frames.length},A.prototype.setFrame=function(e,t){this.frames[e]=t.time,this.events[e]=t},A.prototype.apply=function(e,t,i,n,s,r,o){if(null!=n){var a=this.frames,l=this.frames.length;if(i<t)this.apply(e,t,Number.MAX_VALUE,n,s,r,o),t=-1;else if(t>=a[l-1])return;if(!(i<a[0])){var h=0;if(t<a[0])h=0;else for(var c=a[h=W.binarySearch(a,t)];0<h&&a[h-1]==c;)h--;for(;h<l&&i>=a[h];h++)n.push(this.events[h])}}},o=A;function A(e){this.frames=k.Utils.newFloatArray(e),this.events=new Array(e)}k.EventTimeline=o;P.prototype.getPropertyId=function(){return e.drawOrder<<24},P.prototype.getFrameCount=function(){return this.frames.length},P.prototype.setFrame=function(e,t,i){this.frames[e]=t,this.drawOrders[e]=i},P.prototype.apply=function(e,t,i,n,s,r,o){var a=e.drawOrder,l=e.slots;if(o!=m.mixOut||r!=G.setup){o=this.frames;if(i<o[0])r!=G.setup&&r!=G.first||k.Utils.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);else{var r=0,r=i>=o[o.length-1]?o.length-1:W.binarySearch(o,i)-1,h=this.drawOrders[r];if(null==h)k.Utils.arrayCopy(l,0,a,0,l.length);else for(var c=0,p=h.length;c<p;c++)a[c]=l[h[c]]}}else k.Utils.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length)},o=P;function P(e){this.frames=k.Utils.newFloatArray(e),this.drawOrders=new Array(e)}k.DrawOrderTimeline=o;var I,o=(__extends(C,I=i),C.prototype.getPropertyId=function(){return(e.ikConstraint<<24)+this.ikConstraintIndex},C.prototype.setFrame=function(e,t,i,n,s,r,o){this.frames[e*=C.ENTRIES]=t,this.frames[e+C.MIX]=i,this.frames[e+C.SOFTNESS]=n,this.frames[e+C.BEND_DIRECTION]=s,this.frames[e+C.COMPRESS]=r?1:0,this.frames[e+C.STRETCH]=o?1:0},C.prototype.apply=function(e,t,i,n,s,r,o){var a,l,h,c=this.frames,p=e.ikConstraints[this.ikConstraintIndex];if(p.active)if(i<c[0])switch(r){case G.setup:return p.mix=p.data.mix,p.softness=p.data.softness,p.bendDirection=p.data.bendDirection,p.compress=p.data.compress,void(p.stretch=p.data.stretch);case G.first:p.mix+=(p.data.mix-p.mix)*s,p.softness+=(p.data.softness-p.softness)*s,p.bendDirection=p.data.bendDirection,p.compress=p.data.compress,p.stretch=p.data.stretch}else i>=c[c.length-C.ENTRIES]?r==G.setup?(p.mix=p.data.mix+(c[c.length+C.PREV_MIX]-p.data.mix)*s,p.softness=p.data.softness+(c[c.length+C.PREV_SOFTNESS]-p.data.softness)*s,o==m.mixOut?(p.bendDirection=p.data.bendDirection,p.compress=p.data.compress,p.stretch=p.data.stretch):(p.bendDirection=c[c.length+C.PREV_BEND_DIRECTION],p.compress=0!=c[c.length+C.PREV_COMPRESS],p.stretch=0!=c[c.length+C.PREV_STRETCH])):(p.mix+=(c[c.length+C.PREV_MIX]-p.mix)*s,p.softness+=(c[c.length+C.PREV_SOFTNESS]-p.softness)*s,o==m.mixIn&&(p.bendDirection=c[c.length+C.PREV_BEND_DIRECTION],p.compress=0!=c[c.length+C.PREV_COMPRESS],p.stretch=0!=c[c.length+C.PREV_STRETCH])):(l=c[(a=W.binarySearch(c,i,C.ENTRIES))+C.PREV_MIX],h=c[a+C.PREV_SOFTNESS],e=c[a],e=this.getCurvePercent(a/C.ENTRIES-1,1-(i-e)/(c[a+C.PREV_TIME]-e)),r==G.setup?(p.mix=p.data.mix+(l+(c[a+C.MIX]-l)*e-p.data.mix)*s,p.softness=p.data.softness+(h+(c[a+C.SOFTNESS]-h)*e-p.data.softness)*s,o==m.mixOut?(p.bendDirection=p.data.bendDirection,p.compress=p.data.compress,p.stretch=p.data.stretch):(p.bendDirection=c[a+C.PREV_BEND_DIRECTION],p.compress=0!=c[a+C.PREV_COMPRESS],p.stretch=0!=c[a+C.PREV_STRETCH])):(p.mix+=(l+(c[a+C.MIX]-l)*e-p.mix)*s,p.softness+=(h+(c[a+C.SOFTNESS]-h)*e-p.softness)*s,o==m.mixIn&&(p.bendDirection=c[a+C.PREV_BEND_DIRECTION],p.compress=0!=c[a+C.PREV_COMPRESS],p.stretch=0!=c[a+C.PREV_STRETCH])))},C.ENTRIES=6,C.PREV_TIME=-6,C.PREV_MIX=-5,C.PREV_SOFTNESS=-4,C.PREV_BEND_DIRECTION=-3,C.PREV_COMPRESS=-2,C.PREV_STRETCH=-1,C.MIX=1,C.SOFTNESS=2,C.BEND_DIRECTION=3,C.COMPRESS=4,C.STRETCH=5,C);function C(e){var t=I.call(this,e)||this;return t.frames=k.Utils.newFloatArray(e*C.ENTRIES),t}k.IkConstraintTimeline=o;var x,o=(__extends(B,x=i),B.prototype.getPropertyId=function(){return(e.transformConstraint<<24)+this.transformConstraintIndex},B.prototype.setFrame=function(e,t,i,n,s,r){this.frames[e*=B.ENTRIES]=t,this.frames[e+B.ROTATE]=i,this.frames[e+B.TRANSLATE]=n,this.frames[e+B.SCALE]=s,this.frames[e+B.SHEAR]=r},B.prototype.apply=function(e,t,i,n,s,r,o){var a=this.frames,l=e.transformConstraints[this.transformConstraintIndex];if(l.active)if(i<a[0]){var h=l.data;switch(r){case G.setup:return l.rotateMix=h.rotateMix,l.translateMix=h.translateMix,l.scaleMix=h.scaleMix,void(l.shearMix=h.shearMix);case G.first:l.rotateMix+=(h.rotateMix-l.rotateMix)*s,l.translateMix+=(h.translateMix-l.translateMix)*s,l.scaleMix+=(h.scaleMix-l.scaleMix)*s,l.shearMix+=(h.shearMix-l.shearMix)*s}}else{var c,p=0,u=0,d=0,m=0;i>=a[a.length-B.ENTRIES]?(p=a[(c=a.length)+B.PREV_ROTATE],u=a[c+B.PREV_TRANSLATE],d=a[c+B.PREV_SCALE],m=a[c+B.PREV_SHEAR]):(p=a[(e=W.binarySearch(a,i,B.ENTRIES))+B.PREV_ROTATE],u=a[e+B.PREV_TRANSLATE],d=a[e+B.PREV_SCALE],m=a[e+B.PREV_SHEAR],c=a[e],c=this.getCurvePercent(e/B.ENTRIES-1,1-(i-c)/(a[e+B.PREV_TIME]-c)),p+=(a[e+B.ROTATE]-p)*c,u+=(a[e+B.TRANSLATE]-u)*c,d+=(a[e+B.SCALE]-d)*c,m+=(a[e+B.SHEAR]-m)*c),r==G.setup?(h=l.data,l.rotateMix=h.rotateMix+(p-h.rotateMix)*s,l.translateMix=h.translateMix+(u-h.translateMix)*s,l.scaleMix=h.scaleMix+(d-h.scaleMix)*s,l.shearMix=h.shearMix+(m-h.shearMix)*s):(l.rotateMix+=(p-l.rotateMix)*s,l.translateMix+=(u-l.translateMix)*s,l.scaleMix+=(d-l.scaleMix)*s,l.shearMix+=(m-l.shearMix)*s)}},B.ENTRIES=5,B.PREV_TIME=-5,B.PREV_ROTATE=-4,B.PREV_TRANSLATE=-3,B.PREV_SCALE=-2,B.PREV_SHEAR=-1,B.ROTATE=1,B.TRANSLATE=2,B.SCALE=3,B.SHEAR=4,B);function B(e){var t=x.call(this,e)||this;return t.frames=k.Utils.newFloatArray(e*B.ENTRIES),t}k.TransformConstraintTimeline=o;var E,o=(__extends(w,E=i),w.prototype.getPropertyId=function(){return(e.pathConstraintPosition<<24)+this.pathConstraintIndex},w.prototype.setFrame=function(e,t,i){this.frames[e*=w.ENTRIES]=t,this.frames[e+w.VALUE]=i},w.prototype.apply=function(e,t,i,n,s,r,o){var a=this.frames,l=e.pathConstraints[this.pathConstraintIndex];if(l.active)if(i<a[0])switch(r){case G.setup:return void(l.position=l.data.position);case G.first:l.position+=(l.data.position-l.position)*s}else{var h,c=0;i>=a[a.length-w.ENTRIES]?c=a[a.length+w.PREV_VALUE]:(c=a[(h=W.binarySearch(a,i,w.ENTRIES))+w.PREV_VALUE],e=a[h],e=this.getCurvePercent(h/w.ENTRIES-1,1-(i-e)/(a[h+w.PREV_TIME]-e)),c+=(a[h+w.VALUE]-c)*e),r==G.setup?l.position=l.data.position+(c-l.data.position)*s:l.position+=(c-l.position)*s}},w.ENTRIES=2,w.PREV_TIME=-2,w.PREV_VALUE=-1,w.VALUE=1,w);function w(e){var t=E.call(this,e)||this;return t.frames=k.Utils.newFloatArray(e*w.ENTRIES),t}k.PathConstraintPositionTimeline=o;var R,o=(__extends(M,R=o),M.prototype.getPropertyId=function(){return(e.pathConstraintSpacing<<24)+this.pathConstraintIndex},M.prototype.apply=function(e,t,i,n,s,r,o){var a=this.frames,l=e.pathConstraints[this.pathConstraintIndex];if(l.active)if(i<a[0])switch(r){case G.setup:return void(l.spacing=l.data.spacing);case G.first:l.spacing+=(l.data.spacing-l.spacing)*s}else{var h,c=0;i>=a[a.length-M.ENTRIES]?c=a[a.length+M.PREV_VALUE]:(c=a[(h=W.binarySearch(a,i,M.ENTRIES))+M.PREV_VALUE],e=a[h],e=this.getCurvePercent(h/M.ENTRIES-1,1-(i-e)/(a[h+M.PREV_TIME]-e)),c+=(a[h+M.VALUE]-c)*e),r==G.setup?l.spacing=l.data.spacing+(c-l.data.spacing)*s:l.spacing+=(c-l.spacing)*s}},M);function M(e){return R.call(this,e)||this}k.PathConstraintSpacingTimeline=o;var O,i=(__extends(N,O=i),N.prototype.getPropertyId=function(){return(e.pathConstraintMix<<24)+this.pathConstraintIndex},N.prototype.setFrame=function(e,t,i,n){this.frames[e*=N.ENTRIES]=t,this.frames[e+N.ROTATE]=i,this.frames[e+N.TRANSLATE]=n},N.prototype.apply=function(e,t,i,n,s,r,o){var a=this.frames,l=e.pathConstraints[this.pathConstraintIndex];if(l.active)if(i<a[0])switch(r){case G.setup:return l.rotateMix=l.data.rotateMix,void(l.translateMix=l.data.translateMix);case G.first:l.rotateMix+=(l.data.rotateMix-l.rotateMix)*s,l.translateMix+=(l.data.translateMix-l.translateMix)*s}else{var h,c=0,p=0;i>=a[a.length-N.ENTRIES]?(c=a[a.length+N.PREV_ROTATE],p=a[a.length+N.PREV_TRANSLATE]):(c=a[(h=W.binarySearch(a,i,N.ENTRIES))+N.PREV_ROTATE],p=a[h+N.PREV_TRANSLATE],e=a[h],e=this.getCurvePercent(h/N.ENTRIES-1,1-(i-e)/(a[h+N.PREV_TIME]-e)),c+=(a[h+N.ROTATE]-c)*e,p+=(a[h+N.TRANSLATE]-p)*e),r==G.setup?(l.rotateMix=l.data.rotateMix+(c-l.data.rotateMix)*s,l.translateMix=l.data.translateMix+(p-l.data.translateMix)*s):(l.rotateMix+=(c-l.rotateMix)*s,l.translateMix+=(p-l.translateMix)*s)}},N.ENTRIES=3,N.PREV_TIME=-3,N.PREV_ROTATE=-2,N.PREV_TRANSLATE=-1,N.ROTATE=1,N.TRANSLATE=2,N);function N(e){var t=O.call(this,e)||this;return t.frames=k.Utils.newFloatArray(e*N.ENTRIES),t}k.PathConstraintMixTimeline=i}(e.core||(e.core={}))}(pixi_spine=pixi_spine||{}),function(e){!function(P){var e=(I.prototype.update=function(e){e*=this.timeScale;for(var t=this.tracks,i=0,n=t.length;i<n;i++){var s=t[i];if(null!=s){s.animationLast=s.nextAnimationLast,s.trackLast=s.nextTrackLast;var r=e*s.timeScale;if(0<s.delay){if(s.delay-=r,0<s.delay)continue;r=-s.delay,s.delay=0}var o=s.next;if(null!=o){var a=s.trackLast-o.delay;if(0<=a){for(o.delay=0,o.trackTime=0==s.timeScale?0:(a/s.timeScale+e)*o.timeScale,s.trackTime+=r,this.setCurrent(i,o,!0);null!=o.mixingFrom;)o.mixTime+=e,o=o.mixingFrom;continue}}else if(s.trackLast>=s.trackEnd&&null==s.mixingFrom){t[i]=null,this.queue.end(s),this.disposeNext(s);continue}if(null!=s.mixingFrom&&this.updateMixingFrom(s,e)){var l=s.mixingFrom;for((s.mixingFrom=null)!=l&&(l.mixingTo=null);null!=l;)this.queue.end(l),l=l.mixingFrom}s.trackTime+=r}}this.queue.drain()},I.prototype.updateMixingFrom=function(e,t){var i=e.mixingFrom;if(null==i)return!0;var n=this.updateMixingFrom(i,t);return i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,0<e.mixTime&&e.mixTime>=e.mixDuration?(0!=i.totalAlpha&&0!=e.mixDuration||(e.mixingFrom=i.mixingFrom,null!=i.mixingFrom&&(i.mixingFrom.mixingTo=e),e.interruptAlpha=i.interruptAlpha,this.queue.end(i)),n):(i.trackTime+=t*i.timeScale,e.mixTime+=t,!1)},I.prototype.apply=function(e){if(null==e)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var t=this.events,i=this.tracks,n=!1,s=0,r=i.length;s<r;s++){var o=i[s];if(!(null==o||0<o.delay)){var n=!0,a=0==s?P.MixBlend.first:o.mixBlend,l=o.alpha;null!=o.mixingFrom?l*=this.applyMixingFrom(o,e,a):o.trackTime>=o.trackEnd&&null==o.next&&(l=0);var h=o.animationLast,c=o.getAnimationTime(),p=o.animation.timelines.length,u=o.animation.timelines;if(0==s&&1==l||a==P.MixBlend.add)for(var d=0;d<p;d++)P.Utils.webkit602BugfixHelper(l,a),u[d].apply(e,h,c,t,l,a,P.MixDirection.mixIn);else{var m=o.timelineMode,f=0==o.timelinesRotation.length;f&&P.Utils.setArraySize(o.timelinesRotation,p<<1,null);for(var g=o.timelinesRotation,d=0;d<p;d++){var v=u[d],y=(m[d]&I.NOT_LAST-1)==I.SUBSEQUENT?a:P.MixBlend.setup;v instanceof P.RotateTimeline?this.applyRotateTimeline(v,e,c,l,y,g,d<<1,f):(P.Utils.webkit602BugfixHelper(l,a),v.apply(e,h,c,t,l,y,P.MixDirection.mixIn))}}this.queueEvents(o,c),t.length=0,o.nextAnimationLast=c,o.nextTrackLast=o.trackTime}}return this.queue.drain(),n},I.prototype.applyMixingFrom=function(e,t,i){var n=e.mixingFrom;null!=n.mixingFrom&&this.applyMixingFrom(n,t,i);var s=0;0==e.mixDuration?(s=1,i==P.MixBlend.first&&(i=P.MixBlend.setup)):(1<(s=e.mixTime/e.mixDuration)&&(s=1),i!=P.MixBlend.first&&(i=n.mixBlend));var r=s<n.eventThreshold?this.events:null,o=s<n.attachmentThreshold,a=s<n.drawOrderThreshold,l=n.animationLast,h=n.getAnimationTime(),c=n.animation.timelines.length,p=n.animation.timelines,u=n.alpha*e.interruptAlpha,d=u*(1-s);if(i==P.MixBlend.add)for(var m=0;m<c;m++)p[m].apply(t,l,h,r,d,i,P.MixDirection.mixOut);else{var f=n.timelineMode,g=n.timelineHoldMix,v=0==n.timelinesRotation.length;v&&P.Utils.setArraySize(n.timelinesRotation,c<<1,null);for(var y=n.timelinesRotation,m=n.totalAlpha=0;m<c;m++){var b=p[m],S=P.MixDirection.mixOut,T=void 0,_=0;switch(f[m]&I.NOT_LAST-1){case I.SUBSEQUENT:if(T=i,!o&&b instanceof P.AttachmentTimeline){if((f[m]&I.NOT_LAST)==I.NOT_LAST)continue;T=P.MixBlend.setup}if(!a&&b instanceof P.DrawOrderTimeline)continue;_=d;break;case I.FIRST:T=P.MixBlend.setup,_=d;break;case I.HOLD:T=P.MixBlend.setup,_=u;break;default:var T=P.MixBlend.setup,A=g[m],_=u*Math.max(0,1-A.mixTime/A.mixDuration)}n.totalAlpha+=_,b instanceof P.RotateTimeline?this.applyRotateTimeline(b,t,h,_,T,y,m<<1,v):(P.Utils.webkit602BugfixHelper(_,i),T==P.MixBlend.setup&&(b instanceof P.AttachmentTimeline?!o&&(f[m]&I.NOT_LAST)!=I.NOT_LAST||(S=P.MixDirection.mixIn):b instanceof P.DrawOrderTimeline&&a&&(S=P.MixDirection.mixIn)),b.apply(t,l,h,r,_,T,S))}}return 0<e.mixDuration&&this.queueEvents(n,h),this.events.length=0,n.nextAnimationLast=h,n.nextTrackLast=n.trackTime,s},I.prototype.applyRotateTimeline=function(e,t,i,n,s,r,o,a){if(a&&(r[o]=0),1!=n){var l=e,h=l.frames,c=t.bones[l.boneIndex];if(c.active){var p=0,u=0;if(i<h[0])switch(s){case P.MixBlend.setup:c.rotation=c.data.rotation;default:return;case P.MixBlend.first:p=c.rotation,u=c.data.rotation}else{p=(s==P.MixBlend.setup?c.data:c).rotation;i>=h[h.length-P.RotateTimeline.ENTRIES]?u=c.data.rotation+h[h.length+P.RotateTimeline.PREV_ROTATION]:(m=h[(d=P.Animation.binarySearch(h,i,P.RotateTimeline.ENTRIES))+P.RotateTimeline.PREV_ROTATION],g=h[d],f=l.getCurvePercent((d>>1)-1,1-(i-g)/(h[d+P.RotateTimeline.PREV_TIME]-g)),u=h[d+P.RotateTimeline.ROTATION]-m,u=m+(u-=360*(16384-(16384.499999999996-u/360|0)))*f+c.data.rotation,u-=360*(16384-(16384.499999999996-u/360|0)))}var d,m,f,g=0,h=u-p;0==(h-=360*(16384-(16384.499999999996-h/360|0)))?g=r[o]:(m=d=0,m=a?(d=0,h):(d=r[o],r[o+1]),f=0<h,a=0<=d,P.MathUtils.signum(m)!=P.MathUtils.signum(h)&&Math.abs(m)<=90&&(180<Math.abs(d)&&(d+=360*P.MathUtils.signum(d)),a=f),g=h+d-d%360,a!=f&&(g+=360*P.MathUtils.signum(d)),r[o]=g),r[o+1]=h,c.rotation=(p+=g*n)-360*(16384-(16384.499999999996-p/360|0))}}else e.apply(t,0,i,null,1,s,P.MixDirection.mixIn)},I.prototype.queueEvents=function(e,t){for(var i=e.animationStart,n=e.animationEnd,s=n-i,r=e.trackLast%s,o=this.events,a=0,l=o.length;a<l;a++){var h=o[a];if(h.time<r)break;h.time>n||this.queue.event(e,h)}for((e.loop?0==s||r>e.trackTime%s:n<=t&&e.animationLast<n)&&this.queue.complete(e);a<l;a++)o[a].time<i||this.queue.event(e,o[a])},I.prototype.clearTracks=function(){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var t=0,i=this.tracks.length;t<i;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=e,this.queue.drain()},I.prototype.clearTrack=function(e){if(!(e>=this.tracks.length)){e=this.tracks[e];if(null!=e){this.queue.end(e),this.disposeNext(e);for(var t=e;;){var i=t.mixingFrom;if(null==i)break;this.queue.end(i),t.mixingFrom=null,t.mixingTo=null,t=i}this.tracks[e.trackIndex]=null,this.queue.drain()}}},I.prototype.setCurrent=function(e,t,i){var n=this.expandToIndex(e);this.tracks[e]=t,null!=n&&(i&&this.queue.interrupt(n),((t.mixingFrom=n).mixingTo=t).mixTime=0,null!=n.mixingFrom&&0<n.mixDuration&&(t.interruptAlpha*=Math.min(1,n.mixTime/n.mixDuration)),n.timelinesRotation.length=0),this.queue.start(t)},I.prototype.setAnimation=function(e,t,i){var n=this.data.skeletonData.findAnimation(t);if(null==n)throw new Error("Animation not found: "+t);return this.setAnimationWith(e,n,i)},I.prototype.setAnimationWith=function(e,t,i){if(null==t)throw new Error("animation cannot be null.");var n=!0,s=this.expandToIndex(e);null!=s&&(-1==s.nextTrackLast?(this.tracks[e]=s.mixingFrom,this.queue.interrupt(s),this.queue.end(s),this.disposeNext(s),s=s.mixingFrom,n=!1):this.disposeNext(s));s=this.trackEntry(e,t,i,s);return this.setCurrent(e,s,n),this.queue.drain(),s},I.prototype.addAnimation=function(e,t,i,n){var s=this.data.skeletonData.findAnimation(t);if(null==s)throw new Error("Animation not found: "+t);return this.addAnimationWith(e,s,i,n)},I.prototype.addAnimationWith=function(e,t,i,n){if(null==t)throw new Error("animation cannot be null.");var s=this.expandToIndex(e);if(null!=s)for(;null!=s.next;)s=s.next;i=this.trackEntry(e,t,i,s);return null==s?(this.setCurrent(e,i,!0),this.queue.drain()):(s.next=i,n<=0&&(0!=(e=s.animationEnd-s.animationStart)?(s.loop?n+=e*(1+(s.trackTime/e|0)):n+=Math.max(e,s.trackTime),n-=this.data.getMix(s.animation,t)):n=s.trackTime)),i.delay=n,i},I.prototype.setEmptyAnimation=function(e,t){e=this.setAnimationWith(e,I.emptyAnimation,!1);return e.mixDuration=t,e.trackEnd=t,e},I.prototype.addEmptyAnimation=function(e,t,i){i<=0&&(i-=t);i=this.addAnimationWith(e,I.emptyAnimation,!1,i);return i.mixDuration=t,i.trackEnd=t,i},I.prototype.setEmptyAnimations=function(e){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var i=0,n=this.tracks.length;i<n;i++){var s=this.tracks[i];null!=s&&this.setEmptyAnimation(s.trackIndex,e)}this.queue.drainDisabled=t,this.queue.drain()},I.prototype.expandToIndex=function(e){return e<this.tracks.length?this.tracks[e]:(P.Utils.ensureArrayCapacity(this.tracks,e+1,null),this.tracks.length=e+1,null)},I.prototype.trackEntry=function(e,t,i,n){var s=this.trackEntryPool.obtain();return s.trackIndex=e,s.animation=t,s.loop=i,s.holdPrevious=!1,s.eventThreshold=0,s.attachmentThreshold=0,s.drawOrderThreshold=0,s.animationStart=0,s.animationEnd=t.duration,s.animationLast=-1,s.nextAnimationLast=-1,s.delay=0,s.trackTime=0,s.trackLast=-1,s.nextTrackLast=-1,s.trackEnd=Number.MAX_VALUE,s.timeScale=1,s.alpha=1,s.interruptAlpha=1,s.mixTime=0,s.mixDuration=null==n?0:this.data.getMix(n.animation,t),s},I.prototype.disposeNext=function(e){for(var t=e.next;null!=t;)this.queue.dispose(t),t=t.next;e.next=null},I.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var e=0,t=this.tracks.length;e<t;e++)if(null!=(i=this.tracks[e])){for(;null!=i.mixingFrom;)i=i.mixingFrom;for(;null!=i.mixingFrom&&i.mixBlend==P.MixBlend.add||this.computeHold(i),null!=(i=i.mixingTo););}this.propertyIDs.clear();for(e=this.tracks.length-1;0<=e;e--)for(var i=this.tracks[e];null!=i;)this.computeNotLast(i),i=i.mixingFrom},I.prototype.computeHold=function(e){var t=e.mixingTo,i=e.animation.timelines,n=e.animation.timelines.length,s=P.Utils.setArraySize(e.timelineMode,n);e.timelineHoldMix.length=0;var r=P.Utils.setArraySize(e.timelineHoldMix,n),o=this.propertyIDs;if(null!=t&&t.holdPrevious)for(var a=0;a<n;a++)o.add(i[a].getPropertyId()),s[a]=I.HOLD;else e:for(a=0;a<n;a++){var l=i[a],h=l.getPropertyId();if(o.add(h))if(null==t||l instanceof P.AttachmentTimeline||l instanceof P.DrawOrderTimeline||l instanceof P.EventTimeline||!this.hasTimeline(t,h))s[a]=I.FIRST;else{for(var c=t.mixingTo;null!=c;c=c.mixingTo)if(!this.hasTimeline(c,h)){if(0<e.mixDuration){s[a]=I.HOLD_MIX,r[a]=c;continue e}break}s[a]=I.HOLD}else s[a]=I.SUBSEQUENT}},I.prototype.computeNotLast=function(e){for(var t,i=e.animation.timelines,n=e.animation.timelines.length,s=e.timelineMode,r=this.propertyIDs,o=0;o<n;o++)i[o]instanceof P.AttachmentTimeline&&(t=i[o],r.add(t.slotIndex)||(s[o]|=I.NOT_LAST))},I.prototype.hasTimeline=function(e,t){for(var i=e.animation.timelines,n=0,s=i.length;n<s;n++)if(i[n].getPropertyId()==t)return!0;return!1},I.prototype.getCurrent=function(e){return e>=this.tracks.length?null:this.tracks[e]},I.prototype.addListener=function(e){if(null==e)throw new Error("listener cannot be null.");this.listeners.push(e)},I.prototype.removeListener=function(e){e=this.listeners.indexOf(e);0<=e&&this.listeners.splice(e,1)},I.prototype.clearListeners=function(){this.listeners.length=0},I.prototype.clearListenerNotifications=function(){this.queue.clear()},I.prototype.setAnimationByName=function(e,t,i){I.deprecatedWarning1||(I.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(e,t,i)},I.prototype.addAnimationByName=function(e,t,i,n){I.deprecatedWarning2||(I.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(e,t,i,n)},I.prototype.hasAnimation=function(e){return null!==this.data.skeletonData.findAnimation(e)},I.prototype.hasAnimationByName=function(e){return I.deprecatedWarning3||(I.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(e)},I.emptyAnimation=new P.Animation("<empty>",[],0),I.SUBSEQUENT=0,I.FIRST=1,I.HOLD=2,I.HOLD_MIX=3,I.NOT_LAST=4,I.deprecatedWarning1=!1,I.deprecatedWarning2=!1,I.deprecatedWarning3=!1,I);function I(e){this.tracks=new Array,this.events=new Array,this.listeners=new Array,this.queue=new n(this),this.propertyIDs=new P.IntSet,this.animationsChanged=!1,this.timeScale=1,this.trackEntryPool=new P.Pool(function(){return new t}),this.data=e}P.AnimationState=e;var t=(i.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},i.prototype.getAnimationTime=function(){if(this.loop){var e=this.animationEnd-this.animationStart;return 0==e?this.animationStart:this.trackTime%e+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},i.prototype.setAnimationLast=function(e){this.animationLast=e,this.nextAnimationLast=e},i.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},i.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(i.prototype,"time",{get:function(){return i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(e){i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"endTime",{get:function(){return i.deprecatedWarning2||(i.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(e){i.deprecatedWarning2||(i.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=e},enumerable:!0,configurable:!0}),i.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},i.deprecatedWarning1=!1,i.deprecatedWarning2=!1,i);function i(){this.mixBlend=P.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}P.TrackEntry=t;var l,n=(s.prototype.start=function(e){this.objects.push(l.start),this.objects.push(e),this.animState.animationsChanged=!0},s.prototype.interrupt=function(e){this.objects.push(l.interrupt),this.objects.push(e)},s.prototype.end=function(e){this.objects.push(l.end),this.objects.push(e),this.animState.animationsChanged=!0},s.prototype.dispose=function(e){this.objects.push(l.dispose),this.objects.push(e)},s.prototype.complete=function(e){this.objects.push(l.complete),this.objects.push(e)},s.prototype.event=function(e,t){this.objects.push(l.event),this.objects.push(e),this.objects.push(t)},s.prototype.deprecateStuff=function(){return s.deprecatedWarning1||(s.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},s.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var e=this.objects,t=this.animState.listeners,i=0;i<e.length;i+=2){var n=e[i],s=e[i+1];switch(n){case l.start:null!=s.listener&&s.listener.start&&s.listener.start(s);for(var r=0;r<t.length;r++)t[r].start&&t[r].start(s);s.onStart&&this.deprecateStuff()&&s.onStart(s.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(s.trackIndex);break;case l.interrupt:null!=s.listener&&s.listener.interrupt&&s.listener.interrupt(s);for(r=0;r<t.length;r++)t[r].interrupt&&t[r].interrupt(s);break;case l.end:null!=s.listener&&s.listener.end&&s.listener.end(s);for(r=0;r<t.length;r++)t[r].end&&t[r].end(s);s.onEnd&&this.deprecateStuff()&&s.onEnd(s.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(s.trackIndex);case l.dispose:null!=s.listener&&s.listener.dispose&&s.listener.dispose(s);for(r=0;r<t.length;r++)t[r].dispose&&t[r].dispose(s);this.animState.trackEntryPool.free(s);break;case l.complete:null!=s.listener&&s.listener.complete&&s.listener.complete(s);for(r=0;r<t.length;r++)t[r].complete&&t[r].complete(s);var o=P.MathUtils.toInt(s.loopsCount());s.onComplete&&this.deprecateStuff()&&s.onComplete(s.trackIndex,o),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(s.trackIndex,o);break;case l.event:var a=e[2+i++];null!=s.listener&&s.listener.event&&s.listener.event(s,a);for(r=0;r<t.length;r++)t[r].event&&t[r].event(s,a);s.onEvent&&this.deprecateStuff()&&s.onEvent(s.trackIndex,a),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(s.trackIndex,a)}}this.clear(),this.drainDisabled=!1}},s.prototype.clear=function(){this.objects.length=0},s.deprecatedWarning1=!1,s);function s(e){this.objects=[],this.drainDisabled=!1,this.animState=e}P.EventQueue=n,(e=l=P.EventType||(P.EventType={}))[e.start=0]="start",e[e.interrupt=1]="interrupt",e[e.end=2]="end",e[e.dispose=3]="dispose",e[e.complete=4]="complete",e[e.event=5]="event";r.prototype.start=function(e){},r.prototype.interrupt=function(e){},r.prototype.end=function(e){},r.prototype.dispose=function(e){},r.prototype.complete=function(e){},r.prototype.event=function(e,t){},e=r;function r(){}P.AnimationStateAdapter2=e}(e.core||(e.core={}))}(pixi_spine=pixi_spine||{}),function(e){function n(e){if(this.animationToMixTime={},this.defaultMix=0,null==e)throw new Error("skeletonData cannot be null.");this.skeletonData=e}e=e.core||(e.core={}),n.prototype.setMix=function(e,t,i){var n=this.skeletonData.findAnimation(e);if(null==n)throw new Error("Animation not found: "+e);e=this.skeletonData.findAnimation(t);if(null==e)throw new Error("Animation not found: "+t);this.setMixWith(n,e,i)},n.prototype.setMixByName=function(e,t,i){n.deprecatedWarning1||(n.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(e,t,i)},n.prototype.setMixWith=function(e,t,i){if(null==e)throw new Error("from cannot be null.");if(null==t)throw new Error("to cannot be null.");t=e.name+"."+t.name;this.animationToMixTime[t]=i},n.prototype.getMix=function(e,t){t=e.name+"."+t.name,t=this.animationToMixTime[t];return void 0===t?this.defaultMix:t},n.deprecatedWarning1=!1,e.AnimationStateData=n}(pixi_spine=pixi_spine||{}),function(e){var s;function t(e){this.atlas=e}s=e.core||(e.core={}),t.prototype.newRegionAttachment=function(e,t,i){i=this.atlas.findRegion(i);if(null==i)return null;t=new s.RegionAttachment(t);return t.region=i,t},t.prototype.newMeshAttachment=function(e,t,i){var n=this.atlas.findRegion(i);if(null==n)throw new Error("Region not found in atlas: "+i+" (mesh attachment: "+t+")");t=new s.MeshAttachment(t);return t.region=n,t},t.prototype.newBoundingBoxAttachment=function(e,t){return new s.BoundingBoxAttachment(t)},t.prototype.newPathAttachment=function(e,t){return new s.PathAttachment(t)},t.prototype.newPointAttachment=function(e,t){return new s.PointAttachment(t)},t.prototype.newClippingAttachment=function(e,t){return new s.ClippingAttachment(t)},s.AtlasAttachmentLoader=t}(pixi_spine=pixi_spine||{}),function(e){(e=(e=e.core||(e.core={})).BlendMode||(e.BlendMode={}))[e.Normal=0]="Normal",e[e.Additive=1]="Additive",e[e.Multiply=2]="Multiply",e[e.Screen=3]="Screen"}(pixi_spine=pixi_spine||{}),function(e){var C;function x(e,t,i){if(this.matrix=new PIXI.Matrix,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,this.active=!1,null==e)throw new Error("data cannot be null.");if(null==t)throw new Error("skeleton cannot be null.");this.data=e,this.skeleton=t,this.parent=i,this.setToSetupPose()}C=e.core||(e.core={}),Object.defineProperty(x.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!0,configurable:!0}),x.prototype.isActive=function(){return this.active},x.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},x.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},x.prototype.updateWorldTransformWith=function(e,t,i,n,s,r,o){this.ax=e,this.ay=t,this.arotation=i,this.ascaleX=n,this.ascaleY=s,this.ashearX=r,this.ashearY=o,this.appliedValid=!0;var a=this.parent,l=this.matrix,h=this.skeleton.scaleX,c=x.yDown?-this.skeleton.scaleY:this.skeleton.scaleY;if(null==a){var p=this.skeleton,u=i+90+o;return l.a=C.MathUtils.cosDeg(i+r)*n*h,l.c=C.MathUtils.cosDeg(u)*s*h,l.b=C.MathUtils.sinDeg(i+r)*n*c,l.d=C.MathUtils.sinDeg(u)*s*c,l.tx=e*h+p.x,void(l.ty=t*c+p.y)}var d=a.matrix.a,m=a.matrix.c,f=a.matrix.b,g=a.matrix.d;switch(l.tx=d*e+m*t+a.matrix.tx,l.ty=f*e+g*t+a.matrix.ty,this.data.transformMode){case C.TransformMode.Normal:var u=i+90+o,v=C.MathUtils.cosDeg(i+r)*n,y=C.MathUtils.cosDeg(u)*s,b=C.MathUtils.sinDeg(i+r)*n,S=C.MathUtils.sinDeg(u)*s;return l.a=d*v+m*b,l.c=d*y+m*S,l.b=f*v+g*b,void(l.d=f*y+g*S);case C.TransformMode.OnlyTranslation:u=i+90+o;l.a=C.MathUtils.cosDeg(i+r)*n,l.c=C.MathUtils.cosDeg(u)*s,l.b=C.MathUtils.sinDeg(i+r)*n,l.d=C.MathUtils.sinDeg(u)*s;break;case C.TransformMode.NoRotationOrReflection:var T=0,_=i+r-(T=1e-4<(I=d*d+f*f)?(m=f*(I=Math.abs(d*g-m*f)/I),g=d*I,Math.atan2(f,d)*C.MathUtils.radDeg):(f=d=0,90-Math.atan2(g,m)*C.MathUtils.radDeg)),A=i+o-T+90,v=C.MathUtils.cosDeg(_)*n,y=C.MathUtils.cosDeg(A)*s,b=C.MathUtils.sinDeg(_)*n,S=C.MathUtils.sinDeg(A)*s;l.a=d*v-m*b,l.c=d*y-m*S,l.b=f*v+g*b,l.d=f*y+g*S;break;case C.TransformMode.NoScale:case C.TransformMode.NoScaleOrReflection:var P=C.MathUtils.cosDeg(i),T=C.MathUtils.sinDeg(i),_=(d*P+m*T)/h,A=(f*P+g*T)/c;_*=I=1e-5<(I=Math.sqrt(_*_+A*A))?1/I:I,A*=I,I=Math.sqrt(_*_+A*A),this.data.transformMode==C.TransformMode.NoScale&&d*g-m*f<0!=(x.yDown?this.skeleton.scaleX<0!=0<this.skeleton.scaleY:this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(I=-I);var P=Math.PI/2+Math.atan2(A,_),T=Math.cos(P)*I,I=Math.sin(P)*I,v=C.MathUtils.cosDeg(r)*n,y=C.MathUtils.cosDeg(90+o)*s,b=C.MathUtils.sinDeg(r)*n,S=C.MathUtils.sinDeg(90+o)*s;l.a=_*v+T*b,l.c=_*y+T*S,l.b=A*v+I*b,l.d=A*y+I*S}l.a*=h,l.c*=h,l.b*=c,l.d*=c},x.prototype.setToSetupPose=function(){var e=this.data;this.x=e.x,this.y=e.y,this.rotation=e.rotation,this.scaleX=e.scaleX,this.scaleY=e.scaleY,this.shearX=e.shearX,this.shearY=e.shearY},x.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*C.MathUtils.radDeg},x.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*C.MathUtils.radDeg},x.prototype.getWorldScaleX=function(){var e=this.matrix;return Math.sqrt(e.a*e.a+e.c*e.c)},x.prototype.getWorldScaleY=function(){var e=this.matrix;return Math.sqrt(e.b*e.b+e.d*e.d)},x.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var e=this.parent,t=this.matrix;if(null==e)return this.ax=t.tx,this.ay=t.ty,this.arotation=Math.atan2(t.b,t.a)*C.MathUtils.radDeg,this.ascaleX=Math.sqrt(t.a*t.a+t.b*t.b),this.ascaleY=Math.sqrt(t.c*t.c+t.d*t.d),this.ashearX=0,void(this.ashearY=Math.atan2(t.a*t.c+t.b*t.d,t.a*t.d-t.b*t.c)*C.MathUtils.radDeg);var i=e.matrix,n=1/(i.a*i.d-i.b*i.c),s=t.tx-i.tx,r=t.ty-i.ty;this.ax=s*i.d*n-r*i.c*n,this.ay=r*i.a*n-s*i.b*n;e=n*i.d,r=n*i.a,s=n*i.c,n*=i.b,i=e*t.a-s*t.b,e=e*t.c-s*t.d,s=r*t.b-n*t.a,n=r*t.d-n*t.c;this.ashearX=0,this.ascaleX=Math.sqrt(i*i+s*s),1e-4<this.ascaleX?(this.ascaleY=(t=i*n-e*s)/this.ascaleX,this.ashearY=Math.atan2(i*e+s*n,t)*C.MathUtils.radDeg,this.arotation=Math.atan2(s,i)*C.MathUtils.radDeg):(this.ascaleX=0,this.ascaleY=Math.sqrt(e*e+n*n),this.ashearY=0,this.arotation=90-Math.atan2(n,e)*C.MathUtils.radDeg)},x.prototype.worldToLocal=function(e){var t=this.matrix,i=t.a,n=t.c,s=t.b,r=t.d,o=1/(i*r-n*s),a=e.x-t.tx,t=e.y-t.ty;return e.x=a*r*o-t*n*o,e.y=t*i*o-a*s*o,e},x.prototype.localToWorld=function(e){var t=this.matrix,i=e.x,n=e.y;return e.x=i*t.a+n*t.c+t.tx,e.y=i*t.b+n*t.d+t.ty,e},x.prototype.worldToLocalRotation=function(e){var t=C.MathUtils.sinDeg(e),i=C.MathUtils.cosDeg(e),e=this.matrix;return Math.atan2(e.a*t-e.b*i,e.d*i-e.c*t)*C.MathUtils.radDeg},x.prototype.localToWorldRotation=function(e){var t=C.MathUtils.sinDeg(e),i=C.MathUtils.cosDeg(e),e=this.matrix;return Math.atan2(i*e.b+t*e.d,i*e.a+t*e.c)*C.MathUtils.radDeg},x.prototype.rotateWorld=function(e){var t=this.matrix,i=t.a,n=t.c,s=t.b,r=t.d,o=C.MathUtils.cosDeg(e),e=C.MathUtils.sinDeg(e);t.a=o*i-e*s,t.c=o*n-e*r,t.b=e*i+o*s,t.d=e*n+o*r,this.appliedValid=!1},x.yDown=!1,C.Bone=x}(pixi_spine=pixi_spine||{}),function(e){var n,s;(n=e.core||(e.core={})).BoneData=function(e,t,i){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=s.Normal,this.skinRequired=!1,this.color=new n.Color,e<0)throw new Error("index must be >= 0.");if(null==t)throw new Error("name cannot be null.");this.index=e,this.name=t,this.parent=i},(e=s=n.TransformMode||(n.TransformMode={}))[e.Normal=0]="Normal",e[e.OnlyTranslation=1]="OnlyTranslation",e[e.NoRotationOrReflection=2]="NoRotationOrReflection",e[e.NoScale=3]="NoScale",e[e.NoScaleOrReflection=4]="NoScaleOrReflection"}(pixi_spine=pixi_spine||{}),function(e){(e.core||(e.core={})).ConstraintData=function(e,t,i){this.name=e,this.order=t,this.skinRequired=i}}(pixi_spine=pixi_spine||{}),function(e){(e.core||(e.core={})).Event=function(e,t){if(null==t)throw new Error("data cannot be null.");this.time=e,this.data=t}}(pixi_spine=pixi_spine||{}),function(e){(e.core||(e.core={})).EventData=function(e){this.name=e}}(pixi_spine=pixi_spine||{}),function(e){var K;function t(e,t){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==e)throw new Error("data cannot be null.");if(null==t)throw new Error("skeleton cannot be null.");this.data=e,this.mix=e.mix,this.softness=e.softness,this.bendDirection=e.bendDirection,this.compress=e.compress,this.stretch=e.stretch,this.bones=new Array;for(var i=0;i<e.bones.length;i++)this.bones.push(t.findBone(e.bones[i].name));this.target=t.findBone(e.target.name)}K=e.core||(e.core={}),t.prototype.isActive=function(){return this.active},t.prototype.apply=function(){this.update()},t.prototype.update=function(){var e=this.target,t=this.bones;switch(t.length){case 1:this.apply1(t[0],e.worldX,e.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(t[0],t[1],e.worldX,e.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}},t.prototype.apply1=function(e,t,i,n,s,r,o){e.appliedValid||e.updateAppliedTransform();var a=e.parent.matrix,l=1/(a.a*a.d-a.b*a.c),h=t-a.tx,c=i-a.ty,t=(h*a.d-c*a.c)*l-e.ax,i=(c*a.a-h*a.b)*l-e.ay,c=Math.atan2(i,t)*K.MathUtils.radDeg-e.ashearX-e.arotation;e.ascaleX<0&&(c+=180),180<c?c-=360:c<-180&&(c+=360);h=e.ascaleX,a=e.ascaleY;(n||s)&&(l=e.data.length*h,i=Math.sqrt(t*t+i*i),(n&&i<l||s&&l<i&&1e-4<l)&&(h*=l=(i/l-1)*o+1,r&&(a*=l))),e.updateWorldTransformWith(e.ax,e.ay,e.arotation+c*o,h,a,e.ashearX,e.ashearY)},t.prototype.apply2=function(e,t,i,n,s,r,o,a){if(0!=a){e.appliedValid||e.updateAppliedTransform(),t.appliedValid||t.updateAppliedTransform();var l=e.ax,h=e.ay,c=e.ascaleX,p=c,u=e.ascaleY,d=t.ascaleX,m=e.matrix,f=0,g=0,v=0,v=c<0?(c=-c,f=180,-1):(f=0,1);u<0&&(u=-u,v=-v);var g=d<0?(d=-d,180):0,y=t.ax,b=0,S=0,T=0,_=m.a,A=m.c,P=m.b,I=m.d,C=Math.abs(c-u)<=1e-4,T=C?(S=_*y+A*(b=t.ay)+m.tx,P*y+I*b+m.ty):(b=0,S=_*y+m.tx,P*y+m.ty),x=e.parent.matrix;_=x.a,A=x.c,P=x.b;var B,m=1/(_*(I=x.d)-A*P),E=S-x.tx,w=T-x.ty,S=(E*I-w*A)*m-l,T=(w*_-E*P)*m-h,R=Math.sqrt(S*S+T*T),M=t.data.length*d;if(R<1e-4)return this.apply1(e,i,n,!1,r,!1,a),void t.updateWorldTransformWith(y,b,0,t.ascaleX,t.ascaleY,t.ashearX,t.ashearY);var O=((E=i-x.tx)*I-(w=n-x.ty)*A)*m-l,N=(w*_-E*P)*m-h,F=O*O+N*N;0!=o&&(o*=c*(d+1)/2,0<(d=(z=Math.sqrt(F))-R-M*c+o)&&(F=(O-=(q=(d-o*(1-(q=Math.min(1,d/(2*o))-1)*q))/z)*O)*O+(N-=q*N)*N));e:if(C){var D=(F-R*R-(M*=c)*M)/(2*R*M);D<-1?D=-1:1<D&&(D=1,r&&(p*=(Math.sqrt(F)/(R+M)-1)*a+1)),B=Math.acos(D)*s,_=R+M*D,A=M*Math.sin(B),j=Math.atan2(N*_-O*A,O*_+N*A)}else{var L=(_=c*M)*_,k=(A=u*M)*A,G=Math.atan2(N,O),W=-2*k*R,U=k-L;if(0<=(I=W*W-4*U*(P=k*R*R+L*F-L*k))){var V=Math.sqrt(I),H=(V=-(W+(V=W<0?-V:V))/2)/U,$=P/V,X=Math.abs(H)<Math.abs($)?H:$;if(X*X<=F){w=Math.sqrt(F-X*X)*s,j=G-Math.atan2(w,X),B=Math.atan2(w/u,(X-R)/c);break e}}var Y=K.MathUtils.PI,D=R-_,W=D*D,U=0,V=0,H=R+_,$=H*H,X=0;-1<=(P=-_*R/(L-k))&&P<=1&&(P=Math.acos(P),(I=(E=_*Math.cos(P)+R)*E+(w=A*Math.sin(P))*w)<W&&(Y=P,W=I,D=E,U=w),$<I&&(V=P,$=I,H=E,X=w)),B=F<=(W+$)/2?(j=G-Math.atan2(U*s,D),Y*s):(j=G-Math.atan2(X*s,H),V*s)}var j,z=Math.atan2(b,y)*v,q=e.arotation;180<(j=(j-z)*K.MathUtils.radDeg+f-q)?j-=360:j<-180&&(j+=360),e.updateWorldTransformWith(l,h,q+j*a,p,e.ascaleY,0,0),q=t.arotation,180<(B=((B+z)*K.MathUtils.radDeg-t.ashearX)*v+g-q)?B-=360:B<-180&&(B+=360),t.updateWorldTransformWith(y,b,q+B*a,t.ascaleX,t.ascaleY,t.ashearX,t.ashearY)}else t.updateWorldTransform()},K.IkConstraint=t}(pixi_spine=pixi_spine||{}),function(e){var t;function i(e){e=t.call(this,e,0,!1)||this;return e.bones=new Array,e.bendDirection=1,e.compress=!1,e.stretch=!1,e.uniform=!1,e.mix=1,e.softness=0,e}e=e.core||(e.core={}),t=e.ConstraintData,__extends(i,t),e.IkConstraintData=i}(pixi_spine=pixi_spine||{}),function(e){var z;function q(e,t){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==e)throw new Error("data cannot be null.");if(null==t)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(var i=0,n=e.bones.length;i<n;i++)this.bones.push(t.findBone(e.bones[i].name));this.target=t.findSlot(e.target.name),this.position=e.position,this.spacing=e.spacing,this.rotateMix=e.rotateMix,this.translateMix=e.translateMix}z=e.core||(e.core={}),q.prototype.isActive=function(){return this.active},q.prototype.apply=function(){this.update()},q.prototype.update=function(){var e=this.target.getAttachment();if(e instanceof z.PathAttachment){var t=this.rotateMix,i=this.translateMix,n=0<t;if(0<i||n){var s=this.data,r=s.spacingMode,o=r==z.SpacingMode.Length,a=s.rotateMode,l=a==z.RotateMode.Tangent,h=a==z.RotateMode.ChainScale,c=this.bones.length,p=l?c:c+1,u=this.bones,d=z.Utils.setArraySize(this.spaces,p),m=null,f=this.spacing;if(h||o){h&&(m=z.Utils.setArraySize(this.lengths,c));for(var g=0,v=p-1;g<v;){var y,b=(C=u[g]).data.length;b<q.epsilon?(h&&(m[g]=0),d[++g]=0):(B=b*C.matrix.a,E=b*C.matrix.b,y=Math.sqrt(B*B+E*E),h&&(m[g]=y),d[++g]=(o?b+f:f)*y/b)}}else for(g=1;g<p;g++)d[g]=f;var S=this.computeWorldPositions(e,p,l,s.positionMode==z.PositionMode.Percent,r==z.SpacingMode.Percent),T=S[0],_=S[1],A=s.offsetRotation,P=!1;0==A?P=a==z.RotateMode.Chain:(P=!1,A*=0<(I=this.target.bone.matrix).a*I.d-I.b*I.c?z.MathUtils.degRad:-z.MathUtils.degRad);for(var g=0,I=3;g<c;g++,I+=3){var C,x=(C=u[g]).matrix;x.tx+=(T-x.tx)*i,x.ty+=(_-x.ty)*i;var B,E,w,R,M,O,N,F,D,L,k=(B=S[I])-T,G=(E=S[I+1])-_;!h||0!=(F=m[g])&&(D=(Math.sqrt(k*k+G*G)/F-1)*t+1,x.a*=D,x.b*=D),T=B,_=E,n&&(w=x.a,R=x.c,M=x.b,O=x.d,F=N=L=0,L=l?S[I-1]:0==d[g+1]?S[I+2]:Math.atan2(G,k),L-=Math.atan2(M,w),P?(N=Math.cos(L),F=Math.sin(L),T+=((D=C.data.length)*(N*w-F*M)-k)*t,_+=(D*(F*w+N*M)-G)*t):L+=A,L>z.MathUtils.PI?L-=z.MathUtils.PI2:L<-z.MathUtils.PI&&(L+=z.MathUtils.PI2),L*=t,N=Math.cos(L),F=Math.sin(L),x.a=N*w-F*M,x.c=N*R-F*O,x.b=F*w+N*M,x.d=F*R+N*O),C.appliedValid=!1}}}},q.prototype.computeWorldPositions=function(e,t,i,n,s){var r=this.target,o=this.position,a=this.spaces,l=z.Utils.setArraySize(this.positions,3*t+2),h=null,c=e.closed,p=e.worldVerticesLength,u=p/6,d=q.NONE;if(!e.constantSpeed){var m=e.lengths,f=m[u-=c?1:2];if(n&&(o*=f),s)for(var g=0;g<t;g++)a[g]*=f;for(var h=z.Utils.setArraySize(this.world,8),g=0,v=0,y=0;g<t;g++,v+=3){var b=o+=H=a[g];if(c)(b%=f)<0&&(b+=f),y=0;else{if(b<0){d!=q.BEFORE&&(d=q.BEFORE,e.computeWorldVertices(r,2,4,h,0,2)),this.addBeforePosition(b,h,0,l,v);continue}if(f<b){d!=q.AFTER&&(d=q.AFTER,e.computeWorldVertices(r,p-6,4,h,0,2)),this.addAfterPosition(b-f,h,0,l,v);continue}}for(;;y++){var S=m[y];if(!(S<b)){0==y?b/=S:b=(b-(Y=m[y-1]))/(S-Y);break}}y!=d&&(d=y,c&&y==u?(e.computeWorldVertices(r,p-4,4,h,0,2),e.computeWorldVertices(r,0,4,h,4,2)):e.computeWorldVertices(r,6*y+2,8,h,0,2)),this.addCurvePosition(b,h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],l,v,i||0<g&&0==H)}return l}c?(h=z.Utils.setArraySize(this.world,p+=2),e.computeWorldVertices(r,2,p-4,h,0,2),e.computeWorldVertices(r,0,2,h,p-4,2),h[p-2]=h[0],h[p-1]=h[1]):(u--,h=z.Utils.setArraySize(this.world,p-=4),e.computeWorldVertices(r,2,p,h,0,2));for(var T=z.Utils.setArraySize(this.curves,u),_=0,A=h[0],P=h[1],I=0,C=0,x=0,B=0,E=0,w=0,R=0,M=0,O=0,N=0,F=0,D=0,L=0,k=0,g=0,G=2;g<u;g++,G+=6)I=h[G],C=h[G+1],x=h[G+2],B=h[G+3],F=2*(R=.1875*(A-2*I+x))+(O=.09375*(3*(I-x)-A+(E=h[G+4]))),D=2*(M=.1875*(P-2*C+B))+(N=.09375*(3*(C-B)-P+(w=h[G+5]))),L=.75*(I-A)+R+.16666667*O,k=.75*(C-P)+M+.16666667*N,_+=Math.sqrt(L*L+k*k),L+=F,k+=D,F+=O,D+=N,_+=Math.sqrt(L*L+k*k),L+=F,k+=D,_+=Math.sqrt(L*L+k*k),L+=F+O,k+=D+N,_+=Math.sqrt(L*L+k*k),T[g]=_,A=E,P=w;if(n&&(o*=_),s)for(g=0;g<t;g++)a[g]*=_;for(var W=this.segments,U=0,g=0,v=0,y=0,V=0;g<t;g++,v+=3){var H,b=o+=H=a[g];if(c)(b%=_)<0&&(b+=_),y=0;else{if(b<0){this.addBeforePosition(b,h,0,l,v);continue}if(_<b){this.addAfterPosition(b-_,h,p-4,l,v);continue}}for(;;y++){var $=T[y];if(!($<b)){0==y?b/=$:b=(b-(Y=T[y-1]))/($-Y);break}}if(y!=d){var d=y,X=6*y,A=h[X],P=h[X+1],I=h[X+2],C=h[X+3],x=h[X+4],B=h[X+5],F=2*(R=.03*(A-2*I+x))+(O=.006*(3*(I-x)-A+(E=h[X+6]))),D=2*(M=.03*(P-2*C+B))+(N=.006*(3*(C-B)-P+(w=h[X+7]))),L=.3*(I-A)+R+.16666667*O,k=.3*(C-P)+M+.16666667*N,U=Math.sqrt(L*L+k*k);for(W[0]=U,X=1;X<8;X++)L+=F,k+=D,F+=O,D+=N,U+=Math.sqrt(L*L+k*k),W[X]=U;L+=F,k+=D,U+=Math.sqrt(L*L+k*k),W[8]=U,L+=F+O,k+=D+N,U+=Math.sqrt(L*L+k*k),W[9]=U,V=0}for(b*=U;;V++){var Y,j=W[V];if(!(j<b)){0==V?b/=j:b=V+(b-(Y=W[V-1]))/(j-Y);break}}this.addCurvePosition(.1*b,A,P,I,C,x,B,E,w,l,v,i||0<g&&0==H)}return l},q.prototype.addBeforePosition=function(e,t,i,n,s){var r=t[i],o=t[i+1],a=t[i+2]-r,i=t[i+3]-o,a=Math.atan2(i,a);n[s]=r+e*Math.cos(a),n[s+1]=o+e*Math.sin(a),n[s+2]=a},q.prototype.addAfterPosition=function(e,t,i,n,s){var r=t[i+2],o=t[i+3],a=r-t[i],i=o-t[i+1],a=Math.atan2(i,a);n[s]=r+e*Math.cos(a),n[s+1]=o+e*Math.sin(a),n[s+2]=a},q.prototype.addCurvePosition=function(e,t,i,n,s,r,o,a,l,h,c,p){var u=(e=0==e||isNaN(e)?1e-4:e)*e,d=u*e,m=1-e,f=m*m,g=f*m,v=m*e,y=3*v,m=m*y,e=y*e,a=t*g+n*m+r*e+a*d,d=i*g+s*m+o*e+l*d;h[c]=a,h[c+1]=d,p&&(h[c+2]=Math.atan2(d-(i*f+s*v*2+o*u),a-(t*f+n*v*2+r*u)))},q.NONE=-1,q.BEFORE=-2,q.AFTER=-3,q.epsilon=1e-5,z.PathConstraint=q}(pixi_spine=pixi_spine||{}),function(e){var t,i;function n(e){e=i.call(this,e,0,!1)||this;return e.bones=new Array,e}t=e.core||(e.core={}),i=t.ConstraintData,__extends(n,i),e=n,t.PathConstraintData=e,(e=t.PositionMode||(t.PositionMode={}))[e.Fixed=0]="Fixed",e[e.Percent=1]="Percent",(e=t.SpacingMode||(t.SpacingMode={}))[e.Length=0]="Length",e[e.Fixed=1]="Fixed",e[e.Percent=2]="Percent",(t=t.RotateMode||(t.RotateMode={}))[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale"}(pixi_spine=pixi_spine||{}),function(e){var y;function t(e){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(var t=0;t<e.bones.length;t++){var i,n=e.bones[t],s=void 0;null==n.parent?s=new y.Bone(n,this,null):(i=this.bones[n.parent.index],s=new y.Bone(n,this,i),i.children.push(s)),this.bones.push(s)}this.slots=new Array,this.drawOrder=new Array;for(t=0;t<e.slots.length;t++){var r=e.slots[t],s=this.bones[r.boneData.index],r=new y.Slot(r,s);this.slots.push(r),this.drawOrder.push(r)}this.ikConstraints=new Array;for(t=0;t<e.ikConstraints.length;t++){var o=e.ikConstraints[t];this.ikConstraints.push(new y.IkConstraint(o,this))}this.transformConstraints=new Array;for(t=0;t<e.transformConstraints.length;t++){var a=e.transformConstraints[t];this.transformConstraints.push(new y.TransformConstraint(a,this))}this.pathConstraints=new Array;for(t=0;t<e.pathConstraints.length;t++){var l=e.pathConstraints[t];this.pathConstraints.push(new y.PathConstraint(l,this))}this.color=new y.Color(1,1,1,1),this.updateCache()}y=e.core||(e.core={}),t.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var e=this.bones,t=0,i=e.length;t<i;t++)(s=e[t]).sorted=s.data.skinRequired,s.active=!s.sorted;if(null!=this.skin)for(var n=this.skin.bones,t=0,i=this.skin.bones.length;t<i;t++)for(var s=this.bones[n[t].index];s.sorted=!1,s.active=!0,null!=(s=s.parent););var r=this.ikConstraints,o=this.transformConstraints,a=this.pathConstraints,l=r.length,h=o.length,c=a.length,p=l+h+c;e:for(t=0;t<p;t++){for(var u=0;u<l;u++)if((d=r[u]).data.order==t){this.sortIkConstraint(d);continue e}for(u=0;u<h;u++)if((d=o[u]).data.order==t){this.sortTransformConstraint(d);continue e}for(var d,u=0;u<c;u++)if((d=a[u]).data.order==t){this.sortPathConstraint(d);continue e}}for(t=0,i=e.length;t<i;t++)this.sortBone(e[t])},t.prototype.sortIkConstraint=function(e){var t,i,n;e.active=e.target.isActive()&&(!e.data.skinRequired||null!=this.skin&&y.Utils.contains(this.skin.constraints,e.data,!0)),e.active&&(n=e.target,this.sortBone(n),i=(t=e.bones)[0],this.sortBone(i),1<t.length&&(n=t[t.length-1],-1<this._updateCache.indexOf(n)||this.updateCacheReset.push(n)),this._updateCache.push(e),this.sortReset(i.children),t[t.length-1].sorted=!0)},t.prototype.sortPathConstraint=function(e){if(e.active=e.target.bone.isActive()&&(!e.data.skinRequired||null!=this.skin&&y.Utils.contains(this.skin.constraints,e.data,!0)),e.active){var t=e.target,i=t.data.index,n=t.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,i,n),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,i,n);for(var s=0,r=this.data.skins.length;s<r;s++)this.sortPathConstraintAttachment(this.data.skins[s],i,n);t=t.getAttachment();t instanceof y.PathAttachment&&this.sortPathConstraintAttachmentWith(t,n);for(var o=e.bones,a=o.length,s=0;s<a;s++)this.sortBone(o[s]);this._updateCache.push(e);for(s=0;s<a;s++)this.sortReset(o[s].children);for(s=0;s<a;s++)o[s].sorted=!0}},t.prototype.sortTransformConstraint=function(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||null!=this.skin&&y.Utils.contains(this.skin.constraints,e.data,!0)),e.active){this.sortBone(e.target);var t=e.bones,i=t.length;if(e.data.local)for(var n=0;n<i;n++){var s=t[n];this.sortBone(s.parent),-1<this._updateCache.indexOf(s)||this.updateCacheReset.push(s)}else for(n=0;n<i;n++)this.sortBone(t[n]);this._updateCache.push(e);for(var r=0;r<i;r++)this.sortReset(t[r].children);for(r=0;r<i;r++)t[r].sorted=!0}},t.prototype.sortPathConstraintAttachment=function(e,t,i){var n=e.attachments[t];if(n)for(var s in n)this.sortPathConstraintAttachmentWith(n[s],i)},t.prototype.sortPathConstraintAttachmentWith=function(e,t){if(e instanceof y.PathAttachment){var i=e.bones;if(null==i)this.sortBone(t);else for(var n=this.bones,s=0;s<i.length;)for(var r=i[s++],o=s+r;s<o;s++){var a=i[s];this.sortBone(n[a])}}},t.prototype.sortBone=function(e){var t;e.sorted||(null!=(t=e.parent)&&this.sortBone(t),e.sorted=!0,this._updateCache.push(e))},t.prototype.sortReset=function(e){for(var t=0,i=e.length;t<i;t++){var n=e[t];n.active&&(n.sorted&&this.sortReset(n.children),n.sorted=!1)}},t.prototype.updateWorldTransform=function(){for(var e=this.updateCacheReset,t=0,i=e.length;t<i;t++){var n=e[t];n.ax=n.x,n.ay=n.y,n.arotation=n.rotation,n.ascaleX=n.scaleX,n.ascaleY=n.scaleY,n.ashearX=n.shearX,n.ashearY=n.shearY,n.appliedValid=!0}for(var s=this._updateCache,t=0,i=s.length;t<i;t++)s[t].update()},t.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},t.prototype.setBonesToSetupPose=function(){for(var e=this.bones,t=0,i=e.length;t<i;t++)e[t].setToSetupPose();for(var n=this.ikConstraints,t=0,i=n.length;t<i;t++)(a=n[t]).mix=a.data.mix,a.softness=a.data.softness,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch;for(var s=this.transformConstraints,t=0,i=s.length;t<i;t++){var r=(a=s[t]).data;a.rotateMix=r.rotateMix,a.translateMix=r.translateMix,a.scaleMix=r.scaleMix,a.shearMix=r.shearMix}for(var o=this.pathConstraints,t=0,i=o.length;t<i;t++){var a,r=(a=o[t]).data;a.position=r.position,a.spacing=r.spacing,a.rotateMix=r.rotateMix,a.translateMix=r.translateMix}},t.prototype.setSlotsToSetupPose=function(){var e=this.slots;y.Utils.arrayCopy(e,0,this.drawOrder,0,e.length);for(var t=0,i=e.length;t<i;t++)e[t].setToSetupPose()},t.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},t.prototype.findBone=function(e){if(null==e)throw new Error("boneName cannot be null.");for(var t=this.bones,i=0,n=t.length;i<n;i++){var s=t[i];if(s.data.name==e)return s}return null},t.prototype.findBoneIndex=function(e){if(null==e)throw new Error("boneName cannot be null.");for(var t=this.bones,i=0,n=t.length;i<n;i++)if(t[i].data.name==e)return i;return-1},t.prototype.findSlot=function(e){if(null==e)throw new Error("slotName cannot be null.");for(var t=this.slots,i=0,n=t.length;i<n;i++){var s=t[i];if(s.data.name==e)return s}return null},t.prototype.findSlotIndex=function(e){if(null==e)throw new Error("slotName cannot be null.");for(var t=this.slots,i=0,n=t.length;i<n;i++)if(t[i].data.name==e)return i;return-1},t.prototype.setSkinByName=function(e){var t=this.data.findSkin(e);if(null==t)throw new Error("Skin not found: "+e);this.setSkin(t)},t.prototype.setSkin=function(e){if(e!=this.skin){if(null!=e)if(null!=this.skin)e.attachAll(this,this.skin);else for(var t=this.slots,i=0,n=t.length;i<n;i++){var s=t[i],r=s.data.attachmentName;null==r||null!=(r=e.getAttachment(i,r))&&s.setAttachment(r)}this.skin=e,this.updateCache()}},t.prototype.getAttachmentByName=function(e,t){return this.getAttachment(this.data.findSlotIndex(e),t)},t.prototype.getAttachment=function(e,t){if(null==t)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var i=this.skin.getAttachment(e,t);if(null!=i)return i}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(e,t):null},t.prototype.setAttachment=function(e,t){if(null==e)throw new Error("slotName cannot be null.");for(var i=this.slots,n=0,s=i.length;n<s;n++){var r=i[n];if(r.data.name==e){var o=null;if(null!=t&&null==(o=this.getAttachment(n,t)))throw new Error("Attachment not found: "+t+", for slot: "+e);return void r.setAttachment(o)}}throw new Error("Slot not found: "+e)},t.prototype.findIkConstraint=function(e){if(null==e)throw new Error("constraintName cannot be null.");for(var t=this.ikConstraints,i=0,n=t.length;i<n;i++){var s=t[i];if(s.data.name==e)return s}return null},t.prototype.findTransformConstraint=function(e){if(null==e)throw new Error("constraintName cannot be null.");for(var t=this.transformConstraints,i=0,n=t.length;i<n;i++){var s=t[i];if(s.data.name==e)return s}return null},t.prototype.findPathConstraint=function(e){if(null==e)throw new Error("constraintName cannot be null.");for(var t=this.pathConstraints,i=0,n=t.length;i<n;i++){var s=t[i];if(s.data.name==e)return s}return null},t.prototype.getBounds=function(e,t,i){if(void 0===i&&(i=new Array(2)),null==e)throw new Error("offset cannot be null.");if(null==t)throw new Error("size cannot be null.");for(var n=this.drawOrder,s=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=0,h=n.length;l<h;l++){var c=n[l];if(c.bone.active){var p=0,u=null,d=c.getAttachment();if(d instanceof y.RegionAttachment?(u=y.Utils.setArraySize(i,p=8,0),d.computeWorldVertices(c.bone,u,0,2)):d instanceof y.MeshAttachment&&(p=(d=d).worldVerticesLength,u=y.Utils.setArraySize(i,p,0),d.computeWorldVertices(c,0,p,u,0,2)),null!=u)for(var m=0,f=u.length;m<f;m+=2)var g=u[m],v=u[m+1],s=Math.min(s,g),r=Math.min(r,v),o=Math.max(o,g),a=Math.max(a,v)}}e.set(s,r),t.set(o-s,a-r)},t.prototype.update=function(e){this.time+=e},Object.defineProperty(t.prototype,"flipX",{get:function(){return-1==this.scaleX},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=e?1:-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"flipY",{get:function(){return-1==this.scaleY},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=e?1:-1},enumerable:!0,configurable:!0}),t.deprecatedWarning1=!1,y.Skeleton=t}(pixi_spine=pixi_spine||{}),function(e){!function($){var e=(X.prototype.readSkeletonData=function(e){var t=this.scale,i=new $.SkeletonData;i.name="";var n=new g(e);i.hash=n.readString(),i.version=n.readString(),i.x=n.readFloat(),i.y=n.readFloat(),i.width=n.readFloat(),i.height=n.readFloat();var s=n.readBoolean();s&&(i.fps=n.readFloat(),i.imagesPath=n.readString(),i.audioPath=n.readString());for(var r=0,r=n.readInt(!0),o=0;o<r;o++)n.strings.push(n.readString());r=n.readInt(!0);for(o=0;o<r;o++){var a=n.readString(),l=0==o?null:i.bones[n.readInt(!0)];(p=new $.BoneData(o,a,l)).rotation=n.readFloat(),p.x=n.readFloat()*t,p.y=n.readFloat()*t,p.scaleX=n.readFloat(),p.scaleY=n.readFloat(),p.shearX=n.readFloat(),p.shearY=n.readFloat(),p.length=n.readFloat()*t,p.transformMode=X.TransformModeValues[n.readInt(!0)],p.skinRequired=n.readBoolean(),s&&$.Color.rgba8888ToColor(p.color,n.readInt32()),i.bones.push(p)}r=n.readInt(!0);for(o=0;o<r;o++){var h=n.readString(),c=i.bones[n.readInt(!0)],p=new $.SlotData(o,h,c);$.Color.rgba8888ToColor(p.color,n.readInt32());c=n.readInt32();-1!=c&&$.Color.rgb888ToColor(p.darkColor=new $.Color,c),p.attachmentName=n.readStringRef(),p.blendMode=X.BlendModeValues[n.readInt(!0)],i.slots.push(p)}r=n.readInt(!0);for(var o=0,u=void 0;o<r;o++){(p=new $.IkConstraintData(n.readString())).order=n.readInt(!0),p.skinRequired=n.readBoolean(),u=n.readInt(!0);for(var d=0;d<u;d++)p.bones.push(i.bones[n.readInt(!0)]);p.target=i.bones[n.readInt(!0)],p.mix=n.readFloat(),p.softness=n.readFloat()*t,p.bendDirection=n.readByte(),p.compress=n.readBoolean(),p.stretch=n.readBoolean(),p.uniform=n.readBoolean(),i.ikConstraints.push(p)}r=n.readInt(!0);for(o=0,u=void 0;o<r;o++){(p=new $.TransformConstraintData(n.readString())).order=n.readInt(!0),p.skinRequired=n.readBoolean(),u=n.readInt(!0);for(d=0;d<u;d++)p.bones.push(i.bones[n.readInt(!0)]);p.target=i.bones[n.readInt(!0)],p.local=n.readBoolean(),p.relative=n.readBoolean(),p.offsetRotation=n.readFloat(),p.offsetX=n.readFloat()*t,p.offsetY=n.readFloat()*t,p.offsetScaleX=n.readFloat(),p.offsetScaleY=n.readFloat(),p.offsetShearY=n.readFloat(),p.rotateMix=n.readFloat(),p.translateMix=n.readFloat(),p.scaleMix=n.readFloat(),p.shearMix=n.readFloat(),i.transformConstraints.push(p)}r=n.readInt(!0);for(o=0,u=void 0;o<r;o++){(p=new $.PathConstraintData(n.readString())).order=n.readInt(!0),p.skinRequired=n.readBoolean(),u=n.readInt(!0);for(d=0;d<u;d++)p.bones.push(i.bones[n.readInt(!0)]);p.target=i.slots[n.readInt(!0)],p.positionMode=X.PositionModeValues[n.readInt(!0)],p.spacingMode=X.SpacingModeValues[n.readInt(!0)],p.rotateMode=X.RotateModeValues[n.readInt(!0)],p.offsetRotation=n.readFloat(),p.position=n.readFloat(),p.positionMode==$.PositionMode.Fixed&&(p.position*=t),p.spacing=n.readFloat(),p.spacingMode!=$.SpacingMode.Length&&p.spacingMode!=$.SpacingMode.Fixed||(p.spacing*=t),p.rotateMix=n.readFloat(),p.translateMix=n.readFloat(),i.pathConstraints.push(p)}e=this.readSkin(n,i,!0,s);null!=e&&(i.defaultSkin=e,i.skins.push(e));o=i.skins.length;for($.Utils.setArraySize(i.skins,r=o+n.readInt(!0));o<r;o++)i.skins[o]=this.readSkin(n,i,!1,s);r=this.linkedMeshes.length;for(o=0;o<r;o++){var m=this.linkedMeshes[o],f=null==m.skin?i.defaultSkin:i.findSkin(m.skin);if(null==f)throw new Error("Skin not found: "+m.skin);f=f.getAttachment(m.slotIndex,m.parent);if(null==f)throw new Error("Parent mesh not found: "+m.parent);m.mesh.deformAttachment=m.inheritDeform?f:m.mesh,m.mesh.setParentMesh(f)}this.linkedMeshes.length=0,r=n.readInt(!0);for(o=0;o<r;o++)(p=new $.EventData(n.readStringRef())).intValue=n.readInt(!1),p.floatValue=n.readFloat(),p.stringValue=n.readString(),p.audioPath=n.readString(),null!=p.audioPath&&(p.volume=n.readFloat(),p.balance=n.readFloat()),i.events.push(p);r=n.readInt(!0);for(o=0;o<r;o++)i.animations.push(this.readAnimation(n,n.readString(),i));return i},X.prototype.readSkin=function(e,t,i,n){var s=null,r=0;if(i){if(0==(r=e.readInt(!0)))return null;s=new $.Skin("default")}else{(s=new $.Skin(e.readStringRef())).bones.length=e.readInt(!0);for(var o=0,a=s.bones.length;o<a;o++)s.bones[o]=t.bones[e.readInt(!0)];for(o=0,a=e.readInt(!0);o<a;o++)s.constraints.push(t.ikConstraints[e.readInt(!0)]);for(o=0,a=e.readInt(!0);o<a;o++)s.constraints.push(t.transformConstraints[e.readInt(!0)]);for(o=0,a=e.readInt(!0);o<a;o++)s.constraints.push(t.pathConstraints[e.readInt(!0)]);r=e.readInt(!0)}for(o=0;o<r;o++)for(var l=e.readInt(!0),h=0,c=e.readInt(!0);h<c;h++){var p=e.readStringRef(),u=this.readAttachment(e,t,s,l,p,n);null!=u&&s.setAttachment(l,p,u)}return s},X.prototype.readAttachment=function(e,t,i,n,s,r){var o=this.scale,a=e.readStringRef();null==a&&(a=s);s=e.readByte();switch(X.AttachmentTypeValues[s]){case $.AttachmentType.Region:var l=e.readStringRef(),h=e.readFloat(),c=e.readFloat(),p=e.readFloat(),u=e.readFloat(),d=e.readFloat(),m=e.readFloat(),f=e.readFloat(),g=e.readInt32();null==l&&(l=a);var v=this.attachmentLoader.newRegionAttachment(i,a,l);return null==v?null:(v.path=l,v.x=c*o,v.y=p*o,v.scaleX=u,v.scaleY=d,v.rotation=h,v.width=m*o,v.height=f*o,$.Color.rgba8888ToColor(v.color,g),v);case $.AttachmentType.BoundingBox:var y=e.readInt(!0),b=this.readVertices(e,y),g=r?e.readInt32():0,S=this.attachmentLoader.newBoundingBoxAttachment(i,a);return null==S?null:(S.worldVerticesLength=y<<1,S.vertices=b.vertices,S.bones=b.bones,r&&$.Color.rgba8888ToColor(S.color,g),S);case $.AttachmentType.Mesh:var l=e.readStringRef(),g=e.readInt32(),y=e.readInt(!0),v=this.readFloatArray(e,y<<1,1),S=this.readShortArray(e),b=this.readVertices(e,y),T=e.readInt(!0),_=null,m=0,f=0;return r&&(_=this.readShortArray(e),m=e.readFloat(),f=e.readFloat()),null==l&&(l=a),null==(P=this.attachmentLoader.newMeshAttachment(i,a,l))?null:(P.path=l,$.Color.rgba8888ToColor(P.color,g),P.bones=b.bones,P.vertices=b.vertices,P.worldVerticesLength=y<<1,P.triangles=S,P.regionUVs=new Float32Array(v),P.hullLength=T<<1,r&&(P.edges=_,P.width=m*o,P.height=f*o),P);case $.AttachmentType.LinkedMesh:var l=e.readStringRef(),g=e.readInt32(),T=e.readStringRef(),_=e.readStringRef(),A=e.readBoolean(),m=0,f=0;return r&&(m=e.readFloat(),f=e.readFloat()),null==l&&(l=a),null==(P=this.attachmentLoader.newMeshAttachment(i,a,l))?null:(P.path=l,$.Color.rgba8888ToColor(P.color,g),r&&(P.width=m*o,P.height=f*o),this.linkedMeshes.push(new E(P,T,n,_,A)),P);case $.AttachmentType.Path:for(var A=e.readBoolean(),P=e.readBoolean(),y=e.readInt(!0),b=this.readVertices(e,y),I=$.Utils.newArray(y/3,0),C=0,x=I.length;C<x;C++)I[C]=e.readFloat()*o;g=r?e.readInt32():0;return null==(l=this.attachmentLoader.newPathAttachment(i,a))?null:(l.closed=A,l.constantSpeed=P,l.worldVerticesLength=y<<1,l.vertices=b.vertices,l.bones=b.bones,l.lengths=I,r&&$.Color.rgba8888ToColor(l.color,g),l);case $.AttachmentType.Point:var h=e.readFloat(),c=e.readFloat(),p=e.readFloat(),g=r?e.readInt32():0,B=this.attachmentLoader.newPointAttachment(i,a);return null==B?null:(B.x=c*o,B.y=p*o,B.rotation=h,r&&$.Color.rgba8888ToColor(B.color,g),B);case $.AttachmentType.Clipping:h=e.readInt(!0),y=e.readInt(!0),b=this.readVertices(e,y),g=r?e.readInt32():0,B=this.attachmentLoader.newClippingAttachment(i,a);return null==B?null:(B.endSlot=t.slots[h],B.worldVerticesLength=y<<1,B.vertices=b.vertices,B.bones=b.bones,r&&$.Color.rgba8888ToColor(B.color,g),B)}return null},X.prototype.readVertices=function(e,t){var i=t<<1,n=new c,s=this.scale;if(!e.readBoolean())return n.vertices=this.readFloatArray(e,i,s),n;for(var r=new Array,o=new Array,a=0;a<t;a++){var l=e.readInt(!0);o.push(l);for(var h=0;h<l;h++)o.push(e.readInt(!0)),r.push(e.readFloat()*s),r.push(e.readFloat()*s),r.push(e.readFloat())}return n.vertices=$.Utils.toFloatArray(r),n.bones=o,n},X.prototype.readFloatArray=function(e,t,i){var n=new Array(t);if(1==i)for(var s=0;s<t;s++)n[s]=e.readFloat();else for(s=0;s<t;s++)n[s]=e.readFloat()*i;return n},X.prototype.readShortArray=function(e){for(var t=e.readInt(!0),i=new Array(t),n=0;n<t;n++)i[n]=e.readShort();return i},X.prototype.readAnimation=function(e,t,i){for(var n=new Array,s=this.scale,r=0,o=new $.Color,a=new $.Color,l=0,h=e.readInt(!0);l<h;l++)for(var c=e.readInt(!0),p=0,u=e.readInt(!0);p<u;p++){var d=e.readByte(),m=e.readInt(!0);switch(d){case X.SLOT_ATTACHMENT:(y=new $.AttachmentTimeline(m)).slotIndex=c;for(var f=0;f<m;f++)y.setFrame(f,e.readFloat(),e.readStringRef());n.push(y),r=Math.max(r,y.frames[m-1]);break;case X.SLOT_COLOR:(y=new $.ColorTimeline(m)).slotIndex=c;for(f=0;f<m;f++){var g=e.readFloat();$.Color.rgba8888ToColor(o,e.readInt32()),y.setFrame(f,g,o.r,o.g,o.b,o.a),f<m-1&&this.readCurve(e,f,y)}n.push(y),r=Math.max(r,y.frames[(m-1)*$.ColorTimeline.ENTRIES]);break;case X.SLOT_TWO_COLOR:(y=new $.TwoColorTimeline(m)).slotIndex=c;for(f=0;f<m;f++){g=e.readFloat();$.Color.rgba8888ToColor(o,e.readInt32()),$.Color.rgb888ToColor(a,e.readInt32()),y.setFrame(f,g,o.r,o.g,o.b,o.a,a.r,a.g,a.b),f<m-1&&this.readCurve(e,f,y)}n.push(y),r=Math.max(r,y.frames[(m-1)*$.TwoColorTimeline.ENTRIES])}}for(l=0,h=e.readInt(!0);l<h;l++)for(var v=e.readInt(!0),p=0,u=e.readInt(!0);p<u;p++){d=e.readByte(),m=e.readInt(!0);switch(d){case X.BONE_ROTATE:(y=new $.RotateTimeline(m)).boneIndex=v;for(f=0;f<m;f++)y.setFrame(f,e.readFloat(),e.readFloat()),f<m-1&&this.readCurve(e,f,y);n.push(y),r=Math.max(r,y.frames[(m-1)*$.RotateTimeline.ENTRIES]);break;case X.BONE_TRANSLATE:case X.BONE_SCALE:case X.BONE_SHEAR:var y=void 0,b=1;d==X.BONE_SCALE?y=new $.ScaleTimeline(m):d==X.BONE_SHEAR?y=new $.ShearTimeline(m):(y=new $.TranslateTimeline(m),b=s),y.boneIndex=v;for(f=0;f<m;f++)y.setFrame(f,e.readFloat(),e.readFloat()*b,e.readFloat()*b),f<m-1&&this.readCurve(e,f,y);n.push(y),r=Math.max(r,y.frames[(m-1)*$.TranslateTimeline.ENTRIES])}}for(l=0,h=e.readInt(!0);l<h;l++){var S=e.readInt(!0),m=e.readInt(!0);(y=new $.IkConstraintTimeline(m)).ikConstraintIndex=S;for(f=0;f<m;f++)y.setFrame(f,e.readFloat(),e.readFloat(),e.readFloat()*s,e.readByte(),e.readBoolean(),e.readBoolean()),f<m-1&&this.readCurve(e,f,y);n.push(y),r=Math.max(r,y.frames[(m-1)*$.IkConstraintTimeline.ENTRIES])}for(l=0,h=e.readInt(!0);l<h;l++){S=e.readInt(!0),m=e.readInt(!0);(y=new $.TransformConstraintTimeline(m)).transformConstraintIndex=S;for(f=0;f<m;f++)y.setFrame(f,e.readFloat(),e.readFloat(),e.readFloat(),e.readFloat(),e.readFloat()),f<m-1&&this.readCurve(e,f,y);n.push(y),r=Math.max(r,y.frames[(m-1)*$.TransformConstraintTimeline.ENTRIES])}for(l=0,h=e.readInt(!0);l<h;l++)for(var S=e.readInt(!0),T=i.pathConstraints[S],p=0,u=e.readInt(!0);p<u;p++){d=e.readByte(),m=e.readInt(!0);switch(d){case X.PATH_POSITION:case X.PATH_SPACING:var y=void 0,b=1;d==X.PATH_SPACING?(y=new $.PathConstraintSpacingTimeline(m),T.spacingMode!=$.SpacingMode.Length&&T.spacingMode!=$.SpacingMode.Fixed||(b=s)):(y=new $.PathConstraintPositionTimeline(m),T.positionMode==$.PositionMode.Fixed&&(b=s)),y.pathConstraintIndex=S;for(f=0;f<m;f++)y.setFrame(f,e.readFloat(),e.readFloat()*b),f<m-1&&this.readCurve(e,f,y);n.push(y),r=Math.max(r,y.frames[(m-1)*$.PathConstraintPositionTimeline.ENTRIES]);break;case X.PATH_MIX:(y=new $.PathConstraintMixTimeline(m)).pathConstraintIndex=S;for(f=0;f<m;f++)y.setFrame(f,e.readFloat(),e.readFloat(),e.readFloat()),f<m-1&&this.readCurve(e,f,y);n.push(y),r=Math.max(r,y.frames[(m-1)*$.PathConstraintMixTimeline.ENTRIES])}}for(l=0,h=e.readInt(!0);l<h;l++)for(var _=i.skins[e.readInt(!0)],p=0,u=e.readInt(!0);p<u;p++)for(var c=e.readInt(!0),A=0,P=e.readInt(!0);A<P;A++){var I=_.getAttachment(c,e.readStringRef()),C=null!=I.bones,x=I.vertices,B=C?x.length/3*2:x.length,m=e.readInt(!0);(y=new $.DeformTimeline(m)).slotIndex=c,y.attachment=I;for(f=0;f<m;f++){var g=e.readFloat(),E=void 0,w=e.readInt(!0);if(0==w)E=C?$.Utils.newFloatArray(B):x;else{var E=$.Utils.newFloatArray(B),R=e.readInt(!0);if(w+=R,1==s)for(var M=R;M<w;M++)E[M]=e.readFloat();else for(M=R;M<w;M++)E[M]=e.readFloat()*s;if(!C)for(var M=0,O=E.length;M<O;M++)E[M]+=x[M]}y.setFrame(f,g,E),f<m-1&&this.readCurve(e,f,y)}n.push(y),r=Math.max(r,y.frames[m-1])}var N=e.readInt(!0);if(0<N){for(var y=new $.DrawOrderTimeline(N),F=i.slots.length,l=0;l<N;l++){for(var g=e.readFloat(),D=e.readInt(!0),L=$.Utils.newArray(F,0),p=F-1;0<=p;p--)L[p]=-1;for(var k=$.Utils.newArray(F-D,0),G=0,W=0,p=0;p<D;p++){for(c=e.readInt(!0);G!=c;)k[W++]=G++;L[G+e.readInt(!0)]=G++}for(;G<F;)k[W++]=G++;for(p=F-1;0<=p;p--)-1==L[p]&&(L[p]=k[--W]);y.setFrame(l,g,L)}n.push(y),r=Math.max(r,y.frames[N-1])}var U=e.readInt(!0);if(0<U){for(y=new $.EventTimeline(U),l=0;l<U;l++){var g=e.readFloat(),V=i.events[e.readInt(!0)],H=new $.Event(g,V);H.intValue=e.readInt(!1),H.floatValue=e.readFloat(),H.stringValue=e.readBoolean()?e.readString():V.stringValue,null!=H.data.audioPath&&(H.volume=e.readFloat(),H.balance=e.readFloat()),y.setFrame(l,H)}n.push(y),r=Math.max(r,y.frames[U-1])}return new $.Animation(t,n,r)},X.prototype.readCurve=function(e,t,i){switch(e.readByte()){case X.CURVE_STEPPED:i.setStepped(t);break;case X.CURVE_BEZIER:this.setCurve(i,t,e.readFloat(),e.readFloat(),e.readFloat(),e.readFloat())}},X.prototype.setCurve=function(e,t,i,n,s,r){e.setCurve(t,i,n,s,r)},X.AttachmentTypeValues=[0,1,2,3,4,5,6],X.TransformModeValues=[$.TransformMode.Normal,$.TransformMode.OnlyTranslation,$.TransformMode.NoRotationOrReflection,$.TransformMode.NoScale,$.TransformMode.NoScaleOrReflection],X.PositionModeValues=[$.PositionMode.Fixed,$.PositionMode.Percent],X.SpacingModeValues=[$.SpacingMode.Length,$.SpacingMode.Fixed,$.SpacingMode.Percent],X.RotateModeValues=[$.RotateMode.Tangent,$.RotateMode.Chain,$.RotateMode.ChainScale],X.BlendModeValues=[$.BlendMode.Normal,$.BlendMode.Additive,$.BlendMode.Multiply,$.BlendMode.Screen],X.BONE_ROTATE=0,X.BONE_TRANSLATE=1,X.BONE_SCALE=2,X.BONE_SHEAR=3,X.SLOT_ATTACHMENT=0,X.SLOT_COLOR=1,X.SLOT_TWO_COLOR=2,X.PATH_POSITION=0,X.PATH_SPACING=1,X.PATH_MIX=2,X.CURVE_LINEAR=0,X.CURVE_STEPPED=1,X.CURVE_BEZIER=2,X);function X(e){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=e}$.SkeletonBinary=e;var g=(t.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},t.prototype.readShort=function(){var e=this.buffer.getInt16(this.index);return this.index+=2,e},t.prototype.readInt32=function(){var e=this.buffer.getInt32(this.index);return this.index+=4,e},t.prototype.readInt=function(e){var t=this.readByte(),i=127&t;return 0!=(128&t)&&(i|=(127&(t=this.readByte()))<<7,0!=(128&t)&&(i|=(127&(t=this.readByte()))<<14,0!=(128&t)&&(i|=(127&(t=this.readByte()))<<21,0!=(128&t)&&(i|=(127&this.readByte())<<28)))),e?i:i>>>1^-(1&i)},t.prototype.readStringRef=function(){var e=this.readInt(!0);return 0==e?null:this.strings[e-1]},t.prototype.readString=function(){var e=this.readInt(!0);switch(e){case 0:return null;case 1:return""}e--;for(var t="",i=0;i<e;){var n=this.readByte();switch(n>>4){case 12:case 13:t+=String.fromCharCode((31&n)<<6|63&this.readByte()),i+=2;break;case 14:t+=String.fromCharCode((15&n)<<12|(63&this.readByte())<<6|63&this.readByte()),i+=3;break;default:t+=String.fromCharCode(n),i++}}return t},t.prototype.readFloat=function(){var e=this.buffer.getFloat32(this.index);return this.index+=4,e},t.prototype.readBoolean=function(){return 0!=this.readByte()},t);function t(e,t,i,n){void 0===t&&(t=new Array),void 0===i&&(i=0),void 0===n&&(n=new DataView(e.buffer)),this.strings=t,this.index=i,this.buffer=n}var E=function(e,t,i,n,s){this.mesh=e,this.skin=t,this.slotIndex=i,this.parent=n,this.inheritDeform=s},c=function(e,t){void 0===t&&(t=null),this.bones=e=void 0===e?null:e,this.vertices=t}}(e.core||(e.core={}))}(pixi_spine=pixi_spine||{}),function(e){var p;function t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new p.Pool(function(){return p.Utils.newFloatArray(16)})}p=e.core||(e.core={}),t.prototype.update=function(e,t){if(null==e)throw new Error("skeleton cannot be null.");var i=this.boundingBoxes,n=this.polygons,s=this.polygonPool,r=e.slots,o=r.length;i.length=0,s.freeAll(n);for(var a=n.length=0;a<o;a++){var l,h,c=r[a];c.bone.active&&((h=c.getAttachment())instanceof p.BoundingBoxAttachment&&(i.push(l=h),(h=s.obtain()).length!=l.worldVerticesLength&&(h=p.Utils.newFloatArray(l.worldVerticesLength)),n.push(h),l.computeWorldVertices(c,0,l.worldVerticesLength,h,0,2)))}t?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},t.prototype.aabbCompute=function(){for(var e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,s=this.polygons,r=0,o=s.length;r<o;r++)for(var a=s[r],l=a,h=0,c=a.length;h<c;h+=2)var p=l[h],u=l[h+1],e=Math.min(e,p),t=Math.min(t,u),i=Math.max(i,p),n=Math.max(n,u);this.minX=e,this.minY=t,this.maxX=i,this.maxY=n},t.prototype.aabbContainsPoint=function(e,t){return e>=this.minX&&e<=this.maxX&&t>=this.minY&&t<=this.maxY},t.prototype.aabbIntersectsSegment=function(e,t,i,n){var s=this.minX,r=this.minY,o=this.maxX,a=this.maxY;if(e<=s&&i<=s||t<=r&&n<=r||o<=e&&o<=i||a<=t&&a<=n)return!1;n=(n-t)/(i-e),i=n*(s-e)+t;if(r<i&&i<a)return!0;if(r<(i=n*(o-e)+t)&&i<a)return!0;r=(r-t)/n+e;return s<r&&r<o||s<(r=(a-t)/n+e)&&r<o},t.prototype.aabbIntersectsSkeleton=function(e){return this.minX<e.maxX&&this.maxX>e.minX&&this.minY<e.maxY&&this.maxY>e.minY},t.prototype.containsPoint=function(e,t){for(var i=this.polygons,n=0,s=i.length;n<s;n++)if(this.containsPointPolygon(i[n],e,t))return this.boundingBoxes[n];return null},t.prototype.containsPointPolygon=function(e,t,i){for(var n=e,s=e.length,r=s-2,o=!1,a=0;a<s;a+=2){var l,h=n[a+1],c=n[r+1];!(h<i&&i<=c||c<i&&i<=h)||(l=n[a])+(i-h)/(c-h)*(n[r]-l)<t&&(o=!o),r=a}return o},t.prototype.intersectsSegment=function(e,t,i,n){for(var s=this.polygons,r=0,o=s.length;r<o;r++)if(this.intersectsSegmentPolygon(s[r],e,t,i,n))return this.boundingBoxes[r];return null},t.prototype.intersectsSegmentPolygon=function(e,t,i,n,s){for(var r=e,o=e.length,a=t-n,l=i-s,h=t*s-i*n,c=r[o-2],p=r[o-1],u=0;u<o;u+=2){var d=r[u],m=r[u+1],f=c*m-p*d,g=c-d,v=p-m,y=a*v-l*g,g=(h*g-a*f)/y;if((c<=g&&g<=d||d<=g&&g<=c)&&(t<=g&&g<=n||n<=g&&g<=t)){y=(h*v-l*f)/y;if((p<=y&&y<=m||m<=y&&y<=p)&&(i<=y&&y<=s||s<=y&&y<=i))return!0}c=d,p=m}return!1},t.prototype.getPolygon=function(e){if(null==e)throw new Error("boundingBox cannot be null.");e=this.boundingBoxes.indexOf(e);return-1==e?null:this.polygons[e]},t.prototype.getWidth=function(){return this.maxX-this.minX},t.prototype.getHeight=function(){return this.maxY-this.minY},p.SkeletonBounds=t}(pixi_spine=pixi_spine||{}),function(e){var X;function l(){this.triangulator=new X.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}X=e.core||(e.core={}),l.prototype.clipStart=function(e,t){if(null!=this.clipAttachment)return 0;var i=(this.clipAttachment=t).worldVerticesLength,n=X.Utils.setArraySize(this.clippingPolygon,i);t.computeWorldVertices(e,0,i,n,0,2);n=this.clippingPolygon;l.makeClockwise(n);for(var s=this.clippingPolygons=this.triangulator.decompose(n,this.triangulator.triangulate(n)),r=0,o=s.length;r<o;r++){var a=s[r];l.makeClockwise(a),a.push(a[0]),a.push(a[1])}return s.length},l.prototype.clipEndWithSlot=function(e){null!=this.clipAttachment&&this.clipAttachment.endSlot==e.data&&this.clipEnd()},l.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},l.prototype.isClipping=function(){return null!=this.clipAttachment},l.prototype.clipTriangles=function(e,t,i,n,s,r,o,a){var l=this.clipOutput,h=this.clippedVertices,c=this.clippedTriangles,p=this.clippingPolygons,u=this.clippingPolygons.length,d=a?12:8,m=0;h.length=0;e:for(var f=c.length=0;f<n;f+=3)for(var g=i[f]<<1,v=e[g],y=e[1+g],b=s[g],S=s[1+g],T=e[g=i[f+1]<<1],_=e[1+g],A=s[g],P=s[1+g],I=e[g=i[f+2]<<1],C=e[1+g],x=s[g],B=s[1+g],E=0;E<u;E++){var w=h.length;if(!this.clip(v,y,T,_,I,C,p[E],l)){(G=X.Utils.setArraySize(h,w+3*d))[w]=v,G[w+1]=y,G[w+2]=r.r,G[w+3]=r.g,G[w+4]=r.b,G[w+5]=r.a,a?(G[w+6]=b,G[w+7]=S,G[w+8]=o.r,G[w+9]=o.g,G[w+10]=o.b,G[w+11]=o.a,G[w+12]=T,G[w+13]=_,G[w+14]=r.r,G[w+15]=r.g,G[w+16]=r.b,G[w+17]=r.a,G[w+18]=A,G[w+19]=P,G[w+20]=o.r,G[w+21]=o.g,G[w+22]=o.b,G[w+23]=o.a,G[w+24]=I,G[w+25]=C,G[w+26]=r.r,G[w+27]=r.g,G[w+28]=r.b,G[w+29]=r.a,G[w+30]=x,G[w+31]=B,G[w+32]=o.r,G[w+33]=o.g,G[w+34]=o.b,G[w+35]=o.a):(G[w+6]=b,G[w+7]=S,G[w+8]=T,G[w+9]=_,G[w+10]=r.r,G[w+11]=r.g,G[w+12]=r.b,G[w+13]=r.a,G[w+14]=A,G[w+15]=P,G[w+16]=I,G[w+17]=C,G[w+18]=r.r,G[w+19]=r.g,G[w+20]=r.b,G[w+21]=r.a,G[w+22]=x,G[w+23]=B),w=c.length,($=X.Utils.setArraySize(c,w+3))[w]=m,$[w+1]=m+1,$[w+2]=m+2,m+=3;continue e}var R=l.length;if(0!=R){for(var M=_-C,O=I-T,N=v-I,F=C-y,D=1/(M*N+O*(y-C)),L=R>>1,k=this.clipOutput,G=X.Utils.setArraySize(h,w+L*d),W=0;W<R;W+=2){var U=k[W],V=k[W+1];G[w]=U,G[w+1]=V,G[w+2]=r.r,G[w+3]=r.g,G[w+4]=r.b,G[w+5]=r.a;var H=U-I,U=V-C,V=(M*H+O*U)*D,H=(F*H+N*U)*D,U=1-V-H;G[w+6]=b*V+A*H+x*U,G[w+7]=S*V+P*H+B*U,a&&(G[w+8]=o.r,G[w+9]=o.g,G[w+10]=o.b,G[w+11]=o.a),w+=d}var w=c.length,$=X.Utils.setArraySize(c,w+3*(L-2));L--;for(W=1;W<L;W++)$[w]=m,$[w+1]=m+W,$[w+2]=m+W+1,w+=3;m+=1+L}}},l.prototype.clip=function(e,t,i,n,s,r,o,a){var l=a,h=!1,c=null;2<=o.length%4?(c=a,a=this.scratch):c=this.scratch,c.length=0,c.push(e),c.push(t),c.push(i),c.push(n),c.push(s),c.push(r),c.push(e),c.push(t),a.length=0;for(var p=o,u=o.length-4,d=0;;d+=2){for(var m=p[d],f=p[d+1],g=p[d+2],v=p[d+3],y=m-g,b=f-v,S=c,T=c.length-2,_=a.length,A=0;A<T;A+=2){var P=S[A],I=S[A+1],C=S[A+2],x=S[A+3],B=0<y*(x-v)-b*(C-g);if(0<y*(I-v)-b*(P-g)){if(B){a.push(C),a.push(x);continue}var E,w,R=((w=C-P)*(f-I)-(E=x-I)*(m-P))/(E*(g-m)-w*(v-f));a.push(m+(g-m)*R),a.push(f+(v-f)*R)}else B&&(R=((w=C-P)*(f-I)-(E=x-I)*(m-P))/(E*(g-m)-w*(v-f)),a.push(m+(g-m)*R),a.push(f+(v-f)*R),a.push(C),a.push(x));h=!0}if(_==a.length)return!(l.length=0);if(a.push(a[0]),a.push(a[1]),d==u)break;_=a;(a=c).length=0,c=_}if(l!=a)for(var d=l.length=0,M=a.length-2;d<M;d++)l[d]=a[d];else l.length=l.length-2;return h},l.makeClockwise=function(e){for(var t,i,n,s=e,e=e.length,r=s[e-2]*s[1]-s[0]*s[e-1],o=0,a=e-3;o<a;o+=2)t=s[o],i=s[o+1],n=s[o+2],r+=t*s[o+3]-n*i;if(!(r<0))for(var o=0,l=e-2,a=e>>1;o<a;o+=2){var h=s[o],c=s[o+1],p=l-o;s[o]=s[p],s[o+1]=s[1+p],s[p]=h,s[1+p]=c}},X.SkeletonClipping=l}(pixi_spine=pixi_spine||{}),function(e){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}e=e.core||(e.core={}),t.prototype.findBone=function(e){if(null==e)throw new Error("boneName cannot be null.");for(var t=this.bones,i=0,n=t.length;i<n;i++){var s=t[i];if(s.name==e)return s}return null},t.prototype.findBoneIndex=function(e){if(null==e)throw new Error("boneName cannot be null.");for(var t=this.bones,i=0,n=t.length;i<n;i++)if(t[i].name==e)return i;return-1},t.prototype.findSlot=function(e){if(null==e)throw new Error("slotName cannot be null.");for(var t=this.slots,i=0,n=t.length;i<n;i++){var s=t[i];if(s.name==e)return s}return null},t.prototype.findSlotIndex=function(e){if(null==e)throw new Error("slotName cannot be null.");for(var t=this.slots,i=0,n=t.length;i<n;i++)if(t[i].name==e)return i;return-1},t.prototype.findSkin=function(e){if(null==e)throw new Error("skinName cannot be null.");for(var t=this.skins,i=0,n=t.length;i<n;i++){var s=t[i];if(s.name==e)return s}return null},t.prototype.findEvent=function(e){if(null==e)throw new Error("eventDataName cannot be null.");for(var t=this.events,i=0,n=t.length;i<n;i++){var s=t[i];if(s.name==e)return s}return null},t.prototype.findAnimation=function(e){if(null==e)throw new Error("animationName cannot be null.");for(var t=this.animations,i=0,n=t.length;i<n;i++){var s=t[i];if(s.name==e)return s}return null},t.prototype.findIkConstraint=function(e){if(null==e)throw new Error("constraintName cannot be null.");for(var t=this.ikConstraints,i=0,n=t.length;i<n;i++){var s=t[i];if(s.name==e)return s}return null},t.prototype.findTransformConstraint=function(e){if(null==e)throw new Error("constraintName cannot be null.");for(var t=this.transformConstraints,i=0,n=t.length;i<n;i++){var s=t[i];if(s.name==e)return s}return null},t.prototype.findPathConstraint=function(e){if(null==e)throw new Error("constraintName cannot be null.");for(var t=this.pathConstraints,i=0,n=t.length;i<n;i++){var s=t[i];if(s.name==e)return s}return null},t.prototype.findPathConstraintIndex=function(e){if(null==e)throw new Error("pathConstraintName cannot be null.");for(var t=this.pathConstraints,i=0,n=t.length;i<n;i++)if(t[i].name==e)return i;return-1},e.SkeletonData=t}(pixi_spine=pixi_spine||{}),function(e){!function(ee){ee.FAIL_ON_NON_EXISTING_SKIN=!1;var e=(R.prototype.readSkeletonData=function(e){var t=this.scale,i=new ee.SkeletonData,n="string"==typeof e?JSON.parse(e):e,e=n.skeleton;if(null!=e&&(i.hash=e.hash,i.version=e.spine,i.x=e.x,i.y=e.y,i.width=e.width,i.height=e.height,i.fps=e.fps,i.imagesPath=e.images),n.bones)for(var s=0;s<n.bones.length;s++){var r=n.bones[s],o=null,a=this.getValue(r,"parent",null);if(null!=a&&null==(o=i.findBone(a)))throw new Error("Parent bone not found: "+a);(p=new ee.BoneData(i.bones.length,r.name,o)).length=this.getValue(r,"length",0)*t,p.x=this.getValue(r,"x",0)*t,p.y=this.getValue(r,"y",0)*t,p.rotation=this.getValue(r,"rotation",0),p.scaleX=this.getValue(r,"scaleX",1),p.scaleY=this.getValue(r,"scaleY",1),p.shearX=this.getValue(r,"shearX",0),p.shearY=this.getValue(r,"shearY",0),p.transformMode=R.transformModeFromString(this.getValue(r,"transform","normal")),p.skinRequired=this.getValue(r,"skin",!1),i.bones.push(p)}if(n.slots)for(s=0;s<n.slots.length;s++){var l=(S=n.slots[s]).name,h=S.bone,c=i.findBone(h);if(null==c)throw new Error("Slot bone not found: "+h);var p=new ee.SlotData(i.slots.length,l,c),c=this.getValue(S,"color",null);null!=c&&p.color.setFromString(c);c=this.getValue(S,"dark",null);null!=c&&(p.darkColor=new ee.Color(1,1,1,1),p.darkColor.setFromString(c)),p.attachmentName=this.getValue(S,"attachment",null),p.blendMode=R.blendModeFromString(this.getValue(S,"blend","normal")),i.slots.push(p)}if(n.ik)for(s=0;s<n.ik.length;s++){var u=n.ik[s];(p=new ee.IkConstraintData(u.name)).order=this.getValue(u,"order",0),p.skinRequired=this.getValue(u,"skin",!1);for(var d=0;d<u.bones.length;d++){h=u.bones[d];if(null==(v=i.findBone(h)))throw new Error("IK bone not found: "+h);p.bones.push(v)}var m=u.target;if(p.target=i.findBone(m),null==p.target)throw new Error("IK target bone not found: "+m);p.mix=this.getValue(u,"mix",1),p.softness=this.getValue(u,"softness",0)*t,p.bendDirection=this.getValue(u,"bendPositive",!0)?1:-1,p.compress=this.getValue(u,"compress",!1),p.stretch=this.getValue(u,"stretch",!1),p.uniform=this.getValue(u,"uniform",!1),i.ikConstraints.push(p)}if(n.transform)for(s=0;s<n.transform.length;s++){u=n.transform[s];(p=new ee.TransformConstraintData(u.name)).order=this.getValue(u,"order",0),p.skinRequired=this.getValue(u,"skin",!1);for(d=0;d<u.bones.length;d++){h=u.bones[d];if(null==(v=i.findBone(h)))throw new Error("Transform constraint bone not found: "+h);p.bones.push(v)}m=u.target;if(p.target=i.findBone(m),null==p.target)throw new Error("Transform constraint target bone not found: "+m);p.local=this.getValue(u,"local",!1),p.relative=this.getValue(u,"relative",!1),p.offsetRotation=this.getValue(u,"rotation",0),p.offsetX=this.getValue(u,"x",0)*t,p.offsetY=this.getValue(u,"y",0)*t,p.offsetScaleX=this.getValue(u,"scaleX",0),p.offsetScaleY=this.getValue(u,"scaleY",0),p.offsetShearY=this.getValue(u,"shearY",0),p.rotateMix=this.getValue(u,"rotateMix",1),p.translateMix=this.getValue(u,"translateMix",1),p.scaleMix=this.getValue(u,"scaleMix",1),p.shearMix=this.getValue(u,"shearMix",1),i.transformConstraints.push(p)}if(n.path)for(s=0;s<n.path.length;s++){u=n.path[s];(p=new ee.PathConstraintData(u.name)).order=this.getValue(u,"order",0),p.skinRequired=this.getValue(u,"skin",!1);for(d=0;d<u.bones.length;d++){h=u.bones[d];if(null==(v=i.findBone(h)))throw new Error("Transform constraint bone not found: "+h);p.bones.push(v)}m=u.target;if(p.target=i.findSlot(m),null==p.target)throw new Error("Path target slot not found: "+m);p.positionMode=R.positionModeFromString(this.getValue(u,"positionMode","percent")),p.spacingMode=R.spacingModeFromString(this.getValue(u,"spacingMode","length")),p.rotateMode=R.rotateModeFromString(this.getValue(u,"rotateMode","tangent")),p.offsetRotation=this.getValue(u,"rotation",0),p.position=this.getValue(u,"position",0),p.positionMode==ee.PositionMode.Fixed&&(p.position*=t),p.spacing=this.getValue(u,"spacing",0),p.spacingMode!=ee.SpacingMode.Length&&p.spacingMode!=ee.SpacingMode.Fixed||(p.spacing*=t),p.rotateMix=this.getValue(u,"rotateMix",1),p.translateMix=this.getValue(u,"translateMix",1),i.pathConstraints.push(p)}if(n.skins)for(s=0;s<n.skins.length;s++){var f=n.skins[s],g=new ee.Skin(f.name);if(f.bones)for(var v,y=0;y<f.bones.length;y++){if(null==(v=i.findBone(f.bones[y])))throw new Error("Skin bone not found: "+f.bones[s]);g.bones.push(v)}if(f.ik)for(y=0;y<f.ik.length;y++){if(null==(b=i.findIkConstraint(f.ik[y])))throw new Error("Skin IK constraint not found: "+f.ik[s]);g.constraints.push(b)}if(f.transform)for(y=0;y<f.transform.length;y++){if(null==(b=i.findTransformConstraint(f.transform[y])))throw new Error("Skin transform constraint not found: "+f.transform[s]);g.constraints.push(b)}if(f.path)for(var b,y=0;y<f.path.length;y++){if(null==(b=i.findPathConstraint(f.path[y])))throw new Error("Skin path constraint not found: "+f.path[s]);g.constraints.push(b)}for(l in f.attachments){var S,T,_=i.findSlot(l);if(null==_)throw new Error("Slot not found: "+l);for(T in S=f.attachments[l]){var A=this.readAttachment(S[T],g,_.index,T,i);null!=A&&g.setAttachment(_.index,T,A)}}i.skins.push(g),"default"==g.name&&(i.defaultSkin=g)}for(var s=0,P=this.linkedMeshes.length;s<P;s++){var I=this.linkedMeshes[s];if(null==(g=null==I.skin?i.defaultSkin:i.findSkin(I.skin)))throw new Error("Skin not found: "+I.skin);var C=g.getAttachment(I.slotIndex,I.parent);if(null==C)throw new Error("Parent mesh not found: "+I.parent);I.mesh.deformAttachment=I.inheritDeform?C:I.mesh,I.mesh.setParentMesh(C)}if(this.linkedMeshes.length=0,n.events)for(var x in n.events){var B=n.events[x];(p=new ee.EventData(x)).intValue=this.getValue(B,"int",0),p.floatValue=this.getValue(B,"float",0),p.stringValue=this.getValue(B,"string",""),p.audioPath=this.getValue(B,"audio",null),null!=p.audioPath&&(p.volume=this.getValue(B,"volume",1),p.balance=this.getValue(B,"balance",0)),i.events.push(p)}if(n.animations)for(var E in n.animations){var w=n.animations[E];this.readAnimation(w,E,i)}return i},R.prototype.readAttachment=function(e,t,i,n,s){var r=this.scale;switch(n=this.getValue(e,"name",n),this.getValue(e,"type","region")){case"region":var o=this.getValue(e,"path",n),a=this.attachmentLoader.newRegionAttachment(t,n,o);return null==a?null:(a.path=o,a.x=this.getValue(e,"x",0)*r,a.y=this.getValue(e,"y",0)*r,a.scaleX=this.getValue(e,"scaleX",1),a.scaleY=this.getValue(e,"scaleY",1),a.rotation=this.getValue(e,"rotation",0),a.width=e.width*r,a.height=e.height*r,null!=(m=this.getValue(e,"color",null))&&a.color.setFromString(m),a);case"boundingbox":var l=this.attachmentLoader.newBoundingBoxAttachment(t,n);return null==l?null:(this.readVertices(e,l,e.vertexCount<<1),null!=(m=this.getValue(e,"color",null))&&l.color.setFromString(m),l);case"mesh":case"linkedmesh":var o=this.getValue(e,"path",n),h=this.attachmentLoader.newMeshAttachment(t,n,o);if(null==h)return null;h.path=o,null!=(m=this.getValue(e,"color",null))&&h.color.setFromString(m),h.width=this.getValue(e,"width",0)*r,h.height=this.getValue(e,"height",0)*r;l=this.getValue(e,"parent",null);if(null!=l)return this.linkedMeshes.push(new f(h,this.getValue(e,"skin",null),i,l,this.getValue(e,"deform",!0))),h;l=e.uvs;return this.readVertices(e,h,l.length),h.triangles=e.triangles,h.regionUVs=new Float32Array(l),h.edges=this.getValue(e,"edges",null),h.hullLength=2*this.getValue(e,"hull",0),h;case"path":if(null==(o=this.attachmentLoader.newPathAttachment(t,n)))return null;o.closed=this.getValue(e,"closed",!1),o.constantSpeed=this.getValue(e,"constantSpeed",!0);var c=e.vertexCount;this.readVertices(e,o,c<<1);for(var p=ee.Utils.newArray(c/3,0),u=0;u<e.lengths.length;u++)p[u]=e.lengths[u]*r;return o.lengths=p,null!=(m=this.getValue(e,"color",null))&&o.color.setFromString(m),o;case"point":var d=this.attachmentLoader.newPointAttachment(t,n);return null==d?null:(d.x=this.getValue(e,"x",0)*r,d.y=this.getValue(e,"y",0)*r,d.rotation=this.getValue(e,"rotation",0),null!=(m=this.getValue(e,"color",null))&&d.color.setFromString(m),d);case"clipping":h=this.attachmentLoader.newClippingAttachment(t,n);if(null==h)return null;o=this.getValue(e,"end",null);if(null!=o){d=s.findSlot(o);if(null==d)throw new Error("Clipping end slot not found: "+o);h.endSlot=d}var m,c=e.vertexCount;return this.readVertices(e,h,c<<1),null!=(m=this.getValue(e,"color",null))&&h.color.setFromString(m),h}return null},R.prototype.readVertices=function(e,t,i){var n=this.scale;t.worldVerticesLength=i;var s=e.vertices;if(i!=s.length){for(var r=new Array,o=new Array,a=0,l=s.length;a<l;){var h=s[a++];o.push(h);for(var c=a+4*h;a<c;a+=4)o.push(s[a]),r.push(s[a+1]*n),r.push(s[a+2]*n),r.push(s[a+3])}t.bones=o,t.vertices=ee.Utils.toFloatArray(r)}else{var p=ee.Utils.toFloatArray(s);if(1!=n)for(var a=0,l=s.length;a<l;a++)p[a]*=n;t.vertices=p}},R.prototype.readAnimation=function(e,t,i){var n=this.scale,s=new Array,r=0;if(e.slots)for(var o in e.slots){var a=e.slots[o];if(-1==(q=i.findSlotIndex(o)))throw new Error("Slot not found: "+o);for(R in a){var l=a[R];if("attachment"==R){(y=new ee.AttachmentTimeline(l.length)).slotIndex=q;for(var h=0,c=0;c<l.length;c++){var p=l[c];y.setFrame(h++,this.getValue(p,"time",0),p.name)}s.push(y),r=Math.max(r,y.frames[y.getFrameCount()-1])}else if("color"==R){(y=new ee.ColorTimeline(l.length)).slotIndex=q;for(h=0,c=0;c<l.length;c++){var p=l[c],u=new ee.Color;u.setFromString(p.color||"ffffffff"),y.setFrame(h,this.getValue(p,"time",0),u.r,u.g,u.b,u.a),this.readCurve(p,y,h),h++}s.push(y),r=Math.max(r,y.frames[(y.getFrameCount()-1)*ee.ColorTimeline.ENTRIES])}else{if("twoColor"!=R)throw new Error("Invalid timeline type for a slot: "+R+" ("+o+")");(y=new ee.TwoColorTimeline(l.length)).slotIndex=q;for(h=0,c=0;c<l.length;c++){var p=l[c],d=new ee.Color,m=new ee.Color;d.setFromString(p.light),m.setFromString(p.dark),y.setFrame(h,this.getValue(p,"time",0),d.r,d.g,d.b,d.a,m.r,m.g,m.b),this.readCurve(p,y,h),h++}s.push(y),r=Math.max(r,y.frames[(y.getFrameCount()-1)*ee.TwoColorTimeline.ENTRIES])}}}if(e.bones)for(var f in e.bones){var g=e.bones[f],v=i.findBoneIndex(f);if(-1==v)throw new Error("Bone not found: "+f);for(R in g){l=g[R];if("rotate"===R){(y=new ee.RotateTimeline(l.length)).boneIndex=v;for(h=0,c=0;c<l.length;c++){p=l[c];y.setFrame(h,this.getValue(p,"time",0),this.getValue(p,"angle",0)),this.readCurve(p,y,h),h++}s.push(y),r=Math.max(r,y.frames[(y.getFrameCount()-1)*ee.RotateTimeline.ENTRIES])}else{if("translate"!==R&&"scale"!==R&&"shear"!==R)throw new Error("Invalid timeline type for a bone: "+R+" ("+f+")");var y=null,b=1,S=0;"scale"===R?(y=new ee.ScaleTimeline(l.length),S=1):"shear"===R?y=new ee.ShearTimeline(l.length):(y=new ee.TranslateTimeline(l.length),b=n),y.boneIndex=v;for(h=0,c=0;c<l.length;c++){var p=l[c],T=this.getValue(p,"x",S),_=this.getValue(p,"y",S);y.setFrame(h,this.getValue(p,"time",0),T*b,_*b),this.readCurve(p,y,h),h++}s.push(y),r=Math.max(r,y.frames[(y.getFrameCount()-1)*ee.TranslateTimeline.ENTRIES])}}}if(e.ik)for(var A in e.ik){var P=e.ik[A],I=i.findIkConstraint(A);(y=new ee.IkConstraintTimeline(P.length)).ikConstraintIndex=i.ikConstraints.indexOf(I);for(h=0,c=0;c<P.length;c++){p=P[c];y.setFrame(h,this.getValue(p,"time",0),this.getValue(p,"mix",1),this.getValue(p,"softness",0)*n,this.getValue(p,"bendPositive",!0)?1:-1,this.getValue(p,"compress",!1),this.getValue(p,"stretch",!1)),this.readCurve(p,y,h),h++}s.push(y),r=Math.max(r,y.frames[(y.getFrameCount()-1)*ee.IkConstraintTimeline.ENTRIES])}if(e.transform)for(var A in e.transform){P=e.transform[A],I=i.findTransformConstraint(A);(y=new ee.TransformConstraintTimeline(P.length)).transformConstraintIndex=i.transformConstraints.indexOf(I);for(h=0,c=0;c<P.length;c++){p=P[c];y.setFrame(h,this.getValue(p,"time",0),this.getValue(p,"rotateMix",1),this.getValue(p,"translateMix",1),this.getValue(p,"scaleMix",1),this.getValue(p,"shearMix",1)),this.readCurve(p,y,h),h++}s.push(y),r=Math.max(r,y.frames[(y.getFrameCount()-1)*ee.TransformConstraintTimeline.ENTRIES])}if(e.path)for(var A in e.path){var P=e.path[A],C=i.findPathConstraintIndex(A);if(-1==C)throw new Error("Path constraint not found: "+A);var x=i.pathConstraints[C];for(R in P){l=P[R];if("position"===R||"spacing"===R){var y=null,b=1;"spacing"===R?(y=new ee.PathConstraintSpacingTimeline(l.length),x.spacingMode!=ee.SpacingMode.Length&&x.spacingMode!=ee.SpacingMode.Fixed||(b=n)):(y=new ee.PathConstraintPositionTimeline(l.length),x.positionMode==ee.PositionMode.Fixed&&(b=n)),y.pathConstraintIndex=C;for(h=0,c=0;c<l.length;c++){p=l[c];y.setFrame(h,this.getValue(p,"time",0),this.getValue(p,R,0)*b),this.readCurve(p,y,h),h++}s.push(y),r=Math.max(r,y.frames[(y.getFrameCount()-1)*ee.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===R){(y=new ee.PathConstraintMixTimeline(l.length)).pathConstraintIndex=C;for(h=0,c=0;c<l.length;c++){p=l[c];y.setFrame(h,this.getValue(p,"time",0),this.getValue(p,"rotateMix",1),this.getValue(p,"translateMix",1)),this.readCurve(p,y,h),h++}s.push(y),r=Math.max(r,y.frames[(y.getFrameCount()-1)*ee.PathConstraintMixTimeline.ENTRIES])}}}if(e.deform)for(var B in e.deform){var E=e.deform[B],w=i.findSkin(B);if(null!=w)for(var o in E){var R,a=E[o];if(-1==(q=i.findSlotIndex(o)))throw new Error("Slot not found: "+a.name);for(R in a){var l=a[R],M=w.getAttachment(q,R);if(null==M)throw new Error("Deform attachment not found: "+l.name);var O=null!=M.bones,N=M.vertices,F=O?N.length/3*2:N.length;(y=new ee.DeformTimeline(l.length)).slotIndex=q,y.attachment=M;for(var h=0,D=0;D<l.length;D++){var p=l[D],L=void 0,k=this.getValue(p,"vertices",null);if(null==k)L=O?ee.Utils.newFloatArray(F):N;else{var L=ee.Utils.newFloatArray(F),G=this.getValue(p,"offset",0);if(ee.Utils.arrayCopy(k,0,L,G,k.length),1!=n)for(var W=(c=G)+k.length;c<W;c++)L[c]*=n;if(!O)for(c=0;c<F;c++)L[c]+=N[c]}y.setFrame(h,this.getValue(p,"time",0),L),this.readCurve(p,y,h),h++}s.push(y),r=Math.max(r,y.frames[y.getFrameCount()-1])}}else if(ee.FAIL_ON_NON_EXISTING_SKIN)throw new Error("Skin not found: "+B)}var U=e.drawOrder;if(null!=(U=null==U?e.draworder:U)){for(var y=new ee.DrawOrderTimeline(U.length),V=i.slots.length,h=0,D=0;D<U.length;D++){var H=U[D],$=null,X=this.getValue(H,"offsets",null);if(null!=X){for(var $=ee.Utils.newArray(V,-1),Y=ee.Utils.newArray(V-X.length,0),j=0,z=0,c=0;c<X.length;c++){var q,K=X[c];if(-1==(q=i.findSlotIndex(K.slot)))throw new Error("Slot not found: "+K.slot);for(;j!=q;)Y[z++]=j++;$[j+K.offset]=j++}for(;j<V;)Y[z++]=j++;for(c=V-1;0<=c;c--)-1==$[c]&&($[c]=Y[--z])}y.setFrame(h++,this.getValue(H,"time",0),$)}s.push(y),r=Math.max(r,y.frames[y.getFrameCount()-1])}if(e.events){for(y=new ee.EventTimeline(e.events.length),h=0,c=0;c<e.events.length;c++){var Q=e.events[c],Z=i.findEvent(Q.name);if(null==Z)throw new Error("Event not found: "+Q.name);var J=new ee.Event(ee.Utils.toSinglePrecision(this.getValue(Q,"time",0)),Z);J.intValue=this.getValue(Q,"int",Z.intValue),J.floatValue=this.getValue(Q,"float",Z.floatValue),J.stringValue=this.getValue(Q,"string",Z.stringValue),null!=J.data.audioPath&&(J.volume=this.getValue(Q,"volume",1),J.balance=this.getValue(Q,"balance",0)),y.setFrame(h++,J)}s.push(y),r=Math.max(r,y.frames[y.getFrameCount()-1])}if(isNaN(r))throw new Error("Error while parsing animation, duration is NaN");i.animations.push(new ee.Animation(t,s,r))},R.prototype.readCurve=function(e,t,i){var n;e.curve&&("stepped"===e.curve?t.setStepped(i):(n=e.curve,t.setCurve(i,n,this.getValue(e,"c2",0),this.getValue(e,"c3",1),this.getValue(e,"c4",1))))},R.prototype.getValue=function(e,t,i){return void 0!==e[t]?e[t]:i},R.blendModeFromString=function(e){if("normal"==(e=e.toLowerCase()))return ee.BlendMode.Normal;if("additive"==e)return ee.BlendMode.Additive;if("multiply"==e)return ee.BlendMode.Multiply;if("screen"==e)return ee.BlendMode.Screen;throw new Error("Unknown blend mode: "+e)},R.positionModeFromString=function(e){if("fixed"==(e=e.toLowerCase()))return ee.PositionMode.Fixed;if("percent"==e)return ee.PositionMode.Percent;throw new Error("Unknown position mode: "+e)},R.spacingModeFromString=function(e){if("length"==(e=e.toLowerCase()))return ee.SpacingMode.Length;if("fixed"==e)return ee.SpacingMode.Fixed;if("percent"==e)return ee.SpacingMode.Percent;throw new Error("Unknown position mode: "+e)},R.rotateModeFromString=function(e){if("tangent"==(e=e.toLowerCase()))return ee.RotateMode.Tangent;if("chain"==e)return ee.RotateMode.Chain;if("chainscale"==e)return ee.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+e)},R.transformModeFromString=function(e){if("normal"==(e=e.toLowerCase()))return ee.TransformMode.Normal;if("onlytranslation"==e)return ee.TransformMode.OnlyTranslation;if("norotationorreflection"==e)return ee.TransformMode.NoRotationOrReflection;if("noscale"==e)return ee.TransformMode.NoScale;if("noscaleorreflection"==e)return ee.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+e)},R);function R(e){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=e}ee.SkeletonJson=e;var f=function(e,t,i,n,s){this.mesh=e,this.skin=t,this.slotIndex=i,this.parent=n,this.inheritDeform=s}}(e.core||(e.core={}))}(pixi_spine=pixi_spine||{}),function(e){!function(l){var r=function(e,t,i){this.slotIndex=e,this.name=t,this.attachment=i};l.SkinEntry=r;var e=(t.prototype.setAttachment=function(e,t,i){if(null==i)throw new Error("attachment cannot be null.");var n=this.attachments;e>=n.length&&(n.length=e+1),n[e]||(n[e]={}),n[e][t]=i},t.prototype.addSkin=function(e){for(var t=0;t<e.bones.length;t++){for(var i=e.bones[t],n=!1,s=0;s<this.bones.length;s++)if(this.bones[s]==i){n=!0;break}n||this.bones.push(i)}for(t=0;t<e.constraints.length;t++){for(var r=e.constraints[t],n=!1,s=0;s<this.constraints.length;s++)if(this.constraints[s]==r){n=!0;break}n||this.constraints.push(r)}for(var o=e.getAttachments(),t=0;t<o.length;t++){var a=o[t];this.setAttachment(a.slotIndex,a.name,a.attachment)}},t.prototype.copySkin=function(e){for(var t=0;t<e.bones.length;t++){for(var i=e.bones[t],n=!1,s=0;s<this.bones.length;s++)if(this.bones[s]==i){n=!0;break}n||this.bones.push(i)}for(t=0;t<e.constraints.length;t++){for(var r=e.constraints[t],n=!1,s=0;s<this.constraints.length;s++)if(this.constraints[s]==r){n=!0;break}n||this.constraints.push(r)}for(var o=e.getAttachments(),t=0;t<o.length;t++){var a=o[t];null!=a.attachment&&(a.attachment instanceof l.MeshAttachment?a.attachment=a.attachment.newLinkedMesh():a.attachment=a.attachment.copy(),this.setAttachment(a.slotIndex,a.name,a.attachment))}},t.prototype.getAttachment=function(e,t){e=this.attachments[e];return e?e[t]:null},t.prototype.removeAttachment=function(e,t){e=this.attachments[e];e&&(e[t]=null)},t.prototype.getAttachments=function(){for(var e=new Array,t=0;t<this.attachments.length;t++){var i=this.attachments[t];if(i)for(var n in i){var s=i[n];s&&e.push(new r(t,n,s))}}return e},t.prototype.getAttachmentsForSlot=function(e,t){var i=this.attachments[e];if(i)for(var n in i){var s=i[n];s&&t.push(new r(e,n,s))}},t.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},t.prototype.attachAll=function(e,t){for(var i=0,n=0;n<e.slots.length;n++){var s=e.slots[n],r=s.getAttachment();if(r&&i<t.attachments.length){var o,a=t.attachments[i];for(o in a)if(r==a[o]){var l=this.getAttachment(i,o);null!=l&&s.setAttachment(l);break}}i++}},t);function t(e){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==e)throw new Error("name cannot be null.");this.name=e}l.Skin=e}(e.core||(e.core={}))}(pixi_spine=pixi_spine||{}),function(e){var i;function t(e,t){if(this.deform=new Array,null==e)throw new Error("data cannot be null.");if(null==t)throw new Error("bone cannot be null.");this.data=e,this.bone=t,this.color=new i.Color,this.darkColor=null==e.darkColor?null:new i.Color,this.setToSetupPose(),this.blendMode=this.data.blendMode}i=e.core||(e.core={}),t.prototype.getAttachment=function(){return this.attachment},t.prototype.setAttachment=function(e){this.attachment!=e&&(this.attachment=e,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},t.prototype.setAttachmentTime=function(e){this.attachmentTime=this.bone.skeleton.time-e},t.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},t.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},i.Slot=t}(pixi_spine=pixi_spine||{}),function(e){var n;(n=e.core||(e.core={})).SlotData=function(e,t,i){if(this.color=new n.Color(1,1,1,1),e<0)throw new Error("index must be >= 0.");if(null==t)throw new Error("name cannot be null.");if(null==i)throw new Error("boneData cannot be null.");this.index=e,this.name=t,this.boneData=i}}(pixi_spine=pixi_spine||{}),function(e){!function(e){var t,i,n=(s.prototype.getImage=function(){return this._image},s.filterFromString=function(e){switch(e.toLowerCase()){case"nearest":return t.Nearest;case"linear":return t.Linear;case"mipmap":return t.MipMap;case"mipmapnearestnearest":return t.MipMapNearestNearest;case"mipmaplinearnearest":return t.MipMapLinearNearest;case"mipmapnearestlinear":return t.MipMapNearestLinear;case"mipmaplinearlinear":return t.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+e)}},s.wrapFromString=function(e){switch(e.toLowerCase()){case"mirroredtepeat":return i.MirroredRepeat;case"clamptoedge":return i.ClampToEdge;case"repeat":return i.Repeat;default:throw new Error("Unknown texture wrap "+e)}},s);function s(e){this._image=e}e.Texture=n,(n=t=e.TextureFilter||(e.TextureFilter={}))[n.Nearest=9728]="Nearest",n[n.Linear=9729]="Linear",n[n.MipMap=9987]="MipMap",n[n.MipMapNearestNearest=9984]="MipMapNearestNearest",n[n.MipMapLinearNearest=9985]="MipMapLinearNearest",n[n.MipMapNearestLinear=9986]="MipMapNearestLinear",n[n.MipMapLinearLinear=9987]="MipMapLinearLinear",(n=i=e.TextureWrap||(e.TextureWrap={}))[n.MirroredRepeat=33648]="MirroredRepeat",n[n.ClampToEdge=33071]="ClampToEdge",n[n.Repeat=10497]="Repeat";Object.defineProperty(r.prototype,"width",{get:function(){var e=this.texture;return("3"==PIXI.VERSION[0]?e.crop:e.trim||e.orig).width},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){var e=this.texture;return("3"==PIXI.VERSION[0]?e.crop:e.trim||e.orig).height},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"u",{get:function(){return this.texture._uvs.x0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"v",{get:function(){return this.texture._uvs.y0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"u2",{get:function(){return this.texture._uvs.x2},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"v2",{get:function(){return this.texture._uvs.y2},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"offsetX",{get:function(){var e=this.texture;return e.trim?e.trim.x:0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"offsetY",{get:function(){return console.warn("Deprecation Warning: @Hackerham: I guess, if you are using PIXI-SPINE ATLAS region.offsetY, you want a texture, right? Use region.texture from now on."),this.spineOffsetY},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pixiOffsetY",{get:function(){var e=this.texture;return e.trim?e.trim.y:0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"spineOffsetY",{get:function(){var e=this.texture;return this.originalHeight-this.height-(e.trim?e.trim.y:0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"originalWidth",{get:function(){var e=this.texture;return("3"==PIXI.VERSION[0]?e.trim||e.crop:e.orig).width},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"originalHeight",{get:function(){var e=this.texture;return("3"==PIXI.VERSION[0]?e.trim||e.crop:e.orig).height},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"x",{get:function(){return this.texture.frame.x},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this.texture.frame.y},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rotate",{get:function(){return 0!==this.texture.rotate},enumerable:!0,configurable:!0}),n=r;function r(){this.size=null}e.TextureRegion=n}(e.core||(e.core={}))}(pixi_spine=pixi_spine||{}),function(e){!function(b){var e=(t.prototype.addTexture=function(e,t){for(var i=this.pages,n=null,s=0;s<i.length;s++)if(i[s].baseTexture===t.baseTexture){n=i[s];break}null===n&&((n=new S).name="texturePage",r=t.baseTexture,n.width=r.realWidth,n.height=r.realHeight,n.baseTexture=r,n.minFilter=n.magFilter=b.TextureFilter.Nearest,n.uWrap=b.TextureWrap.ClampToEdge,n.vWrap=b.TextureWrap.ClampToEdge,i.push(n));var r=new T;return r.name=e,r.page=n,r.texture=t,r.index=-1,this.regions.push(r),r},t.prototype.addTextureHash=function(e,t){for(var i in e)e.hasOwnProperty(i)&&this.addTexture(t&&-1!==i.indexOf(".")?i.substr(0,i.lastIndexOf(".")):i,e[i])},t.prototype.addSpineAtlas=function(e,t,i){return this.load(e,t,i)},t.prototype.load=function(e,u,d){var m=this;if(null==u)throw new Error("textureLoader cannot be null.");var f=new i(e),g=new Array(4),v=null,y=function(){for(;;){var e=f.readLine();if(null==e)return d&&d(m);if(0==(e=e.trim()).length)v=null;else{if(!v){(v=new S).name=e,2==f.readTuple(g)&&(v.width=parseInt(g[0]),v.height=parseInt(g[1]),f.readTuple(g)),f.readTuple(g),v.minFilter=b.Texture.filterFromString(g[0]),v.magFilter=b.Texture.filterFromString(g[1]);var t=f.readValue();v.uWrap=b.TextureWrap.ClampToEdge,v.vWrap=b.TextureWrap.ClampToEdge,"x"==t?v.uWrap=b.TextureWrap.Repeat:"y"==t?v.vWrap=b.TextureWrap.Repeat:"xy"==t&&(v.uWrap=v.vWrap=b.TextureWrap.Repeat),u(e,function(e){return null===e?(m.pages.splice(m.pages.indexOf(v),1),d&&d(null)):((v.baseTexture=e).valid||e.setSize(v.width,v.height),m.pages.push(v),v.setFilters(),v.width&&v.height||(v.width=e.realWidth,v.height=e.realHeight,v.width&&v.height||console.log("ERROR spine atlas page "+v.name+": meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)")),void y())}),m.pages.push(v);break}var i=new T;i.name=e,i.page=v;var n=f.readValue(),s=0,s="true"==n.toLocaleLowerCase()?6:"false"==n.toLocaleLowerCase()?0:(720-parseFloat(n))%360/45;f.readTuple(g);var r=parseInt(g[0]),o=parseInt(g[1]);f.readTuple(g);var a=parseInt(g[0]),l=parseInt(g[1]),h=v.baseTexture.resolution;r/=h,o/=h,a/=h,l/=h;var c=new PIXI.Rectangle(r,o,s?l:a,s?a:l);4==f.readTuple(g)&&4==f.readTuple(g)&&f.readTuple(g);var p=parseInt(g[0])/h,t=parseInt(g[1])/h;f.readTuple(g);e=parseInt(g[0])/h,n=parseInt(g[1])/h,h=new PIXI.Rectangle(0,0,p,t),n=new PIXI.Rectangle(e,t-l-n,a,l);"3"!=PIXI.VERSION[0]?i.texture=new PIXI.Texture(i.page.baseTexture,c,h,n,s):(l=(a=new PIXI.Rectangle(r,o,a,l)).clone(),n.width=p,n.height=t,i.texture=new PIXI.Texture(i.page.baseTexture,a,l,n,s)),i.index=parseInt(f.readValue()),i.texture.updateUvs(),m.regions.push(i)}}};y()},t.prototype.findRegion=function(e){for(var t=0;t<this.regions.length;t++)if(this.regions[t].name==e)return this.regions[t];return null},t.prototype.dispose=function(){for(var e=0;e<this.pages.length;e++)this.pages[e].baseTexture.dispose()},t);function t(e,t,i){this.pages=new Array,this.regions=new Array,e&&this.addSpineAtlas(e,t,i)}b.TextureAtlas=e;var i=(n.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},n.prototype.readValue=function(){var e=this.readLine(),t=e.indexOf(":");if(-1==t)throw new Error("Invalid line: "+e);return e.substring(t+1).trim()},n.prototype.readTuple=function(e){var t=this.readLine(),i=t.indexOf(":");if(-1==i)throw new Error("Invalid line: "+t);for(var n=0,s=i+1;n<3;n++){var r=t.indexOf(",",s);if(-1==r)break;e[n]=t.substr(s,r-s).trim(),s=r+1}return e[n]=t.substring(s).trim(),n+1},n);function n(e){this.index=0,this.lines=e.split(/\r\n|\r|\n/)}var S=(s.prototype.setFilters=function(){var e=this.baseTexture,t=this.minFilter;t==b.TextureFilter.Linear?e.scaleMode=PIXI.SCALE_MODES.LINEAR:this.minFilter==b.TextureFilter.Nearest?e.scaleMode=PIXI.SCALE_MODES.NEAREST:(e.mipmap=PIXI.MIPMAP_MODES.POW2,t==b.TextureFilter.MipMapNearestNearest?e.scaleMode=PIXI.SCALE_MODES.NEAREST:e.scaleMode=PIXI.SCALE_MODES.LINEAR)},s);function s(){}b.TextureAtlasPage=S;var r,T=(r=b.TextureRegion,__extends(o,r),o);function o(){return null!==r&&r.apply(this,arguments)||this}b.TextureAtlasRegion=T}(e.core||(e.core={}))}(pixi_spine=pixi_spine||{}),function(e){var x;function t(e,t){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new x.Vector2,this.active=!1,null==e)throw new Error("data cannot be null.");if(null==t)throw new Error("skeleton cannot be null.");this.data=e,this.rotateMix=e.rotateMix,this.translateMix=e.translateMix,this.scaleMix=e.scaleMix,this.shearMix=e.shearMix,this.bones=new Array;for(var i=0;i<e.bones.length;i++)this.bones.push(t.findBone(e.bones[i].name));this.target=t.findBone(e.target.name)}x=e.core||(e.core={}),t.prototype.isActive=function(){return this.active},t.prototype.apply=function(){this.update()},t.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},t.prototype.applyAbsoluteWorld=function(){for(var e=this.rotateMix,t=this.translateMix,i=this.scaleMix,n=this.shearMix,s=this.target,r=s.matrix,o=r.a,a=r.c,l=r.b,h=r.d,r=0<o*h-a*l?x.MathUtils.degRad:-x.MathUtils.degRad,c=this.data.offsetRotation*r,p=this.data.offsetShearY*r,u=this.bones,d=0,m=u.length;d<m;d++){var f,g,v,y,b,S,T,_,A,P=u[d],I=!1,C=P.matrix;0!=e&&(f=C.a,b=C.c,g=C.b,S=C.d,(_=Math.atan2(l,o)-Math.atan2(g,f)+c)>x.MathUtils.PI?_-=x.MathUtils.PI2:_<-x.MathUtils.PI&&(_+=x.MathUtils.PI2),_*=e,y=Math.cos(_),v=Math.sin(_),C.a=y*f-v*g,C.c=y*b-v*S,C.b=v*f+y*g,C.d=v*b+y*S,I=!0),0!=t&&(y=this.temp,s.localToWorld(y.set(this.data.offsetX,this.data.offsetY)),C.tx+=(y.x-C.tx)*t,C.ty+=(y.y-C.ty)*t,I=!0),0<i&&(A=Math.sqrt(C.a*C.a+C.b*C.b),T=Math.sqrt(o*o+l*l),1e-5<A&&(A=(A+(T-A+this.data.offsetScaleX)*i)/A),C.a*=A,C.b*=A,A=Math.sqrt(C.c*C.c+C.d*C.d),T=Math.sqrt(a*a+h*h),1e-5<A&&(A=(A+(T-A+this.data.offsetScaleY)*i)/A),C.c*=A,C.d*=A,I=!0),0<n&&(b=C.c,S=C.d,T=Math.atan2(S,b),(_=Math.atan2(h,a)-Math.atan2(l,o)-(T-Math.atan2(C.b,C.a)))>x.MathUtils.PI?_-=x.MathUtils.PI2:_<-x.MathUtils.PI&&(_+=x.MathUtils.PI2),_=T+(_+p)*n,A=Math.sqrt(b*b+S*S),C.c=Math.cos(_)*A,C.d=Math.sin(_)*A,I=!0),I&&(P.appliedValid=!1)}},t.prototype.applyRelativeWorld=function(){for(var e=this.rotateMix,t=this.translateMix,i=this.scaleMix,n=this.shearMix,s=this.target,r=s.matrix,o=r.a,a=r.c,l=r.b,h=r.d,r=0<o*h-a*l?x.MathUtils.degRad:-x.MathUtils.degRad,c=this.data.offsetRotation*r,p=this.data.offsetShearY*r,u=this.bones,d=0,m=u.length;d<m;d++){var f,g,v,y,b,S,T,_,A=u[d],P=!1,I=A.matrix;0!=e&&(f=I.a,S=I.c,g=I.b,T=I.d,(b=Math.atan2(l,o)+c)>x.MathUtils.PI?b-=x.MathUtils.PI2:b<-x.MathUtils.PI&&(b+=x.MathUtils.PI2),b*=e,y=Math.cos(b),v=Math.sin(b),I.a=y*f-v*g,I.c=y*S-v*T,I.b=v*f+y*g,I.d=v*S+y*T,P=!0),0!=t&&(y=this.temp,s.localToWorld(y.set(this.data.offsetX,this.data.offsetY)),I.tx+=y.x*t,I.ty+=y.y*t,P=!0),0<i&&(_=(Math.sqrt(o*o+l*l)-1+this.data.offsetScaleX)*i+1,I.a*=_,I.b*=_,_=(Math.sqrt(a*a+h*h)-1+this.data.offsetScaleY)*i+1,I.c*=_,I.d*=_,P=!0),0<n&&((b=Math.atan2(h,a)-Math.atan2(l,o))>x.MathUtils.PI?b-=x.MathUtils.PI2:b<-x.MathUtils.PI&&(b+=x.MathUtils.PI2),S=I.c,T=I.d,b=Math.atan2(T,S)+(b-x.MathUtils.PI/2+p)*n,_=Math.sqrt(S*S+T*T),I.c=Math.cos(b)*_,I.d=Math.sin(b)*_,P=!0),P&&(A.appliedValid=!1)}},t.prototype.applyAbsoluteLocal=function(){var e=this.rotateMix,t=this.translateMix,i=this.scaleMix,n=this.shearMix,s=this.target;s.appliedValid||s.updateAppliedTransform();for(var r=this.bones,o=0,a=r.length;o<a;o++){var l=r[o];l.appliedValid||l.updateAppliedTransform();var h=l.arotation;0!=e&&(m=s.arotation-h+this.data.offsetRotation,h+=(m-=360*(16384-(16384.499999999996-m/360|0)))*e);var c=l.ax,p=l.ay;0!=t&&(c+=(s.ax-c+this.data.offsetX)*t,p+=(s.ay-p+this.data.offsetY)*t);var u=l.ascaleX,d=l.ascaleY;0<i&&(1e-5<u&&(u=(u+(s.ascaleX-u+this.data.offsetScaleX)*i)/u),1e-5<d&&(d=(d+(s.ascaleY-d+this.data.offsetScaleY)*i)/d));var m,f=l.ashearY;0<n&&(m=s.ashearY-f+this.data.offsetShearY,m-=360*(16384-(16384.499999999996-m/360|0)),l.shearY+=m*n),l.updateWorldTransformWith(c,p,h,u,d,l.ashearX,f)}},t.prototype.applyRelativeLocal=function(){var e=this.rotateMix,t=this.translateMix,i=this.scaleMix,n=this.shearMix,s=this.target;s.appliedValid||s.updateAppliedTransform();for(var r=this.bones,o=0,a=r.length;o<a;o++){var l=r[o];l.appliedValid||l.updateAppliedTransform();var h=l.arotation;0!=e&&(h+=(s.arotation+this.data.offsetRotation)*e);var c=l.ax,p=l.ay;0!=t&&(c+=(s.ax+this.data.offsetX)*t,p+=(s.ay+this.data.offsetY)*t);var u=l.ascaleX,d=l.ascaleY;0<i&&(1e-5<u&&(u*=(s.ascaleX-1+this.data.offsetScaleX)*i+1),1e-5<d&&(d*=(s.ascaleY-1+this.data.offsetScaleY)*i+1));var m=l.ashearY;0<n&&(m+=(s.ashearY+this.data.offsetShearY)*n),l.updateWorldTransformWith(c,p,h,u,d,l.ashearX,m)}},x.TransformConstraint=t}(pixi_spine=pixi_spine||{}),function(e){var t;function i(e){e=t.call(this,e,0,!1)||this;return e.bones=new Array,e.rotateMix=0,e.translateMix=0,e.scaleMix=0,e.shearMix=0,e.offsetRotation=0,e.offsetX=0,e.offsetY=0,e.offsetScaleX=0,e.offsetScaleY=0,e.offsetShearY=0,e.relative=!1,e.local=!1,e}e=e.core||(e.core={}),t=e.ConstraintData,__extends(i,t),e.TransformConstraintData=i}(pixi_spine=pixi_spine||{}),function(e){var t;function U(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new t.Pool(function(){return new Array}),this.polygonIndicesPool=new t.Pool(function(){return new Array})}t=e.core||(e.core={}),U.prototype.triangulate=function(e){for(var t=e,i=e.length>>1,n=this.indicesArray,s=n.length=0;s<i;s++)n[s]=s;for(var r=this.isConcaveArray,s=r.length=0,o=i;s<o;++s)r[s]=U.isConcave(s,i,t,n);var a=this.triangles;for(a.length=0;3<i;){for(var l=i-1,s=0,h=1;;){e:if(!r[s]){for(var c=n[l]<<1,p=n[s]<<1,u=n[h]<<1,d=t[c],m=t[1+c],f=t[p],g=t[1+p],v=t[u],y=t[1+u],b=(h+1)%i;b!=l;b=(b+1)%i)if(r[b]){var S=n[b]<<1,T=t[S],S=t[1+S];if(U.positiveArea(v,y,d,m,T,S)&&U.positiveArea(d,m,f,g,T,S)&&U.positiveArea(f,g,v,y,T,S))break e}break}if(0==h){for(;r[s]&&0<--s;);break}l=s,h=((s=h)+1)%i}a.push(n[(i+s-1)%i]),a.push(n[s]),a.push(n[(s+1)%i]),n.splice(s,1),r.splice(s,1);var _=(--i+s-1)%i,A=s==i?0:s;r[_]=U.isConcave(_,i,t,n),r[A]=U.isConcave(A,i,t,n)}return 3==i&&(a.push(n[2]),a.push(n[0]),a.push(n[1])),a},U.prototype.decompose=function(e,t){var i=e,n=this.convexPolygons;this.polygonPool.freeAll(n),n.length=0;var s=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(s),s.length=0;var r=this.polygonIndicesPool.obtain();r.length=0;for(var o=this.polygonPool.obtain(),a=-1,l=o.length=0,h=0,c=t.length;h<c;h+=3){var p=t[h]<<1,u=t[h+1]<<1,d=t[h+2]<<1,m=i[p],f=i[1+p],g=i[u],v=i[1+u],y=i[d],b=i[1+d],S=!1;a==p&&(T=o.length-4,x=U.winding(o[T],o[T+1],o[T+2],o[T+3],y,b),B=U.winding(y,b,o[0],o[1],o[2],o[3]),x==l&&B==l&&(o.push(y),o.push(b),r.push(d),S=!0)),S||(0<o.length?(n.push(o),s.push(r)):(this.polygonPool.free(o),this.polygonIndicesPool.free(r)),(o=this.polygonPool.obtain()).length=0,o.push(m),o.push(f),o.push(g),o.push(v),o.push(y),o.push(b),(r=this.polygonIndicesPool.obtain()).length=0,r.push(p),r.push(u),r.push(d),l=U.winding(m,f,g,v,y,b),a=p)}0<o.length&&(n.push(o),s.push(r));for(h=0,c=n.length;h<c;h++)if(0!=(r=s[h]).length)for(var T,_,A,P,I,C,x,B,E=r[0],w=r[r.length-1],R=(o=n[h])[T=o.length-4],M=o[T+1],O=o[T+2],N=o[T+3],F=o[0],D=o[1],L=o[2],k=o[3],G=U.winding(R,M,O,N,F,D),W=0;W<c;W++)W!=h&&(3==(_=s[W]).length&&(A=_[0],P=_[1],I=_[2],y=(C=n[W])[C.length-2],b=C[C.length-1],A==E&&P==w&&(x=U.winding(R,M,O,N,y,b),B=U.winding(y,b,F,D,L,k),x==G&&B==G&&(C.length=0,_.length=0,o.push(y),o.push(b),r.push(I),R=O,M=N,O=y,N=b,W=0))));for(h=n.length-1;0<=h;h--)0==(o=n[h]).length&&(n.splice(h,1),this.polygonPool.free(o),r=s[h],s.splice(h,1),this.polygonIndicesPool.free(r));return n},U.isConcave=function(e,t,i,n){var s=n[(t+e-1)%t]<<1,r=n[e]<<1,t=n[(e+1)%t]<<1;return!this.positiveArea(i[s],i[1+s],i[r],i[1+r],i[t],i[1+t])},U.positiveArea=function(e,t,i,n,s,r){return 0<=e*(r-n)+i*(t-r)+s*(n-t)},U.winding=function(e,t,i,n,s,r){i-=e,n-=t;return 0<=s*n-r*i+i*t-e*n?1:-1},t.Triangulator=U}(pixi_spine=pixi_spine||{}),function(e){!function(e){var t=(i.prototype.add=function(e){var t=this.contains(e);return this.array[0|e]=0|e,!t},i.prototype.contains=function(e){return null!=this.array[0|e]},i.prototype.remove=function(e){this.array[0|e]=void 0},i.prototype.clear=function(){this.array.length=0},i);function i(){this.array=new Array}e.IntSet=t;n.prototype.set=function(e,t,i,n){return this.r=e,this.g=t,this.b=i,this.a=n,this.clamp(),this},n.prototype.setFromColor=function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this},n.prototype.setFromString=function(e){return e="#"==e.charAt(0)?e.substr(1):e,this.r=parseInt(e.substr(0,2),16)/255,this.g=parseInt(e.substr(2,2),16)/255,this.b=parseInt(e.substr(4,2),16)/255,this.a=(8!=e.length?255:parseInt(e.substr(6,2),16))/255,this},n.prototype.add=function(e,t,i,n){return this.r+=e,this.g+=t,this.b+=i,this.a+=n,this.clamp(),this},n.prototype.clamp=function(){return this.r<0?this.r=0:1<this.r&&(this.r=1),this.g<0?this.g=0:1<this.g&&(this.g=1),this.b<0?this.b=0:1<this.b&&(this.b=1),this.a<0?this.a=0:1<this.a&&(this.a=1),this},n.rgba8888ToColor=function(e,t){e.r=((4278190080&t)>>>24)/255,e.g=((16711680&t)>>>16)/255,e.b=((65280&t)>>>8)/255,e.a=(255&t)/255},n.rgb888ToColor=function(e,t){e.r=((16711680&t)>>>16)/255,e.g=((65280&t)>>>8)/255,e.b=(255&t)/255},n.WHITE=new n(1,1,1,1),n.RED=new n(1,0,0,1),n.GREEN=new n(0,1,0,1),n.BLUE=new n(0,0,1,1),n.MAGENTA=new n(1,0,1,1),t=n;function n(e,t,i,n){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),this.r=e=void 0===e?0:e,this.g=t,this.b=i,this.a=n}e.Color=t;s.clamp=function(e,t,i){return e<t?t:i<e?i:e},s.cosDeg=function(e){return Math.cos(e*s.degRad)},s.sinDeg=function(e){return Math.sin(e*s.degRad)},s.signum=function(e){return 0<e?1:e<0?-1:0},s.toInt=function(e){return 0<e?Math.floor(e):Math.ceil(e)},s.cbrt=function(e){var t=Math.pow(Math.abs(e),1/3);return e<0?-t:t},s.randomTriangular=function(e,t){return s.randomTriangularWith(e,t,.5*(e+t))},s.randomTriangularWith=function(e,t,i){var n=Math.random(),s=t-e;return n<=(i-e)/s?e+Math.sqrt(n*s*(i-e)):t-Math.sqrt((1-n)*s*(t-i))},s.PI2=2*(s.PI=3.1415927),s.radDeg=s.radiansToDegrees=180/s.PI,s.degRad=s.degreesToRadians=s.PI/180,t=s;function s(){}e.MathUtils=t;r.prototype.apply=function(e,t,i){return e+(t-e)*this.applyInternal(i)},t=r;function r(){}e.Interpolation=t;var o,t=(__extends(a,o=t),a.prototype.applyInternal=function(e){return e<=.5?Math.pow(2*e,this.power)/2:Math.pow(2*(e-1),this.power)/(this.power%2==0?-2:2)+1},a);function a(e){var t=o.call(this)||this;return t.power=2,t.power=e,t}e.Pow=t;var l,t=(__extends(h,l=t),h.prototype.applyInternal=function(e){return Math.pow(e-1,this.power)*(this.power%2==0?-1:1)+1},h);function h(e){return l.call(this,e)||this}e.PowOut=t;c.arrayCopy=function(e,t,i,n,s){for(var r=t,o=n;r<t+s;r++,o++)i[o]=e[r]},c.setArraySize=function(e,t,i){void 0===i&&(i=0);var n=e.length;if(n==t)return e;if(n<(e.length=t))for(var s=n;s<t;s++)e[s]=i;return e},c.ensureArrayCapacity=function(e,t,i){return void 0===i&&(i=0),e.length>=t?e:c.setArraySize(e,t,i)},c.newArray=function(e,t){for(var i=new Array(e),n=0;n<e;n++)i[n]=t;return i},c.newFloatArray=function(e){if(c.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);for(var t=new Array(e),i=0;i<t.length;i++)t[i]=0;return t},c.newShortArray=function(e){if(c.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);for(var t=new Array(e),i=0;i<t.length;i++)t[i]=0;return t},c.toFloatArray=function(e){return c.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e},c.toSinglePrecision=function(e){return c.SUPPORTS_TYPED_ARRAYS?Math.fround(e):e},c.webkit602BugfixHelper=function(e,t){},c.contains=function(e,t,i){void 0===i&&(i=!0);for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1},c.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,t=c;function c(){}e.Utils=t;p.logBones=function(e){for(var t=0;t<e.bones.length;t++){var i=e.bones[t],n=i.matrix;console.log(i.data.name+", "+n.a+", "+n.b+", "+n.c+", "+n.d+", "+n.tx+", "+n.ty)}},t=p;function p(){}e.DebugUtils=t;u.prototype.obtain=function(){return 0<this.items.length?this.items.pop():this.instantiator()},u.prototype.free=function(e){e.reset&&e.reset(),this.items.push(e)},u.prototype.freeAll=function(e){for(var t=0;t<e.length;t++)e[t].reset&&e[t].reset(),this.items[t]=e[t]},u.prototype.clear=function(){this.items.length=0},t=u;function u(e){this.items=new Array,this.instantiator=e}e.Pool=t;d.prototype.set=function(e,t){return this.x=e,this.y=t,this},d.prototype.length=function(){var e=this.x,t=this.y;return Math.sqrt(e*e+t*t)},d.prototype.normalize=function(){var e=this.length();return 0!=e&&(this.x/=e,this.y/=e),this},t=d;function d(e,t){void 0===t&&(t=0),this.x=e=void 0===e?0:e,this.y=t}e.Vector2=t;m.prototype.update=function(){var e=Date.now()/1e3;this.delta=e-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=e,this.frameCount++,1<this.frameTime&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},t=m;function m(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}e.TimeKeeper=t;f.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},f.prototype.addValue=function(e){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=e,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},f.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var e=0,t=0;t<this.values.length;t++)e+=this.values[t];this.mean=e/this.values.length,this.dirty=!1}return this.mean}return 0},t=f;function f(e){void 0===e&&(e=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(e)}e.WindowedMean=t}(e.core||(e.core={}))}(pixi_spine=pixi_spine||{}),function(e){!function(t){function e(e){if(null==e)throw new Error("name cannot be null.");this.name=e}t.Attachment=e;var i,n=(__extends(s,i=e),s.prototype.computeWorldVerticesOld=function(e,t){this.computeWorldVertices(e,0,this.worldVerticesLength,t,0,2)},s.prototype.computeWorldVertices=function(e,t,i,n,s,r){i=s+(i>>1)*r;var o=e.bone.skeleton,a=e.deform,l=this.vertices,h=this.bones;if(null!=h){for(var c=0,p=0,u=0;u<t;u+=2)c+=(g=h[c])+1,p+=g;var d=o.bones;if(0==a.length)for(_=s,A=3*p;_<i;_+=r){var m=0,f=0,g=h[c++];for(g+=c;c<g;c++,A+=3){var v=d[h[c]].matrix,y=l[A],b=l[A+1],S=l[A+2];m+=(y*v.a+b*v.c+v.tx)*S,f+=(y*v.b+b*v.d+v.ty)*S}n[_]=m,n[_+1]=f}else for(var T=a,_=s,A=3*p,P=p<<1;_<i;_+=r){m=0,f=0,g=h[c++];for(g+=c;c<g;c++,A+=3,P+=2){v=d[h[c]].matrix,y=l[A]+T[P],b=l[A+1]+T[P+1],S=l[A+2];m+=(y*v.a+b*v.c+v.tx)*S,f+=(y*v.b+b*v.d+v.ty)*S}n[_]=m,n[_+1]=f}}else{0<a.length&&(l=a);for(var v,I=(v=e.bone.matrix).tx,C=v.ty,x=v.a,A=v.c,B=v.b,E=v.d,w=t,_=s;_<i;w+=2,_+=r){var y=l[w],b=l[w+1];n[_]=y*x+b*A+I,n[_+1]=y*B+b*E+C}}},s.prototype.copyTo=function(e){null!=this.bones?(e.bones=new Array(this.bones.length),t.Utils.arrayCopy(this.bones,0,e.bones,0,this.bones.length)):e.bones=null,null!=this.vertices?(e.vertices=t.Utils.newFloatArray(this.vertices.length),t.Utils.arrayCopy(this.vertices,0,e.vertices,0,this.vertices.length)):e.vertices=null,e.worldVerticesLength=this.worldVerticesLength,e.deformAttachment=this.deformAttachment},s.nextID=0,s);function s(e){e=i.call(this,e)||this;return e.id=(65535&s.nextID++)<<11,e.worldVerticesLength=0,e.deformAttachment=e}t.VertexAttachment=n}(e.core||(e.core={}))}(pixi_spine=pixi_spine||{}),function(e){(e=(e=e.core||(e.core={})).AttachmentType||(e.AttachmentType={}))[e.Region=0]="Region",e[e.BoundingBox=1]="BoundingBox",e[e.Mesh=2]="Mesh",e[e.LinkedMesh=3]="LinkedMesh",e[e.Path=4]="Path",e[e.Point=5]="Point",e[e.Clipping=6]="Clipping"}(pixi_spine=pixi_spine||{}),function(e){var t,i;function n(e){e=i.call(this,e)||this;return e.color=new t.Color(1,1,1,1),e}t=e.core||(e.core={}),i=t.VertexAttachment,__extends(n,i),n.prototype.copy=function(){var e=new n(name);return this.copyTo(e),e.color.setFromColor(this.color),e},t.BoundingBoxAttachment=n}(pixi_spine=pixi_spine||{}),function(e){var t,i;function n(e){e=i.call(this,e)||this;return e.color=new t.Color(.2275,.2275,.8078,1),e}t=e.core||(e.core={}),i=t.VertexAttachment,__extends(n,i),n.prototype.copy=function(){var e=new n(name);return this.copyTo(e),e.endSlot=this.endSlot,e.color.setFromColor(this.color),e},t.ClippingAttachment=n}(pixi_spine=pixi_spine||{}),function(e){var t,i;function n(e){e=i.call(this,e)||this;return e.color=new t.Color(1,1,1,1),e.tempColor=new t.Color(0,0,0,0),e}t=e.core||(e.core={}),i=t.VertexAttachment,__extends(n,i),n.prototype.getParentMesh=function(){return this.parentMesh},n.prototype.setParentMesh=function(e){null!=(this.parentMesh=e)&&(this.bones=e.bones,this.vertices=e.vertices,this.worldVerticesLength=e.worldVerticesLength,this.regionUVs=e.regionUVs,this.triangles=e.triangles,this.hullLength=e.hullLength,this.worldVerticesLength=e.worldVerticesLength)},n.prototype.copy=function(){if(null!=this.parentMesh)return this.newLinkedMesh();var e=new n(this.name);return e.region=this.region,e.path=this.path,e.color.setFromColor(this.color),this.copyTo(e),e.regionUVs=new Float32Array(this.regionUVs.length),t.Utils.arrayCopy(this.regionUVs,0,e.regionUVs,0,this.regionUVs.length),e.uvs=new Array(this.uvs.length),t.Utils.arrayCopy(this.uvs,0,e.uvs,0,this.uvs.length),e.triangles=new Array(this.triangles.length),t.Utils.arrayCopy(this.triangles,0,e.triangles,0,this.triangles.length),e.hullLength=this.hullLength,null!=this.edges&&(e.edges=new Array(this.edges.length),t.Utils.arrayCopy(this.edges,0,e.edges,0,this.edges.length)),e.width=this.width,e.height=this.height,e},n.prototype.newLinkedMesh=function(){var e=new n(this.name);return e.region=this.region,e.path=this.path,e.color.setFromColor(this.color),e.deformAttachment=this.deformAttachment,e.setParentMesh(null!=this.parentMesh?this.parentMesh:this),e},t.MeshAttachment=n}(pixi_spine=pixi_spine||{}),function(e){var t,i;function n(e){e=i.call(this,e)||this;return e.closed=!1,e.constantSpeed=!1,e.color=new t.Color(1,1,1,1),e}t=e.core||(e.core={}),i=t.VertexAttachment,__extends(n,i),n.prototype.copy=function(){var e=new n(name);return this.copyTo(e),e.lengths=new Array(this.lengths.length),t.Utils.arrayCopy(this.lengths,0,e.lengths,0,this.lengths.length),e.closed=closed,e.constantSpeed=this.constantSpeed,e.color.setFromColor(this.color),e},t.PathAttachment=n}(pixi_spine=pixi_spine||{}),function(e){var s,t;function i(e){e=t.call(this,e)||this;return e.color=new s.Color(.38,.94,0,1),e}s=e.core||(e.core={}),t=s.VertexAttachment,__extends(i,t),i.prototype.computeWorldPosition=function(e,t){var i=e.matrix;return t.x=this.x*i.a+this.y*i.c+e.worldX,t.y=this.x*i.b+this.y*i.d+e.worldY,t},i.prototype.computeWorldRotation=function(e){var t=e.matrix,i=s.MathUtils.cosDeg(this.rotation),n=s.MathUtils.sinDeg(this.rotation),e=i*t.a+n*t.c,t=i*t.b+n*t.d;return Math.atan2(t,e)*s.MathUtils.radDeg},i.prototype.copy=function(){var e=new i(name);return e.x=this.x,e.y=this.y,e.rotation=this.rotation,e.color.setFromColor(this.color),e},s.PointAttachment=i}(pixi_spine=pixi_spine||{}),function(e){var t,i;function u(e){e=i.call(this,e)||this;return e.x=0,e.y=0,e.scaleX=1,e.scaleY=1,e.rotation=0,e.width=0,e.height=0,e.color=new t.Color(1,1,1,1),e.offset=t.Utils.newFloatArray(8),e.uvs=t.Utils.newFloatArray(8),e.tempColor=new t.Color(1,1,1,1),e}t=e.core||(e.core={}),i=t.Attachment,__extends(u,i),u.prototype.updateOffset=function(){var e=this.width/this.region.originalWidth*this.scaleX,t=this.height/this.region.originalHeight*this.scaleY,i=-this.width/2*this.scaleX+this.region.offsetX*e,n=-this.height/2*this.scaleY+this.region.offsetY*t,s=i+this.region.width*e,r=n+this.region.height*t,o=this.rotation*Math.PI/180,a=Math.cos(o),l=Math.sin(o),e=i*a+this.x,t=i*l,o=n*a+this.y,i=n*l,n=s*a+this.x,s=s*l,a=r*a+this.y,r=r*l,l=this.offset;l[u.OX1]=e-i,l[u.OY1]=o+t,l[u.OX2]=e-r,l[u.OY2]=a+t,l[u.OX3]=n-r,l[u.OY3]=a+s,l[u.OX4]=n-i,l[u.OY4]=o+s},u.prototype.setRegion=function(e){this.region=e;var t=this.uvs;e.rotate?(t[2]=e.u,t[3]=e.v2,t[4]=e.u,t[5]=e.v,t[6]=e.u2,t[7]=e.v,t[0]=e.u2,t[1]=e.v2):(t[0]=e.u,t[1]=e.v2,t[2]=e.u,t[3]=e.v,t[4]=e.u2,t[5]=e.v,t[6]=e.u2,t[7]=e.v2)},u.prototype.computeWorldVertices=function(e,t,i,n){var s=this.offset,r=e.matrix,o=r.tx,a=r.ty,l=r.a,h=r.c,c=r.b,p=r.d,e=s[u.OX1],r=s[u.OY1];t[i]=e*l+r*h+o,t[i+1]=e*c+r*p+a,e=s[u.OX2],r=s[u.OY2],t[i+=n]=e*l+r*h+o,t[i+1]=e*c+r*p+a,e=s[u.OX3],r=s[u.OY3],t[i+=n]=e*l+r*h+o,t[i+1]=e*c+r*p+a,e=s[u.OX4],r=s[u.OY4],t[i+=n]=e*l+r*h+o,t[i+1]=e*c+r*p+a},u.prototype.copy=function(){var e=new u(name);return e.region=this.region,e.rendererObject=this.rendererObject,e.path=this.path,e.x=this.x,e.y=this.y,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.rotation=this.rotation,e.width=this.width,e.height=this.height,t.Utils.arrayCopy(this.uvs,0,e.uvs,0,8),t.Utils.arrayCopy(this.offset,0,e.offset,0,8),e.color.setFromColor(this.color),e},u.OX1=0,u.OY1=1,u.OX2=2,u.OY2=3,u.OX3=4,u.OY3=5,u.OX4=6,u.OY4=7,u.X1=0,u.Y1=1,u.C1R=2,u.C1G=3,u.C1B=4,u.C1A=5,u.U1=6,u.V1=7,u.X2=8,u.Y2=9,u.C2R=10,u.C2G=11,u.C2B=12,u.C2A=13,u.U2=14,u.V2=15,u.X3=16,u.Y3=17,u.C3R=18,u.C3G=19,u.C3B=20,u.C3A=21,u.U3=22,u.V3=23,u.X4=24,u.Y4=25,u.C4R=26,u.C4G=27,u.C4B=28,u.C4A=29,u.U4=30,u.V4=31,t.RegionAttachment=u}(pixi_spine=pixi_spine||{}),function(e){var s;function t(e,t){this.jitterX=0,this.jitterY=0,this.jitterX=e,this.jitterY=t}s=e.core||(e.core={}),t.prototype.begin=function(e){},t.prototype.transform=function(e,t,i,n){e.x+=s.MathUtils.randomTriangular(-this.jitterX,this.jitterY),e.y+=s.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},t.prototype.end=function(){},s.JitterEffect=t}(pixi_spine=pixi_spine||{}),function(e){var l;function h(e){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=e}l=e.core||(e.core={}),h.prototype.begin=function(e){this.worldX=e.x+this.centerX,this.worldY=e.y+this.centerY},h.prototype.transform=function(e,t,i,n){var s=this.angle*l.MathUtils.degreesToRadians,r=e.x-this.worldX,o=e.y-this.worldY,a=Math.sqrt(r*r+o*o);a<this.radius&&(s=h.interpolation.apply(0,s,(this.radius-a)/this.radius),a=Math.cos(s),s=Math.sin(s),e.x=a*r-s*o+this.worldX,e.y=s*r+a*o+this.worldY)},h.prototype.end=function(){},h.interpolation=new l.PowOut(2),l.SwirlEffect=h}(pixi_spine=pixi_spine||{}),function(){var t;Math.fround||(Math.fround=Math.fround=(t=new Float32Array(1),function(e){return t[0]=e,t[0]}))}(),function(S){S.core.Bone.yDown=!0;var t,T=[0,0,0],i=(t=PIXI.Sprite,__extends(e,t),e);function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.region=null,e}S.SpineSprite=i;var n,s=PIXI.GraphicsGeometry.prototype;s.invalidate||(n=[],s.invalidate=function(){var e=this.graphicsData;n.push(0),this.graphicsData=n,this.clear(),this.graphicsData=e});var r,o=(r=PIXI.SimpleMesh,__extends(a,r),a);function a(e,t,i,n,s){return r.call(this,e,t,i,n,s)||this}S.SpineMesh=o;var h,s=(h=PIXI.Container,__extends(l,h),Object.defineProperty(l.prototype,"autoUpdate",{get:function(){return this.updateTransform===l.prototype.autoUpdateTransform},set:function(e){this.updateTransform=PIXI.Container.prototype.updateTransform,e?this._setTicker||PIXI.ticker.shared.add(this.updateTick,this):PIXI.ticker.shared.remove(this.updateTick,this),this._setTicker=e},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"tint",{get:function(){return PIXI.utils.rgb2hex(this.tintRgb)},set:function(e){this.tintRgb=PIXI.utils.hex2rgb(e,this.tintRgb)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"delayLimit",{get:function(){return(void 0!==this.localDelayLimit?this.localDelayLimit:l.globalDelayLimit)||Number.MAX_VALUE},enumerable:!0,configurable:!0}),l.prototype.update=function(e){var t=this.delayLimit;if(this.state.update(e=t<e?t:e),this.state.apply(this.skeleton),this.skeleton){this.skeleton.updateWorldTransform();var i=this.skeleton.slots,e=this.color,n=null,s=null;e?(n=e.light,s=e.dark):n=this.tintRgb;for(var r=0,o=i.length;r<o;r++){var a=(b=i[r]).getAttachment(),l=this.slotContainers[r];if(a){var h,c=null,p=a.color;if(a instanceof S.core.RegionAttachment){var u,d,m=a.region;m&&(b.currentMesh&&(b.currentMesh.visible=!1,b.currentMesh=null,b.currentMeshName=void 0),b.currentSpriteName&&b.currentSpriteName===m.name||(u=m.name,b.currentSprite&&(b.currentSprite.visible=!1),b.sprites=b.sprites||{},void 0!==b.sprites[u]?b.sprites[u].visible=!0:(d=this.createSprite(b,a,u),l.addChild(d)),b.currentSprite=b.sprites[u],b.currentSpriteName=u)),(d=l.transform).setFromMatrix(b.bone.matrix),b.currentSprite.color?c=b.currentSprite.color:(T[0]=n[0]*b.color.r*p.r,T[1]=n[1]*b.color.g*p.g,T[2]=n[2]*b.color.b*p.b,b.currentSprite.tint=PIXI.utils.rgb2hex(T)),b.currentSprite.blendMode=b.blendMode}else if(a instanceof S.core.MeshAttachment)b.currentSprite&&(b.currentSprite.visible=!1,b.currentSprite=null,b.currentSpriteName=void 0,(d=new PIXI.Transform)._parentID=-1,d._worldID=l.transform._worldID,l.transform=d),b.currentMeshName&&b.currentMeshName===a.name||(h=a.name,b.currentMesh&&(b.currentMesh.visible=!1),b.meshes=b.meshes||{},void 0!==b.meshes[h]?b.meshes[h].visible=!0:(u=this.createMesh(b,a),l.addChild(u)),b.currentMesh=b.meshes[h],b.currentMeshName=h),a.computeWorldVerticesOld(b,b.currentMesh.vertices),b.currentMesh.color?c=b.currentMesh.color:(T[0]=n[0]*b.color.r*p.r,T[1]=n[1]*b.color.g*p.g,T[2]=n[2]*b.color.b*p.b,b.currentMesh.tint=PIXI.utils.rgb2hex(T)),b.currentMesh.blendMode=b.blendMode;else{if(!(a instanceof S.core.ClippingAttachment)){l.visible=!1;continue}b.currentGraphics||(this.createGraphics(b,a),l.addChild(b.clippingContainer),l.addChild(b.currentGraphics)),this.updateGraphics(b,a)}l.visible=!0,c&&(h=b.color.r*p.r,a=b.color.g*p.g,p=b.color.b*p.b,c.setLight(n[0]*h+s[0]*(1-h),n[1]*a+s[1]*(1-a),n[2]*p+s[2]*(1-p)),p=b.darkColor?(h=b.darkColor.r,a=b.darkColor.g,b.darkColor.b):a=h=0,c.setDark(n[0]*h+s[0]*(1-h),n[1]*a+s[1]*(1-a),n[2]*p+s[2]*(1-p))),l.alpha=b.color.a}else l.visible=!1}for(var f=this.skeleton.drawOrder,g=null,v=null,r=0,o=f.length;r<o;r++){var y,b=i[f[r].data.index],l=this.slotContainers[f[r].data.index];v||null!==l.parent&&l.parent!==this&&(l.parent.removeChild(l),l.parent=this),b.currentGraphics&&b.getAttachment()?(v=b.clippingContainer,g=b.getAttachment(),v.children.length=0,this.children[r]=l,g.endSlot==b.data&&(g.endSlot=null)):v?((y=this.tempClipContainers[r])||((y=this.tempClipContainers[r]=this.newContainer()).visible=!1),this.children[r]=y,l.parent=null,v.addChild(l),g.endSlot==b.data&&(v.renderable=!0,g=v=null)):this.children[r]=l}}},l.prototype.setSpriteRegion=function(e,t,i){t.region=i,t.texture=i.texture,i.size?(t.scale.x=i.size.width/i.originalWidth,t.scale.y=-i.size.height/i.originalHeight):(t.scale.x=e.scaleX*e.width/i.originalWidth,t.scale.y=-e.scaleY*e.height/i.originalHeight)},l.prototype.setMeshRegion=function(e,t,i){t.region=i,t.texture=i.texture,i.texture.updateUvs(),t.uvBuffer.update(e.regionUVs)},l.prototype.autoUpdateTransform=function(){var e;l.globalAutoUpdate?(this.lastTime=this.lastTime||Date.now(),e=.001*(Date.now()-this.lastTime),this.lastTime=Date.now(),this.update(e)):this.lastTime=0,PIXI.Container.prototype.updateTransform.call(this)},l.prototype.createSprite=function(e,t,i){var n=t.region;e.tempAttachment===t&&(n=e.tempRegion,e.tempAttachment=null,e.tempRegion=null);n=n.texture,n=this.newSprite(n);return n.rotation=t.rotation*S.core.MathUtils.degRad,n.anchor.x=.5,n.anchor.y=.5,n.position.x=t.x,n.position.y=t.y,n.alpha=t.color.a,n.region=t.region,this.setSpriteRegion(t,n,t.region),e.sprites=e.sprites||{},e.sprites[i]=n},l.prototype.createMesh=function(e,t){var i=t.region;e.tempAttachment===t&&(i=e.tempRegion,e.tempAttachment=null,e.tempRegion=null);var n=this.newMesh(i.texture,new Float32Array(t.regionUVs.length),t.regionUVs,new Uint16Array(t.triangles),PIXI.DRAW_MODES.TRIANGLES);return n.canvasPadding&&(n.canvasPadding=1.5),n.alpha=t.color.a,n.region=t.region,this.setMeshRegion(t,n,i),e.meshes=e.meshes||{},e.meshes[t.name]=n},l.prototype.createGraphics=function(e,t){var i=this.newGraphics(),n=new PIXI.Polygon([]);return i.clear(),i.beginFill(16777215,1),i.drawPolygon(n),i.renderable=!1,e.currentGraphics=i,e.clippingContainer=this.newContainer(),e.clippingContainer.mask=e.currentGraphics,i},l.prototype.updateGraphics=function(e,t){var i=e.currentGraphics.geometry,n=i.graphicsData[0].shape.points,s=t.worldVerticesLength;n.length=s,t.computeWorldVertices(e,0,s,n,0,2),i.invalidate()},l.prototype.hackTextureBySlotIndex=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=null);var n,s=this.skeleton.slots[e];if(!s)return!1;e=s.getAttachment();return e&&(n=e.region),t&&((n=new S.core.TextureRegion).texture=t,n.size=i),s.currentSprite&&s.currentSprite.region!=n?(this.setSpriteRegion(e,s.currentSprite,n),s.currentSprite.region=n):s.currentMesh&&s.currentMesh.region!=n?this.setMeshRegion(e,s.currentMesh,n):(s.tempRegion=n,s.tempAttachment=e),!0},l.prototype.hackTextureBySlotName=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=null);e=this.skeleton.findSlotIndex(e);return-1!=e&&this.hackTextureBySlotIndex(e,t,i)},l.prototype.newContainer=function(){return new PIXI.Container},l.prototype.newSprite=function(e){return new i(e)},l.prototype.newGraphics=function(){return new PIXI.Graphics},l.prototype.newMesh=function(e,t,i,n,s){return new o(e,t,i,n,s)},l.prototype.transformHack=function(){return 1},l.prototype.hackAttachmentGroups=function(e,t,i){if(e){for(var n=[],s=[],r=0,o=this.skeleton.slots.length;r<o;r++){var a=this.skeleton.slots[r],l=a.currentSpriteName||a.currentMeshName||"",a=a.currentSprite||a.currentMesh;l.endsWith(e)?(a.parentGroup=t,s.push(a)):i&&a&&(a.parentGroup=i,n.push(a))}return[n,s]}},l.prototype.destroy=function(e){PIXI.ticker.shared.remove(this.updateTick,this);for(var t=0,i=this.skeleton.slots.length;t<i;t++){var n,s,r=this.skeleton.slots[t];for(n in r.meshes)r.meshes[n].destroy(e);for(s in r.meshes=null,r.sprites)r.sprites[s].destroy(e);r.sprites=null}for(t=0,i=this.slotContainers.length;t<i;t++)this.slotContainers[t].destroy(e);this.spineData=null,this.skeleton=null,this.slotContainers=null,this.stateData=null,this.state=null,this.tempClipContainers=null,h.prototype.destroy.call(this,e)},l.prototype.updateTick=function(e,t){(this.worldVisible||this.initialAnimation||this.forceTickUpdate)&&(this.update(e/PIXI.ticker.shared.speed/PIXI.settings.TARGET_FPMS*.001),this.initialAnimation=!1)},l.globalAutoUpdate=!0,l.globalDelayLimit=0,l.clippingPolygon=[],l);function l(e){var t=h.call(this)||this;if(!e)throw new Error("The spineData param is required.");if("string"==typeof e)throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');t.spineData=e,t.skeleton=new S.core.Skeleton(e),t.skeleton.updateWorldTransform(),t.stateData=new S.core.AnimationStateData(e),t.state=new S.core.AnimationState(t.stateData),t.slotContainers=[],t.tempClipContainers=[];for(var i=0,n=t.skeleton.slots.length;i<n;i++){var s,r,o=t.skeleton.slots[i],a=o.getAttachment(),l=t.newContainer();t.slotContainers.push(l),t.addChild(l),t.tempClipContainers.push(null),a instanceof S.core.RegionAttachment?(s=a.region.name,r=t.createSprite(o,a,s),o.currentSprite=r,o.currentSpriteName=s,l.addChild(r)):a instanceof S.core.MeshAttachment?(r=t.createMesh(o,a),o.currentMesh=r,o.currentMeshName=a.name,l.addChild(r)):a instanceof S.core.ClippingAttachment&&(t.createGraphics(o,a),l.addChild(o.clippingContainer),l.addChild(o.currentGraphics))}return t.autoUpdate=!0,t.tintRgb=new Float32Array([1,1,1]),t}S.Spine=s}(pixi_spine=pixi_spine||{}),function(e){PIXI.spine=e;e=PIXI.Texture.prototype;e._updateUvs||(e._updateUvs=e.updateUvs)}(pixi_spine=pixi_spine||{}),function(u){PIXI.LoaderResource.setExtensionXhrType("skel",PIXI.LoaderResource.XHR_RESPONSE_TYPE.BUFFER);var e=(t.use=function(t,i){if(!t.data)return i();var e=t.type===PIXI.LoaderResource.TYPE.JSON&&t.data.bones,n=t.xhrType===PIXI.LoaderResource.XHR_RESPONSE_TYPE.BUFFER&&("skel"===t.extension||t.metadata.spineMetadata);if(!e&&!n)return i();var s=null,r=t.data;e?s=new u.core.SkeletonJson(null):(s=new u.core.SkeletonBinary(null),t.data instanceof ArrayBuffer&&(r=new Uint8Array(t.data)));var o=t.metadata||{},a=o?t.metadata.spineSkeletonScale:null;a&&(s.scale=a);var l=o?t.metadata.spineAtlas:null;if(!1===l)return i();if(l&&l.pages)return s.attachmentLoader=new u.core.AtlasAttachmentLoader(l),t.spineData=s.readSkeletonData(r),t.spineAtlas=l,i();var h=o.spineAtlasSuffix||".atlas",e=(n=t.url).indexOf("?");n=(n=0<e?n.substr(0,e):n).substr(0,n.lastIndexOf("."))+h;function c(e){new u.core.TextureAtlas(e,p,function(e){e&&(s.attachmentLoader=new u.core.AtlasAttachmentLoader(e),t.spineData=s.readSkeletonData(r),t.spineAtlas=e),i()})}var n=(n=t.metadata&&t.metadata.spineAtlasFile?t.metadata.spineAtlasFile:n).replace(this.baseUrl,""),a={crossOrigin:t.crossOrigin,xhrType:PIXI.LoaderResource.XHR_RESPONSE_TYPE.TEXT,metadata:o.spineMetadata||null,parentResource:t},l={crossOrigin:t.crossOrigin,metadata:o.imageMetadata||null,parentResource:t},e=(e=t.url.substr(0,t.url.lastIndexOf("/")+1)).replace(this.baseUrl,""),h=o.imageNamePrefix||t.name+"_atlas_page_",p=o.images?m(o.images):o.image?m({default:o.image}):o.imageLoader?o.imageLoader(this,h,e,l):d(this,h,e,l);t.metadata&&t.metadata.atlasRawData?c(t.metadata.atlasRawData):this.add(t.name+"_atlas",n,a,function(e){e.error?i():c(e.data)})},t);function t(){}function d(r,o,a,l){return a&&a.lastIndexOf("/")!==a.length-1&&(a+="/"),function(e,t){var i=o+e,e=a+e,n=r.resources[i];function s(){t(n.texture.baseTexture)}n?n.texture?s():n.onAfterMiddleware.add(s):r.add(i,e,l,function(e){e.error?t(null):t(e.texture.baseTexture)})}}function m(i){return function(e,t){e=i[e]||i.default;e&&e.baseTexture?t(e.baseTexture):t(e)}}u.AtlasParser=e,u.imageLoaderAdapter=d,u.syncImageLoaderAdapter=function(e,i){return e&&e.lastIndexOf("/")!==e.length-1&&(e+="/"),function(e,t){t(PIXI.BaseTexture.from(e,i))}},u.staticImageLoader=m,PIXI.Loader&&PIXI.Loader.registerPlugin(e)}(pixi_spine=pixi_spine||{});var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";var P,y,b,S,v,t,T,_,g,e;function u(e,t,i,n,s,r){var o,a,l,h,c,p,u,d,m={},f=[],g=r||e[0];for(a in s="string"==typeof s?","+s+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",null==t&&(t=1),e[0])f.push(a);if(1<e.length){for(d=e[e.length-1],u=!0,o=f.length;-1<--o;)if(a=f[o],.05<Math.abs(g[a]-d[a])){u=!1;break}u&&(e=e.concat(),r&&e.unshift(r),e.push(e[1]),r=e[e.length-3])}for(y.length=b.length=S.length=0,o=f.length;-1<--o;)a=f[o],v[a]=-1!==s.indexOf(","+a+","),m[a]=function(e,t,i,n){var s,r,o,a,l,h,c=[];if(n)for(r=(e=[n].concat(e)).length;-1<--r;)"string"==typeof(h=e[r][t])&&"="===h.charAt(1)&&(e[r][t]=n[t]+Number(h.charAt(0)+h.substr(2)));if((s=e.length-2)<0)return c[0]=new T(e[0][t],0,0,e[0][t]),c;for(r=0;r<s;r++)o=e[r][t],a=e[r+1][t],c[r]=new T(o,0,0,a),i&&(l=e[r+2][t],y[r]=(y[r]||0)+(a-o)*(a-o),b[r]=(b[r]||0)+(l-a)*(l-a));return c[r]=new T(e[r][t],0,0,e[r+1][t]),c}(e,a,v[a],r);for(o=y.length;-1<--o;)y[o]=Math.sqrt(y[o]),b[o]=Math.sqrt(b[o]);if(!n){for(o=f.length;-1<--o;)if(v[a])for(p=(l=m[f[o]]).length-1,h=0;h<p;h++)c=l[h+1].da/b[h]+l[h].da/y[h]||0,S[h]=(S[h]||0)+c*c;for(o=S.length;-1<--o;)S[o]=Math.sqrt(S[o])}for(o=f.length,h=i?4:1;-1<--o;)(function(e,t,i,n,s){for(var r,o,a,l,h,c,p,u,d,m=e.length-1,f=0,g=e[0].a,v=0;v<m;v++)r=(a=e[f]).a,o=a.d,h=e[f+1].d,h=s?(p=y[v],d=((u=b[v])+p)*t*.25/(!n&&S[v]||.5),o-((l=o-(o-r)*(n?.5*t:0!==p?d/p:0))+(((d=o+(h-o)*(n?.5*t:0!==u?d/u:0))-l)*(3*p/(p+u)+.5)/4||0))):o-((l=o-(o-r)*t*.5)+(d=o+(h-o)*t*.5))/2,d+=h,a.c=h=l+=h,a.b=0!==v?g:g=a.a+.6*(a.c-a.a),a.da=o-r,a.ca=h-r,a.ba=g-r,i?(c=_(r,g,h,o),e.splice(f,1,c[0],c[1],c[2],c[3]),f+=4):f++,g=d;(a=e[f]).b=g,a.c=g+.4*(a.d-g),a.da=a.d-a.a,a.ca=a.c-a.a,a.ba=g-a.a,i&&(c=_(a.a,g,a.c,a.d),e.splice(f,1,c[0],c[1],c[2],c[3]))})(l=m[a=f[o]],t,i,n,v[a]),u&&(l.splice(0,h),l.splice(l.length-h,h));return m}function d(e,t){var i,n,s,r,o=[],a=[],l=0,h=0,c=(t=t>>0||6)-1,p=[],u=[];for(i in e)!function(e,t,i){for(var n,s,r,o,a,l,h,c,p,u=1/i,d=e.length;-1<--d;)for(s=(c=e[d]).a,r=c.d-s,o=c.c-s,a=c.b-s,n=0,l=1;l<=i;l++)h=n-(n=((p=u*l)*p*r+3*(h=1-p)*(p*o+h*a))*p),t[p=d*i+l-1]=(t[p]||0)+h*h}(e[i],o,t);for(s=o.length,n=0;n<s;n++)l+=Math.sqrt(o[n]),u[r=n%t]=l,r==c&&(h+=l,p[r=n/t>>0]=u,a[r]=h,l=0,u=[]);return{length:h,lengths:a,segments:p}}_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(n,c,v){function f(e){for(var t=[],i=e.length,n=0;n!==i;t.push(e[n++]));return t}function g(e,t,i){var n,s,r=e.cycle;for(n in r)s=r[n],e[n]="function"==typeof s?s(i,t[i],t):s[i%s.length];delete e.cycle}function y(e){if("function"==typeof e)return e;var d="object"==typeof e?e:{each:e},m=d.ease,f=d.from||0,g=d.base||0,v={},y=isNaN(f),b=d.axis,S={center:.5,end:1}[f]||0;return function(e,t,i){var n,s,r,o,a,l,h,c,p=(i||d).length,u=v[p];if(!u){if(!(c="auto"===d.grid?0:(d.grid||[1/0])[0])){for(l=-1/0;l<(l=i[c++].getBoundingClientRect().left)&&c<p;);c--}for(u=v[p]=[],n=y?Math.min(c,p)*S-.5:f%c,s=y?p*S/c-.5:f/c|0,h=1/(l=0),a=0;a<p;a++)r=a%c-n,o=s-(a/c|0),u[a]=o=b?Math.abs("y"===b?o:r):Math.sqrt(r*r+o*o),l<o&&(l=o),o<h&&(h=o);u.max=l-h,u.min=h,u.v=p=d.amount||d.each*(p<c?p-1:b?"y"===b?p/c:c:Math.max(c,p/c))||0,u.b=p<0?g-p:g}return p=(u[e]-u.min)/u.max,u.b+(m?m.getRatio(p):p)*u.v}}function b(e,t,i){v.call(this,e,t,i),this._cycle=0,this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._repeat&&this._uncache(!0),this.render=b.prototype.render}var S=1e-8,T=v._internals,_=T.isSelector,A=T.isArray,e=b.prototype=v.to({},.1,{}),P=[];b.version="2.1.3",e.constructor=b,e.kill()._gc=!1,b.killTweensOf=b.killDelayedCallsTo=v.killTweensOf,b.getTweensOf=v.getTweensOf,b.lagSmoothing=v.lagSmoothing,b.ticker=v.ticker,b.render=v.render,b.distribute=y,e.invalidate=function(){return this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._yoyoEase=null,this._uncache(!0),v.prototype.invalidate.call(this)},e.updateTo=function(e,t){var i,n=this,s=n.ratio,r=n.vars.immediateRender||e.immediateRender;for(i in t&&n._startTime<n._timeline._time&&(n._startTime=n._timeline._time,n._uncache(!1),n._gc?n._enabled(!0,!1):n._timeline.insert(n,n._startTime-n._delay)),e)n.vars[i]=e[i];if(n._initted||r)if(t)n._initted=!1,r&&n.render(0,!0,!0);else if(n._gc&&n._enabled(!0,!1),n._notifyPluginsOfEnabled&&n._firstPT&&v._onPluginEvent("_onDisable",n),.998<n._time/n._duration){t=n._totalTime;n.render(0,!0,!1),n._initted=!1,n.render(t,!0,!1)}else if(n._initted=!1,n._init(),0<n._time||r)for(var o,a=1/(1-s),l=n._firstPT;l;)o=l.s+l.c,l.c*=a,l.s=o-l.c,l=l._next;return n},e.render=function(e,t,i){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var n,s,r,o,a,l,h,c=this,p=c._dirty?c.totalDuration():c._totalDuration,u=c._time,d=c._totalTime,m=c._cycle,f=c._duration,g=c._rawPrevTime;if(p-S<=e&&0<=e?(c._totalTime=p,c._cycle=c._repeat,c._yoyo&&0!=(1&c._cycle)?(c._time=0,c.ratio=c._ease._calcEnd?c._ease.getRatio(0):0):(c._time=f,c.ratio=c._ease._calcEnd?c._ease.getRatio(1):1),c._reversed||(n=!0,s="onComplete",i=i||c._timeline.autoRemoveChildren),0!==f||!c._initted&&c.vars.lazy&&!i||(c._startTime===c._timeline._duration&&(e=0),(g<0||e<=0&&-S<=e||g===S&&"isPause"!==c.data)&&g!==e&&(i=!0,S<g&&(s="onReverseComplete")),c._rawPrevTime=l=!t||e||g===e?e:S)):e<S?(c._totalTime=c._time=c._cycle=0,c.ratio=c._ease._calcEnd?c._ease.getRatio(0):0,(0!==d||0===f&&0<g)&&(s="onReverseComplete",n=c._reversed),-S<e?e=0:e<0&&(c._active=!1,0!==f||!c._initted&&c.vars.lazy&&!i||(0<=g&&(i=!0),c._rawPrevTime=l=!t||e||g===e?e:S)),c._initted||(i=!0)):(c._totalTime=c._time=e,0!==c._repeat&&(a=f+c._repeatDelay,c._cycle=c._totalTime/a>>0,0!==c._cycle&&c._cycle===c._totalTime/a&&d<=e&&c._cycle--,c._time=c._totalTime-c._cycle*a,c._yoyo&&0!=(1&c._cycle)&&(c._time=f-c._time,(h=c._yoyoEase||c.vars.yoyoEase)&&(c._yoyoEase||(!0!==h||c._initted?c._yoyoEase=h=!0===h?c._ease:h instanceof Ease?h:Ease.map[h]:(h=c.vars.ease,c._yoyoEase=h=h?h instanceof Ease?h:"function"==typeof h?new Ease(h,c.vars.easeParams):Ease.map[h]||v.defaultEase:v.defaultEase)),c.ratio=h?1-h.getRatio((f-c._time)/f):0)),c._time>f?c._time=f:c._time<0&&(c._time=0)),c._easeType&&!h?(o=c._time/f,(1===(p=c._easeType)||3===p&&.5<=o)&&(o=1-o),3===p&&(o*=2),1===(a=c._easePower)?o*=o:2===a?o*=o*o:3===a?o*=o*o*o:4===a&&(o*=o*o*o*o),c.ratio=1===p?1-o:2===p?o:c._time/f<.5?o/2:1-o/2):h||(c.ratio=c._ease.getRatio(c._time/f))),u!==c._time||i||m!==c._cycle){if(!c._initted){if(c._init(),!c._initted||c._gc)return;if(!i&&c._firstPT&&(!1!==c.vars.lazy&&c._duration||c.vars.lazy&&!c._duration))return c._time=u,c._totalTime=d,c._rawPrevTime=g,c._cycle=m,T.lazyTweens.push(c),void(c._lazy=[e,t]);!c._time||n||h?n&&this._ease._calcEnd&&!h&&(c.ratio=c._ease.getRatio(0===c._time?0:1)):c.ratio=c._ease.getRatio(c._time/f)}for(!1!==c._lazy&&(c._lazy=!1),c._active||!c._paused&&c._time!==u&&0<=e&&(c._active=!0),0===d&&(2===c._initted&&0<e&&c._init(),c._startAt&&(0<=e?c._startAt.render(e,!0,i):s=s||"_dummyGS"),!c.vars.onStart||0===c._totalTime&&0!==f||(t||c._callback("onStart"))),r=c._firstPT;r;)r.f?r.t[r.p](r.c*c.ratio+r.s):r.t[r.p]=r.c*c.ratio+r.s,r=r._next;c._onUpdate&&(e<0&&c._startAt&&c._startTime&&c._startAt.render(e,!0,i),t||c._totalTime===d&&!s||c._callback("onUpdate")),c._cycle!==m&&(t||c._gc||c.vars.onRepeat&&c._callback("onRepeat")),!s||c._gc&&!i||(e<0&&c._startAt&&!c._onUpdate&&c._startTime&&c._startAt.render(e,!0,i),n&&(c._timeline.autoRemoveChildren&&c._enabled(!1,!1),c._active=!1),!t&&c.vars[s]&&c._callback(s),0===f&&c._rawPrevTime===S&&l!==S&&(c._rawPrevTime=0))}else d!==c._totalTime&&c._onUpdate&&(t||c._callback("onUpdate"))},b.to=function(e,t,i){return new b(e,t,i)},b.from=function(e,t,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new b(e,t,i)},b.fromTo=function(e,t,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new b(e,t,n)},b.staggerTo=b.allTo=function(e,t,i,n,s,r,o){var a,l,h,c,p=[],u=y(i.stagger||n),d=i.cycle,m=(i.startAt||P).cycle;for(A(e)||("string"==typeof e&&(e=v.selector(e)||e),_(e)&&(e=f(e))),a=(e=e||[]).length-1,h=0;h<=a;h++){for(c in l={},i)l[c]=i[c];if(d&&(g(l,e,h),null!=l.duration&&(t=l.duration,delete l.duration)),m){for(c in m=l.startAt={},i.startAt)m[c]=i.startAt[c];g(l.startAt,e,h)}l.delay=u(h,e[h],e)+(l.delay||0),h===a&&s&&(l.onComplete=function(){i.onComplete&&i.onComplete.apply(i.onCompleteScope||this,arguments),s.apply(o||i.callbackScope||this,r||P)}),p[h]=new b(e[h],t,l)}return p},b.staggerFrom=b.allFrom=function(e,t,i,n,s,r,o){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,b.staggerTo(e,t,i,n,s,r,o)},b.staggerFromTo=b.allFromTo=function(e,t,i,n,s,r,o,a){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,b.staggerTo(e,t,n,s,r,o,a)},b.delayedCall=function(e,t,i,n,s){return new b(t,0,{delay:e,onComplete:t,onCompleteParams:i,callbackScope:n,onReverseComplete:t,onReverseCompleteParams:i,immediateRender:!1,useFrames:s,overwrite:0})},b.set=function(e,t){return new b(e,0,t)},b.isTweening=function(e){return 0<v.getTweensOf(e,!0).length};function r(e,t){for(var i=[],n=0,s=e._first;s;)s instanceof v?i[n++]=s:(t&&(i[n++]=s),n=(i=i.concat(r(s,t))).length),s=s._next;return i}var p=b.getAllTweens=function(e){return r(n._rootTimeline,e).concat(r(n._rootFramesTimeline,e))};b.killAll=function(e,t,i,n){null==t&&(t=!0),null==i&&(i=!0);for(var s,r,o=p(0!=n),a=o.length,l=t&&i&&n,h=0;h<a;h++)r=o[h],(l||r instanceof c||(s=r.target===r.vars.onComplete)&&i||t&&!s)&&(e?r.totalTime(r._reversed?0:r.totalDuration()):r._enabled(!1,!1))},b.killChildTweensOf=function(e,t){if(null!=e){var i,n,s,r,o,a=T.tweenLookup;if("string"==typeof e&&(e=v.selector(e)||e),_(e)&&(e=f(e)),A(e))for(r=e.length;-1<--r;)b.killChildTweensOf(e[r],t);else{for(s in i=[],a)for(n=a[s].target.parentNode;n;)n===e&&(i=i.concat(a[s].tweens)),n=n.parentNode;for(o=i.length,r=0;r<o;r++)t&&i[r].totalTime(i[r].totalDuration()),i[r]._enabled(!1,!1)}}};function s(e,t,i,n){t=!1!==t,i=!1!==i;for(var s,r,o=p(n=!1!==n),a=t&&i&&n,l=o.length;-1<--l;)r=o[l],(a||r instanceof c||(s=r.target===r.vars.onComplete)&&i||t&&!s)&&r.paused(e)}return b.pauseAll=function(e,t,i){s(!0,e,t,i)},b.resumeAll=function(e,t,i){s(!1,e,t,i)},b.globalTimeScale=function(e){var t=n._rootTimeline,i=v.ticker.time;return arguments.length?(t._startTime=i-(i-t._startTime)*t._timeScale/(e=e||S),t=n._rootFramesTimeline,i=v.ticker.frame,t._startTime=i-(i-t._startTime)*t._timeScale/e,t._timeScale=n._rootTimeline._timeScale=e):t._timeScale},e.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this.duration()?this._time/this._duration:this.ratio},e.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()},e.time=function(e,t){if(!arguments.length)return this._time;this._dirty&&this.totalDuration();var i=this._duration,n=this._cycle,s=n*(i+this._repeatDelay);return i<e&&(e=i),this.totalTime(this._yoyo&&1&n?i-e+s:this._repeat?e+s:e,t)},e.duration=function(e){return arguments.length?n.prototype.duration.call(this,e):this._duration},e.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},e.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},e.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},e.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},b},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(p,u,m){function f(e){u.call(this,e);var t,i,n=this.vars;for(i in this._labels={},this.autoRemoveChildren=!!n.autoRemoveChildren,this.smoothChildTiming=!!n.smoothChildTiming,this._sortChildren=!0,this._onUpdate=n.onUpdate,n)t=n[i],d(t)&&-1!==t.join("").indexOf("{self}")&&(n[i]=this._swapSelfInParams(t));d(n.tweens)&&this.add(n.tweens,0,n.align,n.stagger)}function g(e){var t,i={};for(t in e)i[t]=e[t];return i}function v(e,t,i){var n,s,r=e.cycle;for(n in r)s=r[n],e[n]="function"==typeof s?s(i,t[i],t):s[i%s.length];delete e.cycle}function h(e,t,i,n){var s="immediateRender";return s in t||(t[s]=!(i&&!1===i[s]||n)),t}function y(e){if("function"==typeof e)return e;var d="object"==typeof e?e:{each:e},m=d.ease,f=d.from||0,g=d.base||0,v={},y=isNaN(f),b=d.axis,S={center:.5,end:1}[f]||0;return function(e,t,i){var n,s,r,o,a,l,h,c,p=(i||d).length,u=v[p];if(!u){if(!(c="auto"===d.grid?0:(d.grid||[1/0])[0])){for(l=-1/0;l<(l=i[c++].getBoundingClientRect().left)&&c<p;);c--}for(u=v[p]=[],n=y?Math.min(c,p)*S-.5:f%c,s=y?p*S/c-.5:f/c|0,h=1/(l=0),a=0;a<p;a++)r=a%c-n,o=s-(a/c|0),u[a]=o=b?Math.abs("y"===b?o:r):Math.sqrt(r*r+o*o),l<o&&(l=o),o<h&&(h=o);u.max=l-h,u.min=h,u.v=p=d.amount||d.each*(p<c?p-1:b?"y"===b?p/c:c:Math.max(c,p/c))||0,u.b=p<0?g-p:g}return p=(u[e]-u.min)/u.max,u.b+(m?m.getRatio(p):p)*u.v}}var e=m._internals,t=f._internals={},b=e.isSelector,d=e.isArray,S=e.lazyTweens,T=e.lazyRender,o=_gsScope._gsDefine.globals,s=t.pauseCallback=function(){},t=f.prototype=new u;return f.version="2.1.3",f.distribute=y,t.constructor=f,t.kill()._gc=t._forcingPlayhead=t._hasPause=!1,t.to=function(e,t,i,n){var s=i.repeat&&o.TweenMax||m;return t?this.add(new s(e,t,i),n):this.set(e,i,n)},t.from=function(e,t,i,n){return this.add((i.repeat&&o.TweenMax||m).from(e,t,h(0,i)),n)},t.fromTo=function(e,t,i,n,s){var r=n.repeat&&o.TweenMax||m;return n=h(0,n,i),t?this.add(r.fromTo(e,t,i,n),s):this.set(e,n,s)},t.staggerTo=function(e,t,i,n,s,r,o,a){var l,h,c=new f({onComplete:r,onCompleteParams:o,callbackScope:a,smoothChildTiming:this.smoothChildTiming}),p=y(i.stagger||n),u=i.startAt,d=i.cycle;for("string"==typeof e&&(e=m.selector(e)||e),b(e=e||[])&&(e=function(e){for(var t=[],i=e.length,n=0;n!==i;t.push(e[n++]));return t}(e)),h=0;h<e.length;h++)l=g(i),u&&(l.startAt=g(u),u.cycle&&v(l.startAt,e,h)),d&&(v(l,e,h),null!=l.duration&&(t=l.duration,delete l.duration)),c.to(e[h],t,l,p(h,e[h],e));return this.add(c,s)},t.staggerFrom=function(e,t,i,n,s,r,o,a){return i.runBackwards=!0,this.staggerTo(e,t,h(0,i),n,s,r,o,a)},t.staggerFromTo=function(e,t,i,n,s,r,o,a,l){return n.startAt=i,this.staggerTo(e,t,h(0,n,i),s,r,o,a,l)},t.call=function(e,t,i,n){return this.add(m.delayedCall(0,e,t,i),n)},t.set=function(e,t,i){return this.add(new m(e,0,h(0,t,null,!0)),i)},f.exportRoot=function(e,t){null==(e=e||{}).smoothChildTiming&&(e.smoothChildTiming=!0);var i,n,s,r,o=new f(e),e=o._timeline;for(null==t&&(t=!0),e._remove(o,!0),o._startTime=0,o._rawPrevTime=o._time=o._totalTime=e._time,s=e._first;s;)r=s._next,t&&s instanceof m&&s.target===s.vars.onComplete||((n=s._startTime-s._delay)<0&&(i=1),o.add(s,n)),s=r;return e.add(o,0),i&&o.totalDuration(),o},t.add=function(e,t,i,n){var s,r,o,a,l,h,c=this;if("number"!=typeof t&&(t=c._parseTimeOrLabel(t,0,!0,e)),!(e instanceof p)){if(e instanceof Array||e&&e.push&&d(e)){for(i=i||"normal",n=n||0,s=t,r=e.length,o=0;o<r;o++)d(a=e[o])&&(a=new f({tweens:a})),c.add(a,s),"string"!=typeof a&&"function"!=typeof a&&("sequence"===i?s=a._startTime+a.totalDuration()/a._timeScale:"start"===i&&(a._startTime-=a.delay())),s+=n;return c._uncache(!0)}if("string"==typeof e)return c.addLabel(e,t);if("function"!=typeof e)throw"Cannot add "+e+" into the timeline; it is not a tween, timeline, function, or string.";e=m.delayedCall(0,e)}if(u.prototype.add.call(c,e,t),(e._time||!e._duration&&e._initted)&&(s=(c.rawTime()-e._startTime)*e._timeScale,(!e._duration||1e-5<Math.abs(Math.max(0,Math.min(e.totalDuration(),s)))-e._totalTime)&&e.render(s,!1,!1)),(c._gc||c._time===c._duration)&&!c._paused&&c._duration<c.duration())for(h=(l=c).rawTime()>e._startTime;l._timeline;)h&&l._timeline.smoothChildTiming?l.totalTime(l._totalTime,!0):l._gc&&l._enabled(!0,!1),l=l._timeline;return c},t.remove=function(e){if(e instanceof p){this._remove(e,!1);var t=e._timeline=e.vars.useFrames?p._rootFramesTimeline:p._rootTimeline;return e._startTime=(e._paused?e._pauseTime:t._time)-(e._reversed?e.totalDuration()-e._totalTime:e._totalTime)/e._timeScale,this}if(e instanceof Array||e&&e.push&&d(e)){for(var i=e.length;-1<--i;)this.remove(e[i]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},t._remove=function(e,t){return u.prototype._remove.call(this,e,t),this._last?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},t.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,!0,e))},t.insert=t.insertMultiple=function(e,t,i,n){return this.add(e,t||0,i,n)},t.appendMultiple=function(e,t,i,n){return this.add(e,this._parseTimeOrLabel(null,t,!0,e),i,n)},t.addLabel=function(e,t){return this._labels[e]=this._parseTimeOrLabel(t),this},t.addPause=function(e,t,i,n){n=m.delayedCall(0,s,i,n||this);return n.vars.onComplete=n.vars.onReverseComplete=t,n.data="isPause",this._hasPause=!0,this.add(n,e)},t.removeLabel=function(e){return delete this._labels[e],this},t.getLabelTime=function(e){return null!=this._labels[e]?this._labels[e]:-1},t._parseTimeOrLabel=function(e,t,i,n){var s,r;if(n instanceof p&&n.timeline===this)this.remove(n);else if(n&&(n instanceof Array||n.push&&d(n)))for(r=n.length;-1<--r;)n[r]instanceof p&&n[r].timeline===this&&this.remove(n[r]);if(s="number"!=typeof e||t?99999999999<this.duration()?this.recent().endTime(!1):this._duration:0,"string"==typeof t)return this._parseTimeOrLabel(t,i&&"number"==typeof e&&null==this._labels[t]?e-s:0,i);if(t=t||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=s);else{if(-1===(r=e.indexOf("=")))return null==this._labels[e]?i?this._labels[e]=s+t:t:this._labels[e]+t;t=parseInt(e.charAt(r-1)+"1",10)*Number(e.substr(r+1)),e=1<r?this._parseTimeOrLabel(e.substr(0,r-1),0,i):s}return Number(e)+t},t.seek=function(e,t){return this.totalTime("number"==typeof e?e:this._parseTimeOrLabel(e),!1!==t)},t.stop=function(){return this.paused(!0)},t.gotoAndPlay=function(e,t){return this.play(e,t)},t.gotoAndStop=function(e,t){return this.pause(e,t)},t.render=function(e,t,i){this._gc&&this._enabled(!0,!1);var n,s,r,o,a,l,h,c,p=this,u=p._time,d=p._dirty?p.totalDuration():p._totalDuration,m=p._startTime,f=p._timeScale,g=p._paused;if(u!==p._time&&(e+=p._time-u),p._hasPause&&!p._forcingPlayhead&&!t){if(u<e)for(n=p._first;n&&n._startTime<=e&&!l;)n._duration||"isPause"!==n.data||n.ratio||0===n._startTime&&0===p._rawPrevTime||(l=n),n=n._next;else for(n=p._last;n&&n._startTime>=e&&!l;)n._duration||"isPause"===n.data&&0<n._rawPrevTime&&(l=n),n=n._prev;l&&(p._time=p._totalTime=e=l._startTime,c=p._startTime+(p._reversed?p._duration-e:e)/p._timeScale)}if(d-1e-8<=e&&0<=e)p._totalTime=p._time=d,p._reversed||p._hasPausedChild()||(s=!0,o="onComplete",a=!!p._timeline.autoRemoveChildren,0===p._duration&&(e<=0&&-1e-8<=e||p._rawPrevTime<0||1e-8===p._rawPrevTime)&&p._rawPrevTime!==e&&p._first&&(a=!0,1e-8<p._rawPrevTime&&(o="onReverseComplete"))),p._rawPrevTime=p._duration||!t||e||p._rawPrevTime===e?e:1e-8,e=d+1e-4;else if(e<1e-8)if(-1e-8<e&&(e=0),((p._totalTime=p._time=0)!==u||0===p._duration&&1e-8!==p._rawPrevTime&&(0<p._rawPrevTime||e<0&&0<=p._rawPrevTime))&&(o="onReverseComplete",s=p._reversed),e<0)p._active=!1,p._timeline.autoRemoveChildren&&p._reversed?(a=s=!0,o="onReverseComplete"):0<=p._rawPrevTime&&p._first&&(a=!0),p._rawPrevTime=e;else{if(p._rawPrevTime=p._duration||!t||e||p._rawPrevTime===e?e:1e-8,0===e&&s)for(n=p._first;n&&0===n._startTime;)n._duration||(s=!1),n=n._next;e=0,p._initted||(a=!0)}else p._totalTime=p._time=p._rawPrevTime=e;if(p._time!==u&&p._first||i||a||l){if(p._initted||(p._initted=!0),p._active||!p._paused&&p._time!==u&&0<e&&(p._active=!0),0===u&&p.vars.onStart&&(0===p._time&&p._duration||t||p._callback("onStart")),u<=(h=p._time))for(n=p._first;n&&(r=n._next,h===p._time&&(!p._paused||g));)(n._active||n._startTime<=h&&!n._paused&&!n._gc)&&(l===n&&(p.pause(),p._pauseTime=c),n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,i):n.render((e-n._startTime)*n._timeScale,t,i)),n=r;else for(n=p._last;n&&(r=n._prev,h===p._time&&(!p._paused||g));){if(n._active||n._startTime<=u&&!n._paused&&!n._gc){if(l===n){for(l=n._prev;l&&l.endTime()>p._time;)l.render(l._reversed?l.totalDuration()-(e-l._startTime)*l._timeScale:(e-l._startTime)*l._timeScale,t,i),l=l._prev;l=null,p.pause(),p._pauseTime=c}n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,i):n.render((e-n._startTime)*n._timeScale,t,i)}n=r}p._onUpdate&&(t||(S.length&&T(),p._callback("onUpdate"))),o&&(p._gc||m!==p._startTime&&f===p._timeScale||!(0===p._time||d>=p.totalDuration())||(s&&(S.length&&T(),p._timeline.autoRemoveChildren&&p._enabled(!1,!1),p._active=!1),!t&&p.vars[o]&&p._callback(o)))}},t._hasPausedChild=function(){for(var e=this._first;e;){if(e._paused||e instanceof f&&e._hasPausedChild())return!0;e=e._next}return!1},t.getChildren=function(e,t,i,n){n=n||-9999999999;for(var s=[],r=this._first,o=0;r;)r._startTime<n||(r instanceof m?!1!==t&&(s[o++]=r):(!1!==i&&(s[o++]=r),!1!==e&&(o=(s=s.concat(r.getChildren(!0,t,i))).length))),r=r._next;return s},t.getTweensOf=function(e,t){var i,n,s=this._gc,r=[],o=0;for(s&&this._enabled(!0,!0),n=(i=m.getTweensOf(e)).length;-1<--n;)(i[n].timeline===this||t&&this._contains(i[n]))&&(r[o++]=i[n]);return s&&this._enabled(!1,!0),r},t.recent=function(){return this._recent},t._contains=function(e){for(var t=e.timeline;t;){if(t===this)return!0;t=t.timeline}return!1},t.shiftChildren=function(e,t,i){i=i||0;for(var n,s=this._first,r=this._labels;s;)s._startTime>=i&&(s._startTime+=e),s=s._next;if(t)for(n in r)r[n]>=i&&(r[n]+=e);return this._uncache(!0)},t._kill=function(e,t){if(!e&&!t)return this._enabled(!1,!1);for(var i=t?this.getTweensOf(t):this.getChildren(!0,!0,!1),n=i.length,s=!1;-1<--n;)i[n]._kill(e,t)&&(s=!0);return s},t.clear=function(e){var t=this.getChildren(!1,!0,!0),i=t.length;for(this._time=this._totalTime=0;-1<--i;)t[i]._enabled(!1,!1);return!1!==e&&(this._labels={}),this._uncache(!0)},t.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return p.prototype.invalidate.call(this)},t._enabled=function(e,t){if(e===this._gc)for(var i=this._first;i;)i._enabled(e,!0),i=i._next;return u.prototype._enabled.call(this,e,t)},t.totalTime=function(e,t,i){this._forcingPlayhead=!0;var n=p.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,n},t.duration=function(e){return arguments.length?(0!==this.duration()&&0!==e&&this.timeScale(this._duration/e),this):(this._dirty&&this.totalDuration(),this._duration)},t.totalDuration=function(e){if(arguments.length)return e&&this.totalDuration()?this.timeScale(this._totalDuration/e):this;if(this._dirty){for(var t,i,n=0,s=this,r=s._last,o=999999999999;r;)t=r._prev,r._dirty&&r.totalDuration(),r._startTime>o&&s._sortChildren&&!r._paused&&!s._calculatingDuration?(s._calculatingDuration=1,s.add(r,r._startTime-r._delay),s._calculatingDuration=0):o=r._startTime,r._startTime<0&&!r._paused&&(n-=r._startTime,s._timeline.smoothChildTiming&&(s._startTime+=r._startTime/s._timeScale,s._time-=r._startTime,s._totalTime-=r._startTime,s._rawPrevTime-=r._startTime),s.shiftChildren(-r._startTime,!1,-9999999999),o=0),n<(i=r._startTime+r._totalDuration/r._timeScale)&&(n=i),r=t;s._duration=s._totalDuration=n,s._dirty=!1}return this._totalDuration},t.paused=function(e){if(!1===e&&this._paused)for(var t=this._first;t;)t._startTime===this._time&&"isPause"===t.data&&(t._rawPrevTime=0),t=t._next;return p.prototype.paused.apply(this,arguments)},t.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===p._rootFramesTimeline},t.rawTime=function(e){return e&&(this._paused||this._repeat&&0<this.time()&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(e)-this._startTime)*this._timeScale},f},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,a,e){function i(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!!this.vars.yoyo,this._dirty=!0}var x=1e-8,n=a._internals,B=n.lazyTweens,E=n.lazyRender,l=_gsScope._gsDefine.globals,h=new e(null,null,1,0),e=i.prototype=new t;return e.constructor=i,e.kill()._gc=!1,i.version="2.1.3",e.invalidate=function(){return this._yoyo=!!this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},e.addCallback=function(e,t,i,n){return this.add(a.delayedCall(0,e,i,n),t)},e.removeCallback=function(e,t){if(e)if(null==t)this._kill(null,e);else for(var i=this.getTweensOf(e,!1),n=i.length,s=this._parseTimeOrLabel(t);-1<--n;)i[n]._startTime===s&&i[n]._enabled(!1,!1);return this},e.removePause=function(e){return this.removeCallback(t._internals.pauseCallback,e)},e.tweenTo=function(e,t){t=t||{};var i,n,s,r={ease:h,useFrames:this.usesFrames(),immediateRender:!1,lazy:!1},o=t.repeat&&l.TweenMax||a;for(n in t)r[n]=t[n];return r.time=this._parseTimeOrLabel(e),i=Math.abs(Number(r.time)-this._time)/this._timeScale||.001,s=new o(this,i,r),r.onStart=function(){s.target.paused(!0),s.vars.time===s.target.time()||i!==s.duration()||s.isFromTo||s.duration(Math.abs(s.vars.time-s.target.time())/s.target._timeScale).render(s.time(),!0,!0),t.onStart&&t.onStart.apply(t.onStartScope||t.callbackScope||s,t.onStartParams||[])},s},e.tweenFromTo=function(e,t,i){i=i||{},e=this._parseTimeOrLabel(e),i.startAt={onComplete:this.seek,onCompleteParams:[e],callbackScope:this},i.immediateRender=!1!==i.immediateRender;i=this.tweenTo(t,i);return i.isFromTo=1,i.duration(Math.abs(i.vars.time-e)/this._timeScale||.001)},e.render=function(e,t,i){this._gc&&this._enabled(!0,!1);var n,s,r,o,a,l,h,c,p=this,u=p._time,d=p._dirty?p.totalDuration():p._totalDuration,m=p._duration,f=p._totalTime,g=p._startTime,v=p._timeScale,y=p._rawPrevTime,b=p._paused,S=p._cycle;if(u!==p._time&&(e+=p._time-u),d-x<=e&&0<=e)p._locked||(p._totalTime=d,p._cycle=p._repeat),p._reversed||p._hasPausedChild()||(s=!0,o="onComplete",a=!!p._timeline.autoRemoveChildren,0===p._duration&&(e<=0&&-x<=e||y<0||y===x)&&y!==e&&p._first&&(a=!0,x<y&&(o="onReverseComplete"))),p._rawPrevTime=p._duration||!t||e||p._rawPrevTime===e?e:x,p._yoyo&&1&p._cycle?p._time=e=0:e=(p._time=m)+1e-4;else if(e<x)if(p._locked||(p._totalTime=p._cycle=0),p._time=0,-x<e&&(e=0),(0!==u||0===m&&y!==x&&(0<y||e<0&&0<=y)&&!p._locked)&&(o="onReverseComplete",s=p._reversed),e<0)p._active=!1,p._timeline.autoRemoveChildren&&p._reversed?(a=s=!0,o="onReverseComplete"):0<=y&&p._first&&(a=!0),p._rawPrevTime=e;else{if(p._rawPrevTime=m||!t||e||p._rawPrevTime===e?e:x,0===e&&s)for(n=p._first;n&&0===n._startTime;)n._duration||(s=!1),n=n._next;e=0,p._initted||(a=!0)}else 0===m&&y<0&&(a=!0),p._time=p._rawPrevTime=e,p._locked||(p._totalTime=e,0!==p._repeat&&(C=m+p._repeatDelay,p._cycle=p._totalTime/C>>0,p._cycle&&p._cycle===p._totalTime/C&&f<=e&&p._cycle--,p._time=p._totalTime-p._cycle*C,p._yoyo&&1&p._cycle&&(p._time=m-p._time),p._time>m?e=(p._time=m)+1e-4:p._time<0?p._time=e=0:e=p._time));if(p._hasPause&&!p._forcingPlayhead&&!t){if(u<(e=p._time)||p._repeat&&S!==p._cycle)for(n=p._first;n&&n._startTime<=e&&!l;)n._duration||"isPause"!==n.data||n.ratio||0===n._startTime&&0===p._rawPrevTime||(l=n),n=n._next;else for(n=p._last;n&&n._startTime>=e&&!l;)n._duration||"isPause"===n.data&&0<n._rawPrevTime&&(l=n),n=n._prev;l&&(c=p._startTime+(p._reversed?p._duration-l._startTime:l._startTime)/p._timeScale,l._startTime<m&&(p._time=p._rawPrevTime=e=l._startTime,p._totalTime=e+p._cycle*(p._totalDuration+p._repeatDelay)))}if(p._cycle!==S&&!p._locked){var T=p._yoyo&&0!=(1&S),_=T===(p._yoyo&&0!=(1&p._cycle)),A=p._totalTime,P=p._cycle,I=p._rawPrevTime,C=p._time;if(p._totalTime=S*m,p._cycle<S?T=!T:p._totalTime+=m,p._time=u,p._rawPrevTime=0===m?y-1e-4:y,p._cycle=S,p._locked=!0,p.render(u=T?0:m,t,0===m),t||p._gc||p.vars.onRepeat&&(p._cycle=P,p._locked=!1,p._callback("onRepeat")),u!==p._time)return;if(_&&(p._cycle=S,p._locked=!0,p.render(u=T?m+1e-4:-1e-4,!0,!1)),p._locked=!1,p._paused&&!b)return;p._time=C,p._totalTime=A,p._cycle=P,p._rawPrevTime=I}if(p._time!==u&&p._first||i||a||l){if(p._initted||(p._initted=!0),p._active||!p._paused&&p._totalTime!==f&&0<e&&(p._active=!0),0===f&&p.vars.onStart&&(0===p._totalTime&&p._totalDuration||t||p._callback("onStart")),u<=(h=p._time))for(n=p._first;n&&(r=n._next,h===p._time&&(!p._paused||b));)(n._active||n._startTime<=p._time&&!n._paused&&!n._gc)&&(l===n&&(p.pause(),p._pauseTime=c),n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,i):n.render((e-n._startTime)*n._timeScale,t,i)),n=r;else for(n=p._last;n&&(r=n._prev,h===p._time&&(!p._paused||b));){if(n._active||n._startTime<=u&&!n._paused&&!n._gc){if(l===n){for(l=n._prev;l&&l.endTime()>p._time;)l.render(l._reversed?l.totalDuration()-(e-l._startTime)*l._timeScale:(e-l._startTime)*l._timeScale,t,i),l=l._prev;l=null,p.pause(),p._pauseTime=c}n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,i):n.render((e-n._startTime)*n._timeScale,t,i)}n=r}p._onUpdate&&(t||(B.length&&E(),p._callback("onUpdate"))),o&&(p._locked||p._gc||g!==p._startTime&&v===p._timeScale||!(0===p._time||d>=p.totalDuration())||(s&&(B.length&&E(),p._timeline.autoRemoveChildren&&p._enabled(!1,!1),p._active=!1),!t&&p.vars[o]&&p._callback(o)))}else f!==p._totalTime&&p._onUpdate&&(t||p._callback("onUpdate"))},e.getActive=function(e,t,i){for(var n,s=[],r=this.getChildren(e||null==e,t||null==e,!!i),o=0,a=r.length,l=0;l<a;l++)(n=r[l]).isActive()&&(s[o++]=n);return s},e.getLabelAfter=function(e){e||0!==e&&(e=this._time);for(var t=this.getLabelsArray(),i=t.length,n=0;n<i;n++)if(t[n].time>e)return t[n].name;return null},e.getLabelBefore=function(e){null==e&&(e=this._time);for(var t=this.getLabelsArray(),i=t.length;-1<--i;)if(t[i].time<e)return t[i].name;return null},e.getLabelsArray=function(){var e,t=[],i=0;for(e in this._labels)t[i++]={time:this._labels[e],name:e};return t.sort(function(e,t){return e.time-t.time}),t},e.invalidate=function(){return this._locked=!1,t.prototype.invalidate.call(this)},e.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()||0},e.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()||0},e.totalDuration=function(e){return arguments.length?-1!==this._repeat&&e?this.timeScale(this.totalDuration()/e):this:(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},e.time=function(e,t){if(!arguments.length)return this._time;this._dirty&&this.totalDuration();var i=this._duration,n=this._cycle,s=n*(i+this._repeatDelay);return i<e&&(e=i),this.totalTime(this._yoyo&&1&n?i-e+s:this._repeat?e+s:e,t)},e.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},e.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},e.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},e.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.getLabelBefore(this._time+x)},i},!0),P=180/Math.PI,y=[],b=[],S=[],v={},t=_gsScope._gsDefine.globals,T=function(e,t,i,n){i===n&&(i=n-(n-t)/1e6),e===t&&(t=e+(i-e)/1e6),this.a=e,this.b=t,this.c=i,this.d=n,this.da=n-e,this.ca=i-e,this.ba=t-e},_=function(e,t,i,n){var s={a:e},r={},o={},a={c:n},l=(e+t)/2,h=(t+i)/2,c=(i+n)/2,t=(l+h)/2,i=(h+c)/2,h=(i-t)/8;return s.b=l+(e-l)/4,r.b=t+h,s.c=r.a=(s.b+r.b)/2,r.c=o.a=(t+i)/2,o.b=i-h,a.b=c+(n-c)/4,o.c=a.a=(o.b+a.b)/2,[s,r,o,a]},g=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.9",API:2,global:!0,init:function(e,t,i){this._target=e,t instanceof Array&&(t={values:t}),this._func={},this._mod={},this._props=[],this._timeRes=null==t.timeResolution?6:parseInt(t.timeResolution,10);var n,s,r,o,a,l=t.values||[],h={},c=l[0],p=t.autoRotate||i.vars.orientToBezier;for(n in this._autoRotate=p?p instanceof Array?p:[["x","y","rotation",!0!==p&&Number(p)||0]]:null,c)this._props.push(n);for(r=this._props.length;-1<--r;)n=this._props[r],this._overwriteProps.push(n),s=this._func[n]="function"==typeof e[n],h[n]=s?e[n.indexOf("set")||"function"!=typeof e["get"+n.substr(3)]?n:"get"+n.substr(3)]():parseFloat(e[n]),a||h[n]!==l[0][n]&&(a=h);if(this._beziers="cubic"!==t.type&&"quadratic"!==t.type&&"soft"!==t.type?u(l,isNaN(t.curviness)?1:t.curviness,!1,"thruBasic"===t.type,t.correlate,a):function(e,t,i){var n,s,r,o,a,l,h,c,p,u,d,m={},f="cubic"===(t=t||"soft")?3:2,g="soft"===t,v=[];if(null==(e=g&&i?[i].concat(e):e)||e.length<1+f)throw"invalid Bezier data";for(p in e[0])v.push(p);for(l=v.length;-1<--l;){for(m[p=v[l]]=a=[],c=e.length,h=u=0;h<c;h++)n=null==i?e[h][p]:"string"==typeof(d=e[h][p])&&"="===d.charAt(1)?i[p]+Number(d.charAt(0)+d.substr(2)):Number(d),g&&1<h&&h<c-1&&(a[u++]=(n+a[u-2])/2),a[u++]=n;for(c=u-f+1,h=u=0;h<c;h+=f)n=a[h],s=a[h+1],r=a[h+2],o=2==f?0:a[h+3],a[u++]=d=3==f?new T(n,s,r,o):new T(n,(2*s+n)/3,(2*s+r)/3,r);a.length=u}return m}(l,t.type,h),this._segCount=this._beziers[n].length,this._timeRes&&(t=d(this._beziers,this._timeRes),this._length=t.length,this._lengths=t.lengths,this._segments=t.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length),p=this._autoRotate)for(this._initialRotations=[],p[0]instanceof Array||(this._autoRotate=p=[p]),r=p.length;-1<--r;){for(o=0;o<3;o++)n=p[r][o],this._func[n]="function"==typeof e[n]&&e[n.indexOf("set")||"function"!=typeof e["get"+n.substr(3)]?n:"get"+n.substr(3)];n=p[r][2],this._initialRotations[r]=(this._func[n]?this._func[n].call(this._target):this._target[n])||0,this._overwriteProps.push(n)}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(e){var t,i,n,s,r,o,a,l,h,c,p=this._segCount,u=this._func,d=this._target,m=e!==this._startRatio;if(this._timeRes){if(l=this._lengths,h=this._curSeg,c=e*this._length,A=this._li,c>this._l2&&A<p-1){for(a=p-1;A<a&&(this._l2=l[++A])<=c;);this._l1=l[A-1],this._li=A,this._curSeg=h=this._segments[A],this._s2=h[this._s1=this._si=0]}else if(c<this._l1&&0<A){for(;0<A&&(this._l1=l[--A])>=c;);0===A&&c<this._l1?this._l1=0:A++,this._l2=l[A],this._li=A,this._curSeg=h=this._segments[A],this._s1=h[(this._si=h.length-1)-1]||0,this._s2=h[this._si]}if(t=A,c-=this._l1,A=this._si,c>this._s2&&A<h.length-1){for(a=h.length-1;A<a&&(this._s2=h[++A])<=c;);this._s1=h[A-1],this._si=A}else if(c<this._s1&&0<A){for(;0<A&&(this._s1=h[--A])>=c;);0===A&&c<this._s1?this._s1=0:A++,this._s2=h[A],this._si=A}r=1===e?1:(A+(c-this._s1)/(this._s2-this._s1))*this._prec||0}else r=(e-(t=e<0?0:1<=e?p-1:p*e>>0)*(1/p))*p;for(i=1-r,A=this._props.length;-1<--A;)n=this._props[A],o=(r*r*(s=this._beziers[n][t]).da+3*i*(r*s.ca+i*s.ba))*r+s.a,this._mod[n]&&(o=this._mod[n](o,d)),u[n]?d[n](o):d[n]=o;if(this._autoRotate)for(var f,g,v,y,b,S,T,_=this._autoRotate,A=_.length;-1<--A;)n=_[A][2],S=_[A][3]||0,T=!0===_[A][4]?1:P,s=this._beziers[_[A][0]],f=this._beziers[_[A][1]],s&&f&&(s=s[t],f=f[t],g=s.a+(s.b-s.a)*r,g+=((y=s.b+(s.c-s.b)*r)-g)*r,y+=(s.c+(s.d-s.c)*r-y)*r,v=f.a+(f.b-f.a)*r,v+=((b=f.b+(f.c-f.b)*r)-v)*r,b+=(f.c+(f.d-f.c)*r-b)*r,o=m?Math.atan2(b-v,y-g)*T+S:this._initialRotations[A],this._mod[n]&&(o=this._mod[n](o,d)),u[n]?d[n](o):d[n]=o)}}),e=g.prototype,g.bezierThrough=u,g.cubicToQuadratic=_,g._autoCSS=!0,g.quadraticToCubic=function(e,t,i){return new T(e,(2*t+e)/3,(2*t+i)/3,i)},g._cssRegister=function(){var d,m,f,e=t.CSSPlugin;e&&(e=e._internals,d=e._parseToProxy,m=e._setPluginRatio,f=e.CSSPropTween,e._registerComplexSpecialProp("bezier",{parser:function(e,t,i,n,s,r){t instanceof Array&&(t={values:t}),r=new g;var o,a,l,h=t.values,c=h.length-1,p=[],u={};if(c<0)return s;for(o=0;o<=c;o++)l=d(e,h[o],n,s,r,c!==o),p[o]=l.end;for(a in t)u[a]=t[a];return u.values=p,(s=new f(e,"bezier",0,0,l.pt,2)).data=l,s.plugin=r,s.setRatio=m,0===u.autoRotate&&(u.autoRotate=!0),!u.autoRotate||u.autoRotate instanceof Array||(o=!0===u.autoRotate?0:Number(u.autoRotate),u.autoRotate=null!=l.end.left?[["left","top","rotation",o,!1]]:null!=l.end.x&&[["x","y","rotation",o,!1]]),u.autoRotate&&(n._transform||n._enableTransforms(!1),l.autoRotate=n._target._gsTransform,l.proxy.rotation=l.autoRotate.rotation||0,n._overwriteProps.push("rotation")),r._onInitTween(l.proxy,u,n._tween),s}}))},e._mod=function(e){for(var t,i=this._overwriteProps,n=i.length;-1<--n;)(t=e[i[n]])&&"function"==typeof t&&(this._mod[i[n]]=t)},e._kill=function(e){var t,i,n=this._props;for(t in this._beziers)if(t in e)for(delete this._beziers[t],delete this._func[t],i=n.length;-1<--i;)n[i]===t&&n.splice(i,1);if(n=this._autoRotate)for(i=n.length;-1<--i;)e[n[i][2]]&&n.splice(i,1);return this._super._kill.call(this,e)},_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(r,w){function R(){r.call(this,"css"),this._overwriteProps.length=0,this.setRatio=R.prototype.setRatio}var u,_,P,p,h=_gsScope._gsDefine.globals,d={},e=R.prototype=new r("css");(e.constructor=R).version="2.1.3",R.API=2,R.defaultTransformPerspective=0,R.defaultSkewType="compensated",R.defaultSmoothOrigin=!0,R.suffixMap={top:e="px",right:e,bottom:e,left:e,width:e,height:e,fontSize:e,padding:e,margin:e,perspective:e,lineHeight:""};function o(e,t){return t.toUpperCase()}function a(e,t){return(t=ee.createElementNS?ee.createElementNS(t||"http://www.w3.org/1999/xhtml",e):ee.createElement(e)).style?t:ee.createElement(e)}function l(e){return G.test("string"==typeof e?e:(e.currentStyle||e.style).filter||"")?parseFloat(RegExp.$1)/100:1}function m(e){_gsScope.console&&console.log(e)}function A(e,t){var i,n,s=(t=t||te).style;if(void 0!==s[e])return e;for(e=e.charAt(0).toUpperCase()+e.substr(1),i=["O","Moz","ms","Ms","Webkit"],n=5;-1<--n&&void 0===s[i[n]+e];);return 0<=n?(re="-"+(oe=3===n?"ms":i[n]).toLowerCase()+"-",oe+e):null}function f(e){return ae.getComputedStyle(e)}function g(e,t){var i,n,s={};if(t=t||f(e))if(i=t.length)for(;-1<--i;)-1!==(n=t[i]).indexOf("-transform")&&Le!==n||(s[n.replace($,o)]=t.getPropertyValue(n));else for(i in t)-1!==i.indexOf("Transform")&&De!==i||(s[i]=t[i]);else if(t=e.currentStyle||e.style)for(i in t)"string"==typeof i&&void 0===s[i]&&(s[i.replace($,o)]=t[i]);return se||(s.opacity=l(e)),e=je(e,t,!1),s.rotation=e.rotation,s.skewX=e.skewX,s.scaleX=e.scaleX,s.scaleY=e.scaleY,s.x=e.x,s.y=e.y,Ge&&(s.z=e.z,s.rotationX=e.rotationX,s.rotationY=e.rotationY,s.scaleZ=e.scaleZ),s.filters&&delete s.filters,s}function v(e,t,i,n,s){var r,o,a,l={},h=e.style;for(o in i)"cssText"!==o&&"length"!==o&&isNaN(o)&&(t[o]!==(r=i[o])||s&&s[o])&&-1===o.indexOf("Origin")&&("number"==typeof r||"string"==typeof r)&&(l[o]="auto"!==r||"left"!==o&&"top"!==o?""!==r&&"auto"!==r&&"none"!==r||"string"!=typeof t[o]||""===t[o].replace(L,"")?r:0:ce(e,o),void 0!==h[o]&&(a=new Se(h,o,h[o],a)));if(n)for(o in n)"className"!==o&&(l[o]=n[o]);return{difs:l,firstMPT:a}}function C(e,t){return"string"==typeof(e="function"==typeof e?e(O,E):e)&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-parseFloat(t)||0}function I(e,t){var i="string"==typeof(e="function"==typeof e?e(O,E):e)&&"="===e.charAt(1);return null==(e="string"==typeof e&&"v"===e.charAt(e.length-2)?(i?e.substr(0,2):0)+window["inner"+("vh"===e.substr(-2)?"Height":"Width")]*(parseFloat(i?e.substr(2):e)/100):e)?t:i?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2))+t:parseFloat(e)||0}function x(e,t,i,n){var s,r;return r=(r=null==(e="function"==typeof e?e(O,E):e)?t:"number"==typeof e?e:(s=e.split("_"),r=((r="="===e.charAt(1))?parseInt(e.charAt(0)+"1",10)*parseFloat(s[0].substr(2)):parseFloat(s[0]))*(-1===e.indexOf("rad")?1:Z)-(r?0:t),s.length&&(n&&(n[i]=t+r),-1!==e.indexOf("short")&&((r%=360)!==r%180&&(r=r<0?r+360:r-360)),-1!==e.indexOf("_cw")&&r<0?r=(r+3599999999640)%360-360*(r/360|0):-1!==e.indexOf("ccw")&&0<r&&(r=(r-3599999999640)%360-360*(r/360|0))),t+r))<1e-6&&-1e-6<r?0:r}function c(e,t,i){return 255*(6*(e=e<0?e+1:1<e?e-1:e)<1?t+(i-t)*e*6:e<.5?i:3*e<2?t+(i-t)*(2/3-e)*6:t)+.5|0}function i(e,t){var i,n,s,r=e.match(ge)||[],o=0,a="";if(!r.length)return e;for(i=0;i<r.length;i++)n=r[i],o+=(s=e.substr(o,e.indexOf(n,o)-o)).length+n.length,3===(n=fe(n,t)).length&&n.push(1),a+=s+(t?"hsla("+n[0]+","+n[1]+"%,"+n[2]+"%,"+n[3]:"rgba("+n.join(","))+")";return a+e.substr(o)}var B,y,b,M,S,T,E,O,N=/(?:\-|\.|\b)(\d|\.|e\-)+/g,F=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,D=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,s=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b),?/gi,L=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,k=/(?:\d|\-|\+|=|#|\.)*/g,G=/opacity *= *([^)]*)/i,W=/opacity:([^;]*)/i,U=/alpha\(opacity *=.+?\)/i,V=/^(rgb|hsl)/,H=/([A-Z])/g,$=/-([a-z])/gi,X=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,Y=/(?:Left|Right|Width)/i,j=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,z=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,q=/,(?=[^\)]*(?:\(|$))/gi,K=/[\s,\(]/i,Q=Math.PI/180,Z=180/Math.PI,J={},t={style:{}},ee=_gsScope.document||{createElement:function(){return t}},te=a("div"),ie=a("img"),n=R._internals={_specialProps:d},ne=(_gsScope.navigator||{}).userAgent||"",se=(Me=ne.indexOf("Android"),Oe=a("a"),b=-1!==ne.indexOf("Safari")&&-1===ne.indexOf("Chrome")&&(-1===Me||3<parseFloat(ne.substr(Me+8,2))),S=b&&parseFloat(ne.substr(ne.indexOf("Version/")+8,2))<6,M=-1!==ne.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(ne)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(ne))&&(T=parseFloat(RegExp.$1)),!!Oe&&(Oe.style.cssText="top:1px;opacity:.55;",/^0.55/.test(Oe.style.opacity))),re="",oe="",ae="undefined"!=typeof window?window:ee.defaultView||{getComputedStyle:function(){}},le=R.getStyle=function(e,t,i,n,s){var r;return se||"opacity"!==t?(!n&&e.style[t]?r=e.style[t]:(i=i||f(e))?r=i[t]||i.getPropertyValue(t)||i.getPropertyValue(t.replace(H,"-$1").toLowerCase()):e.currentStyle&&(r=e.currentStyle[t]),null==s||r&&"none"!==r&&"auto"!==r&&"auto auto"!==r?r:s):l(e)},he=n.convertToPixels=function(e,t,i,n,s){if("px"===n||!n&&"lineHeight"!==t)return i;if("auto"===n||!i)return 0;var r,o,a,l=Y.test(t),h=e,c=te.style,p=i<0,u=1===i;if(p&&(i=-i),u&&(i*=100),"lineHeight"!==t||n)if("%"===n&&-1!==t.indexOf("border"))r=i/100*(l?e.clientWidth:e.clientHeight);else{if(c.cssText="border:0 solid red;position:"+le(e,"position")+";line-height:0;","%"!==n&&h.appendChild&&"v"!==n.charAt(0)&&"rem"!==n)c[l?"borderLeftWidth":"borderTopWidth"]=i+n;else{if(h=e.parentNode||ee.body,-1!==le(h,"display").indexOf("flex")&&(c.position="absolute"),o=h._gsCache,a=w.ticker.frame,o&&l&&o.time===a)return o.width*i/100;c[l?"width":"height"]=i+n}h.appendChild(te),r=parseFloat(te[l?"offsetWidth":"offsetHeight"]),h.removeChild(te),l&&"%"===n&&!1!==R.cacheWidths&&((o=h._gsCache=h._gsCache||{}).time=a,o.width=r/i*100),0!==r||s||(r=he(e,t,i,n,!0))}else o=f(e).lineHeight,e.style.lineHeight=i,r=parseFloat(f(e).lineHeight),e.style.lineHeight=o;return u&&(r/=100),p?-r:r},ce=n.calculateOffset=function(e,t,i){if("absolute"!==le(e,"position",i))return 0;var n="left"===t?"Left":"Top",i=le(e,"margin"+n,i);return e["offset"+n]-(he(e,t,parseFloat(i),i.replace(k,""))||0)},pe={width:["Left","Right"],height:["Top","Bottom"]},ue=["marginLeft","marginRight","marginTop","marginBottom"],de=function(e,t){if("contain"===e||"auto"===e||"auto auto"===e)return e+" ";var i,n=(e=null==e||""===e?"0 0":e).split(" "),s=-1!==e.indexOf("left")?"0%":-1!==e.indexOf("right")?"100%":n[0],r=-1!==e.indexOf("top")?"0%":-1!==e.indexOf("bottom")?"100%":n[1];if(3<n.length&&!t){for(n=e.split(", ").join(",").split(","),e=[],i=0;i<n.length;i++)e.push(de(n[i]));return e.join(",")}return null==r?r="center"===s?"50%":"0":"center"===r&&(r="50%"),e=(s="center"===s||isNaN(parseFloat(s))&&-1===(s+"").indexOf("=")?"50%":s)+" "+r+(2<n.length?" "+n[2]:""),t&&(t.oxp=-1!==s.indexOf("%"),t.oyp=-1!==r.indexOf("%"),t.oxr="="===s.charAt(1),t.oyr="="===r.charAt(1),t.ox=parseFloat(s.replace(L,"")),t.oy=parseFloat(r.replace(L,"")),t.v=e),t||e},me={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},fe=R.parseColor=function(e,t){var i,n,s,r,o,a,l,h;if(e)if("number"==typeof e)i=[e>>16,e>>8&255,255&e];else{if(","===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),me[e])i=me[e];else if("#"===e.charAt(0))4===e.length&&(e="#"+(n=e.charAt(1))+n+(s=e.charAt(2))+s+(r=e.charAt(3))+r),i=[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e];else if("hsl"===e.substr(0,3))if(i=h=e.match(N),t){if(-1!==e.indexOf("="))return e.match(F)}else o=Number(i[0])%360/360,a=Number(i[1])/100,n=2*(l=Number(i[2])/100)-(s=l<=.5?l*(a+1):l+a-l*a),3<i.length&&(i[3]=Number(i[3])),i[0]=c(o+1/3,n,s),i[1]=c(o,n,s),i[2]=c(o-1/3,n,s);else i=e.match(N)||me.transparent;i[0]=Number(i[0]),i[1]=Number(i[1]),i[2]=Number(i[2]),3<i.length&&(i[3]=Number(i[3]))}else i=me.black;return t&&!h&&(n=i[0]/255,s=i[1]/255,r=i[2]/255,l=((e=Math.max(n,s,r))+(t=Math.min(n,s,r)))/2,e===t?o=a=0:(h=e-t,a=.5<l?h/(2-e-t):h/(e+t),o=e===n?(s-r)/h+(s<r?6:0):e===s?(r-n)/h+2:(n-s)/h+4,o*=60),i[0]=o+.5|0,i[1]=100*a+.5|0,i[2]=100*l+.5|0),i},ge="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(e in me)ge+="|"+e+"\\b";ge=new RegExp(ge+")","gi"),R.colorStringFilter=function(e){var t=e[0]+" "+e[1];ge.test(t)&&(t=-1!==t.indexOf("hsl(")||-1!==t.indexOf("hsla("),e[0]=i(e[0],t),e[1]=i(e[1],t)),ge.lastIndex=0},w.defaultStringFilter||(w.defaultStringFilter=R.colorStringFilter);function ve(e,t,r,o){if(null==e)return function(e){return e};var a,l=t?(e.match(ge)||[""])[0]:"",h=e.split(l).join("").match(D)||[],c=e.substr(0,e.indexOf(h[0])),p=")"===e.charAt(e.length-1)?")":"",u=-1!==e.indexOf(" ")?" ":",",d=h.length,m=0<d?h[0].replace(N,""):"";return d?a=t?function(e){var t,i,n,s;if("number"==typeof e)e+=m;else if(o&&q.test(e)){for(s=e.replace(q,"|").split("|"),n=0;n<s.length;n++)s[n]=a(s[n]);return s.join(",")}if(t=(e.match(ge)||[l])[0],n=(i=e.split(t).join("").match(D)||[]).length,d>n--)for(;++n<d;)i[n]=r?i[(n-1)/2|0]:h[n];return c+i.join(u)+u+t+p+(-1!==e.indexOf("inset")?" inset":"")}:function(e){var t,i,n;if("number"==typeof e)e+=m;else if(o&&q.test(e)){for(i=e.replace(q,"|").split("|"),n=0;n<i.length;n++)i[n]=a(i[n]);return i.join(",")}if(n=(t=e.match(","==u?D:s)||[]).length,d>n--)for(;++n<d;)t[n]=r?t[(n-1)/2|0]:h[n];return(c&&"none"!==e&&e.substr(0,e.indexOf(t[0]))||c)+t.join(u)+p}:function(e){return e}}function ye(h){return h=h.split(","),function(e,t,i,n,s,r,o){var a,l=(t+"").split(" ");for(o={},a=0;a<4;a++)o[h[a]]=l[a]=l[a]||l[(a-1)/2>>0];return n.parse(e,o,s,r)}}function be(e,t,i,n,s,r){return(r=new Te(e,t,i,n-i,s,-1,r)).b=i,r.e=r.xs0=n,r}var Se=(n._setPluginRatio=function(e){this.plugin.setRatio(e);for(var t,i,n,s,r,o=this.data,a=o.proxy,l=o.firstMPT;l;)t=a[l.v],l.r?t=l.r(t):t<1e-6&&-1e-6<t&&(t=0),l.t[l.p]=t,l=l._next;if(o.autoRotate&&(o.autoRotate.rotation=o.mod?o.mod.call(this._tween,a.rotation,this.t,this._tween):a.rotation),1===e||0===e)for(l=o.firstMPT,r=1===e?"e":"b";l;){if((i=l.t).type){if(1===i.type){for(s=i.xs0+i.s+i.xs1,n=1;n<i.l;n++)s+=i["xn"+n]+i["xs"+(n+1)];i[r]=s}}else i[r]=i.s+i.xs0;l=l._next}},function(e,t,i,n,s){this.t=e,this.p=t,this.v=i,this.r=s,n&&((n._prev=this)._next=n)}),Te=(n._parseToProxy=function(e,t,i,n,s,r){var o,a,l,h,c=n,p={},u={},d=i._transform,m=J;for(i._transform=null,J=t,n=s=i.parse(e,t,n,s),J=m,r&&(i._transform=d,c&&(c._prev=null,c._prev&&(c._prev._next=null)));n&&n!==c;){if(n.type<=1&&(u[a=n.p]=n.s+n.c,p[a]=n.s,r||(h=new Se(n,"s",a,h,n.r),n.c=0),1===n.type))for(o=n.l;0<--o;)u[a=n.p+"_"+(l="xn"+o)]=n.data[l],p[a]=n[l],r||(h=new Se(n,l,a,h,n.rxp[l]));n=n._next}return{proxy:p,end:u,firstMPT:h,pt:s}},n.CSSPropTween=function(e,t,i,n,s,r,o,a,l,h,c){this.t=e,this.p=t,this.s=i,this.c=n,this.n=o||t,e instanceof Te||p.push(this.n),this.r=a&&("function"==typeof a?a:Math.round),this.type=r||0,l&&(this.pr=l,u=!0),this.b=void 0===h?i:h,this.e=void 0===c?i+n:c,s&&((this._next=s)._prev=this)}),_e=R.parseComplex=function(e,t,i,n,s,r,o,a,l,h){i=i||r||"","function"==typeof n&&(n=n(O,E)),o=new Te(e,t,0,0,o,h?2:1,null,!1,a,i,n),n+="",s&&ge.test(n+i)&&(R.colorStringFilter(n=[i,n]),i=n[0],n=n[1]);var c,p,u,d,m,f,g,v,y,b,S,T,_=i.split(", ").join(",").split(" "),A=n.split(", ").join(",").split(" "),P=_.length,I=!1!==B;for(-1===n.indexOf(",")&&-1===i.indexOf(",")||(A=-1!==(n+i).indexOf("rgb")||-1!==(n+i).indexOf("hsl")?(_=_.join(" ").replace(q,", ").split(" "),A.join(" ").replace(q,", ").split(" ")):(_=_.join(" ").split(",").join(", ").split(" "),A.join(" ").split(",").join(", ").split(" ")),P=_.length),P!==A.length&&(P=(_=(r||"").split(" ")).length),o.plugin=l,o.setRatio=h,c=ge.lastIndex=0;c<P;c++)if(d=_[c],m=A[c]+"",(v=parseFloat(d))||0===v)o.appendXtra("",v,C(m,v),m.replace(F,""),I&&-1!==m.indexOf("px")&&Math.round,!0);else if(s&&ge.test(d))S=")"+((S=m.indexOf(")")+1)?m.substr(S):""),T=-1!==m.indexOf("hsl")&&se,y=m,d=fe(d,T),m=fe(m,T),(v=6<d.length+m.length)&&!se&&0===m[3]?(o["xs"+o.l]+=o.l?" transparent":"transparent",o.e=o.e.split(A[c]).join("transparent")):(se||(v=!1),T?o.appendXtra(y.substr(0,y.indexOf("hsl"))+(v?"hsla(":"hsl("),d[0],C(m[0],d[0]),",",!1,!0).appendXtra("",d[1],C(m[1],d[1]),"%,",!1).appendXtra("",d[2],C(m[2],d[2]),v?"%,":"%"+S,!1):o.appendXtra(y.substr(0,y.indexOf("rgb"))+(v?"rgba(":"rgb("),d[0],m[0]-d[0],",",Math.round,!0).appendXtra("",d[1],m[1]-d[1],",",Math.round).appendXtra("",d[2],m[2]-d[2],v?",":S,Math.round),v&&(d=d.length<4?1:d[3],o.appendXtra("",d,(m.length<4?1:m[3])-d,S,!1))),ge.lastIndex=0;else if(f=d.match(N)){if(!(g=m.match(F))||g.length!==f.length)return o;for(p=u=0;p<f.length;p++)b=f[p],y=d.indexOf(b,u),o.appendXtra(d.substr(u,y-u),Number(b),C(g[p],b),"",I&&"px"===d.substr(y+b.length,2)&&Math.round,0===p),u=y+b.length;o["xs"+o.l]+=d.substr(u)}else o["xs"+o.l]+=o.l||o["xs"+o.l]?" "+m:m;if(-1!==n.indexOf("=")&&o.data){for(S=o.xs0+o.data.s,c=1;c<o.l;c++)S+=o["xs"+c]+o.data["xn"+c];o.e=S+o["xs"+c]}return o.l||(o.type=-1,o.xs0=o.e),o.xfirst||o},Ae=9;for((e=Te.prototype).l=e.pr=0;0<--Ae;)e["xn"+Ae]=0,e["xs"+Ae]="";e.xs0="",e._next=e._prev=e.xfirst=e.data=e.plugin=e.setRatio=e.rxp=null,e.appendXtra=function(e,t,i,n,s,r){var o=this,a=o.l;return o["xs"+a]+=r&&(a||o["xs"+a])?" "+e:e||"",i||0===a||o.plugin?(o.l++,o.type=o.setRatio?2:1,o["xs"+o.l]=n||"",0<a?(o.data["xn"+a]=t+i,o.rxp["xn"+a]=s,o["xn"+a]=t,o.plugin||(o.xfirst=new Te(o,"xn"+a,t,i,o.xfirst||o,0,o.n,s,o.pr),o.xfirst.xs0=0)):(o.data={s:t+i},o.rxp={},o.s=t,o.c=i,o.r=s)):o["xs"+a]+=t+(n||""),o};function Pe(e,t){this.p=(t=t||{}).prefix&&A(e)||e,(d[e]=d[this.p]=this).format=t.formatter||ve(t.defaultValue,t.color,t.collapsible,t.multi),t.parser&&(this.parse=t.parser),this.clrs=t.color,this.multi=t.multi,this.keyword=t.keyword,this.dflt=t.defaultValue,this.allowFunc=t.allowFunc,this.pr=t.priority||0}var Ie=n._registerComplexSpecialProp=function(e,t,i){"object"!=typeof t&&(t={parser:i});var n,s=e.split(","),r=t.defaultValue;for(i=i||[r],n=0;n<s.length;n++)t.prefix=0===n&&t.prefix,t.defaultValue=i[n]||r,new Pe(s[n],t)},Ce=n._registerPluginProp=function(e){var l;d[e]||(l=e.charAt(0).toUpperCase()+e.substr(1)+"Plugin",Ie(e,{parser:function(e,t,i,n,s,r,o){var a=h.com.greensock.plugins[l];return a?(a._cssRegister(),d[i].parse(e,t,i,n,s,r,o)):(m("Error: "+l+" js file not loaded."),s)}}))};(e=Pe.prototype).parseComplex=function(e,t,i,n,s,r){var o,a,l,h,c,p,u=this.keyword;if(this.multi&&(q.test(i)||q.test(t)?(a=t.replace(q,"|").split("|"),l=i.replace(q,"|").split("|")):u&&(a=[t],l=[i])),l){for(h=(l.length>a.length?l:a).length,o=0;o<h;o++)t=a[o]=a[o]||this.dflt,i=l[o]=l[o]||this.dflt,u&&((c=t.indexOf(u))!==(p=i.indexOf(u))&&(-1===p?a[o]=a[o].split(u).join(""):-1===c&&(a[o]+=" "+u)));t=a.join(", "),i=l.join(", ")}return _e(e,this.p,t,i,this.clrs,this.dflt,n,this.pr,s,r)},e.parse=function(e,t,i,n,s,r,o){return this.parseComplex(e.style,this.format(le(e,this.p,P,!1,this.dflt)),this.format(t),s,r)},R.registerSpecialProp=function(e,a,l){Ie(e,{parser:function(e,t,i,n,s,r,o){s=new Te(e,i,0,0,s,2,i,!1,l);return s.plugin=r,s.setRatio=a(e,t,n._tween,i),s},priority:l})},R.useSVGTransformAttr=!0;function xe(e,t,i){var n,s=ee.createElementNS("http://www.w3.org/2000/svg",e),r=/([a-z])([A-Z])/g;for(n in i)s.setAttributeNS(null,n.replace(r,"$1-$2").toLowerCase(),i[n]);return t.appendChild(s),s}function Be(e,t,i,n,s,r){var o,a,l,h,c,p,u,d,m,f,g,v,y=e._gsTransform,b=Ee(e,!0);y&&(g=y.xOrigin,v=y.yOrigin),(!n||(o=n.split(" ")).length<2)&&(0===(u=e.getBBox()).x&&0===u.y&&u.width+u.height===0&&(u={x:parseFloat(e.hasAttribute("x")?e.getAttribute("x"):e.hasAttribute("cx")?e.getAttribute("cx"):0)||0,y:parseFloat(e.hasAttribute("y")?e.getAttribute("y"):e.hasAttribute("cy")?e.getAttribute("cy"):0)||0,width:0,height:0}),o=[(-1!==(t=de(t).split(" "))[0].indexOf("%")?parseFloat(t[0])/100*u.width:parseFloat(t[0]))+u.x,(-1!==t[1].indexOf("%")?parseFloat(t[1])/100*u.height:parseFloat(t[1]))+u.y]),i.xOrigin=h=parseFloat(o[0]),i.yOrigin=c=parseFloat(o[1]),n&&b!==Ye&&(p=b[0],u=b[1],d=b[2],m=b[3],f=b[4],t=b[5],(n=p*m-u*d)&&(l=h*(-u/n)+c*(p/n)-(p*t-u*f)/n,h=i.xOrigin=o[0]=a=h*(m/n)+c*(-d/n)+(d*t-m*f)/n,c=i.yOrigin=o[1]=l)),y&&(r&&(i.xOffset=y.xOffset,i.yOffset=y.yOffset,y=i),s||!1!==s&&!1!==R.defaultSmoothOrigin?(y.xOffset+=(a=h-g)*b[0]+(l=c-v)*b[2]-a,y.yOffset+=a*b[1]+l*b[3]-l):y.xOffset=y.yOffset=0),r||e.setAttribute("data-svg-origin",o.join(" "))}function Ee(e,t){var i,n,s,r,o,a,l,h=e._gsTransform||new We,c=e.style;if(De?n=le(e,Le,null,!0):e.currentStyle&&(n=(n=e.currentStyle.filter.match(j))&&4===n.length?[n[0].substr(4),Number(n[2].substr(4)),Number(n[1].substr(4)),n[3].substr(4),h.x||0,h.y||0].join(","):""),i=!n||"none"===n||"matrix(1, 0, 0, 1, 0, 0)"===n,De&&i&&!e.offsetParent&&e!==Ve&&(r=c.display,c.display="block",(l=e.parentNode)&&e.offsetParent||(o=1,a=e.nextSibling,Ve.appendChild(e)),i=!(n=le(e,Le,null,!0))||"none"===n||"matrix(1, 0, 0, 1, 0, 0)"===n,r?c.display=r:Qe(c,"display"),o&&(a?l.insertBefore(e,a):l?l.appendChild(e):Ve.removeChild(e))),(h.svg||e.getCTM&&Xe(e))&&(i&&-1!==(c[De]+"").indexOf("matrix")&&(n=c[De],i=0),s=e.getAttribute("transform"),i&&s&&(n="matrix("+(s=e.transform.baseVal.consolidate().matrix).a+","+s.b+","+s.c+","+s.d+","+s.e+","+s.f+")",i=0)),i)return Ye;for(s=(n||"").match(N)||[],Ae=s.length;-1<--Ae;)r=Number(s[Ae]),s[Ae]=(o=r-(r|=0))?(1e5*o+(o<0?-.5:.5)|0)/1e5+r:r;return t&&6<s.length?[s[0],s[1],s[4],s[5],s[12],s[13]]:s}function we(e){var t,i,n=this.data,s=(f=-n.rotation*Q)+n.skewX*Q,r=(Math.cos(f)*n.scaleX*1e5|0)/1e5,o=(Math.sin(f)*n.scaleX*1e5|0)/1e5,a=(Math.sin(s)*-n.scaleY*1e5|0)/1e5,l=(Math.cos(s)*n.scaleY*1e5|0)/1e5,h=this.t.style,c=this.t.currentStyle;if(c){i=o,o=-a,a=-i,t=c.filter,h.filter="";var p=this.t.offsetWidth,u=this.t.offsetHeight,d="absolute"!==c.position,m="progid:DXImageTransform.Microsoft.Matrix(M11="+r+", M12="+o+", M21="+a+", M22="+l,f=n.x+p*n.xPercent/100,s=n.y+u*n.yPercent/100;if(null!=n.ox&&(f+=(b=(n.oxp?p*n.ox*.01:n.ox)-p/2)-(b*r+(S=(n.oyp?u*n.oy*.01:n.oy)-u/2)*o),s+=S-(b*a+S*l)),d?m+=", Dx="+((b=p/2)-(b*r+(S=u/2)*o)+f)+", Dy="+(S-(b*a+S*l)+s)+")":m+=", sizingMethod='auto expand')",-1!==t.indexOf("DXImageTransform.Microsoft.Matrix(")?h.filter=t.replace(z,m):h.filter=m+" "+t,0!==e&&1!==e||1!=r||0!=o||0!=a||1!=l||(d&&-1===m.indexOf("Dx=0, Dy=0")||G.test(t)&&100!==parseFloat(RegExp.$1)||-1===t.indexOf(t.indexOf("Alpha"))&&h.removeAttribute("filter")),!d){var g,v,y=T<8?1:-1,b=n.ieOffsetX||0,S=n.ieOffsetY||0;for(n.ieOffsetX=Math.round((p-((r<0?-r:r)*p+(o<0?-o:o)*u))/2+f),n.ieOffsetY=Math.round((u-((l<0?-l:l)*u+(a<0?-a:a)*p))/2+s),Ae=0;Ae<4;Ae++)v=(i=-1!==(v=c[g=ue[Ae]]).indexOf("px")?parseFloat(v):he(this.t,g,parseFloat(v),v.replace(k,""))||0)!==n[g]?Ae<2?-n.ieOffsetX:-n.ieOffsetY:Ae<2?b-n.ieOffsetX:S-n.ieOffsetY,h[g]=(n[g]=Math.round(i-v*(0===Ae||2===Ae?1:y)))+"px"}}}var Re,Me,Oe,Ne,Fe="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),De=A("transform"),Le=re+"transform",ke=A("transformOrigin"),Ge=null!==A("perspective"),We=n.Transform=function(){this.perspective=parseFloat(R.defaultTransformPerspective)||0,this.force3D=!1!==R.defaultForce3D&&Ge&&(R.defaultForce3D||"auto")},Ue=_gsScope.SVGElement,Ve=ee.documentElement||{},He=(Ne=T||/Android/i.test(ne)&&!_gsScope.chrome,ee.createElementNS&&Ve.appendChild&&!Ne&&(Me=xe("svg",Ve),ne=(Oe=xe("rect",Me,{width:100,height:50,x:100})).getBoundingClientRect().width,Oe.style[ke]="50% 50%",Oe.style[De]="scaleX(0.5)",Ne=ne===Oe.getBoundingClientRect().width&&!(M&&Ge),Ve.removeChild(Me)),Ne),$e=function(e){var t,i=a("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,s=this.nextSibling,r=this.style.cssText;if(Ve.appendChild(i),i.appendChild(this),this.style.display="block",e)try{t=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=$e}catch(e){}else this._originalGetBBox&&(t=this._originalGetBBox());return s?n.insertBefore(this,s):n.appendChild(this),Ve.removeChild(i),this.style.cssText=r,t},Xe=function(e){return!(!Ue||!e.getCTM||e.parentNode&&!e.ownerSVGElement||!function(t){try{return t.getBBox()}catch(e){return $e.call(t,!0)}}(e))},Ye=[1,0,0,1,0,0],je=n.getTransform=function(e,t,i,n){if(e._gsTransform&&i&&!n)return e._gsTransform;var s,r,o,a,l,h,c,p,u,d,m,f,g,v,y,b,S,T,_,A,P,I,C=i&&e._gsTransform||new We,x=C.scaleX<0,B=Ge&&(parseFloat(le(e,ke,t,!1,"0 0 0").split(" ")[2])||C.zOrigin)||0,E=parseFloat(R.defaultTransformPerspective)||0;if(C.svg=!(!e.getCTM||!Xe(e)),C.svg&&(Be(e,le(e,ke,t,!1,"50% 50%")+"",C,e.getAttribute("data-svg-origin")),Re=R.useSVGTransformAttr||He),(r=Ee(e))!==Ye)for(s in 16===r.length?(A=r[0],I=r[1],p=r[2],u=r[3],P=r[4],d=r[5],m=r[6],f=r[7],g=r[8],v=r[9],y=r[10],b=r[12],T=r[13],_=r[14],S=r[11],t=Math.atan2(m,y),C.zOrigin&&(b=g*(_=-C.zOrigin)-r[12],T=v*_-r[13],_=y*_+C.zOrigin-r[14]),C.rotationX=t*Z,t&&(o=P*(h=Math.cos(-t))+g*(c=Math.sin(-t)),a=d*h+v*c,l=m*h+y*c,g=P*-c+g*h,v=d*-c+v*h,y=m*-c+y*h,S=f*-c+S*h,P=o,d=a,m=l),t=Math.atan2(-p,y),C.rotationY=t*Z,t&&(a=I*(h=Math.cos(-t))-v*(c=Math.sin(-t)),l=p*h-y*c,v=I*c+v*h,y=p*c+y*h,S=u*c+S*h,A=o=A*h-g*c,I=a,p=l),t=Math.atan2(I,A),C.rotation=t*Z,t&&(o=A*(h=Math.cos(t))+I*(c=Math.sin(t)),a=P*h+d*c,l=g*h+v*c,I=I*h-A*c,d=d*h-P*c,v=v*h-g*c,A=o,P=a,g=l),C.rotationX&&359.9<Math.abs(C.rotationX)+Math.abs(C.rotation)&&(C.rotationX=C.rotation=0,C.rotationY=180-C.rotationY),t=Math.atan2(P,d),C.scaleX=(1e5*Math.sqrt(A*A+I*I+p*p)+.5|0)/1e5,C.scaleY=(1e5*Math.sqrt(d*d+m*m)+.5|0)/1e5,C.scaleZ=(1e5*Math.sqrt(g*g+v*v+y*y)+.5|0)/1e5,A/=C.scaleX,P/=C.scaleY,I/=C.scaleX,d/=C.scaleY,2e-5<Math.abs(t)?(C.skewX=t*Z,P=0,"simple"!==C.skewType&&(C.scaleY*=1/Math.cos(t))):C.skewX=0,C.perspective=S?1/(S<0?-S:S):0,C.x=b,C.y=T,C.z=_,C.svg&&(C.x-=C.xOrigin-(C.xOrigin*A-C.yOrigin*P),C.y-=C.yOrigin-(C.yOrigin*I-C.xOrigin*d))):Ge&&!n&&r.length&&C.x===r[4]&&C.y===r[5]&&(C.rotationX||C.rotationY)||(_=(T=6<=r.length)?r[0]:1,A=r[1]||0,P=r[2]||0,I=T?r[3]:1,C.x=r[4]||0,C.y=r[5]||0,d=Math.sqrt(_*_+A*A),n=Math.sqrt(I*I+P*P),T=_||A?Math.atan2(A,_)*Z:C.rotation||0,r=P||I?Math.atan2(P,I)*Z+T:C.skewX||0,C.scaleX=d,C.scaleY=n,C.rotation=T,C.skewX=r,Ge&&(C.rotationX=C.rotationY=C.z=0,C.perspective=E,C.scaleZ=1),C.svg&&(C.x-=C.xOrigin-(C.xOrigin*_+C.yOrigin*P),C.y-=C.yOrigin-(C.xOrigin*A+C.yOrigin*I))),90<Math.abs(C.skewX)&&Math.abs(C.skewX)<270&&(x?(C.scaleX*=-1,C.skewX+=C.rotation<=0?180:-180,C.rotation+=C.rotation<=0?180:-180):(C.scaleY*=-1,C.skewX+=C.skewX<=0?180:-180)),C.zOrigin=B,C)C[s]<2e-5&&-2e-5<C[s]&&(C[s]=0);return i&&((e._gsTransform=C).svg&&(Re&&e.style[De]?w.delayedCall(.001,function(){Qe(e.style,De)}):!Re&&e.getAttribute("transform")&&w.delayedCall(.001,function(){e.removeAttribute("transform")}))),C},ze=n.set3DTransformRatio=n.setTransformRatio=function(e){var t,i,n,s,r,o,a,l,h,c,p,u,d,m,f=this.data,g=this.t.style,v=f.rotation,y=f.rotationX,b=f.rotationY,S=f.scaleX,T=f.scaleY,_=f.scaleZ,A=f.x,P=f.y,I=f.z,C=f.svg,x=f.perspective,B=f.force3D,E=f.skewY,w=f.skewX;if(E&&(w+=E,v+=E),!((1!==e&&0!==e||"auto"!==B||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&B||I||x||b||y||1!==_)||Re&&C||!Ge)v||w||C?(v*=Q,m=w*Q,i=Math.cos(v)*S,s=Math.sin(v)*S,n=Math.sin(v-m)*-T,r=Math.cos(v-m)*T,m&&"simple"===f.skewType&&(t=Math.tan(m-E*Q),n*=t=Math.sqrt(1+t*t),r*=t,E&&(t=Math.tan(E*Q),i*=t=Math.sqrt(1+t*t),s*=t)),C&&(A+=f.xOrigin-(f.xOrigin*i+f.yOrigin*n)+f.xOffset,P+=f.yOrigin-(f.xOrigin*s+f.yOrigin*r)+f.yOffset,Re&&(f.xPercent||f.yPercent)&&(c=this.t.getBBox(),A+=.01*f.xPercent*c.width,P+=.01*f.yPercent*c.height),A<(c=1e-6)&&-c<A&&(A=0),P<c&&-c<P&&(P=0)),d=(1e5*i|0)/1e5+","+(1e5*s|0)/1e5+","+(1e5*n|0)/1e5+","+(1e5*r|0)/1e5+","+A+","+P+")",C&&Re?this.t.setAttribute("transform","matrix("+d):g[De]=(f.xPercent||f.yPercent?"translate("+f.xPercent+"%,"+f.yPercent+"%) matrix(":"matrix(")+d):g[De]=(f.xPercent||f.yPercent?"translate("+f.xPercent+"%,"+f.yPercent+"%) matrix(":"matrix(")+S+",0,0,"+T+","+A+","+P+")";else{if(M&&(S<(c=1e-4)&&-c<S&&(S=_=2e-5),T<c&&-c<T&&(T=_=2e-5),!x||f.z||f.rotationX||f.rotationY||(x=0)),v||w)v*=Q,p=i=Math.cos(v),u=s=Math.sin(v),w&&(v-=w*Q,p=Math.cos(v),u=Math.sin(v),"simple"===f.skewType&&(t=Math.tan((w-E)*Q),p*=t=Math.sqrt(1+t*t),u*=t,f.skewY&&(t=Math.tan(E*Q),i*=t=Math.sqrt(1+t*t),s*=t))),n=-u,r=p;else{if(!(b||y||1!==_||x||C))return void(g[De]=(f.xPercent||f.yPercent?"translate("+f.xPercent+"%,"+f.yPercent+"%) translate3d(":"translate3d(")+A+"px,"+P+"px,"+I+"px)"+(1!==S||1!==T?" scale("+S+","+T+")":""));i=r=1,n=s=0}a=1,m=B=e=o=l=h=0,w=x?-1/x:0,E=f.zOrigin,c=1e-6,(v=b*Q)&&(p=Math.cos(v),l=w*(e=-(u=Math.sin(v))),m=i*u,B=s*u,w*=a=p,i*=p,s*=p),(v=y*Q)&&(t=n*(p=Math.cos(v))+m*(u=Math.sin(v)),v=r*p+B*u,o=a*u,h=w*u,m=n*-u+m*p,B=r*-u+B*p,a*=p,w*=p,n=t,r=v),1!==_&&(m*=_,B*=_,a*=_,w*=_),1!==T&&(n*=T,r*=T,o*=T,h*=T),1!==S&&(i*=S,s*=S,e*=S,l*=S),(E||C)&&(E&&(A+=m*-E,P+=B*-E,I+=a*-E+E),C&&(A+=f.xOrigin-(f.xOrigin*i+f.yOrigin*n)+f.xOffset,P+=f.yOrigin-(f.xOrigin*s+f.yOrigin*r)+f.yOffset),A<c&&-c<A&&(A="0"),P<c&&-c<P&&(P="0"),I<c&&-c<I&&(I=0)),d=f.xPercent||f.yPercent?"translate("+f.xPercent+"%,"+f.yPercent+"%) matrix3d(":"matrix3d(",d+=(i<c&&-c<i?"0":i)+","+(s<c&&-c<s?"0":s)+","+(e<c&&-c<e?"0":e),d+=","+(l<c&&-c<l?"0":l)+","+(n<c&&-c<n?"0":n)+","+(r<c&&-c<r?"0":r),y||b||1!==_?(d+=","+(o<c&&-c<o?"0":o)+","+(h<c&&-c<h?"0":h)+","+(m<c&&-c<m?"0":m),d+=","+(B<c&&-c<B?"0":B)+","+(a<c&&-c<a?"0":a)+","+(w<c&&-c<w?"0":w)+","):d+=",0,0,0,0,1,0,",g[De]=d+=A+","+P+","+I+","+(x?1+-I/x:1)+")"}};(e=We.prototype).x=e.y=e.z=e.skewX=e.skewY=e.rotation=e.rotationX=e.rotationY=e.zOrigin=e.xPercent=e.yPercent=e.xOffset=e.yOffset=0,e.scaleX=e.scaleY=e.scaleZ=1,Ie("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(e,t,i,n,s,r,o){if(n._lastParsedTransform===o)return s;var a=(n._lastParsedTransform=o).scale&&"function"==typeof o.scale?o.scale:0;a&&(o.scale=a(O,e));var l,h,c,p,u,d,m,f,g=e._gsTransform,v=e.style,y=Fe.length,b=o,S={},T="transformOrigin",_=je(e,P,!0,b.parseTransform),A=b.transform&&("function"==typeof b.transform?b.transform(O,E):b.transform);if(_.skewType=b.skewType||_.skewType||R.defaultSkewType,n._transform=_,"rotationZ"in b&&(b.rotation=b.rotationZ),A&&"string"==typeof A&&De)(h=te.style)[De]=A,h.display="block",h.position="absolute",-1!==A.indexOf("%")&&(h.width=le(e,"width"),h.height=le(e,"height")),ee.body.appendChild(te),l=je(te,null,!1),"simple"===_.skewType&&(l.scaleY*=Math.cos(l.skewX*Q)),_.svg&&(u=_.xOrigin,d=_.yOrigin,l.x-=_.xOffset,l.y-=_.yOffset,(b.transformOrigin||b.svgOrigin)&&(A={},Be(e,de(b.transformOrigin),A,b.svgOrigin,b.smoothOrigin,!0),u=A.xOrigin,d=A.yOrigin,l.x-=A.xOffset-_.xOffset,l.y-=A.yOffset-_.yOffset),(u||d)&&(m=Ee(te,!0),l.x-=u-(u*m[0]+d*m[2]),l.y-=d-(u*m[1]+d*m[3]))),ee.body.removeChild(te),l.perspective||(l.perspective=_.perspective),null!=b.xPercent&&(l.xPercent=I(b.xPercent,_.xPercent)),null!=b.yPercent&&(l.yPercent=I(b.yPercent,_.yPercent));else if("object"==typeof b){if(l={scaleX:I(null!=b.scaleX?b.scaleX:b.scale,_.scaleX),scaleY:I(null!=b.scaleY?b.scaleY:b.scale,_.scaleY),scaleZ:I(b.scaleZ,_.scaleZ),x:I(b.x,_.x),y:I(b.y,_.y),z:I(b.z,_.z),xPercent:I(b.xPercent,_.xPercent),yPercent:I(b.yPercent,_.yPercent),perspective:I(b.transformPerspective,_.perspective)},null!=(p=b.directionalRotation))if("object"==typeof p)for(h in p)b[h]=p[h];else b.rotation=p;"string"==typeof b.x&&-1!==b.x.indexOf("%")&&(l.x=0,l.xPercent=I(b.x,_.xPercent)),"string"==typeof b.y&&-1!==b.y.indexOf("%")&&(l.y=0,l.yPercent=I(b.y,_.yPercent)),l.rotation=x("rotation"in b?b.rotation:"shortRotation"in b?b.shortRotation+"_short":_.rotation,_.rotation,"rotation",S),Ge&&(l.rotationX=x("rotationX"in b?b.rotationX:"shortRotationX"in b?b.shortRotationX+"_short":_.rotationX||0,_.rotationX,"rotationX",S),l.rotationY=x("rotationY"in b?b.rotationY:"shortRotationY"in b?b.shortRotationY+"_short":_.rotationY||0,_.rotationY,"rotationY",S)),l.skewX=x(b.skewX,_.skewX),l.skewY=x(b.skewY,_.skewY)}for(Ge&&null!=b.force3D&&(_.force3D=b.force3D,c=!0),(m=_.force3D||_.z||_.rotationX||_.rotationY||l.z||l.rotationX||l.rotationY||l.perspective)||null==b.scale||(l.scaleZ=1);-1<--y;)(1e-6<(A=l[f=Fe[y]]-_[f])||A<-1e-6||null!=b[f]||null!=J[f])&&(c=!0,s=new Te(_,f,_[f],A,s),f in S&&(s.e=S[f]),s.xs0=0,s.plugin=r,n._overwriteProps.push(s.n));return A="function"==typeof b.transformOrigin?b.transformOrigin(O,E):b.transformOrigin,_.svg&&(A||b.svgOrigin)&&(u=_.xOffset,d=_.yOffset,Be(e,de(A),l,b.svgOrigin,b.smoothOrigin),s=be(_,"xOrigin",(g?_:l).xOrigin,l.xOrigin,s,T),s=be(_,"yOrigin",(g?_:l).yOrigin,l.yOrigin,s,T),u===_.xOffset&&d===_.yOffset||(s=be(_,"xOffset",g?u:_.xOffset,_.xOffset,s,T),s=be(_,"yOffset",g?d:_.yOffset,_.yOffset,s,T)),A="0px 0px"),(A||Ge&&m&&_.zOrigin)&&(De?(c=!0,f=ke,A||(A=(A=(le(e,f,P,!1,"50% 50%")+"").split(" "))[0]+" "+A[1]+" "+_.zOrigin+"px"),A+="",(s=new Te(v,f,0,0,s,-1,T)).b=v[f],s.plugin=r,Ge?(h=_.zOrigin,A=A.split(" "),_.zOrigin=(2<A.length?parseFloat(A[2]):h)||0,s.xs0=s.e=A[0]+" "+(A[1]||"50%")+" 0px",(s=new Te(_,"zOrigin",0,0,s,-1,s.n)).b=h,s.xs0=s.e=_.zOrigin):s.xs0=s.e=A):de(A+"",_)),c&&(n._transformType=_.svg&&Re||!m&&3!==this._transformType?2:3),a&&(o.scale=a),s},allowFunc:!0,prefix:!0}),Ie("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),Ie("clipPath",{defaultValue:"inset(0%)",prefix:!0,multi:!0,formatter:ve("inset(0% 0% 0% 0%)",!1,!0)}),Ie("borderRadius",{defaultValue:"0px",parser:function(e,t,i,n,s,r){t=this.format(t);for(var o,a,l,h,c,p,u,d,m,f,g=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],v=e.style,y=parseFloat(e.offsetWidth),b=parseFloat(e.offsetHeight),S=t.split(" "),T=0;T<g.length;T++)this.p.indexOf("border")&&(g[T]=A(g[T])),-1!==(l=a=le(e,g[T],P,!1,"0px")).indexOf(" ")&&(l=(a=l.split(" "))[0],a=a[1]),h=o=S[T],m=parseFloat(l),f=l.substr((m+"").length),(p=""===(p=(u="="===h.charAt(1))?(c=parseInt(h.charAt(0)+"1",10),h=h.substr(2),c*=parseFloat(h),h.substr((c+"").length-(c<0?1:0))||""):(c=parseFloat(h),h.substr((c+"").length)))?_[i]||f:p)!==f&&(d=he(e,"borderLeft",m,f),m=he(e,"borderTop",m,f),a="%"===p?(l=d/y*100+"%",m/b*100+"%"):"em"===p?(l=d/(f=he(e,"borderLeft",1,"em"))+"em",m/f+"em"):(l=d+"px",m+"px"),u&&(h=parseFloat(l)+c+p,o=parseFloat(a)+c+p)),s=_e(v,g[T],l+" "+a,h+" "+o,!1,"0px",s);return s},prefix:!0,formatter:ve("0px 0px 0px 0px",!1,!0)}),Ie("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(e,t,i,n,s,r){return _e(e.style,i,this.format(le(e,i,P,!1,"0px 0px")),this.format(t),!1,"0px",s)},prefix:!0,formatter:ve("0px 0px",!1,!0)}),Ie("backgroundPosition",{defaultValue:"0 0",parser:function(e,t,i,n,s,r){var o,a,l,h,c,p,u="background-position",d=P||f(e),m=this.format((d?T?d.getPropertyValue(u+"-x")+" "+d.getPropertyValue(u+"-y"):d.getPropertyValue(u):e.currentStyle.backgroundPositionX+" "+e.currentStyle.backgroundPositionY)||"0 0"),t=this.format(t);if(-1!==m.indexOf("%")!=(-1!==t.indexOf("%"))&&t.split(",").length<2&&((p=le(e,"backgroundImage").replace(X,""))&&"none"!==p)){for(o=m.split(" "),a=t.split(" "),ie.setAttribute("src",p),l=2;-1<--l;)(h=-1!==(m=o[l]).indexOf("%"))!=(-1!==a[l].indexOf("%"))&&(c=0===l?e.offsetWidth-ie.width:e.offsetHeight-ie.height,o[l]=h?parseFloat(m)/100*c+"px":parseFloat(m)/c*100+"%");m=o.join(" ")}return this.parseComplex(e.style,m,t,s,r)},formatter:de}),Ie("backgroundSize",{defaultValue:"0 0",formatter:function(e){return"co"===(e+="").substr(0,2)?e:de(-1===e.indexOf(" ")?e+" "+e:e)}}),Ie("perspective",{defaultValue:"0px",prefix:!0}),Ie("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),Ie("transformStyle",{prefix:!0}),Ie("backfaceVisibility",{prefix:!0}),Ie("userSelect",{prefix:!0}),Ie("margin",{parser:ye("marginTop,marginRight,marginBottom,marginLeft")}),Ie("padding",{parser:ye("paddingTop,paddingRight,paddingBottom,paddingLeft")}),Ie("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(e,t,i,n,s,r){var o,a;return t=T<9?(o=e.currentStyle,a=T<8?" ":",",o="rect("+o.clipTop+a+o.clipRight+a+o.clipBottom+a+o.clipLeft+")",this.format(t).split(",").join(a)):(o=this.format(le(e,this.p,P,!1,this.dflt)),this.format(t)),this.parseComplex(e.style,o,t,s,r)}}),Ie("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),Ie("autoRound,strictUnits",{parser:function(e,t,i,n,s){return s}}),Ie("border",{defaultValue:"0px solid #000",parser:function(e,t,i,n,s,r){var o=le(e,"borderTopWidth",P,!1,"0px"),a=this.format(t).split(" "),t=a[0].replace(k,"");return"px"!==t&&(o=parseFloat(o)/he(e,"borderTopWidth",1,t)+t),this.parseComplex(e.style,this.format(o+" "+le(e,"borderTopStyle",P,!1,"solid")+" "+le(e,"borderTopColor",P,!1,"#000")),a.join(" "),s,r)},color:!0,formatter:function(e){var t=e.split(" ");return t[0]+" "+(t[1]||"solid")+" "+(e.match(ge)||["#000"])[0]}}),Ie("borderWidth",{parser:ye("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),Ie("float,cssFloat,styleFloat",{parser:function(e,t,i,n,s,r){var o=e.style,e="cssFloat"in o?"cssFloat":"styleFloat";return new Te(o,e,0,0,s,-1,i,!1,0,o[e],t)}});function qe(e){var t,i=this.t,n=i.filter||le(this.data,"filter")||"",e=this.s+this.c*e|0;(t=100==e?-1===n.indexOf("atrix(")&&-1===n.indexOf("radient(")&&-1===n.indexOf("oader(")?(i.removeAttribute("filter"),!le(this.data,"filter")):(i.filter=n.replace(U,""),!0):t)||(this.xn1&&(i.filter=n=n||"alpha(opacity="+e+")"),-1===n.indexOf("pacity")?0==e&&this.xn1||(i.filter=n+" alpha(opacity="+e+")"):i.filter=n.replace(G,"opacity="+e))}Ie("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(e,t,i,n,s,r){var o=parseFloat(le(e,"opacity",P,!1,"1")),a=e.style,l="autoAlpha"===i;return"string"==typeof t&&"="===t.charAt(1)&&(t=("-"===t.charAt(0)?-1:1)*parseFloat(t.substr(2))+o),l&&1===o&&"hidden"===le(e,"visibility",P)&&0!==t&&(o=0),se?s=new Te(a,"opacity",o,t-o,s):((s=new Te(a,"opacity",100*o,100*(t-o),s)).xn1=l?1:0,a.zoom=1,s.type=2,s.b="alpha(opacity="+s.s+")",s.e="alpha(opacity="+(s.s+s.c)+")",s.data=e,s.plugin=r,s.setRatio=qe),l&&((s=new Te(a,"visibility",0,0,s,-1,null,!1,0,0!==o?"inherit":"hidden",0===t?"hidden":"inherit")).xs0="inherit",n._overwriteProps.push(s.n),n._overwriteProps.push(i)),s}});function Ke(e){if(this.t._gsClassPT=this,1===e||0===e){this.t.setAttribute("class",0===e?this.b:this.e);for(var t=this.data,i=this.t.style;t;)t.v?i[t.p]=t.v:Qe(i,t.p),t=t._next;1===e&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)}var Qe=function(e,t){t&&(e.removeProperty?("ms"!==t.substr(0,2)&&"webkit"!==t.substr(0,6)||(t="-"+t),e.removeProperty(t.replace(H,"-$1").toLowerCase())):e.removeAttribute(t))};Ie("className",{parser:function(e,t,i,n,s,r,o){var a,l,h,c=e.getAttribute("class")||"",p=e.style.cssText;if((s=n._classNamePT=new Te(e,i,0,0,s,2)).setRatio=Ke,s.pr=-11,u=!0,s.b=c,a=g(e,P),i=e._gsClassPT){for(l={},h=i.data;h;)l[h.p]=1,h=h._next;i.setRatio(1)}return(e._gsClassPT=s).e="="!==t.charAt(1)?t:c.replace(new RegExp("(?:\\s|^)"+t.substr(2)+"(?![\\w-])"),"")+("+"===t.charAt(0)?" "+t.substr(2):""),e.setAttribute("class",s.e),o=v(e,a,g(e),o,l),e.setAttribute("class",c),s.data=o.firstMPT,e.style.cssText!==p&&(e.style.cssText=p),s.xfirst=n.parse(e,o.difs,s,r)}});function Ze(e){if((1===e||0===e)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var t,i,n,s,r=this.t.style,o=d.transform.parse;if("all"===this.e)s=!(r.cssText="");else for(n=(t=this.e.split(" ").join("").split(",")).length;-1<--n;)i=t[n],d[i]&&(d[i].parse===o?s=!0:i="transformOrigin"===i?ke:d[i].p),Qe(r,i);s&&(Qe(r,De),(e=this.t._gsTransform)&&(e.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}}for(Ie("clearProps",{parser:function(e,t,i,n,s){return(s=new Te(e,i,0,0,s,2)).setRatio=Ze,s.e=t,s.pr=-10,s.data=n._tween,u=!0,s}}),e="bezier,throwProps,physicsProps,physics2D".split(","),Ae=e.length;Ae--;)Ce(e[Ae]);(e=R.prototype)._firstPT=e._lastParsedTransform=e._transform=null,e._onInitTween=function(e,t,i,n){if(!e.nodeType)return!1;this._target=E=e,this._tween=i,this._vars=t,O=n,B=t.autoRound,u=!1,_=t.suffixMap||R.suffixMap,P=f(e),p=this._overwriteProps;var s,r,o,a,l,h,n=e.style;if(y&&""===n.zIndex&&("auto"!==(h=le(e,"zIndex",P))&&""!==h||this._addLazySet(n,"zIndex",0)),"string"==typeof t&&(o=n.cssText,h=g(e,P),n.cssText=o+";"+t,h=v(e,h,g(e)).difs,!se&&W.test(t)&&(h.opacity=parseFloat(RegExp.$1)),t=h,n.cssText=o),t.className?this._firstPT=s=d.className.parse(e,t.className,"className",this,null,null,t):this._firstPT=s=this.parse(e,t,null),this._transformType){for(h=3===this._transformType,De?b&&(y=!0,""===n.zIndex&&("auto"!==(t=le(e,"zIndex",P))&&""!==t||this._addLazySet(n,"zIndex",0)),S&&this._addLazySet(n,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(h?"visible":"hidden"))):n.zoom=1,r=s;r&&r._next;)r=r._next;n=new Te(e,"transform",0,0,null,2),this._linkCSSP(n,null,r),n.setRatio=De?ze:we,n.data=this._transform||je(e,P,!0),n.tween=i,n.pr=-1,p.pop()}if(u){for(;s;){for(l=s._next,r=o;r&&r.pr>s.pr;)r=r._next;(s._prev=r?r._prev:a)?s._prev._next=s:o=s,(s._next=r)?r._prev=s:a=s,s=l}this._firstPT=o}return!0},e.parse=function(e,t,i,n){var s,r,o,a,l,h,c,p,u=e.style;for(s in t){if(l=t[s],p=d[s],"function"!=typeof l||p&&p.allowFunc||(l=l(O,E)),p)i=p.parse(e,l,s,this,i,n,t);else{if("--"===s.substr(0,2)){this._tween._propLookup[s]=this._addTween.call(this._tween,e.style,"setProperty",f(e).getPropertyValue(s)+"",l+"",s,!1,s);continue}a=le(e,s,P)+"",c="string"==typeof l,"color"===s||"fill"===s||"stroke"===s||-1!==s.indexOf("Color")||c&&V.test(l)?(c||(l=(3<(l=fe(l)).length?"rgba(":"rgb(")+l.join(",")+")"),i=_e(u,s,a,l,!0,"transparent",i,0,n)):c&&K.test(l)?i=_e(u,s,a,l,!0,null,i,0,n):(h=(r=parseFloat(a))||0===r?a.substr((r+"").length):"",""!==a&&"auto"!==a||(h="width"===s||"height"===s?(r=function(e,t,i){if("svg"===(e.nodeName+"").toLowerCase())return(i||f(e))[t]||0;if(e.getCTM&&Xe(e))return e.getBBox()[t]||0;var n=parseFloat("width"===t?e.offsetWidth:e.offsetHeight),s=pe[t],r=s.length;for(i=i||f(e);-1<--r;)n-=parseFloat(le(e,"padding"+s[r],i,!0))||0,n-=parseFloat(le(e,"border"+s[r]+"Width",i,!0))||0;return n}(e,s,P),"px"):"left"===s||"top"===s?(r=ce(e,s,P),"px"):(r="opacity"!==s?0:1,"")),""===(c=(p=c&&"="===l.charAt(1))?(o=parseInt(l.charAt(0)+"1",10),l=l.substr(2),o*=parseFloat(l),l.replace(k,"")):(o=parseFloat(l),c?l.replace(k,""):""))&&(c=s in _?_[s]:h),l=o||0===o?(p?o+r:o)+c:t[s],h===c||""===c&&"lineHeight"!==s||!o&&0!==o||!r||(r=he(e,s,r,h),"%"===c?(r/=he(e,s,100,"%")/100,!0!==t.strictUnits&&(a=r+"%")):"em"===c||"rem"===c||"vw"===c||"vh"===c?r/=he(e,s,1,c):"px"!==c&&(o=he(e,s,o,c),c="px"),p&&(o||0===o)&&(l=o+r+c)),p&&(o+=r),!r&&0!==r||!o&&0!==o?void 0!==u[s]&&(l||l+""!="NaN"&&null!=l)?(i=new Te(u,s,o||r||0,0,i,-1,s,!1,0,a,l)).xs0="none"!==l||"display"!==s&&-1===s.indexOf("Style")?l:a:m("invalid "+s+" tween value: "+t[s]):(i=new Te(u,s,r,o-r,i,0,s,!1!==B&&("px"===c||"zIndex"===s),0,a,l)).xs0=c)}n&&i&&!i.plugin&&(i.plugin=n)}return i},e.setRatio=function(e){var t,i,n,s=this._firstPT;if(1!==e||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(e||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;s;){if(t=s.c*e+s.s,s.r?t=s.r(t):t<1e-6&&-1e-6<t&&(t=0),s.type)if(1===s.type)if(2===(n=s.l))s.t[s.p]=s.xs0+t+s.xs1+s.xn1+s.xs2;else if(3===n)s.t[s.p]=s.xs0+t+s.xs1+s.xn1+s.xs2+s.xn2+s.xs3;else if(4===n)s.t[s.p]=s.xs0+t+s.xs1+s.xn1+s.xs2+s.xn2+s.xs3+s.xn3+s.xs4;else if(5===n)s.t[s.p]=s.xs0+t+s.xs1+s.xn1+s.xs2+s.xn2+s.xs3+s.xn3+s.xs4+s.xn4+s.xs5;else{for(i=s.xs0+t+s.xs1,n=1;n<s.l;n++)i+=s["xn"+n]+s["xs"+(n+1)];s.t[s.p]=i}else-1===s.type?s.t[s.p]=s.xs0:s.setRatio&&s.setRatio(e);else s.t[s.p]=t+s.xs0;s=s._next}else for(;s;)2!==s.type?s.t[s.p]=s.b:s.setRatio(e),s=s._next;else for(;s;){if(2!==s.type)if(s.r&&-1!==s.type)if(t=s.r(s.s+s.c),s.type){if(1===s.type){for(n=s.l,i=s.xs0+t+s.xs1,n=1;n<s.l;n++)i+=s["xn"+n]+s["xs"+(n+1)];s.t[s.p]=i}}else s.t[s.p]=t+s.xs0;else s.t[s.p]=s.e;else s.setRatio(e);s=s._next}},e._enableTransforms=function(e){this._transform=this._transform||je(this._target,P,!0),this._transformType=this._transform.svg&&Re||!e&&3!==this._transformType?2:3};function Je(e){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)}e._addLazySet=function(e,t,i){t=this._firstPT=new Te(e,t,0,0,this._firstPT,2);t.e=i,t.setRatio=Je,t.data=this},e._linkCSSP=function(e,t,i,n){return e&&(t&&(t._prev=e),e._next&&(e._next._prev=e._prev),e._prev?e._prev._next=e._next:this._firstPT===e&&(this._firstPT=e._next,n=!0),i?i._next=e:n||null!==this._firstPT||(this._firstPT=e),e._next=t,e._prev=i),e},e._mod=function(e){for(var t=this._firstPT;t;)"function"==typeof e[t.p]&&(t.r=e[t.p]),t=t._next},e._kill=function(e){var t,i,n,s=e;if(e.autoAlpha||e.alpha){for(i in s={},e)s[i]=e[i];s.opacity=1,s.autoAlpha&&(s.visibility=1)}for(e.className&&(t=this._classNamePT)&&((n=t.xfirst)&&n._prev?this._linkCSSP(n._prev,t._next,n._prev._prev):n===this._firstPT&&(this._firstPT=t._next),t._next&&this._linkCSSP(t._next,t._next._next,n._prev),this._classNamePT=null),t=this._firstPT;t;)t.plugin&&t.plugin!==i&&t.plugin._kill&&(t.plugin._kill(e),i=t.plugin),t=t._next;return r.prototype._kill.call(this,s)};function et(e,t,i){var n,s,r,o;if(e.slice)for(s=e.length;-1<--s;)et(e[s],t,i);else for(s=(n=e.childNodes).length;-1<--s;)o=(r=n[s]).type,r.style&&(t.push(g(r)),i&&i.push(r)),1!==o&&9!==o&&11!==o||!r.childNodes.length||et(r,t,i)}return R.cascadeTo=function(e,t,i){var n,s,r,o,a=w.to(e,t,i),l=[a],h=[],c=[],p=[],u=w._internals.reservedProps;for(e=a._targets||a.target,et(e,h,p),a.render(t,!0,!0),et(e,c),a.render(0,!0,!0),a._enabled(!0),n=p.length;-1<--n;)if((s=v(p[n],h[n],c[n])).firstMPT){for(r in s=s.difs,i)u[r]&&(s[r]=i[r]);for(r in o={},s)o[r]=h[n][r];l.push(w.fromTo(p[n],t,o,s))}return l},r.activate([R]),R},!0),(e=(e=_gsScope._gsDefine.plugin({propName:"roundProps",version:"1.7.0",priority:-1,API:2,init:function(e,t,i){return this._tween=i,!0}})).prototype)._onInitAllProps=function(){var e,t,i,n,s=this._tween,r=s.vars.roundProps,o={},a=s._propLookup.roundProps;if("object"!=typeof r||r.push)for(i=(r="string"==typeof r?r.split(","):r).length;-1<--i;)o[r[i]]=Math.round;else for(n in r)o[n]=function(t){var i=t<1?Math.pow(10,(t+"").length-2):1;return function(e){return(Math.round(e/t)*t*i|0)/i}}(r[n]);for(n in o)for(e=s._firstPT;e;)t=e._next,e.pg?e.t._mod(o):e.n===n&&(2===e.f&&e.t?function(e,t){for(;e;)e.f||e.blob||(e.m=t||Math.round),e=e._next}(e.t._firstPT,o[n]):(this._add(e.t,n,e.s,e.c,o[n]),t&&(t._prev=e._prev),e._prev?e._prev._next=t:s._firstPT===e&&(s._firstPT=t),e._next=e._prev=null,s._propLookup[n]=a)),e=t;return!1},e._add=function(e,t,i,n,s){this._addTween(e,t,i,i+n,t,s||Math.round),this._overwriteProps.push(t)},_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.6.1",init:function(e,t,i,n){var s,r;if("function"!=typeof e.setAttribute)return!1;for(s in t)r=t[s],"function"==typeof r&&(r=r(n,e)),this._addTween(e,"setAttribute",e.getAttribute(s)+"",r+"",s,!1,s),this._overwriteProps.push(s);return!0}}),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.3.1",API:2,init:function(e,t,i,n){"object"!=typeof t&&(t={rotation:t}),this.finals={};var s,r,o,a,l,h=!0===t.useRadians?2*Math.PI:360;for(s in t)"useRadians"!==s&&(a=t[s],"function"==typeof a&&(a=a(n,e)),l=(a+"").split("_"),r=l[0],o=parseFloat("function"!=typeof e[s]?e[s]:e[s.indexOf("set")||"function"!=typeof e["get"+s.substr(3)]?s:"get"+s.substr(3)]()),a=this.finals[s]="string"==typeof r&&"="===r.charAt(1)?o+parseInt(r.charAt(0)+"1",10)*Number(r.substr(2)):Number(r)||0,a=a-o,l.length&&(r=l.join("_"),-1!==r.indexOf("short")&&(a%=h,a!==a%(h/2)&&(a=a<0?a+h:a-h)),-1!==r.indexOf("_cw")&&a<0?a=(a+9999999999*h)%h-(a/h|0)*h:-1!==r.indexOf("ccw")&&0<a&&(a=(a-9999999999*h)%h-(a/h|0)*h)),(1e-6<a||a<-1e-6)&&(this._addTween(e,s,o,o+a,s),this._overwriteProps.push(s)));return!0},set:function(e){var t;if(1!==e)this._super.setRatio.call(this,e);else for(t=this._firstPT;t;)t.f?t.t[t.p](this.finals[t.p]):t.t[t.p]=this.finals[t.p],t=t._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(g){function e(e,t){var i=c("easing."+e,function(){},!0);return(e=i.prototype=new g).constructor=i,e.getRatio=t,i}function t(e,t,i,n,s){return n=c("easing."+e,{easeOut:new t,easeIn:new i,easeInOut:new n},!0),p(n,e),n}function v(e,t,i){this.t=e,this.v=t,i&&(((this.next=i).prev=this).c=i.v-t,this.gap=i.t-e)}function i(e,t){var i=c("easing."+e,function(e){this._p1=e||0===e?e:1.70158,this._p2=1.525*this._p1},!0);return(e=i.prototype=new g).constructor=i,e.getRatio=t,e.config=function(e){return new i(e)},i}var n,s,r,o=_gsScope.GreenSockGlobals||_gsScope,a=o.com.greensock,l=2*Math.PI,h=Math.PI/2,c=a._class,p=g.register||function(){},u=t("Back",i("BackOut",function(e){return--e*e*((this._p1+1)*e+this._p1)+1}),i("BackIn",function(e){return e*e*((this._p1+1)*e-this._p1)}),i("BackInOut",function(e){return(e*=2)<1?.5*e*e*((this._p2+1)*e-this._p2):.5*((e-=2)*e*((this._p2+1)*e+this._p2)+2)})),d=c("easing.SlowMo",function(e,t,i){t=t||0===t?t:.7,null==e?e=.7:1<e&&(e=1),this._p=1!==e?t:0,this._p1=(1-e)/2,this._p2=e,this._p3=this._p1+this._p2,this._calcEnd=!0===i},!0),a=d.prototype=new g;return a.constructor=d,a.getRatio=function(e){var t=e+(.5-e)*this._p;return e<this._p1?this._calcEnd?1-(e=1-e/this._p1)*e:t-(e=1-e/this._p1)*e*e*e*t:e>this._p3?this._calcEnd?1===e?0:1-(e=(e-this._p3)/this._p1)*e:t+(e-t)*(e=(e-this._p3)/this._p1)*e*e*e:this._calcEnd?1:t},d.ease=new d(.7,.7),a.config=d.config=function(e,t,i){return new d(e,t,i)},(a=(n=c("easing.SteppedEase",function(e,t){this._p1=1/(e=e||1),this._p2=e+(t?0:1),this._p3=t?1:0},!0)).prototype=new g).constructor=n,a.getRatio=function(e){return e<0?e=0:1<=e&&(e=.999999999),((this._p2*e|0)+this._p3)*this._p1},a.config=n.config=function(e,t){return new n(e,t)},(a=(s=c("easing.ExpoScaleEase",function(e,t,i){this._p1=Math.log(t/e),this._p2=t-e,this._p3=e,this._ease=i},!0)).prototype=new g).constructor=s,a.getRatio=function(e){return this._ease&&(e=this._ease.getRatio(e)),(this._p3*Math.exp(this._p1*e)-this._p3)/this._p2},a.config=s.config=function(e,t,i){return new s(e,t,i)},(a=(r=c("easing.RoughEase",function(e){for(var t,i,n,s,r,o,a=(e=e||{}).taper||"none",l=[],h=0,c=0|(e.points||20),p=c,u=!1!==e.randomize,d=!0===e.clamp,m=e.template instanceof g?e.template:null,f="number"==typeof e.strength?.4*e.strength:.4;-1<--p;)t=u?Math.random():1/c*p,i=m?m.getRatio(t):t,n="none"===a?f:"out"===a?(s=1-t)*s*f:"in"===a?t*t*f:(s=t<.5?2*t:2*(1-t))*s*.5*f,u?i+=Math.random()*n-.5*n:p%2?i+=.5*n:i-=.5*n,d&&(1<i?i=1:i<0&&(i=0)),l[h++]={x:t,y:i};for(l.sort(function(e,t){return e.x-t.x}),o=new v(1,1,null),p=c;-1<--p;)r=l[p],o=new v(r.x,r.y,o);this._prev=new v(0,0,0!==o.t?o:o.next)},!0)).prototype=new g).constructor=r,a.getRatio=function(e){var t=this._prev;if(e>t.t){for(;t.next&&e>=t.t;)t=t.next;t=t.prev}else for(;t.prev&&e<=t.t;)t=t.prev;return(this._prev=t).v+(e-t.t)/t.gap*t.c},a.config=function(e){return new r(e)},r.ease=new r,t("Bounce",e("BounceOut",function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}),e("BounceIn",function(e){return(e=1-e)<1/2.75?1-7.5625*e*e:e<2/2.75?1-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?1-(7.5625*(e-=2.25/2.75)*e+.9375):1-(7.5625*(e-=2.625/2.75)*e+.984375)}),e("BounceInOut",function(e){var t=e<.5;return e=(e=t?1-2*e:2*e-1)<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,t?.5*(1-e):.5*e+.5})),t("Circ",e("CircOut",function(e){return Math.sqrt(1- --e*e)}),e("CircIn",function(e){return-(Math.sqrt(1-e*e)-1)}),e("CircInOut",function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)})),t("Elastic",(a=function(e,t,i){var n=c("easing."+e,function(e,t){this._p1=1<=e?e:1,this._p2=(t||i)/(e<1?e:1),this._p3=this._p2/l*(Math.asin(1/this._p1)||0),this._p2=l/this._p2},!0),e=n.prototype=new g;return e.constructor=n,e.getRatio=t,e.config=function(e,t){return new n(e,t)},n})("ElasticOut",function(e){return this._p1*Math.pow(2,-10*e)*Math.sin((e-this._p3)*this._p2)+1},.3),a("ElasticIn",function(e){return-(this._p1*Math.pow(2,10*--e)*Math.sin((e-this._p3)*this._p2))},.3),a("ElasticInOut",function(e){return(e*=2)<1?this._p1*Math.pow(2,10*--e)*Math.sin((e-this._p3)*this._p2)*-.5:this._p1*Math.pow(2,-10*--e)*Math.sin((e-this._p3)*this._p2)*.5+1},.45)),t("Expo",e("ExpoOut",function(e){return 1-Math.pow(2,-10*e)}),e("ExpoIn",function(e){return Math.pow(2,10*(e-1))-.001}),e("ExpoInOut",function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))})),t("Sine",e("SineOut",function(e){return Math.sin(e*h)}),e("SineIn",function(e){return 1-Math.cos(e*h)}),e("SineInOut",function(e){return-.5*(Math.cos(Math.PI*e)-1)})),c("easing.EaseLookup",{find:function(e){return g.map[e]}},!0),p(o.SlowMo,"SlowMo","ease,"),p(r,"RoughEase","ease,"),p(n,"SteppedEase","ease,"),u},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(u,d){"use strict";var m={},f=u.document,g=u.GreenSockGlobals=u.GreenSockGlobals||u,e=g[d];if(e)return"undefined"!=typeof module&&module.exports&&(module.exports=e);function v(e){for(var t=e.split("."),i=g,n=0;n<t.length;n++)i[t[n]]=i=i[t[n]]||{};return i}function a(e){for(var t=[],i=e.length,n=0;n!==i;t.push(e[n++]));return t}function y(){}function b(a,l,h,c){this.sc=A[a]?A[a].sc:[],(A[a]=this).gsClass=null,this.func=h;var p=[];this.check=function(e){for(var t,i,n,s,r=l.length,o=r;-1<--r;)(t=A[l[r]]||new b(l[r],[])).gsClass?(p[r]=t.gsClass,o--):e&&t.sc.push(this);if(0===o&&h){if(n=(i=("com.greensock."+a).split(".")).pop(),s=v(i.join("."))[n]=this.gsClass=h.apply(h,p),c)if(g[n]=m[n]=s,"undefined"!=typeof module&&module.exports)if(a===d)for(r in module.exports=m[d]=s,m)s[r]=m[r];else m[d]&&(m[d][n]=s);else"function"==typeof define&&define.amd&&define((u.GreenSockAMDPath?u.GreenSockAMDPath+"/":"")+a.split(".").pop(),[],function(){return s});for(r=0;r<this.sc.length;r++)this.sc[r].check()}},this.check(!0)}var S,t,i,p=v("com.greensock"),T=1e-8,_=(t=Object.prototype.toString,i=t.call([]),function(e){return null!=e&&(e instanceof Array||"object"==typeof e&&!!e.push&&t.call(e)===i)}),A={},n=u._gsDefine=function(e,t,i,n){return new b(e,t,i,n)},P=p._class=function(e,t,i){return t=t||function(){},n(e,[],function(){return t},i),t};n.globals=g;var s,r=[0,0,1,1],I=P("easing.Ease",function(e,t,i,n){this._func=e,this._type=i||0,this._power=n||0,this._params=t?r.concat(t):r},!0),C=I.map={},o=I.register=function(e,t,i,n){for(var s,r,o,a,l=t.split(","),h=l.length,c=(i||"easeIn,easeOut,easeInOut").split(",");-1<--h;)for(r=l[h],s=n?P("easing."+r,null,!0):p.easing[r]||{},o=c.length;-1<--o;)a=c[o],C[r+"."+a]=C[a+r]=s[a]=e.getRatio?e:e[a]||new e};for((s=I.prototype)._calcEnd=!1,s.getRatio=function(e){if(this._func)return this._params[0]=e,this._func.apply(null,this._params);var t=this._type,i=this._power,n=1===t?1-e:2===t?e:e<.5?2*e:2*(1-e);return 1===i?n*=n:2===i?n*=n*n:3===i?n*=n*n*n:4===i&&(n*=n*n*n*n),1===t?1-n:2===t?n:e<.5?n/2:1-n/2},h=(l=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;-1<--h;)s=l[h]+",Power"+h,o(new I(null,null,1,h),s,"easeOut",!0),o(new I(null,null,2,h),s,"easeIn"+(0===h?",easeNone":"")),o(new I(null,null,3,h),s,"easeInOut");C.linear=p.easing.Linear.easeIn,C.swing=p.easing.Quad.easeInOut;var x=P("events.EventDispatcher",function(e){this._listeners={},this._eventTarget=e||this});(s=x.prototype).addEventListener=function(e,t,i,n,s){s=s||0;var r,o,a=this._listeners[e],l=0;for(this!==M||S||M.wake(),null==a&&(this._listeners[e]=a=[]),o=a.length;-1<--o;)(r=a[o]).c===t&&r.s===i?a.splice(o,1):0===l&&r.pr<s&&(l=o+1);a.splice(l,0,{c:t,s:i,up:n,pr:s})},s.removeEventListener=function(e,t){var i,n=this._listeners[e];if(n)for(i=n.length;-1<--i;)if(n[i].c===t)return void n.splice(i,1)},s.dispatchEvent=function(e){var t,i,n,s=this._listeners[e];if(s)for(1<(t=s.length)&&(s=s.slice(0)),i=this._eventTarget;-1<--t;)(n=s[t])&&(n.up?n.c.call(n.s||i,{type:e,target:i}):n.c.call(n.s||i))};for(var l,B=u.requestAnimationFrame,E=u.cancelAnimationFrame,w=Date.now||function(){return(new Date).getTime()},R=w(),h=(l=["ms","moz","webkit","o"]).length;-1<--h&&!B;)B=u[l[h]+"RequestAnimationFrame"],E=u[l[h]+"CancelAnimationFrame"]||u[l[h]+"CancelRequestAnimationFrame"];P("Ticker",function(e,t){var n,s,r,o,a,l=this,h=w(),i=!(!1===t||!B)&&"auto",c=500,p=33,u="tick",d=function(e){var t,i=w()-R;c<i&&(h+=i-p),R+=i,l.time=(R-h)/1e3,i=l.time-a,(!n||0<i||!0===e)&&(l.frame++,a+=i+(o<=i?.004:o-i),t=!0),!0!==e&&(r=s(d)),t&&l.dispatchEvent(u)};x.call(l),l.time=l.frame=0,l.tick=function(){d(!0)},l.lagSmoothing=function(e,t){return arguments.length?(c=e||1e8,void(p=Math.min(t,c,0))):c<1e8},l.sleep=function(){null!=r&&((i&&E?E:clearTimeout)(r),s=y,r=null,l===M&&(S=!1))},l.wake=function(e){null!==r?l.sleep():e?h+=-R+(R=w()):10<l.frame&&(R=w()-c+5),s=0===n?y:i&&B?B:function(e){return setTimeout(e,1e3*(a-l.time)+1|0)},l===M&&(S=!0),d(2)},l.fps=function(e){return arguments.length?(o=1/((n=e)||60),a=this.time+o,void l.wake()):n},l.useRAF=function(e){return arguments.length?(l.sleep(),i=e,void l.fps(n)):i},l.fps(e),setTimeout(function(){"auto"===i&&l.frame<5&&"hidden"!==(f||{}).visibilityState&&l.useRAF(!1)},1500)}),(s=p.Ticker.prototype=new p.events.EventDispatcher).constructor=p.Ticker;var c=P("core.Animation",function(e,t){this.vars=t=t||{},this._duration=this._totalDuration=e||0,this._delay=Number(t.delay)||0,this._timeScale=1,this._active=!!t.immediateRender,this.data=t.data,this._reversed=!!t.reversed,Q&&(S||M.wake(),(t=this.vars.useFrames?K:Q).add(this,t._time),this.vars.paused&&this.paused(!0))}),M=c.ticker=new p.Ticker;(s=c.prototype)._dirty=s._gc=s._initted=s._paused=!1,s._totalTime=s._time=0,s._rawPrevTime=-1,s._next=s._last=s._onUpdate=s._timeline=s.timeline=null,s._paused=!1;function O(){S&&2e3<w()-R&&("hidden"!==(f||{}).visibilityState||!M.lagSmoothing())&&M.wake();var e=setTimeout(O,2e3);e.unref&&e.unref()}O(),s.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},s.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},s.resume=function(e,t){return null!=e&&this.seek(e,t),this.paused(!1)},s.seek=function(e,t){return this.totalTime(Number(e),!1!==t)},s.restart=function(e,t){return this.reversed(!1).paused(!1).totalTime(e?-this._delay:0,!1!==t,!0)},s.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},s.render=function(e,t,i){},s.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},s.isActive=function(){var e,t=this._timeline,i=this._startTime;return!t||!this._gc&&!this._paused&&t.isActive()&&(e=t.rawTime(!0))>=i&&e<i+this.totalDuration()/this._timeScale-T},s._enabled=function(e,t){return S||M.wake(),this._gc=!e,this._active=this.isActive(),!0!==t&&(e&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!e&&this.timeline&&this._timeline._remove(this,!0)),!1},s._kill=function(e,t){return this._enabled(!1,!1)},s.kill=function(e,t){return this._kill(e,t),this},s._uncache=function(e){for(var t=e?this:this.timeline;t;)t._dirty=!0,t=t.timeline;return this},s._swapSelfInParams=function(e){for(var t=e.length,i=e.concat();-1<--t;)"{self}"===e[t]&&(i[t]=this);return i},s._callback=function(e){var t=this.vars,i=t[e],n=t[e+"Params"],s=t[e+"Scope"]||t.callbackScope||this;switch(n?n.length:0){case 0:i.call(s);break;case 1:i.call(s,n[0]);break;case 2:i.call(s,n[0],n[1]);break;default:i.apply(s,n)}},s.eventCallback=function(e,t,i,n){if("on"===(e||"").substr(0,2)){var s=this.vars;if(1===arguments.length)return s[e];null==t?delete s[e]:(s[e]=t,s[e+"Params"]=_(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,s[e+"Scope"]=n),"onUpdate"===e&&(this._onUpdate=t)}return this},s.delay=function(e){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+e-this._delay),this._delay=e,this):this._delay},s.duration=function(e){return arguments.length?(this._duration=this._totalDuration=e,this._uncache(!0),this._timeline.smoothChildTiming&&0<this._time&&this._time<this._duration&&0!==e&&this.totalTime(this._totalTime*(e/this._duration),!0),this):(this._dirty=!1,this._duration)},s.totalDuration=function(e){return this._dirty=!1,arguments.length?this.duration(e):this._totalDuration},s.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(e>this._duration?this._duration:e,t)):this._time},s.totalTime=function(e,t,i){if(S||M.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(e<0&&!i&&(e+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var n=this._totalDuration,s=this._timeline;if(n<e&&!i&&(e=n),this._startTime=(this._paused?this._pauseTime:s._time)-(this._reversed?n-e:e)/this._timeScale,s._dirty||this._uncache(!1),s._timeline)for(;s._timeline;)s._timeline._time!==(s._startTime+s._totalTime)/s._timeScale&&s.totalTime(s._totalTime,!0),s=s._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===e&&0!==this._duration||(U.length&&J(),this.render(e,t,!1),U.length&&J())}return this},s.progress=s.totalProgress=function(e,t){var i=this.duration();return arguments.length?this.totalTime(i*e,t):i?this._time/i:this.ratio},s.startTime=function(e){return arguments.length?(e!==this._startTime&&(this._startTime=e,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,e-this._delay)),this):this._startTime},s.endTime=function(e){return this._startTime+(0!=e?this.totalDuration():this.duration())/this._timeScale},s.timeScale=function(e){if(!arguments.length)return this._timeScale;var t,i;for(e=e||T,this._timeline&&this._timeline.smoothChildTiming&&(i=(t=this._pauseTime)||0===t?t:this._timeline.totalTime(),this._startTime=i-(i-this._startTime)*this._timeScale/e),this._timeScale=e,i=this.timeline;i&&i.timeline;)i._dirty=!0,i.totalDuration(),i=i.timeline;return this},s.reversed=function(e){return arguments.length?(e!=this._reversed&&(this._reversed=e,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},s.paused=function(e){if(!arguments.length)return this._paused;var t,i,n=this._timeline;return e!=this._paused&&n&&(S||e||M.wake(),i=(t=n.rawTime())-this._pauseTime,!e&&n.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=e?t:null,this._paused=e,this._active=this.isActive(),!e&&0!=i&&this._initted&&this.duration()&&(t=n.smoothChildTiming?this._totalTime:(t-this._startTime)/this._timeScale,this.render(t,t===this._totalTime,!0))),this._gc&&!e&&this._enabled(!0,!1),this};var N=P("core.SimpleTimeline",function(e){c.call(this,0,e),this.autoRemoveChildren=this.smoothChildTiming=!0});(s=N.prototype=new c).constructor=N,s.kill()._gc=!1,s._first=s._last=s._recent=null,s._sortChildren=!1,s.add=s.insert=function(e,t,i,n){var s,r;if(e._startTime=Number(t||0)+e._delay,e._paused&&this!==e._timeline&&(e._pauseTime=this.rawTime()-(e._timeline.rawTime()-e._pauseTime)),e.timeline&&e.timeline._remove(e,!0),e.timeline=e._timeline=this,e._gc&&e._enabled(!0,!0),s=this._last,this._sortChildren)for(r=e._startTime;s&&s._startTime>r;)s=s._prev;return s?(e._next=s._next,s._next=e):(e._next=this._first,this._first=e),e._next?e._next._prev=e:this._last=e,e._prev=s,this._recent=e,this._timeline&&this._uncache(!0),this},s._remove=function(e,t){return e.timeline===this&&(t||e._enabled(!1,!0),e._prev?e._prev._next=e._next:this._first===e&&(this._first=e._next),e._next?e._next._prev=e._prev:this._last===e&&(this._last=e._prev),e._next=e._prev=e.timeline=null,e===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},s.render=function(e,t,i){var n,s=this._first;for(this._totalTime=this._time=this._rawPrevTime=e;s;)n=s._next,(s._active||e>=s._startTime&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(e-s._startTime)*s._timeScale,t,i):s.render((e-s._startTime)*s._timeScale,t,i)),s=n},s.rawTime=function(){return S||M.wake(),this._totalTime};function F(e){return e&&e.length&&e!==u&&e[0]&&(e[0]===u||e[0].nodeType&&e[0].style&&!e.nodeType)}var D=P("TweenLite",function(e,t,i){if(c.call(this,t,i),this.render=D.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"==typeof e&&D.selector(e)||e;var n,s,r,i=e.jquery||e.length&&e!==u&&e[0]&&(e[0]===u||e[0].nodeType&&e[0].style&&!e.nodeType),o=this.vars.overwrite;if(this._overwrite=o=null==o?q[D.defaultOverwrite]:"number"==typeof o?o>>0:q[o],(i||e instanceof Array||e.push&&_(e))&&"number"!=typeof e[0])for(this._targets=r=a(e),this._propLookup=[],this._siblings=[],n=0;n<r.length;n++)(s=r[n])?"string"!=typeof s?s.length&&s!==u&&s[0]&&(s[0]===u||s[0].nodeType&&s[0].style&&!s.nodeType)?(r.splice(n--,1),this._targets=r=r.concat(a(s))):(this._siblings[n]=te(s,this,!1),1===o&&1<this._siblings[n].length&&ie(s,this,null,1,this._siblings[n])):"string"==typeof(s=r[n--]=D.selector(s))&&r.splice(n+1,1):r.splice(n--,1);else this._propLookup={},this._siblings=te(e,this,!1),1===o&&1<this._siblings.length&&ie(e,this,null,1,this._siblings);(this.vars.immediateRender||0===t&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-T,this.render(Math.min(0,-this._delay)))},!0);(s=D.prototype=new c).constructor=D,s.kill()._gc=!1,s.ratio=0,s._firstPT=s._targets=s._overwrittenProps=s._startAt=null,s._notifyPluginsOfEnabled=s._lazy=!1,D.version="2.1.3",D.defaultEase=s._ease=new I(null,null,1,1),D.defaultOverwrite="auto",D.ticker=M,D.autoSleep=120,D.lagSmoothing=function(e,t){M.lagSmoothing(e,t)},D.selector=u.$||u.jQuery||function(e){var t=u.$||u.jQuery;return t?(D.selector=t)(e):(f=f||u.document)?f.querySelectorAll?f.querySelectorAll(e):f.getElementById("#"===e.charAt(0)?e.substr(1):e):e};function L(e){for(var t,i=this._firstPT;i;)t=i.blob?1===e&&null!=this.end?this.end:e?this.join(""):this.start:i.c*e+i.s,i.m?t=i.m.call(this._tween,t,this._target||i.t,this._tween):t<1e-6&&-1e-6<t&&!i.blob&&(t=0),i.f?i.fp?i.t[i.p](i.fp,t):i.t[i.p](t):i.t[i.p]=t,i=i._next}function k(e){return(1e3*e|0)/1e3+""}function G(e,t,i,n){var s,r,o,a,l,h,c=[],p=0,u="",d=0;for(c.start=e,c.end=t,e=c[0]=e+"",t=c[1]=t+"",i&&(i(c),e=c[0],t=c[1]),c.length=0,s=e.match(H)||[],r=t.match(H)||[],n&&(n._next=null,n.blob=1,c._firstPT=c._applyPT=n),a=r.length,o=0;o<a;o++)h=r[o],u+=(l=t.substr(p,t.indexOf(h,p)-p))||!o?l:",",p+=l.length,d?d=(d+1)%5:"rgba("===l.substr(-5)&&(d=1),h===s[o]||s.length<=o?u+=h:(u&&(c.push(u),u=""),l=parseFloat(s[o]),c.push(l),c._firstPT={_next:c._firstPT,t:c,p:c.length-1,s:l,c:("="===h.charAt(1)?parseInt(h.charAt(0)+"1",10)*parseFloat(h.substr(2)):parseFloat(h)-l)||0,f:0,m:d&&d<4?Math.round:k}),p+=h.length;return(u+=t.substr(p))&&c.push(u),c.setRatio=L,$.test(t)&&(c.end=null),c}function W(e,t,i,n,s,r,o,a,l){"function"==typeof n&&(n=n(l||0,e));var h=typeof e[t],l="function"!=h?"":t.indexOf("set")||"function"!=typeof e["get"+t.substr(3)]?t:"get"+t.substr(3),i="get"!==i?i:l?o?e[l](o):e[l]():e[t],l="string"==typeof n&&"="===n.charAt(1),r={t:e,p:t,s:i,f:"function"==h,pg:0,n:s||t,m:r?"function"==typeof r?r:Math.round:0,pr:0,c:l?parseInt(n.charAt(0)+"1",10)*parseFloat(n.substr(2)):parseFloat(n)-i||0};return"number"==typeof i&&("number"==typeof n||l)||(o||isNaN(i)||!l&&isNaN(n)||"boolean"==typeof i||"boolean"==typeof n?(r.fp=o,r={t:G(i,l?parseFloat(r.s)+r.c+(r.s+"").replace(/[0-9\-\.]/g,""):n,a||D.defaultStringFilter,r),p:"setRatio",s:0,c:1,f:2,pg:0,n:s||t,pr:0,m:0}):(r.s=parseFloat(i),l||(r.c=parseFloat(n)-r.s||0))),r.c?((r._next=this._firstPT)&&(r._next._prev=r),this._firstPT=r):void 0}var U=[],V={},H=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,$=/[\+-]=-?[\.\d]/,e=D._internals={isArray:_,isSelector:F,lazyTweens:U,blobDif:G},X=D._plugins={},Y=e.tweenLookup={},j=0,z=e.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1,stagger:1},q={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},K=c._rootFramesTimeline=new N,Q=c._rootTimeline=new N,Z=30,J=e.lazyRender=function(){var e,t,i=U.length;for(V={},e=0;e<i;e++)(t=U[e])&&!1!==t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);U.length=0};Q._startTime=M.time,K._startTime=M.frame,Q._active=K._active=!0,setTimeout(J,1),c._updateRoot=D.render=function(){var e,t,i;if(U.length&&J(),Q.render((M.time-Q._startTime)*Q._timeScale,!1,!1),K.render((M.frame-K._startTime)*K._timeScale,!1,!1),U.length&&J(),M.frame>=Z){for(i in Z=M.frame+(parseInt(D.autoSleep,10)||120),Y){for(e=(t=Y[i].tweens).length;-1<--e;)t[e]._gc&&t.splice(e,1);0===t.length&&delete Y[i]}if((!(i=Q._first)||i._paused)&&D.autoSleep&&!K._first&&1===M._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||M.sleep()}}},M.addEventListener("tick",c._updateRoot);function ee(e,t,i,n){var s,r,o=e.vars.onOverwrite;return o&&(s=o(e,t,i,n)),(o=D.onOverwrite)&&(r=o(e,t,i,n)),!1!==s&&!1!==r}var te=function(e,t,i){var n,s,r=e._gsTweenID;if(Y[r||(e._gsTweenID=r="t"+j++)]||(Y[r]={target:e,tweens:[]}),t&&((n=Y[r].tweens)[s=n.length]=t,i))for(;-1<--s;)n[s]===t&&n.splice(s,1);return Y[r].tweens},ie=function(e,t,i,n,s){var r,o,a;if(1===n||4<=n){for(a=s.length,d=0;d<a;d++)if((o=s[d])!==t)o._gc||o._kill(null,e,t)&&(r=!0);else if(5===n)break;return r}for(var l,h=t._startTime+T,c=[],p=0,u=0===t._duration,d=s.length;-1<--d;)(o=s[d])===t||o._gc||o._paused||(o._timeline!==t._timeline?(l=l||ne(t,0,u),0===ne(o,l,u)&&(c[p++]=o)):o._startTime<=h&&o._startTime+o.totalDuration()/o._timeScale>h&&((u||!o._initted)&&h-o._startTime<=2e-8||(c[p++]=o)));for(d=p;-1<--d;)if(a=(o=c[d])._firstPT,2===n&&o._kill(i,e,t)&&(r=!0),2!==n||!o._firstPT&&o._initted&&a){if(2!==n&&!ee(o,t))continue;o._enabled(!1,!1)&&(r=!0)}return r},ne=function(e,t,i){for(var n=e._timeline,s=n._timeScale,r=e._startTime;n._timeline;){if(r+=n._startTime,s*=n._timeScale,n._paused)return-100;n=n._timeline}return t<(r/=s)?r-t:i&&r===t||!e._initted&&r-t<2e-8?T:(r+=e.totalDuration()/e._timeScale/s)>t+T?0:r-t-T};s._init=function(){var e,t,i,n,s,r,o=this.vars,a=this._overwrittenProps,l=this._duration,h=!!o.immediateRender,c=o.ease,p=this._startAt;if(o.startAt){for(n in p&&(p.render(-1,!0),p.kill()),s={},o.startAt)s[n]=o.startAt[n];if(s.data="isStart",s.overwrite=!1,s.immediateRender=!0,s.lazy=h&&!1!==o.lazy,s.startAt=s.delay=null,s.onUpdate=o.onUpdate,s.onUpdateParams=o.onUpdateParams,s.onUpdateScope=o.onUpdateScope||o.callbackScope||this,this._startAt=D.to(this.target||{},0,s),h)if(0<this._time)this._startAt=null;else if(0!==l)return}else if(o.runBackwards&&0!==l)if(p)p.render(-1,!0),p.kill(),this._startAt=null;else{for(n in 0!==this._time&&(h=!1),i={},o)z[n]&&"autoCSS"!==n||(i[n]=o[n]);if(i.overwrite=0,i.data="isFromStart",i.lazy=h&&!1!==o.lazy,i.immediateRender=h,this._startAt=D.to(this.target,0,i),h){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=c=c?c instanceof I?c:"function"==typeof c?new I(c,o.easeParams):C[c]||D.defaultEase:D.defaultEase,o.easeParams instanceof Array&&c.config&&(this._ease=c.config.apply(c,o.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(r=this._targets.length,e=0;e<r;e++)this._initProps(this._targets[e],this._propLookup[e]={},this._siblings[e],a?a[e]:null,e)&&(t=!0);else t=this._initProps(this.target,this._propLookup,this._siblings,a,0);if(t&&D._onPluginEvent("_onInitAllProps",this),a&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),o.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=o.onUpdate,this._initted=!0},s._initProps=function(e,t,i,n,s){var r,o,a,l,h,c;if(null==e)return!1;for(r in V[e._gsTweenID]&&J(),this.vars.css||e.style&&e!==u&&e.nodeType&&X.css&&!1!==this.vars.autoCSS&&function(e,t){var i,n={};for(i in e)z[i]||i in t&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!X[i]||X[i]&&X[i]._autoCSS)||(n[i]=e[i],delete e[i]);e.css=n}(this.vars,e),this.vars)if(c=this.vars[r],z[r])c&&(c instanceof Array||c.push&&_(c))&&-1!==c.join("").indexOf("{self}")&&(this.vars[r]=c=this._swapSelfInParams(c,this));else if(X[r]&&(l=new X[r])._onInitTween(e,this.vars[r],this,s)){for(this._firstPT=h={_next:this._firstPT,t:l,p:"setRatio",s:0,c:1,f:1,n:r,pg:1,pr:l._priority,m:0},o=l._overwriteProps.length;-1<--o;)t[l._overwriteProps[o]]=this._firstPT;(l._priority||l._onInitAllProps)&&(a=!0),(l._onDisable||l._onEnable)&&(this._notifyPluginsOfEnabled=!0),h._next&&(h._next._prev=h)}else t[r]=W.call(this,e,r,"get",c,r,0,null,this.vars.stringFilter,s);return n&&this._kill(n,e)?this._initProps(e,t,i,n,s):1<this._overwrite&&this._firstPT&&1<i.length&&ie(e,this,t,this._overwrite,i)?(this._kill(t,e),this._initProps(e,t,i,n,s)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(V[e._gsTweenID]=!0),a)},s.render=function(e,t,i){var n,s,r,o,a,l,h,c=this,p=c._time,u=c._duration,d=c._rawPrevTime;if(u-T<=e&&0<=e?(c._totalTime=c._time=u,c.ratio=c._ease._calcEnd?c._ease.getRatio(1):1,c._reversed||(n=!0,s="onComplete",i=i||c._timeline.autoRemoveChildren),0!==u||!c._initted&&c.vars.lazy&&!i||(c._startTime===c._timeline._duration&&(e=0),(d<0||e<=0&&-T<=e||d===T&&"isPause"!==c.data)&&d!==e&&(i=!0,T<d&&(s="onReverseComplete")),c._rawPrevTime=o=!t||e||d===e?e:T)):e<T?(c._totalTime=c._time=0,c.ratio=c._ease._calcEnd?c._ease.getRatio(0):0,(0!==p||0===u&&0<d)&&(s="onReverseComplete",n=c._reversed),-T<e?e=0:e<0&&(c._active=!1,0!==u||!c._initted&&c.vars.lazy&&!i||(0<=d&&(d!==T||"isPause"!==c.data)&&(i=!0),c._rawPrevTime=o=!t||e||d===e?e:T)),(!c._initted||c._startAt&&c._startAt.progress())&&(i=!0)):(c._totalTime=c._time=e,c._easeType?(a=e/u,(1===(l=c._easeType)||3===l&&.5<=a)&&(a=1-a),3===l&&(a*=2),1===(h=c._easePower)?a*=a:2===h?a*=a*a:3===h?a*=a*a*a:4===h&&(a*=a*a*a*a),c.ratio=1===l?1-a:2===l?a:e/u<.5?a/2:1-a/2):c.ratio=c._ease.getRatio(e/u)),c._time!==p||i){if(!c._initted){if(c._init(),!c._initted||c._gc)return;if(!i&&c._firstPT&&(!1!==c.vars.lazy&&c._duration||c.vars.lazy&&!c._duration))return c._time=c._totalTime=p,c._rawPrevTime=d,U.push(c),void(c._lazy=[e,t]);c._time&&!n?c.ratio=c._ease.getRatio(c._time/u):n&&c._ease._calcEnd&&(c.ratio=c._ease.getRatio(0===c._time?0:1))}for(!1!==c._lazy&&(c._lazy=!1),c._active||!c._paused&&c._time!==p&&0<=e&&(c._active=!0),0===p&&(c._startAt&&(0<=e?c._startAt.render(e,!0,i):s=s||"_dummyGS"),!c.vars.onStart||0===c._time&&0!==u||(t||c._callback("onStart"))),r=c._firstPT;r;)r.f?r.t[r.p](r.c*c.ratio+r.s):r.t[r.p]=r.c*c.ratio+r.s,r=r._next;c._onUpdate&&(e<0&&c._startAt&&-1e-4!==e&&c._startAt.render(e,!0,i),t||(c._time!==p||n||i)&&c._callback("onUpdate")),!s||c._gc&&!i||(e<0&&c._startAt&&!c._onUpdate&&-1e-4!==e&&c._startAt.render(e,!0,i),n&&(c._timeline.autoRemoveChildren&&c._enabled(!1,!1),c._active=!1),!t&&c.vars[s]&&c._callback(s),0===u&&c._rawPrevTime===T&&o!==T&&(c._rawPrevTime=0))}},s._kill=function(e,t,i){if(null==(e="all"===e?null:e)&&(null==t||t===this.target))return this._lazy=!1,this._enabled(!1,!1);t="string"!=typeof t?t||this._targets||this.target:D.selector(t)||t;var n,s,r,o,a,l,h,c,p,u=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline,d=this._firstPT;if((_(t)||F(t))&&"number"!=typeof t[0])for(n=t.length;-1<--n;)this._kill(e,t[n],i)&&(l=!0);else{if(this._targets){for(n=this._targets.length;-1<--n;)if(t===this._targets[n]){a=this._propLookup[n]||{},this._overwrittenProps=this._overwrittenProps||[],s=this._overwrittenProps[n]=e?this._overwrittenProps[n]||{}:"all";break}}else{if(t!==this.target)return!1;a=this._propLookup,s=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(a){if(h=e||a,c=e!==s&&"all"!==s&&e!==a&&("object"!=typeof e||!e._tempKill),i&&(D.onOverwrite||this.vars.onOverwrite)){for(r in h)a[r]&&(p=p||[],p.push(r));if((p||!e)&&!ee(this,i,t,p))return!1}for(r in h)(o=a[r])&&(u&&(o.f?o.t[o.p](o.s):o.t[o.p]=o.s,l=!0),o.pg&&o.t._kill(h)&&(l=!0),o.pg&&0!==o.t._overwriteProps.length||(o._prev?o._prev._next=o._next:o===this._firstPT&&(this._firstPT=o._next),o._next&&(o._next._prev=o._prev),o._next=o._prev=null),delete a[r]),c&&(s[r]=1);!this._firstPT&&this._initted&&d&&this._enabled(!1,!1)}}return l},s.invalidate=function(){this._notifyPluginsOfEnabled&&D._onPluginEvent("_onDisable",this);var e=this._time;return this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],c.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-T,this.render(e,!1,!1!==this.vars.lazy)),this},s._enabled=function(e,t){if(S||M.wake(),e&&this._gc){var i,n=this._targets;if(n)for(i=n.length;-1<--i;)this._siblings[i]=te(n[i],this,!0);else this._siblings=te(this.target,this,!0)}return c.prototype._enabled.call(this,e,t),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&D._onPluginEvent(e?"_onEnable":"_onDisable",this)},D.to=function(e,t,i){return new D(e,t,i)},D.from=function(e,t,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new D(e,t,i)},D.fromTo=function(e,t,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new D(e,t,n)},D.delayedCall=function(e,t,i,n,s){return new D(t,0,{delay:e,onComplete:t,onCompleteParams:i,callbackScope:n,onReverseComplete:t,onReverseCompleteParams:i,immediateRender:!1,lazy:!1,useFrames:s,overwrite:0})},D.set=function(e,t){return new D(e,0,t)},D.getTweensOf=function(e,t){if(null==e)return[];var i,n,s,r;if(e="string"==typeof e&&D.selector(e)||e,(_(e)||F(e))&&"number"!=typeof e[0]){for(i=e.length,n=[];-1<--i;)n=n.concat(D.getTweensOf(e[i],t));for(i=n.length;-1<--i;)for(r=n[i],s=i;-1<--s;)r===n[s]&&n.splice(i,1)}else if(e._gsTweenID)for(i=(n=te(e).concat()).length;-1<--i;)(n[i]._gc||t&&!n[i].isActive())&&n.splice(i,1);return n||[]},D.killTweensOf=D.killDelayedCallsTo=function(e,t,i){"object"==typeof t&&(i=t,t=!1);for(var n=D.getTweensOf(e,t),s=n.length;-1<--s;)n[s]._kill(i,e)};var se=P("plugins.TweenPlugin",function(e,t){this._overwriteProps=(e||"").split(","),this._propName=this._overwriteProps[0],this._priority=t||0,this._super=se.prototype},!0);if(s=se.prototype,se.version="1.19.0",se.API=2,s._firstPT=null,s._addTween=W,s.setRatio=L,s._kill=function(e){var t,i=this._overwriteProps,n=this._firstPT;if(null!=e[this._propName])this._overwriteProps=[];else for(t=i.length;-1<--t;)null!=e[i[t]]&&i.splice(t,1);for(;n;)null!=e[n.n]&&(n._next&&(n._next._prev=n._prev),n._prev?(n._prev._next=n._next,n._prev=null):this._firstPT===n&&(this._firstPT=n._next)),n=n._next;return!1},s._mod=s._roundProps=function(e){for(var t,i=this._firstPT;i;)(t=e[this._propName]||null!=i.n&&e[i.n.split(this._propName+"_").join("")])&&"function"==typeof t&&(2===i.f?i.t._applyPT.m=t:i.m=t),i=i._next},D._onPluginEvent=function(e,t){var i,n,s,r,o,a=t._firstPT;if("_onInitAllProps"===e){for(;a;){for(o=a._next,n=s;n&&n.pr>a.pr;)n=n._next;(a._prev=n?n._prev:r)?a._prev._next=a:s=a,(a._next=n)?n._prev=a:r=a,a=o}a=t._firstPT=s}for(;a;)a.pg&&"function"==typeof a.t[e]&&a.t[e]()&&(i=!0),a=a._next;return i},se.activate=function(e){for(var t=e.length;-1<--t;)e[t].API===se.API&&(X[(new e[t])._propName]=e[t]);return!0},n.plugin=function(e){if(!(e&&e.propName&&e.init&&e.API))throw"illegal plugin definition.";var t,i=e.propName,n=e.priority||0,s=e.overwriteProps,r={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},o=P("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){se.call(this,i,n),this._overwriteProps=s||[]},!0===e.global),a=o.prototype=new se(i);for(t in(a.constructor=o).API=e.API,r)"function"==typeof e[t]&&(a[r[t]]=e[t]);return o.version=e.version,se.activate([o]),o},l=u._gsQueue){for(h=0;h<l.length;h++)l[h]();for(s in A)A[s].func||u.console.log("GSAP encountered missing dependency: "+s)}S=!1}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax"),((_gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window)._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,a,e){function i(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!!this.vars.yoyo,this._dirty=!0}var x=1e-8,n=a._internals,B=n.lazyTweens,E=n.lazyRender,l=_gsScope._gsDefine.globals,h=new e(null,null,1,0),e=i.prototype=new t;return e.constructor=i,e.kill()._gc=!1,i.version="2.1.3",e.invalidate=function(){return this._yoyo=!!this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},e.addCallback=function(e,t,i,n){return this.add(a.delayedCall(0,e,i,n),t)},e.removeCallback=function(e,t){if(e)if(null==t)this._kill(null,e);else for(var i=this.getTweensOf(e,!1),n=i.length,s=this._parseTimeOrLabel(t);-1<--n;)i[n]._startTime===s&&i[n]._enabled(!1,!1);return this},e.removePause=function(e){return this.removeCallback(t._internals.pauseCallback,e)},e.tweenTo=function(e,t){t=t||{};var i,n,s,r={ease:h,useFrames:this.usesFrames(),immediateRender:!1,lazy:!1},o=t.repeat&&l.TweenMax||a;for(n in t)r[n]=t[n];return r.time=this._parseTimeOrLabel(e),i=Math.abs(Number(r.time)-this._time)/this._timeScale||.001,s=new o(this,i,r),r.onStart=function(){s.target.paused(!0),s.vars.time===s.target.time()||i!==s.duration()||s.isFromTo||s.duration(Math.abs(s.vars.time-s.target.time())/s.target._timeScale).render(s.time(),!0,!0),t.onStart&&t.onStart.apply(t.onStartScope||t.callbackScope||s,t.onStartParams||[])},s},e.tweenFromTo=function(e,t,i){i=i||{},e=this._parseTimeOrLabel(e),i.startAt={onComplete:this.seek,onCompleteParams:[e],callbackScope:this},i.immediateRender=!1!==i.immediateRender;i=this.tweenTo(t,i);return i.isFromTo=1,i.duration(Math.abs(i.vars.time-e)/this._timeScale||.001)},e.render=function(e,t,i){this._gc&&this._enabled(!0,!1);var n,s,r,o,a,l,h,c,p=this,u=p._time,d=p._dirty?p.totalDuration():p._totalDuration,m=p._duration,f=p._totalTime,g=p._startTime,v=p._timeScale,y=p._rawPrevTime,b=p._paused,S=p._cycle;if(u!==p._time&&(e+=p._time-u),d-x<=e&&0<=e)p._locked||(p._totalTime=d,p._cycle=p._repeat),p._reversed||p._hasPausedChild()||(s=!0,o="onComplete",a=!!p._timeline.autoRemoveChildren,0===p._duration&&(e<=0&&-x<=e||y<0||y===x)&&y!==e&&p._first&&(a=!0,x<y&&(o="onReverseComplete"))),p._rawPrevTime=p._duration||!t||e||p._rawPrevTime===e?e:x,p._yoyo&&1&p._cycle?p._time=e=0:e=(p._time=m)+1e-4;else if(e<x)if(p._locked||(p._totalTime=p._cycle=0),p._time=0,-x<e&&(e=0),(0!==u||0===m&&y!==x&&(0<y||e<0&&0<=y)&&!p._locked)&&(o="onReverseComplete",s=p._reversed),e<0)p._active=!1,p._timeline.autoRemoveChildren&&p._reversed?(a=s=!0,o="onReverseComplete"):0<=y&&p._first&&(a=!0),p._rawPrevTime=e;else{if(p._rawPrevTime=m||!t||e||p._rawPrevTime===e?e:x,0===e&&s)for(n=p._first;n&&0===n._startTime;)n._duration||(s=!1),n=n._next;e=0,p._initted||(a=!0)}else 0===m&&y<0&&(a=!0),p._time=p._rawPrevTime=e,p._locked||(p._totalTime=e,0!==p._repeat&&(C=m+p._repeatDelay,p._cycle=p._totalTime/C>>0,p._cycle&&p._cycle===p._totalTime/C&&f<=e&&p._cycle--,p._time=p._totalTime-p._cycle*C,p._yoyo&&1&p._cycle&&(p._time=m-p._time),p._time>m?e=(p._time=m)+1e-4:p._time<0?p._time=e=0:e=p._time));if(p._hasPause&&!p._forcingPlayhead&&!t){if(u<(e=p._time)||p._repeat&&S!==p._cycle)for(n=p._first;n&&n._startTime<=e&&!l;)n._duration||"isPause"!==n.data||n.ratio||0===n._startTime&&0===p._rawPrevTime||(l=n),n=n._next;else for(n=p._last;n&&n._startTime>=e&&!l;)n._duration||"isPause"===n.data&&0<n._rawPrevTime&&(l=n),n=n._prev;l&&(c=p._startTime+(p._reversed?p._duration-l._startTime:l._startTime)/p._timeScale,l._startTime<m&&(p._time=p._rawPrevTime=e=l._startTime,p._totalTime=e+p._cycle*(p._totalDuration+p._repeatDelay)))}if(p._cycle!==S&&!p._locked){var T=p._yoyo&&0!=(1&S),_=T===(p._yoyo&&0!=(1&p._cycle)),A=p._totalTime,P=p._cycle,I=p._rawPrevTime,C=p._time;if(p._totalTime=S*m,p._cycle<S?T=!T:p._totalTime+=m,p._time=u,p._rawPrevTime=0===m?y-1e-4:y,p._cycle=S,p._locked=!0,p.render(u=T?0:m,t,0===m),t||p._gc||p.vars.onRepeat&&(p._cycle=P,p._locked=!1,p._callback("onRepeat")),u!==p._time)return;if(_&&(p._cycle=S,p._locked=!0,p.render(u=T?m+1e-4:-1e-4,!0,!1)),p._locked=!1,p._paused&&!b)return;p._time=C,p._totalTime=A,p._cycle=P,p._rawPrevTime=I}if(p._time!==u&&p._first||i||a||l){if(p._initted||(p._initted=!0),p._active||!p._paused&&p._totalTime!==f&&0<e&&(p._active=!0),0===f&&p.vars.onStart&&(0===p._totalTime&&p._totalDuration||t||p._callback("onStart")),u<=(h=p._time))for(n=p._first;n&&(r=n._next,h===p._time&&(!p._paused||b));)(n._active||n._startTime<=p._time&&!n._paused&&!n._gc)&&(l===n&&(p.pause(),p._pauseTime=c),n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,i):n.render((e-n._startTime)*n._timeScale,t,i)),n=r;else for(n=p._last;n&&(r=n._prev,h===p._time&&(!p._paused||b));){if(n._active||n._startTime<=u&&!n._paused&&!n._gc){if(l===n){for(l=n._prev;l&&l.endTime()>p._time;)l.render(l._reversed?l.totalDuration()-(e-l._startTime)*l._timeScale:(e-l._startTime)*l._timeScale,t,i),l=l._prev;l=null,p.pause(),p._pauseTime=c}n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,i):n.render((e-n._startTime)*n._timeScale,t,i)}n=r}p._onUpdate&&(t||(B.length&&E(),p._callback("onUpdate"))),o&&(p._locked||p._gc||g!==p._startTime&&v===p._timeScale||!(0===p._time||d>=p.totalDuration())||(s&&(B.length&&E(),p._timeline.autoRemoveChildren&&p._enabled(!1,!1),p._active=!1),!t&&p.vars[o]&&p._callback(o)))}else f!==p._totalTime&&p._onUpdate&&(t||p._callback("onUpdate"))},e.getActive=function(e,t,i){for(var n,s=[],r=this.getChildren(e||null==e,t||null==e,!!i),o=0,a=r.length,l=0;l<a;l++)(n=r[l]).isActive()&&(s[o++]=n);return s},e.getLabelAfter=function(e){e||0!==e&&(e=this._time);for(var t=this.getLabelsArray(),i=t.length,n=0;n<i;n++)if(t[n].time>e)return t[n].name;return null},e.getLabelBefore=function(e){null==e&&(e=this._time);for(var t=this.getLabelsArray(),i=t.length;-1<--i;)if(t[i].time<e)return t[i].name;return null},e.getLabelsArray=function(){var e,t=[],i=0;for(e in this._labels)t[i++]={time:this._labels[e],name:e};return t.sort(function(e,t){return e.time-t.time}),t},e.invalidate=function(){return this._locked=!1,t.prototype.invalidate.call(this)},e.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()||0},e.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()||0},e.totalDuration=function(e){return arguments.length?-1!==this._repeat&&e?this.timeScale(this.totalDuration()/e):this:(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},e.time=function(e,t){if(!arguments.length)return this._time;this._dirty&&this.totalDuration();var i=this._duration,n=this._cycle,s=n*(i+this._repeatDelay);return i<e&&(e=i),this.totalTime(this._yoyo&&1&n?i-e+s:this._repeat?e+s:e,t)},e.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},e.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},e.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},e.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.getLabelBefore(this._time+x)},i},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(p,u,m){function f(e){u.call(this,e);var t,i,n=this.vars;for(i in this._labels={},this.autoRemoveChildren=!!n.autoRemoveChildren,this.smoothChildTiming=!!n.smoothChildTiming,this._sortChildren=!0,this._onUpdate=n.onUpdate,n)t=n[i],d(t)&&-1!==t.join("").indexOf("{self}")&&(n[i]=this._swapSelfInParams(t));d(n.tweens)&&this.add(n.tweens,0,n.align,n.stagger)}function g(e){var t,i={};for(t in e)i[t]=e[t];return i}function v(e,t,i){var n,s,r=e.cycle;for(n in r)s=r[n],e[n]="function"==typeof s?s(i,t[i],t):s[i%s.length];delete e.cycle}function h(e,t,i,n){var s="immediateRender";return s in t||(t[s]=!(i&&!1===i[s]||n)),t}function y(e){if("function"==typeof e)return e;var d="object"==typeof e?e:{each:e},m=d.ease,f=d.from||0,g=d.base||0,v={},y=isNaN(f),b=d.axis,S={center:.5,end:1}[f]||0;return function(e,t,i){var n,s,r,o,a,l,h,c,p=(i||d).length,u=v[p];if(!u){if(!(c="auto"===d.grid?0:(d.grid||[1/0])[0])){for(l=-1/0;l<(l=i[c++].getBoundingClientRect().left)&&c<p;);c--}for(u=v[p]=[],n=y?Math.min(c,p)*S-.5:f%c,s=y?p*S/c-.5:f/c|0,h=1/(l=0),a=0;a<p;a++)r=a%c-n,o=s-(a/c|0),u[a]=o=b?Math.abs("y"===b?o:r):Math.sqrt(r*r+o*o),l<o&&(l=o),o<h&&(h=o);u.max=l-h,u.min=h,u.v=p=d.amount||d.each*(p<c?p-1:b?"y"===b?p/c:c:Math.max(c,p/c))||0,u.b=p<0?g-p:g}return p=(u[e]-u.min)/u.max,u.b+(m?m.getRatio(p):p)*u.v}}var e=m._internals,t=f._internals={},b=e.isSelector,d=e.isArray,S=e.lazyTweens,T=e.lazyRender,o=_gsScope._gsDefine.globals,s=t.pauseCallback=function(){},t=f.prototype=new u;return f.version="2.1.3",f.distribute=y,t.constructor=f,t.kill()._gc=t._forcingPlayhead=t._hasPause=!1,t.to=function(e,t,i,n){var s=i.repeat&&o.TweenMax||m;return t?this.add(new s(e,t,i),n):this.set(e,i,n)},t.from=function(e,t,i,n){return this.add((i.repeat&&o.TweenMax||m).from(e,t,h(0,i)),n)},t.fromTo=function(e,t,i,n,s){var r=n.repeat&&o.TweenMax||m;return n=h(0,n,i),t?this.add(r.fromTo(e,t,i,n),s):this.set(e,n,s)},t.staggerTo=function(e,t,i,n,s,r,o,a){var l,h,c=new f({onComplete:r,onCompleteParams:o,callbackScope:a,smoothChildTiming:this.smoothChildTiming}),p=y(i.stagger||n),u=i.startAt,d=i.cycle;for("string"==typeof e&&(e=m.selector(e)||e),b(e=e||[])&&(e=function(e){for(var t=[],i=e.length,n=0;n!==i;t.push(e[n++]));return t}(e)),h=0;h<e.length;h++)l=g(i),u&&(l.startAt=g(u),u.cycle&&v(l.startAt,e,h)),d&&(v(l,e,h),null!=l.duration&&(t=l.duration,delete l.duration)),c.to(e[h],t,l,p(h,e[h],e));return this.add(c,s)},t.staggerFrom=function(e,t,i,n,s,r,o,a){return i.runBackwards=!0,this.staggerTo(e,t,h(0,i),n,s,r,o,a)},t.staggerFromTo=function(e,t,i,n,s,r,o,a,l){return n.startAt=i,this.staggerTo(e,t,h(0,n,i),s,r,o,a,l)},t.call=function(e,t,i,n){return this.add(m.delayedCall(0,e,t,i),n)},t.set=function(e,t,i){return this.add(new m(e,0,h(0,t,null,!0)),i)},f.exportRoot=function(e,t){null==(e=e||{}).smoothChildTiming&&(e.smoothChildTiming=!0);var i,n,s,r,o=new f(e),e=o._timeline;for(null==t&&(t=!0),e._remove(o,!0),o._startTime=0,o._rawPrevTime=o._time=o._totalTime=e._time,s=e._first;s;)r=s._next,t&&s instanceof m&&s.target===s.vars.onComplete||((n=s._startTime-s._delay)<0&&(i=1),o.add(s,n)),s=r;return e.add(o,0),i&&o.totalDuration(),o},t.add=function(e,t,i,n){var s,r,o,a,l,h,c=this;if("number"!=typeof t&&(t=c._parseTimeOrLabel(t,0,!0,e)),!(e instanceof p)){if(e instanceof Array||e&&e.push&&d(e)){for(i=i||"normal",n=n||0,s=t,r=e.length,o=0;o<r;o++)d(a=e[o])&&(a=new f({tweens:a})),c.add(a,s),"string"!=typeof a&&"function"!=typeof a&&("sequence"===i?s=a._startTime+a.totalDuration()/a._timeScale:"start"===i&&(a._startTime-=a.delay())),s+=n;return c._uncache(!0)}if("string"==typeof e)return c.addLabel(e,t);if("function"!=typeof e)throw"Cannot add "+e+" into the timeline; it is not a tween, timeline, function, or string.";e=m.delayedCall(0,e)}if(u.prototype.add.call(c,e,t),(e._time||!e._duration&&e._initted)&&(s=(c.rawTime()-e._startTime)*e._timeScale,(!e._duration||1e-5<Math.abs(Math.max(0,Math.min(e.totalDuration(),s)))-e._totalTime)&&e.render(s,!1,!1)),(c._gc||c._time===c._duration)&&!c._paused&&c._duration<c.duration())for(h=(l=c).rawTime()>e._startTime;l._timeline;)h&&l._timeline.smoothChildTiming?l.totalTime(l._totalTime,!0):l._gc&&l._enabled(!0,!1),l=l._timeline;return c},t.remove=function(e){if(e instanceof p){this._remove(e,!1);var t=e._timeline=e.vars.useFrames?p._rootFramesTimeline:p._rootTimeline;return e._startTime=(e._paused?e._pauseTime:t._time)-(e._reversed?e.totalDuration()-e._totalTime:e._totalTime)/e._timeScale,this}if(e instanceof Array||e&&e.push&&d(e)){for(var i=e.length;-1<--i;)this.remove(e[i]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},t._remove=function(e,t){return u.prototype._remove.call(this,e,t),this._last?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},t.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,!0,e))},t.insert=t.insertMultiple=function(e,t,i,n){return this.add(e,t||0,i,n)},t.appendMultiple=function(e,t,i,n){return this.add(e,this._parseTimeOrLabel(null,t,!0,e),i,n)},t.addLabel=function(e,t){return this._labels[e]=this._parseTimeOrLabel(t),this},t.addPause=function(e,t,i,n){n=m.delayedCall(0,s,i,n||this);return n.vars.onComplete=n.vars.onReverseComplete=t,n.data="isPause",this._hasPause=!0,this.add(n,e)},t.removeLabel=function(e){return delete this._labels[e],this},t.getLabelTime=function(e){return null!=this._labels[e]?this._labels[e]:-1},t._parseTimeOrLabel=function(e,t,i,n){var s,r;if(n instanceof p&&n.timeline===this)this.remove(n);else if(n&&(n instanceof Array||n.push&&d(n)))for(r=n.length;-1<--r;)n[r]instanceof p&&n[r].timeline===this&&this.remove(n[r]);if(s="number"!=typeof e||t?99999999999<this.duration()?this.recent().endTime(!1):this._duration:0,"string"==typeof t)return this._parseTimeOrLabel(t,i&&"number"==typeof e&&null==this._labels[t]?e-s:0,i);if(t=t||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=s);else{if(-1===(r=e.indexOf("=")))return null==this._labels[e]?i?this._labels[e]=s+t:t:this._labels[e]+t;t=parseInt(e.charAt(r-1)+"1",10)*Number(e.substr(r+1)),e=1<r?this._parseTimeOrLabel(e.substr(0,r-1),0,i):s}return Number(e)+t},t.seek=function(e,t){return this.totalTime("number"==typeof e?e:this._parseTimeOrLabel(e),!1!==t)},t.stop=function(){return this.paused(!0)},t.gotoAndPlay=function(e,t){return this.play(e,t)},t.gotoAndStop=function(e,t){return this.pause(e,t)},t.render=function(e,t,i){this._gc&&this._enabled(!0,!1);var n,s,r,o,a,l,h,c,p=this,u=p._time,d=p._dirty?p.totalDuration():p._totalDuration,m=p._startTime,f=p._timeScale,g=p._paused;if(u!==p._time&&(e+=p._time-u),p._hasPause&&!p._forcingPlayhead&&!t){if(u<e)for(n=p._first;n&&n._startTime<=e&&!l;)n._duration||"isPause"!==n.data||n.ratio||0===n._startTime&&0===p._rawPrevTime||(l=n),n=n._next;else for(n=p._last;n&&n._startTime>=e&&!l;)n._duration||"isPause"===n.data&&0<n._rawPrevTime&&(l=n),n=n._prev;l&&(p._time=p._totalTime=e=l._startTime,c=p._startTime+(p._reversed?p._duration-e:e)/p._timeScale)}if(d-1e-8<=e&&0<=e)p._totalTime=p._time=d,p._reversed||p._hasPausedChild()||(s=!0,o="onComplete",a=!!p._timeline.autoRemoveChildren,0===p._duration&&(e<=0&&-1e-8<=e||p._rawPrevTime<0||1e-8===p._rawPrevTime)&&p._rawPrevTime!==e&&p._first&&(a=!0,1e-8<p._rawPrevTime&&(o="onReverseComplete"))),p._rawPrevTime=p._duration||!t||e||p._rawPrevTime===e?e:1e-8,e=d+1e-4;else if(e<1e-8)if(-1e-8<e&&(e=0),((p._totalTime=p._time=0)!==u||0===p._duration&&1e-8!==p._rawPrevTime&&(0<p._rawPrevTime||e<0&&0<=p._rawPrevTime))&&(o="onReverseComplete",s=p._reversed),e<0)p._active=!1,p._timeline.autoRemoveChildren&&p._reversed?(a=s=!0,o="onReverseComplete"):0<=p._rawPrevTime&&p._first&&(a=!0),p._rawPrevTime=e;else{if(p._rawPrevTime=p._duration||!t||e||p._rawPrevTime===e?e:1e-8,0===e&&s)for(n=p._first;n&&0===n._startTime;)n._duration||(s=!1),n=n._next;e=0,p._initted||(a=!0)}else p._totalTime=p._time=p._rawPrevTime=e;if(p._time!==u&&p._first||i||a||l){if(p._initted||(p._initted=!0),p._active||!p._paused&&p._time!==u&&0<e&&(p._active=!0),0===u&&p.vars.onStart&&(0===p._time&&p._duration||t||p._callback("onStart")),u<=(h=p._time))for(n=p._first;n&&(r=n._next,h===p._time&&(!p._paused||g));)(n._active||n._startTime<=h&&!n._paused&&!n._gc)&&(l===n&&(p.pause(),p._pauseTime=c),n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,i):n.render((e-n._startTime)*n._timeScale,t,i)),n=r;else for(n=p._last;n&&(r=n._prev,h===p._time&&(!p._paused||g));){if(n._active||n._startTime<=u&&!n._paused&&!n._gc){if(l===n){for(l=n._prev;l&&l.endTime()>p._time;)l.render(l._reversed?l.totalDuration()-(e-l._startTime)*l._timeScale:(e-l._startTime)*l._timeScale,t,i),l=l._prev;l=null,p.pause(),p._pauseTime=c}n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,i):n.render((e-n._startTime)*n._timeScale,t,i)}n=r}p._onUpdate&&(t||(S.length&&T(),p._callback("onUpdate"))),o&&(p._gc||m!==p._startTime&&f===p._timeScale||!(0===p._time||d>=p.totalDuration())||(s&&(S.length&&T(),p._timeline.autoRemoveChildren&&p._enabled(!1,!1),p._active=!1),!t&&p.vars[o]&&p._callback(o)))}},t._hasPausedChild=function(){for(var e=this._first;e;){if(e._paused||e instanceof f&&e._hasPausedChild())return!0;e=e._next}return!1},t.getChildren=function(e,t,i,n){n=n||-9999999999;for(var s=[],r=this._first,o=0;r;)r._startTime<n||(r instanceof m?!1!==t&&(s[o++]=r):(!1!==i&&(s[o++]=r),!1!==e&&(o=(s=s.concat(r.getChildren(!0,t,i))).length))),r=r._next;return s},t.getTweensOf=function(e,t){var i,n,s=this._gc,r=[],o=0;for(s&&this._enabled(!0,!0),n=(i=m.getTweensOf(e)).length;-1<--n;)(i[n].timeline===this||t&&this._contains(i[n]))&&(r[o++]=i[n]);return s&&this._enabled(!1,!0),r},t.recent=function(){return this._recent},t._contains=function(e){for(var t=e.timeline;t;){if(t===this)return!0;t=t.timeline}return!1},t.shiftChildren=function(e,t,i){i=i||0;for(var n,s=this._first,r=this._labels;s;)s._startTime>=i&&(s._startTime+=e),s=s._next;if(t)for(n in r)r[n]>=i&&(r[n]+=e);return this._uncache(!0)},t._kill=function(e,t){if(!e&&!t)return this._enabled(!1,!1);for(var i=t?this.getTweensOf(t):this.getChildren(!0,!0,!1),n=i.length,s=!1;-1<--n;)i[n]._kill(e,t)&&(s=!0);return s},t.clear=function(e){var t=this.getChildren(!1,!0,!0),i=t.length;for(this._time=this._totalTime=0;-1<--i;)t[i]._enabled(!1,!1);return!1!==e&&(this._labels={}),this._uncache(!0)},t.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return p.prototype.invalidate.call(this)},t._enabled=function(e,t){if(e===this._gc)for(var i=this._first;i;)i._enabled(e,!0),i=i._next;return u.prototype._enabled.call(this,e,t)},t.totalTime=function(e,t,i){this._forcingPlayhead=!0;var n=p.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,n},t.duration=function(e){return arguments.length?(0!==this.duration()&&0!==e&&this.timeScale(this._duration/e),this):(this._dirty&&this.totalDuration(),this._duration)},t.totalDuration=function(e){if(arguments.length)return e&&this.totalDuration()?this.timeScale(this._totalDuration/e):this;if(this._dirty){for(var t,i,n=0,s=this,r=s._last,o=999999999999;r;)t=r._prev,r._dirty&&r.totalDuration(),r._startTime>o&&s._sortChildren&&!r._paused&&!s._calculatingDuration?(s._calculatingDuration=1,s.add(r,r._startTime-r._delay),s._calculatingDuration=0):o=r._startTime,r._startTime<0&&!r._paused&&(n-=r._startTime,s._timeline.smoothChildTiming&&(s._startTime+=r._startTime/s._timeScale,s._time-=r._startTime,s._totalTime-=r._startTime,s._rawPrevTime-=r._startTime),s.shiftChildren(-r._startTime,!1,-9999999999),o=0),n<(i=r._startTime+r._totalDuration/r._timeScale)&&(n=i),r=t;s._duration=s._totalDuration=n,s._dirty=!1}return this._totalDuration},t.paused=function(e){if(!1===e&&this._paused)for(var t=this._first;t;)t._startTime===this._time&&"isPause"===t.data&&(t._rawPrevTime=0),t=t._next;return p.prototype.paused.apply(this,arguments)},t.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===p._rootFramesTimeline},t.rawTime=function(e){return e&&(this._paused||this._repeat&&0<this.time()&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(e)-this._startTime)*this._timeScale},f},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(){"use strict";function e(){return(_gsScope.GreenSockGlobals||_gsScope).TimelineMax}"undefined"!=typeof module&&module.exports?(require("./TweenLite.min.js"),module.exports=e()):"function"==typeof define&&define.amd&&define(["TweenLite"],e)}(),function(e){if(!Object.defineProperty)throw"Font.js requires Object.defineProperty, which this browser does not support.";if(!document.createElement("canvas").getContext)throw"Font.js requires <canvas> and the Canvas2D API, which this browser does not support.";var t;function i(){}!function(e){try{new Uint8Array(1);return}catch(e){}function n(e,t){return this.slice(e,t)}function s(e,t){var i,n=e.length;for(arguments.length<2&&(t=0),i=0;i<n;++i,++t)this[t]=255&e[i]}function t(e){var t,i;if("number"==typeof e)for(t=new Array(e),i=0;i<e;++i)t[i]=0;else t=e.slice(0);return t.subarray=n,(t.buffer=t).byteLength=t.length,t.set=s,"object"==typeof e&&e.buffer&&(t.buffer=e.buffer),t}e.Uint8Array=t,e.Uint32Array=t,e.Int32Array=t}(e),(t=e).opera||"response"in XMLHttpRequest.prototype||"mozResponseArrayBuffer"in XMLHttpRequest.prototype||"mozResponse"in XMLHttpRequest.prototype||"responseArrayBuffer"in XMLHttpRequest.prototype||(t=t.VBArray?function(){return new Uint8Array(new VBArray(this.responseBody).toArray())}:function(){this.responseBody},Object.defineProperty(XMLHttpRequest.prototype,"response",{get:t})),e.btoa||(e.btoa=function(e){var t,i,n,s,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=0,a=0,l="",h=[];if(!e)return e;for(;t=(s=e.charCodeAt(o++)<<16|e.charCodeAt(o++)<<8|e.charCodeAt(o++))>>12&63,i=s>>6&63,n=63&s,h[a++]=r.charAt(s>>18&63)+r.charAt(t)+r.charAt(i)+r.charAt(n),o<e.length;);var l=h.join(""),c=e.length%3;return(c?l.slice(0,c-3):l)+"===".slice(c||3)}),i.prototype.fontFamily="fjs"+(999999*Math.random()|0),i.prototype.url="",i.prototype.format="",i.prototype.data="",i.prototype.base64="AAEAAAAKAIAAAwAgT1MvMgAAAAAAAACsAAAAWGNtYXAAAAAAAAABBAAAACxnbHlmAAAAAAAAATAAAAAQaGVhZAAAAAAAAAFAAAAAOGhoZWEAAAAAAAABeAAAACRobXR4AAAAAAAAAZwAAAAIbG9jYQAAAAAAAAGkAAAACG1heHAAAAAAAAABrAAAACBuYW1lAAAAAAAAAcwAAAAgcG9zdAAAAAAAAAHsAAAAEAAEAAEAZAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAABAAMAAQAAAAwABAAgAAAABAAEAAEAAABB//8AAABB////wAABAAAAAAABAAAAAAAAAAAAAAAAMQAAAQAAAAAAAAAAAABfDzz1AAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAEAAgAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAIAAAAAQAAAAIAAQABAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAIAHgADAAEECQABAAAAAAADAAEECQACAAIAAAAAAAEAAAAAAAAAAAAAAAAAAA==",i.prototype.metrics={quadsize:0,leading:0,ascent:0,descent:0,weightclass:400},i.prototype.systemfont=!1,i.prototype.loaded=!1,i.prototype.onload=function(){},i.prototype.onerror=function(){},i.prototype.canvas=!1,i.prototype.context=!1,i.prototype.validate=function(e,t,i,n,s){!1!==s&&s<0?this.onerror("Requested system font '"+this.fontFamily+"' could not be loaded (it may not be installed)."):0<document.defaultView.getComputedStyle(e,"").getPropertyValue("width").replace("px","")?(document.head.removeChild(t),document.body.removeChild(e),this.loaded=!0,this.onload()):setTimeout(function(){n.validate(e,t,i,n,!1!==s&&s-50)},50)},i.prototype.ondownloaded=function(){function e(e){if(e<256)return s(0)+s(e);var t=255&e;return s(e>>8)+s(t)}function t(e,t){var i=e>>7==1,t=256*(e&=127)+t;return i?t-32768:t}function i(e,t,i,n){return 16777216*e+65536*t+256*i+n}function n(e){this.onerror(e)}var s=function(e){return String.fromCharCode(e)},r=s(0)+s(1)+s(0)+s(0),o=this.data,a=s(o[0])+s(o[1])+s(o[2])+s(o[3]),l=a===r,r=!l&&"OTTO"===a;if(l)this.format="truetype";else{if(!r)return void n("Error: file at "+this.url+" cannot be interpreted as OpenType font.");this.format="opentype"}for(var h=12+16*(v=256*o[4]+o[5]),c={},p=12;p<h;p+=16)d=s(o[p])+s(o[p+1])+s(o[p+2])+s(o[p+3]),c[d]={name:d,checksum:i(o[p+4],o[p+5],o[p+6],o[p+7]),offset:i(o[p+8],o[p+9],o[p+10],o[p+11]),length:i(o[p+12],o[p+13],o[p+14],o[p+15])};function u(e){return c[e]?e:(n("Error: font is missing the required OpenType '"+e+"' table."),!1)}var d;if(!1!==(d=u("head"))){p=c[d].offset,c[d].version=""+o[p]+o[p+1]+o[p+2]+o[p+3];r=256*o[p+18]+o[p+19];if(this.metrics.quadsize=r,!1!==(d=u("hhea"))&&(p=c[d].offset,c[d].version=""+o[p]+o[p+1]+o[p+2]+o[p+3],this.metrics.ascent=t(o[p+4],o[p+5])/r,this.metrics.descent=t(o[p+6],o[p+7])/r,this.metrics.leading=t(o[p+8],o[p+9])/r,!1!==(d=u("OS/2"))&&(p=c[d].offset,c[d].version=""+o[p]+o[p+1],this.metrics.weightclass=256*o[p+4]+o[p+5],!1!==(d=u("cmap"))))){p=c[d].offset,c[d].version=""+o[p]+o[p+1];for(var m,f,g,v=256*o[p+2]+o[p+3],y=!1,b=0;b<v;b++)m=256*o[g=p+4+8*b]+o[g+1],f=256*o[g+2]+o[g+3],g=i(o[g+4],o[g+5],o[g+6],o[g+7]),3===m&&1===f&&(y=g);r="A";if(!1!==y&&4===(a=256*o[p+=y]+o[p+1])){for(var S=p+14,T=p+14+2*((256*o[p+6]+o[p+7])/2),_=!1;S<T&&(_=256*o[S]+o[S+1],-1!==[9,10,11,12,13,32,133,160,5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288].indexOf(_));S+=2)_=!1;!1!==_&&(r=String.fromCharCode(_),a=65536-(_-1),a=btoa(unescape(encodeURIComponent(s(0)+e(_)+e(65535)+e(0)+e(_)+e(65535)+e(a)+e(1)))),this.base64=this.base64.substring(0,380)+a+this.base64.substring(380+a.length))}this.bootstrapValidation(r,!1)}}},i.prototype.bootstrapValidation=function(e,t){var i=this.fontFamily+" testfont",n=document.createElement("style");n.setAttribute("type","text/css"),n.innerHTML="@font-face {\n  font-family: '"+i+"';\n  src: url('data:application/x-font-ttf;base64,"+this.base64+"')\n       format('truetype');}",document.head.appendChild(n);var s=!1;this.systemfont||(s=this.toStyleNode(),document.head.appendChild(s));var r,o=document.createElement("p");o.style.cssText="position: absolute; top: 0; left: 0; opacity: 0;",o.style.fontFamily="'"+this.fontFamily+"', '"+i+"'",o.innerHTML=e+e+e+e+e+e+e+e+e+e,document.body.appendChild(o),document.defaultView.getComputedStyle?(i=this.systemfont?1e3:this.metrics.quadsize,(e=document.createElement("canvas")).width=i,e.height=i,(e=(this.canvas=e).getContext("2d")).font="1em '"+this.fontFamily+"'",e.fillStyle="white",e.fillRect(-1,-1,i+2,i+2),e.fillStyle="black",e.fillText("test text",50,i/2),this.context=e,r=this,setTimeout(function(){r.validate(o,n,s,r,t)},50)):(this.onload(),error("Error: document.defaultView.getComputedStyle is not supported by this browser.\nConsequently, Font.onload() cannot be trusted."))},i.prototype.processSystemFont=function(){this.systemfont=!0,this.metrics=!1,this.bootstrapValidation("A",1e3)},i.prototype.loadFont=function(){var i,n=this;-1!==this.url.indexOf(".")?((i=new XMLHttpRequest).open("GET",n.url,!0),i.responseType="arraybuffer",i.onload=function(e){var t=i.response;t?(n.data=new Uint8Array(t),n.ondownloaded()):n.onerror("Error downloading font resource from "+n.url)},i.send(null)):setTimeout(function(){n.processSystemFont()},10)},i.prototype.styleNode=!1,i.prototype.toStyleNode=function(){if(this.styleNode)return this.styleNode;this.styleNode=document.createElement("style"),this.styleNode.type="text/css";var e="@font-face {\n";return e+="  font-family: '"+this.fontFamily+"';\n",e+="  src: url('"+this.url+"') format('"+this.format+"');\n",this.styleNode.innerHTML=e+="}",this.styleNode},i.prototype.measureText=function(e,t){if(!this.loaded)return error("measureText() was called while the font was not yet loaded"),!1;this.context.font=t+"px '"+this.fontFamily+"'";var i=this.context.measureText(e);i.fontsize=t,i.ascent=0,i.descent=0,i.bounds={minx:0,maxx:i.width,miny:0,maxy:0},i.height=0;var n=[];i.width,this.metrics.quadsize;n.push(e);for(var s=n.length,r=0;r<s;r++)this.measureSegment(n[r],t,i);return i},i.prototype.measureSegment=function(e,t,i){var n=document.createElement("div");n.style.position="absolute",n.style.opacity=0,n.style.font=t+"px '"+this.fontFamily+"'";for(n.innerHTML=e,p=1;p<10;p++)n.innerHTML+="<br/>"+e;document.body.appendChild(n),i.leading=1.2*t;var s=(l="height",document.defaultView.getComputedStyle(n,null).getPropertyValue(l));if(10*t<=(s=s.replace("px",""))&&(i.leading=s/10|0),document.body.removeChild(n),/^\s*$/.test(e))return i;this.canvas;var r=this.context,o=this.systemfont?1e3:this.metrics.quadsize,a=o,l=o,s=o/2,o=(o-i.width)/2;o!==(0|o)&&(o|=0),r.fillStyle="white",r.fillRect(-50,-50,a+100,l+100),r.fillStyle="black",r.fillText(e,o,s);for(var h=i.width+50|0,l=4*t,c=r.getImageData(o-25,s-l/2,h,l).data,p=0,u=0,d=4*h,m=c.length,t=l/2;++p<m&&255===c[p];);r=p/d|0;for(p=m-1;0<--p&&255===c[p];);for(o=p/d|0,u=p=0;u<h&&255===c[p];)m<=(p+=d)&&(u++,p=p-m+4);var s=u,f=1;for(p=m-3,u=0;u<h&&255===c[p];)(p-=d)<0&&(u++,p=m-3-4*f++);l=h-u;return i.ascent=t-r,i.descent=o-t,i.bounds={minx:s-25,maxx:l-25,miny:-i.descent,maxy:i.ascent},i.height=o-r+1,i},Object.defineProperty(i.prototype,"src",{set:function(e){this.url=e,this.loadFont()}}),e.Font=i}(window),function(r){(function(){if(typeof module!=="undefined"&&module.exports)return function(e){module.exports=e()};else if(typeof define==="function"&&define.amd)return define;else if(typeof window!=="undefined")return function(e){window.MobileDetect=e()};else throw new Error("unknown environment")})()(function(){"use strict";var a,l={mobileDetectRules:{phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+|\\b(BBA100|BBB100|BBD100|BBE100|BBF100|STH100)\\b-[0-9]+",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m|Android [0-9.]+; Pixel",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 6",Dell:"Dell[;]? (Streak|Aero|Venue|Venue Pro|Flash|Smoke|Mini 3iX)|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b|XT1068|XT1092|XT1052",Samsung:"\\bSamsung\\b|SM-G950F|SM-G955F|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F|SM-G920F|SM-G920V|SM-G930F|SM-N910C|SM-A310F|GT-I9190|SM-J500FN|SM-G903F|SM-J330F",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|MS323|M257)|LM-G710",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533",Asus:"Asus.*Galaxy|PadFone.*Mobile",NokiaLumia:"Lumia [0-9]{3,4}",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",Wiko:"KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo (3DS|Switch)",Amoi:"Amoi",INQ:"INQ",OnePlus:"ONEPLUS",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)",GoogleTablet:"Android.*Pixel C",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-T116BU|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|SM-T719|SM-T813|SM-T819|SM-T580|SM-T355Y?|SM-T280|SM-T817A|SM-T820|SM-W700|SM-P580|SM-T587|SM-P350|SM-P555M|SM-P355M|SM-T113NU|SM-T815Y|SM-T585|SM-T285|SM-T825|SM-W708|SM-T835|SM-T830|SM-T837V|SM-T720|SM-T510|SM-T387V",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI|KFFOWI|KFGIWI|KFMEWI)\\b|Android.*Silk/[0-9.]+ like Chrome/[0-9.]+ (?!Mobile)",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z|\\bP027\\b|\\bP024\\b|\\bP00C\\b",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\\bA3-A20\\b|\\bA3-A30",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002",LenovoTablet:"Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-850M|YT3-X90L|YT3-X90F|YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)|TB-X103F|TB-X304X|TB-X304F|TB-X304L|TB-X505F|TB-X505L|TB-X505X|TB-X605F|TB-X605L|TB-8703F|TB-8703X|TB-8703N|TB-8704N|TB-8704F|TB-8704X|TB-8704V|TB-7304F|TB-7304I|TB-7304X|Tab2A7-10F|Tab2A7-20F|TB2-X30L|YT3-X50L|YT3-X50F|YT3-X50M|YT-X705F|YT-X703F|YT-X703L|YT-X705L|YT-X705X|TB2-X30F|TB2-X30L|TB2-X30M|A2107A-F|A2107A-H|TB3-730F|TB3-730M|TB3-730X|TB-7504F|TB-7504X",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|c|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",NokiaLumiaTablet:"Lumia 2520",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP641|SGP612|SOT31|SGP771|SGP611|SGP612|SGP712",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"Android.*(bq)?.*\\b(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris ([E|M]10|M8))\\b|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim|M2-A01L|BAH-L09|BAH-W09|AGS-L09|CMR-AL19",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z930|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android.*\\bG1\\b(?!\\))",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)|Qualcore 1027",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497|VFD 1400",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9|TECNO DP8D",JXDTablet:"Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",VerizonTablet:"QTAQZ3|QTAIR7|QTAQTZ3|QTASUN1|QTASUN2|QTAXIA1",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",OndaTablet:"\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+|V10 \\b4G\\b",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b",AocTablet:"MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712",MpmanTablet:"MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",WolderTablet:"miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b",MediacomTablet:"M-MPI10C3G|M-SP10EG|M-SP10EGP|M-SP10HXAH|M-SP7HXAH|M-SP10HXBH|M-SP8HXAH|M-SP8MXA",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",LeaderTablet:"TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",KocasoTablet:"\\b(TB-1207)\\b",HisenseTablet:"\\b(F5281|E2371)\\b",Hudl:"Hudl HT7S3|Hudl 2",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b|\\bQTAQZ3\\b|WVT101|TM1088|KT107"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Windows Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad|AppleCoreMedia",iPadOS:"CPU OS 13",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+$|Coast/[0-9.]+",Skyfire:"Skyfire",Edge:"Mobile Safari/[.0-9]* Edge",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile|FxiOS",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version.*Mobile.*Safari|Safari.*Mobile|MobileSafari",WeChat:"\\bMicroMessenger\\b",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger",PaleMoon:"Android.*PaleMoon|Mobile.*PaleMoon"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:["Firefox/[VER]","FxiOS/[VER]"],Fennec:"Fennec/[VER]",Edge:"Edge/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];","Trident/[0-9.]+;.*rv:[VER]"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]",UCBrowser:["UCWEB[VER]","UC.*Browser/[VER]"],MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",SamsungBrowser:"SamsungBrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",PaleMoon:"PaleMoon/[VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",Goanna:"Goanna/[VER]",iOS:" \\bi?OS\\b [VER][ ;]{1}",Android:"Android [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{Bot:"Googlebot|facebookexternalhit|Google-AMPHTML|s~amp-validator|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|YandexMobileBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom|contentkingapp",MobileBot:"Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2",DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|Nintendo Switch|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},detectMobileBrowsers:{fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,tabletPattern:/android|ipad|playbook|silk/i}},h=Object.prototype.hasOwnProperty;function t(e,t){return null!=e&&null!=t&&e.toLowerCase()===t.toLowerCase()}function i(e,t){var i,n,s=e.length;if(!s||!t)return!1;for(i=t.toLowerCase(),n=0;n<s;++n)if(i===e[n].toLowerCase())return!0;return!1}function c(e){for(var t in e)h.call(e,t)&&(e[t]=new RegExp(e[t],"i"))}function s(e,t){this.ua=(e||"").substr(0,500),this._cache={},this.maxPhoneWidth=t||600}return l.FALLBACK_PHONE="UnknownPhone",l.FALLBACK_TABLET="UnknownTablet",l.FALLBACK_MOBILE="UnknownMobile",a="isArray"in Array?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},function(){var e,t,i,n,s,r,o=l.mobileDetectRules;for(e in o.props)if(h.call(o.props,e)){for(t=o.props[e],s=(t=!a(t)?[t]:t).length,n=0;n<s;++n)0<=(r=(i=t[n]).indexOf("[VER]"))&&(i=i.substring(0,r)+"([\\w._\\+]+)"+i.substring(r+5)),t[n]=new RegExp(i,"i");o.props[e]=t}c(o.oss),c(o.phones),c(o.tablets),c(o.uas),c(o.utils),o.oss0={WindowsPhoneOS:o.oss.WindowsPhoneOS,WindowsMobileOS:o.oss.WindowsMobileOS}}(),l.findMatch=function(e,t){for(var i in e)if(h.call(e,i)&&e[i].test(t))return i;return null},l.findMatches=function(e,t){var i,n=[];for(i in e)h.call(e,i)&&e[i].test(t)&&n.push(i);return n},l.getVersionStr=function(e,t){var i,n,s,r,o=l.mobileDetectRules.props;if(h.call(o,e))for(s=(i=o[e]).length,n=0;n<s;++n)if(null!==(r=i[n].exec(t)))return r[1];return null},l.getVersion=function(e,t){t=l.getVersionStr(e,t);return t?l.prepareVersionNo(t):NaN},l.prepareVersionNo=function(e){var t=e.split(/[a-z._ \/\-]/i);return 1===t.length&&(e=t[0]),1<t.length&&(e=t[0]+".",t.shift(),e+=t.join("")),Number(e)},l.isMobileFallback=function(e){return l.detectMobileBrowsers.fullPattern.test(e)||l.detectMobileBrowsers.shortPattern.test(e.substr(0,4))},l.isTabletFallback=function(e){return l.detectMobileBrowsers.tabletPattern.test(e)},l.prepareDetectionCache=function(e,t,i){if(e.mobile===r){var n=l.findMatch(l.mobileDetectRules.tablets,t);return n?(e.mobile=e.tablet=n,void(e.phone=null)):(n=l.findMatch(l.mobileDetectRules.phones,t))?(e.mobile=e.phone=n,void(e.tablet=null)):void(l.isMobileFallback(t)?(i=s.isPhoneSized(i))===r?(e.mobile=l.FALLBACK_MOBILE,e.tablet=e.phone=null):i?(e.mobile=e.phone=l.FALLBACK_PHONE,e.tablet=null):(e.mobile=e.tablet=l.FALLBACK_TABLET,e.phone=null):l.isTabletFallback(t)?(e.mobile=e.tablet=l.FALLBACK_TABLET,e.phone=null):e.mobile=e.tablet=e.phone=null)}},l.mobileGrade=function(e){var t=null!==e.mobile();return e.os("iOS")&&4.3<=e.version("iPad")||e.os("iOS")&&3.1<=e.version("iPhone")||e.os("iOS")&&3.1<=e.version("iPod")||2.1<e.version("Android")&&e.is("Webkit")||7<=e.version("Windows Phone OS")||e.is("BlackBerry")&&6<=e.version("BlackBerry")||e.match("Playbook.*Tablet")||1.4<=e.version("webOS")&&e.match("Palm|Pre|Pixi")||e.match("hp.*TouchPad")||e.is("Firefox")&&12<=e.version("Firefox")||e.is("Chrome")&&e.is("AndroidOS")&&4<=e.version("Android")||e.is("Skyfire")&&4.1<=e.version("Skyfire")&&e.is("AndroidOS")&&2.3<=e.version("Android")||e.is("Opera")&&11<e.version("Opera Mobi")&&e.is("AndroidOS")||e.is("MeeGoOS")||e.is("Tizen")||e.is("Dolfin")&&2<=e.version("Bada")||(e.is("UC Browser")||e.is("Dolfin"))&&2.3<=e.version("Android")||e.match("Kindle Fire")||e.is("Kindle")&&3<=e.version("Kindle")||e.is("AndroidOS")&&e.is("NookTablet")||11<=e.version("Chrome")&&!t||5<=e.version("Safari")&&!t||4<=e.version("Firefox")&&!t||7<=e.version("MSIE")&&!t||10<=e.version("Opera")&&!t?"A":e.os("iOS")&&e.version("iPad")<4.3||e.os("iOS")&&e.version("iPhone")<3.1||e.os("iOS")&&e.version("iPod")<3.1||e.is("Blackberry")&&5<=e.version("BlackBerry")&&e.version("BlackBerry")<6||5<=e.version("Opera Mini")&&e.version("Opera Mini")<=6.5&&(2.3<=e.version("Android")||e.is("iOS"))||e.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||11<=e.version("Opera Mobi")&&e.is("SymbianOS")?"B":(e.version("BlackBerry")<5||e.match("MSIEMobile|Windows CE.*Mobile")||e.version("Windows Mobile"),"C")},l.detectOS=function(e){return l.findMatch(l.mobileDetectRules.oss0,e)||l.findMatch(l.mobileDetectRules.oss,e)},l.getDeviceSmallerSide=function(){return window.screen.width<window.screen.height?window.screen.width:window.screen.height},s.prototype={constructor:s,mobile:function(){return l.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return l.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return l.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return this._cache.userAgent===r&&(this._cache.userAgent=l.findMatch(l.mobileDetectRules.uas,this.ua)),this._cache.userAgent},userAgents:function(){return this._cache.userAgents===r&&(this._cache.userAgents=l.findMatches(l.mobileDetectRules.uas,this.ua)),this._cache.userAgents},os:function(){return this._cache.os===r&&(this._cache.os=l.detectOS(this.ua)),this._cache.os},version:function(e){return l.getVersion(e,this.ua)},versionStr:function(e){return l.getVersionStr(e,this.ua)},is:function(e){return i(this.userAgents(),e)||t(e,this.os())||t(e,this.phone())||t(e,this.tablet())||i(l.findMatches(l.mobileDetectRules.utils,this.ua),e)},match:function(e){return(e=!(e instanceof RegExp)?new RegExp(e,"i"):e).test(this.ua)},isPhoneSized:function(e){return s.isPhoneSized(e||this.maxPhoneWidth)},mobileGrade:function(){return this._cache.grade===r&&(this._cache.grade=l.mobileGrade(this)),this._cache.grade}},"undefined"!=typeof window&&window.screen?s.isPhoneSized=function(e){return e<0?r:l.getDeviceSmallerSide()<=e}:s.isPhoneSized=function(){},s._impl=l,s.version="1.4.4 2019-09-21",s})}(),((_gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window)._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";function c(e,t,i){return 255*(6*(e=e<0?e+1:1<e?e-1:e)<1?t+(i-t)*e*6:e<.5?i:3*e<2?t+(i-t)*(2/3-e)*6:t)+.5|0}function i(e,t){for(var i,n,s=(e+"").match(h)||[],r=0,o=s.length?"":e,a=0;a<s.length;a++)i=s[a],r+=(n=e.substr(r,e.indexOf(i,r)-r)).length+i.length,3===(i=l(i,t)).length&&i.push(1),o+=n+(t?"hsla("+i[0]+","+i[1]+"%,"+i[2]+"%,"+i[3]:"rgba("+i.join(","))+")";return o+e.substr(r)}var n,a,p=/(\d|\.)+/g,u=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,d={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},l=function(e,t){var i,n,s,r,o,a,l,h;if(e)if("number"==typeof e)i=[e>>16,e>>8&255,255&e];else{if(","===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),d[e])i=d[e];else if("#"===e.charAt(0))4===e.length&&(e="#"+(n=e.charAt(1))+n+(s=e.charAt(2))+s+(r=e.charAt(3))+r),i=[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e];else if("hsl"===e.substr(0,3))if(i=h=e.match(p),t){if(-1!==e.indexOf("="))return e.match(u)}else o=Number(i[0])%360/360,a=Number(i[1])/100,n=2*(l=Number(i[2])/100)-(s=l<=.5?l*(a+1):l+a-l*a),3<i.length&&(i[3]=Number(e[3])),i[0]=c(o+1/3,n,s),i[1]=c(o,n,s),i[2]=c(o-1/3,n,s);else i=e.match(p)||d.transparent;i[0]=Number(i[0]),i[1]=Number(i[1]),i[2]=Number(i[2]),3<i.length&&(i[3]=Number(i[3]))}else i=d.black;return t&&!h&&(n=i[0]/255,s=i[1]/255,r=i[2]/255,l=((e=Math.max(n,s,r))+(t=Math.min(n,s,r)))/2,e===t?o=a=0:(h=e-t,a=.5<l?h/(2-e-t):h/(e+t),o=e===n?(s-r)/h+(s<r?6:0):e===s?(r-n)/h+2:(n-s)/h+4,o*=60),i[0]=o+.5|0,i[1]=100*a+.5|0,i[2]=100*l+.5|0),i},e=_gsScope.TweenLite,h="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b",t=_gsScope._gsDefine.plugin({propName:"colorProps",version:"1.5.0",priority:-1,API:2,global:!0,init:function(e,t,i,n){var s,r,o;for(s in this._target=e,this._proxy=r="NUMBER"===(t.format+"").toUpperCase()?{}:0,t)"format"!==s&&(r?(this._firstNumPT=o={_next:this._firstNumPT,t:e,p:s,f:"function"==typeof e[s]},r[s]="rgb("+l(o.f?e[s.indexOf("set")||"function"!=typeof e["get"+s.substr(3)]?s:"get"+s.substr(3)]():e[s]).join(",")+")",o=t[s],"function"==typeof o&&(o=o(n,e)),this._addTween(r,s,"get","number"==typeof o?"rgb("+l(o,!1).join(",")+")":o,s,null,null,a)):this._addTween(e,s,"get",t[s],s,null,null,a,n));return!0},set:function(e){var t,i=this._firstNumPT;for(this._super.setRatio.call(this,e);i;)t=(t=l(this._proxy[i.p],!1))[0]<<16|t[1]<<8|t[2],i.f?this._target[i.p](t):this._target[i.p]=t,i=i._next}});for(n in d)h+="|"+n+"\\b";h=new RegExp(h+")","gi"),t.colorStringFilter=a=function(e){var t=e[0]+e[1];h.lastIndex=0,h.test(t)&&(t=-1!==t.indexOf("hsl(")||-1!==t.indexOf("hsla("),e[0]=i(e[0],t),e[1]=i(e[1],t))},e.defaultStringFilter||(e.defaultStringFilter=t.colorStringFilter),t.parseColor=l,(n=t.prototype)._firstNumPT=null,n._kill=function(e){for(var t,i=this._firstNumPT;i;)i.p in e?(i===n._firstNumPT&&(this._firstNumPT=i._next),t&&(t._next=i._next)):t=i,i=i._next;return this._super._kill(e)}}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(){"use strict";function e(){return(_gsScope.GreenSockGlobals||_gsScope).ColorPropsPlugin}"function"==typeof define&&define.amd?define(["TweenLite"],e):"undefined"!=typeof module&&module.exports&&(require("../TweenLite.min.js"),module.exports=e())}();var sna={model:{},presentation:{},service:{},controller:{},module:{},debug:{},log:{}};sna.module.CORE="snaCore",sna.service.PROVIDER_SUFFIX="Provider",sna.service.Q="$q",sna.service.INTERVAL="$interval",sna.service.HTTP="$http",sna.service.INJECTOR="$injector",sna.service.CONTROLLER="$controller",sna.service.ROOT_SCOPE="$rootScope",sna.service.SCOPE="$scope",sna.service.WINDOW="$window",sna.service.COMPILE="$compile",sna.service.PIXI="Pixi",sna.service.PIXI_LOADER="PixiLoader",sna.service.TIMELINE="Timeline",sna.service.VIEW="View",sna.service.VISIBILITY_CHANGE="VisibilityChange",sna.service.TIMEOUT="$timeout",sna.service.VIEW_PROVIDER=sna.service.VIEW+sna.service.PROVIDER_SUFFIX,sna.presentation.BODY_TAG_NAME="body",sna.presentation.CANVAS_TAG_NAME="canvas",sna.presentation.DEFAULT_CANVAS_ID="game",sna.module.core=angular.module(sna.module.CORE,[]),sna.module.core.constant(sna.service.PIXI,PIXI),sna.module.core.constant(sna.service.PIXI_LOADER,PIXI.loader),sna.module.core.constant(sna.service.TIMELINE,TimelineMax),sna.service.ViewProvider=function(){this.canvas_id=sna.presentation.DEFAULT_CANVAS_ID},sna.service.ViewProvider.prototype.canvasId=function(e){this.canvas_id=e},sna.service.ViewProvider.prototype.$get=function(){var e,t=document.getElementById(this.canvas_id);return t||((t=(e=document.getElementsByTagName(sna.presentation.CANVAS_TAG_NAME))&&e.length?e[0]:t)||((e=document.getElementsByTagName(sna.presentation.BODY_TAG_NAME)[0])?(t=document.createElement(sna.presentation.CANVAS_TAG_NAME),e.appendChild(t)):log(sna.service.VIEW,"$get",sna.log.FATAL,"Required <canvas> element can't be created!"))),t},sna.module.core.provider(sna.service.VIEW,sna.service.ViewProvider),sna.module.Bootstrap=function(e){e.run()};var log=function(e,t,i,n){};sna.error={},sna.error.SCRIPT_ERROR="script",sna.error.ANGULAR_ERROR="angular",sna.error.COMMUNICATION_ERROR="communication",sna.error.SOCKET_ERROR="socket",sna.error.SECURITY_TIMEOUT_ERROR="timeout",sna.error.BACKEND_ERROR="backend",sna.error.MAX_WIN_REACHED="MAX_WIN_REACHED",sna.error.DEFAULT_ERROR_CODE="ERROR_UNKNOWN",sna.error.GAME_SESSION_CLOSED="GAME_SESSION_CLOSED",sna.error.GAME_CLIENT_OBSOLETE="GAME_CLIENT_OBSOLETE",sna.error.DEFAULT_ERROR_MESSAGE="Unhandled error has occured. \r\nIf the problem persist, please contact technical support.",sna.error.DEFAULT_COMMUNICATION_ERROR_CODE="ERROR_COMMUNICATION",sna.error.DEFAULT_COMMUNICATION_ERROR_MESSAGE="<h2>Could not connect to game server. \n\nPlease reload the game.</h2>",sna.error.DEFAULT_ERROR_FONT_SIZE=30,sna.error.presentationErrorHandler=null,sna.error.errorTranslations=null,sna.error.errorFontSize=null,sna.error.fatalErrorOccured=!1,sna.error.GENERIC_ERROR_MESSAGE={en_US:"An error has occurred. Please restart the game. Error code: {errorcode}",ar_AR:" .     .  : {errorcode}",bg_BG:" . ,  .   : {errorcode}",cs_CZ:"Dolo k chyb. Prosm restartujte hru. Kd chyby: {errorcode}",da_DK:"Der opstod en fejl. Genstart venligst spillet. Fejlkode: {errorcode}",de_DE:"Es ist ein Fehler aufgetreten. Bitte Spiel neustarten. Fehlercode: {errorcode}",el_GR:" .     .  : {errorcode}",es_ES:"Ha ocurrido un error. Por favor, reinicia el juego. Cdigo de error: {errorcode}",fi_FI:"Tapahtui virhe. Kynnist peli uudelleen. Virhekoodi: {errorcode}",fr_FR:"Une erreur est survenue. Veuillez redmarrer le jeu. Code derreur : {errorcode}",hr_HR:"Dolo je do greke. Ponovno pokrenite igru. Kod greke: {errorcode}",hu_HU:"Hiba trtnt. Krjk, indtsa jra a jtkot. Hibakd: {errorcode}",it_IT:"Si  verificato un errore. Si prega di riavviare il gioco. Codice di errore: {errorcode}",jp_JP:": {errorcode}",ka_GE:" . ,  .  : {errorcode}",nl_NL:"Er is een fout opgetreden. Gelieve het spel te herstarten. Foutcode: {errorcode}",nn_NO:"Det har oppsttt en feil. Vennligst start spillet p nytt. Feilkode: {errorcode}",pl_PL:"Wystpi bd. Zrestartuj gr.Kod bdu: {errorcode}",pt_BR:"Ocorreu um erro. Por favor, recomece o jogo. Cdigo de erro:  {errorcode}",pt_PT:"Ocorreu um erro. Por favor, recomece o jogo.  Cdigo de erro: {errorcode}",ro_RO:"A aprut o eroare. Repornete jocul. Cod de eroare: {errorcode}",ru_RU:" .  .  : {errorcode}",sk_SK:"Dolo k chybe. Retartujte hru. Kd chyby: {errorcode}",sl_SL:"Pojavila se je napaka. Prosimo, da ponovno zaenete igro. Koda napake: {errorcode}",sv_SE:"Ett fel uppstod. Starta om spelet. Felkod: {errorcode}",tr_TR:"Bir hata olutu. Ltfen oyunu tekrar balatn. Hata kodu: {errorcode}",uk_UA:" .  .  : {errorcode}",zh_CN:"{errorcode}",zh_HK:"{errorcode}",ko_KR:" .   .  : {errorcode}",th_TH:"  : {errorcode}",vi_VN:"Li xy ra. Hy khi ng li tr chi. M li: {errorcode}"},sna.error.onScriptError=function(e,t,i,n,s){e={message:e,exception:s||e,type:sna.error.SCRIPT_ERROR,code:"ERROR_SCRIPT"};sna.error.handleError(e)},sna.error.handleError=function(e){var t,i,n,s,r;sna.error.fatalErrorOccured||(sna.error.fatalErrorOccured=!0,t=e.message,i=e.error,n=e.type,s=e.code,r=null,e.exception&&-1==e.exception.status?r=sna.error.errorTranslations?sna.error.errorTranslations[sna.error.DEFAULT_COMMUNICATION_ERROR_CODE]:sna.error.DEFAULT_COMMUNICATION_ERROR_MESSAGE:s?(r=sna.error.errorTranslations?sna.error.errorTranslations[s]||sna.error.errorTranslations[sna.error.DEFAULT_ERROR_CODE]:sna.error.DEFAULT_ERROR_MESSAGE,"GAME_RESTRICTED_IN_COUNTRY"==e.exception&&(r=t)):r=t,r&&(r=(r=r.replace("{type}",n)).replace("{message}",t||i),e.message=r,r=sna.error.DEFAULT_ERROR_FONT_SIZE,sna.error.errorFontSize&&(r=sna.error.errorFontSize[s]||sna.error.errorFontSize[sna.error.DEFAULT_ERROR_CODE]||r),e.fontSize=r,sna.debug.logAllErrors&&log&&console.error("[FATAL]: Unhandled "+n+" error has occured > "+(t||i)),sna.error.presentationErrorHandler?sna.error.presentationErrorHandler.displayError(e):sna.error.displayHtmlError(e)))},sna.error.displayHtmlError=function(e){e=(e=e.message).replace(/(?:\r\n|\r|\n)/g,"<br />");document.getElementById("html-err-txt").innerHTML=e,document.getElementById("html-err-ovl").style.display="block",window.addEventListener("click",function(){window.location.reload()})},sna.module.core.factory("$exceptionHandler",["$log",function(i){return function(e,t){sna.debug.logAngularErrors&&i.error(e,t);t={type:sna.error.ANGULAR_ERROR,error:e,message:t,code:"ERROR_ANGULAR"};sna.error.handleError(t)}}]);log=function(e,t,i,n,s){if(sna.debug.enableLogging){e=e.name||e;if(filterLevel=sna.log.getLogLevel(e,t),sna.log.allowed(i,filterLevel)&&sna.log.logIntoConsole(e,t,i,n,s),sna.log.allowed(i,sna.log.htmlLogLevel))throw new Error("HTML logging is not implemented!");if(sna.log.allowed(i,sna.log.canvasLogLevel))throw new Error("Canvas logging is not implemented!")}};function getParameterByName(e,t){t=t||window.location.href,e=e.replace(/[\[\]]/g,"\\$&");t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}sna.log.getLogLevel=function(e,t){var i=sna.log,n=i.logLevels,i=i.consoleLogLevel;return n&&(i=n.def||i,sourceLevels=n[e],sourceLevels&&(i=sourceLevels[t]||sourceLevels.def||i)),i},sna.log.DEBUG="D",sna.log.INFO="I",sna.log.IMPORTANT="M",sna.log.WARNING="W",sna.log.ERROR="E",sna.log.FATAL="F",sna.log.NONE="N",sna.log.logLevels={def:sna.log.IMPORTANT,PresentationService:{def:sna.log.IMPORTANT,createAnimationTimeline:sna.log.DEBUG},MainService:{def:sna.log.IMPORTANT},CommonLoaderService:{loadAssets:sna.log.IMPORTANT},HandsContainer:{def:sna.log.IMPORTANT},BlackjackInterfaceService:{def:sna.log.IMPORTANT},SlotMotionBlackjackInterfaceService:{def:sna.log.IMPORTANT},AlcaponeLoaderService:{def:sna.log.IMPORTANT},VikingsLoaderService:{def:sna.log.IMPORTANT},SoundService:{def:sna.log.IMPORTANT},FireWizardCommunicationService:{def:sna.log.DEBUG},StickySymbolsContainer:{def:sna.log.IMPORTANT}},sna.log.ORDER="DIMWEFN",sna.log.consoleLogLevel=sna.log.DEBUG,sna.log.htmlLogLevel=sna.log.NONE,sna.log.canvasLogLevel=sna.log.NONE,sna.log.logIntoConsole=function(e,t,i,n,s){var r=sna.log.formatConsoleDate(new Date),o=sna.log.formatLogLevel(i);sna.log.displayLogMessageInConsole(i,"["+o+"] "+r+" "+e+":"+t+" > "+n,s)},sna.log.displayLogMessageInConsole=function(e,t,i){switch(e){case sna.log.ERROR:case sna.log.FATAL:void 0!==i?console.error(t,i):console.error(t);break;case sna.log.IMPORTANT:case sna.log.WARNING:void 0!==i?console.warn(t,i):console.warn(t);break;case sna.log.INFO:void 0!==i?console.info(t,i):console.info(t);break;case sna.log.DEBUG:void 0!==i?console.log(t,i):console.log("%c"+t,"color: green")}},sna.log.allowed=function(e,t){if(t!==sna.log.NONE){var i=sna.log.ORDER;return i.indexOf(e)>=i.indexOf(t)}},sna.log.pad=function(e,t){e="0000".concat(String(e));return e.substring(e.length-t)},sna.log.formatConsoleDate=function(e){var t=sna.log.pad,i="";return i+=t(e.getDate(),2)+".",i+=t(e.getMonth()+1,2)+".",i+=t(e.getFullYear(),4)+". ",i+=t(e.getHours(),2)+":",i+=t(e.getMinutes(),2)+":",i+=t(e.getSeconds(),2)+"::",i+=t(e.getMilliseconds(),3)},sna.log.formatLogLevel=function(t){var i=!1;return angular.forEach(["DEBUG","INFO","IMPORTANT","WARNING","ERROR","FATAL","NONE"],function(e){return!(i=sna.log[e]==t?e:i)}),i||t},sna.debug.logAngularErrors=!1,sna.debug.logAllErrors=!1,sna.debug.enableLogging=!1,sna.debug.enableLoggingSounds=!1,sna.debug.logConfigDelays=!1,sna.debug.enableWrapperButtonState=!1,sna.debug.logJsDelays=!1,sna.debug.displayAssetsLoadingProgress=!1,sna.debug.enableVisualDebug=!1,sna.debug.VISUAL_DEBUG_PARAMETER="visualDebug",sna.debug.enableCheats=1==getParameterByName("demo"),sna.debug.pauseGameExecution=!1,sna.debug.preventFullscreen=!1,sna.debug.debugFps=!1,sna.debug.debugPanelEnabled=!1,sna.debug.canvasDebug=!1,sna.debug.layout=!1,sna.debug.presentationTree=!1,sna.debug.frameCount=0,sna.debug.fpsDisplayInterval=1e3,sna.debug.FPS_DEBUG_THRESHOLD=55,sna.debug.FPS_INFO_THRESHOLD=50,sna.debug.FPS_IMPORTANT_THRESHOLD=40,sna.debug.FPS_WARNING_THRESHOLD=30,sna.debug.FPS_ERROR_THRESOLD=10,sna.debug.FPS_MESSAGE="FPS: ",sna.debug.debugPresentation=null,sna.debug.updateFps=function(){sna.debug.frameCount++},sna.debug.logFps=function(){var e=Math.round(100*sna.debug.frameCount*1e3/sna.debug.fpsDisplayInterval)/100,t=sna.debug.FPS_MESSAGE+e;sna.debug.debugPresentation?sna.debug.debugPresentation.children[0]&&(sna.debug.debugPresentation.children[0].text=t):(e=e>=sna.debug.FPS_DEBUG_THRESHOLD?sna.log.DEBUG:e>=sna.debug.FPS_INFO_THRESHOLD?sna.log.INFO:e>=sna.debug.FPS_IMPORTANT_THRESHOLD?sna.log.IMPORTANT:e>=sna.debug.FPS_WARNING_THRESHOLD?sna.log.WARNING:e>=sna.debug.FPS_ERROR_THRESOLD?sna.log.ERROR:sna.log.FATAL,log("debug","logFps",e,t)),sna.debug.frameCount=0},sna.debug.debugPresentationOptions=["env","fps","size","ratio","screen","layout","view","canvas","renderer"],sna.debug.createDebugPresentation=function(e,t,i){var n,s,r,o,a,l=e.scope.layout,e=0,h=new PIXI.Container;return h.x=.5*-t.width/l.resolution,h.y=.5*-t.height/l.resolution,h.positionElement=function(){},h.updateLayout=function(){h.x=.5*-t.width/l.resolution,h.y=.5*-t.height/l.resolution},h.scope={config:{layer:"DEBUG"}},sna.debug.debugFps&&(-1==window.location.href.indexOf("displayDebug=1")||(-1!=sna.debug.debugPresentationOptions.indexOf("fps")&&((s=new PIXI.Text(n="FPS:")).style.fill="white",s.style.font="15px Arial",s.style.stroke="black",s.style.strokeThickness=10,s.x=10,s.y=10+20*e,e++,h.addChild(s)),-1!=sna.debug.debugPresentationOptions.indexOf("env")&&(n="ENV "+l.id+": "+l.environmentTags.toString()+","+l.layoutTags.toString(),(s=new PIXI.Text(n)).style.fill="white",s.style.font="15px Arial",s.style.stroke="black",s.style.strokeThickness=10,s.x=10,s.y=10+20*e,e++,h.addChild(s)),-1!=sna.debug.debugPresentationOptions.indexOf("size")&&(r="Assets:"+l.selectedSize.name,(r=new PIXI.Text(r)).style.fill="white",r.style.font="15px Arial",r.style.stroke="black",r.style.strokeThickness=10,r.x=10,r.y=10+20*e,e++,h.addChild(r)),-1!=sna.debug.debugPresentationOptions.indexOf("ratio")&&(r="Res: "+l.pixelRatio+"/"+(l.backStoreRatio||1)+"("+l.resolution+")",(r=new PIXI.Text(r)).style.fill="white",r.style.font="15px Arial",r.style.stroke="black",r.style.strokeThickness=10,r.x=10,r.y=10+20*e,e++,h.addChild(r)),-1!=sna.debug.debugPresentationOptions.indexOf("screen")&&(o="Screen: "+l.screenWidth+"x"+l.screenHeight,(o=new PIXI.Text(o)).style.fill="white",o.style.font="15px Arial",o.style.stroke="black",o.style.strokeThickness=10,o.x=10,o.y=10+20*e,e++,h.addChild(o)),-1!=sna.debug.debugPresentationOptions.indexOf("layout")&&(o="Layout: "+l.width+"x"+l.height,(o=new PIXI.Text(o)).style.stroke="black",o.style.strokeThickness=10,o.style.fill="white",o.style.font="15px Arial",o.x=10,o.y=10+20*e,e++,h.addChild(o)),-1!=sna.debug.debugPresentationOptions.indexOf("view")&&(a="Viewport: "+t.width+"x"+t.height,(a=new PIXI.Text(a)).style.stroke="black",a.style.strokeThickness=10,a.style.fill="white",a.style.font="15px Arial",a.x=10,a.y=10+20*e,e++,h.addChild(a)),-1!=sna.debug.debugPresentationOptions.indexOf("canvas")&&(a="Canvas: "+t.style.width.replace("px","")+"x"+t.style.height.replace("px",""),(a=new PIXI.Text(a)).style.stroke="black",a.style.strokeThickness=10,a.style.fill="white",a.style.font="15px Arial",a.x=10,a.y=10+20*e,e++,h.addChild(a)),-1!=sna.debug.debugPresentationOptions.indexOf("renderer")&&(i="Renderer: "+(i instanceof PIXI.CanvasRenderer?"Canvas":"WebGL")+" x "+i.resolution,(i=new PIXI.Text(i)).style.stroke="black",i.style.strokeThickness=10,i.style.fill="white",i.style.font="15px Arial",i.x=10,i.y=10+20*e,e++,h.addChild(i)))),h},sna.debug.beginFpsDebug=function(){setInterval(sna.debug.logFps,sna.debug.fpsDisplayInterval)},sna.debugLayout=function(e){if(slot.debug&&slot.debug.layoutDebug){var t,i,n=new PIXI.Graphics;n.beginFill(16711935,0),n.lineStyle(5,16711935,1);var s=slot.presentation.LAYOUT_ALIGN;switch(this.layoutAlign){case s.CENTER:i=-this.layoutWidth/2,t=-this.layoutHeight/2;break;case s.BOTTOM:i=-this.layoutWidth/2,t=-this.layoutHeight;break;case s.TOP:i=-this.layoutWidth/2,t=0}n.drawRect(i,t,this.layoutWidth,this.layoutHeight),n.endFill(),this.addChild(n)}},sna.debug.displayPresentationTree=function(t,e){for(var i="",n=t||0;n--;)i+=" ";i+="-> ",i+=sna.presentation.util.describe(e),console.log(i),angular.forEach(e.children,function(e){sna.debug.displayPresentationTree(t+1,e)},this)},sna.debug.watch=function(t,i){t["_"+i]=t[i],Object.defineProperty(t,i,{get:function(){return t["_"+i]},set:function(e){return t["_"+i]=e}})},sna.debug.addDebugPanel=function(e,t){sna.debug.enableCheats&&sna.debug.debugPanelEnabled&&(e.getById("stage"),t.game.additionalPresentation.debugPanel={},t.game.debugPanel={type:"LayoutContainer",layer:"DEBUG_PANEL",id:"debugPanel",align:"c",fill:"R",width:"1920px",height:"1080px",children:[{type:"Container",x:{dynamic:!0,default:-750},y:{dynamic:!0,default:-240},id:"debugPanelContainer",visible:!1,yOffset:35,textButton:{type:"TextButton",text:"",align:"c",anchorAlign:"l",size:34,fill:"#FFC000",stroke:"#000000",thickness:2,onPress:"removeMe"},children:[{type:"Graphics",id:"",align:"tl",variant:"Rectangle",width:400,height:600,alpha:.6,color:"0X000000",opaque:!1,animation:[]},{type:"Container",align:"tl",x:-200,y:-275,children:[],animation:[]}],animation:[]},{x:{dynamic:!0,default:-945},y:{dynamic:!0,default:-485},type:"TextButton",text:"HIDE/SHOW CHEAT PANEL",align:"c",anchorAlign:"l",size:29,fill:"#FFC000",stroke:"#000000",thickness:2,onPress:"showHideDebugPanel"}],animation:[]},t.layers.push("DEBUG_PANEL"))},sna.model.utils={},sna.model.utils.toBool=function(e){return!!e},sna.model.utils.neq=function(e,t){return e!=t},sna.model.utils.eq=function(e,t){return e==t},sna.model.utils.and=function(e,t){return e&&t},sna.model.utils.mul=function(e,t){return e*t},sna.model.utils.mulAll=function(){return[].slice.call(arguments).reduce(function(e,t,i,n){return e*t},1)},sna.model.utils.div=function(e,t){return e/t},sna.model.utils.mod=function(e,t){return e%t},sna.model.utils.sub=function(e,t){return e-t},sna.model.utils.gt=function(e,t){return t<e},sna.model.utils.lt=function(e,t){return e<t},sna.model.utils.not=function(e){return!e},sna.model.utils.exeq=function(e,t){return e===t},sna.model.utils.or=function(e,t){return e||t},sna.model.utils.isUndefined=function(e){return void 0===e},sna.model.utils.isNumber=function(e){return"number"==typeof e},sna.model.utils.charAt=function(e,t){return e&&t<e.length?e.charAt(t):""},sna.model.utils.mapMul=function(e,t){return e.map(function(e){return e*t})},sna.model.utils.replace=function(e,t,i,n,s){return n&&(n=angular.copy(n),"false"!=s&&(n.sign=""),i=sna.service.util.formatCurrency(i,n)),e.replace(t,i)},sna.model.utils.concat=function(){for(var e="",t=Array.prototype.slice.call(arguments),i=t.length;i--;)e+=t[i];return e},sna.model.utils.add=function(){for(var e=0,t=Array.prototype.slice.call(arguments),i=t.length;i--;)e+=t[i];return e},sna.model.utils.any=function(){for(var e=Array.prototype.slice.call(arguments),t=e[0],i=1;i<e.length;i++)if(e[i]===t)return!0;return!1},sna.model.utils.inArray=function(e,t){return-1<e.indexOf(t)},sna.model.utils.shuffle=function(e){for(var t,i,n=e.length-1;0<n;n--)t=Math.floor(Math.random()*(n+1)),i=e[n],e[n]=e[t],e[t]=i;return e},sna.model.utils.angleInRadians=function(e){return 2*Math.PI/e},sna.model.utils.reverse=function(e){return e.slice().reverse()},sna.model.utils.randomBetween=function(e,t){return Math.random()*(t-e)+e},sna.model.utils.randomIntegerBetween=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e},sna.model.utils.pickRandomValue=function(){var e=arguments[0];if(void 0!==e)return(e=e.constructor!==Array?[].slice.call(arguments):e)[Math.floor(Math.random()*e.length)]},sna.model.utils.getRandomArrayElements=function(e,t){for(var i,n,s=e.slice(0),r=e.length,o=r-t;r-- >o;)i=s[n=Math.floor((r+1)*Math.random())],s[n]=s[r],s[r]=i;return s.slice(o)},sna.model.utils.getMaxFromArray=function(e){return Math.max.apply(null,e)},sna.model.utils.getMinFromArray=function(e){return Math.min.apply(null,e)},sna.model.utils.getYear=function(){return(new Date).getFullYear()},Number.prototype.pad=function(e){for(var t=String(this);t.length<(e||1);)t="0"+t;return t},Number.prototype.countDecimals=function(){return Math.floor(this.valueOf())!==this.valueOf()&&this.toString().split(".")[1].length||0},Number.prototype.addZeroes=function(e){var t=this;return t=String(t).split(".").length<e||String(t).split(".")[1]&&String(t).split(".")[1].length<=e?t.toFixed(e):t},sna.service.util={},sna.service.util.shuffle=function(e){for(var t,i,n=e.length;n;n--)t=Math.floor(Math.random()*n),i=e[n-1],e[n-1]=e[t],e[t]=i},sna.service.util.sortIntArr=function(e){return e.sort(function(e,t){return e-t})},sna.service.util.fillReelsArray=function(e,t,i){for(var n=[],s=0;s<t;s++){n[s]=[];for(var r=0;r<i;r++)n[s][r]="function"==typeof e?e(s,r):e}return n},sna.service.util.shuffleArray=function(e){for(var t=e.length-1;0<t;t--){var i=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[i],e[i]=n}return e},sna.service.util.insertValueAtIndex=function(e,t,i){return e.slice(0,i).concat(t,e.slice(i))},sna.service.util.fillArray=function(e,t){for(var i=[],n=0;n<t;n++)i[n]="function"==typeof e?e(n):e;return i},sna.service.util.writeCookie=function(e,t,i){var n,s;document.SNA&&document.SNA.Config&&!1===document.SNA.Config.useCookies||(n="",i=i||1e3,(s=new Date).setTime(s.getTime()+24*i*60*60*1e3),n="; expires="+s.toUTCString(),document.cookie=e+"="+t+n+"; path=/")},sna.service.util.readCookie=function(e){if(!document.SNA||!document.SNA.Config||!1!==document.SNA.Config.useCookies){for(var t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var s=i[n];" "==s.charAt(0);)s=s.substring(1,s.length);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return null}},sna.service.util.removeCookie=function(e){sna.service.util.writeCookie(e,"",-1)},sna.service.util.getIEBrowserVersion=function(){return window.navigator.userAgent.indexOf("MSIE")&&document.documentMode?document.documentMode:0},sna.service.util.isWebGlSupported=function(){var e=document.createElement("canvas"),t=!1,i=e.getContext("webgl")||e.getContext("experimental-webgl");if(i){e=i.getExtension("WEBGL_debug_renderer_info"),e=(i.getParameter(e.UNMASKED_VENDOR_WEBGL),i.getParameter(e.UNMASKED_RENDERER_WEBGL));if(e&&-1!==e.indexOf("Google"))return t=!1}return t=i&&i instanceof WebGLRenderingContext?!0:t},sna.service.util.formatCurrency=function(e,t){var i=t.currency_sep||"",n=void 0!==t.sign&&"VCD"!=t.sign?t.sign:"",s=t.sign_after,r=void 0!==t.decimal_sep?t.decimal_sep:".",o=void 0!==t.thousand_sep?t.thousand_sep:",",a=void 0!==t.decimals?t.decimals:2,t=Math.pow(10,a),l=h=parseFloat(Math.round(e*t)/t).toFixed(a),h=a?l.slice(-(a+1)):"";for(n&&a&&(h=h.substr(0,0)+r+h.substr(1)),a&&(l=l.slice(0,-(a+1)));h=l.slice(-3)+h,(l=l.slice(0,-3))&&(h=(o||"")+h),l;);return h=1==s?h+i+n:"string"==typeof s||s instanceof String?n+i+h+s:n+i+h},sna.service.util.msToTime=function(e){return new Date(e).toISOString().slice(11,19)},sna.service.util.msToTimeAmPm=function(e){var t=new Date(e).toISOString().slice(11,19),i=+t.substr(0,2),e=i%12||12,i=i<12||24==i?"AM":"PM";return t=(e=e<10?"0"+e:e)+t.substr(2,3)+i},sna.service.util.msToDate=function(e){return new Date(e).toISOString().slice(0,10).split("-").slice().reverse().join("/")},sna.service.util.msToDateShortYear=function(e){e=new Date(e).toISOString().slice(0,10).split("-").slice().reverse();return e.push("'"+e.pop().substr(2)),e.join("/")},sna.service.util.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},sna.service.util.returnIf=function(e,t){for(var i=t.split("."),n=e[i[0]]||{},s=1;s<i.length;s++){if(!n[i[s]])return!1;n=n[i[s]]}return n},sna.service.util.trimHex=function(e){return e.replace(/^\s+|\s+$/gm,"")},sna.service.util.createTable=function(e,t){var n="<table>";for(i=0;i<t.elements.length;i++){for(n+="<tr>",j=0;j<t.elements[i].length;j++)n+=0==i?"<th>":"<td>",n+=e.parseValue(this,t.elements[i][j]),n+=0==i?"</th>":"</td>";n+="</tr>"}return n+="</table>"},sna.service.util.rgbaToHex=function(e){if("#"===e[0])return"0x"+e.substring(1);var t=e.substring(e.indexOf("(")).split(","),i=parseInt(sna.service.util.trimHex(t[0].substring(1)),10),n=parseInt(sna.service.util.trimHex(t[1]),10),e=parseInt(sna.service.util.trimHex(t[2]),10),s=(parseFloat(sna.service.util.trimHex(t[3].substring(0,t[3].length-1))).toFixed(2),[i.toString(16),n.toString(16),e.toString(16)]);return s.forEach(function(e,t){1===e.length&&(s[t]="0"+e)}),"0x"+s.join("")},sna.service.ENVIRONMENT="EnvironmentService",sna.service.ENVIRONMENT_PROVIDER=sna.service.ENVIRONMENT+sna.service.PROVIDER_SUFFIX,sna.service.DEFAULT_ASPECT_RATIO=1920/1080,sna.service.NO_PREFERRED_ASPECT_RATIO=void 0,sna.service.RESIZE_EVENT="resize",sna.service.ASPECT_RATIO_SQUARE=1,sna.service.ENVIRONMENT_DESKTOP="Desktop",sna.service.ENVIRONMENT_TABLET="Tablet",sna.service.ENVIRONMENT_MOBILE="Mobile",sna.service.ENVIRONMENT_IPHONE="iPhone",sna.service.ENVIRONMENT_IPHONE_5="iPhone5",sna.service.ENVIRONMENT_IPHONE_7="iPhone7",sna.service.ENVIRONMENT_IPHONE_X="iPhoneX",sna.service.ENVIRONMENT_IPHONE_X_PORTRIAT="iPhoneXPortrait",sna.service.ENVIRONMENT_IPAD="iPad",sna.service.ENVIRONMENT_WINDOWS="Windows",sna.service.ENVIRONMENT_LINUX="Linux",sna.service.ENVIRONMENT_IOS="iOS",sna.service.ENVIRONMENT_ANDROID="Android",sna.service.ENVIRONMENT_MAC="macBook",sna.service.ENVIRONMENT_CHROME="Chrome",sna.service.ENVIRONMENT_FIREFOX="Firefox",sna.service.ENVIRONMENT_EXPLORER="IE",sna.service.ENVIRONMENT_SAFARI="Safari",sna.service.ENVIRONMENT_OPERA="Opera",sna.service.ENVIRONMENT_EDGE="Edge",sna.service.ENVIRONMENT_BLINK="Blink",sna.service.ENVIRONMENT_PIN_UP_CASINO="pin-up",sna.service.ENVIRONMENT_LANG="en",sna.service.DISABLE_IOS_FS="DisableIOSFS",sna.service.ENVIRONMENT_FULLSCREEN="Fullscreen",sna.service.ENVIRONMENT_WINDOWED="Windowed",sna.service.ENVIRONMENT_PORTRAIT="Portrait",sna.service.ENVIRONMENT_LANDSCAPE="Landscape",sna.service.Environment=function(e){this.name=sna.service.ENVIRONMENT,this.environmentTags=[],this.onLayoutChangeCallbacks=[],this.preferredAspectRatio=e.aspectRatio,this.allowTabletPortrait=e.allowTabletPortrait,this.useCustomAspectRatioDesktop=e.useCustomAspectRatioDesktop,this.scope=null,this.window=null,this.view=null,this.layoutId=0,this.setupHTMLReferences()},sna.service.Environment.prototype.init=function(){this.loadQueryParams(),this.detectEnvironment();var e=this.getLayout();this.scope.layout=e,this.setupScreenResize(),this.scope.layout.has(sna.service.ENVIRONMENT_IPHONE)&&!this.scope.layout.has(sna.service.ENVIRONMENT_CHROME)&&this.setupIosFullscreen(),this.setupMainContainerStyleFlags(),log(this.name,"init",sna.log.INFO,"Layout created: ",e),this.setEnvironmentLanguage()},sna.service.Environment.prototype.setupHTMLReferences=function(){this.fsDiv=document.getElementById("ios-fs"),this.timeDiv=document.getElementById("user-time"),this.coinPerBetInfoDiv=document.getElementById("coin-per-bet-info"),this.gamePlaceholderDiv=document.getElementById("game-placeholder")},sna.service.Environment.prototype.setupMainContainerStyleFlags=function(){this.scope.mainContainerStyles=!0,this.scope.layout.has(sna.service.ENVIRONMENT_MOBILE)&&!this.scope.layout.has(sna.service.DISABLE_IOS_FS)&&(this.scope.mainContainerStyles=!1)},sna.service.Environment.prototype.loadQueryParams=function(){for(var e,t=(t=document.location.search).split("+").join(" "),i=/[?&]?([^=]+)=([^&]*)/g;e=i.exec(t);)"game"!=decodeURIComponent(e[1])&&"language"!=decodeURIComponent(e[1])&&(this.scope[decodeURIComponent(e[1])]=decodeURIComponent(e[2]))},sna.service.Environment.prototype.register=function(e){this.onLayoutChangeCallbacks.push(e)},sna.service.Environment.prototype.setup=function(){this.scope.layout=null;var e=this.getLayout();this.scope.layout=e},sna.service.Environment.prototype.is=function(e){return-1!=this.environmentTags.indexOf(e)},sna.service.Environment.prototype.detectEnvironment=function(){var e=this.window.navigator.userAgent,t=new MobileDetect(e);log(this.name,"detectEnvironment",sna.log.DEBUG,"User agent found: "+e),this.matchNavigatorEnvironment(e,/Windows/,sna.service.ENVIRONMENT_WINDOWS),this.matchNavigatorEnvironment(e,/Linux/,sna.service.ENVIRONMENT_LINUX),this.matchNavigatorEnvironment(e,/Android/,sna.service.ENVIRONMENT_ANDROID),this.pushEnvironmentTag(sna.service.ENVIRONMENT_MOBILE,t.mobile()),this.pushEnvironmentTag(sna.service.ENVIRONMENT_TABLET,t.tablet()),this.pushEnvironmentTag(sna.service.ENVIRONMENT_DESKTOP,!t.tablet()&&!t.mobile()),this.matchNavigatorEnvironment(e,/iPad/,sna.service.ENVIRONMENT_IPAD),this.matchNavigatorEnvironment(e,/iPhone/,sna.service.ENVIRONMENT_IPHONE);var i=568==window.screen.width;this.pushEnvironmentTag(sna.service.ENVIRONMENT_IPHONE_5,i);var n=667==window.screen.width;this.pushEnvironmentTag(sna.service.ENVIRONMENT_IPHONE_7,n),this.pushEnvironmentTag(sna.service.ENVIRONMENT_IOS,/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream),this.pushEnvironmentTag(sna.service.ENVIRONMENT_OPERA,!!window.opr&&!!opr.addons||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/")),this.pushEnvironmentTag(sna.service.ENVIRONMENT_FIREFOX,"undefined"!=typeof InstallTrigger),this.pushEnvironmentTag(sna.service.ENVIRONMENT_EXPLORER,!!document.documentMode),this.pushEnvironmentTag(sna.service.ENVIRONMENT_EDGE,!this.is(sna.service.ENVIRONMENT_EXPLORER)&&!!window.StyleMedia),-1!==this.environmentTags.indexOf(sna.service.ENVIRONMENT_IOS)?this.matchNavigatorEnvironment(e,/CriOS/,sna.service.ENVIRONMENT_CHROME):this.pushEnvironmentTag(sna.service.ENVIRONMENT_CHROME,!!window.chrome&&!!window.chrome.webstore),this.pushEnvironmentTag(sna.service.ENVIRONMENT_SAFARI,/Safari/.test(navigator.userAgent)&&!/CriOS/.test(navigator.userAgent)),this.pushEnvironmentTag(sna.service.ENVIRONMENT_BLINK,(this.is(sna.service.ENVIRONMENT_CHROME)||this.is(sna.service.ENVIRONMENT_OPERA))&&!!window.CSS);var s=this.is(sna.service.ENVIRONMENT_MOBILE),r=this.is(sna.service.ENVIRONMENT_DESKTOP),t=this.is(sna.service.ENVIRONMENT_TABLET),i=!this.is(sna.service.ENVIRONMENT_CHROME),n=0<this.environmentTags.indexOf(sna.service.ENVIRONMENT_ANDROID),e=function(){var e=window.navigator.userAgent;if(-1<e.indexOf("iPad"))return!0;if(-1<e.indexOf("Macintosh"))try{return document.createEvent("TouchEvent"),!0}catch(e){}return!1}();(r||t||e)&&i&&(s||e)&&(this.removeEnvironmentTag(sna.service.ENVIRONMENT_DESKTOP),this.pushEnvironmentTag(sna.service.ENVIRONMENT_MOBILE,!0),this.pushEnvironmentTag(sna.service.ENVIRONMENT_TABLET,!0),n?this.pushEnvironmentTag(sna.service.ENVIRONMENT_ANDROID,!0):this.pushEnvironmentTag(sna.service.ENVIRONMENT_IOS,!0),this.pushEnvironmentTag(sna.service.ENVIRONMENT_IPAD,!0));e=null!=navigator.userAgent.match(/(Chrome)|(Safari)|(Opera)|(Firefox)|(MSIE)/i),n=!1;null==navigator.userAgent.match(/(iPhone|iPad|iPod)/i)||e||(n=!0);(function(){try{return window.self!==window.top}catch(e){return!0}}()||n)&&this.pushEnvironmentTag(sna.service.DISABLE_IOS_FS,!0)},sna.service.Environment.prototype.pushEnvironmentTag=function(e,t){t&&-1==this.environmentTags.indexOf(e)&&this.environmentTags.push(e)},sna.service.Environment.prototype.removeEnvironmentTag=function(e){-1!=this.environmentTags.indexOf(e)&&this.environmentTags.splice(this.environmentTags.indexOf(e),1)},sna.service.Environment.prototype.matchNavigatorEnvironment=function(e,t,i){t=e.match(t);this.pushEnvironmentTag(i,t&&t.length)},sna.service.Environment.prototype.getLayout=function(){var e,t,i=this.scope.layout,n=this.scope.config.parameters&&this.scope.config.parameters.forceLandscape||!1,s=new sna.presentation.Layout(this.view,this.environmentTags,this.scope.config.assetSizes,this.preferredAspectRatio,this.parseEnvironmentValue(this.scope.config.fixViewSizeTo),this.allowTabletPortrait,this.useCustomAspectRatioDesktop,!1,n);return s.id=this.layoutId++,s.has(sna.service.ENVIRONMENT_IOS)&&(screen.height==s.width&&screen.width,s.has(sna.service.ENVIRONMENT_IPHONE)&&(e=this.checkIosFullscreen(s),n=s.has(sna.service.ENVIRONMENT_FULLSCREEN),e&&!n?(s.remove(sna.service.ENVIRONMENT_WINDOWED),s.layoutTags.push(sna.service.ENVIRONMENT_FULLSCREEN)):!e&&n&&(s.remove(sna.service.ENVIRONMENT_FULLSCREEN),s.layoutTags.push(sna.service.ENVIRONMENT_WINDOWED)),this.fsDiv&&s.has(sna.service.DISABLE_IOS_FS)&&(this.fsDiv.style.display="none",this.fsDiv=null),this.fsDiv&&(t=document.getElementsByTagName("BODY")[0],s.has(sna.service.ENVIRONMENT_FULLSCREEN)?(this.fsDivVisible=!1,t.insertBefore(this.fsDiv,t.firstChild),this.scope.config.parameters.addRemoveOverflowOnChange&&(document.querySelector("html").style.overflow="visible",document.querySelector("body").style.overflow="visible")):(this.fsDivVisible=!0,t.appendChild(this.fsDiv),this.scope.config.parameters.addRemoveOverflowOnChange&&(document.querySelector("html").style.overflow="auto",document.querySelector("body").style.overflow="auto"))))),this.scope.config.fixViewSizeTo&&!s.has(sna.service.ENVIRONMENT_MOBILE)||((t=document.getElementById("game-placeholder")).style.left=s.screenOffset.x+"px",t.style.top=s.screenOffset.y+"px"),s.selected=this.selectConfigLayout(s),i?(angular.forEach(s.layoutTags,function(e){i.has(e)||s.newTags.push(e)}),angular.forEach(i.layoutTags,function(e){s.has(e)||s.oldTags.push(e)})):s.newTags=s.layoutTags,this.timeDiv&&(this.updateTimeInterval=setInterval(function(){var e=new Date,t=e.getHours()+"";t<=9&&(t="0"+t);var i=e.getMinutes()+"",e=this.scope.config.parameters.gameName?" "+this.scope.config.parameters.gameName:"";this.timeDiv.innerHTML=t+":"+(i=i<=9?"0"+i:i)+e,this.timeDiv.style.top=this.gamePlaceholderDiv.offsetTop+3,this.timeDiv.style.left=this.gamePlaceholderDiv.offsetLeft+3}.bind(this),1e3),this.timeDiv.style.display="block"),this.coinPerBetInfoDiv&&(this.coinPerBetInfoDiv.style.top=this.gamePlaceholderDiv.offsetTop+3,this.coinPerBetInfoDiv.style.right=this.gamePlaceholderDiv.offsetLeft+3,this.coinPerBetInfoDiv.style.display="block"),log(this,"getLayout",sna.log.DEBUG,"Layout changed. New tags: "+s.newTags.join(",")),s},sna.service.Environment.prototype.onLayoutChange=function(){var t=this.getLayout();this.scope.layout=t,log(this.name,"onLayoutChange",sna.log.INFO,"Layout updated: "+t.describe()),angular.forEach(this.onLayoutChangeCallbacks,function(e){e(t)}),this.scope.layout.has(sna.service.ENVIRONMENT_FULLSCREEN)||window.scrollTo(0,0),setTimeout(function(){this.onLayoutChangeChromeIOS()}.bind(this),200)},sna.service.Environment.prototype.onLayoutChangeChromeIOS=function(){var t=this.getLayout();this.scope.layout=t,angular.forEach(this.onLayoutChangeCallbacks,function(e){e(t)})},sna.service.Environment.prototype.parseEnvironmentValue=function(e){if("object"!=typeof e)return e;var r=e.default;return angular.forEach(e,function(e,t){if(-1===["default","dynamic"].indexOf(t)){for(var i=t.split(","),n=!0,s=0;s<i.length;s++)if(-1==this.environmentTags.indexOf(i[s])){n=!1;break}n&&(r=e)}},this),r},sna.service.Environment.prototype.setupScreenResize=function(){-1!==navigator.userAgent.indexOf("TipicoCasino")||-1!==navigator.userAgent.indexOf("TipicoSport")?setInterval(this.checkLayoutChange.bind(this),200):(angular.element(this.window).bind(sna.service.RESIZE_EVENT,this.onLayoutChange.bind(this)),window.onorientationchange=this.onLayoutChange.bind(this))},sna.service.Environment.prototype.checkLayoutChange=function(){this.prevWidth==window.innerWidth&&this.prevHeight==window.innerHeight||(this.prevWidth=window.innerWidth,this.prevHeight=window.innerHeight,this.onLayoutChangeChromeIOS())},sna.service.Environment.prototype.setupIosFullscreen=function(){this.fsDiv&&(this.fsDiv.style.display="block")},sna.service.Environment.prototype.updateIosFullScreen=function(){var e=this.checkIosFullscreen(this.scope.layout),t=this.scope.layout.has(sna.service.ENVIRONMENT_FULLSCREEN);this.fsDiv&&(t?(this.fsDiv.style.pointerEvents="none",this.fsDiv.style.display="none"):(this.fsDiv.style.display="block",this.fsDiv.style.pointerEvents="auto",this.fsDiv.style.height="5000px")),this.scope.layout.has(sna.service.ENVIRONMENT_FULLSCREEN)||window.scrollTo(0,0),(e&&!t||!e&&t)&&this.onLayoutChange(!0)},sna.service.Environment.prototype.checkIosFullscreen=function(e){var t,i,n,s=e.has(sna.service.ENVIRONMENT_IPHONE),r=e.has(sna.service.ENVIRONMENT_IPAD),o=e.has(sna.service.ENVIRONMENT_CHROME),a=e.has(sna.service.ENVIRONMENT_SAFARI),l=e.has(sna.service.ENVIRONMENT_LANDSCAPE),h=!1;return s&&a?(t=document.body.offsetHeight,i=window.innerHeight,h=!l||14<=(n=(n=navigator.userAgent.split(" ").filter(function(e){return-1!=e.indexOf("Version")}))&&0<n.length?n[0].replace("Version/","").split(".")[0]:n)?i!=t:!(i<t)):(s||r)&&o?h=l?window.screen.width-window.innerHeight<60:window.screen.height-window.innerHeight<60:r&&a&&(h=document.body.offsetHeight+10<window.innerHeight),e.has(sna.service.ENVIRONMENT_PIN_UP_CASINO)&&e.has(sna.service.ENVIRONMENT_SAFARI)&&e.has(sna.service.ENVIRONMENT_MOBILE)&&e.has(sna.service.ENVIRONMENT_PORTRAIT)&&(document.querySelector("#game").style.height=window.innerHeight,h=!0),h},sna.service.Environment.prototype.selectConfigLayout=function(n){var s=null,r=0;return angular.forEach(this.scope.config.layouts,function(e){var t=0;if(e.environmentInclude&&e.environmentInclude.length&&(t+=100),e.environmentExclude&&e.environmentExclude.length&&(t+=100),e.environmentInclude){var i=e.environmentInclude.length;if(angular.forEach(e.environmentInclude,function(e){if(-1!=n.environmentTags.indexOf(e))return i=!1}),i)return}e.environmentExclude&&(i=!1,angular.forEach(e.environmentExclude,function(e){if(-1!=n.environmentTags.indexOf(e))return!(i=!0)}),i)||(e.layoutInclude&&e.layoutInclude.length&&(t+=10),e.layoutExclude&&e.layoutExclude.length&&(t+=10),e.layoutInclude&&(i=e.layoutInclude.length,angular.forEach(e.layoutInclude,function(e){if(-1!=n.layoutTags.indexOf(e))return i=!1}),i)||e.layoutExclude&&(i=!1,angular.forEach(e.layoutExclude,function(e){if(-1!=n.layoutTags.indexOf(e))return!(i=!0)}),i)||e.minWidth&&(t+=1,n.width<e.minWidth)||e.maxWidth&&(t+=1,n.width>e.maxWidth)||e.minHeight&&(t+=1,n.height<e.minHeight)||e.maxHeight&&(t+=1,n.height>e.maxHeight)||e.minAspect&&(t+=1,n.aspectRatio<e.minAspect)||e.maxAspect&&(t+=1,n.aspectRatio>e.maxAspect)||r<t&&(r=t,s=e))}),s},sna.service.Environment.prototype.setEnvironmentLanguage=function(){var e;void 0!==this.scope.config.parameters.urlParametersStrings?this.scope.config.parameters.urlParametersStrings.lang?(e=this.scope.config.parameters.urlParametersStrings.lang,e=this.scope[e],sna.service.ENVIRONMENT_LANG=e,this.pushEnvironmentTag(sna.service.ENVIRONMENT_LANG,!0)):log(this.name,"setEnvironmentLanguage",sna.log.ERROR,"Language parameter missing: config.parameters.urlParametersStrings.lang"):log(this.name,"setEnvironmentLanguage",sna.log.WARNING,"urlParametersStrings object missing: config.parameters.urlParametersStrings")},sna.service.Environment.prototype.isIPhoneX=function(){var e=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,t=window.devicePixelRatio||1,i=window.screen.width*t,t=window.screen.height*t;return!(!e||1125!=i||2436!==t)},sna.service.EnvironmentProvider=function(){this.config={aspectRatio:sna.service.DEFAULT_ASPECT_RATIO,allowTabletPortrait:!1,useCustomAspectRatioDesktop:!1},this.$get=[sna.service.ROOT_SCOPE,sna.service.WINDOW,sna.service.VIEW,this._init.bind(this)]},sna.service.EnvironmentProvider.prototype.aspectRatio=function(e){this.config.aspectRatio=e},sna.service.EnvironmentProvider.prototype.allowTabletPortrait=function(e){this.config.allowTabletPortrait=e},sna.service.EnvironmentProvider.prototype.useCustomAspectRatioDesktop=function(e){this.config.useCustomAspectRatioDesktop=e},sna.service.EnvironmentProvider.prototype._create=function(e){return new sna.service.Environment(e)},sna.service.EnvironmentProvider.prototype._init=function(e,t,i){var n=this._create(this.config);return n.scope=e,n.window=t,n.view=i,n},sna.module.core.provider(sna.service.ENVIRONMENT,sna.service.EnvironmentProvider),sna.service.ASSET_MANAGER="AssetManagerService",sna.service.ASSET_MANAGER_PROVIDER=sna.service.ASSET_MANAGER+sna.service.PROVIDER_SUFFIX,sna.service.AssetManager=function(e){this.scope=null,this.q=null,this.presentation=null,this.loader=null,this.name=sna.service.ASSET_MANAGER,this.assetConfig=null,this.assetPackStatus={},this.prerenderComplete=!0},sna.service.AssetManager.prototype.init=function(e){this.loader=e.loader,this.presentation=e.presentation,this.assetConfig=this.parseAssetConfig(this.scope.config.assetManager)},sna.service.AssetManager.prototype.parseAssetConfig=function(e){var i={};return angular.forEach(e,function(e,t){e.sequential=this.parseEnvironmentValue(e.sequential),e.prerender=this.parseEnvironmentValue(e.prerender),e.preserve=this.parseEnvironmentValue(e.preserve),i[t]=e},this),i},sna.service.AssetManager.prototype.parseEnvironmentValue=function(e){if("object"!=typeof e)return e;var t=e.default,r=this.presentation.scope.layout,o=t;return angular.forEach(e,function(e,t){if(-1===["default","dynamic"].indexOf(t)){for(var i=t.split(","),n=!0,s=0;s<i.length;s++)if(!r.has(i[s])){n=!1;break}n&&(o=e)}},this),o},sna.service.AssetManager.prototype.setup=function(e){angular.forEach(this.assetConfig,function(e,t){t=e.name||t;this.assetPackStatus[t]={name:t,sequential:e.sequential,prerender:e.prerender,loader:e.loader,trackProgress:e.trackProgress||!1,started:!1,loaded:!1,rendering:!1,ready:!1,loadPromise:null,readyDefer:null,readyPromise:null},e.sequential&&e.prerender&&(this.prerenderComplete=!1)},this)},sna.service.AssetManager.prototype.startAssetPackLoad=function(e){return e.started?this.q.when(!0):(e.started=!0,log(this,"startAssetPackLoad",sna.log.DEBUG,"Started loading assetPack: "+e.name),this.loader.loadAssets(e.name,{},!e.trackProgress))},sna.service.AssetManager.prototype.finishAssetPackLoad=function(e){return log(this,"finishAssetPackLoad",sna.log.DEBUG,"Loaded assetPack: "+e.name),e.loaded=!0,this.q.when(!0)},sna.service.AssetManager.prototype.beginBackgroundLoad=function(){log(this,"beginBackgroundLoad",sna.log.DEBUG,"Beggining background asset load.");var t=this.q.when(!0);return angular.forEach(this.assetPackStatus,function(e){e.sequential&&(t=t.then(this.startAssetPackLoad.bind(this,e)).then(this.finishAssetPackLoad.bind(this,e)),e.loadPromise=t),e.readyDefer=this.q.defer(),e.readyPromise=e.readyDefer.promise},this),t},sna.service.AssetManager.prototype.safelyPrerenderAssetPack=function(e){var t,i=!1;return this.prerenderComplete||(log(this,"safelyPrerenderAssetPack",sna.log.DEBUG,"Checking if any assets are not prerendered."),t=!1,this.prerenderComplete=!0,angular.forEach(this.assetPackStatus,function(e){e.sequential&&e.prerender&&(e.ready||(this.prerenderComplete=!1,e.loaded&&(t=e)))},this),t&&(log(this,"safelyPrerenderAssetPack",sna.log.DEBUG,"Found asset pack to prerender: "+t.name),e(t.name),t.ready=!0,t.readyDefer.resolve,i=!0)),i},sna.service.AssetManager.prototype.ready=function(e){return this.assetPackStatus[e]&&this.assetPackStatus[e].ready},sna.service.AssetManager.prototype.ensureAssetPackLoaded=function(e,t){var i=this.assetPackStatus[e];return i.ready?this.q.when(!0):i.rendering?this.readyPromise:i.loaded?(t(this.scope.config.assets[e]),i.ready=!0,i.readyDefer&&i.readyDefer.resolve(i),this.q.when(!0)):i.started?(this.showLoadingScreen(null,e),i.loadPromise.then(function(){t(this.scope.config.assets[e]),this.hideLoadingScreen(null,e),i.ready=!0,i.readyDefer&&i.readyDefer.resolve(i)}.bind(this))):(this.showLoadingScreen(null,e),this.q.when(!0).then(this.startAssetPackLoad.bind(this,i)).then(this.finishAssetPackLoad.bind(this,i)).then(function(){t(this.scope.config.assets[e]),this.hideLoadingScreen(null,e),i.ready=!0,i.readyDefer&&i.readyDefer.resolve(i)}.bind(this)))},sna.service.AssetManager.prototype.showLoadingScreen=function(e,t){if(this.assetPackStatus[t].loader&&(e=this.presentation.getById(this.assetPackStatus[t].loader)))return loadingAnimationPromise=this.presentation.createAnimationTimeline("showLoadingScreen",0,!1,!0,e)},sna.service.AssetManager.prototype.hideLoadingScreen=function(e,t){if(this.assetPackStatus[t].loader&&(e=this.presentation.getById(this.assetPackStatus[t].loader)))return loadingAnimationPromise=this.presentation.createAnimationTimeline("hideLoadingScreen",0,!1,!0,e)},sna.service.AssetManager.prototype.assetPackDefined=function(e){return void 0!==this.assetPackStatus[e]||(log(this,"assetPackDefined",sna.log.DEBUG,"AssetPack not defined: "+e),!1)},sna.service.AssetManagerProvider=function(){this.config={},this.$get=[sna.service.ROOT_SCOPE,sna.service.Q,this.init.bind(this)]},sna.service.AssetManagerProvider.prototype.init=function(e,t){var i=this.create(this.config);return i.scope=e,i.q=t,i},sna.service.AssetManagerProvider.prototype.create=function(e){return new sna.service.AssetManager(e)},sna.module.core.provider(sna.service.ASSET_MANAGER,sna.service.AssetManagerProvider),sna.service.COMMUNICATION="CommunicationService",sna.service.COMMUNICATION_PROVIDER=sna.service.COMMUNICATION+sna.service.PROVIDER_SUFFIX,sna.service.HTTP_GET="get",sna.service.HTTP_POST="post",sna.service.HTTP_SERIALIZER="$httpParamSerializer",sna.service.Communication=function(e){this.name=sna.service.COMMUNICATION,this.serviceUrl=e.serviceUrl,this.serviceMethod=e.serviceMethod,this.http=null,this.q=null,this.scope=null,this.interval=null;e=this.getUrlParameters();this.language=e[sna.service.DEFAULT_LANGUAGE_URL_PARAMETER_KEY]||sna.service.DEFAULT_LANGUAGE_URL_PARAMETER},sna.service.Communication.prototype.setup=function(e){return!0},sna.service.Communication.prototype.getSetupInfo=function(){var e={};return this.addTranslationsInfo(e),e},sna.service.Communication.prototype.getUrlParameters=function(){var t={},e=window.location.href;return e=(e=e.substring(e.indexOf("?")+1)).split("&"),angular.forEach(e,function(e){e=e.split("=");t[e[0]]=e[1]}),t},sna.service.Communication.prototype.init=function(e){this.iface=e.iface},sna.service.Communication.prototype.preSetup=function(e){return this.q.when(!0)},sna.service.Communication.prototype.addTranslationsInfo=function(e){e.translations=1},sna.service.Communication.prototype.loadTranslations=function(){var e=((window.SNA||{}).basePath||"")+"translations/translations_"+this.language+".json?c="+Math.random();return this.http.get(e).then(this.onTranslationsLoadedSuccessfully.bind(this,this.language),this.loadDefaultTranslations.bind(this))},sna.service.Communication.prototype.onTranslationsLoadedSuccessfully=function(e,t){return this.setActiveLanguage(e),t},sna.service.Communication.prototype.setActiveLanguage=function(e){this.configUpdate=this.configUpdate||{},this.configUpdate.slot=this.configUpdate.slot||{},this.configUpdate.slot.language=e},sna.service.Communication.prototype.getDefaultTranslationsName=function(){return this.scope.config.parameters.defaultLanguage||"en"},sna.service.Communication.prototype.loadDefaultTranslations=function(){var e=this.getDefaultTranslationsName();this.language=this.getDefaultTranslationsName();var t=((window.SNA||{}).basePath||"")+"translations/translations_"+e+".json?c="+Math.random();return this.http.get(t).then(this.onTranslationsLoadedSuccessfully.bind(this,e))},sna.service.Communication.prototype.processTranslations=function(e){var t=e.data;return this.scope.translations?angular.forEach(t,function(e,t){this.scope.translations[t]||(this.scope.translations[t]=e)},this):this.scope.translations=t,log(this.name,"processTranslations",sna.log.DEBUG,"Translations loaded from json: ",t),log(this.name,"processTranslations",sna.log.DEBUG,"Merged translations: ",this.scope.translations),sna.error&&(sna.error.errorTranslations=t),5<=PIXI.VERSION[0]&&angular.forEach(this.scope.translations,function(e,t){this.scope.translations[t]=e.replace("\r\n","\n")},this),e},sna.service.Communication.prototype.notifyTranslationsLoaded=function(e){e(this,{name:"translations"})},sna.service.Communication.prototype.request=function(e,t){if((e=e||{}).noCache=(new Date).getTime(),this.serviceMethod===sna.service.HTTP_POST)return this.http.post(this.serviceUrl+(t||""),e).then(this.successResponseCallback.bind(this),this.failureResponseCallback.bind(this));if(this.serviceMethod===sna.service.HTTP_GET){e=(e=this.httpSerializer(e)).replace(/%5B/g,"[").replace(/%5D/g,"]");return this.http.get(this.serviceUrl+(t||"")+"?"+e).then(this.successResponseCallback.bind(this),this.failureResponseCallback.bind(this))}},sna.service.Communication.prototype.successResponseCallback=function(e){var t=e.data,e=this.detectServerError(e.data);return e?(sna.error.handleError(e),!1):t},sna.service.Communication.prototype.failureResponseCallback=function(e){e={message:e.status+" "+e.statusText,exception:e,type:sna.error.COMMUNICATION_ERROR,code:void 0};return sna.error.handleError(e),!1},sna.service.Communication.prototype.setErrorTranslations=function(e,t){sna.error&&(sna.error.errorTranslations=e,sna.error.errorFontSize=t)},sna.service.Communication.prototype.prepareReplays=function(){return this.mockActive||!this.recordActive?this.q.when(!0):this.http({method:"POST",url:"replay.php",data:this.httpSerializer({prepare:!0}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(null,function(){})},sna.service.Communication.prototype.recordReplay=function(e){return this.mockActive||!this.recordActive?this.q.when(e):(this.responseNumber=void 0===this.responseNumber?-1:this.responseNumber,this.responseNumber++,this.http({method:"POST",url:"replay.php",data:this.httpSerializer({filename:"replay_"+this.responseNumber+".php",contents:e}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(){return this.q.when(e)}.bind(this),function(){return this.q.when(e)}.bind(this)))},sna.service.Communication.prototype.clearReplays=function(e){return this.mockActive||!this.recordActive?this.q.when(!0):(this.mockStep=e?1:0,this.http({method:"POST",url:"replay.php",data:this.httpSerializer({clear:!0,"exclude-init":e}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(null,function(){}))},sna.service.Communication.prototype.getBalance=function(){return this.q.when(!0)},sna.service.Communication.prototype.roundCompleted=function(){return this.q.when(!0)},sna.service.CommunicationProvider=function(){this.config={serviceUrl:null,serviceMethod:sna.service.HTTP_POST,casinoServiceName:sna.service.CASINO_COMMUNICATION},this.$get=[sna.service.INJECTOR,sna.service.Q,sna.service.HTTP,sna.service.ROOT_SCOPE,sna.service.HTTP_SERIALIZER,sna.service.INTERVAL,this._init.bind(this)]},sna.service.CommunicationProvider.prototype.serviceURL=function(e){return this.config.serviceUrl=e,this},sna.service.CommunicationProvider.prototype.serviceMethod=function(e){return this.config.serviceMethod=e,this},sna.service.CommunicationProvider.prototype.casino=function(e){return this.config.casinoServiceName=e,this},sna.service.CommunicationProvider.prototype._create=function(){return new sna.service.Communication(this.config)},sna.service.CommunicationProvider.prototype._init=function(e,t,i,n,s,r){var o=this._create();return o.q=t,o.http=i,o.scope=n,o.httpSerializer=s,o.interval=r,o.casino=e.get(this.config.casinoServiceName,this),o},sna.module.core.provider(sna.service.COMMUNICATION,sna.service.CommunicationProvider),sna.service.GAME="GameService",sna.service.GAME_PROVIDER=sna.service.GAME+sna.service.PROVIDER_SUFFIX,sna.service.Game=function(e){this.name=sna.service.GAME,this.factories={},this.q=null,this.scope=null},sna.service.Game.prototype.setup=function(){return!0},sna.service.Game.prototype.factory=function(e,t){return t?(this.factories[e]=t,this):this.factories[e]},sna.service.Game.prototype.produce=function(e){return this.factory(e).apply(this,arguments)},sna.service.Game.prototype.getParameterValue=function(){var e=this.scope.config.parameters[arguments[0]];if(e&&e.variant){var t=this["getParameterValue"+e.variant],i=Array.prototype.slice.call(arguments);return i[0]=e,t.apply(this,i)}return e},sna.service.Game.prototype.getParameterValueLinearThreshold=function(e,t){for(var i=e.threshold,n=e.values,s=-1,r=0;r<i.length;r++)t>=i[r]&&(s=r);if(s<0)return 0;var o=i[s],e=i[s+1];return e?n[s]+(n[s+1]-n[s])*((t-o)/(e-o)):n[s]},sna.service.Game.prototype.getParameterValueNearestThreshold=function(e,t){for(var i=e.threshold,e=e.values,n=-1,s=0;s<i.length;s++)t>=i[s]&&(n=s);return n<0?e[0]:e[n]},sna.service.Game.prototype.gameStateRestored=function(){},sna.service.Game.prototype.hasFreeRounds=function(){},sna.service.GameProvider=function(){this.config={},this.$get=[sna.service.Q,sna.service.ROOT_SCOPE,this._init.bind(this)]},sna.service.GameProvider.prototype._create=function(e){return new sna.service.Game(e)},sna.service.GameProvider.prototype._init=function(e,t){var i=this._create(this.config);return i.q=e,i.scope=t,i},sna.module.core.provider(sna.service.GAME,sna.service.GameProvider),sna.service.SOUND="SoundService",sna.service.SOUND_PROVIDER=sna.service.SOUND+sna.service.PROVIDER_SUFFIX,sna.service.SOUND_TYPE_FX="fx",sna.service.SOUND_TYPE_MUSIC="music",sna.service.SOUND_TYPE_INTERFACE="iface",sna.service.DEFAULT_SOUND_WEIGHT=2,sna.service.SOUND_ASSET_PATH=((window.SNA||{}).basePath||"")+"assets/sound/",sna.service.Sound=function(e){this.name=sna.service.SOUND,this.scope=null,this.sounds={},this.soundsRandom={},this.soundsPlaylists={},this.groupToggleState={},this.groupVolume={},this.defaultSoundState=!0,this.activeSounds=[]},sna.service.Sound.prototype.init=function(){var e=this.scope.layout;e.has(sna.service.ENVIRONMENT_MOBILE)&&(this.defaultSoundState=!1,log(this,"loadSounds",sna.log.DEBUG,"Default sound state set: "+this.defaultSoundState)),e.has(sna.service.ENVIRONMENT_SAFARI)&&(Howler.autoSuspend=!1),this.skipSoundsOnAudioContextSuspended=!1,this.scope.config.iface&&this.scope.config.iface.skipSoundsOnAudioContextSuspended&&(this.skipSoundsOnAudioContextSuspended=!0)},sna.service.Sound.prototype.getLoadInfo=function(e){var i=[],e=this.scope.config.sounds[e];return angular.forEach(e,function(e,t){i[t]=sna.service.DEFAULT_SOUND_WEIGHT},this),i},sna.service.Sound.prototype.loadSounds=function(e,r){e=this.scope.config.sounds[e];angular.forEach(e,function(e,t){var i={src:[]};angular.forEach(e.src,function(e){e=sna.service.SOUND_ASSET_PATH+e;i.src.push(e)},this),e.sprite&&(i.sprite={},i.sprite[t]=[e.sprite.start||0,e.sprite.duration||0,!!e.sprite.loop],i.sprite.__default=[e.sprite.start||0,e.sprite.duration||0,!!e.sprite.loop]),e.volume&&(i.volume=e.volume);var n=new Howl(i);e.endSound&&(n.endSound=e.endSound),e.stopImmediate&&(n.stopImmediate=e.stopImmediate),e.sprite?(n.snaIsSprite=!0,n.snaSpriteName=t):n.snaIsSprite=!1,e.loop&&n.loop(!0),n.soundGroup=e.type,n.mute(!this.defaultSoundState),this.groupToggleState[n.soundGroup]=this.groupToggleState[n.soundGroup]||this.defaultSoundState,this.groupVolume[n.soundGroup]=this.groupVolume[n.soundGroup]||1;var s=this;n.once("load",function(){r(s,{name:t}),e.endLoop&&(n.endLoop=!1)}),e.endLoop&&n.on("end",function(){n.stopImmediate?(n.stop(),n.endSound&&this.play(this.sounds[n.endSound])):n.endLoop&&(n.stop(),n.loop(!1),n.endLoop=!1,n.endSound&&this.play(this.sounds[n.endSound]))}.bind(this)),this.sounds[t]=n},this);e=this.scope.config.parameters.soundPlaylists;angular.forEach(e,function(i){var n=!0;angular.forEach(i.sounds,function(e,t){void 0===this.sounds[t]&&(log(this,"loadSounds",sna.log.DEBUG,"Failed to initiate playlist sound: "+i.name+" . Member sound "+t+" is not found."),n=!1)},this),n&&(this.soundsPlaylists[i.name]=i)},this)},sna.service.Sound.prototype._play=function(e){Howler.ctx&&"suspended"===Howler.ctx.state&&this.skipSoundsOnAudioContextSuspended||(e.snaIsSprite?e.play(e.snaSpriteName):e.play(),this.activeSounds.push(e))},sna.service.Sound.prototype.getSound=function(e){return this.sounds[e]},sna.service.Sound.prototype.getSoundPlaylist=function(e){return this.soundsPlaylists[e]},sna.service.Sound.prototype.getMasterVolume=function(){return Howler.volume()},sna.service.Sound.prototype.setMasterVolume=function(e){Howler.volume(e)},sna.service.Sound.prototype.setDefaultSoundState=function(e){this.defaultSoundState=e},sna.service.Sound.prototype.getDefaultSoundState=function(){return this.defaultSoundState},sna.service.Sound.prototype.toggleGroups=function(){var i=Array.prototype.slice.call(arguments);angular.forEach(i,function(e){this.groupToggleState[e]=!this.groupToggleState[e]},this),angular.forEach(this.sounds,function(e){var t=e.soundGroup;-1!==i.indexOf(t)&&(targetState=this.groupToggleState[t],e.mute(!targetState))},this)},sna.service.Sound.prototype.setGroupState=function(){var i=Array.prototype.slice.call(arguments),n=i.shift(),s=0==i.length;s?angular.forEach(this.groupToggleState,function(e,t){this.groupToggleState[t]=n},this):angular.forEach(i,function(e){this.groupToggleState[e]=n},this),angular.forEach(this.sounds,function(e){var t=e.soundGroup;!s&&-1===i.indexOf(t)||(targetState=this.groupToggleState[t],e.mute(!targetState))},this)},sna.service.Sound.prototype.setGroupVolume=function(t,i){var e=this.groupVolume[t],n=i/e;this.groupVolume[t]=i,angular.forEach(this.sounds,function(e){e.soundGroup==t&&(e.volume()?e.volume(e.volume()*n):e.volume(i))},this)},sna.service.Sound.prototype.getGroupVolume=function(e){return this.groupVolume[e]},sna.service.Sound.prototype.processSoundAnimation=function(){var e=this.getSound(arguments[0])||this.getSoundPlaylist(arguments[0]);if(void 0!==e){var t=this[arguments[1]],i=Array.prototype.slice.call(arguments,2);return i.unshift(e),t.apply(this,i)}log(this,"processSoundAnimation",sna.log.DEBUG,"Sound: "+arguments[0]+" is undefined. Skipping sound animation: "+arguments[1])},sna.service.Sound.prototype.volume=function(e,t){var i=this.groupVolume[e.soundGroup];e.volume(t*i)},sna.service.Sound.prototype.play=function(e,t,i){"loop"==t&&e.loop(!0),!i&&0!==i||(t=this.groupVolume[e.soundGroup],e.volume(i*t)),sna.debug.enableCheats&&sna.debug.enableLoggingSounds&&this.logSoundPlayed(e,"played"),this._play(e)},sna.service.Sound.prototype.playOnce=function(e,t,i){e.playing()||("loop"==t&&e.loop(!0),!i&&0!==i||(t=this.groupVolume[e.soundGroup],e.volume(i*t)),sna.debug.enableCheats&&sna.debug.enableLoggingSounds&&this.logSoundPlayed(e,"played"),this._play(e))},sna.service.Sound.prototype.playPlaylist=function(e,t,i,n,s){if(void 0!==e){var r=parseInt(n),o=e.activeSoundName||null,n=e.sounds[o]&&e.sounds[o].repeat||null;if(!(!("loop"==t)&&e.activeSoundPlayed==n)){if(e.activeSoundPlayed==n||!e.activeSound){e.activeSound&&e.activeSound.playing()&&e.activeSound.stop(),e.activeSoundName&&e.sounds[e.activeSoundName].deleteOnEnd&&(delete e.sounds[e.activeSoundName],r--),e.activeSoundPlayed=0;var a=angular.copy(e.sounds);if("shuffle"==i){o&&delete a[o];h=(l=Object.keys(a))[l.length*Math.random()<<0]}else{for(var l,h=(l=Object.keys(a))[r];a[h].skip;)e.sounds[h].skip--,h=l[r=r+1>=l.length?0:r+1];r=r+1>=l.length?0:r+1}void 0!==h&&(n=this.getSound(h),a[h].loop?n.loop(!0):n.loop(!1),0<=(s="function"==typeof s?s():s)&&(o=this.groupVolume[n.soundGroup],n.volume(s*o)),e.activeSoundName=h,e.activeSound=n)}e.activeSound&&(this._play(e.activeSound),e.activeSoundPlayed++,e.activeSound.off("end"),log(this.name,"playPlaylist",sna.log.DEBUG,"Sound: "+e.activeSoundName+" / Repeat: "+e.activeSoundPlayed),e.activeSound.loop()||e.activeSound.on("end",this.playPlaylist.bind(this,e,t,i,r,function(){return e.activeSound.volume()})))}}},sna.service.Sound.prototype.fadeIn=function(e,t,i,n,s){"loop"==n&&e.loop(!0),e.playing()||this._play(e);n=e.soundGroup,n=this.groupVolume[n];e.fade(e.volume(),(i||1)*n,1e3*t),sna.debug.enableCheats&&sna.debug.enableLoggingSounds&&this.logSoundPlayed(e,"fadeIn"),s&&(e.off("end"),e.on("end",s))},sna.service.Sound.prototype.fadeInPlaylist=function(e,t,i){var n;e.activeSound&&(n=e.activeSound.soundGroup,n=this.groupVolume[n],e.activeSound.fade(e.activeSound.volume(),(i||1)*n,1e3*t))},sna.service.Sound.prototype.fadeOut=function(e,t,i){var n=e.soundGroup,n=this.groupVolume[n];e.fade(e.volume(),(i||0)*n,1e3*t),sna.debug.enableCheats&&sna.debug.enableLoggingSounds&&this.logSoundPlayed(e,"fadeOut")},sna.service.Sound.prototype.fadeOutPlaylist=function(e,t,i){var n;e.activeSound&&(n=e.activeSound.soundGroup,n=this.groupVolume[n],e.activeSound.fade(e.activeSound.volume(),(i||0)*n,1e3*t))},sna.service.Sound.prototype.stop=function(e,t){sna.debug.enableCheats&&sna.debug.enableLoggingSounds&&this.logSoundPlayed(e,"stopped"),e.stop()},sna.service.Sound.prototype.stopPlaylist=function(e){e.activeSound&&(e.activeSound.stop(),e.activeSound=null)},sna.service.Sound.prototype.volumeSound=function(e,t){var i=this.getSound(e),e=this.groupVolume[i.soundGroup];i.volume(t*e)},sna.service.Sound.prototype.playSound=function(e,t,i){var n=this.getSound(e);void 0!==n?(t&&n.loop(!0),!i&&0!==i||(t=this.groupVolume[n.soundGroup],n.volume(i*t)),sna.debug.enableCheats&&sna.debug.enableLoggingSounds&&this.logSoundPlayed(n,"played"),this._play(n)):log(this,"playSound",sna.log.IMPORTANT,"No sound found with name: "+e)},sna.service.Sound.prototype.logSoundPlayed=function(e,t){return console.log(sna.service.util.msToTime(new Date)+":"+(new Date).getMilliseconds()+" Volume: "+e.volume()+", loop: "+e.loop()+", duration: "+e.duration(e).toFixed(4)+", Sound "+t+": "+e._src.slice(e._src.lastIndexOf("/")+1,e._src.indexOf(".mp3")))},sna.service.Sound.prototype.playSoundOnce=function(e,t,i){var n=this.getSound(e);void 0!==n?n.playing()||(t&&n.loop(!0),!i&&0!==i||(t=this.groupVolume[n.soundGroup],n.volume(i*t)),sna.debug.enableCheats&&sna.debug.enableLoggingSounds&&this.logSoundPlayed(n,"played"),this._play(n)):log(this,"playSoundOnce",sna.log.IMPORTANT,"No sound found with name: "+e)},sna.service.Sound.prototype.stopSound=function(e){e=this.getSound(e);void 0!==e&&e.playing()&&(sna.debug.enableCheats&&sna.debug.enableLoggingSounds&&this.logSoundPlayed(e,"stopped"),e.stop())},sna.service.Sound.prototype.stopPlaylistSound=function(e){e=this.getSoundPlaylist(e);e.activeSound&&(e.activeSound.stop(),e.activeSound=null,e.activeSoundName=null)},sna.service.Sound.prototype.fadeOutSound=function(e,t,i){var n,s=this.getSound(e);s?(n=s.soundGroup,n=this.groupVolume[n],s.fade(s.volume(),(i||0)*n,1e3*t)):log(this,"loadSounds",sna.log.DEBUG,"Sound not found: "+e)},sna.service.Sound.prototype.fadeOutPlaylistSound=function(e,t,i){var n=this.getSoundPlaylist(e);n.activeSound&&(e=n.activeSound.soundGroup,e=this.groupVolume[e],n.activeSound.fade(n.activeSound.volume(),(i||0)*e,1e3*t))},sna.service.Sound.prototype.fadeInSound=function(e,t,i,n){e=this.getSound(e);"loop"==n&&e.loop(!0),e.playing()||this._play(e);n=e.soundGroup,n=this.groupVolume[n];e.fade(e.volume(),(i||1)*n,1e3*t)},sna.service.Sound.prototype.fadeInPlaylistSound=function(e,t,i){var n=this.getSoundPlaylist(e);n.activeSound&&(e=n.activeSound.soundGroup,e=this.groupVolume[e],n.activeSound.fade(n.activeSound.volume(),(i||1)*e,1e3*t))},sna.service.Sound.prototype.playPlaylistSound=function(e,t,i,n,s){this.playPlaylist(this.getSoundPlaylist(e),t,i,n,s)},sna.service.Sound.prototype.stopLoopSound=function(e){e.playing()&&(e.endLoop=!0)},Howl.prototype.unpause=function(){for(var e,t=0;t<this._sounds.length;t++)this._sounds[t]._paused&&!this._sounds[t]._ended&&(e=this._sounds[t]._id,this.play(e));return this},sna.service.SoundProvider=function(){this.config={},this.$get=[sna.service.ROOT_SCOPE,this._init.bind(this)]},sna.service.SoundProvider.prototype._create=function(){return new sna.service.Sound(this.config)},sna.service.SoundProvider.prototype._init=function(e){var t=this._create();return t.scope=e,t},sna.module.core.provider(sna.service.SOUND,sna.service.SoundProvider),sna.service.SOUNDS="SoundsService",sna.service.SOUNDS_PROVIDER=sna.service.SOUNDS+sna.service.PROVIDER_SUFFIX,sna.service.Sounds=function(e){this.name=sna.service.SOUNDS,this.q=null,this.scope=null,this.sound=null},sna.service.Sounds.prototype.init=function(){},sna.service.Sounds.prototype.loadingStart=function(e){},sna.service.Sounds.prototype.loadingEnd=function(e){},sna.service.Sounds.prototype.splashScreenShow=function(e){},sna.service.Sounds.prototype.splashScreenClose=function(e){},sna.service.Sounds.prototype.gameStart=function(e){},sna.service.Sounds.prototype.spinButtonClick=function(e){},sna.service.Sounds.prototype.spinStart=function(e){},sna.service.Sounds.prototype.reelSpinStop=function(e){},sna.service.Sounds.prototype.reelsSpinStop=function(e){},sna.service.Sounds.prototype.fastReelsSpinStop=function(e){},sna.service.Sounds.prototype.winAnnouncement=function(e){},sna.service.Sounds.prototype.winAnimationStart=function(e){},sna.service.Sounds.prototype.winAnimationStop=function(e){},sna.service.Sounds.prototype.winIndividual=function(e){},sna.service.Sounds.prototype.anticipationStart=function(e){},sna.service.Sounds.prototype.bigWinStart=function(e){},sna.service.Sounds.prototype.bigWinEnd=function(e){},sna.service.Sounds.prototype.bigWinStop=function(e){},sna.service.Sounds.prototype.beforeMiniFeatureStart=function(e){},sna.service.Sounds.prototype.miniFeatureStart=function(e){},sna.service.Sounds.prototype.miniFeatureEnd=function(e){},sna.service.Sounds.prototype.beforeFeatureStart=function(e){},sna.service.Sounds.prototype.featureStart=function(e){},sna.service.Sounds.prototype.afterFeatureStart=function(e){},sna.service.Sounds.prototype.featureEnd=function(e){},sna.service.Sounds.prototype.featureEndDone=function(e){},sna.service.Sounds.prototype.featureClose=function(e){},sna.service.Sounds.prototype.specialSymbolLanding=function(e){},sna.service.Sounds.prototype.anticipationEnd=function(e){},sna.service.SoundsProvider=function(){this.$get=[sna.service.Q,sna.service.ROOT_SCOPE,sna.service.SOUND,this._init.bind(this)]},sna.service.SoundsProvider.prototype._init=function(e,t,i){var n=this._create();return n.q=e,n.scope=t,n.sound=i,n},sna.service.SoundsProvider.prototype._create=function(){return new sna.service.Sounds},sna.module.core.provider(sna.service.SOUNDS,sna.service.SoundsProvider),sna.service.LOADER="LoaderService",sna.service.LOADER_PROVIDER=sna.service.LOADER+sna.service.PROVIDER_SUFFIX,sna.service.DEFAULT_BASE_PATH=(window.SNA||{}).basePath||"",sna.service.DEFAULT_ASSET_PATH=(window.SNA||{}).assetPath||"assets/",sna.service.DEFAULT_CONFIG_LOCATION=(window.SNA||{}).configLocation||"config.json",sna.service.ASSET_TYPE_IMAGE="Image",sna.service.ASSET_TYPE_IMAGE_STATIC="ImageStatic",sna.service.BITMAP_FONT="BitmapFont",sna.service.ASSET_TYPE_ATLAS="TextureAtlas",sna.service.ASSET_TYPE_SEQUENCE="Sequence",sna.service.ASSET_TYPE_MUSIC="Music",sna.service.ASSET_TYPE_SOUND="Sound",sna.service.ASSET_TYPE_VIDEO="Video",sna.service.ASSET_TYPE_HTML="HTML",sna.service.ASSET_TYPE_SPINE="Spine",sna.service.ASSET_TYPE_SPINE_1="Spine1",sna.service.ASSET_TYPE_SPINE_DYNAMIC_ATLAS="SpineDynamicAtlas",sna.presentation.SPINE_BASE_PATH="spines/",sna.service.ATLAS_IMAGE_ASSET_SUFFIX="_image",sna.service.SPINE_ATLAS_ASSET_SUFFIX="_atlas",sna.service.LOADER_EVENT_ERROR="error",sna.service.LOADER_EVENT_PROGRESS="progress",sna.service.LOADER_EVENT_COMPLETE="complete",sna.service.XL_ASSETS_FOLDER="xl/",sna.service.L_ASSETS_FOLDER="l/",sna.service.M_ASSETS_FOLDER="m/",sna.service.S_ASSETS_FOLDER="s/",sna.service.DEFAULT_IMAGE_WEIGHT=5,sna.service.DEFAULT_VIDEO_WEIGHT=10,sna.service.DEFAULT_ATLAS_DESCRIPTION_WEIGHT=1,sna.service.DEFAULT_ATLAS_TEXTURES_WEIGHT=10,sna.service.DEFAULT_SPINE_DESCRIPTION_WEIGHT=2,sna.service.DEFAULT_SPINE_ATLAS_WEIGHT=6,sna.service.DEFAULT_FONT_WEIGHT=3,sna.service.DEFAULT_LANGUAGE_URL_PARAMETER_KEY="lang",sna.service.DEFAULT_LANGUAGE_URL_PARAMETER="en",sna.service.Loader=function(e){this.name=sna.service.LOADER,this.basePath=e.basePath,this.assetPath=e.assetPath,this.configLocation=e.configLocation,this.remainingLoadCalls=null,this.loadProgress=0,this.layoutSizePaths=e.layoutSizePaths,this.skipProgressWeightIncrement={},this.q=null,this.http=null,this.scope=null,this.pixiLoader=null,this.sound=null,this.failedResources={},this.attemptsRemaining={},this.successfulResources={},this.loadingPromises={},this.spinesWithDynamicAtlas={}},sna.service.Loader.prototype.loadGameConfig=function(){return log(this.name,"loadGameConfig",sna.log.DEBUG,"Loading initial game config."),this.http.get(this.configLocation).then(function(e){return log(this.name,"loadGameConfig",sna.log.DEBUG,"Loaded game config:",e.data),e.data})},sna.service.Loader.prototype.init=function(e){return this.presentation=e,log(this.name,"init",sna.log.DEBUG,"Initializing loader."),this.loadLoaderTranslations().then(this.initLoaderCallbacks.bind(this)).then(this.loadLoaderAssets.bind(this),this.loadLoaderAssets.bind(this)).then(this.setupLoaderScreen.bind(this,e))},sna.service.Loader.prototype.initLoaderCallbacks=function(){var e=this.pixiLoader;e.onLoad.add(function(e,t){this.successfulResources[t.name]=t}.bind(this)),e.onError.add(function(e,t,i){log(this.name,"loadAssets",sna.log.FATAL,"Resource load FAILED! "+i.name);var n,s=i.assetPack||"base";this.attemptsRemaining[s]=this.attemptsRemaining[s]||{},void 0!==this.attemptsRemaining[s][i.name]?this.attemptsRemaining[s][i.name]--:(n=this.scope.config.reattemptLoading,this.attemptsRemaining[s][i.name]=n&&n.count?n.count:5),0<this.attemptsRemaining[s][i.name]?(this.failedResources[s]=this.failedResources[s]||[],this.failedResources[s].push(i)):log(this.name,"loadAssets",sna.log.FATAL,"Maximum load retry exceeded for: "+i.name)}.bind(this))},sna.service.Loader.prototype.loadLoaderTranslations=function(){this.translations={};var e=this.getLoaderTranslationsFileName();return this.http.get(e).then(this.processLoderTranslations.bind(this),this.loadDefaultTranslations.bind(this))},sna.service.Loader.prototype.getLoaderTranslationsFileName=function(){var e=sna.presentation.util.getUrlParameters()[sna.service.DEFAULT_LANGUAGE_URL_PARAMETER_KEY]||this.getDefaultLoaderTranslationsName();return this.basePath+"translations/loader_translations_"+e+".json"},sna.service.Loader.prototype.getDefaultLoaderTranslationsName=function(){return sna.service.DEFAULT_LANGUAGE_URL_PARAMETER},sna.service.Loader.prototype.loadDefaultTranslations=function(){return this.http.get(this.basePath+"translations/loader_translations_"+this.getDefaultLoaderTranslationsName()+".json").then(this.processLoderTranslations.bind(this))},sna.service.Loader.prototype.processLoderTranslations=function(e){this.translations=e.data},sna.service.Loader.prototype.getFontInfo=function(e){var t={};return angular.forEach(this.scope.config.fonts[e],function(e){t[e.name]=sna.service.DEFAULT_FONT_WEIGHT},this),t},sna.service.Loader.prototype.loadFonts=function(e,n){var e=this.scope.config.fonts[e]||[],s=e.length,r=this.q.defer();return s?angular.forEach(e,function(e){var t=this.assetPath+e.source,i=e.name;(e=new Font).onload=function(){n(this,{name:i}),--s||r.resolve(!0)},e.fontFamily=i,e.src=t},this):r.resolve(!0),r.promise},sna.service.Loader.prototype.loadLoaderAssets=function(){var e=this.q.defer();return e.resolve(),e.promise},sna.service.Loader.prototype.setupLoaderScreen=function(e){var t=this.q.defer();return t.resolve(),t.promise},sna.service.Loader.prototype.loadAssets=function(e,t,i){this.loadingPromises[e]=this.q.defer(),this.currentAssetPack=e,this.remainingLoadCalls=t||{},angular.extend(this.remainingLoadCalls,this.sound.getLoadInfo(e)),angular.extend(this.remainingLoadCalls,this.getFontInfo(e)),this.loadProgress=0;var n=this.pixiLoader,t=this.scope.config.assets[e];log(this.name,"loadAssets",sna.log.INFO,"Detected asset size for loading: "+this.scope.layout.selectedSize.name);var s=!0;if(angular.forEach(t,function(e,t){s=!1,log(this.name,"loadAssets",sna.log.DEBUG,"Found base asset: "+e),this.loadAssetByType({asset:e,name:t})},this),s)return this.loadingPromises[e].resolve(),this.loadingPromises[e].promise;t=this.onProgress();return this.updateProgressWeights(),i||n.on(sna.service.LOADER_EVENT_PROGRESS,t),n.load(this.onAssetPackLoadingCompleted.bind(this,e)),this.sound.loadSounds(e,t),this.loadFonts(e,t),this.loadingPromises[e].promise},sna.service.Loader.prototype.onAssetPackLoadingCompleted=function(e){this.loadSpinesWithDynamicAtlas(e)},sna.service.Loader.prototype.loadSpinesWithDynamicAtlas=function(e){angular.forEach(this.spinesWithDynamicAtlas,function(e){var t=new PIXI.spine.core.TextureAtlas;e.spriteSheets.forEach(function(e){t.addTextureHash(this.pixiLoader.resources[e.replace("{dpi}",this.scope.layout.selectedSize.height)].textures,!0)},this);var i=angular.copy(e);i.type=sna.service.ASSET_TYPE_SPINE_1,this.loadAssetByType({asset:i,name:e.name,assetLoadOptions:{metadata:{spineAtlas:t,parentResource:{children:[]}}},onComplete:function(){delete this.spinesWithDynamicAtlas[e.name],this.skipProgressWeightIncrement[e.name]=!1}.bind(this)})},this),this.pixiLoader.load(this.processFailedResources.bind(this,e))},sna.service.Loader.prototype.loadAssetByType=function(e){var t=e.asset,i=e.name,n=e.assetLoadOptions,s=e.onComplete,r=this.scope.layout.selectedSize.path,o=this.scope.layout.selectedSize.height,a=this.pixiLoader,l=sna.service;if(this.shouldLoadAsset(t))switch(t.languageVariant&&(e=sna.presentation.util.getUrlParameters()[sna.service.DEFAULT_LANGUAGE_URL_PARAMETER_KEY]?sna.presentation.util.getUrlParameters()[sna.service.DEFAULT_LANGUAGE_URL_PARAMETER_KEY]:this.presentation.iface.getCasinoLanguage()?this.presentation.iface.getCasinoLanguage():"en",t.languageVariant[e]&&(t.resource=t.languageVariant[e])),t.type){case l.ASSET_TYPE_IMAGE:a.add(i,this.assetPath+r+t.resource,{parentResource:{children:[]}}),this.remainingLoadCalls[i]=sna.service.DEFAULT_IMAGE_WEIGHT;break;case l.ASSET_TYPE_IMAGE_STATIC:var h=i.split("/")[i.split("/").length-1];a.add(h,this.assetPath+i,{parentResource:{children:[]}}),this.remainingLoadCalls[h]=sna.service.DEFAULT_IMAGE_WEIGHT;break;case l.ASSET_TYPE_ATLAS:t.path?a.add(i,this.assetPath+t.path,{parentResource:{children:[]}},s):a.add(i,this.assetPath+r+t.resource,{parentResource:{children:[]}}),this.remainingLoadCalls[i]=sna.service.DEFAULT_ATLAS_DESCRIPTION_WEIGHT,this.remainingLoadCalls[i+sna.service.ATLAS_IMAGE_ASSET_SUFFIX]=sna.service.DEFAULT_ATLAS_TEXTURES_WEIGHT;break;case l.ASSET_TYPE_SPINE:a.add(i,this.assetPath+r+t.resource,{parentResource:{children:[]}}),this.remainingLoadCalls[i]=sna.service.DEFAULT_SPINE_DESCRIPTION_WEIGHT,this.remainingLoadCalls[i+sna.service.SPINE_ATLAS_ASSET_SUFFIX]=sna.service.DEFAULT_SPINE_ATLAS_WEIGHT;break;case l.ASSET_TYPE_SPINE_1:h="";t.metadata&&t.metadata.additionalSuffixP&&(h="p"),a.add(i,this.assetPath+sna.presentation.SPINE_BASE_PATH+t.resource,n||{metadata:{spineAtlasSuffix:"_"+o+h+".atlas"},parentResource:{children:[]}},s),this.skipProgressWeightIncrement||(this.remainingLoadCalls[i]=sna.service.DEFAULT_SPINE_DESCRIPTION_WEIGHT,this.remainingLoadCalls[i+sna.service.SPINE_ATLAS_ASSET_SUFFIX]=sna.service.DEFAULT_SPINE_ATLAS_WEIGHT);break;case l.ASSET_TYPE_SPINE_DYNAMIC_ATLAS:this.skipProgressWeightIncrement[t.name]=!0,(this.spinesWithDynamicAtlas[t.name]=t).spriteSheets.forEach(function(e){e=e.replace("{dpi}",o);this.pixiLoader.resources[e]||this.loadAssetByType({asset:{path:sna.presentation.SPINE_BASE_PATH+e,type:l.ASSET_TYPE_ATLAS},name:e})},this),this.remainingLoadCalls[i]=sna.service.DEFAULT_SPINE_DESCRIPTION_WEIGHT,this.remainingLoadCalls[i+sna.service.SPINE_ATLAS_ASSET_SUFFIX]=sna.service.DEFAULT_SPINE_ATLAS_WEIGHT;break;case l.ASSET_TYPE_VIDEO:a.add(i,this.assetPath+r+t.resource,{parentResource:{children:[]}}).onComplete.once(function(){a.resources[i].texture=PIXI.Texture.from(a.resources[i].data,{resourceOptions:{autoPlay:!1}})}),this.remainingLoadCalls[i]=sna.service.DEFAULT_VIDEO_WEIGHT;break;case l.ASSET_TYPE_SEQUENCE:for(var c=0;c<t.frames;c++){for(var p=t.folder||t.prefix+"/",u="",d=0;d<t.frameDigits;d++)u+="0";u=(u+=c).substr(-1*t.frameDigits),filename=t.prefix+u+t.suffix,a.add(i+c,this.assetPath+r+p+filename,{parentResource:{children:[]}}),this.remainingLoadCalls[i+c]=sna.service.DEFAULT_IMAGE_WEIGHT}break;case l.BITMAP_FONT:a.add(i,this.assetPath+sna.presentation.BITMAP_FONT_BASE_PATH+i)}else log(this.name,"loadAssetByType",sna.log.DEBUG,"Asset was skipped due to configuration ("+i+")",t)},sna.service.Loader.prototype.processFailedResources=function(e){"base"===e&&this.pixiLoader.removeAllListeners(sna.service.LOADER_EVENT_PROGRESS);var t,i=!1;angular.forEach(this.failedResources,function(e,t){angular.forEach(e,function(e){i||(i=!0,this.pixiLoader.reset());try{-1!==e.name.indexOf(".json_image")?(delete this.successfulResources[e.name],delete this.successfulResources[e.name.replace("_image","")],this.pixiLoader.add(e.name.replace("_image",""),e.url.replace(".png",".json"),{parentResource:{children:[]}})):this.pixiLoader.add(e.name,e.url,{parentResource:{children:[]}})}catch(e){}},this),this.failedResources[t]=[]},this),i?(t=(t=this.scope.config.reattemptLoading)&&t.timeout?t.timeout:100,setTimeout(function(){this.pixiLoader.load(this.processFailedResources.bind(this,e))}.bind(this),t)):(log(this.name,"loadAssets",sna.log.DEBUG,"Asset loading complete."),this.pixiLoader.resources=this.successfulResources,this.loadingPromises[e].resolve())},sna.service.Loader.prototype.shouldLoadAsset=function(e,t){var i=!0,n=this.scope.layout;return e.requireEnvironment&&(i=i&&n.has(e.requireEnvironment)),i=e.excludeEnvironment?i&&!n.has(e.excludeEnvironment):i},sna.service.Loader.prototype.updateProgressWeights=function(){var i=0;angular.forEach(this.remainingLoadCalls,function(e,t){i+=e},this);var n=100/i||1;angular.forEach(this.remainingLoadCalls,function(e,t){this.remainingLoadCalls[t]*=n},this)},sna.service.Loader.prototype.onSetupFunctionCallback=function(){},sna.service.Loader.prototype.onProgress=function(){return function(e,t){t.assetPack=this.currentAssetPack;var i=t.name,t=this.remainingLoadCalls&&this.remainingLoadCalls[i];void 0===t&&(log(this.name,"onProgress",sna.log.WARNING,"Asset was loaded, but progress bar could not be updated"+i),t=0),this.loadProgress+=t,this.updateProgress(i,t)}.bind(this)},sna.service.Loader.prototype.updateProgress=function(e,t){var i=Math.round(100*this.loadProgress)/100;log(this.name,"updateProgress",sna.log.INFO,"Loaded asset: "+e+"("+i+"%)")},sna.service.Loader.prototype.complete=function(){log(this.name,"complete",sna.log.INFO,"Loading completed.")},sna.service.Loader.prototype.onInitalLoadCompleted=function(){log(this.name,"onInitalLoadComplete",sna.log.INFO,"Inital loading completed.")},sna.service.Loader.prototype.loadBaseAssetPack=function(e){return this.loadAssets(sna.service.ASSET_PACK_BASE,e).then(function(){this.presentation.preloadTextures(sna.service.ASSET_PACK_BASE)}.bind(this))},sna.service.LoaderProvider=function(){this.config={basePath:sna.service.DEFAULT_BASE_PATH,assetPath:sna.service.DEFAULT_ASSET_PATH,configLocation:sna.service.DEFAULT_CONFIG_LOCATION,casinoServiceName:sna.service.CASINO_COMMUNICATION},this.$get=[sna.service.INJECTOR,sna.service.Q,sna.service.HTTP,sna.service.ROOT_SCOPE,sna.service.PIXI_LOADER,sna.service.SOUND,this._init.bind(this)]},sna.service.LoaderProvider.prototype.assetPath=function(e){return this.config.basePath=e,this},sna.service.LoaderProvider.prototype.assetPath=function(e){return this.config.assetPath=e,this},sna.service.LoaderProvider.prototype.configLocation=function(e){return this.config.configLocation=e,this},sna.service.LoaderProvider.prototype.casino=function(e){return this.config.casinoServiceName=e,this},sna.service.LoaderProvider.prototype._create=function(){return new sna.service.Loader(this.config)},sna.service.LoaderProvider.prototype._init=function(e,t,i,n,s,r){var o=this._create();return o.http=i,o.q=t,o.scope=n,o.pixiLoader=s,o.sound=r,o.casino=e.get(this.config.casinoServiceName,this),o},sna.module.core.provider(sna.service.LOADER,sna.service.LoaderProvider),sna.service.INTERFACE="InterfaceService",sna.service.INTERFACE_PROVIDER=sna.service.INTERFACE+sna.service.PROVIDER_SUFFIX,sna.service.Interface=function(e){this.name=sna.service.INTERFACE,this.ui=null,this.pointer=null,this.frameUpdatedControllers=[],this.autoUpdatedControllers=[],this.eventRegisteredControllers={},this.globalPressCallbacks=[],this.q=null,this.scope=null,this.view=null,this.timeline=null,this.game=null,this.presentation=null,this.communication=null,this.sound=null,this.sounds=null,this.casino=null,this.noSleep=null,this.keyboardCallbacks={},"localhost"===location.hostname&&sna.debug.enableCheats&&(window.iface=this)},sna.service.Interface.prototype.addKeyboardCallback=function(e,t,i){angular.forEach(e,function(e){this.keyboardCallbacks[e]=this.ui.keyboard(e),this.keyboardCallbacks[e].press=i,this.keyboardCallbacks[e].release=t},this)},sna.service.Interface.prototype.removeKeyboardCallback=function(e){angular.forEach(e,function(e){this.keyboardCallbacks[e]&&this.ui.keyboardRemove(this.keyboardCallbacks[e])},this)},sna.service.Interface.prototype.update=function(){this.ui&&(this.ui.update(),this.processFrameUpdatedControllers())},sna.service.Interface.prototype.processFrameUpdatedControllers=function(){angular.forEach(this.frameUpdatedControllers,function(e){e.updateOnFrame&&e.updateOnFrame()},this)},sna.service.Interface.prototype.registerFrameUpdate=function(e){this.frameUpdatedControllers.push(e)},sna.service.Interface.prototype.unregisterFrameUpdate=function(e){e=this.frameUpdatedControllers.indexOf(e);-1!==e&&this.frameUpdatedControllers.splice(e,1)},sna.service.Interface.prototype.updateUiOnLayoutChange=function(){var e;this.pointer&&(e=this.scope.layout,this.pointer.screenOffset=e.screenOffset,this.pointer.scale=e.screenOffset.scale)},sna.service.Interface.prototype.setup=function(){log(this.name,"setup",sna.log.DEBUG,"Setup TINK interface."),this.ui=new Tink(PIXI,this.view),this.pointer=this.ui.makePointer(),this.pointer.screenOffset=this.scope.layout.screenOffset,this.pointer.scale=this.scope.layout.screenOffset.scale,this.pointer.release=this.onScreenClick.bind(this),this.forceFullScreen=!1,this.setupTabChangedListeners(),this.setupOnBeforeUnloadListeners(),this.setupCookieUsage()},sna.service.Interface.prototype.setupCookieUsage=function(){this.scope&&this.scope.config&&this.scope.config.parameters&&this.scope.config.parameters.disableCookies&&(sna.service.util.readCookie=function(){},sna.service.util.writeCookie=function(){})},sna.service.Interface.prototype.setupTabChangedListeners=function(){var e,t,i;this.scope.layout;void 0!==document.hidden?(e="hidden",i="visibilitychange",t="visibilityState"):void 0!==document.mozHidden?(e="mozHidden",i="mozvisibilitychange",t="mozVisibilityState"):void 0!==document.msHidden?(e="msHidden",i="msvisibilitychange",t="msVisibilityState"):void 0!==document.webkitHidden&&(e="webkitHidden",i="webkitvisibilitychange",t="webkitVisibilityState"),void 0===document.addEventListener||void 0===e?(window.addEventListener("blur",function(e){this.onScreenHidden()}.bind(this)),window.addEventListener("focus",function(e){this.onScreenShown()}.bind(this))):document.addEventListener(i,function(){switch(document[t]){case"visible":this.onScreenShown();break;case"hidden":this.onScreenHidden()}}.bind(this),!1)},sna.service.Interface.prototype.setupOnBeforeUnloadListeners=function(){window.onbeforeunload=function(){this.onBeforeUnload()}.bind(this)},sna.service.Interface.prototype.onBeforeUnload=function(){},sna.service.Interface.prototype.onScreenShown=function(){var e=1;this.scope.layout.has(sna.service.ENVIRONMENT_IOS)&&(e=2e3),setTimeout(function(){this.sound.screenHidden=!1,Howler.ctx&&("suspended"!==Howler.ctx.state&&Howler.ctx.suspend(),Howler.ctx.resume())}.bind(this),e)},sna.service.Interface.prototype.restoreSounds=function(){this.sound&&this.prevSoundState&&angular.forEach(this.sound.sounds,function(e,t){this.prevSoundState[t]&&e.play()},this)},sna.service.Interface.prototype.onScreenHidden=function(){Howler.ctx&&Howler.ctx.suspend()},sna.service.Interface.prototype.getCasinoLanguage=function(){return!1},sna.service.Interface.prototype.saveSoundStates=function(){this.prevSoundState={},angular.forEach(this.sound.sounds,function(e,t){this.prevSoundState[t]=e.playing()},this)},sna.service.Interface.prototype.pauseAllSounds=function(){angular.forEach(this.sound.sounds,function(e,t){e.playing()&&e.pause()},this)},sna.service.Interface.prototype.unpauseAllSounds=function(){angular.forEach(this.sound.sounds,function(e,t){e.unpause()},this)},sna.service.Interface.prototype.muteAllSounds=function(){this.sound&&(this.setSoundState(null,!1),this.setMusicState(null,!1))},sna.service.Interface.prototype.pauseGameExecution=function(e,t,i){this.scope.config.iface.dontPauseSoundsOnPausedExecution&&!t||this.pauseAllSounds(),TweenMax.globalTimeScale(0),e&&PIXI.Ticker.shared.stop(),i&&void 0!==triggerGameWrapperModelUpdate&&triggerGameWrapperModelUpdate({general:{blockInteraction:!0}})},sna.service.Interface.prototype.resumeGameExecution=function(e,t,i){this.scope.config.iface.dontPauseSoundsOnPausedExecution&&!t||this.unpauseAllSounds(),TweenMax.globalTimeScale(1),e&&PIXI.Ticker.shared.start(),i&&void 0!==triggerGameWrapperModelUpdate&&triggerGameWrapperModelUpdate({general:{blockInteraction:!1}})},sna.service.Interface.prototype.onScreenClick=function(){this.requestFullScreen(),this.preventSleepIfNeeded();var e,t=this,i=!1;this.game.getParameterValue("tinkUpdateButtonsDisabled")?(e=this.getCurrentPointerTarget(),i=e&&!e.allowGlobalPress):this.ui.buttons.forEach(function(e){if(e.enabled&&e.worldVisible)return t.pointer.hitTestSprite(e)||e.isFollowingCursor?(e.screenClickHitDetected=!0,!(i=!0)):void(e.screenClickHitDetected=!1)}),this.runGlobalPressCallbacks(i)},sna.service.Interface.prototype.getInteractionManager=function(){return this.presentation.renderer.plugins.interaction},sna.service.Interface.prototype.getCurrentPointerTarget=function(){return this.getInteractionManager().eventData.currentTarget},sna.service.Interface.prototype.runGlobalPressCallbacks=function(e){for(var t=this.globalPressCallbacks.length,i=this.globalPressCallbacks.length-1;0<=i;i--){var n=this.globalPressCallbacks[i];if(e&&!n.clickThrough||n(),t>this.globalPressCallbacks.length)return this.runGlobalPressCallbacks()}},sna.service.Interface.prototype.addGlobalPressCallback=function(e,t){-1==this.globalPressCallbacks.indexOf(e)&&(this.globalPressCallbacks.push(e),t&&(e.clickThrough=!0))},sna.service.Interface.prototype.removeGlobalPressCallback=function(e){e=this.globalPressCallbacks.indexOf(e);-1!=e&&this.globalPressCallbacks.splice(e,1)},sna.service.Interface.prototype.anyChildHit=function(e){if(this.pointer.hitTestSprite(e))return!0;var t=!1;return angular.forEach(e.children,function(e){t=t||this.anyChildHit(e)},this),t},sna.service.Interface.prototype.hideByIds=function(){var e=Array.prototype.slice.call(arguments)[1].split(",");angular.forEach(e,function(e){this.presentation.getById(e)&&this.presentation.getById(e).hide()},this)},sna.service.Interface.prototype.showByIds=function(){var e=Array.prototype.slice.call(arguments)[1].split(",");angular.forEach(e,function(e){this.presentation.getById(e)&&this.presentation.getById(e).show()},this)},sna.service.Interface.prototype.callCreateAnimationTimeline=function(){var e=Array.prototype.slice.call(arguments)[1].split(",");angular.forEach(e,function(e){this.presentation.createAnimationTimeline(e,0,!1,!0)},this)},sna.service.Interface.prototype.callCancelAnimationTimeline=function(){var e=Array.prototype.slice.call(arguments)[1],t=Array.prototype.slice.call(arguments)[2]||!0;this.presentation.cancelAnimation(e,t)},sna.service.Interface.prototype.allSoundToggle=function(){this.sound.toggleGroups(sna.service.SOUND_TYPE_MUSIC),this.sound.toggleGroups(sna.service.SOUND_TYPE_FX,sna.service.SOUND_TYPE_INTERFACE),this.sound.setDefaultSoundState(!this.sound.getDefaultSoundState())},sna.service.Interface.prototype.musicToggle=function(){this.sound.toggleGroups(sna.service.SOUND_TYPE_MUSIC)},sna.service.Interface.prototype.soundToggle=function(){this.sound.toggleGroups(sna.service.SOUND_TYPE_FX,sna.service.SOUND_TYPE_INTERFACE)},sna.service.Interface.prototype.setSoundState=function(e,t){this.sound.setGroupState(t,sna.service.SOUND_TYPE_FX,sna.service.SOUND_TYPE_INTERFACE)},sna.service.Interface.prototype.setMusicState=function(e,t){this.sound.setGroupState(t,sna.service.SOUND_TYPE_MUSIC)},sna.service.Interface.prototype.setAllSoundState=function(e,t){this.sound.setGroupState(t,sna.service.SOUND_TYPE_FX,sna.service.SOUND_TYPE_INTERFACE),this.sound.setGroupState(t,sna.service.SOUND_TYPE_MUSIC),this.sound.setDefaultSoundState(t)},sna.service.Interface.prototype.setDefaultSoundState=function(e){this.sound.setDefaultSoundState(e)},sna.service.Interface.prototype.getDefaultSoundState=function(){return this.sound.getDefaultSoundState()},sna.service.Interface.prototype.mobileVibrate=function(e){this.scope.game.vibrationEnabled&&(!("vibrate"in navigator||"mozVibrate"in navigator)||"vibrate"in navigator||(navigator.vibrate=navigator.mozVibrate,navigator.vibrate(e)))},sna.service.Interface.prototype.setMasterVolume=function(e,t){this.sound.setMasterVolume(t)},sna.service.Interface.prototype.setGroupVolume=function(e,t,i){this.sound.setGroupVolume(t,i)},sna.service.Interface.prototype.redirectTo=function(e){window.location=e},sna.service.Interface.prototype.requestFullScreen=function(){var e=this.scope.layout;sna.debug.preventFullscreen||e.has(sna.service.ENVIRONMENT_IOS)||function(){try{return window.self!==window.top}catch(e){return!0}}()||e.has(sna.service.ENVIRONMENT_DESKTOP)&&!1===this.forceFullScreen||(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||(document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen?document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen()),this.forceFullScreen=!1)},sna.service.Interface.prototype.toggleDesktopFullScreen=function(){document.fullscreenElement&&null!==document.fullscreenElement||document.webkitFullscreenElement&&null!==document.webkitFullscreenElement||document.mozFullScreenElement&&null!==document.mozFullScreenElement||document.msFullscreenElement&&null!==document.msFullscreenElement?(this.forceFullScreen=!1,document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()):this.forceFullScreen=!0},sna.service.Interface.prototype.preventSleepIfNeeded=function(){this.scope.config.iface&&this.scope.config.iface.disablePreventSleepOnMobile||this.scope.layout.has(sna.service.ENVIRONMENT_MOBILE)&&(this.noSleep||(this.noSleep=new NoSleep,this.noSleep.enable()))},sna.service.Interface.prototype.enableSleep=function(){this.noSleep.disable()},sna.service.Interface.prototype.registerAutoUpdate=function(e){this.autoUpdatedControllers.push(e)},sna.service.Interface.prototype.unregisterAutoUpdate=function(e){e=this.autoUpdatedControllers.indexOf(e);-1!==e&&this.autoUpdatedControllers.splice(e,1)},sna.service.Interface.prototype.autoUpdatePresentation=function(t){angular.forEach(this.autoUpdatedControllers,function(e){t&&!this.checkAutoUpdate(e,t)||e.updatePresentation()},this)},sna.service.Interface.prototype.checkAutoUpdate=function(e,t){var i=!0,e=e.scope.config;return e&&e.dontAutoUpdateOn&&angular.forEach(e.dontAutoUpdateOn,function(e){e===t&&(i=!1)},this),i},sna.service.Interface.prototype.registerEventCallback=function(e,t,i){this.eventRegisteredControllers[e]||(this.eventRegisteredControllers[e]=[]),this.eventRegisteredControllers[e].push({controller:t,callback:i})},sna.service.Interface.prototype.unregisterEventCallback=function(e,t,i){for(var n=this.eventRegisteredControllers[e],s=0;s<n.length;s++)if(n[s].callback===i&&n[s].controller===t)return n.splice(s,1),!0;return!1},sna.service.Interface.prototype.triggerEvent=function(e,t){var i=[];return log(sna.service.INTERFACE,"triggerEvent",sna.log.DEBUG,"Event triggered: "+e),angular.forEach(this.eventRegisteredControllers[e],function(e){e=e.callback.call(e.controller,t);e&&i.push(e)},this),this.q.all(i)},sna.service.Interface.prototype.showRestoreGameLoadingScreen=function(){},sna.service.Interface.prototype.gameInit=function(e,t){var i=this.q.when(!0);return i=(i=i.then(this.showIntro.bind(this,t))).then(this.processFreeRounds.bind(this,t,e)),i=e?i.then(this.restoreGame.bind(this,t)):i.then(this.startGame.bind(this,t))},sna.service.Interface.prototype.showIntro=function(e){return this.q.when(!0)},sna.service.Interface.prototype.onSetupComplete=function(){return this.game.hasFreeRounds()?this.presentation.createAnimationTimeline("$freeRoundsStart",0,!1,!0,null):this.q.when(!0)},sna.service.Interface.prototype.processFreeRounds=function(e,t){return this.q.when(!0)},sna.service.Interface.prototype.restoreGame=function(e){return this.presentation.createAnimationTimeline("$gameRestore",0,!1,!0)},sna.service.Interface.prototype.startGame=function(e){return this.q.when(!0)},sna.service.Interface.prototype.getFreeRounds=function(){return this.q.when(!0)},sna.service.Interface.prototype.invoke=function(i,e,t){if(this[e]){var n=(n=[i]).concat(t);return angular.forEach(n,function(e,t){"string"==typeof e&&(n[t]=this.presentation.parseValue(i,e))},this),this[e].apply(this,n)}},sna.service.Interface.prototype.createCallback=function(e,t,i){return function(){e.visible&&e.enabled&&this.invoke(e,t,i.concat(Array.prototype.slice.call(arguments))),"log"!==i[i.length-1]&&"log"!==t||sna.presentation.util.logMovement(this.presentation,e)}.bind(this)},sna.service.Interface.prototype.createButtonCallback=function(e,t,i){var n=this.createCallback(e,t,i);return function(){n(),this.onButtonClicked()}.bind(this)},sna.service.Interface.prototype.onButtonClicked=function(){},sna.service.Interface.prototype.getTopCenterY=function(e,t){this.presentation.view;for(var i=1,n=e.parent;n;)i*=n.scale.y,n=n.parent;return-this.scope.layout.viewHeight/this.presentation.globalScale/i/2+t},sna.service.Interface.prototype.getInteractionManager=function(){return this.presentation.renderer.plugins.interaction},sna.service.Interface.prototype.getPointerCoords=function(){var e=this.getInteractionManager();try{return e.eventData.data.global}catch(e){return{}}},sna.service.Interface.prototype.getCurrentPointerTarget=function(){return this.getInteractionManager().eventData.currentTarget},sna.service.Interface.prototype.followCursor=function(e){this.cursorObjects=this.cursorObjects||[],this.cursorObjects.push(e)},sna.service.Interface.prototype.unfollowCursor=function(e){!this.cursorObjects||-1!==(e=this.cursorObjects.indexOf(e))&&this.cursorObjects.splice(e,1)},sna.service.Interface.prototype.updateCursorObjects=function(){var a;this.cursorObjects&&(a=this.getPointerCoords(),this.cursorObjects.forEach(function(e){if(e.worldVisible){for(var t={x:1,y:1},i=e.parent;i;)i.scale&&(t.x*=i.scale.x,t.y*=i.scale.y),i=i.parent;var n=(a.x-e.parent.getGlobalPosition().x)/t.x,s=(a.y-e.parent.getGlobalPosition().y)/t.y,r=e.followCursorRules||{};n+=r.offsetX||0,s+=r.offsetY||0,(n=n>r.maxX?r.maxX:n)<r.minX&&(n=r.minX),(s=s>r.maxY?r.maxY:s)<r.minY&&(s=r.minY);var o=!1;(e.x!=n||e.y!=s)&&r.notifyChange&&e.onFollow&&(o=!0),r.stepSize&&(o=!1),r.disableX||(r.stepSize?Math.abs(e.x-n)>+r.stepSize/2&&n!=r.maxX&&(o=!0,n>e.x?e.x=e.x+r.stepSize:e.x=e.x-r.stepSize):e.x=n),r.disableY||(r.stepSize?Math.abs(e.y-s)>+r.stepSize/2&&s!=r.maxY&&(o=!0,s>e.y?e.y=e.y+r.stepSize:e.y=e.y-r.stepSize):e.y=s),o&&e.onFollow(n,s)}},this))},sna.service.InterfaceProvider=function(){this.config={gameServiceName:sna.service.GAME,presentationServiceName:sna.service.PRESENTATION,communicationServiceName:sna.service.COMMUNICATION,casinoServiceName:sna.service.CASINO_COMMUNICATION,soundsServiceName:sna.service.SOUNDS},this.$get=[sna.service.Q,sna.service.ROOT_SCOPE,sna.service.TIMELINE,sna.service.VIEW,sna.service.INJECTOR,sna.service.SOUND,sna.service.SOUNDS,sna.service.CASINO_COMMUNICATION,this._init.bind(this)]},sna.service.InterfaceProvider.prototype.game=function(e){return this.config.gameServiceName=e,this},sna.service.InterfaceProvider.prototype.presentation=function(e){return this.config.presentationServiceName=e,this},sna.service.InterfaceProvider.prototype.communication=function(e){return this.config.communicationServiceName=e,this},sna.service.InterfaceProvider.prototype.casino=function(e){return this.config.casinoServiceName=e,this},sna.service.InterfaceProvider.prototype.sounds=function(e){return this.config.soundsServiceName=e,this},sna.service.InterfaceProvider.prototype._create=function(e){return new sna.service.Interface(e)},sna.service.InterfaceProvider.prototype._init=function(e,t,i,n,s,r,o,a,l){var h=this._create(this.config);return h.q=e,h.scope=t,h.view=n,h.timeline=i,h.game=s.get(this.config.gameServiceName,this),h.presentation=s.get(this.config.presentationServiceName,this),h.communication=s.get(this.config.communicationServiceName,this),h.sound=r,h.sounds=s.get(this.config.soundsServiceName,this),h.casino=s.get(this.config.casinoServiceName,this),h},sna.module.core.provider(sna.service.INTERFACE,sna.service.InterfaceProvider),sna.service.UI="UIService",sna.service.UI_PROVIDER=sna.service.UI+sna.service.PROVIDER_SUFFIX,sna.service.Ui=function(e){this.name=sna.service.UI,this.scale=e.scale,this.PIXI=null,this.element=null,this.draggableSprites=[],this.pointers=[],this.buttons=[]},sna.service.Ui.prototype.makeDraggable=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];if(t[0]instanceof Array){var n=t[0];if(0<n.length)for(var s=n.length-1;0<=s;s--){var r=n[s];this.draggableSprites.push(r),void 0===r.draggable&&(r.draggable=!0,r._localDraggableAllocation=!0)}}else angular.forEach(t,function(e){this.draggableSprites.push(e),void 0===e.draggable&&(e.draggable=!0,e._localDraggableAllocation=!0)},this)},sna.service.Ui.prototype.makeUndraggable=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];if(t[0]instanceof Array){var n=t[0];if(0<n.length)for(var s=n.length-1;0<=s;s--){var r=n[s];this.draggableSprites.splice(this.draggableSprites.indexOf(r),1),!0===r._localDraggableAllocation&&(r.draggable=!1)}}else angular.forEach(t,function(e){this.draggableSprites.splice(this.draggableSprites.indexOf(e),1),!0===e._localDraggableAllocation&&(e.draggable=!1)},this)},sna.service.Ui.prototype.makePointer=function(){var e=arguments.length<=0||void 0===arguments[0]?this.element:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.scale:arguments[1],a=(this.draggableSprites,this.addGlobalPositionProperties),t={element:e,scale:t,_x:0,_y:0,width:1,height:1,get x(){return(this._x-(this.screenOffset?this.screenOffset.x:0))/this.scale},get y(){return(this._y-(this.screenOffset?this.screenOffset.y:0))/this.scale},get centerX(){return this.x},get centerY(){return this.y},get position(){return{x:this.x,y:this.y}},get cursor(){return this.element.style.cursor},set cursor(e){this.element.style.cursor=e},wasDown:!1,wasUp:!1,isDown:!1,isUp:!0,tapped:!1,downTime:0,elapsedTime:0,press:void 0,release:void 0,tap:void 0,dragSprite:null,dragOffsetX:0,dragOffsetY:0,_visible:!0,get visible(){return this._visible},set visible(e){this.cursor=!0===e?"auto":"none",this._visible=e},moveHandler:function(e){var t=e.target;this._x=e.pageX-t.offsetLeft,this._y=e.pageY-t.offsetTop,e.preventDefault()},touchmoveHandler:function(e){var t=e.target;this._x=e.targetTouches[0].pageX-t.offsetLeft,this._y=e.targetTouches[0].pageY-t.offsetTop,e.preventDefault()},downHandler:function(e){this.isDown=!0,this.isUp=!1,this.tapped=!1,this.downTime=Date.now(),this.press&&this.press(),e.preventDefault()},touchstartHandler:function(e){var t=e.target;this._x=e.targetTouches[0].pageX-t.offsetLeft,this._y=e.targetTouches[0].pageY-t.offsetTop,this.isDown=!0,this.isUp=!1,this.tapped=!1,this.downTime=Date.now(),this.press&&this.press(),e.preventDefault()},upHandler:function(e){this.elapsedTime=Math.abs(this.downTime-Date.now()),this.elapsedTime<=200&&!1===this.tapped&&(this.tapped=!0,this.tap&&this.tap()),this.isUp=!0,this.isDown=!1,this.release&&this.release(),e.preventDefault()},touchendHandler:function(e){this.elapsedTime=Math.abs(this.downTime-Date.now()),this.elapsedTime<=200&&!1===this.tapped&&(this.tapped=!0,this.tap&&this.tap()),this.isUp=!0,this.isDown=!1,this.release&&this.release(),e.preventDefault()},hitTestSprite:function(e){for(var t={x:1,y:1},i=e.parent;i;)i.scale&&(t.x*=i.scale.x,t.y*=i.scale.y),i=i.parent;a(e);var n,s,r=void 0,o=void 0,o=void 0!==e.anchor?(r=(e.interactionWidth||e.width)*e.anchor.x*t.x,(e.interactionHeight||e.height)*e.anchor.y*t.y):r=0;return e.circular?(n=this.x-(e.gx+e.width/2-r),s=this.y-(e.gy+e.width/2-o),Math.sqrt(n*n+s*s)<e.width/2):(n=e.gx-r-(e.interactionOffsetX||0),s=e.gx+(e.interactionWidth||e.width)*t.x-r-(e.interactionOffsetX||0),r=e.gy-o-(e.interactionOffsetY||0),e=e.gy+(e.interactionHeight||e.height)*t.y-o-(e.interactionOffsetY||0),this.x>n&&this.x<s&&this.y>r&&this.y<e)}};return e.addEventListener("mousemove",t.moveHandler.bind(t),!1),e.addEventListener("mousedown",t.downHandler.bind(t),!1),window.addEventListener("mouseup",t.upHandler.bind(t),!1),e.addEventListener("touchmove",t.touchmoveHandler.bind(t),!1),e.addEventListener("touchstart",t.touchstartHandler.bind(t),!1),window.addEventListener("touchend",t.touchendHandler.bind(t),!1),e.style.touchAction="none",this.pointers.push(t),t},sna.service.Ui.prototype.addGlobalPositionProperties=function(e){void 0===e.gx&&Object.defineProperty(e,"gx",{get:function(){return e.getGlobalPosition().x}}),void 0===e.gy&&Object.defineProperty(e,"gy",{get:function(){return e.getGlobalPosition().y}})},sna.service.Ui.prototype.updateDragAndDrop=function(s){0===this.pointers.length&&this.makePointer(this.element,this.scale),angular.forEach(this.pointers,function(t){if(t.isDown)if(null===t.dragSprite)for(var e=s.length-1;-1<e;e--){var i=s[e];if(t.hitTestSprite(i)&&i.draggable){t.dragOffsetX=t.x-i.gx,t.dragOffsetY=t.y-i.gy;var n=(t.dragSprite=i).parent.children;n.splice(n.indexOf(i),1),n.push(i),s.splice(s.indexOf(i),1),s.push(i);break}}else t.dragSprite.x=t.x-t.dragOffsetX,t.dragSprite.y=t.y-t.dragOffsetY;t.isUp&&(t.dragSprite=null),s.some(function(e){return t.hitTestSprite(e)&&e.draggable?(t.visible&&(t.cursor="pointer"),!0):(t.visible&&(t.cursor="auto"),!1)})},this)},sna.service.Ui.prototype.makeInteractive=function(e){e.press=e.press||void 0,e.release=e.release||void 0,e.over=e.over||void 0,e.out=e.out||void 0,e.tap=e.tap||void 0,e.state="up",e.action="",e.pressed=!1,e.hoverOver=!1,e.tinkType="Sprite",e.enabled=!0,this.buttons.push(e)},sna.service.Ui.prototype.sortButtons=function(e){do{for(var t,i=!1,n=0;n<this.buttons.length-1;n++)this.buttons[n].tinkZ<this.buttons[n+1].tinkZ&&(t=this.buttons[n],this.buttons[n]=this.buttons[n+1],this.buttons[n+1]=t,i=!0)}while(i)},sna.service.Ui.prototype.remove=function(e){e=this.buttons.indexOf(e);-1!==e&&this.buttons.splice(e,1)},sna.service.Ui.prototype.updateButtons=function(){0===this.pointers.length&&this.makePointer(this.element,this.scale);var n="auto",s=!1;angular.forEach(this.buttons,function(i){i.enabled&&i.visible||(i.state="up",i.hoverOver=!1,i.pressed=!1),i.enabled&&i.visible&&angular.forEach(this.pointers,function(e){var t=!s&&e.hitTestSprite(i);s=s||t,e.isUp&&(i.state="up","button"===i.tinkType&&i.gotoAndStop(0)),t&&i.visible&&(i.state="over",i.totalFrames&&3<=i.totalFrames&&"button"===i.tinkType&&i.enabled&&i.gotoAndStop(1),e.isDown&&(i.state="down","button"===i.tinkType&&i.enabled&&(3<=i.totalFrames?i.gotoAndStop(2):i.gotoAndStop(1))),e.visible&&i.visible&&i.enabled&&!i.noPointer&&(n="pointer")),"down"===i.state&&(i.pressed||(i.press&&i.press(),i.pressed=!0,i.action="pressed")),"over"===i.state&&(i.pressed&&(i.release&&i.release(),i.pressed=!1,i.action="released",e.tapped&&i.enabled&&i.visible&&i.tap&&i.tap()),i.hoverOver||(i.over&&i.over(),i.hoverOver=!0)),"up"===i.state&&(i.pressed&&(i.release&&i.release(),i.pressed=!1,i.action="released"),i.hoverOver&&(i.out&&i.out(),i.hoverOver=!1))},this)},this),this.pointers[0].cursor=n},sna.service.Ui.prototype.makeButton=function(){},sna.service.Ui.prototype.button=function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],i=arguments.length<=2||void 0===arguments[2]?0:arguments[2],n=void 0;return"string"==typeof e[0]?n=this.PIXI.utils.TextureCache[e[0]]?this.PIXI.extras.MovieClip.fromFrames(e):this.PIXI.extras.MovieClip.fromImages(e):e[0]instanceof this.PIXI.Texture&&(n=new this.PIXI.extras.MovieClip(e)),this.makeInteractive(n),n.tinkType="button",n.x=t,n.y=i,n},sna.service.Ui.prototype.update=function(){0!==this.draggableSprites.length&&this.updateDragAndDrop(this.draggableSprites),0!==this.buttons.length&&this.updateButtons()},sna.service.Ui.prototype.keyboard=function(e){var t={};return t.code=e,t.isDown=!1,t.isUp=!0,t.press=void 0,t.release=void 0,t.downHandler=function(e){e.keyCode===t.code&&(t.isUp&&t.press&&t.press(),t.isDown=!0,t.isUp=!1),e.preventDefault()},t.upHandler=function(e){e.keyCode===t.code&&(t.isDown&&t.release&&t.release(),t.isDown=!1,t.isUp=!0),e.preventDefault()},window.addEventListener("keydown",t.downHandler.bind(t),!1),window.addEventListener("keyup",t.upHandler.bind(t),!1),t},sna.service.Ui.prototype.arrowControl=function(e,t){if(void 0===t)throw new Error("Please supply the arrowControl method with the speed at which you want the sprite to move");var i=this.keyboard(38),n=this.keyboard(39),s=this.keyboard(40),r=this.keyboard(37);r.press=function(){e.vx=-t,e.vy=0},r.release=function(){n.isDown||0!==e.vy||(e.vx=0)},i.press=function(){e.vy=-t,e.vx=0},i.release=function(){s.isDown||0!==e.vx||(e.vy=0)},n.press=function(){e.vx=t,e.vy=0},n.release=function(){r.isDown||0!==e.vy||(e.vx=0)},s.press=function(){e.vy=t,e.vx=0},s.release=function(){i.isDown||0!==e.vx||(e.vy=0)}},sna.service.UiProvider=function(){this.config={scale:1},this.$get=[sna.service.VIEW,sna.service.PIXI,this._init.bind(this)]},sna.service.UiProvider.prototype._create=function(e){return new sna.service.Ui(e)},sna.service.UiProvider.prototype._init=function(e,t){var i=this._create(this.config);return i.PIXI=t,i.element=e,i},sna.module.core.provider(sna.service.UI,sna.service.UiProvider),sna.service.PRESENTATION="PresentationService",sna.service.PRESENTATION_PROVIDER=sna.service.PRESENTATION+sna.service.PROVIDER_SUFFIX,sna.service.MAX_TEMPLATE_REFERENCES=10,sna.service.LAYOUT_OVERRIDE="layout",sna.service.TAG_OVERRIDE="tag",sna.service.WIDTH_OVERRIDE="width",sna.service.HEIGHT_OVERRIDE="height",sna.service.ASPECT_OVERRIDE="aspect",sna.service.MAX_OVERRIDE="max",sna.service.MIN_OVERRIDE="min",sna.service.DEFAULT_ROUND_PIXELS=!0,sna.service.DEFAULT_ANTIALIASING=!0,sna.service.DEFAULT_TRANSPARENT_CANVAS=!1,sna.service.DEFAULT_CANVAS_RESOLUTION=1,sna.service.DEFAULT_LEGACY=!1,sna.service.CONVERT_TO_NUMBER_PREFIX="#",sna.service.CONVERT_TO_STRING_PREFIX="$",sna.service.CONVERT_TO_BOOLEAN_PREFIX="!",sna.service.REFERENCE_PREFIX="@",sna.service.REFERENCE_SEPARATOR=".",sna.service.MODEL_REFERENCE="@model",sna.service.SLOT_MODEL_REFERENCE="@slot",sna.service.POKER_MODEL_REFERENCE="@poker",sna.service.UTILS_REFERENCE="@util",sna.service.ANIMATION_CONTROLLER_REFERENCE="@this",sna.service.PRESENTATION_CONTROLLER_REFERENCE="@parent",sna.service.GAME_SERVICE_REFERENCE="@game",sna.service.INTERFACE_SERVICE_REFERENCE="@iface",sna.service.TRANSLATION_REFERENCE="@translate",sna.service.LAYOUT_REFERENCE="@layout",sna.service.VIEW_REFERENCE="@view",sna.service.TIME_REFERENCE="{time}",sna.service.SMART_FPS=1,sna.service.SMART_FPS_DESKTOP=!0,sna.service.SMART_FPS_FULL=!0,sna.service.Presentation=function(e){this.limitFPSCounter=0,this.name=sna.service.PRESENTATION,this.config=e,this.renderer=null,this.stage=null,this.globalScale=1,this.idCache={},this.q=null,this.scope=null,this.view=null,this.controller=null,this.timeline=null,this.main=null,this.assetManager=null,this.animationCache={},this.gameModeCache={},this.particleEmitters=[],this.wrapperSpaceTop=0,this.wrapperSpaceLeft=0},sna.service.Presentation.prototype.init=function(e){this.main=e,this.iface=e.iface,this.renderer=this.createRenderer(),this.stage=this.createStage(),sna.debug.enableCheats&&(globalThis.__PIXI_STAGE__=this.stage,globalThis.__PIXI_RENDERER__=this.renderer),sna.debug.canvasDebug&&(sna.debug.debugPresentation=sna.debug.createDebugPresentation(this,this.view,this.renderer),this.stage.addChild(sna.debug.debugPresentation)),this.globalScale=this.scope.layout.getScale()},sna.service.Presentation.prototype.createRenderer=function(){var t=this.config,e=this.scope.layout,i=t.width||e.width,n=t.height||e.height,s=e.viewWidth,r=e.viewHeight,t=(t.resolution||e.resolution,{view:this.view,antialias:t.antialias,transparent:t.transparent,roundPixels:t.roundPixels,resolution:e.resolution,legacy:t.legacy});if(5<=PIXI.VERSION[0])var o=new PIXI.Application({view:this.view,width:i,height:n,resolution:e.resolution,autoStart:!1}).renderer;else try{o=PIXI.autoDetectRenderer(s,r,t)}catch(e){o=new PIXI.CanvasRenderer(s,r,t)}t="WebGL";return PIXI.utils.isWebGLSupported()||(t="Canvas"),this.scope.layout.environmentTags.push(t),log(this.name,"createRenderer",sna.log.DEBUG,"Created PIXI Renderer."),this.view.style.width=i+"px",this.view.style.height=n+"px",o},sna.service.Presentation.prototype.createStage=function(){sna.debug.debugPanelEnabled&&sna.debug.enableCheats&&sna.debug.addDebugPanel(this,this.scope.config.presentation);var e,t=this.createPresentation(this.scope.config.presentation,this.view);return PIXI.display?((e=new PIXI.display.Stage).addChild(t),this.stageToRender=e):this.stageToRender=t,log(this.name,"createStage",sna.log.DEBUG,"Created stage display object: "+sna.presentation.util.describe(e)),t},sna.service.Presentation.prototype.createPresentation=function(e,t,i){var n=t&&t.scope&&t.scope.config?t.scope.config:{},n=this.parseConfig(e,n);if(!this.checkPresentationRequirements(n))return!1;var s=this.controller(n.type,{$scope:{config:n,parent:t,model:i}});return n.animation&&angular.forEach(e.animation,function(e){var t=this.createAnimation(s,e);"string"==typeof e.name?s.animation(e.name,t):angular.forEach(e.name,function(e){s.animation(e,t)},this)},this),t.positionElement&&t.positionElement(s),s.initPresentation&&s.initPresentation(),s.scope&&s.scope.config&&s.scope.config.id&&(this.idCache[s.scope.config.id]=s),s},sna.service.Presentation.prototype.checkPresentationRequirements=function(e){return this.scope.layout.checkPresentationRequirements(e.environment)&&this.checkCustomPresentationRequirements(e)},sna.service.Presentation.prototype.checkCustomPresentationRequirements=function(e){e=e.environment&&e.environment.requireCondition?e.environment.requireCondition:e.requireCondition||!1;return!e||(Array.isArray(e)?e.every(function(e){return this.parseValue(this,e)},this):this.parseValue(this,e))},sna.service.Presentation.prototype.parseValue=function(i,e){if(null!=e){var t=e[0]===sna.service.CONVERT_TO_NUMBER_PREFIX,n=e[0]===sna.service.CONVERT_TO_STRING_PREFIX,s=e[0]===sna.service.CONVERT_TO_BOOLEAN_PREFIX,r=null;if((e=t||n||s?e.substring(1):e)[0]===sna.service.REFERENCE_PREFIX){var o=e.split(sna.service.REFERENCE_SEPARATOR),a=o.shift();switch(a){case sna.service.UTILS_REFERENCE:target=sna.model.utils;break;case sna.service.MODEL_REFERENCE:target=i.scope.model||this.scope.game;break;case sna.service.SLOT_MODEL_REFERENCE:case sna.service.POKER_MODEL_REFERENCE:target=this.scope.game;break;case sna.service.ANIMATION_CONTROLLER_REFERENCE:target=i;break;case sna.service.PRESENTATION_CONTROLLER_REFERENCE:target=i.scope.parent;break;case sna.service.GAME_SERVICE_REFERENCE:target=this.main.game;break;case sna.service.INTERFACE_SERVICE_REFERENCE:target=this.main.iface;break;case sna.service.TRANSLATION_REFERENCE:var l=o[0];target=this.scope.translations;break;case sna.service.LAYOUT_REFERENCE:target=this.scope.layout;break;case sna.service.VIEW_REFERENCE:target=r=this.parseGlobalCoordinate(i,o),o.length=0;break;default:return log(this.name,"parseValue",sna.log.FATAL,"Could not parse value: "+e),0}for(r=target;o.length;){var h=target;if(void 0===target||null===target){r=!1,log(this,"parseValue",sna.log.WARNING,"Parsed value expression resolves to undefined property: "+e);break}if(target=target[o.shift()],target&&target.constructor&&target.call&&target.apply){var c,p,u,d=o.join(".");return r=-1!==d.indexOf(",")?(c=h,p=target,u=d.split(","),angular.forEach(u,function(e,t){u[t]=this.parseValue(i,e)},this),p.apply(c,u)):target.apply(h,o)}r=target}a!=sna.service.TRANSLATION_REFERENCE||r||(r="",sna.debug.debugMissingTranslations&&(r="["+this.scope.translations.$LANG+":"+l+"]"))}else r=e;return r==sna.service.TIME_REFERENCE&&(r=new Date),t?Number(r):n?String(r):s?"true"==r||"1"==r||"false"!=r&&"0"!=r&&r:r}},sna.service.Presentation.prototype.parseGlobalCoordinate=function(e,t){for(var i=this.view,n=this.stage,s=this.globalScale,r=(this.scope.layout.resolution,t[0]),o=t[1],a=Number(t[2])*s,l=e.parent||e.scope.parent.parent,h=1,c=r===sna.presentation.X_PROPERTY?-this.wrapperSpaceLeft:-this.wrapperSpaceTop,p=[];l;)p.unshift(l),l=l.parent;for(var u=0;u<p.length;u++)c+=(l=p[u])[r]*h,h*=l.scale[r];var d=i.width/n.layoutWidth,e=r===sna.presentation.X_PROPERTY?i.width:i.height,e=(e-=(r===sna.presentation.X_PROPERTY?this.wrapperSpaceLeft:this.wrapperSpaceTop)*d)/d/h,n=c/h||0;return("height"==t[0]?(a=Number(t[1])||0,i.height/d+a):"width"==t[1]?(a=Number(t[1])||0,i.width/d/h+a):"t"==o||"l"==o?a-n:"b"==o||"r"==o?e+a-n:e/2+a-n)/s},sna.service.Presentation.prototype.parseConfig=function(e,t){var i=sna.service.MAX_TEMPLATE_REFERENCES;(n=angular.copy(e)).initialConfig=e,n.referenceConfig=t;do{i||log(this.name,"parseConfig",sna.log.FATAL,"Maximum templates resolved! Possibly a circular reference of the templates?");var n,s=n.overrides;delete n.overrides,angular.forEach(s,function(e,t){t=t.split(":");this.isValidCondition(t)&&angular.merge(n,e)},this),n.template&&(i--,s=n.template,delete n.template,s=this.getTemplate(s),n=angular.merge({},s,n))}while(n.template);return this.augmentConfig(n,t),n},sna.service.Presentation.prototype.getTemplate=function(e){var t=this.scope.config.templates;return t&&t[e]||log(this.name,"getTemplate",sna.log.FATAL,"Template ["+e+"] not found!"),t[e]},sna.service.Presentation.prototype.isValidCondition=function(e,t){if(!e.length)return!0;var i=e.shift();if(!t)return this.isValidCondition(e,i);var n=this.scope.layout;switch(t){case sna.service.LAYOUT_OVERRIDE:return this.proceedIfSatisfied(e,n.name==i);case sna.service.TAG_OVERRIDE:return this.proceedIfSatisfied(e,n.has(i));case sna.service.WIDTH_OVERRIDE:return checkConditionValue(e,i,n.width);case sna.service.HEIGHT_OVERRIDE:return checkConditionValue(e,i,n.height);case sna.service.ASPECT_OVERRIDE:return checkConditionValue(e,i,n.aspectRatio)}return log(this.name,"isValidCondition",sna.log.ERROR,"Invalid override condition found: ",e),!1},sna.service.Presentation.prototype.checkConditionValue=function(e,t,i){if(t==sna.service.MAX_OVERRIDE){var n=Number(e.shift());return this.proceedIfSatisfied(i<=n)}if(t!=sna.service.MIN_OVERRIDE)return this.proceedIfSatisfied(i==t);n=Number(e.shift());return this.proceedIfSatisfied(n<=i)},sna.service.Presentation.prototype.proceedIfSatisfied=function(e,t){return!!t&&this.isValidCondition(e)},sna.service.Presentation.prototype.augmentConfig=function(e,t){!e.atlas&&t.atlas&&(e.atlas=t.atlas)},sna.service.Presentation.prototype.createAnimation=function(e,t,i){e={config:t,parent:e,model:i||e.scope.model};void 0===t.type&&(t.type=sna.presentation.ANIMATION);e=this.controller(t.type,{$scope:e});return void 0===e.animate&&log(this.name,"createAnimation",sna.log.ERROR,"Created animation that does not implement 'animate' method! "+sna.presentation.util.describe(e)),e},sna.service.Presentation.prototype.createAnimationTimeline=function(i,e,t,n,s,r){e=e||0,t=t||!1,n=n||!0,s=s||null,r=r||null,log(this.name,"createAnimationTimeline",sna.log.DEBUG,"Creating timeline: "+i);var o=t==sna.presentation.FRAME_ANIMATION,a=[];this.searchAnimations(a,s||this.stage,i);var l,t=this.q.defer(),s=[t,i],h=new this.timeline({paused:!n,useFrames:o,onComplete:this.resolveAnimationComplete.bind(this),onCompleteParams:s});return s.push(h),a.length&&(l=[],angular.forEach(a,function(e){var t={global:h,animation:null,config:null,parent:null,name:i,params:r};l.push(e.animate(t))},this),h.add(l,0,!1,0)),0===h._duration&&h.set({},{},"+=0.001"),n&&h.gotoAndPlay(0),e&&h.delay(e),(t.promise.animation=h).defered=t,this.registerAnimation(i,h),t.promise},sna.service.Presentation.prototype.cancelAnimation=function(t,i){log(this.name,"cancelAnimation",sna.log.DEBUG,"Cancelling timeline: "+t);var e=this.animationCache[t];e&&(angular.forEach(e,function(e){e&&(e.stop(),e.kill(),i&&e.eventCallback("onComplete")(e.defered,t))},this),e.length=0)},sna.service.Presentation.prototype.cancelCachedAnimations=function(){angular.forEach(this.animationCache,function(e,t){0!==t.indexOf("$")&&this.cancelAnimation(t)},this)},sna.service.Presentation.prototype.searchAnimations=function(t,e,i){if(e.animation){var n=e.animation(i);if(n)return void t.push(n)}e.dontSearchAnimation||angular.forEach(e.children,function(e){this.searchAnimations(t,e,i)},this)},sna.service.Presentation.prototype.resolveAnimationComplete=function(e,t,i){log(this.name,"resolveAnimationComplete",sna.log.DEBUG,"Finished timeline: "+t),this.deregisterAnimation(t,i),e.resolve(t)},sna.service.Presentation.prototype.registerAnimation=function(e,t){var i=this.animationCache[e];i||(this.animationCache[e]=[],i=this.animationCache[e]),i.push(t)},sna.service.Presentation.prototype.deregisterAnimation=function(e,t){e=this.animationCache[e];!e||-1!==(t=e.indexOf(t))&&e.splice(t,1)},sna.service.Presentation.prototype.isAnimationRunning=function(e){return!(!this.animationCache[e]||!this.animationCache[e].length)},sna.service.Presentation.prototype.checkFreeSpinsLayout=function(){sna.service.util.returnIf(this,"iface.scope.game.feature.active")&&-1==this.scope.layout.layoutTags.indexOf("FreeSpins")?this.scope.layout.layoutTags.push("FreeSpins"):!sna.service.util.returnIf(this,"iface.scope.game.feature.active")&&-1<this.scope.layout.layoutTags.indexOf("FreeSpins")&&this.scope.layout.layoutTags.splice(this.scope.layout.layoutTags.indexOf("FreeSpins"),1)},sna.service.Presentation.prototype.updateLayoutCallbacks=[],sna.service.Presentation.prototype.updateLayout=function(t){this.renderer.resize(t.viewWidth,t.viewHeight);var e=this.view;e.style.width=t.width+"px",e.style.height=t.height+"px",this.updateLayoutCallbacks.length&&angular.forEach(this.updateLayoutCallbacks,function(e){e(t)},this),this.updatePresentationLayout(this.stage),sna.debug.presentationTree&&sna.debug.displayPresentationTree(0,this.stage),this.createAnimationTimeline("$layoutChanged",0,!1,!0),sna.debug.canvasDebug&&!sna.debug.debugPresentation&&(sna.debug.debugPresentation=sna.debug.createDebugPresentation(this,this.view,this.renderer),this.stage.addChild(sna.debug.debugPresentation))},sna.service.Presentation.prototype.updatePresentationLayout=function(e){var t;e.scope&&e.scope.config&&(e.scope.config.initialConfig,e.scope.config.referenceConfig),e.updateLayout&&e.updateLayout(),e.scope&&e.scope.parent&&((t=e.scope.parent)&&t.positionElement&&t.positionElement(e)),angular.forEach(e.children,function(e){this.updatePresentationLayout(e)},this)},sna.service.Presentation.prototype.displayLoop=function(t){angular.forEach(this.particleEmitters,function(e){e.update(t/1e3)},this),sna.debug.debugFps&&sna.debug.updateFps();var e=!0;if(this.scope.game&&this.scope.game.isInMode&&(e=this.scope.game.isInMode(sna.model.slot.MODE_IDLE)||this.scope.game.isInMode(sna.model.slot.MODE_WIN_INDIVIDUAL)),sna.service.SMART_FPS_FULL||this.scope.layout.has(sna.service.ENVIRONMENT_MOBILE)||sna.service.SMART_FPS_DESKTOP&&e){if(this.limitFPSCounter<sna.service.SMART_FPS)return void++this.limitFPSCounter;this.limitFPSCounter=0}this.renderer.render(this.stage)},sna.service.Presentation.prototype.getById=function(e){return this.idCache[e]},sna.service.Presentation.prototype.setup=function(){log(this.name,"setup",sna.log.DEBUG,"Setup presentation of default game mode.");var e=this.scope.config.presentation,t=e.game,i=t.defaultMode,n=t[i.name];this.createGameModePresentation(i.name);angular.forEach(t.additionalPresentation,function(e,t){this.createGameModePresentation(t)},this),log(this.name,"setup",sna.log.DEBUG,"Created default game mode presentation: ");var n=n.iface;n&&(n=e.iface[n],e=this.createPresentation(n,this.stage,this.scope.game),this.stage.addLayer(n.layer,e)),this.setInterfaceZOrder(),log(this.name,"setup",sna.log.DEBUG,"Created default interface presentation."),sna.debug.presentationTree&&sna.debug.displayPresentationTree(0,this.stage),sna.debug.enableCheats&&this.createGameModePresentation("cheats"),sna.debug.enableVisualDebug&&-1!=window.location.href.indexOf(sna.debug.VISUAL_DEBUG_PARAMETER)&&this.createGameModePresentation("visualDebug",this.main.iface.debugCreateDebugModel()),this.createGameModePresentation("overlays"),this.createGameModePresentation("intro"),this.createGameModePresentation("loadingScreen"),this.createGameModePresentation("time"),this.createGameModePresentation("blockingOverlay"),this.updateLayout(this.scope.layout),this.assetManager.setup()},sna.service.Presentation.prototype.createSpineSequenceTimeline=function(i,e,n){var s=new this.timeline;return n=n||{},e&&e.forEach(function(e,t){i.hasAnimation&&i.hasAnimation(e)&&(s.call(i.gotoAndPlay,[e,n.loop||!1,n.timeScale||1],i),s.set({},{},"+="+i.getAnimationDuration(e)/(n.timeScale||1)))},this),s},sna.service.Presentation.prototype.beginBackgroundLoad=function(){this.assetManager.beginBackgroundLoad()},sna.service.Presentation.prototype.loadGameModePresentation=function(e,t,i){var n=this.scope.config.iface.gameModes[e],s=this.q.when(!0);return n?(n.assetRequirements&&angular.forEach(n.assetRequirements,function(e){s=s.then(this.assetManager.ensureAssetPackLoaded.bind(this.assetManager,e,this.preloadTextures.bind(this,e)))},this),s=(s=s.then(this.beforeCreateGameModePresentation.bind(this,e))).then(this.createGameModePresentation.bind(this,e,t,i))):s},sna.service.Presentation.prototype.beforeCreateGameModePresentation=function(e){return this.iface.triggerEvent(e+"Init")},sna.service.Presentation.prototype.createGameModePresentation=function(e,o,a){if(this.gameModeCache[e]&&!a)return!1;var l,t=this.scope.config.presentation.game[e];return t&&(t.type?(l=this.createPresentation(t,this.stage,o||this.scope.game),this.gameModeCache[e]=l,this.stage.addChild(l)):(l=[],angular.forEach(t,function(e,t){if(t=a||t,e.constructor===Array)for(var i,n=0;n<e.length;n++){if(!(i=this.getById(t)))return;var s=o||i.scope&&i.scope.model||this.scope.game,r=this.createPresentation(e[n],i,s);e[n].defaultPresentation?l.unshift(r):l.push(r),!1!==r&&i.addChild(r)}else(i=this.getById(t))&&(s=o||i.scope&&i.scope.model||this.scope.game,r=this.createPresentation(e,i,s),e.defaultPresentation?l.unshift(r):l.push(r),!1!==r&&i.addChild(r))},this),this.gameModeCache[e]=l),sna.debug.presentationTree&&sna.debug.displayPresentationTree(0,this.stage)),this.setInterfaceZOrder(),this.scope.config.parameters.skipLayoutUpdateOnGameMode||this.updateLayout(this.scope.layout),this.currentGameMode=e,l},sna.service.Presentation.prototype.destroyGameModePresentation=function(e){var t=this.gameModeCache[e];t&&(t.length?angular.forEach(t,function(e){this.destroyPresentation(e),e&&e.parent&&e.parent.removeChild(e)},this):(this.destroyPresentation(t),this.stage.removeChild(t)),sna.debug.presentationTree&&sna.debug.displayPresentationTree(0,this.stage),this.setInterfaceZOrder(),this.scope.config.parameters.skipLayoutUpdateOnGameMode||this.updateLayout(this.scope.layout),delete this.gameModeCache[e],this.currentGameMode=this.scope.config.presentation.game.defaultMode.name)},sna.service.Presentation.prototype.destroyPresentation=function(t){t.scope&&t.scope.config&&t.scope.config.id&&delete this.idCache[t.scope.config.id],t.destroyPresentation&&t.destroyPresentation(),t.tinkType&&this.main.iface.ui.remove(t);var i=[];angular.forEach(t.children,function(e){this.destroyPresentation(e),i.push(e)},this),angular.forEach(i,function(e){t.removeChild(e)},this)},sna.service.Presentation.prototype.setInterfaceZOrder=function(){this.setZOrder(this.stage,0),this.main.iface.ui.sortButtons()},sna.service.Presentation.prototype.setZOrder=function(e,t){var i=t||0;return e.tinkZ=i++,angular.forEach(e.children,function(e){i=this.setZOrder(e,i)},this),i},sna.service.Presentation.prototype.prerenderIfAssetsAvailable=function(e){e=e||1/0;for(var t=!0;0<e--&&t;)t=this.assetManager.safelyPrerenderAssetPack(this.preloadTextures.bind(this))},sna.service.Presentation.prototype.preloadTextures=function(i){var e,n;log(this,"preloadTextures",sna.log.DEBUG,"Preloading textures for asset pack: "+i),this.config.prerenderTextures&&(e=PIXI.loader,n=new PIXI.RenderTexture.create(10,10),angular.forEach(e.resources,function(e){var t;e.texture&&!e.prerendered&&e.assetPack==i&&(log(this,"preloadTextures",sna.log.DEBUG,"Preloading texture: "+e.name),t=new PIXI.Sprite(e.texture),this.renderer.render(t,n),e.prerendered=!0)},this))},sna.service.Presentation.prototype.unloadTextures=function(){var e=PIXI.loader;angular.forEach(e.resources,function(e){var t;e.isImage&&e.prerendered&&"base"!==e.assetPack&&((t=this.assetManager.assetConfig[e.assetPack])&&t.preserve||(t=this.renderer).destroyTexture&&(log(this,"unloadTextures",sna.log.DEBUG,"Unloading texture: "+e.assetPack+" / "+e.name),t.destroyTexture(e.texture,!1)))},this)},sna.service.Presentation.prototype.createPromiseForTimeline=function(e,t,i,n,s){if(null!=s){var r=i==sna.presentation.FRAME_ANIMATION,o=this.q.defer(),i=[o,e],r=new this.timeline({paused:!n,useFrames:r,onComplete:this.resolveAnimationComplete.bind(this),onCompleteParams:i});return i.push(r),r.add(s),0===r._duration&&r.set({},{},"+=0.001"),n&&r.gotoAndPlay(0),t&&r.delay(t),(o.promise.animation=r).defered=o,this.registerAnimation(e,r),o.promise}log(this.name,"createPromiseForTimeline",sna.log.DEBUG,"Timeline param is undefined or null.")},sna.service.Presentation.prototype.getCoordinatesRelativeTo=function(e,t,i){var n=[],s={x:0,y:0,rotation:0,scale:{x:1,y:1}};n.push(e);for(var r=e.scope.parent;r!=parent&&(n.push(r),null!=r.parent)&&(r=r.parent).scope.config.id!=t&&r!=t;);return angular.forEach(n.reverse(),function(e){s.rotation?(s.x+=e.y*Math.sin(s.rotation)*-1,s.y+=e.y*s.scale.y*Math.cos(s.rotation)):(s.x+=e.x*s.scale.x,s.y+=e.y*s.scale.y),s.scale.x*=e.scale.x,s.scale.y*=e.scale.y,s.rotation+=e.rotation},this),i&&(i.x&&(s.x+=s.scale.x*i.x),i.y&&(s.y+=s.scale.y*i.y),i.scale&&(s.scale.x*=i.scale,s.scale.y*=i.scale)),s},sna.service.Presentation.prototype.getRelativeOffset=function(e,t){if(e&&t){var i=this.getCoordinatesRelativeTo(t,"stage"),n=this.getCoordinatesRelativeTo(e,"stage"),t={x:0,y:0};return t.scale=i.scale.x*e.scale.x/n.scale.x,t.x=(i.x-n.x)/n.scale.x,t.y=(i.y-n.y)/n.scale.y,t}},sna.service.Presentation.prototype.getRelativeStageOffset=function(e,t){if(e&&t){var i=this.getCoordinatesRelativeToStage(t),n=this.getCoordinatesRelativeToStage(e),s={x:0,y:0};return s.scale=i.scale.x*e.scale.x/i.scale.x,s.scaleSrc=i.scale.x*e.scale.x/n.scale.x,s.scaleDst=n.scale.x*t.scale.x/i.scale.x,s.x=(i.x-n.x)/n.scale.x,s.y=(i.y-n.y)/n.scale.y,s.destinationPosition=i,s.sourcePosition=n,s}},sna.service.Presentation.prototype.getCoordinatesRelativeToStage=function(t){var e=this.getById("stage"),i=[],n={x:0,y:0,rotation:0,scale:{x:1,y:1}};i.push(t);for(var s=t.scope.parent;s!=parent&&(i.push(s),!((s=s.parent).scope&&s.scope.config.id==e||s==e)););return angular.forEach(i.reverse(),function(e){n.rotation?(n.x+=e.y*Math.sin(n.rotation)*-1,n.y+=e.y*n.scale.y*Math.cos(n.rotation)):(n.x+=e.x*n.scale.x,n.y+=e.y*n.scale.y),t!=e&&(n.scale.x*=e.scope&&e.scope.config.scale||1,n.scale.y*=e.scope&&e.scope.config.scale||1,n.rotation+=e.rotation)},this),n},sna.service.PresentationProvider=function(){this.config={prerenderTextures:!0,antialias:sna.service.DEFAULT_ANTIALIASING,transparent:sna.service.DEFAULT_TRANSPARENT_CANVAS,legacy:sna.service.DEFAULT_LEGACY,roundPixels:sna.service.DEFAULT_ROUND_PIXELS,width:void 0,height:void 0,resolution:void 0},this.$get=[sna.service.Q,sna.service.ROOT_SCOPE,sna.service.CONTROLLER,sna.service.ASSET_MANAGER,sna.service.VIEW,sna.service.TIMELINE,this._init.bind(this)]},sna.service.PresentationProvider.prototype.antialias=function(e){return this.config.antialias=e,this},sna.service.PresentationProvider.prototype.prerenderTextures=function(e){this.config.prerenderTextures=e},sna.service.PresentationProvider.prototype.transparent=function(e){return this.config.transparent=e,this},sna.service.PresentationProvider.prototype.width=function(e){return this.config.width=e,this},sna.service.PresentationProvider.prototype.height=function(e){return this.config.height=e,this},sna.service.PresentationProvider.prototype.roundPixels=function(e){return this.config.roundPixels=e,this},sna.service.PresentationProvider.prototype.resolution=function(e){return this.config.resolution=e,this},sna.service.PresentationProvider.prototype._create=function(e){return new sna.service.Presentation(e)},sna.service.PresentationProvider.prototype._init=function(e,t,i,n,s,r){var o=this._create(this.config);return o.q=e,o.controller=i,o.scope=t,o.view=s,o.timeline=r,o.assetManager=n,o},sna.module.core.provider(sna.service.PRESENTATION,sna.service.PresentationProvider),sna.service.CASINO_COMMUNICATION="CasinoCommunicationService",sna.service.CASINO_COMMUNICATION_PROVIDER=sna.service.CASINO_COMMUNICATION+sna.service.PROVIDER_SUFFIX,sna.service.CasinoCommunication=function(e){this.name=sna.service.CASINO_COMMUNICATION},sna.service.CasinoCommunication.prototype.init=function(){},sna.service.CasinoCommunication.prototype.publish=function(){},sna.service.CasinoCommunication.prototype.listen=function(){},sna.service.CasinoCommunicationProvider=function(){this.$get=[this._init.bind(this)]},sna.service.CasinoCommunicationProvider.prototype._init=function(e){return this._create()},sna.service.CasinoCommunicationProvider.prototype._create=function(){return new sna.service.CasinoCommunication},sna.module.core.provider(sna.service.CASINO_COMMUNICATION,sna.service.CasinoCommunicationProvider),sna.service.MAIN="MainService",sna.service.MAIN_PROVIDER=sna.service.MAIN+sna.service.PROVIDER_SUFFIX,sna.service.ASSET_PACK_BASE="base",sna.module.BOOTSTRAP=[sna.service.MAIN,sna.module.Bootstrap],sna.service.Main=function(e){this.name=sna.service.MAIN,this.q=null,this.scope=null,this.loader=null,this.communication=null,this.presentation=null,this.game=null,this.iface=null,this.environment=null,this.assetManager=null,this.casinoCommunication=null,this.sound=null,this.sounds=null,this.renderI=0},sna.service.Main.prototype.checkClientRequirements=function(){return!0},sna.service.Main.prototype.handleInsufficientClientRequirements=function(){},sna.service.Main.prototype.run=function(){if(this.checkClientRequirements())return log(this.name,"run",sna.log.INFO,"Game running."),this.loader.loadGameConfig().then(this.init.bind(this)).then(this.communication.preSetup.bind(this.communication,this.setupFunctionCallback.bind(this))).then(this.load.bind(this)).then(this.setup.bind(this)).then(this.start.bind(this));this.handleInsufficientClientRequirements()},sna.service.Main.prototype.init=function(e){return log(this.name,"init",sna.log.INFO,"Initializing config."),this.scope.config=e,this.environment.init(),this.presentation.init(this),this.assetManager.init(this),this.sound.init(),this.sounds&&this.sounds.init(),this.communication.init(this),this.environment.register(this.presentation.updateLayout.bind(this.presentation)),this.environment.register(this.iface.updateUiOnLayoutChange.bind(this.iface)),this.mainLoop(),sna.debug.debugFps&&sna.debug.beginFpsDebug(),this.casinoCommunication&&this.casinoCommunication.init(this),this.loader.init(this.presentation)},sna.service.Main.prototype.load=function(){log(this.name,"load",sna.log.DEBUG,"Loading game assets and server configuration.");var e=this.communication.getSetupInfo();if(this.scope.config&&this.scope.config.communication&&this.scope.config.communication.setupCommunicationAfterLoading)return this.loader.loadAssets(sna.service.ASSET_PACK_BASE,e).then(this.presentation.preloadTextures.bind(this.presentation,sna.service.ASSET_PACK_BASE)).then(this.loader.onInitalLoadCompleted.bind(this.loader)).then(this.communication.setup.bind(this.communication,this.loader.onProgress()));var t=this.loader.loadBaseAssetPack(e),e=this.communication.setup(this.setupFunctionCallback.bind(this));return this.q.all([e,t])},sna.service.Main.prototype.setup=function(){log(this.name,"setup",sna.log.DEBUG,"Setup game using loaded assets and configuration.");var e=this.communication.configUpdate;this.environment.setup(e),this.game.setup(e),this.iface.setup(e),this.presentation.setup(e),this.setupUtils(),this.presentation.preloadTextures(sna.service.ASSET_PACK_BASE);var t=this.q.when(!0),i=this.game.gameStateRestored();return t=(t=(t=(t=(t=(t=i?t.then(this.iface.showRestoreGameLoadingScreen.bind(this.iface,e)):t.then(this.presentation.createAnimationTimeline.bind(this.presentation,"$gameStart",0,!1,!0,null))).then(this.iface.onSetupComplete.bind(this.iface,i,e))).then(this.loader.complete.bind(this.loader,this.presentation))).then(this.presentation.beginBackgroundLoad.bind(this.presentation))).then(this.redrawText.bind(this))).then(this.iface.gameInit.bind(this.iface,i,e))},sna.service.Main.prototype.setupFunctionCallback=function(e){this.loader.onSetupFunctionCallback(e,this.communication.requestId),this.loader.onProgress()},sna.service.Main.prototype.redrawText=function(){for(var e in this.presentation.idCache)this.presentation.idCache[e].hasOwnProperty("dirty")&&(this.presentation.idCache[e].dirty=!0);return this.iface.triggerEvent("redraw")},sna.service.Main.prototype.setupUtils=function(){this.scope.modelUtils={},this.scope.serviceUtils={},this.scope.modelUtils=sna.model.utils,this.scope.serviceUtils=sna.service.util},sna.service.Main.prototype.mainLoop=function(){var n,s,r,o,e,t;5<=PIXI.VERSION[0]?(n=this.presentation.scope.layout.has(sna.service.ENVIRONMENT_ANDROID),s=this.presentation.scope.layout.has(sna.service.ENVIRONMENT_WINDOWS),r=!(void 0===sna.service.ENVIRONMENT_MAC||!this.presentation.scope.layout.has(sna.service.ENVIRONMENT_MAC)),o=this.presentation.scope.layout.has(sna.service.ENVIRONMENT_IPHONE),PIXI.Ticker.shared.add(function(t){var i,e;this.renderI?(this.renderI=n||!s?0:1,i=n||!s?.03:.06,r&&(e=this.game.getParameterValue("particleFPMS"),i=window.chrome?e&&e.mac&&e.mac.chrome?e.mac.chrome:.03:e&&e.mac&&e.mac.other?e.mac.other:.005),o&&(i=.03),e=this.game.getParameterValue("forceParticleEmitter"),this.presentation.renderer.render(this.presentation.stageToRender),this.game.getParameterValue("tinkUpdateButtonsDisabled")?this.iface.updateCursorObjects():this.iface.update(),n&&!e||angular.forEach(this.presentation.particleEmitters,function(e){e.parent&&e.parent.worldVisible&&e.parent.worldAlpha&&e.update(t/PIXI.ticker.shared.speed/i*.001)},this)):this.renderI=1},this,PIXI.UPDATE_PRIORITY.NORMAL)):(t=(e=(new Date).getTime())-this.lastFrameTime||0,requestAnimationFrame(this.mainLoop.bind(this)),this.iface.update(),this.presentation.displayLoop(t),this.lastFrameTime=e)},sna.service.Main.prototype.start=function(){this.scope.gameStarted=!0},sna.service.MainProvider=function(){this.loaderServiceName=sna.service.LOADER,this.communicationServiceName=sna.service.COMMUNICATION,this.presentationServiceName=sna.service.PRESENTATION,this.gameServiceName=sna.service.GAME,this.casinoServiceName=sna.service.CASINO_COMMUNICATION,this.interfaceServiceName=sna.service.INTERFACE,this.soundsServiceName=sna.service.SOUNDS,this.$get=[sna.service.Q,sna.service.ROOT_SCOPE,sna.service.INJECTOR,this._init.bind(this)]},sna.service.MainProvider.prototype.loader=function(e){return this.loaderServiceName=e,this},sna.service.MainProvider.prototype.communication=function(e){return this.communicationServiceName=e,this},sna.service.MainProvider.prototype.presentation=function(e){return this.presentationServiceName=e,this},sna.service.MainProvider.prototype.game=function(e){return this.gameServiceName=e,this},sna.service.MainProvider.prototype.iface=function(e){return this.interfaceServiceName=e,this},sna.service.MainProvider.prototype.casino=function(e){return this.casinoServiceName=e,this},sna.service.MainProvider.prototype.sounds=function(e){return this.soundsServiceName=e,this},sna.service.MainProvider.prototype._create=function(e){return new sna.service.Main(e)},sna.service.MainProvider.prototype._init=function(e,t,i){var n=this._create({});return n.q=e,n.scope=t,n.loader=i.get(this.loaderServiceName,this),n.communication=i.get(this.communicationServiceName,this),n.presentation=i.get(this.presentationServiceName,this),n.game=i.get(this.gameServiceName,this),n.iface=i.get(this.interfaceServiceName,this),n.environment=i.get(sna.service.ENVIRONMENT,this),n.assetManager=i.get(sna.service.ASSET_MANAGER,this),n.casinoCommunication=i.get(this.casinoServiceName,this),n.sound=i.get(sna.service.SOUND,this),n.sounds=i.get(this.soundsServiceName,this),n},sna.module.core.provider(sna.service.MAIN,sna.service.MainProvider),sna.controller.TEXT_INPUT="textInputController",sna.controller.TextInput=function(i,e){this.iface=e.iface,this.presentation=e.presentation,this.scope=i,this.visible=!0,this.enabled=!0,this.initEvent=!0,i.inputValue=null,i.setup=function(e,t){i.inputValue=this.presentation.parseValue(this,e);e=t.split(":"),t=e.shift();this.setter=this.iface.createCallback(this,t,e),i.$watch(this.getCurrentValue.bind(this),function(e){this.initEvent?this.initEvent=!1:this.setter(e)}.bind(this))}.bind(this)},sna.controller.TextInput.prototype.getCurrentValue=function(){return this.scope.inputValue},sna.module.core.controller(sna.controller.TEXT_INPUT,[sna.service.SCOPE,sna.service.MAIN,sna.controller.TextInput]),sna.presentation.util={},sna.presentation.util.getUrlParameters=function(){var t={},e=window.location.href;return e=(e=e.substring(e.indexOf("?")+1)).split("&"),angular.forEach(e,function(e){e=e.split("=");t[e[0]]=e[1]}),t},sna.presentation.util.setupLangConf=function(e,t){if(t.scope&&t.scope.config){var i,n=t.scope.config,s=e.scope.lang;for(i in n){var r,o=i.split("_");o[1]&&(r=o[1],void 0!==(o=n[i])[s]?n[r]=o[s]:o.default&&(n[r]=o.default))}}},sna.presentation.util.setupX=function(e,t){var i;t.scope&&t.scope.config&&(void 0!==(i=t.scope.config.x)?"object"==typeof i&&i.dynamic?(t.scope.config.xFactoryParams=i,t.scope.config.xFactory=sna.presentation.util.xFactoryFunction,t.scope.config.x=t.scope.config.xFactory.call(t)):(t.scope.config.x=e.parseValue(t,t.scope.config.x),t.scope.config.x*=e.globalScale):t.scope.config.x=0)},sna.presentation.util.setupY=function(e,t){var i;t.scope&&t.scope.config&&(void 0!==(i=t.scope.config.y)?"object"==typeof i&&i.dynamic?(t.scope.config.yFactoryParams=i,t.scope.config.yFactory=sna.presentation.util.yFactoryFunction,t.scope.config.y=t.scope.config.yFactory.call(t)):(t.scope.config.y=e.parseValue(t,t.scope.config.y),t.scope.config.y*=e.globalScale):t.scope.config.y=0)},sna.presentation.util.xFactoryFunction=function(){return sna.presentation.util.factoryFunction.call(this,"xFactoryParams")*this.presentation.globalScale},sna.presentation.util.yFactoryFunction=function(){return sna.presentation.util.factoryFunction.call(this,"yFactoryParams")*this.presentation.globalScale},sna.presentation.util.scaleFactoryFunction=function(){return sna.presentation.util.factoryFunction.call(this,"scaleFactoryParams")},sna.presentation.util.rotationFactoryFunction=function(){return sna.presentation.util.factoryFunction.call(this,"rotationFactoryParams")},sna.presentation.util.alphaFactoryFunction=function(){return sna.presentation.util.factoryFunction.call(this,"alphaFactoryParams")},sna.presentation.util.radiusFactoryFunction=function(){return sna.presentation.util.factoryFunction.call(this,"radiusFactoryParams")},sna.presentation.util.angleFactoryFunction=function(){return sna.presentation.util.factoryFunction.call(this,"angleFactoryParams")},sna.presentation.util.visibleFactoryFunction=function(){return sna.presentation.util.factoryFunction.call(this,"visibleFactoryParams")},sna.presentation.util.fontSizeFactoryFunction=function(){return sna.presentation.util.factoryFunction.call(this,"fontSizeFactoryParams")},sna.presentation.util.fontFactoryFunction=function(){return sna.presentation.util.factoryFunction.call(this,"fontFactoryParams")},sna.presentation.util.toUpperCaseFactoryFunction=function(){return sna.presentation.util.factoryFunction.call(this,"toUpperCaseFactoryParams")},sna.presentation.util.maxWidthFactoryFunction=function(){return sna.presentation.util.factoryFunction.call(this,"maxWidthFactoryParams")},sna.presentation.util.wordWrapWidthFactoryFunction=function(){return sna.presentation.util.factoryFunction.call(this,"wordWrapWidthFactoryParams")},sna.presentation.util.maxHeightFactoryFunction=function(){return sna.presentation.util.factoryFunction.call(this,"maxHeightFactoryParams")},sna.presentation.util.configWidthFactoryFunction=function(){return sna.presentation.util.factoryFunction.call(this,"configWidthFactoryParams")},sna.presentation.util.configHeightFactoryFunction=function(){return sna.presentation.util.factoryFunction.call(this,"configHeightFactoryParams")},sna.presentation.util.anchorAlignFactoryFunction=function(){return sna.presentation.util.factoryFunction.call(this,"anchorAlignFactoryParams")},sna.presentation.util.factoryFunction=function(e){var t=this.presentation,i=this.scope.config[e],e=i.default,r=t.scope.layout,o=void 0;return angular.forEach(i,function(e,t){if(-1===["default","dynamic"].indexOf(t)){for(var i=t.split(","),n=!0,s=0;s<i.length;s++)if(!r.has(i[s])){n=!1;break}n&&(o=e)}},this),o=void 0!==o?t.parseValue(this,o):t.parseValue(this,e)},sna.presentation.util.setupScale=function(e,t){var i;t.scope&&t.scope.config&&(void 0!==(i=t.scope.config.scale)&&(i="object"==typeof i&&i.dynamic?(t.scope.config.scaleFactoryParams=i,t.scope.config.scaleFactory=sna.presentation.util.scaleFactoryFunction,t.scope.config.scale=t.scope.config.scaleFactory.call(t),t.scope.config.scale):e.parseValue(t,i),t.scale.set(i,i)))},sna.presentation.util.setupSkew=function(e,t){var i;t.scope&&t.scope.config&&(void 0!==(i=t.scope.config.skewX)&&(i=e.parseValue(t,i),t.skew.x=i),void 0!==(i=t.scope.config.skewY)&&(i=e.parseValue(t,i),t.skew.y=i))},sna.presentation.util.setupVisibility=function(e,t){var i;t.scope&&t.scope.config&&(t.setVisible=function(e){(e=void 0===(e="false"!==e&&e)||e)?t.show():t.hide()},void 0!==(i=t.scope.config.visible)&&(i="object"==typeof i&&i.dynamic?(t.scope.config.visibleFactoryParams=i,t.scope.config.visibleFactory=sna.presentation.util.visibleFactoryFunction,t.scope.config.visible=t.scope.config.visibleFactory.call(t),t.scope.config.visible):e.parseValue(t,i)),t.setVisible(i))},sna.presentation.util.setupAlpha=function(e,t){var i;t.scope&&t.scope.config&&(void 0!==(i=t.scope.config.alpha)&&(i="object"==typeof i&&i.dynamic?(t.scope.config.alphaFactoryParams=i,t.scope.config.alphaFactory=sna.presentation.util.alphaFactoryFunction,t.scope.config.alpha=t.scope.config.alphaFactory.call(t),t.scope.config.alpha):e.parseValue(t,i),t.alpha=i))},sna.presentation.util.setupRotation=function(e,t){var i;t.scope&&t.scope.config&&(void 0!==(i=t.scope.config.rotation)&&(i="object"==typeof i&&i.dynamic?(t.scope.config.rotationFactoryParams=i,t.scope.config.rotationFactory=sna.presentation.util.rotationFactoryFunction,t.scope.config.rotation=t.scope.config.rotationFactory.call(t),t.scope.config.rotation):e.parseValue(t,i),t.rotation=i))},sna.presentation.util.setupRadius=function(e,t){var i;t.scope&&t.scope.config&&(void 0!==(i=t.scope.config.radius)&&(i="object"==typeof i&&i.dynamic?(t.scope.config.radiusFactoryParams=i,t.scope.config.radiusFactory=sna.presentation.util.radiusFactoryFunction,t.scope.config.radius=t.scope.config.radiusFactory.call(t),t.scope.config.radius):e.parseValue(t,i),t.radius=i))},sna.presentation.util.setUpAngle=function(e,t){var i;t.scope&&t.scope.config&&(void 0!==(i=t.scope.config.angle)&&(i="object"==typeof i&&i.dynamic?(t.scope.config.angleFactoryParams=i,t.scope.config.angleFactory=sna.presentation.util.angleFactoryFunction,t.scope.config.angle=t.scope.config.angleFactory.call(t),t.scope.config.angle):e.parseValue(t,i),t.angle=i))},sna.presentation.util.setupPivot=function(e,t){var i;t.scope&&t.scope.config&&(void 0!==(i=t.scope.config.pivot)&&(i=e.parseValue(t,i),t.pivot=i))},sna.presentation.util.setupAnchor=function(e,i){var t;i.scope&&i.scope.config&&(i.setAnchor=function(e){var t=sna.presentation;if(void 0!==e.x&&void 0!==e.y)i.anchor.set(e.x,e.y);else switch(e){case t.ALIGN_CENTER:i.anchor.set(.5,.5);break;case t.ALIGN_TOP:i.anchor.set(.5,0);break;case t.ALIGN_BOTTOM:i.anchor.set(.5,1);break;case t.ALIGN_LEFT:i.anchor.set(0,.5);break;case t.ALIGN_RIGHT:i.anchor.set(1,.5);break;case t.ALIGN_TOP_LEFT:i.anchor.set(0,0);break;case t.ALIGN_BOTTOM_LEFT:i.anchor.set(0,1);break;case t.ALIGN_TOP_RIGHT:i.anchor.set(1,0);break;case t.ALIGN_BOTTOM_RIGHT:i.anchor.set(1,1)}},t="object"==typeof(t=i.scope.config.anchorAlign||sna.presentation.ALIGN_CENTER)&&t.dynamic?(i.scope.config.anchorAlignFactoryParams=t,i.scope.config.anchorAlignFactory=sna.presentation.util.anchorAlignFactoryFunction,i.scope.config.anchorAlign=i.scope.config.anchorAlignFactory.call(i),i.scope.config.anchorAlign):e.parseValue(i,t),i.setAnchor(t))},sna.presentation.util.setupWidth=function(e,t){var i;t.scope&&t.scope.config&&(void 0!==(i=t.scope.config.width)&&(scale=e.parseValue(t,i),t.width=i))},sna.presentation.util.setupHeight=function(e,t){var i;t.scope&&t.scope.config&&(void 0!==(i=t.scope.config.height)&&(i=e.parseValue(t,i),t.height=i))},sna.presentation.util.setupMaxWidth=function(i,n){var e,t;n.scope&&n.scope.config&&(n.setMaxWidth=function(e){var t=n.scope.config.fixRotation?-1:1;e=e*i.globalScale*t,n.maxWidth=e,n.updateDimensions()},e=n.scope.config.maxWidth,t=n.scope.config.wordWrap,void 0===e||t||("object"==typeof e&&e.dynamic&&(n.scope.config.maxWidthFactoryParams=e,n.scope.config.maxWidthFactory=sna.presentation.util.maxWidthFactoryFunction,n.scope.config.maxWidth=n.scope.config.maxWidthFactory.call(n),e=n.scope.config.maxWidth),n.setMaxWidth(e)))},sna.presentation.util.setupMaxHeight=function(t,i){var e;i.scope&&i.scope.config&&(i.setMaxHeight=function(e){e*=t.globalScale,i.maxHeight=e,i.updateDimensions()},e=i.scope.config.maxHeight,i.scope.config.wordWrap,void 0!==e&&("object"==typeof e&&e.dynamic&&(i.scope.config.maxHeightFactoryParams=e,i.scope.config.maxHeightFactory=sna.presentation.util.maxHeightFactoryFunction,i.scope.config.maxHeight=i.scope.config.maxHeightFactory.call(i),e=i.scope.config.maxHeight),i.setMaxHeight(e)))},sna.presentation.util.updateDimensions=function(){this.maxWidth&&(this.width=void 0,this.scale.set(this.scope.config.scale||1,this.scope.config.scale||1),this.width>=this.maxWidth&&(this.width=this.maxWidth,this.scale.y=this.scale.x)),this.maxHeight&&(this.width=void 0,this.scale.set(this.scope.config.setscale||1,this.scope.config.setscale||1),this.height>this.maxHeight&&(this.width*=this.maxHeight/this.height,this.style&&this.style.wordWrap&&this.style.wordWrapWidth&&(this.style.wordWrapWidth*=this.maxHeight/this.height),this.height=this.maxHeight))},sna.presentation.util.setupTintColor=function(e,t){var i;t.scope&&t.scope.config&&(t.setTint=function(e){t.tint=e},void 0!==(i=t.scope.config.tint)&&(i=e.parseValue(t,i),t.setTint(i)))},sna.presentation.util.setupDisabled=function(e,t){var i;t.scope&&t.scope.config&&(void 0!==(i=t.scope.config.disabled)&&((i=e.parseValue(t,i))?t.disable():t.enable()))},sna.presentation.util.setupBlendMode=function(e,t){var i;t.scope&&t.scope.config&&(void 0!==(i=t.scope.config.blend)&&(i=e.parseValue(t,i),t.blendMode=PIXI.BLEND_MODES[i]))},sna.presentation.util.describe=function(e){if(e){var t="{ ";return e.scope&&e.scope.config.type&&(t+="type: "+e.scope.config.type+"; "),e.scope&&e.scope.config.id&&(t+="id: "+e.scope.config.id+"; "),t+="x: "+e.x+"; ",t+="y: "+e.y+"; ",t+="vis: "+e.visible+"; ",e.scope&&e.scope.config.texture?t+="tex: "+e.scope.config.texture+"; ":e.scope&&e.scope.config.image?t+="tex: "+e.scope.config.image+"; ":e.scope&&e.scope.config.textures&&(t+="tex: "+e.scope.config.textures[0]+"; "),e.text&&(t+="text: "+e.text),t+="}"}},sna.presentation.util.show=function(){this.visible=!0},sna.presentation.util.hide=function(){this.visible=!1},sna.presentation.util.setRotation=function(e){this.rotation=e},sna.presentation.util.setX=function(e,t){t&&(e*=this.presentation.globalScale),this.x=e,this.scope.config.x=e},sna.presentation.util.setDynamicX=function(e,t,i,n){var s=t.scope.config;t.x=e,t.allowOverrides&&"object"==typeof s.xFactoryParams&&s.xFactoryParams.dynamic&&(t.scope.config.x=e,null!=n?t.scope.config.xFactoryParams[n]=e*(1/i.globalScale):t.scope.config.xFactoryParams.default=e*(1/i.globalScale))},sna.presentation.util.setDynamicY=function(e,t,i,n){var s=t.scope.config;t.y=e,t.allowOverrides&&"object"==typeof s.yFactoryParams&&s.yFactoryParams.dynamic&&(t.scope.config.y=e,null!=n?t.scope.config.yFactoryParams[n]=e*(1/i.globalScale):t.scope.config.yFactoryParams.default=e*(1/i.globalScale))},sna.presentation.util.getX=function(e){return this.x},sna.presentation.util.setY=function(e,t){t&&(e*=this.presentation.globalScale),this.y=e,this.scope.config.y=e},sna.presentation.util.getY=function(e){return this.y},sna.presentation.util.setupFlipX=function(e,t){var i;t.scope&&t.scope.config&&(void 0!==(i=t.scope.config.flipX)&&(i=e.parseValue(t,i))&&(t.scale.y=-t.scale.y||-1))},sna.presentation.util.setupFlipY=function(e,t){var i;t.scope&&t.scope.config&&(void 0!==(i=t.scope.config.flipY)&&(i=e.parseValue(t,i))&&(t.scale.x=-t.scale.x||-1))},sna.presentation.util.setupToUpperCase=function(e,t){var i;t.scope&&t.scope.config&&(void 0!==(i=t.scope.config.toUpperCase)&&"object"==typeof i&&i.dynamic&&(t.scope.config.toUpperCaseFactoryParams=i,t.scope.config.toUpperCaseFactory=sna.presentation.util.toUpperCaseFactoryFunction,t.scope.config.toUpperCase=t.scope.config.toUpperCaseFactory.call(t)))},sna.presentation.util.setupFontSize=function(e,t){var i;t.scope&&t.scope.config&&(void 0!==(i=t.scope.config.size)&&"object"==typeof i&&i.dynamic&&(t.scope.config.fontSizeFactoryParams=i,t.scope.config.fontSizeFactory=sna.presentation.util.fontSizeFactoryFunction,t.scope.config.size=t.scope.config.fontSizeFactory.call(t)))},sna.presentation.util.setupFontConfig=function(e,t){var i;t.scope&&t.scope.config&&(void 0!==(i=t.scope.config.font)&&"object"==typeof i&&i.dynamic&&(t.scope.config.fontFactoryParams=i,t.scope.config.fontFactory=sna.presentation.util.fontFactoryFunction,t.scope.config.font=t.scope.config.fontFactory.call(t)))},sna.presentation.util.setUpWordWrapWidth=function(e,t){var i;t.scope&&t.scope.config&&(void 0!==(i=t.scope.config.wordWrapWidth)&&"object"==typeof i&&i.dynamic&&(t.scope.config.wordWrapWidthFactoryParams=i,t.scope.config.wordWrapWidthFactory=sna.presentation.util.wordWrapWidthFactoryFunction,t.scope.config.wordWrapWidth=t.scope.config.wordWrapWidthFactory.call(t)))},sna.presentation.util.setupConfigHeight=function(e,t){var i;t.scope&&t.scope.config&&(void 0!==(i=t.scope.config.height)&&"object"==typeof i&&i.dynamic&&(t.scope.config.configHeightFactoryParams=i,t.scope.config.configHeightFactory=sna.presentation.util.configHeightFactoryFunction,t.scope.config.height=t.scope.config.configHeightFactory.call(t)))},sna.presentation.util.setupConfigWidth=function(e,t){var i;t.scope&&t.scope.config&&(void 0!==(i=t.scope.config.width)&&"object"==typeof i&&i.dynamic&&(t.scope.config.configWidthFactoryParams=i,t.scope.config.configWidthFactory=sna.presentation.util.configWidthFactoryFunction,t.scope.config.width=t.scope.config.configWidthFactory.call(t)))},sna.presentation.util.setDynamicVisibility=function(e,t,i,n){var s=t.scope.config;t.visible=e,t.allowOverrides&&"object"==typeof s.visibleFactoryParams&&s.visibleFactoryParams.dynamic&&(t.scope.config.visible=e,null!=n?t.scope.config.visibleFactoryParams[n]=e:t.scope.config.visibleFactoryParams.default=e)},sna.presentation.util.setupDraggable=function(e,t){var i;t.scope&&t.scope.config&&(void 0!==(i=t.scope.config.draggable)&&(i=e.parseValue(t,i),t.scope.config.onDragMove,t.draggable=i,t.interactive=!0,t.on("mousedown",sna.presentation.util.onDragStart),t.on("touchstart",sna.presentation.util.onDragStart),t.on("mouseup",sna.presentation.util.onDragEnd),t.on("mouseupoutside",sna.presentation.util.onDragEnd),t.on("touchend",sna.presentation.util.onDragEnd),t.on("touchendoutside",sna.presentation.util.onDragEnd),t.on("mousemove",sna.presentation.util.onDragMove),t.on("touchmove",sna.presentation.util.onDragMove)))},sna.presentation.util.onDragStart=function(e){this.draggable&&(this.dragTimeout&&(window.clearTimeout(this.dragTimeout),this.dragTimeout=null,this.dragging=!1),this.dragTimeout=window.setTimeout(function(){this.dragging=!0}.bind(this),100),this.data=e.data,this.posX=e.data.getLocalPosition(this.parent).x,this.posY=e.data.getLocalPosition(this.parent).y)},sna.presentation.util.onDragEnd=function(e){this.draggable&&(this.dragTimeout&&(window.clearTimeout(this.dragTimeout),this.dragTimeout=null),this.dragging=!1,this.data=null,this.cIterated=null)},sna.presentation.util.addToSpineSlot=function(e,t,i,n){var s=t.spine.spineData.findSlotIndex(i),r=t.spine.slotContainers[s],n=null==n||n;if(!r)throw new Error("Can't find slot with name"+i+".");n&&(t.spine.spineData.skins.forEach(function(e,t){var i;e.attachments[s]&&(i=Object.keys(e.attachments[s]),e.attachments[s][i[0]]&&(e.attachments[s][i[0]].scaleX=0,e.attachments[s][i[0]].scaleY=0))}),r.removeChildren()),r.scale.y=e.scale.y,r.scale.x=e.scale.x,e.scope.config.invertScaleY?Object.defineProperty(e.scale,"_y",{get:function(){return this.__y},set:function(e){this.__y=-1*e}}):e.scale.y=-1*r.scale.y,r.addChild(e)},sna.presentation.util.onDragMove=function(e){var t,i,n;this.dragging&&this.draggable&&(i=(t=e.data.getLocalPosition(this.parent)).x-this.posX,n=t.y-this.posY,this.posX=t.x,this.posY=t.y,this.setX(this.x+i),this.setY(this.y+n),this.cIterated||(angular.forEach(this.children,function(e){e.supressEventPropagation=!0},this),this.cIterated=!0),void 0!==this.onDragMove&&this.onDragMove(this,e))},sna.presentation.util.logMovement=function(e,t){console.log("x: "+t.x/e.globalScale),console.log("y: "+t.y/e.globalScale),console.log("Aspect Ratio:"+e.main.iface.getAspectRatio())},sna.presentation.XL_LAYOUT="XL",sna.presentation.L_LAYOUT="L",sna.presentation.M_LAYOUT="M",sna.presentation.S_LAYOUT="S",sna.presentation.INITIAL_RESOLUTION=0,sna.presentation.Layout=function(e,t,i,n,s,r,o,a,l){var h;this.queryParams=this.getQueryParams(),this.width=0,this.height=0,this.aspectRatio=0,this.environmentTags=t||[],this.layoutTags=[],this.newTags=[],this.oldTags=[],this.assetSizes=i,this.width=window.innerWidth,this.height=window.innerHeight,this.screenWidth=screen.width,this.screenHeight=screen.height,-1===navigator.userAgent.indexOf("TipicoCasino")&&-1===navigator.userAgent.indexOf("TipicoSport")||this.has(sna.service.ENVIRONMENT_IOS)||(void 0===window.tipicoInitialWidth&&(window.tipicoInitialWidth=window.innerWidth,window.tipicoInitialHeight=window.innerHeight,window.tipicoInitialOrientation=0,window.innerWidth>window.innerHeight&&(window.tipicoInitialOrientation=90)),window.tipicoInitialWidth!=window.innerWidth||window.tipicoInitialHight!=window.innerHeight?(window.innerWidth>window.innerHeight&&(h=90),window.tipicoInitialOrientation?window.tipicoInitialOrientation==h?(this.width=window.outerWidth,this.height=window.outerHeight):(this.width=2*window.outerWidth,this.height=2*window.outerHeight):window.tipicoInitialHeight!=window.innerHeight?(this.width=window.outerWidth/2,this.height=window.outerHeight/2):(this.width=window.outerWidth,this.height=window.outerHeight)):(this.width=window.outerWidth,this.height=window.outerHeight),this.screenWidth=this.width,this.screenHeight=this.height),this.aspectRatio=this.width/this.height,window.innerHeight==screen.height?this.layoutTags.push(sna.service.ENVIRONMENT_FULLSCREEN):this.layoutTags.push(sna.service.ENVIRONMENT_WINDOWED),this.shouldUsePortrait=r?!this.has(sna.service.ENVIRONMENT_DESKTOP):this.has(sna.service.ENVIRONMENT_MOBILE)&&!this.has(sna.service.ENVIRONMENT_TABLET),o&&(this.shouldUsePortrait=!0),l&&(this.shouldUsePortrait=!1),this.aspectRatio<sna.service.ASPECT_RATIO_SQUARE&&this.shouldUsePortrait&&(this.layoutTags.push(sna.service.ENVIRONMENT_PORTRAIT),this.has(sna.service.ENVIRONMENT_IPHONE_X)&&this.layoutTags.push(sna.service.ENVIRONMENT_IPHONE_X_PORTRIAT)),(this.aspectRatio>sna.service.ASPECT_RATIO_SQUARE||!this.shouldUsePortrait)&&this.layoutTags.push(sna.service.ENVIRONMENT_LANDSCAPE),this.extraSpaceHorizontal=0,this.extraSpaceVertical=0,this.pixelRatio=sna.presentation.INITIAL_RESOLUTION,sna.presentation.INITIAL_RESOLUTION||(this.pixelRatio=window.devicePixelRatio||1,this.has(sna.service.ENVIRONMENT_DESKTOP)&&(this.pixelRatio=window.devicePixelRatio||1),this.has(sna.service.ENVIRONMENT_MOBILE)&&(2<=window.devicePixelRatio&&(this.pixelRatio=2),this.has(sna.service.ENVIRONMENT_IOS)&&(1130<this.height||1130<this.width)&&(this.pixelRatio=1)),this.has(sna.service.ENVIRONMENT_TABLET)&&(this.pixelRatio=1.5),sna.presentation.INITIAL_RESOLUTION=this.pixelRatio),this.resolution=this.pixelRatio,this.selectedSize=this.getSize()||{},n&&(this.selectedSize.customAspectRatio&&this.shouldUsePortrait&&(n=this.has(sna.service.ENVIRONMENT_PORTRAIT)?1/this.aspectRatio:this.aspectRatio),this.setPreferredAspectRatio(n)),this.canvasScale=this.viewWidth*this.resolution/this.width,this.selectedSize.width&&this.selectedSize.height&&!this.shouldUsePortrait?(this.has(sna.service.ENVIRONMENT_PORTRAIT)?(this.viewHeight=this.selectedSize.width/this.resolution,this.viewWidth=this.selectedSize.height/this.resolution):(this.viewWidth=this.selectedSize.width/this.resolution,this.viewHeight=this.selectedSize.height/this.resolution),this.canvasScale=this.viewWidth*this.resolution/this.width):(this.viewWidth=this.width,this.viewHeight=this.height,this.canvasScale=1),this.has(sna.service.ENVIRONMENT_LANDSCAPE)&&(!this.selectedSize.scaleUp&&this.width>this.viewWidth*this.resolution&&(this.extraSpaceHorizontal+=Math.floor(this.width-this.viewWidth*this.resolution),this.width=this.viewWidth*this.resolution,this.canvasScale=1),!this.selectedSize.scaleUp&&this.height>this.viewHeight*this.resolution&&(this.extraSpaceVertical+=Math.floor(this.height-this.viewHeight*this.resolution),this.height=this.viewHeight*this.resolution,this.canvasScale=1)),this.screenOffset={x:this.extraSpaceHorizontal/2,y:this.extraSpaceVertical/2,scale:this.width/this.viewWidth},this.has(sna.service.ENVIRONMENT_PORTRAIT)&&this.screenOffset.x&&this.shouldUsePortrait&&!n&&(this.width+=2*this.screenOffset.x,this.viewWidth=this.width/this.screenOffset.scale,this.screenOffset.x=0,this.canvasScale=this.viewWidth*this.resolution/this.width),!s||this.has(sna.service.ENVIRONMENT_MOBILE)&&!this.has(sna.service.DISABLE_IOS_FS)||(s="object"==typeof s?s:document.getElementById(s))&&(this.width=s.offsetWidth,this.height=s.offsetHeight,this.viewWidth=s.offsetWidth,this.viewHeight=s.offsetHeight,this.screenOffset={x:0,y:0,scale:1},this.canvasScale=1);this.width,this.height,this.viewWidth,this.viewHeight,window.innerWidth,window.innerHeight,window.outerWidth,window.outerHeight,screen.width,screen.height,window.screen.width,window.screen.height,window.screenTop,this.resolution,window.devicePixelRatio},sna.presentation.Layout.prototype.getQueryParams=function(){for(var e,t=(t=document.location.search).split("+").join(" "),i={},n=/[?&]?([^=]+)=([^&]*)/g;e=n.exec(t);)i[decodeURIComponent(e[1])]=decodeURIComponent(e[2]);return i},sna.presentation.Layout.prototype.has=function(e){return-1!=this.environmentTags.indexOf(e)||-1!=this.layoutTags.indexOf(e)},sna.presentation.Layout.prototype.remove=function(e){e=this.layoutTags.indexOf(e);-1!==e&&this.layoutTags.splice(e,1)},sna.presentation.Layout.prototype.isNew=function(e){return-1!=this.newTags.indexOf(e)},sna.presentation.Layout.prototype.isOld=function(e){return-1!=this.oldTags.indexOf(e)},sna.presentation.Layout.prototype.setPreferredAspectRatio=function(e){var t,i;(e=this.has(sna.service.ENVIRONMENT_PORTRAIT)&&this.shouldUsePortrait?1/e:e)&&((t=this.width)<(i=this.height)*e?(this.width=t,this.height=t/e):(this.height=i,this.width=i*e),this.extraSpaceHorizontal=t-this.width,this.extraSpaceVertical=i-this.height)},sna.presentation.Layout.prototype.getSize=function(){var r=Math.max(this.screenWidth*this.resolution,this.screenHeight*this.resolution),o={maxScreenSize:1/0,defaultOne:!0,specificity:-1};return angular.forEach(this.assetSizes,function(e){var t=(t=e.maxScreenSize<o.maxScreenSize)&&this.hasGreaterSpecificity(e,o),i=r<=(e.maxScreenSize||1/0),n=this.checkRequiredTags(e),s=this.checkForbiddenTags(e);(void 0!==this.queryParams.asOverride&&this.queryParams.asOverride.toUpperCase()==e.name.toUpperCase()||t&&i&&n&&s)&&(o=e)},this),o.defaultOne&&log("Layout","getSize",sna.log.FATAL,"Asset Size could not be selected!"),o},sna.presentation.Layout.prototype.hasGreaterSpecificity=function(e,t){return(e.specificity||0)>(t.specificity||0)},sna.presentation.Layout.prototype.checkRequiredTags=function(e){e=e.required;if(!e)return!0;e.constructor!==Array&&(e=[e]);var t=!0;return angular.forEach(e,function(e){this.has(e)||(t=!1)},this),t},sna.presentation.Layout.prototype.checkForbiddenTags=function(e){e=e.forbidden;if(!e)return!0;"Array"!==e.constructor&&(e=[e]);var t=!0;return angular.forEach(e,function(e){this.has(e)&&(t=!1)},this),t},sna.presentation.Layout.prototype.getScale=function(e){return this.selectedSize.scale||1},sna.presentation.Layout.prototype.checkPresentationRequirements=function(e){if(e){var t=!0;if(e.excludeTag&&e.excludeTag.length){for(var i=e.excludeTag.split(","),n=0;n<i.length;n++)if(this.has(i[n]))return!1}else if(e.requireTag&&e.requireTag.length){for(i=e.requireTag.split(","),n=0;n<i.length;n++)if(!this.has(i[n]))return!1}else if(e.anyTag&&e.anyTag.length)for(t=!1,i=e.anyTag.split(","),n=0;n<i.length;n++)if(this.has(i[n]))return!0;return t}return!0},sna.presentation.Layout.prototype.describe=function(){var e="";return e+="width:",e+=this.width,e+=", height:",e+=this.height,e+=", aspect:",e+=this.aspectRatio,e+=", config:",e+=", layoutTags:"+this.layoutTags,e+=", envTags:"+this.environmentTags+", ",e+=this.selected?this.selected.name:"NONE"},sna.presentation.ANIMATION="Animation",sna.presentation.TIMED_ANIMATION="Timed",sna.presentation.FRAME_ANIMATION="Frames",sna.presentation.GROUP_ANIMATION="Group",sna.presentation.TWEEN_ANIMATION="Tween",sna.presentation.SEQUENCE_ANIMATION="Sequence",sna.presentation.LOOP_ANIMATION="Loop",sna.presentation.KEYFRAME_ANIMATION="Keyframe",sna.presentation.SPINE_ANIMATION="Spine",sna.presentation.SCALE_PROPERTY="setscale",sna.presentation.X_PROPERTY="x",sna.presentation.Y_PROPERTY="y",sna.presentation.SETX_PROPERTY="setX",sna.presentation.SETY_PROPERTY="setY",sna.presentation.TYPEWRITER_PROPERTY="setTypewriterLength",sna.presentation.LOCAL_CHILDREN_ANIMATION="local",sna.presentation.CONTROLLER_CHILDREN_ANIMATION="children",sna.presentation.CALL_METHOD_ANIMATION="call",sna.presentation.EVAL_ANIMATION="eval",sna.presentation.DELAY_ANIMATION="delay",sna.presentation.END_LOOP_ANIMATION="endLoop",sna.presentation.STOP_ANIMATION="stop",sna.presentation.PLAY_ANIMATION="play",sna.presentation.PLAY_ANIMATION_TIMELINE="playTimeline",sna.presentation.PLAY_ONCE_ANIMATION="playOnce",sna.presentation.PAUSE_ANIMATION="pause",sna.presentation.RESET_ANIMATION="reset",sna.presentation.OTHER_ANIMATION="other",sna.presentation.GLOBAL_ANIMATION="global",sna.presentation.SOUND_ANIMATION="sound",sna.presentation.ALERT_ANIMATION="alert",sna.presentation.VIBRATE_ANIMATION="vibrate",sna.presentation.CONSOLE_ANIMATION="console",sna.presentation.CONFIG_SEPARATOR=":",sna.presentation.Animation=function(e,t,i,n){this.name=sna.presentation.ANIMATION,this.scope=e,this.presentation=t,this.sound=n,this.timeline=i,this.children=[],this.loopFlags={},this.loopAnims={},this.lastTimeline=null},sna.presentation.Animation.prototype.addChild=function(e,t){void 0!==t?this.children.splice(t,0,e):this.children.push(e)},sna.presentation.Animation.prototype.removeChild=function(e){e=this.children.indexOf(e);-1!=e&&this.children.splice(e,1)},sna.presentation.Animation.prototype.removeChildren=function(){this.children.length=0},sna.presentation.Animation.prototype.adjustValue=function(e,t,i){return t==sna.presentation.SCALE_PROPERTY?"LayoutContainer"===e.scope.config.type?i*e.getscale():e.scope.config.scaleAnimationAbsolute?i:i*(e.scope.config.scale||1):t==sna.presentation.X_PROPERTY||t==sna.presentation.Y_PROPERTY||t==sna.presentation.SETX_PROPERTY||t==sna.presentation.SETY_PROPERTY?this.adjustCoordinateValue(e,t,i):t==sna.presentation.TYPEWRITER_PROPERTY?this.scope.parent.originalText.length:i},sna.presentation.Animation.prototype.adjustCoordinateValue=function(e,t,i){var n=this.presentation.globalScale;return"string"==typeof i?(0==i.indexOf("-=")?(i=i.substring(2),i=parseFloat(i),i="-="+(i*=n)):0==i.indexOf("+=")&&(i=i.substring(2),i=parseFloat(i),i="+="+(i*=n)),i):i*n},sna.presentation.Animation.prototype.getEasing=function(e){var t=e&&e[0]?window[e[0]]:Linear,t=e&&e[1]?t[e[1]]:t.easeInOut;return t=e&&e[2]?t.config.apply(t,e[2]):t},sna.presentation.Animation.prototype.animate=function(e){e={global:e.global,animation:this,config:this.scope.config,parent:e,name:e.name,params:e.params},e=this.createAnimation(e);return this.lastTimeline=e},sna.presentation.Animation.prototype.checkCondition=function(e){if("value"==e.type)return this.presentation.parseValue(this,e.value);if("AND"==e.type){var t=!0;return angular.forEach(e.values,function(e){t=e.type?t&&this.checkCondition(e):t&&this.presentation.parseValue(this,e)},this),t}if("OR"!=e.type)return"NOT"==e.type?e.value.type?!this.checkCondition(e.value):!this.presentation.parseValue(this,e.value):void 0;t=!1;return angular.forEach(e.values,function(e){t=e.type?t||this.checkCondition(e):t||this.presentation.parseValue(this,e)},this),t},sna.presentation.Animation.prototype.createChildAnimations=function(i){var n=[];return angular.forEach(i.config.children,function(e,t){e.variant&&!e.name&&(e.name=i.config.name),e.variant&&!e.type&&(e.type=i.config.type);t={global:i.global,animation:this,config:e,parent:i,name:i.name,index:t,params:i.params},t=this.createAnimation(t);!0!==t.conditionNotSatisfied&&(t.constructor==Array?n=n.concat(t):n.push(t))},this),n},sna.presentation.Animation.prototype.createAnimation=function(i){var e,n=i.config,t=n.condition;if(t&&(e=this.checkCondition(t)),t&&!e)return(c=new this.timeline).conditionNotSatisfied=!0,c;if(this.lastTimeline&&i.config.stopPrevious&&(this.lastTimeline.stop(),this.lastTimeline.kill(),delete this.lastTimeline),"string"==typeof n){var s=n.split(sna.presentation.CONFIG_SEPARATOR);switch(s.shift()){case sna.presentation.LOCAL_CHILDREN_ANIMATION:var r=[];return angular.forEach(this.children,function(e){var t;e.animation&&(t=s[0]||i.parent.config.name,(t=e.animation(t))&&r.push(t.animate(i.parent)))},this),r;case sna.presentation.CONTROLLER_CHILDREN_ANIMATION:var o=[],r=[];angular.forEach(this.scope.parent.children,function(e){var t;"cascade"==s[1]?this.presentation.searchAnimations(o,e,s[0]):e.animation&&(t=s[0]||i.parent.config.name,(t=e.animation(t))&&r.push(t.animate(i.parent)))},this);for(var a=0;a<o.length;a++)r.push(o[a].animate(i.parent));return r;case sna.presentation.CALL_METHOD_ANIMATION:return(c=new this.timeline).call(this.invokeMethod,s,this),c;case sna.presentation.EVAL_ANIMATION:return(c=new this.timeline).call(this.evaluate,s,this),c;case sna.presentation.OTHER_ANIMATION:if("separate"==s[1])return(c=new this.timeline).call(function(){this.presentation.createAnimationTimeline(s[0],0,!1,!0,this.scope.parent)}.bind(this)),c;var l=this.scope.parent.animation(s[0]),h={global:i.global,animation:this,config:i.config,parent:i,name:s[0]};return l.animate(h);case sna.presentation.GLOBAL_ANIMATION:return this.presentation.createAnimationTimeline(s[0],0,!1,!0).animation;case sna.presentation.DELAY_ANIMATION:return s[1]?(p=this.presentation.parseValue(this,s[1]),u=this.presentation.parseValue(this,s[0]),u/=p):u=this.presentation.parseValue(this,s[0]),u=u&&Number(u),(c=new this.timeline).delay(u),sna.debug.logConfigDelays&&console.log("Animation name: "+i.name+"\ndelay: "+u+"\nconfig: "+i.config),c;case sna.presentation.PLAY_ANIMATION:var c=new this.timeline;return i.parent.config.variant==sna.presentation.SPINE_ANIMATION?c.call(this.playSpineAnimation,[i.config],this):c.call(this.playMovieClip,s,this),c;case sna.presentation.PLAY_ANIMATION_TIMELINE:var c=new this.timeline;return i.parent.config.variant==sna.presentation.SPINE_ANIMATION&&c.add(this.playSpineAnimationTimeline(i.config)),c;case sna.presentation.PLAY_ONCE_ANIMATION:var c=new this.timeline,p=+s[0],h=s[1]||0,u=this.scope.parent;return u.animationSpeed=(p||25)/60,u.loop=!1,c.call(u.gotoAndPlay,[0],u),c.call(u.gotoAndStop,[h],u,"+="+u.totalFrames/p),c;case sna.presentation.PAUSE_ANIMATION:var c=new this.timeline;return i.parent.config.variant==sna.presentation.SPINE_ANIMATION?c.call(this.stopSpineAnimation,[i.config],this):c.call(this.stopMovieClip,s,this),c;case sna.presentation.RESET_ANIMATION:var c=new this.timeline;return i.parent.config.variant==sna.presentation.SPINE_ANIMATION&&c.call(this.resetSpineAnimation,[i.config],this),c;case sna.presentation.END_LOOP_ANIMATION:return(c=new this.timeline).call(this.endLoop,s,this),c;case sna.presentation.STOP_ANIMATION:return(c=new this.timeline).call(this.stop,s,this),c;case sna.presentation.ALERT_ANIMATION:return(c=new this.timeline).call(function(e){window.alert(this.presentation.parseValue(this,e))},s,this),c;case sna.presentation.VIBRATE_ANIMATION:return(c=new this.timeline).call(function(e){this.presentation.main.iface.mobileVibrate(this.presentation.parseValue(this,e))},s,this),c;case sna.presentation.CONSOLE_ANIMATION:return(c=new this.timeline).call(function(e){console.log(this.presentation.parseValue(this,e))},s,this),c;case sna.presentation.SOUND_ANIMATION:c=new this.timeline;return angular.forEach(s,function(e,t){s[t]=this.presentation.parseValue(this,e)},this),c.call(this.sound.processSoundAnimation,s,this.sound),c;default:return log(this.name,"createAnimation",sna.log.FATAL,"Animation could not be created for config: ",n),null}}else switch(n.variant||sna.presentation.SEQUENCE_ANIMATION){case sna.presentation.GROUP_ANIMATION:c=new this.timeline,r=this.createChildAnimations(i);return c.add(r,0,!1,n.stagger||0),void 0!==n.repeat&&(y=this.presentation.parseValue(this,n.repeat),c.repeat(y-1)),c;case sna.presentation.SEQUENCE_ANIMATION:c=new this.timeline,r=this.createChildAnimations(i);return angular.forEach(r,function(e){var t=n.position||"+=0";c.add(e,t)},this),void 0!==n.repeat&&(y=this.presentation.parseValue(this,n.repeat),c.repeat(y-1)),c;case sna.presentation.TWEEN_ANIMATION:var c=new this.timeline,d=angular.copy(n),m=this.scope.parent;d.target&&(m=this.presentation.parseValue(this,d.target),delete d.target),delete d.name;var f=this.presentation.parseValue(this,d.ease),g=this.getEasing(f),f=this.presentation.parseValue(this,d.duration);return delete d.ease,delete d.duration,delete d.variant,angular.forEach(d,function(e,t){e=this.presentation.parseValue(this,e),e=this.adjustValue(m,t,e);d[t]=e},this),d.ease=g,c.to(m,f,d),c;case sna.presentation.KEYFRAME_ANIMATION:c=new this.timeline,d={},m=this.scope.parent;n.target&&(m=this.presentation.parseValue(this,n.target)),d.ease=this.getEasing(n.ease);var v=0;return angular.forEach(n.keys,function(e,t){e=this.presentation.parseValue(this,e),e=this.adjustValue(m,n.property,e),t=Number(t)*(1/n.framerate||1);n.discrete?c.call(m[n.property],[e],m,t):(d[n.property]=e,c.to(m,t-v,angular.copy(d)),v=t),n.repeat&&c.repeat(n.repeat-1)},this),n.repeat&&(y=this.presentation.parseValue(this,n.repeat),c.repeat(y-1)),c;case sna.presentation.LOOP_ANIMATION:c=new this.timeline;this.loopFlags[n.label]=!0,this.loopAnims[n.label]&&(this.loopAnims[n.label].stop(),this.loopAnims[n.label].kill()),this.loopAnims[n.label]=c;r=this.createChildAnimations(i);return angular.forEach(r,function(e){c.add(e)},this),0!==c.duration()&&c.call(this.nextLoop,[i],this),c;case sna.presentation.SPINE_ANIMATION:var y,c=new this.timeline,r=this.createChildAnimations(i);return angular.forEach(r,function(e){c.add(e)},this),void 0!==n.repeat&&(y=this.presentation.parseValue(this,n.repeat),c.repeat(y-1)),c;default:return log(this.name,"createAnimation",sna.log.FATAL,"Animation could not be created for config: ",n),null}},sna.presentation.Animation.prototype.invokeMethod=function(){var e=this.scope.parent[arguments[0]],i=Array.prototype.slice.call(arguments);angular.forEach(i,function(e,t){i[t]=this.presentation.parseValue(this,e)},this),i.shift(),e.apply(this.scope.parent,i)},sna.presentation.Animation.prototype.evaluate=function(){var e=Array.prototype.slice.call(arguments);angular.forEach(e,function(e,t){this.presentation.parseValue(this,e)},this)},sna.presentation.Animation.prototype.playMovieClip=function(e,t){var i=this.scope.parent;i.animationSpeed=(e||60)/60,i.gotoAndPlay(Number(t)||0)},sna.presentation.Animation.prototype.stopMovieClip=function(e){this.scope.parent.gotoAndStop(e)},sna.presentation.Animation.prototype.endLoop=function(e,t){this.scope.parent.animation(e).loopFlags[t]=!1},sna.presentation.Animation.prototype.nextLoop=function(e){this.loopFlags[e.config.label]&&this.createAnimation(e).gotoAndPlay(0)},sna.presentation.Animation.prototype.stop=function(e,t){var i=this;e&&(i=this.scope.parent.animation(e)),t?(e=i.loopAnims[t])&&(e.stop(),e.kill(),delete i.loopAnims[t]):i&&i.lastTimeline&&(i.lastTimeline.stop(),i.lastTimeline.kill(),delete i.lastTimeline)},sna.presentation.Animation.prototype.playSpineAnimationTimeline=function(e){var t=new this.timeline,i=e.split(sna.presentation.CONFIG_SEPARATOR);return t.call(this.playSpineAnimation,[e],this),t.set({},{},this.scope.parent.getAnimationDuration(i[1],i[3]||1)),t},sna.presentation.Animation.prototype.playSpineAnimation=function(e){this.scope.parent.spine;var t,i,n,s=this.scope.parent.spine.state,r=this.scope.parent.spine.skeleton;null!=r&&(t=(n=e.split(sna.presentation.CONFIG_SEPARATOR))[1],void 0===(t=this.presentation.parseValue(this,t))&&log(this.name,"playSpineAnimation",sna.log.FATAL,"Spine inline config does not have animatioName: ",e),i="true"==n[2],e=void 0!==n[3]?n[3]:1,n=void 0!==n[4]?parseInt(n[4]):0,r.setToSetupPose(),s.clearTrack(n),s.timeScale=e,s.setEmptyAnimation(0),this.scope.parent.scope.config.changeSlot&&this.scope.parent.changeSlotTextures(this.scope.parent.scope.config.changeSlotTextures),s.setAnimation(n,t,i,0),this.scope.parent.lastAnimation=t)},sna.presentation.Animation.prototype.stopSpineAnimation=function(e){var t=e.split(sna.presentation.CONFIG_SEPARATOR),i=this.scope.parent.spine,e=this.scope.parent.spine.state;null!=e&&(t[1]?(i.autoUpdate=!1,i.update(t[1]),e.timeScale=0,i.autoUpdate=!0):e.timeScale=0)},sna.presentation.Animation.prototype.resetSpineAnimation=function(e){e=e.split(":")[1];e&&this.scope.parent.lastAnimation==e?this.scope.parent.gotoAnimationAndStop(e,0):this.scope.parent.setInitialAnimation()},sna.presentation.AnimationFactory=function(e,t,i,n){return new sna.presentation.Animation(e,t,i,n)},sna.module.core.controller(sna.presentation.ANIMATION,[sna.service.SCOPE,sna.service.PRESENTATION,sna.service.TIMELINE,sna.service.SOUND,sna.presentation.AnimationFactory]),sna.presentation.CONTAINER="Container",sna.presentation.Container=function(e,t){var i,n;PIXI.Container.call(this),this.name=sna.presentation.CONTAINER,this.scope=e,this.presentation=t,this.updateLayout(),this.placeholderChildren=[],this.animations={},sna.presentation.util.setupLangConf(t,this),sna.presentation.util.setupScale(t,this),sna.presentation.util.setupVisibility(t,this),sna.presentation.util.setupAlpha(t,this),sna.presentation.util.setupRotation(t,this),sna.presentation.util.setUpAngle(t,this),sna.presentation.util.setupPivot(t,this),sna.presentation.util.setupX(t,this),sna.presentation.util.setupY(t,this),sna.presentation.util.setupFlipY(t,this),sna.presentation.util.setupDraggable(t,this),this.scope.config&&((i=this.scope.config).name?this.name=i.name:i.id&&(this.name=i.id),i.xValue&&(i.x=this.presentation.parseValue(this,i.xValue)),e.config.yValue&&(i.y=this.presentation.parseValue(this,i.yValue)),i.scaleX&&(this.scale.x=i.scaleX),i.scaleY&&(this.scale.y=i.scaleY),i.allowOverrides&&(this.allowOverrides=i.allowOverrides),i.onDragMove&&(this.enabled=!0,n=i.onDragMove.split(":"),this.onDragMove=this.presentation.main.iface.createCallback(this,n.shift(),n)),i.customConfig&&Object.keys(i.customConfig).forEach(function(e){this[e]?log(this,"ContainerCustomConfig: ",sna.log.DEBUG,"This key already exist: "+e+" and value is: "+this[e]):this[e]=this.presentation.parseValue(this,i.customConfig[e])},this),i.initPixiLayer&&(this.pixiLayer=new PIXI.display.Layer(new PIXI.display.Group(0)),this.addChild(this.pixiLayer)),!i.parentLayerId||(n=this.presentation.getById(i.parentLayerId))&&n.pixiLayer&&(this.parentLayer=n.pixiLayer))},sna.presentation.Container.prototype=new PIXI.Container,sna.presentation.Container.prototype.addChildPixiContainer=sna.presentation.Container.prototype.addChild,sna.presentation.Container.prototype.removeChildPixiContainer=sna.presentation.Container.prototype.removeChild,sna.presentation.Container.prototype.show=sna.presentation.util.show,sna.presentation.Container.prototype.hide=sna.presentation.util.hide,sna.presentation.Container.prototype.setX=sna.presentation.util.setX,sna.presentation.Container.prototype.getX=sna.presentation.util.getX;sna.presentation.Container.prototype.setY=sna.presentation.util.setY,sna.presentation.Container.prototype.getY=sna.presentation.util.getY,sna.presentation.Container.prototype.setRotation=sna.presentation.util.setRotation,sna.presentation.Container.prototype.getscale=function(){return this.scale.x},sna.presentation.Container.prototype.setscale=function(e){this.scale.set(e,e)},sna.presentation.Container.prototype.setalpha=function(e){this.alpha=e},sna.presentation.Container.prototype.setScaleX=function(e){var t=this.scale;this.scale.set(e,t.y)},sna.presentation.Container.prototype.setScaleY=function(e){var t=this.scale;this.scale.set(t.x,e)},sna.presentation.Container.prototype.getScaleX=function(){return this.scale.x},sna.presentation.Container.prototype.getScaleY=function(){return this.scale.y},sna.presentation.Container.prototype.setDynamicVisiblity=function(e,t){sna.presentation.util.setDynamicVisibility(e="false"!==e,this,this.presentation,t)},sna.presentation.Container.prototype.addChild=function(e){var t;e.scope&&e.scope.config&&e.scope.config.placeholder?(t=e.scope.config,this.presentation.getById(t.placeholder).addChild(e),this.placeholderChildren&&this.placeholderChildren.push(e)):(e.scope&&e.scope.config&&e.scope.config.isMask&&(this.mask=e),this.addChildPixiContainer(e))},sna.presentation.Container.prototype.removeChild=function(e){this.removeChildPixiContainer(e),this.skipNextPlaceholderDetach?this.skipNextPlaceholderDetach=!1:this.detachPlaceholders(e)},sna.presentation.Container.prototype.detachPlaceholders=function(e){angular.forEach(e.placeholderChildren,function(e){this.presentation.getById(e.scope.config.placeholder).removePlacholderChild(e)},this),e.placeholderChildren=null,angular.forEach(e.children,this.detachPlaceholders,this)},sna.presentation.Container.prototype.updateLayout=function(){this.scope&&this.scope.config&&"stage"===this.scope.config.id&&log(this,"updateLayout",sna.log.DEBUG,"Stage layout updated: "+sna.presentation.util.describe(this));var e=this.scope.parent;if(e&&(this.layoutWidth=e.layoutWidth||e.width/this.presentation.scope.layout.resolution,this.layoutHeight=e.layoutHeight||e.height/this.presentation.scope.layout.resolution),e&&!e.positionElement){var t=this.scope.config.align,i=sna.presentation;switch(t){case i.ALIGN_TOP:this.x=this.layoutWidth/2,this.y=0;break;case i.ALIGN_BOTTOM:this.x=this.layoutWidth/2,this.y=this.layoutHeight;break;case i.ALIGN_LEFT:this.x=0,this.y=this.layoutHeight/2;break;case i.ALIGN_RIGHT:this.x=this.layoutWidth,this.y=this.layoutHeight/2;break;case i.ALIGN_TOP_LEFT:this.x=0,this.y=0;break;case i.ALIGN_BOTTOM_LEFT:this.x=0,this.y=this.layoutHeight;break;case i.ALIGN_TOP_RIGHT:this.x=this.layoutWidth,this.y=0;break;case i.ALIGN_BOTTOM_RIGHT:this.x=this.layoutWidth,this.y=this.layoutHeight;break;default:i.ALIGN_CENTER;this.x=this.layoutWidth/2,this.y=this.layoutHeight/2}}t=this.scope.config||{};t.xFactory&&(t.x=t.xFactory.call(this)),t.yFactory&&(t.y=t.yFactory.call(this)),t.scaleFactory&&(t.scale=t.scaleFactory.call(this),this.scale.set(t.scale,t.scale)),t.visibleFactory&&(t.visible=t.visibleFactory.call(this),t.visible?this.show():this.hide()),t.alphaFactory&&(t.alpha=t.alphaFactory.call(this),this.alpha=t.alpha),t.rotationFactory&&(t.rotation=t.rotationFactory.call(this),this.rotation=t.rotation)},sna.presentation.Container.prototype.centralizeChildren=function(){var t;(this.scope.config||{}).centralizeChildren&&(t=-this.children.reduce(function(e,t){return e+t.width},0)/2,this.children.forEach(function(e){e.setX(t+e.width/2),t+=e.width},this))},sna.presentation.Container.prototype.positionElement=function(e){this.scope&&this.scope.config&&"stage"===this.scope.config.id&&log(this,"positionElement",sna.log.DEBUG,"Stage position updated: "+sna.presentation.util.describe(this));var t=e.scope.config;e.x=t.x||0,e.y=t.y||0},sna.presentation.Container.prototype.eachChild=function(e,t){return angular.forEach(this.children,e,t||this)},sna.presentation.Container.prototype.initPresentation=function(){var e=this.scope,t=e.model,e=e.config;e&&(e=e.children,angular.forEach(e,function(e){e=this.presentation.createPresentation(e,this,t);e&&this.addChild(e)},this)),sna.presentation.util.setupVisibility(this.presentation,this)},sna.presentation.Container.prototype.initRefChildrenPresentation=function(){var e=this.scope.config,i=this.scope.model;e.refChildren&&angular.forEach(e.refChildren,function(e,t){null!=this[t]&&log(this,"initRefChildrenPresentation",sna.log.DEBUG,"Container property collision: "+t+sna.presentation.util.describe(this)),this[t]=this.presentation.createPresentation(e,this,i),this.addChild(this[t])},this)},sna.presentation.Container.prototype.updatePresentation=function(){this.eachChild(this.updateChildPresentation)},sna.presentation.Container.prototype.updateChildPresentation=function(e){e.updatePresentation&&e.updatePresentation()},sna.presentation.Container.prototype.rotateChildren=function(e){var t;e?(t=this.children[this.children.length-1],this.removeChild(t),this.addChildAt(t,0)):(t=this.children[0],this.removeChild(t),this.addChild(t))},sna.presentation.Container.prototype.animation=function(e,t){return t?this.animations[e]=t:this.animations[e]},sna.presentation.Container.prototype.bringToFront=function(){var e;this.parent&&((e=this.parent).removeChild(this),e.addChild(this))},sna.presentation.Container.prototype.createChildFromConfig=function(e,t){e=this.scope.config[e];if(e){t=this.presentation.createPresentation(e,this,t||this.scope.model);return this.addChild(t),t}},sna.presentation.Container.prototype.destroyChildren=function(){for(var e=this.children.length-1;0<=e;e--)this.children[e].destroy()},sna.presentation.ContainerFactory=function(e,t){return new sna.presentation.Container(e,t)},sna.module.core.controller(sna.presentation.CONTAINER,[sna.service.SCOPE,sna.service.PRESENTATION,sna.presentation.ContainerFactory]),sna.presentation.LAYER_CONTAINER="LayerContainer",sna.presentation.LayerContainer=function(e,t){sna.presentation.Container.call(this,e,t),this.layers={},e.config&&(this.order=e.config.layers)},sna.presentation.LayerContainer.prototype=new sna.presentation.Container({},{}),sna.presentation.LayerContainer.prototype.reorderLayers=function(e){this.order=e,this.updateLayers()},sna.presentation.LayerContainer.prototype.updateLayers=function(){var e;for(this.removeChildren(),e=0;e<this.order.length;e++){var t=this.order[e],t=this.layers[t];t&&this.addChildContainer(t)}},sna.presentation.LayerContainer.prototype.getLayer=function(e){return this.layers[e]},sna.presentation.LayerContainer.prototype.addLayer=function(e,t){this.layers[e]=t,-1==this.order.indexOf(e)&&log(this,"addLayer",sna.log.ERROR,"Added object ("+sna.presentation.util.describe(this)+") with undefined / unknown layer ("+e+")! "),this.updateLayers()},sna.presentation.LayerContainer.prototype.removeLayer=function(e){delete this.layers[e],this.updateLayers()},sna.presentation.LayerContainer.prototype.addLayers=function(e){angular.forEach(e,function(e,t){this.layers[t]=e}),this.updateLayers()},sna.presentation.LayerContainer.prototype.clearLayers=function(){this.layers={},this.removeChildren()},sna.presentation.LayerContainer.prototype.addChildContainer=sna.presentation.LayerContainer.prototype.addChild,sna.presentation.LayerContainer.prototype.addChild=function(e){var t=e.scope.config;this.addLayer(t.layer,e)},sna.presentation.LayerContainerFactory=function(e,t){return new sna.presentation.LayerContainer(e,t)},sna.module.core.controller(sna.presentation.LAYER_CONTAINER,[sna.service.SCOPE,sna.service.PRESENTATION,sna.presentation.LayerContainerFactory]),sna.presentation.FILL_ORIGINAL="O",sna.presentation.FILL_STRETCH="S",sna.presentation.FILL_COVER="C",sna.presentation.FILL_RESIZE="R",sna.presentation.UNIT_PIXEL="px",sna.presentation.UNIT_PERCENTAGE="%",sna.presentation.ALIGN_TOP="t",sna.presentation.ALIGN_BOTTOM="b",sna.presentation.ALIGN_LEFT="l",sna.presentation.ALIGN_RIGHT="r",sna.presentation.ALIGN_CENTER="c",sna.presentation.ALIGN_TOP_LEFT="tl",sna.presentation.ALIGN_BOTTOM_LEFT="bl",sna.presentation.ALIGN_TOP_RIGHT="tr",sna.presentation.ALIGN_BOTTOM_RIGHT="br",sna.presentation.LAYOUT_CONTAINER="LayoutContainer",sna.presentation.LayoutContainer=function(e,t){this.name=sna.presentation.LAYOUT_CONTAINER,sna.presentation.Container.call(this,e,t),this.isLayoutContainer=!0,this.initializeLayoutContainerName(e)},sna.presentation.LayoutContainer.prototype=new sna.presentation.Container({},{}),sna.presentation.LayoutContainer.prototype.initializeLayoutContainerName=function(e){e.config&&e.config.name&&(this.name=e.config.name)},sna.presentation.LayoutContainer.prototype.updateLayoutContainer=sna.presentation.LayoutContainer.prototype.updateLayout,sna.presentation.LayoutContainer.prototype.updateLayout=function(){this.updateLayoutContainer();var e=this.scope;if(e.config){var t=e.config,i=sna.presentation.UNIT_PERCENTAGE,n=sna.presentation.UNIT_PIXEL,e=e.parent,s=e.layoutWidth,r=e.layoutHeight,o=String(t.width||this.width||s),a=String(t.height||this.height||s),e=-1<o.indexOf(i)?i:n,n=-1<a.indexOf(i)?i:n;o=Number(o.replace(e,"")),a=Number(a.replace(n,"")),this.widthUnit===i&&(o=this.parentWidth*o/100),this.heightUnit===i&&(a=this.parentHeight*a/100),o*=this.presentation.globalScale,a*=this.presentation.globalScale,s<r&&t.switchSidesPortrait&&(l=a,a=o,o=l),this.layoutFill=t.fill,this.layoutAlign=t.align;var l=sna.presentation;switch(this.layoutFill){case l.FILL_ORIGINAL:this.scale.set(1,1),this.layoutWidth=o,this.layoutHeight=a;break;case l.FILL_STRETCH:this.scale.set(s/o,r/a),this.layoutWidth=o,this.layoutHeight=a;break;case l.FILL_COVER:var h=s/o,c=r/a,p=Math.max(h,c);this.scale.set(p,p),this.layoutWidth=s/p,this.layoutHeight=r/p;break;case l.FILL_RESIZE:h=s/o,c=r/a,p=Math.min(h,c);this.scaleFactor=p,this.scale.set(p,p),this.layoutWidth=Math.min(s/p,o),this.layoutHeight=Math.min(r/p,a)}l=sna.presentation;switch(this.layoutAlign){case l.ALIGN_CENTER:this.x=s/2,this.y=r/2;break;case l.ALIGN_BOTTOM:this.x=s/2,this.y=r;break;case l.ALIGN_TOP:this.x=s/2,this.y=0;break;case l.ALIGN_LEFT:this.x=0,this.y=r/2;break;case l.ALIGN_RIGHT:this.x=s,this.y=r/2;break;case l.ALIGN_TOP_LEFT:this.x=0,this.y=0;break;case l.ALIGN_BOTTOM_LEFT:this.x=0,this.y=r;break;case l.ALIGN_TOP_RIGHT:this.x=s,this.y=0;break;case l.ALIGN_BOTTOM_RIGHT:this.x=s,this.y=r}t.y&&(this.y+=t.y/this.scale.y),t.x&&(this.x+=t.x/this.scale.x),t.scale&&(this.scale.x*=t.scale,this.scale.y*=t.scale)}},sna.presentation.LayoutContainer.prototype.positionElement=function(e){var t=e.scope.config,i=t.align||sna.presentation.ALIGN_CENTER,n=sna.presentation;switch(i){case n.ALIGN_CENTER:e.x=t.x||0,e.y=t.y||0;break;case n.ALIGN_BOTTOM:e.x=t.x||0,e.y=(t.y||0)+this.layoutHeight/2;break;case n.ALIGN_TOP:e.x=t.x||0,e.y=(t.y||0)-this.layoutHeight/2;break;case n.ALIGN_LEFT:e.x=(t.x||0)-this.layoutWidth/2,e.y=t.y||0;break;case n.ALIGN_RIGHT:e.x=(t.x||0)+this.layoutWidth/2,e.y=t.y||0;break;case n.ALIGN_TOP_LEFT:e.x=(t.x||0)-this.layoutWidth/2,e.y=(t.y||0)-this.layoutHeight/2;break;case n.ALIGN_TOP_RIGHT:e.x=(t.x||0)+this.layoutWidth/2,e.y=(t.y||0)-this.layoutHeight/2;break;case n.ALIGN_BOTTOM_LEFT:e.x=(t.x||0)-this.layoutWidth/2,e.y=(t.y||0)+this.layoutHeight/2;break;case n.ALIGN_BOTTOM_RIGHT:e.x=(t.x||0)+this.layoutWidth/2,e.y=(t.y||0)+this.layoutHeight/2}switch(this.layoutAlign){case n.ALIGN_CENTER:break;case n.ALIGN_BOTTOM:e.y-=this.layoutHeight/2;break;case n.ALIGN_TOP:e.y+=this.layoutHeight/2;break;case n.ALIGN_LEFT:e.x+=this.layoutWidth/2;break;case n.ALIGN_RIGHT:e.x-=this.layoutWidth/2;break;case n.ALIGN_TOP_LEFT:e.x+=this.layoutWidth/2,e.y+=this.layoutHeight/2;break;case n.ALIGN_TOP_RIGHT:e.x-=this.layoutWidth/2,e.y+=this.layoutHeight/2;break;case n.ALIGN_BOTTOM_LEFT:e.x+=this.layoutWidth/2,e.y-=this.layoutHeight/2;break;case n.ALIGN_BOTTOM_RIGHT:e.x-=this.layoutWidth/2,e.y-=this.layoutHeight/2}},sna.presentation.LayoutContainerFactory=function(e,t){return new sna.presentation.LayoutContainer(e,t)},sna.module.core.controller(sna.presentation.LAYOUT_CONTAINER,[sna.service.SCOPE,sna.service.PRESENTATION,sna.presentation.LayoutContainerFactory]),sna.presentation.PLACEHOLDER_CONTAINER="PlaceholderContainer",sna.presentation.PlaceholderContainer=function(e,t){sna.presentation.Container.call(this,e,t),this.name=sna.presentation.PLACEHOLDER_CONTAINER,e.config&&void 0!==e.config.dontSearchAnimation&&(this.dontSearchAnimation=e.config.dontSearchAnimation)},sna.presentation.PlaceholderContainer.prototype=new sna.presentation.Container({},{}),sna.presentation.PlaceholderContainer.prototype.dontSearchAnimation=!0,sna.presentation.PlaceholderContainer.prototype.addChild=function(n){for(var e=this.scope.parent,t=[],i=n.scope.parent;i!=e;)t.push(i),i=i.scope.parent;var s=new PIXI.Container;angular.forEach(t.reverse(),function(e){s.rotation?(s.x+=e.y*Math.sin(s.rotation)*-1,s.y+=e.y*s.scale.y*Math.cos(s.rotation)):(s.x+=e.x*s.scale.x,s.y+=e.y*s.scale.y),s.scale.x*=e.scale.x,s.scale.y*=e.scale.y,s.rotation+=e.rotation});var r=-1;n.scope.config.placeholderZ&&angular.forEach(this.children,function(e,t){var i=e.children[0];i&&i.scope&&i.scope.config&&i.scope.config.placeholderZ?(e=n.scope.config.placeholderZ,i.scope.config.placeholderZ<=e&&(r=t+1)):r=t},this),r>=this.children.length?this.addChildPixiContainer(s):-1!=r?this.addChildAt(s,r):this.addChildAt(s,0),s.addChild(n),log(this.name,"addChild",sna.log.DEBUG,"Added object to placeholder: "+sna.presentation.util.describe(n))},sna.presentation.PlaceholderContainer.prototype.updateChildSpecificPlaceholder=function(t){var e=this.scope.parent,i=t.children[0];if(i){for(var n=[],s=i.scope.parent;s!=e;)n.push(s),s=s.scope.parent;t.x=0,t.y=0,t.scale.x=1,t.scale.y=1,angular.forEach(n.reverse(),function(e){t.rotation?(t.x+=e.y*Math.sin(t.rotation)*-1,t.y+=e.y*t.scale.y*Math.cos(t.rotation)):(t.x+=e.x*t.scale.x,t.y+=e.y*t.scale.y),t.scale.x*=e.scale.x,t.scale.y*=e.scale.y,t.rotation+=e.rotation})}},sna.presentation.PlaceholderContainer.prototype.updateLayoutContainer=sna.presentation.PlaceholderContainer.prototype.updateLayout,sna.presentation.PlaceholderContainer.prototype.updateLayout=function(){this.updateLayoutContainer(),this.children&&0<this.children.length&&this.scope.config.repositionContainer&&this.updateAllChildSpecificPlaceholders()},sna.presentation.PlaceholderContainer.prototype.updateAllChildSpecificPlaceholders=function(){this.children.forEach(this.updateChildSpecificPlaceholder,this)},sna.presentation.PlaceholderContainer.prototype.removePlacholderChild=function(t){log(this.name,"removeChild",sna.log.DEBUG,"Removed object from placeholder: "+sna.presentation.util.describe(t)),angular.forEach(this.children,function(e){e.children[0]==t&&e.destroy({children:!0})},this)},sna.presentation.PlaceholderContainerFactory=function(e,t){return new sna.presentation.PlaceholderContainer(e,t)},sna.module.core.controller(sna.presentation.PLACEHOLDER_CONTAINER,[sna.service.SCOPE,sna.service.PRESENTATION,sna.presentation.PlaceholderContainerFactory]),sna.presentation.PARTICLE_CONTAINER="ParticleContainer",sna.presentation.ParticleContainer=function(e,t){sna.presentation.Container.call(this,e,t),this.particleTextures=[],this.scope.config&&this.scope.config.options&&(t=this.scope.config.options,this.particleOptions=t||{},t.speed&&(t.speed.start&&(t.speed.start*=this.presentation.globalScale),t.speed.end&&(t.speed.end*=this.presentation.globalScale)),t.acceleration&&(t.acceleration.x&&(t.acceleration.x*=this.presentation.globalScale),t.acceleration.y&&(t.acceleration.y*=this.presentation.globalScale)),t.pos&&(t.pos.x&&(t.pos.x*=this.presentation.globalScale),t.pos.y&&(t.pos.y*=this.presentation.globalScale)),t.spawnRect&&(t.spawnRect.x&&(t.spawnRect.x*=this.presentation.globalScale),t.spawnRect.y&&(t.spawnRect.y*=this.presentation.globalScale),t.spawnRect.w&&(t.spawnRect.w*=this.presentation.globalScale),t.spawnRect.h&&(t.spawnRect.h*=this.presentation.globalScale)),t.spawnCircle&&(t.spawnCircle.x&&(t.spawnCircle.x*=this.presentation.globalScale),t.spawnCircle.y&&(t.spawnCircle.y*=this.presentation.globalScale),t.spawnCircle.r&&(t.spawnCircle.r*=this.presentation.globalScale),t.spawnCircle.minR&&(t.spawnCircle.minR*=this.presentation.globalScale)))},sna.presentation.ParticleContainer.prototype=new sna.presentation.Container({},{}),sna.presentation.ParticleContainer.prototype.initPresentation=function(){var o=[],a=this.scope.config,l=this.scope.model,e=a.particle;e.constructor===Array?(o=e,angular.forEach(o,function(e){!1!==e.emit&&this.particleTextures.push(this.presentation.createPresentation(e,this,l).texture)},this),o=this.particleTextures):(e.variants||(e.variants=[angular.copy(e)]),e.variants.forEach(function(e){var t=this.presentation.createPresentation(e,this,l);if(e.type==sna.presentation.MOVIE_CLIP)if(a.randomStartFrame)for(var i=t.textures.length,n=0;n<i;n++){for(var s={loop:a.particle.loop||a.options.loop,framerate:a.particle.framerate||a.options.framerate,textures:[]},r=0;r<i;r++)s.textures.push(t.textures[(n+r)%i]);o.push(s)}else o[0]={textures:t.textures,loop:a.options.loop,framerate:a.options.framerate}},this));var t=new PIXI.particles.Emitter(this,o,this.particleOptions);this.emitter=t,this.presentation.particleEmitters.push(this.emitter),e.constructor===Array?a.options.extraData?this.emitter.particleConstructor=PIXI.particles.PathParticle:this.emitter.particleConstructor=PIXI.particles.Particle:this.emitter.particleConstructor=PIXI.particles.AnimatedParticle,this.emitter.emit=!1,a.emit&&(this.emitter.emit=!0)},sna.presentation.ParticleContainer.prototype.start=function(e){e=e||this.scope.config.options.emitterLifetime;this.emitter.emitterLifetime=e,this.emitter.emit=!0},sna.presentation.ParticleContainer.prototype.stop=function(){this.emitter.emit=!1},sna.presentation.ParticleContainer.prototype.destroyContainer=sna.presentation.ParticleContainer.prototype.destroy,sna.presentation.ParticleContainer.prototype.destroy=function(e){this.destroyPresentation(),this.destroyContainer(e)},sna.presentation.ParticleContainer.prototype.destroyEmitter=function(){this.presentation.renderer.plugins&&this.presentation.renderer.plugins.sprite&&this.presentation.renderer.plugins.sprite.sprites&&(this.presentation.renderer.plugins.sprite.sprites.length=0)},sna.presentation.ParticleContainer.prototype.destroyPresentation=function(){this.destroyEmitter();var e=this.presentation.particleEmitters.indexOf(this.emitter);-1!==e&&this.presentation.particleEmitters.splice(e,1)},sna.presentation.ParticleContainer.prototype.enableParticle=function(e){},sna.presentation.ParticleContainer.prototype.disableParticle=function(e){},sna.presentation.ParticleContainer.prototype.cleanUp=function(){this.emitter&&this.emitter.cleanup()},sna.presentation.ParticleContainer.prototype.changeParticleParameter=function(e,t){this.emitter[e]&&(this.emitter.frequency=NaN==parseFloat(t)?t:parseFloat(t))},sna.presentation.ParticleContainer.prototype.setEmitterOption=function(e,t){void 0!==e&&void 0!==t&&void 0!==this.emitter[e]&&(this.emitter[e]=+t)},sna.module.core.controller(sna.presentation.PARTICLE_CONTAINER,[sna.service.SCOPE,sna.service.PRESENTATION,sna.presentation.ParticleContainer]),sna.presentation.POPUP_CONTAINER="PopupContainer",sna.presentation.PopupContainer=function(e,t,i,n){sna.presentation.Container.call(this,e,t),this.iface=i,this.game=i.game,this.name=sna.presentation.POPUP_CONTAINER,this.toggleState=!1,this.triggerCallback=null,this.scope.config.closeAnywhere&&(this.closeAnywhereCallback=this.createGlobalClosePopupCallback())},sna.presentation.PopupContainer.prototype=new sna.presentation.Container({},{}),sna.presentation.PopupContainer.prototype.hide=function(){var e=this.toggleState;this.toggleState=!1,e&&this.presentation.createAnimationTimeline("$popupHide",0,!1,!0,this),this.visible=!1},sna.presentation.PopupContainer.prototype.initPresentation=function(){var e=this.scope,t=e.config,i=e.model,e=t.popup,e=this.presentation.createPresentation(e,this,i);this.addChild(e),this.popupPresentation=e;var e=t.trigger,n=this.presentation.createPresentation(e,this,i);this.addChild(n),this.triggerPresentation=n,t.trigger.onPress&&(t=t.trigger.onPress.split(":"),this.triggerCallback=this.iface.createCallback(n,t.shift(),t)),n.setPressAction&&(this.game.getParameterValue("tinkUpdateButtonsDisabled")?n.release=function(){n.enabled&&(n.toggleState=!n.toggleState,this.triggerCallback&&this.triggerCallback(),this.togglePopup())}.bind(this):n.setPressAction(function(){this.triggerCallback&&this.triggerCallback(),this.togglePopup()}.bind(this)))},sna.presentation.PopupContainer.prototype.togglePopup=function(e,t){this.toggleState=!this.toggleState;var i="";this.toggleState?(i="$popupShow",this.closeAnywhereCallback&&this.iface.addGlobalPressCallback(this.closeAnywhereCallback)):(i="$popupHide",this.closeAnywhereCallback&&this.iface.removeGlobalPressCallback(this.closeAnywhereCallback)),this.presentation.createAnimationTimeline(i,0,!1,!0,this)},sna.presentation.PopupContainer.prototype.createGlobalClosePopupCallback=function(){return function(){this.toggleState=!1,void 0!==this.triggerPresentation.toggleState&&(this.triggerPresentation.toggleState=!1),this.presentation.createAnimationTimeline("$popupHide",0,!1,!0,this),this.triggerCallback&&this.triggerCallback(),this.iface.removeGlobalPressCallback(this.closeAnywhereCallback),this.triggerPresentation.gotoAndStop&&this.triggerPresentation.gotoAndStop(0)}.bind(this)},sna.presentation.PopupContainerFactory=function(e,t,i){var n=t.presentation,t=t.iface;return new sna.presentation.PopupContainer(e,n,t,i)},sna.module.core.controller(sna.presentation.POPUP_CONTAINER,[sna.service.SCOPE,sna.service.MAIN,sna.service.TIMELINE,sna.presentation.PopupContainerFactory]),sna.presentation.HTML_CONTAINER="HtmlContainer",sna.presentation.HtmlContainer=function(e,t,i,n){this.name=sna.presentation.HTML_CONTAINER,this.http=i,this.compile=n,this.contentScope=null,this.hasHtmlContent=!0,this.domContent=null,this.cachedHtmlContent=null,this.contentOpened=!1,e&&t&&sna.presentation.Container.call(this,e,t);t=this.scope.config;t&&(sna.presentation.util.setupConfigHeight(this.presentation,this),sna.presentation.util.setupConfigWidth(this.presentation,this),t.fixedResolution||(t.width*=this.presentation.globalScale,t.height*=this.presentation.globalScale))},sna.presentation.HtmlContainer.prototype=new sna.presentation.Container({},{}),sna.presentation.HtmlContainer.prototype.showContainer=sna.presentation.Container.prototype.show,sna.presentation.HtmlContainer.prototype.hideContainer=sna.presentation.Container.prototype.hide,sna.presentation.HtmlContainer.prototype.show=function(){if(this.scope.config.visible=!0,!this.contentOpened){this.contentOpened=!0;var e=this.scope.config.useTranslations,t=this.scope.config.url;return e&&(t=((window.SNA||{}).basePath||"")+(e=t.split("."))[0]+"_"+this.scope.model.language+"."+e[1]),this.http.get(t).then(function(e){e.data;var t=document.getElementById("html-content");t.innerHTML+=e.data,this.domContent=document.getElementById(this.scope.config.domId),this.controllerScope=this.presentation.scope,void 0!==this.scope.config.domIdParentScope&&(e=angular.element("#"+this.scope.config.domIdParentScope).scope(),this.controllerScope=e),this.compile(t)(this.controllerScope),this.domContent.style.pointerEvents="auto",this.domContent.style.position="absolute",this.presentation.scope.apply,this.showContainer(),this.positionHtml(),void 0!==this.scope.config.onShow&&void 0!==this.controllerScope&&this.controllerScope[this.scope.config.onShow]()}.bind(this))}this.showContainer()},sna.presentation.HtmlContainer.prototype.hide=function(){this.contentOpened?this.domContent&&(void 0!==this.scope.config.onHide&&void 0!==this.controllerScope&&this.controllerScope[this.scope.config.onHide](),this.domContent.style.display="none",this.hideContainer(),this.domContent=document.getElementById(this.scope.config.domId),this.domContent.parentNode.removeChild(this.domContent),this.domContent=null,this.contentOpened=!1,this.scope.config.visible=!1):this.hideContainer()},sna.presentation.HtmlContainer.prototype.moveHtml=function(e,t){var i=document.getElementById(this.scope.config.domId),n=this.getDimensions();e*=n.scale,t*=n.scale,i.style.left=parseFloat(i.style.left.slice(0,-2))+e,i.style.top=parseFloat(i.style.top.slice(0,-2))+t},sna.presentation.HtmlContainer.prototype.positionHtml=function(){var e,t,i,n,s=this.scope.config,r=document.getElementById(this.scope.config.domId);r&&(r.style.width=s.width+"px",r.style.height=s.height+"px",t=(e=this.getDimensions()).x-s.width/2,i=e.y-s.height/2,n=this.scope.config.anchorAlign,-1!==["tl","l","bl"].indexOf(n)&&(t-=s.width*e.scale/2),-1!==["tr","r","br"].indexOf(n)&&(t+=s.width*e.scale/2),-1!==["tl","t","tr"].indexOf(n)&&(i-=s.height*e.scale/2),-1!==["bl","b","br"].indexOf(n)&&(i+=s.height*e.scale/2),i=+i,r.style.left=(t=+t)+"px",r.style.top=i+"px",this.scope.config.fixedResolution&&(e.scale=e.scale*this.presentation.globalScale),r.style.transform="scale("+ +e.scale+","+ +e.scale+")",r.style["-webkit-transform"]="scale("+ +e.scale+","+ +e.scale+")")},sna.presentation.HtmlContainer.prototype.updateLayout=function(){var e=this.scope.config;e.configWidthFactory&&(e.width=e.configWidthFactory.call(this)),e.configHeightFactory&&(e.height=e.configHeightFactory.call(this)),sna.presentation.Container.prototype.updateLayout.call(this),this.positionHtml()},sna.presentation.HtmlContainer.prototype.getDimensions=function(){for(var e,t={x:0,y:0,scale:1},i=[],n=this;null!==n;)i.unshift(n),n=n.parent;return angular.forEach(i,function(e){t.x+=(e.x||0)*t.scale,t.y+=(e.y||0)*t.scale,t.scale*=e.scale.x||1},this),(this.presentation.scope.layout.has(sna.service.ENVIRONMENT_DESKTOP)||this.presentation.scope.layout.has(sna.service.ENVIRONMENT_TABLET))&&(e=1/this.presentation.scope.layout.canvasScale,t.x*=e,t.y*=e,t.scale*=e),t},sna.module.core.controller(sna.presentation.HTML_CONTAINER,[sna.service.SCOPE,sna.service.PRESENTATION,sna.service.HTTP,"$compile",sna.presentation.HtmlContainer]),sna.presentation.HTML_INPUT="HtmlInput",sna.presentation.HtmlInput=function(e,t,i,n){this.q=i,this.domId=sna.presentation.HtmlInput.prototype.uniqueId++,e.config.domId="htmlInput"+this.domId,sna.presentation.HtmlContainer.call(this,e,t,i,n)},sna.presentation.HtmlInput.prototype=new sna.presentation.HtmlContainer,sna.presentation.HtmlInput.prototype.uniqueId=1e3,sna.presentation.HtmlInput.prototype.htmlTemplate='<div id="htmlInput<domId>" style="overflow-y: hidden; overflow-x: hidden; display: none;" data-ng-controller="textInputController"><style> #htmlInput<domId> input {width: 100%; height: 100%; font-size: <fontSize>px;\ttext-align: center;\t}</style><input type="<inputType>"  min="<minValue>"  max="<maxValue>" maxlength="<maxLength>" data-ng-model="inputValue" data-ng-init="setup(\'<value>\',\'<onChange>\')" /></div>',sna.presentation.HtmlInput.prototype.show=function(e){if(!this.contentOpened||e){this.contentOpened=!0;var t=(t=this.htmlTemplate).replace("<domId>",this.domId).replace("<domId>",this.domId),e=Math.ceil(this.scope.config.fontSize*this.presentation.globalScale);t=(t=(t=t.replace("<fontSize>",e)).replace("<maxLength>",99999)).replace("<value>",this.scope.config.value);e=this.scope.config.minValue||"";0==this.scope.config.minValue&&(e=0),t=t.replace("<minValue>",e);e=this.scope.config.maxValue||"";0==this.scope.config.maxValue&&(e=0),t=(t=(t=t.replace("<maxValue>",e)).replace("<inputType>",this.scope.config.inputType||"text")).replace("<onChange>",this.scope.config.onChange);e=document.getElementById("html-content");return e.innerHTML+=t,this.compile(e)(this.presentation.scope),this.domContent=document.getElementById("htmlInput"+this.domId),this.domContent.style.pointerEvents="auto",this.domContent.style.position="absolute",this.presentation.scope.apply,this.showContainer(),this.positionHtml(),this.domContent.style.display="block",this.q.when(!0)}this.showContainer()},sna.presentation.HtmlInput.prototype.clearText=function(){this.show(!0)},sna.module.core.controller(sna.presentation.HTML_INPUT,[sna.service.SCOPE,sna.service.PRESENTATION,sna.service.Q,sna.service.COMPILE,sna.presentation.HtmlInput]),sna.presentation.OPTIONS_CONTAINER="OptionsContainer",sna.presentation.OptionsContainer=function(e,t,i,n){sna.presentation.Container.call(this,e,t),this.options={},this.enabled=!0,sna.presentation.util.setupDisabled(t,this),this.sound=n;var n=this.scope.config;n&&n.onSelect&&(n=n.onSelect.split(":"),this.setOptionAction(i.createCallback(this,n.shift(),n)))},sna.presentation.OptionsContainer.prototype=new sna.presentation.Container({},{}),sna.presentation.OptionsContainer.prototype.initPresentationContainer=sna.presentation.Container.prototype.initPresentation,sna.presentation.OptionsContainer.prototype.initPresentation=function(){this.initPresentationContainer();var e=this.scope,t=e.config;e.model;t.options&&angular.forEach(t.options,this.initOptionPresentation.bind(this),this),t.optionValues&&(e=null,e="string"==typeof t.optionValues?this.presentation.parseValue(this,t.optionValues):t.optionValues,this.initOptionPresentations(e))},sna.presentation.OptionsContainer.prototype.initOptionPresentations=function(n){var s=this.scope.config,r=s.option;angular.forEach(n,function(e,t){var i=angular.copy(r);s.optionX&&(i.x=s.optionX[t]),void 0!==s.sizeY&&void 0!==s.offsetY?i.y=-(s.sizeY/(n.length-1))*t+s.offsetY:s.optionY&&(s.optionY.constructor===Array?i.y=s.optionY[t]:(valuesCount=n.length,i.y=s.optionY*(t-valuesCount/2+.5))),s.optionRotations&&(i.rotation=s.optionRotations[t]),s.optionAreaWidth&&(i.areaWidth=s.optionAreaWidth[t]),s.optionAreaHeight&&(i.areaHeight=s.optionAreaHeight[t]),s.optionAreaX&&(i.areaX=s.optionAreaX[t]),s.optionAreaY&&(i.areaY=s.optionAreaY[t]),this.initOptionPresentation(i,e)},this)},sna.presentation.OptionsContainer.prototype.updateOptionPresentations=function(e){this.removeOptionPresentation(),this.initOptionPresentations(e)},sna.presentation.OptionsContainer.prototype.removeOptionPresentations=function(){angular.forEach(this.options,function(e){this.removeChild(e)},this),this.options.length=0},sna.presentation.OptionsContainer.prototype.disable=function(){angular.forEach(this.children,function(e){e.disable&&e.disable()},this)},sna.presentation.OptionsContainer.prototype.enable=function(){angular.forEach(this.children,function(e){e.enable&&e.enable()},this)},sna.presentation.OptionsContainer.prototype.initOptionPresentation=function(e,t){var i=this.scope.model,i=this.presentation.createPresentation(e,this,{option:t,parent:i});this.scope.disabled&&(i.enabled=!1),this.options[t]=i,this.addChild(i),i.setPressAction&&i.setPressAction(this.onOptionSelect.bind(this));var e=e.optionButtonId;!e||(e=this.presentation.getById(e))&&e.setPressAction(this.onOptionSelect.bind(this))},sna.presentation.OptionsContainer.prototype.onOptionSelect=function(e,t){var i;this.scope.config.disableOnSelect&&angular.forEach(this.options,function(e){void 0!==e.enabled&&(e.enabled=!1),e.scope.model.option!=t.option&&(e.disable&&e.disable(),!(e=e.scope.config.optionButtonId)||(e=this.presentation.getById(e))&&e.disable&&e.disable())},this),!this.scope.config.option||(i=this.scope.config.option.onPressSound)&&this.sound.playSound(i,!1),this.optionSelectCallback&&this.optionSelectCallback(t.option,t)},sna.presentation.OptionsContainer.prototype.setOptionAction=function(e){this.optionSelectCallback=e},sna.presentation.OptionsContainerFactory=function(e,t,i,n){return new sna.presentation.OptionsContainer(e,t,i.iface,n)},sna.module.core.controller(sna.presentation.OPTIONS_CONTAINER,[sna.service.SCOPE,sna.service.PRESENTATION,sna.service.MAIN,sna.service.SOUND,sna.presentation.OptionsContainerFactory]),sna.presentation.SCROLL_OPTIONS_CONTAINER="ScrollOptionsContainer",sna.presentation.ScrollOptionsContainer=function(e,t,i){var n=t.presentation,t=t.iface;sna.presentation.Container.call(this,e,n),this.name=sna.presentation.SCROLL_OPTIONS_CONTAINER,this.iface=t,this.timeline=i,this.area=null,this.optionsContainer=null,"string"==typeof this.scope.config.optionValues?this.options=this.presentation.parseValue(this,this.scope.config.optionValues):this.options=this.scope.config.optionValues,"string"==typeof this.scope.config.defaultOption?this.defaultOption=this.presentation.parseValue(this,this.scope.config.defaultOption):this.defaultOption=this.scope.config.defaultOption,this.selectedIndex=0,this.currentIndex=0,this.scope.config&&this.scope.config.scrollArea&&(this.scope.config.scrollArea.width=this.scope.config.scrollArea.width*this.presentation.globalScale,this.scope.config.scrollArea.height=this.scope.config.scrollArea.height*this.presentation.globalScale,this.scope.config.optionY=this.scope.config.optionY*this.presentation.globalScale)},sna.presentation.ScrollOptionsContainer.prototype=new sna.presentation.Container({},{},{}),sna.presentation.ScrollOptionsContainer.prototype.initPresentationContainer=sna.presentation.Container.prototype.initPresentation,sna.presentation.ScrollOptionsContainer.prototype.initPresentation=function(){this.initPresentationContainer(),this.configuredChildren=this.children.length,this.initScrollAreaPresentation(),this.initOptionsPresentation(),this.addChild(this.area),this.initButton()},sna.presentation.ScrollOptionsContainer.prototype.initScrollAreaPresentation=function(){var e=this.scope.config.scrollArea,t=new PIXI.Graphics;t.beginFill(65280,.001),t.drawRect(0,0,e.width,e.height),t.x=-e.width/2,t.y=-e.height/2,t.endFill(),this.area=t},sna.presentation.ScrollOptionsContainer.prototype.initOptionsPresentation=function(){this.optionsContainer=new PIXI.Container;for(var a=this.optionsContainer,e=this.scope.config,l=this.options,h=e.optionY,c=e.scrollArea.height/h,t=Math.floor(this.currentIndex-c/2),i=Math.ceil(this.currentIndex+c/2),n=t;n<=i;n++){for(var s=n;s<0;)s+=l.length;s%=l.length;var r=angular.copy(e.option);r.y=n*h;var o={option:l[s].toString()},o=this.presentation.createPresentation(r,this,o);o.scale.x=1-Math.abs((n+this.currentIndex)/c),o.scale.y=1-Math.abs((n+this.currentIndex)/c),o.alpha=1-Math.abs((n+this.currentIndex)/c),this.addChild(o)}this.iface.ui.makeInteractive(this.area),a.followCursorRules={offsetX:0,disableX:!0,disableY:!1,notifyChange:!0};var p=0,u=[];this.area.press=function(){this.currentTimeline&&(this.currentTimeline.stop(),this.currentTimeline.kill(),delete this.currentTimeline,this.currentTimeline=!1,a.y=(this.selectedIndex-this.currentIndex)*h*this.presentation.globalScale),p=void 0,u.length=0,this.iface.ui.followCursor(a)}.bind(this),this.area.release=function(){for(var e=0,t=0;t<u.length;t++)e+=u[t];0<u.length&&(e=e/u.length*60),e/=h,8<Math.abs(e)&&(e=8*Math.sign(e));var i=Math.abs(e/10),n=10*i*i/2;this.iface.ui.unfollowCursor(a);var s,r=new this.timeline;return this.currentTimeline=r,i=0==e?(s=Math.round(this.currentIndex),.5):(s=Math.round(this.currentIndex-n*Math.sign(e)),i),this.selectedIndex=s,p=0,r.set(a,{y:0}),r.to(a,i,{y:(s-this.currentIndex)*h,onUpdate:a.onFollow}),r.call(a.onFollow,[]),r}.bind(this),this.area.canReleaseOutside=!0,a.onFollow=function(){var e=a.y,t=void 0!==p?p-e:0;this.currentIndex-=t/h;for(var i=Math.floor(-this.currentIndex-c/2),n=Math.ceil(-this.currentIndex+c/2),s=0,r=i;r<=n&&!(s>=this.children.length-this.configuredChildren-3);r++){for(var o=r;o<0;)o+=l.length;o%=l.length,this.children[this.configuredChildren+s].y=(r+this.currentIndex)*h*this.presentation.globalScale,this.children[this.configuredChildren+s].scope.config.y=(r+this.currentIndex)*h*this.presentation.globalScale,this.children[this.configuredChildren+s].scope.model.option=l[o],this.children[this.configuredChildren+s].text=l[o],this.children[this.configuredChildren+s].scale.x=1-Math.abs((r+this.currentIndex)/c),this.children[this.configuredChildren+s].scale.y=1-Math.abs((r+this.currentIndex)/c),this.children[this.configuredChildren+s].alpha=1-Math.abs((r+this.currentIndex)/c),s++}p=e,u.push(t),10<u.length&&u.shift()}.bind(this),this.addChild(a),this.defaultOption&&this.setCurrentOption(this.defaultOption)},sna.presentation.ScrollOptionsContainer.prototype.initButton=function(){var e=this.scope.config,t=e.selectButton,t=this.presentation.createPresentation(t,this,this.scope.model);this.enabled=!0,this.addChild(t),this.button=t;var e=e.onSelect.split(":"),i=this.iface.createCallback(this,e.shift(),e);t.release=function(){i()}},sna.presentation.ScrollOptionsContainer.prototype.setCurrentOption=function(e){this.currentIndex=-this.options.indexOf(e),this.iface.ui.followCursor(this.optionsContainer),this.area.release()},sna.presentation.ScrollOptionsContainer.prototype.currentOption=function(){for(var e=-this.selectedIndex;e<0;)e+=this.options.length;return e%=this.options.length,this.options[e]},sna.module.core.controller(sna.presentation.SCROLL_OPTIONS_CONTAINER,[sna.service.SCOPE,sna.service.MAIN,sna.service.TIMELINE,sna.presentation.ScrollOptionsContainer]),sna.presentation.SPRITE="Sprite",sna.presentation.Sprite=function(e,t){this.name=sna.presentation.SPRITE,this.presentation=t.presentation,this.loaderService=t.loader,this.scope=e,this.iface=t.iface;t=e.config;t.texture&&(-1==t.texture.indexOf(".png")&&(t.texture+=".png"),t.texture=this.presentation.parseValue(this,t.texture)),PIXI.Sprite.call(this,this._getTexture(this.loaderService.pixiLoader,e.config)),sna.presentation.util.setupLangConf(this.presentation,this),log(this.name,"setupLangConf",sna.log.INFO,"Implement setupLangConf function in all components; Remove log."),sna.presentation.util.setupX(this.presentation,this),sna.presentation.util.setupY(this.presentation,this),sna.presentation.util.setupScale(this.presentation,this),sna.presentation.util.setupVisibility(this.presentation,this),sna.presentation.util.setupAlpha(this.presentation,this),sna.presentation.util.setupWidth(this.presentation,this),sna.presentation.util.setupHeight(this.presentation,this),sna.presentation.util.setupAnchor(this.presentation,this),sna.presentation.util.setupBlendMode(this.presentation,this),sna.presentation.util.setupRotation(this.presentation,this),sna.presentation.util.setUpAngle(this.presentation,this),sna.presentation.util.setupPivot(this.presentation,this),sna.presentation.util.setupSkew(this.presentation,this),t.xValue&&(t.x=this.presentation.parseValue(this,t.xValue)),t.yValue&&(t.y=this.presentation.parseValue(this,t.yValue)),sna.presentation.util.setupFlipX(this.presentation,this),sna.presentation.util.setupFlipY(this.presentation,this),this.x=t.x||0,this.y=t.y||0,this.animations={},t.opaque&&this.setOpaque(t.opaque),t.tint&&this.setTint(t.tint),t.video,t.allowOverrides&&(this.allowOverrides=t.allowOverrides),t.scaleX&&(this.scale.x=this.presentation.parseValue(this,t.scaleX)),(t.blured||t.blurred)&&((e=new PIXI.filters.BlurFilter).blurX=0,e.blurY=5,this.filters=[e]),t.scaleY&&(this.scale.y=this.presentation.parseValue(this,t.scaleY))},sna.presentation.Sprite.prototype=new PIXI.Sprite,sna.presentation.Sprite.prototype.show=sna.presentation.util.show,sna.presentation.Sprite.prototype.hide=sna.presentation.util.hide,sna.presentation.Sprite.prototype.setX=sna.presentation.util.setX,sna.presentation.Sprite.prototype.getX=sna.presentation.util.getX,sna.presentation.Sprite.prototype.setY=sna.presentation.util.setY,sna.presentation.Sprite.prototype.getY=sna.presentation.util.getY,sna.presentation.Sprite.prototype.setRotation=sna.presentation.util.setRotation,sna.presentation.Sprite.prototype.setTint=function(e){this.tint=e},sna.presentation.Sprite.prototype.resetTint=function(){this.tint="0xFFFFFF"},sna.presentation.Sprite.prototype.setOpaque=function(e){e?(this.iface.ui.makeInteractive(this),this.noPointer=!0,this.interactive=!0):(this.iface.ui.remove(this),this.interactive=!1)},sna.presentation.Sprite.prototype._getTexture=function(e,t){if(t.texture){if(void 0!==e.resources[t.atlas])return e.resources[t.atlas].textures[t.texture];log(this.name,"_getTexture",sna.log.FATAL,"Could not find texture of name: "+t.texture+". Hint: Check if it's included in assets.php file")}if(t.video){var n=[];angular.forEach(t.video,function(e){var t=this.loaderService.assetPath,i=this.presentation.scope.layout.selectedSize.path;n.push(t+i+e)},this);var i=new PIXI.Texture(PIXI.VideoBaseTexture.fromUrl(n));return t.paused&&i.baseTexture.on("loaded",function(){i.baseTexture.source.pause()}),i}if(t.image){if(null!=e.resources[t.image])return e.resources[t.image].texture;log(this.name,"_getTexture",sna.log.FATAL,"Could not find resource of name: "+t.image+".\nHint: Check if it's included in assets.php file")}return PIXI.Texture.EMPTY},sna.presentation.Sprite.prototype.config=function(){return this.scope.config},sna.presentation.Sprite.prototype.animation=function(e,t){if(!t)return this.animations[e];this.animations[e]=t},sna.presentation.Sprite.prototype.getscale=function(){return this.scale.x},sna.presentation.Sprite.prototype.getscaleX=function(){return this.scale.x},sna.presentation.Sprite.prototype.setscaleX=function(e){var t=this.scale;this.scale.set(e,t.y)},sna.presentation.Sprite.prototype.getscaleY=function(){return this.scale.y},sna.presentation.Sprite.prototype.setscaleY=function(e){var t=this.scale;this.scale.set(t.x,e)},sna.presentation.Sprite.prototype.setScaleX=function(e){var t=this.scale;this.scale.set(e,t.y)},sna.presentation.Sprite.prototype.setScaleY=function(e){var t=this.scale;this.scale.set(t.x,e)},sna.presentation.Sprite.prototype.setscale=function(e){this.scale.set(e,e)},sna.presentation.Sprite.prototype.setalpha=function(e){this.alpha=e},sna.presentation.Sprite.prototype.moveAboveAll=function(){var e=this.parent;e.removeChild(this),e.addChild(this)},sna.presentation.Sprite.prototype.moveZOrder=function(e){var t=this.parent;t.removeChild(this),t.addChildAt(this,e)},sna.presentation.Sprite.prototype.updateLayout=function(){var e=this.scope.config;e.xFactory&&(e.x=e.xFactory.call(this)),e.yFactory&&(e.y=e.yFactory.call(this)),e.scaleFactory&&(e.scale=e.scaleFactory.call(this),this.scale.set(e.scale,e.scale)),e.visibleFactory&&(e.visible=e.visibleFactory.call(this),e.visible?this.show():this.hide()),e.rotationFactory&&(e.rotation=e.rotationFactory.call(this),this.rotation=e.rotation),e.anchorAlignFactory&&(e.anchorAlign=e.anchorAlignFactory.call(this),sna.presentation.util.setupAnchor(this.presentation,this))},sna.presentation.Sprite.prototype.setEmptyTexture=function(){this.texture=PIXI.Texture.EMPTY},sna.presentation.Sprite.prototype.setTexture=function(e,t){-1==e.toString().indexOf(".png")&&(e+=".png"),void 0!==(t=void 0===t&&void 0!==this.scope.config.atlas?this.scope.config.atlas:t)?(void 0===this.loaderService.pixiLoader.resources[t]&&log(this.name,"setTexture",sna.log.FATAL,"Could not find texture of name: "+e+". Hint: Check if it's included in assets.php file"),this.loaderService.pixiLoader.resources[t].textures[e]&&(this.activeTextureName=e,this.texture=this.loaderService.pixiLoader.resources[t].textures[e])):(void 0===this.loaderService.pixiLoader.resources[e]&&log(this.name,"setTexture",sna.log.FATAL,"Could not find resource of name: "+e+".\nHint: Check if it's included in assets.php file"),this.loaderService.pixiLoader.resources[e].texture&&(this.activeTextureName=e,this.texture=this.loaderService.pixiLoader.resources[e].texture))},sna.presentation.Sprite.prototype.setAtlas=function(e){var t=this.scope.config.texture;void 0!==e&&this.loaderService.pixiLoader.resources[e].textures[t]&&(this.texture=this.loaderService.pixiLoader.resources[e].textures[t])},sna.presentation.SpriteFactory=function(e,t){return new sna.presentation.Sprite(e,t)},sna.module.core.controller(sna.presentation.SPRITE,["$scope",sna.service.MAIN,sna.presentation.SpriteFactory]),sna.presentation.STAKE_LOGIC_DIVIDER="StakeLogicDividerSprite",sna.presentation.StakeLogicDividerSprite=function(e,t){this.scope=e,this.main=t,this.iface=t.iface,this.presentation=t.presentation,this.config=this.scope.config,sna.presentation.Sprite.call(this,e,t),this.iface.presentation.scope.layout.has(sna.service.ENVIRONMENT_MOBILE)&&this.setscaleY(2)},sna.presentation.StakeLogicDividerSprite.prototype=Object.create(sna.presentation.Sprite.prototype),sna.presentation.StakeLogicDividerFactory=function(e,t){return new sna.presentation.StakeLogicDividerSprite(e,t)},sna.module.core.controller(sna.presentation.STAKE_LOGIC_DIVIDER,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.StakeLogicDividerFactory]),sna.presentation.TEXT="Text",sna.presentation.Text=function(e,t,i,n,s,r){this.presentation=t,this.scope=e,this.sound=s,this.background=null,this.interval=r,this.iface=i;var o=e.config;o.decimals=o.decimals||0,o.isCurrency=o.isCurrency||!1,o.showCurrencySign=void 0===o.showCurrencySign||o.showCurrencySign,this.decimalFactor=Math.pow(10,this.presentation.parseValue(this,o.decimals));var a,l=this.getText();if(PIXI.Text.call(this,l),this.presentation.scope.language&&(this.presentation.scope.lang=this.presentation.scope.language),sna.presentation.util.setupLangConf(this.presentation,this),sna.presentation.util.setupAnchor(this.presentation,this),sna.presentation.util.setupFontSize(this.presentation,this),sna.presentation.util.setupToUpperCase(this.presentation,this),sna.presentation.util.setUpWordWrapWidth(this.presentation,this),sna.presentation.util.setupFontConfig(this.presentation,this),o.wordWrap&&(this.style.wordWrap=o.wordWrap,this.style.wordWrapWidth=(o.wordWrapWidth||100)*this.presentation.globalScale,this.style.lineHeight=(o.wordWrapLineHeight||o.fontSize||o.size)*this.presentation.globalScale,this.style.align=o.wordWrapAlign||"center",this.style.breakWords=o.wordWrapBreakWords||!1),o.align&&(this.style.align=o.align),o.lineHeight&&(this.style.lineHeight=o.lineHeight*this.presentation.globalScale),o.autoUpdate&&(o.autoUpdate===!!o.autoUpdate?i.registerAutoUpdate(this):i.registerEventCallback(o.autoUpdate,this,this.updatePresentation)),o.skipRedraw||i.registerEventCallback("redraw",this,this.updatePresentation),o.fontFamily&&(this.style.fontFamily=o.fontFamily),o.font&&(this.style.fontFamily=o.font),o.size=void 0!==o.size?o.size:30,o.size=this.presentation.parseValue(this,o.size),o.fontSize=this.presentation.parseValue(this,o.fontSize),o.wordWrapLineHeight=this.presentation.parseValue(this,o.wordWrapLineHeight),o.size&&(this.style.fontSize=Math.ceil(o.size*this.presentation.globalScale)+"px"),o.fontSize&&(this.style.fontSize=Math.ceil(o.fontSize*this.presentation.globalScale)+"px"),o.fill&&(this.style.fill=o.fill),o.stroke&&(this.style.stroke=o.stroke),o.strokeColor&&(this.style.stroke=o.strokeColor),o.thickness&&(this.style.strokeThickness=o.thickness*this.presentation.globalScale),o.strokeThickness&&(this.style.strokeThickness=o.strokeThickness*this.presentation.globalScale),o.gradientType)switch(o.gradientType){case"vertical":this.style.fillGradientType=PIXI.TEXT_GRADIENT.LINEAR_VERTICAL;break;case"horizontal":this.style.fillGradientType=PIXI.TEXT_GRADIENT.LINEAR_HORIZONTAL}o.gradientStops&&(this.style.fillGradientStops=o.gradientStops),o.fillGradientStops&&(this.style.fillGradientStops=o.fillGradientStops),sna.presentation.util.setupAlpha(this.presentation,this),sna.presentation.util.setupRotation(this.presentation,this),sna.presentation.util.setUpAngle(this.presentation,this),o.dropShadow&&(this.style.dropShadow=o.dropShadow,this.style.dropShadowColor=o.dropShadowColor||"black",this.style.dropShadowAngle=void 0!==o.dropShadowAngle?o.dropShadowAngle:Math.PI/4,this.style.dropShadowDistance=void 0!==o.dropShadowDistance?o.dropShadowDistance:5,this.style.dropShadowAlpha=void 0!==o.dropShadowAlpha?o.dropShadowAlpha:1,this.style.dropShadowBlur=void 0!==o.dropShadowBlur?o.dropShadowBlur:0),this.style.padding=o.padding||0,this.style.lineJoin=o.lineJoin||"miter",this.style.miterLimit=o.miterLimit||10,this.style.fontStyle=o.fontStyle||"normal",this.style.fontWeight=o.fontWeight||"normal",this.style.fontVariant=o.fontVariant||"normal",this.style.letterSpacing=void 0!==o.letterSpacing?Math.ceil(o.letterSpacing*this.presentation.globalScale):0,this.cacheAsBitmap=o.cacheAsBitmap||!1,this.scope=e,o.width&&(this.width=o.width),o.height&&(this.height=o.height),sna.presentation.util.setupVisibility(this.presentation,this),sna.presentation.util.setupX(this.presentation,this),sna.presentation.util.setupY(this.presentation,this),sna.presentation.util.setupScale(this.presentation,this),this.frameskipCount=o.skipTextFrames||0,this.animations={},void 0!==o.typewriter&&(this.originalText=l,this.text=this.text.substring(0,o.typewriter),o.typewriterSound&&(this.typewriterSoundSkip=o.typewriterSoundSkip||0)),sna.presentation.util.setupMaxWidth(this.presentation,this),sna.presentation.util.setupMaxHeight(this.presentation,this),o.scaleX&&(this.scale.x=o.scaleX),o.scaleY&&(this.scale.y=o.scaleY),o.tint&&this.setTint(o.tint),o.allowOverrides&&(this.allowOverrides=o.allowOverrides),this.currentDate&&this.interval(this.updateTimePresentation.bind(this),1e3),o.isTimer&&this.iface.isUKGC()&&this.interval(this.setTimer.bind(this),1e3),t.scope.lang&&o.breakWordWidth&&("zh_CN"==sna.service.ENVIRONMENT_LANG||"zh_HK"==sna.service.ENVIRONMENT_LANG||"jp_JP"==sna.service.ENVIRONMENT_LANG||"ja"==t.scope.lang||-1!=t.scope.lang.indexOf("zh_"))&&0<this.getText().length&&this.setText(this.breakWord(this.getText(),Math.round(o.breakWordWidth/(o.fontSize||o.size)))),o.onUpdateCallback&&(a=o.onUpdateCallback.split(":"),this.enabled=!0,this.onUpdateCallback=i.createCallback(this,a.shift(),a)),o.backgroudnStyle&&(s=o.backgroudnStyle,r=o.lineStyle||{},e=s.scale||1,s.x||this.width,l=s.y||this.height/2,t=e*(s.width||this.width),i=e*(s.height||this.height),a=s.color||"0xFF0000",o=s.alpha||1,e=s.radius||0,s=r.lineColor||s.color||"0x000000",r=r.lineWidth||0,i=(new PIXI.Graphics).lineStyle(r,s,1).beginFill(a,o).drawRoundedRect(0,l,t,i,e),(e=this.presentation.createPresentation({type:"Container",anchorAlign:"br"},this,this.scope.model)).addChild(i),this.scope.parent.addChild(e))},sna.presentation.Text.prototype=new PIXI.Text(""),sna.presentation.Text.prototype.initPresentation=function(){this.updateDimensions();var e=this.scope.config;this.scope.model;e.hasBackground&&(e=this.scope.parent.getChildAt(this.scope.parent.children.length-1),this.background=e)},sna.presentation.Text.prototype.getTypewriterLength=function(){return this.text.length},sna.presentation.Text.prototype.setTint=function(e){this.tint=e},sna.presentation.Text.prototype.resetTint=function(){this.tint="0xFFFFFF"},sna.presentation.Text.prototype.breakWord=function(e,t){return e.match(new RegExp(".{1,"+t+"}","g")).join(" ")},sna.presentation.Text.prototype.setTypewriterLength=function(e){e=Math.ceil(e);e!==this.text.length&&this.scope.config.typewriterSound&&(this.typewriterSoundSkip?this.typewriterSoundSkip--:(this.sound.playSound(this.scope.config.typewriterSound,!1),this.typewriterSoundSkip=this.scope.config.typewriterSoundSkip||0)),this.text=this.originalText.substring(0,e)},sna.presentation.Text.prototype.config=function(){return this.scope.config},sna.presentation.Text.prototype.getText=function(e){var t,i=this.scope.config,n=e||void 0!==i.text?i.text:"";if((n="number"==typeof(n=n.constructor==Array?(t="",angular.forEach(n,function(e){e=this.presentation.parseValue(this,e);(e="number"==typeof e?this.getNumberAsText(e):e)instanceof Date&&(this.currentDate=e,e=this.getDateAsText(e,this.scope.config.isAmPm,this.scope.config.customGetter)),t+=e},this),t):this.presentation.parseValue(this,n))?this.getNumberAsText(n):n)&&this.scope.config.replace&&0<this.scope.config.replace.length)for(var s=0;s<this.scope.config.replace.length;s+=2)n=n.replace(this.scope.config.replace[s],this.presentation.parseValue(this,this.scope.config.replace[s+1]));return n=n&&(this.scope.config.toUpperCase?n.toUpperCase():n)},sna.presentation.Text.prototype.setTimer=function(){var e=this.getText().split(":"),t=+e[2],i=+e[1],e=+e[0];60==++t?(t="00",i++):t<10&&(t="0"+t),60==i?(i="00",e++):i<10&&(i="0"+i);t=(e=e<10?"0"+e:e)+":"+i+":"+t;this.scope.config.text=t,this.setText(t)},sna.presentation.Text.prototype.setText=function(e){this.text=e,this.scope.config.text=e,this.updateDimensions()},sna.presentation.Text.prototype.updatePresentation=function(e){var t,i;this.onUpdateCallback&&this.onUpdateCallback(),this.animation("$changeValue")?this.presentation.createAnimationTimeline("$changeValue",0,!1,!0,this):(this.text=this.getText(),e||sna.presentation.util.setupVisibility(this.presentation,this)),this.background&&(i=this.scope.config,t=this.background.scope.config,e=(i.backgroundPaddingL||i.backgroundPaddingH||i.backgroundPadding||0)+(this.width||0)+(i.backgroundPaddingR||i.backgroundPaddingH||i.backgroundPadding||0),i=(i.backgroundPaddingT||i.backgroundPaddingV||i.backgroundPadding||0)+(this.height||0)+(i.backgroundPaddingB||i.backgroundPaddingV||i.backgroundPadding||0),t.width=e,t.height=i,this.background.updatePresentation&&(this.background.updatePresentation(),this.parent.positionElement(this.background))),this.updateDimensions()},sna.presentation.Text.prototype.getnumber=function(){var e=this.scope.config,t=e.decimalSeparator,i=e.thousandSeparator,n=this.presentation.parseValue(this,e.decimals),s=this.presentation.parseValue(this,e.isCurrency),r=this.presentation.parseValue(this,e.showCurrencySign),e="";s&&(a=this.presentation.scope.game.config.currency,e=!1!==r?a.sign:"",o=a.sign_after,t=void 0!==a.decimal_sep?a.decimal_sep:t,i=void 0!==a.thousand_sep?a.thousand_sep:i,n=void 0!==a.decimals?a.decimals:n);var o,a=this.text;return s&&e&&n&&(e=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),a=a.replace(e,"")),s&&("string"==typeof o||o instanceof String)&&n&&(o=new RegExp("\\"+o,"g"),a=a.replace(o,"")),""!==i&&(i=new RegExp("\\"+i,"g"),a=a.replace(i,"")),n&&(t=new RegExp("\\"+t,"g"),a=a.replace(t,".")),a=a.trim(),a=parseFloat(a)},sna.presentation.Text.prototype.setnumber=function(e){this.frameskipCount?this.frameskipCount--:(e=this.getNumberAsText(e),this.text=e,this.frameskipCount=this.scope.config.skipTextFrames||0),this.updateDimensions()},sna.presentation.Text.prototype.getDateAsText=function(e,t,i){var n,s,r="";return r=t?(t=12<=(n=e.getHours())?"PM":"AM",(n=(n%=12)||12)+":"+(s=(s=e.getMinutes())<10?"0"+s:s)+" "+t):(n=(n=e.getHours()+"")<=9?"0"+n:n)+":"+(s=(s=e.getMinutes()+"")<=9?"0"+s:s),r=i?this.presentation.parseValue(this,i):r},sna.presentation.Text.prototype.updateTimePresentation=function(){var e=new Date;this.currentDate.getMinutes()!=e.getMinutes()&&this.updatePresentation()},sna.presentation.Text.prototype.getNumberAsText=function(e){var t,i,n,s=this.scope.config,r=s.decimalSeparator,o=s.thousandSeparator,a=this.presentation.parseValue(this,s.decimals),l=this.presentation.parseValue(this,s.isCurrency),h=this.presentation.parseValue(this,s.showCurrencySign);l&&(t=this.presentation.scope.game.config.currency,i=!1!==h?t.sign:"",n=t.sign_after,r=void 0!==t.decimal_sep?t.decimal_sep:r,o=void 0!==t.thousand_sep?t.thousand_sep:o,a=void 0!==t.decimals?t.decimals:a,s.coinValue&&(e*=this.presentation.parseValue(this,s.coinValue)||1));var s=Math.pow(10,a),c=p=parseFloat(Math.round(e*s)/s).toFixed(a),p=a?c.slice(-(a+1)):"";for(l&&a&&(p=p.substr(0,0)+r+p.substr(1)),a&&(c=c.slice(0,-(a+1)));p=c.slice(-3)+p,(c=c.slice(0,-3))&&(p=(o||"")+p),c;);return l&&(1==n?p+=i:p="string"==typeof n||n instanceof String?i+p+n:i+p),p},sna.presentation.Text.prototype.getscale=function(){return this.scale.x},sna.presentation.Text.prototype.setscale=function(e){this.scale.set(e,e)},sna.presentation.Text.prototype.setalpha=function(e){this.alpha=e},sna.presentation.Text.prototype.show=sna.presentation.util.show,sna.presentation.Text.prototype.hide=sna.presentation.util.hide,sna.presentation.Text.prototype.getX=sna.presentation.util.getX,sna.presentation.Text.prototype.setX=sna.presentation.util.setX,sna.presentation.Text.prototype.getY=sna.presentation.util.getY,sna.presentation.Text.prototype.setY=sna.presentation.util.setY,sna.presentation.Text.prototype.updateDimensions=sna.presentation.util.updateDimensions,sna.presentation.Text.prototype.log=function(e){log("TextLog","log",sna.log.FATAL,e)},sna.presentation.Text.prototype.setFillColor=function(e){this.style.fill=e,this.dirty=!0},sna.presentation.Text.prototype.setSize=function(e,t){this.style.fontSize=t?e*this.presentation.globalScale+"px":e+"px",this.dirty=!0,this.updateDimensions()},sna.presentation.Text.prototype.setDropShadow=function(e){this.style.dropShadow=e,this.dirty=!0},sna.presentation.Text.prototype.setDropShadowColor=function(e){this.style.dropShadowColor=e,this.dirty=!0},sna.presentation.Text.prototype.setDropShadowAngle=function(e){this.style.dropShadowAngle=e,this.dirty=!0},sna.presentation.Text.prototype.setDropShadowDistance=function(e){this.style.dropShadowDistance=e,this.dirty=!0},sna.presentation.Text.prototype.setDropShadowBlur=function(e){this.style.dropShadowBlur=e,this.dirty=!0},sna.presentation.Text.prototype.setStroke=function(e){this.style.stroke=e,this.dirty=!0},sna.presentation.Text.prototype.setFont=function(e){this.style.fontFamily=e,this.dirty=!0},sna.presentation.Text.prototype.setThickness=function(e){this.style.strokeThickness=Number(e*this.presentation.globalScale),this.dirty=!0},sna.presentation.Text.prototype.setPadding=function(e){this.style.padding=e,this.dirty=!0},sna.presentation.Text.prototype.animation=function(e,t){if(!t)return this.animations[e];this.animations[e]=t},sna.presentation.Text.prototype.updateLayout=function(){var e=this.scope.config;e.toUpperCaseFactory&&(e.toUpperCase=e.toUpperCaseFactory.call(this),this.text=this.getText()),e.xFactory&&(e.x=e.xFactory.call(this)),e.yFactory&&(e.y=e.yFactory.call(this)),e.fontSizeFactory&&(e.fontSize?(e.fontSize=e.fontSizeFactory.call(this),this.style.fontSize=Math.ceil(e.fontSize*this.presentation.globalScale)+"px"):(e.size=e.fontSizeFactory.call(this),this.style.fontSize=Math.ceil(e.size*this.presentation.globalScale)+"px")),e.scaleFactory&&(e.scale=e.scaleFactory.call(this),this.scale.set(e.scale,e.scale)),e.visibleFactory&&(e.visible=e.visibleFactory.call(this),e.visible?this.show():this.hide()),e.rotationFactory&&(e.rotation=e.rotationFactory.call(this),this.rotation=e.rotation),e.maxWidthFactory&&(this.maxWidth=e.maxWidthFactory.call(this)*this.presentation.globalScale,this.updateDimensions()),e.wordWrapWidthFactory&&(this.style.wordWrapWidth=e.wordWrapWidthFactory.call(this),this.updateDimensions()),e.anchorAlignFactory&&(e.anchorAlign=e.anchorAlignFactory.call(this),sna.presentation.util.setupAnchor(this.presentation,this))},sna.presentation.Text.prototype.destroyText=sna.presentation.Text.prototype.destroy,sna.presentation.Text.prototype.destroy=function(){var e=this.scope.config;e.autoUpdate&&e.autoUpdate!==!!e.autoUpdate&&this.iface.unregisterEventCallback(e.autoUpdate,this,this.updatePresentation),e.skipRedraw||this.iface.unregisterEventCallback("redraw",this,this.updatePresentation),this.iface.unregisterAutoUpdate(this),this.destroyText()},sna.presentation.TextFactory=function(e,t,i,n,s){var r=t.presentation,t=t.iface;return new sna.presentation.Text(e,r,t,i,n,s)},sna.module.core.controller(sna.presentation.TEXT,[sna.service.SCOPE,sna.service.MAIN,sna.service.PIXI_LOADER,sna.service.SOUND,sna.service.INTERVAL,sna.presentation.TextFactory]),sna.presentation.MOVIE_CLIP="MovieClip",sna.presentation.MovieClip=function(e,t,i){var n,s=e.config,r=[];if(s.sequenceAtlas)for(var o=s.sequenceStart||0;o<s.sequenceSize;o++){var a=s.sequencePrefix;void 0!==s.sequenceDigits?a+=o.pad(s.sequenceDigits):a+=o,void 0!==s.sequenceExtensions?a+=s.sequenceExtensions:a+=".png",r.push(i.resources[s.sequenceAtlas].textures[a])}else if(s.individual){s.sequenceSize;for(o=s.sequenceStart||0;o<s.sequenceSize;o++){var l=s.sequence+o,h=i.resources[l].texture;r.push(h)}}else{var c=i.resources[s.sequence];void 0===c&&log(this.name,"MovieClip",sna.log.FATAL,"Could not find sequence of name: "+s.sequence+". Hint: Check if it's included in assets.php file");var p,h=c.texture,u=s.sequenceWidth*t.globalScale||h.width/s.sequenceXSize,d=s.sequenceHeight*t.globalScale||h.height/s.sequenceYSize;for(u*s.sequenceXSize>h.width&&(u=Math.floor(u)),d*s.sequenceYSize>h.height&&(d=Math.floor(d)),o=0;o<s.sequenceYSize;o++)for(p=0;p<s.sequenceXSize&&!(s.sequenceSize&&o*s.sequenceXSize+p>=s.sequenceSize);p++){var m=new PIXI.Texture(h);m.frame=new PIXI.Rectangle(p*u,o*d,u-1e-5,d-1e-5),r.push(m)}}(PIXI.AnimatedSprite||PIXI.extras.MovieClip).call(this,r),this.scope=e,this.anchor.set(.5,.5),this.presentation=t,void 0!==s.scale?this.scale.set(s.scale,s.scale):void 0===s.scaleX&&void 0===s.scaleY||this.scale.set(s.scaleX||1,s.scaleY||1),void 0!==s.width&&(this.width=s.width),void 0!==s.height&&(this.height=s.height),void 0!==s.alpha&&(this.alpha=s.alpha),s.tint&&this.setTint(s.tint),sna.presentation.util.setupVisibility(this.presentation,this),void 0!==s.rotation&&(this.rotation=s.rotation),void 0!==s.blend&&(this.blendMode=PIXI.BLEND_MODES[s.blend]),sna.presentation.util.setupAnchor(t,this),void 0!==s.startFrame&&this.setframe(s.startFrame),void 0!==s.flipX&&!0===s.flipX&&(this.scale.y=-this.scale.y||-1),void 0!==s.flipY&&!0===s.flipY&&(this.scale.x=-this.scale.x||-1),void 0!==s.loop&&(this.loop=!1!==s.loop),null!=s.loopStartFrame&&(this.onLoop=function(){this.gotoAndPlay(s.loopStartFrame)}),null!=s.customLoop&&(n=s.customLoop,this.loop=!1,this.onFrameChange=function(){if(n.yoyo&&this.currentFrame==n.startFrame){if(n.yoyoHideOnEnd)return void this.hide();this.animationSpeed=-this.animationSpeed,this.gotoAndPlay(n.startFrame+1)}this.currentFrame==n.endFrame&&(n.yoyo?(this.animationSpeed=-n.yoyoAnimationSpeed||-this.animationSpeed,this.gotoAndPlay(n.endFrame-1)):this.gotoAndPlay(n.startFrame))}),void 0!==s.autoStart&&(this.animationSpeed=(s.autoStart.framerate||60)/60,"random"==s.autoStart.frame?this.gotoAndPlay(s.sequenceSize*Math.random()||0):this.gotoAndPlay(Number(s.autoStart.frame)||0)),void 0!==s.animationSpeed&&(this.animationSpeed=(s.animationSpeed||60)/60),s.allowOverrides&&(this.allowOverrides=s.allowOverrides),sna.presentation.util.setupX(t,this),sna.presentation.util.setupY(t,this),this.animations={}},PIXI.AnimatedSprite?sna.presentation.MovieClip.prototype=Object.create(PIXI.AnimatedSprite.prototype):sna.presentation.MovieClip.prototype=new PIXI.extras.MovieClip([{texture:void 0}]),sna.presentation.MovieClip.prototype.show=sna.presentation.util.show,sna.presentation.MovieClip.prototype.hide=sna.presentation.util.hide,sna.presentation.MovieClip.prototype.setX=sna.presentation.util.setX,sna.presentation.MovieClip.prototype.getX=sna.presentation.util.getX,sna.presentation.MovieClip.prototype.setY=sna.presentation.util.setY,sna.presentation.MovieClip.prototype.getY=sna.presentation.util.getY,sna.presentation.MovieClip.prototype.setLoop=function(e){this.loop=!1!==e},sna.presentation.MovieClip.prototype.loop=function(e){this.loop=!1!==e},sna.presentation.MovieClip.prototype.reverse=function(){this.animationSpeed=-1*this.animationSpeed},sna.presentation.MovieClip.prototype.setTint=function(e){this.tint=e},sna.presentation.MovieClip.prototype.resetTint=function(){this.tint="0xFFFFFF"},sna.presentation.MovieClip.prototype.updateLayout=function(){var e=this.scope.config;e.visibleFactory&&(e.visible=e.visibleFactory.call(this),e.visible?this.show():this.hide())},sna.presentation.MovieClip.prototype.config=function(){return this.scope.config},sna.presentation.MovieClip.prototype.animation=function(e,t){if(!t)return this.animations[e];this.animations[e]=t},sna.presentation.MovieClip.prototype.destroyPresentation=function(){this.stop()},sna.presentation.MovieClip.prototype.getscale=function(){return this.scale.x},sna.presentation.MovieClip.prototype.setscale=function(e){this.scale.set(e,e)},sna.presentation.MovieClip.prototype.getscaleX=function(){return this.scale.x},sna.presentation.MovieClip.prototype.setscaleX=function(e){var t=this.scale;this.scale.set(e,t.y)},sna.presentation.MovieClip.prototype.getscaleY=function(){return this.scale.y},sna.presentation.MovieClip.prototype.setscaleY=function(e){var t=this.scale;this.scale.set(t.x,e)},sna.presentation.MovieClip.prototype.getframe=function(){return this.currentFrame},sna.presentation.MovieClip.prototype.setframe=function(e){this.gotoAndStop(e)},sna.presentation.MovieClip.prototype.setalpha=function(e){this.alpha=e},sna.presentation.MovieClip.prototype.playFromStart=function(){this.gotoAndPlay(0)},sna.presentation.MovieClipFactory=function(e,t,i){return new sna.presentation.MovieClip(e,t,i)},sna.module.core.controller(sna.presentation.MOVIE_CLIP,["$scope",sna.service.PRESENTATION,sna.service.PIXI_LOADER,sna.presentation.MovieClipFactory]),sna.presentation.BUTTON="Button",sna.presentation.Button=function(e,t,i){sna.presentation.Container.call(this,e,t.presentation),this.loader=i,this.iface=t.iface,this.sound=t.sound,this.presentation=t.presentation,this._defaultButtonSpriteConfig={type:"Sprite"}},sna.presentation.Button.prototype=Object.create(sna.presentation.Container.prototype),sna.presentation.Button.prototype.initPresentationContainer=sna.presentation.Button.prototype.initPresentation,sna.presentation.Button.prototype.initPresentation=function(){this.buttonMode=!0,this.interactive=!0,this.setupToggleMode(),this.initButtonSpinePresentation(),this.initButtonSpritePresentation(),this.initButtonTextPresentation(),this.initIconPresentation(),this.initButtonGraphicsPresentation(),this.setConfigTextures(),this.setInitialButtonState(),this.initButtonEvents(),this.initPresentationContainer(),this.initInteractionArea(),this.scope.config.allowGlobalPress&&(this.allowGlobalPress=!0)},sna.presentation.Button.prototype.setupToggleMode=function(){var e=this.scope.config,t=e.type===sna.presentation.TOGGLE_BUTTON,i=void 0!==e.toggleable||void 0!==e.onToggle||void 0!==e.untoggleable||!1;this.toggleable=this.presentation.parseValue(this,t||i);i=this.presentation.parseValue(this,e.toggled)||!1;this.toggleState=this.presentation.parseValue(this,i),this.untoggleable=void 0!==e.untoggleable&&e.untoggleable},sna.presentation.Button.prototype.initButtonSpinePresentation=function(){var e,t,i,n,s,r,o,a=this.scope.config;a.spineConfig&&((e=this.presentation.createPresentation(a.spineConfig,this,this.scope.model)).enabled=!0,a.onHover?(t=a.onHover.split(":"),i=a.onHoverSound,n=this.iface.createCallback(e,t.shift(),t),this.on("pointerover",function(){i&&sound.playSound(i,!1),n()}.bind(this))):e.on("pointerover",this.onPointerOver.bind(this)),a.onLeave?(o=a.onLeave.split(":"),s=a.onLeaveSound,r=this.iface.createCallback(e,o.shift(),o),this.on("pointerout",function(){s&&sound.playSound(i,!1),r()}.bind(this))):e.on("pointerout",this.onPointerOut.bind(this)),this.addChild(e),this.spinePresentation=e,o=a.widthHeightDivider||1,a.width=e.width/o,a.height=e.height/o)},sna.presentation.Button.prototype.initButtonSpritePresentation=function(){var e=this.scope.config.buttonSpriteConfig||this._defaultButtonSpriteConfig;this.buttonSprite=this.presentation.createPresentation(e,this,this.scope.model),this.addChild(this.buttonSprite)},sna.presentation.Button.prototype.initButtonTextPresentation=function(){var e=this.scope.config;e.text&&(e.text.constructor===Array?e.text.forEach(function(e){this.initButtonText(e)},this):this.initButtonText(e.text))},sna.presentation.Button.prototype.initButtonText=function(e){"object"==typeof e?e.type=e.type||"Text":(delete(e=angular.copy(this.scope.config.initialConfig)).id,delete e.align,delete e.x,delete e.y,e.type="Text"),this.buttonText=this.presentation.createPresentation(e,this,this.scope.model),this.addChild(this.buttonText)},sna.presentation.Button.prototype.initIconPresentation=function(){var e=this.scope.config;if(e.icon){this.icon=[];var t=angular.copy(e.icon);if(e.icon.constructor===Array)for(var i=0;i<e.icon.length;i++)this.icon.push(this.initIcon(t[i]));else this.icon=this.initIcon(t)}},sna.presentation.Button.prototype.initIcon=function(e){e.type="Sprite";e=this.presentation.createPresentation(e,this,this.scope.model);return this.addChild(e),e},sna.presentation.Button.prototype.initButtonGraphicsPresentation=function(){var e=this.scope.config;e.graphics&&(this.buttonGraphics=this.presentation.createPresentation(e.graphics,this,this.scope.model),this.addChildAt(this.buttonGraphics,1))},sna.presentation.Button.prototype.resetTextures=function(){this.setConfigTextures()},sna.presentation.Button.prototype.setConfigTextures=function(){this.buttonNormalTexture=PIXI.Texture.EMPTY,this.buttonHoverTexture=PIXI.Texture.EMPTY,this.buttonPressTexture=PIXI.Texture.EMPTY,this.buttonDisabledTexture=PIXI.Texture.EMPTY,this.buttonToggledOnNormalTexture=PIXI.Texture.EMPTY,this.buttonToggledOnHoverTexture=PIXI.Texture.EMPTY,this.buttonToggledOffNormalTexture=PIXI.Texture.EMPTY,this.buttonToggledOffHoverTexture=PIXI.Texture.EMPTY,this.buttonToggledDisabledTexture=PIXI.Texture.EMPTY;var e=this.scope.config;if(e.mobileTextures&&this.iface.presentation.scope.layout.has("Mobile")&&(e.textures=e.mobileTextures),e.mobileAtlas&&this.iface.presentation.scope.layout.has("Mobile")&&(e.atlas=e.mobileAtlas),e.textures){if(e.textures=this.presentation.parseValue(this,e.textures),e.autoFillTextures&&1===e.textures.length){var t=0<e.textures[0].indexOf("_normal.png")?e.textures[0].indexOf("_normal.png"):e.textures[0].indexOf(".png"),i=e.textures[0].slice(0,t),n=["_hover.png","_pressed.png","_disabled.png"],s="";e.addMobilePrefix&&this.presentation.parseValue(e,e.addMobilePrefix)&&(e.textures[0]=(s="mobile_")+e.textures[0]);for(var r=0;r<n.length;r++)e.textures.push(s+i+n[r])}this.loader.resources[this.presentation.parseValue(this,e.atlas)]&&this.setButtonTexturesFromArray(e.textures,this.presentation.parseValue(this,e.atlas))}e.image&&this.setOneTextureState(this.loader.resources[e.image].texture),e.texture&&this.loader.resources[e.atlas]&&this.setOneTextureState(this.loader.resources[e.atlas].textures[e.texture]),this.updateButtonPresentation("normal")},sna.presentation.Button.prototype.setTexture=function(e,t){this.setOneTextureState(this.loader.resources[t].textures[e]),this.updateButtonTexture("normal")},sna.presentation.Button.prototype.setTextures=function(e,t,i){t=t||this.buttonSprite.scope.config.atlas,i?(e=e.split(","),this.setButtonTexturesFromArray(e,t)):this.setOneTextureState(this.loader.resources[t].textures[e]),this.updateButtonTexture("normal")},sna.presentation.Button.prototype.setOneTextureState=function(e){this.buttonNormalTexture=e,this.buttonToggledOnNormalTexture=e,this.buttonHoverTexture=e,this.buttonToggledOnHoverTexture=e,this.buttonPressTexture=e,this.buttonToggledOffNormalTexture=e,this.buttonDisabledTexture=e,this.buttonToggledOffHoverTexture=e,this.buttonDisabledTexture=e,this.buttonToggledDisabledTexture=e},sna.presentation.Button.prototype.setButtonTexturesFromArray=function(e,i){this.loader.resources[i]&&angular.forEach(e,function(e,t){switch(t){case 0:this.buttonNormalTexture=this.loader.resources[i].textures[e],this.buttonToggledOffNormalTexture=this.loader.resources[i].textures[e];break;case 1:this.buttonHoverTexture=this.loader.resources[i].textures[e],this.buttonToggledOffHoverTexture=this.loader.resources[i].textures[e];break;case 2:this.buttonPressTexture=this.loader.resources[i].textures[e],this.buttonToggledOnNormalTexture=this.loader.resources[i].textures[e];break;case 3:this.buttonDisabledTexture=this.loader.resources[i].textures[e],this.buttonToggledOnHoverTexture=this.loader.resources[i].textures[e];break;case 4:this.buttonDisabledTexture=this.loader.resources[i].textures[e],this.buttonToggledDisabledTexture=this.loader.resources[i].textures[e]}},this)},sna.presentation.Button.prototype.initInteractionArea=function(){var e,t=this.scope.config;(t.height&&t.width||t.areaWidth&&t.areaHeight)&&(i=t.height||t.areaHeight,e=t.width||t.areaWidth,this.buttonSprite.hitArea=new PIXI.Rectangle(-e/2,-i/2,e,i));var i=t.interactionArea;void 0!==i&&(n=i.map(function(e){return new PIXI.Point(e.x*this.presentation.globalScale-this.buttonSprite.width/2,e.y*this.presentation.globalScale-this.buttonSprite.height/2)},this),n=new PIXI.Polygon(n),this.buttonSprite.hitArea=n);var n=t.graphicsHitArea;void 0!==n&&"Ellipse"===n.variant&&(t=n.width,n=n.height,this.buttonSprite.hitArea=new PIXI.Ellipse(-t/2*this.presentation.globalScale,-n/2*this.presentation.globalScale,t/2,n/2))},sna.presentation.Button.prototype.updateButtonTextPresentation=function(e){if(void 0!==this.buttonText)for(var t=0;t<this.children.length;t++)if(-1!=this.children[t].scope.config.type.indexOf("Text")){var i=this.children[t];i.updatePresentation&&i.updatePresentation();var n=i.scope.config;if("normal"==e)n=this.toggleState&&n.toggleOn?n.toggleOn:n;else{if(this.toggleState)return;n=void 0!==n[e]?n[e]:n}n.font&&(i.style.fontFamily=n.font),n.size&&(i.style.fontSize=Math.ceil(n.size*this.presentation.globalScale)+"px"),"disabled"==e&&n.fillDisabled?i.style.fill=n.fillDisabled:i.style.fill=n.fill,n.stroke&&(i.style.stroke=n.stroke),void 0!==n.thickness&&(i.style.strokeThickness=n.thickness),void 0!==n.dropShadow&&(i.style.dropShadow=n.dropShadow,i.style.dropShadowColor=n.dropShadowColor||"black",i.style.dropShadowAngle=n.dropShadowAngle||Math.PI/4,i.style.dropShadowDistance=n.dropShadowDistance||5),i.dirty=!0}},sna.presentation.Button.prototype.updateIconPresentation=function(e){if(void 0!==this.icon)if("down"===(e="hover"===e?"mouseOver":e)&&(e="mouseOver"),this.icon.length)for(var t=0;t<this.icon.length;t++)this.icon[t]&&this.updateSingleIconPresentation(this.icon[t],e);else this.updateSingleIconPresentation(this.icon,e)},sna.presentation.Button.prototype.updateSingleIconPresentation=function(e,t){var i=e.scope.config;if("normal"===t)i=this.toggleState&&i.toggleOn?i.toggleOn:i;else{if(this.toggleState)return;i=void 0!==i[t]?i[t]:i}i.texture&&e.setTexture(i.texture,i.atlas||this.scope.config.atlas)},sna.presentation.Button.prototype.updateButtonPresentation=function(e){this.updateButtonTexture(e),this.updateButtonGraphics(e),this.updateIconPresentation(e),this.updateButtonTextPresentation(e)},sna.presentation.Button.prototype.updateButtonTexture=function(e){this.toggleable?("hover"===e&&(this.buttonSprite.texture=this.toggleState?this.buttonToggledOnHoverTexture:this.buttonToggledOffHoverTexture),"out"===e&&(this.buttonSprite.texture=this.toggleState?this.buttonToggledOnNormalTexture:this.buttonToggledOffNormalTexture),"normal"===e&&(this.buttonSprite.texture=this.toggleState?this.buttonToggledOnNormalTexture:this.buttonToggledOffNormalTexture),"disabled"===e&&(this.buttonSprite.texture=this.buttonToggledDisabledTexture),"disabled-normal"===e&&(this.buttonSprite.texture=this.buttonToggledDisabledTexture)):("down"===e&&(this.buttonSprite.texture=this.buttonPressTexture),"hover"===e&&(this.buttonSprite.texture=this.buttonHoverTexture),"out"===e&&(this.buttonSprite.texture=this.buttonNormalTexture),"normal"===e&&(this.buttonSprite.texture=this.buttonNormalTexture),"disabled"===e&&(this.buttonSprite.texture=this.buttonDisabledTexture),"disabled-normal"===e&&(this.buttonSprite.texture=this.buttonNormalTexture))},sna.presentation.Button.prototype.updateButtonGraphics=function(e){this.buttonGraphics&&(this.toggleable&&(e=this.toggleState?"toggleOn":"toggleOff"),this.buttonGraphics.scope.config.color=this.buttonGraphics.scope.config.states[e],this.buttonGraphics.updatePresentation())},sna.presentation.Button.prototype.setTextStyle=function(e,t){this.buttonText&&(this.buttonText.style[e]=t)},sna.presentation.Button.prototype.initButtonEvents=function(){this.presentation.scope.layout.has(sna.service.ENVIRONMENT_MOBILE)?(this.on("touchstart",this.onPointerDownHandler.bind(this)),this.on("touchendoutside",this.onPointerUpOutsideHandler.bind(this)),this.on("touchend",this.onPointerUpHandler.bind(this))):(this.on("pointerup",this.onPointerUpHandler.bind(this)),this.on("pointerupoutside",this.onPointerUpOutsideHandler.bind(this)),this.on("pointerdown",this.onPointerDownHandler.bind(this)),this.on("pointerover",this.onPointerOverHandler.bind(this)),this.on("pointerout",this.onPointerOutHandler.bind(this))),this.setupConfigCallbacks()},sna.presentation.Button.prototype.setupConfigCallbacks=function(){this.setupOnReleaseCallback(),this.setupOnToggleCallback(),this.setupOnDownCallback()},sna.presentation.Button.prototype.setupOnReleaseCallback=function(){var e,t=this.scope.config;t.onPress&&(e=t.onPress.split(":"),this.pressSound=this.presentation.parseValue(this,t.onPressSound),this.pressCallback=this.iface.createButtonCallback(this,e.shift(),e),this.setupOnReleaseOutsideCallback(e))},sna.presentation.Button.prototype.setupOnReleaseOutsideCallback=function(t){this.releaseOutside=function(){var e;this.onDownTimeoutMsThreshold&&(e=Date.now()-this.onDownTimeoutStart,this.onDownCanExecute=!0,e<this.onDownTimeoutMsThreshold&&window.clearTimeout(this.onDownTimeoutInterval)),this.supressEventPropagation?this.supressEventPropagation=null:this.wasDragged?this.wasDragged=!1:this.iface.createCallback(this,t.shift(),null)}},sna.presentation.Button.prototype.setupOnToggleCallback=function(){var e=this.scope.config;e.onToggle&&(e=e.onToggle.split(":"),this.pressCallback=this.iface.createButtonCallback(this,e.shift(),e))},sna.presentation.Button.prototype.setupOnDownCallback=function(){var e,t,i,n=this.scope.config;n.onDown&&(e=n.onDown.split(":"),t=n.onDownSound,i=this.iface.createCallback(this,e.shift(),e),this.onPointerDown=function(){this.supressEventPropagation||(t&&this.sound.playSound(t,!1),this.onDownCallBackTriggeredTime=Date.now(),i())},n.onDownTimeoutMsThreshold&&(this.onDownCanExecute=!0,this.onDownTimeoutStart=null,this.onDownTimeoutInterval=null,this.onDownTimeoutMsThreshold=n.onDownTimeoutMsThreshold))},sna.presentation.Button.prototype.setInitialButtonState=function(){var e=this.scope.config,t=this.presentation.parseValue(this,e.disabled||!1),e=this.presentation.parseValue(this,e.disabledNormal||!1);t?this.disable():e?this.disableNormal():this.enable()},sna.presentation.Button.prototype.onPointerDownHandler=function(e){e&&!this.scope.config.allowButtonEventPropagation&&e.stopPropagation(),this.scope.config.toggleDesktopFullScreen&&this.iface.toggleDesktopFullScreen(),this.onPointerDown&&(this.onDownTimeoutMsThreshold?this.onDownCanExecute&&(this.onDownCanExecute=!1,this.onDownTimeoutStart=Date.now(),this.onDownTimeoutInterval=window.setTimeout(this.onPointerDown.bind(this),this.onDownTimeoutMsThreshold)):this.onPointerDown()),this.enabled&&this.updateButtonPresentation("down")},sna.presentation.Button.prototype.onPointerUpOutsideHandler=function(e){this.enabled&&this.updateButtonPresentation("normal")},sna.presentation.Button.prototype.onPointerUpHandler=function(e){this.enabled&&this.updateButtonPresentation("normal"),this.onPointerUp&&this.onPointerUp()},sna.presentation.Button.prototype.onPointerUp=function(){this.release()},sna.presentation.Button.prototype.onPointerOverHandler=function(){this.onPointerOver&&this.onPointerOver(),this.onPointerOverAnimation()},sna.presentation.Button.prototype.onPointerOver=function(){var e,t;this.enabled&&(this.updateButtonPresentation("hover"),(t=this.scope.config).onHover&&(e=t.onHover.split(":"),t=t.onHoverSound,this.iface.createCallback(this,e.shift(),e)(),t&&this.sound.playSound(t,!1)))},sna.presentation.Button.prototype.onPointerOverAnimation=function(){var e=this.animations.$mouseOver;e&&(e.stop("$mouseOver"),this.presentation.deregisterAnimation("$mouseOver",e)),this.animations.$mouseOut&&this.presentation.createAnimationTimeline("$mouseOut",0,!1,!0,this)},sna.presentation.Button.prototype.onPointerOutHandler=function(){this.onPointerOut&&this.onPointerOut(),this.onPointerOutAnimation()},sna.presentation.Button.prototype.onPointerOut=function(){var e,t;this.enabled&&(this.updateButtonPresentation("out"),(t=this.scope.config).onLeave&&(e=t.onLeave.split(":"),t=t.onLeaveSound,this.iface.createCallback(this,e.shift(),e)(),t&&this.sound.playSound(t,!1)))},sna.presentation.Button.prototype.onPointerOutAnimation=function(){var e=this.animations.$mouseOut;e&&(e.stop("$mouseOut"),this.presentation.deregisterAnimation("$mouseOut",e)),this.animations.$mouseOver&&this.presentation.createAnimationTimeline("$mouseOver",0,!1,!0,this)},sna.presentation.Button.prototype.onToggle=function(){this.pressCallback&&this.pressCallback()},sna.presentation.Button.prototype.release=function(){var e;this.enabled&&(this.untoggleable&&this.toggleState||(this.onDownTimeoutMsThreshold&&(e=Date.now()-this.onDownTimeoutStart,this.onDownCanExecute=!0,e<this.onDownTimeoutMsThreshold&&window.clearTimeout(this.onDownTimeoutInterval)),this.supressEventPropagation?this.supressEventPropagation=null:this.wasDragged?this.wasDragged=!1:(this.processPressSound(),this.toggleable&&this.setToggleState(!this.toggleState),this.pressCallback&&this.pressCallback())))},sna.presentation.Button.prototype.processPressSound=function(){var e=!0;this.scope.config.dontPlayOnPressSoundOnDragged&&this.scope.model.spinButtonDragged&&(e=this.scope.model.spinButtonDragged=!1),this.pressSound&&e&&this.sound.playSound(this.pressSound,!1)},sna.presentation.Button.prototype.enable=function(){this.enabled=!0,this.updateButtonPresentation("normal")},sna.presentation.Button.prototype.disable=function(){this.enabled=!1,this.updateButtonPresentation("disabled")},sna.presentation.Button.prototype.disableNormal=function(){this.enabled=!1,this.updateButtonPresentation("disabled-normal")},sna.presentation.Button.prototype.setPressAction=function(e){this.pressCallback=e},sna.presentation.Button.prototype.setButtonText=function(){},sna.presentation.Button.prototype.hideInPortrait=function(){},sna.presentation.Button.prototype.updateToggleState=function(){this.toggleState=!this.toggleState,this.setToggleState(this.toggleState)},sna.presentation.Button.prototype.setToggleState=function(e){this.toggleable&&(this.toggleState=e,this.updateButtonPresentation("normal"))},sna.presentation.ButtonFactory=function(e,t,i){return new sna.presentation.Button(e,t,i)},sna.module.core.controller(sna.presentation.BUTTON,[sna.service.SCOPE,sna.service.MAIN,"PixiLoader",sna.presentation.ButtonFactory]),sna.presentation.TOGGLE_BUTTON="ToggleButton",sna.presentation.TEXT_BUTTON="TextButton",sna.module.core.controller(sna.presentation.TOGGLE_BUTTON,[sna.service.SCOPE,sna.service.MAIN,"PixiLoader",sna.presentation.ButtonFactory]),sna.module.core.controller(sna.presentation.TEXT_BUTTON,[sna.service.SCOPE,sna.service.MAIN,"PixiLoader",sna.presentation.ButtonFactory]),sna.presentation.GRAPHICS="Graphics",sna.presentation.Graphics=function(e,t){this.presentation=t.presentation,this.scope=e,PIXI.Graphics.call(this),this.iface=t.iface;t=e.config;t&&(sna.presentation.util.setupConfigHeight(this.presentation,this),sna.presentation.util.setupConfigWidth(this.presentation,this),e=1,t.reverseHeight&&(e=-1),t.height*=this.presentation.globalScale*e,t.width*=this.presentation.globalScale,t.color=t.color?t.color.toString().replace("#","0x"):"0x000000",t.color=Number(t.color),t.x*=this.presentation.globalScale,t.y*=this.presentation.globalScale,t.originalX=t.x,t.originalY=t.y,t.opaque&&this.setOpaque(t.opaque),t.allowOverrides&&(this.allowOverrides=t.allowOverrides),t.dontCatchClickEvents&&this.setHitArea({type:"Rectangle",x:0,y:0,width:0,height:0}),this.redraw(),t.hasBlur&&(e=new PIXI.filters.BlurFilter,this.filters=[e]),t.name&&(this.name=t.name)),this.animations={},sna.presentation.util.setupVisibility(this.presentation,this),sna.presentation.util.setupAlpha(this.presentation,this),sna.presentation.util.setupRotation(this.presentation,this),sna.presentation.util.setUpAngle(this.presentation,this),sna.presentation.util.setupRadius(this.presentation,this)},sna.presentation.Graphics.prototype=new PIXI.Graphics,sna.presentation.Graphics.prototype.show=sna.presentation.util.show,sna.presentation.Graphics.prototype.hide=sna.presentation.util.hide,sna.presentation.Graphics.prototype.setX=sna.presentation.util.setX,sna.presentation.Graphics.prototype.setY=sna.presentation.util.setY,sna.presentation.Graphics.prototype.setHitArea=function(e){"Rectangle"===e.type&&(this.hitArea?log(this.name,"setHitArea",sna.log.INFO,"Overriding hitArea that was already set."):this.hitArea=new PIXI.Rectangle(e.x,e.y,e.width,e.height))},sna.presentation.Graphics.prototype.setalpha=function(e){this.alpha=e},sna.presentation.Graphics.prototype.setOpaque=function(e){e?(this.iface.ui.makeInteractive(this),this.noPointer=!0,this.interactive=!0):(this.iface.ui.remove(this),this.interactive=!1)},sna.presentation.Graphics.prototype.setColor=function(e){var t=this.scope.config;e=e.toString().replace("#","0x"),e=Number(e),t.color=e,this.redraw()},sna.presentation.Graphics.prototype.redraw=function(){var e=this.scope.config;switch(e.variant){case"Rectangle":this.beginFill(e.color,1),this.lineStyle(e.lineWidth||0,e.lineColor||e.color,1),this.drawRect(0,0,e.width,e.height),this.endFill(),e.x=(e.originalX||0)-e.width/2,e.y=(e.originalY||0)-e.height/2;break;case"RoundedRectangle":this.lineStyle(e.lineWidth||0,e.lineColor||e.color,1),this.beginFill(e.color,1),this.drawRoundedRect(0,0,e.width,e.height,e.radius),this.endFill(),e.x=(e.originalX||0)-e.width/2,e.y=(e.originalY||0)-e.height/2;break;case"Line":var t=e.width||0,i=e.height||0;this.beginFill(e.color,1),this.lineStyle(5,e.color,1),this.moveTo(-t/2,-i/2),this.lineTo(t/2,i/2),this.endFill();break;case"PolyLine":var n=e.lineWidth*this.presentation.globalScale||0,s=angular.copy(e.points),r=s.shift();r.x=r.x*this.presentation.globalScale,r.y=r.y*this.presentation.globalScale,e.closed&&this.beginFill(e.color,1),this.lineStyle(e.lineWidth,e.color,1),this.moveTo(r.x,r.y),angular.forEach(s,function(e){e.x=e.x*this.presentation.globalScale,e.y=e.y*this.presentation.globalScale,this.lineTo(e.x,e.y)}.bind(this)),e.closed&&this.endFill();break;case"Circle":this.beginFill(e.color,1);n=void 0!==e.lineWidth?e.lineWidth:5;this.lineStyle(n,e.lineColor||e.color,1),this.drawCircle(0,0,e.radius*this.presentation.globalScale),this.endFill(),e.x=(e.originalX||0)-e.width/2,e.y=(e.originalY||0)-e.height/2;break;case"Arc":var n=void 0!==e.lineWidth?e.lineWidth:5,o=void 0!==e.fillColor?e.fillColor:16777215,a=void 0!==e.lineColor?e.lineColor:16777215,l=void 0!==e.lineAlpha?e.lineAlpha:1,t=void 0!==e.fillAlpha?e.fillAlpha:1,i=void 0!==e.radius?e.radius:10,r=void 0!==e.startAngle?e.startAngle:0,s=void 0!==e.endAngle?e.endAngle:Math.PI;e.setInDegrees&&(r=e.startAngle*(Math.PI/180),s=e.endAngle*(Math.PI/180)),e.filled&&this.beginFill(o,t),this.startAngle=r,this.endAngle=s,this.lineStyle(n,a,l),this.arc(0,0,i*this.presentation.globalScale,r,s);break;case"Ellipse":this.beginFill(e.color,1);n=void 0!==e.lineWidth?e.lineWidth:5;this.lineStyle(n,e.lineColor||e.color,1),this.drawEllipse(0,0,e.width*this.presentation.globalScale,e.height*this.presentation.globalScale),this.endFill(),e.x=(e.originalX||0)-e.width/2,e.y=(e.originalY||0)-e.height/2}},sna.presentation.Graphics.prototype.addToParent=function(){(this._savedParent||this.parent).addChild(this),this._savedMask&&(this.parent.mask=this)},sna.presentation.Graphics.prototype.removeFromParent=function(){this._savedParent=this.parent||this._savedParent,this.parent&&(this.parent.mask===this?(this._savedMask=!0,this.parent.mask=null):this._savedMask=!1,this.parent.removeChild(this))},sna.presentation.Graphics.prototype.updatePresentation=function(){this.clear(),this.redraw()},sna.presentation.Graphics.prototype.updateLayout=function(){var e=this.scope.config;e.configWidthFactory&&(e.width=e.configWidthFactory.call(this)*this.presentation.globalScale),e.configHeightFactory&&(e.height=e.configHeightFactory.call(this)*this.presentation.globalScale),e.visibleFactory&&(e.visible=e.visibleFactory.call(this),e.visible?this.show():this.hide()),this.updatePresentation()},sna.presentation.Graphics.prototype.animation=function(e,t){if(!t)return this.animations[e];this.animations[e]=t},sna.presentation.Graphics.prototype.setScaleY=function(e){var t=this.scale;this.scale.set(t.x,e)},sna.presentation.Graphics.prototype.getScaleY=function(){return this.scale.y},sna.presentation.Graphics.prototype.setEndAngle=function(e){this.scope.config.endAngle=+e,this.updatePresentation()},sna.presentation.Graphics.prototype.getEndAngle=function(){return this.scope.config.setInDegrees?180*this.endAngle/Math.PI:this.endAngle},sna.presentation.Graphics.prototype.setStartAngle=function(e){this.scope.config.startAngle=+e,this.updatePresentation()},sna.presentation.Graphics.prototype.getStartAngle=function(){return this.scope.config.setInDegrees?180*this.startAngle/Math.PI:this.startAngle},sna.presentation.Graphics.prototype.config=function(){return this.scope.config},sna.module.core.controller(sna.presentation.GRAPHICS,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.Graphics]),sna.presentation.IMAGE_NUMBER="ImageNumber",sna.presentation.ImageNumber=function(e,t,i){sna.presentation.Container.call(this,e,t.presentation),this.anchorHandler=this.presentation.createPresentation({type:"Container"},this,this.scope.model),this.addChild(this.anchorHandler);var n,s,r=this.scope.config,o=t.iface;this.iface=o,this.sound=t.sound,this.mute=!0,this.game=t.game,this.atlas=r.atlas,this.loader=i,this.number=0,this.digits=[],r.decimals=r.decimals||0,r.updateOnEvent&&this.iface.registerEventCallback(r.updateOnEvent,this,this.updatePresentation),this.decimals=this.presentation.parseValue(this,r.decimals),this.decimalFactor=Math.pow(10,this.decimals),r.onSetNumber&&(i=r.onSetNumber.split(":"),n=o.createCallback(this,i.shift(),i),this.enabled=!0,this.onSetNumberCallback=function(){n()}),this.skipFrames=e.config.skipFrames||0,r&&r.digitWidth&&angular.forEach(r.digitWidth,function(e,t){r.digitWidth[t]*=this.presentation.globalScale},this),r&&r.charWidth&&angular.forEach(r.charWidth,function(e,t){r.charWidth[t]*=this.presentation.globalScale},this),r.text&&(r.text.constructor==Array?(s="",angular.forEach(r.text,function(e){s+=this.presentation.parseValue(this,e)},this),this.setnumber(s)):this.setnumber(this.presentation.parseValue(this,r.text))),sna.presentation.util.setupMaxWidth(this.presentation,this),sna.presentation.util.setupMaxHeight(this.presentation,this),r.scaleX&&(this.scale.x=r.scaleX),r.scaleY&&(this.scale.y=r.scaleY),r.allowOverrides&&(this.allowOverrides=r.allowOverrides),r.autoUpdate&&(r.autoUpdate===!!r.autoUpdate?o.registerAutoUpdate(this):o.registerEventCallback(r.autoUpdate,this,this.updatePresentation)),"VCD"==this.iface.scope.game.currency.name&&(this.showCurrencySign=!1,this.scope.config.showCurrencySign=!1)},sna.presentation.ImageNumber.prototype=Object.create(sna.presentation.Container.prototype),sna.presentation.ImageNumber.prototype.allowedCurrencys=["EUR","GBP","USD","HUF","RON","CAD","SEK","NOK","CHF","DKK","COP"],sna.presentation.ImageNumber.prototype.initPresentation=function(){this.updateDimensions(),this.setAlignment()},sna.presentation.ImageNumber.prototype.updateDimensions=sna.presentation.util.updateDimensions,sna.presentation.ImageNumber.prototype.setTint=function(e){this.scope.config.tint=e,this.updatePresentation()},sna.presentation.ImageNumber.prototype.updatePresentation=function(){var t,e=this.scope.config;e.text&&(e.text.constructor==Array?(t="",angular.forEach(e.text,function(e){t+=this.presentation.parseValue(this,e)},this),this.setnumber(t)):this.setnumber(this.presentation.parseValue(this,e.text))),e.overrideMaxWidthY&&e.maxWidth&&this.width==e.maxWidth*this.presentation.globalScale&&(this.y=this.presentation.parseValue(this,e.overrideMaxWidthY)*this.presentation.globalScale)},sna.presentation.ImageNumber.prototype.getscale=function(){return this.scale.x},sna.presentation.ImageNumber.prototype.setscale=function(e){this.scope.config.setscale=e=void 0!==e?e:1,this.maxWidth?(this.width=void 0,this.scale.set(e,e),this.width>=this.maxWidth&&(this.width=this.maxWidth,this.scale.y=this.scale.x)):this.maxHeight?(this.width=void 0,this.scale.set(e,e),this.height>this.maxHeight&&(this.width*=this.maxHeight/this.height,this.style.wordWrap&&this.style.wordWrapWidth&&(this.style.wordWrapWidth*=this.maxHeight/this.height),this.height=this.maxHeight)):this.scale.set(e,e)},sna.presentation.ImageNumber.prototype.setalpha=function(e){this.alpha=e},sna.presentation.ImageNumber.prototype.getnumber=function(){return this.number},sna.presentation.ImageNumber.prototype.getNumberAsText=function(e){var t,i,n=this.scope.config,s=n.decimalSeparator,r=n.thousandSeparator,o=this.presentation.parseValue(this,n.decimals),a=this.presentation.parseValue(this,n.isCurrency),l=this.presentation.parseValue(this,n.showCurrencySign);a&&(h=this.presentation.scope.game.config.currency,this.scope.config.useCurrency&&(h=this.game.scope.game.currency),t=!1!==(l=-1==this.allowedCurrencys.indexOf(h.name)?!1:l)?h.sign:"",i=h.sign_after,n.dontShowDecimals||(s=void 0!==h.decimal_sep?h.decimal_sep:s,r=void 0!==h.thousand_sep?h.thousand_sep:r,o=void 0!==h.decimals?h.decimals:o));var h=Math.pow(10,o),c=p=parseFloat(Math.round(e*h)/h).toFixed(o),p=o?c.slice(-(o+1)):"";for(a&&o&&(p=p.substr(0,0)+s+p.substr(1)),o&&(c=c.slice(0,-(o+1)));p=c.slice(-3)+p,(c=c.slice(0,-3))&&(p=(r||"")+p),c;);return p=a&&this.showCurrencySign?i?p+""+t:t+""+p:p},sna.presentation.ImageNumber.prototype.enableSound=function(){this.mute=!1},sna.presentation.ImageNumber.prototype.disableSound=function(){this.mute=!0},sna.presentation.ImageNumber.prototype.setnumber=function(e){var t,i=this.scope.config;if(this.number=e,this.skipFrames)this.skipFrames--;else{this.skipFrames=i.skipFrames||0,this.anchorHandler.removeChildren(),this.digits=[],this.isCurrency=this.presentation.parseValue(this,i.isCurrency),this.showCurrencySign=this.presentation.parseValue(this,i.showCurrencySign),this.decimals=this.presentation.parseValue(this,i.decimals),this.isCurrency&&(t=this.presentation.scope.game.config.currency,this.decimals=t.decimals),this.decimalFactor=Math.pow(10,this.decimals);var n=e;"number"!=typeof e&&isNaN(Number(e))||(this.isCurrency&&i.coinValue&&(e*=this.presentation.parseValue(this,i.coinValue)||1),n=this.getNumberAsText(e),i.removeDecimalZeros&&(n=""+parseFloat((Math.round(e*this.decimalFactor)/this.decimalFactor).toFixed(this.decimals))),void 0===this._oldValue&&(this._oldValue=n),i.onValueChangedSound&&this._oldValue!==n&&!this.mute&&(this.sound.playSoundOnce(i.onValueChangedSound),this._oldValue=n));var s,r,o=0;if((n=this.isCurrency&&i.replaceCurrency&&null!=i.replaceCurrency[t.sign]?n.replace(t.sign,i.replaceCurrency[t.sign]):n)&&n.length){for(s=0;s<n.length;s++)(r=this.createDigit(n[s])).x=o,o+=this.digitWidth(n[s]),this.digits[s]=r,this.anchorHandler.addChild(r);for(s=0;s<n.length;s++)(r=this.digits[s]).x-=o/2,r.x+=this.digitWidth(n[s])/2}this.updateDimensions(),this.setAlignment(),i.onSetNumber&&this.onSetNumberCallback()}},sna.presentation.ImageNumber.prototype.setAlignment=function(){var e=this.scope.config;if(void 0!==e&&void 0!==e.anchorAlign)switch(e.anchorAlign){case sna.presentation.ALIGN_LEFT:this.anchorHandler.x=this.anchorHandler.width/2,this.anchorHandler.scope.config.x=this.anchorHandler.width/2;break;case sna.presentation.ALIGN_RIGHT:this.anchorHandler.x=-this.anchorHandler.width/2,this.anchorHandler.scope.config.x=-this.anchorHandler.width/2;break;case sna.presentation.ALIGN_TOP:this.anchorHandler.y=this.anchorHandler.height/2,this.anchorHandler.scope.config.y=this.anchorHandler.height/2;break;case sna.presentation.ALIGN_BOTTOM:this.anchorHandler.y=-this.anchorHandler.height/2+(e.anchorBottomOffset*this.presentation.globalScale||0),this.anchorHandler.scope.config.y=-this.anchorHandler.height/2+(e.anchorBottomOffset*this.presentation.globalScale||0);break;default:log(this,"setAlignment",sna.log.DEBUG,"Anchor align of type: "+e.anchorAlign+" is not yet supported.")}},sna.presentation.ImageNumber.prototype.digitWidth=function(e){var t=0,t="."===e?this.scope.config.digitWidth[10]||0:-1=="0123456789".indexOf(e)?this.scope.config.charWidth[e]||0:this.scope.config.digitWidth[e]||0;return(t=this.scope.config.skipDigitWidth&&-1<this.scope.config.skipDigitWidth.indexOf(e)?0:t)||log(this.name,"digitWidth",sna.log.WARNING,"Could not find digit width for char: "+e+".\nHint: Check if it's defined in ImageNumber configuration"),t=this.loader.resources[this.atlas]&&this.scope.config.chars&&this.scope.config.chars[e]&&!this.loader.resources[this.atlas].data.frames[this.scope.config.chars[e]]?0:t},sna.presentation.ImageNumber.prototype.updateLayout=function(){var e=this.scope.config;e.xFactory&&(e.x=e.xFactory.call(this)),e.yFactory&&(e.y=e.yFactory.call(this)),e.scaleFactory&&(e.scale=e.scaleFactory.call(this),this.scale.set(e.scale,e.scale)),e.visibleFactory&&(e.visible=e.visibleFactory.call(this),e.visible?this.show():this.hide()),e.rotationFactory&&(e.rotation=e.rotationFactory.call(this),this.rotation=e.rotation),e.maxWidthFactory&&(this.maxWidth=e.maxWidthFactory.call(this)*this.presentation.globalScale,this.updateDimensions())},sna.presentation.ImageNumber.prototype.createDigit=function(e){var t="."===e?this.scope.config.numbers[10]:(-1=="0123456789".indexOf(e)?this.scope.config.chars:this.scope.config.numbers)[e];null==this.loader.resources[this.atlas]&&log(this.name,"createDigit",sna.log.FATAL,"Could not find resource of name: "+this.atlas+".\nHint: Check if it's included in assets.php file");t=this.loader.resources[this.atlas].textures[t],e=new PIXI.Sprite(t);return this.scope.config.tint&&(e.tint=Number(this.scope.config.tint)),e.anchor.set(.5,.5),e},sna.presentation.ImageNumber.prototype.destroyImageNumberContainer=sna.presentation.ImageNumber.prototype.destroy,sna.presentation.ImageNumber.prototype.destroy=function(e){var t=this.scope.config;t.autoUpdate&&t.autoUpdate!==!!t.autoUpdate&&this.iface.unregisterEventCallback(t.autoUpdate,this,this.updatePresentation),t.updateOnEvent&&this.iface.unregisterEventCallback(t.updateOnEvent,this,this.updatePresentation),this.destroyImageNumberContainer(e)},sna.presentation.ImageNumberFactory=function(e,t,i){return new sna.presentation.ImageNumber(e,t,i)},sna.module.core.controller(sna.presentation.IMAGE_NUMBER,[sna.service.SCOPE,sna.service.MAIN,sna.service.PIXI_LOADER,sna.presentation.ImageNumberFactory]),sna.presentation.BITMAP_FONT="BitmapFont",sna.presentation.BITMAP_FONT_BASE_PATH="bitmapFont/",sna.presentation.BitmapFont=function(e,t,i){sna.presentation.Container.call(this,e,t.presentation),this.anchorHandler=this.presentation.createPresentation({type:"Container"},this,this.scope.model),this.addChild(this.anchorHandler);var n,s,r=this.scope.config,o=t.iface;this.iface=o,this.sound=t.sound,this.mute=!0,this.game=t.game,this.loader=i,this.atlas=r.atlas,this.loader.resources[this.atlas]||(this.atlas=sna.presentation.BITMAP_FONT_BASE_PATH+this.atlas),this.number=0,this.digits=[],r.decimals=r.decimals||0,r.updateOnEvent&&this.iface.registerEventCallback(r.updateOnEvent,this,this.updatePresentation),this.decimals=this.presentation.parseValue(this,r.decimals),this.decimalFactor=Math.pow(10,this.decimals),r.onSetNumber&&(i=r.onSetNumber.split(":"),n=o.createCallback(this,i.shift(),i),this.enabled=!0,this.onSetNumberCallback=function(){n()}),this.skipFrames=e.config.skipFrames||0,r&&r.digitWidth&&angular.forEach(r.digitWidth,function(e,t){r.digitWidth[t]*=this.presentation.globalScale},this),r&&r.charWidth&&angular.forEach(r.charWidth,function(e,t){r.charWidth[t]*=this.presentation.globalScale},this),r.text&&(r.text.constructor==Array?(s="",angular.forEach(r.text,function(e){s+=this.presentation.parseValue(this,e)},this),this.setnumber(s)):this.setnumber(this.presentation.parseValue(this,r.text))),r.scaleX&&(this.scale.x=r.scaleX),r.scaleY&&(this.scale.y=r.scaleY),sna.presentation.util.setupVisibility(this.presentation,this),sna.presentation.util.setupScale(this.presentation,this),sna.presentation.util.setupFontSize(this.presentation,this),sna.presentation.util.setupMaxWidth(this.presentation,this),sna.presentation.util.setupMaxHeight(this.presentation,this),r.size&&(isNaN(r.size)?this.setscale(100*this.presentation.parseValue(this,r.size)*.01):this.setscale(.01*r.size)),r.allowOverrides&&(this.allowOverrides=r.allowOverrides),r.autoUpdate&&(r.autoUpdate===!!r.autoUpdate?o.registerAutoUpdate(this):o.registerEventCallback(r.autoUpdate,this,this.updatePresentation)),this.setAlignment(),"VCD"==this.iface.scope.game.currency.name&&(this.showCurrencySign=!1,this.scope.config.showCurrencySign=!1)},sna.presentation.BitmapFont.prototype=Object.create(sna.presentation.ImageNumber.prototype),sna.presentation.BitmapFont.prototype.allowedCurrencys=["EUR","GBP","USD","HUF","RON","CAD","SEK","NOK","CHF","COP","DKK"],sna.presentation.BitmapFont.prototype.createDigit=function(e){null==this.loader.resources[this.atlas]&&log(this.name,"createDigit",sna.log.FATAL,"Could not find resource of name: "+this.atlas+".\nHint: Check if it's included in assets.php file"),i=this.loader.resources[this.atlas]&&this.loader.resources[this.atlas].bitmapFont&&this.loader.resources[this.atlas].bitmapFont.chars[e.charCodeAt()]?this.loader.resources[this.atlas].bitmapFont.chars[e.charCodeAt()].texture:PIXI.Texture.EMPTY;var t=e,e=new PIXI.Sprite(i);this.scope.config.tint&&(e.tint=Number(this.scope.config.tint)),e.anchor.set(.5,1);var i=this.scope.config.customAnchor;return i&&i[t]&&e.anchor.set(i[t].x,i[t].y),e},sna.presentation.BitmapFont.prototype.checkCase=function(e){var t=e.toUpperCase();return e.toLowerCase()===t?-1:e===t?1:0},sna.presentation.BitmapFont.prototype.setTint=function(e){this.scope.config.tint=e,this.updatePresentation()},sna.presentation.BitmapFont.prototype.digitWidth=function(e){var t=0;return this.loader.resources[this.atlas].bitmapFont&&!this.loader.resources[this.atlas].bitmapFont.chars[e.charCodeAt()]?t=this.scope.config.defaultCharWidth||0:this.loader.resources[this.atlas].bitmapFont&&(t=this.loader.resources[this.atlas].bitmapFont.chars[e.charCodeAt()].texture.width),0==t&&" "==e&&(t=this.scope.config.spaceWidth||this.loader.resources[this.atlas].bitmapFont.chars["0".charCodeAt()].texture.width/2),("."==e||this.scope.config.trimWidth&&0==this.checkCase(e))&&(t=this.scope.config.dotWidth||t/1.5),(t=","==e||this.scope.config.trimWidth&&0==this.checkCase(e)?this.scope.config.commaWidth||t/1.5:t)||log(this.name,"digitWidth",sna.log.WARNING,"Could not find digit width for char: "+e+".\nHint: Check if it's defined in ImageNumber configuration"),this.scope.config.charWidth&&this.scope.config.charWidth[e]?t*this.scope.config.charWidth[e]:t*(this.scope.config.widthPercentage||1)},sna.presentation.BitmapFont.prototype.setText=function(e){return this.setnumber(e)},sna.presentation.BitmapFont.prototype.setnumber=function(e,t){var i=this.scope.config,n=i.hasLetters,t=t||!1;if(this.number=e,this.skipFrames)this.skipFrames--;else{this.skipFrames=i.skipFrames||0,this.anchorHandler.removeChildren(),this.digits=[],this.isCurrency=this.presentation.parseValue(this,i.isCurrency),this.showCurrencySign=this.presentation.parseValue(this,i.showCurrencySign),this.scope.model.currency&&-1==this.allowedCurrencys.indexOf(this.scope.model.currency.name)&&(this.showCurrencySign=!1),this.decimals=this.presentation.parseValue(this,i.decimals),this.isCurrency&&(s=this.presentation.scope.game.config.currency,this.decimals=s.decimals),this.decimalFactor=Math.pow(10,this.decimals);var s,r=e;"number"==typeof e||!isNaN(Number(e))&&!n?(this.isCurrency&&i.coinValue&&(e*=this.presentation.parseValue(this,i.coinValue)||1),r=this.getNumberAsText(e,t),void 0===this._oldValue&&(this._oldValue=r),i.onValueChangedSound&&this._oldValue!==r&&!this.mute&&(this.sound.playSoundOnce(i.onValueChangedSound),this._oldValue=r)):isNaN(Number(e))&&n&&(-1<e.indexOf("x")||-1<e.indexOf("X"))&&(-1==(n=e.indexOf(s="x"))&&(n=e.indexOf("X"),s="X"),r=this.getNumberAsText(r.replace(r[n],""),t),r=0==n?s+r:r+s,void 0===this._oldValue&&(this._oldValue=r));var o,a,l=0;if(r&&r.length){for(r.length<2&&this.scope.config.addLeadingZero&&(r="0"+r.toString()),o=0;o<r.length;o++){if(0<=r[o].indexOf("\n")||0<=r[o].indexOf("\r"))return;(a=this.createDigit(r[o])).x=l,l+=this.digitWidth(r[o]),this.digits.push(a),this.anchorHandler.addChild(a)}for(o=0;o<r.length;o++)(a=this.digits[o]).x-=l/2,a.x+=this.digitWidth(r[o])/2}this.updateDimensions(),this.setAlignment(),i.onSetNumber&&this.onSetNumberCallback()}},sna.presentation.BitmapFont.prototype.getNumberAsText=function(e,t){var i,n,t=t||!1,s=this.scope.config,r=s.decimalSeparator,o=s.thousandSeparator,a=this.presentation.parseValue(this,s.decimals),l=this.presentation.parseValue(this,s.isCurrency),h=this.presentation.parseValue(this,s.showCurrencySign),c=this.presentation.parseValue(this,s.spaceWidth);this.scope.model.currency&&"TRY"==this.scope.model.currency.name&&(this.showCurrencySign=!1),l&&(p=this.presentation.scope.game.config.currency,this.scope.config.useCurrency&&!t?p=this.game.scope.game.currency:t&&s.overrideCurrencyForFunMode&&(p={defaultCurrency:"EUR",name:"EUR",code:"EUR",sign:"",decimals:2,decimal_sep:".",thousand_sep:",",sign_after:!1}),"TRY"==(i=!1!==h?p.sign:"")&&(i=""),n=p.sign_after,s.dontShowDecimals||(r=void 0!==p.decimal_sep?p.decimal_sep:r,o=void 0!==p.thousand_sep?p.thousand_sep:o,a=void 0!==p.decimals?p.decimals:a));var p=Math.pow(10,a),u=d=parseFloat(Math.round(e*p)/p).toFixed(a),d=a?u.slice(-(a+1)):"";for(l&&a&&(d=d.substr(0,0)+r+d.substr(1)),a&&(u=u.slice(0,-(a+1)));d=u.slice(-3)+d,(u=u.slice(0,-3))&&(d=(o||"")+d),u;);c=c?" ":"";return d=l&&this.showCurrencySign?n?d+c+i:i+c+d:d},sna.presentation.BitmapFont.prototype.setAlignment=function(){var e=this.scope.config;if(void 0!==e&&void 0!==e.anchorAlign)switch(e.anchorAlign){case sna.presentation.ALIGN_LEFT:this.anchorHandler.x=this.anchorHandler.width/2,this.anchorHandler.scope.config.x=this.anchorHandler.width/2;break;case sna.presentation.ALIGN_RIGHT:this.anchorHandler.x=-this.anchorHandler.width/2,this.anchorHandler.scope.config.x=-this.anchorHandler.width/2,this.anchorHandler.y=this.anchorHandler.scope.config.y,this.anchorHandler.scope.config.y=this.anchorHandler.scope.config.y;break;case sna.presentation.ALIGN_TOP:this.anchorHandler.y=this.anchorHandler.height/2,this.anchorHandler.scope.config.y=this.anchorHandler.height/2;break;case sna.presentation.ALIGN_BOTTOM:this.anchorHandler.y=-this.anchorHandler.height/2+(e.anchorBottomOffset*this.presentation.globalScale||0),this.anchorHandler.scope.config.y=-this.anchorHandler.height/2+(e.anchorBottomOffset*this.presentation.globalScale||0);break;case sna.presentation.ALIGN_TOP_LEFT:this.anchorHandler.x=this.anchorHandler.width/2,this.anchorHandler.scope.config.x=this.anchorHandler.width/2,this.anchorHandler.y=this.anchorHandler.height/2,this.anchorHandler.scope.config.y=this.anchorHandler.height/2;break;case sna.presentation.ALIGN_BOTTOM_LEFT:this.anchorHandler.x=this.anchorHandler.width/2,this.anchorHandler.scope.config.x=this.anchorHandler.width/2,this.anchorHandler.y=-this.anchorHandler.height/2+(e.anchorBottomOffset*this.presentation.globalScale||0),this.anchorHandler.scope.config.y=-this.anchorHandler.height/2+(e.anchorBottomOffset*this.presentation.globalScale||0);break;case sna.presentation.ALIGN_TOP_RIGHT:this.anchorHandler.x=-this.anchorHandler.width/2,this.anchorHandler.scope.config.x=-this.anchorHandler.width/2,this.anchorHandler.y=this.anchorHandler.height/2,this.anchorHandler.scope.config.y=this.anchorHandler.height/2;break;case sna.presentation.ALIGN_BOTTOM_RIGHT:this.anchorHandler.x=-this.anchorHandler.width/2,this.anchorHandler.scope.config.x=-this.anchorHandler.width/2,this.anchorHandler.y=-this.anchorHandler.height/2+(e.anchorBottomOffset*this.presentation.globalScale||0),this.anchorHandler.scope.config.y=-this.anchorHandler.height/2+(e.anchorBottomOffset*this.presentation.globalScale||0);break;default:log(this,"setAlignment",sna.log.DEBUG,"Anchor align of type: "+e.anchorAlign+" is not yet supported.")}},sna.presentation.BitmapFont.prototype.setSkin=function(e){this.activeSkin=this.skins[e],this.activeSkinDigitWidth=this.skinDigitWidth[e]},sna.presentation.BitmapFontFactory=function(e,t,i){return new sna.presentation.BitmapFont(e,t,i)},sna.module.core.controller(sna.presentation.BITMAP_FONT,[sna.service.SCOPE,sna.service.MAIN,sna.service.PIXI_LOADER,sna.presentation.BitmapFontFactory]),sna.presentation.SKINNABLE_IMAGE_NUMBER="SkinnableImageNumber",sna.presentation.SkinnableImageNumber=function(e,t,i){sna.presentation.ImageNumber.call(this,e,t,i);var n=e.config;if(void 0!==n.skins&&(this.skins=n.skins),void 0!==n.skinDigitWidth&&(this.skinDigitWidth=n.skinDigitWidth),n&&n.skinDigitWidth)for(var s=0;s<n.skinDigitWidth.length;s++)for(var r=0;r<n.skinDigitWidth[s].length;r++)n.skinDigitWidth[s][r]*=this.presentation.globalScale},sna.presentation.SkinnableImageNumber.prototype=Object.create(sna.presentation.ImageNumber.prototype),sna.presentation.SkinnableImageNumber.prototype.digitWidthBase=sna.presentation.ImageNumber.prototype.digitWidth,sna.presentation.SkinnableImageNumber.prototype.digitWidth=function(e){return void 0!==this.activeSkinDigitWidth?"."===e?this.activeSkinDigitWidth[10]:","===e?this.activeSkinDigitWidth[11]:-1=="0123456789".indexOf(e)?this.loader.resources[this.atlas]&&this.loader.resources[this.atlas].data.frames[this.scope.config.chars[e]]&&this.scope.config.charWidth[e]||0:this.activeSkinDigitWidth[e]||0:this.digitWidthBase(e)},sna.presentation.SkinnableImageNumber.prototype.createDigitBase=sna.presentation.ImageNumber.prototype.createDigit,sna.presentation.SkinnableImageNumber.prototype.createDigit=function(e){return void 0!==this.activeSkin&&(this.atlas=this.activeSkin),this.createDigitBase(e)},sna.presentation.SkinnableImageNumber.prototype.setSkin=function(e){this.activeSkin=this.skins[e],this.activeSkinDigitWidth=this.skinDigitWidth[e]},sna.presentation.SkinnableImageNumberFactory=function(e,t,i){return new sna.presentation.SkinnableImageNumber(e,t,i)},sna.module.core.controller(sna.presentation.SKINNABLE_IMAGE_NUMBER,[sna.service.SCOPE,sna.service.MAIN,sna.service.PIXI_LOADER,sna.presentation.SkinnableImageNumberFactory]),sna.presentation.SLIDER="Slider",sna.presentation.Slider=function(e,t){sna.presentation.Container.call(this,e,t.presentation),this.iface=t.iface,this.button=null,this.game=t.game,this.area=null,this.enabled=!0},sna.presentation.Slider.prototype=new sna.presentation.Container({},{}),sna.presentation.Slider.prototype.initPresentationContainer=sna.presentation.Slider.prototype.initPresentation,sna.presentation.Slider.prototype.initPresentation=function(){this.initPresentationContainer(),this.initBackgroundButtonPresentation(),this.initSliderButtonPresentation(),this.initModel(),this.initMask()},sna.presentation.Slider.prototype.initModel=function(){var e,t,i,n=this.scope,s=(n.model,n.config),r=s.value,o=s.min,a=s.max,l=s.size,h=s.options;this.scope.config.sizeIncludeHandle&&(l-=this.button.height||0),void 0!==h?(n=this.presentation.parseValue(this,h),this.options=n,e=this.presentation.parseValue(this,r),h=Math.max(n.indexOf(e),0),(t=this.button)&&(t.scope.config,i=(h/(n.length-1)-.5)*l*this.presentation.globalScale,s.vertical?t.setY(i):t.setX(i))):void 0!==r&&(e=this.presentation.parseValue(this,r),t=this.button,e=Math.max(e,o),e=Math.min(e,a),t&&(t.scope.config,i=l*this.presentation.globalScale*((e-o)/(a-o)-.5),s.vertical?t.setY(i):t.setX(i)))},sna.presentation.Slider.prototype.initMask=function(){var e=this.scope.config,t=e.size/this.presentation.globalScale;e.maskArea&&(e={type:"Graphics",variant:"Rectangle",width:t,height:e.height,x:0,y:0,anchorAlign:"l",color:"0XFFFFFF"},e=this.presentation.createPresentation(e,this,this.scope.model),this.area.mask=e,this.area.addChild(e))},sna.presentation.Slider.prototype.updateMask=function(e){var t,i,n=this.scope.config.vertical;this.area&&this.area.mask&&(t=this.area.mask,i=(n?this.button.y:this.button.x)/this.scope.config.size+.5,n?(t.scope.config.height=this.scope.config.size*i,t.scope.config.originalY=-this.scope.config.size/2+t.height/2):(t.scope.config.width=this.scope.config.size*i,t.scope.config.originalX=-this.scope.config.size/2+t.width/2),t.updatePresentation())},sna.presentation.Slider.prototype.initSliderButtonPresentation=function(){var e=this.game.getParameterValue("tinkUpdateButtonsDisabled"),t=this.scope,i=t.model,n=t.config,s=n.button,r=n.vertical,o=n.options;s&&(n.onChange&&(t=n.onChange.split(":"),this.setter=this.iface.createCallback(this,t.shift(),t)),i=this.presentation.createPresentation(s,this,i),this.addChild(i),this.button=i,this.button.allowOverrides=!0,this.button.canReleaseOutside=!0,this.button.followCursorRules={disableX:!!r,disableY:!r,notifyChange:!0},r?(this.button.followCursorRules.minY=-(n.size*this.presentation.globalScale)/2,this.button.followCursorRules.maxY=n.size*this.presentation.globalScale/2):(this.button.followCursorRules.minX=-(n.size*this.presentation.globalScale)/2,this.button.followCursorRules.maxX=n.size*this.presentation.globalScale/2),o&&(o=this.presentation.parseValue(this,o),this.button.followCursorRules.stepCount=o.length,this.button.followCursorRules.stepSize=n.size*this.presentation.globalScale/(o.length-1)),e?(this.button.on("pointerdown",this.onSliderButtonPressed.bind(this)),this.button.on("pointerup",this.onSliderButtonReleased.bind(this)),this.button.on("pointerupoutside",this.onSliderButtonReleased.bind(this))):(this.button.press=function(){this.followCursor()}.bind(this),this.button.setPressAction(this.onSliderValueChange.bind(this,!0))),this.button.onFollow=this.onSliderValueChange.bind(this,!1))},sna.presentation.Slider.prototype.onSliderButtonPressed=function(){this.followCursor()},sna.presentation.Slider.prototype.followCursor=function(){this.button.isFollowingCursor=!0,(this.game.getParameterValue("tinkUpdateButtonsDisabled")?this.iface:this.iface.ui).followCursor(this.button)},sna.presentation.Slider.prototype.onSliderButtonReleased=function(){this.unfollowCursor()},sna.presentation.Slider.prototype.unfollowCursor=function(){this.button.isFollowingCursor=!1,(this.game.getParameterValue("tinkUpdateButtonsDisabled")?this.iface:this.iface.ui).unfollowCursor(this.button)},sna.presentation.Slider.prototype.initBackgroundButtonPresentation=function(){var e=this.scope,t=e.model,i=e.config,n=i.area,s=i.vertical,e=i.enableClickOnBackground;n&&(s?(n.areaWidth=n.width||i.width,n.areaHeight=n.height||i.size):(n.areaWidth=n.width||i.size,n.areaHeight=n.height||i.height),t=this.presentation.createPresentation(n,this,t),this.addChild(t),this.area=t,"Graphics"!=n.type&&e&&t.setPressAction(this.onSliderBackgroundClick.bind(this)))},sna.presentation.Slider.prototype.onSliderBackgroundClick=function(){var e,t;t=this.game.getParameterValue("tinkUpdateButtonsDisabled")?(r=(e=this.iface.getPointerCoords()).y,e.x):(r=(t=this.iface.ui.pointers[0]).y,t.x);for(var i={x:0,y:0,sx:1,sy:1},n=this,s=[];n;)s.push(n),n=n.parent;for(var r,s=s.reverse(),o=0;o<s.length;o++)n=s[o],i.x+=(n.x||0)*i.sx,i.y+=(n.y||0)*i.sy,i.sx*=n.scale.x||1,i.sy*=n.scale.y||1;this.scope.config.isVertical?(r=(r-i.y)/i.sy,this.button.y=r,this.button.scope.config.y=this.button.y):(a=(t-i.x)/i.sx,this.button.x=a,this.button.scope.config.x=this.button.x);var a=this.getSliderValue();log(this,"onSliderBackgroundClick",sna.log.DEBUG,"new Slider value: "+a),this.updateMask(a),this.setter&&this.setter(a)},sna.presentation.Slider.prototype.onSliderValueChange=function(e){e&&this.unfollowCursor(),this.scope.config.vertical?this.button.scope.config.y=this.button.y:this.button.scope.config.x=this.button.x;e=this.getSliderValue();log(this,"onSliderBackgroundClick",sna.log.DEBUG,"new Slider value: "+e),this.updateMask(e),this.setter&&this.setter(e)},sna.presentation.Slider.prototype.getSliderValue=function(){var e=this.scope.config,t=e.vertical,i=e.options,n=e.size,s=Math.pow(10,e.decimals||0);if(i){this.options=this.options||this.presentation.parseValue(this,optionsConfig);i=Math.round((this.options.length-1)*(this.button.x/n/this.presentation.globalScale+.5));return this.options[i],this.options[i]}n=t?this.button.y/(n*this.presentation.globalScale)+.5:this.button.x/(n*this.presentation.globalScale)+.5,n=e.min+(e.max-e.min)*n;return Math.round(n*s)/s},sna.module.core.controller(sna.presentation.SLIDER,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.Slider]),sna.presentation.SCROLLABLE_CONTAINER="ScrollableContainer",sna.presentation.ScrollableContainer=function(e,t){sna.presentation.Container.call(this,e,t.presentation),this.iface=t.iface,this.veiw=t.iface.veiw,this.game=t.game,this.container=null,this.content=null,this.slider=null,this.inFocus=!1,this.isScrollNeeded=!0},sna.presentation.ScrollableContainer.prototype=Object.create(sna.presentation.Container.prototype),sna.presentation.ScrollableContainer.prototype.initPresentationContainer=sna.presentation.ScrollableContainer.prototype.initPresentation,sna.presentation.ScrollableContainer.prototype.initPresentation=function(){this.updateConfig(),this.initPresentationContainer(),this.container=new PIXI.Container,this.addChild(this.container),this.initMask(),this.initContent(),this.initSlider(),this.hideExcessiveComponents()},sna.presentation.ScrollableContainer.prototype.hideExcessiveComponents=function(){var e;this.isScrollNeeded||(this.slider.hide(),this.graph.hide(),this.container.mask.hide(),this.container.mask=null,void 0!==(e=this.scope.config.backgroundBarId)&&this.presentation.getById(e).hide())},sna.presentation.ScrollableContainer.prototype.updateConfig=function(){var e,t,i=this.scope.config;i.maxPortraitHeight&&(e=i.maxPortraitHeightMargin||0,t=2*this.presentation.parseValue(this,"@view.y.b.-"+e),this.presentation.scope.layout.has("Landscape")&&(t=2*this.presentation.parseValue(this,"@view.x.r.-"+e)),i.slider.size=t,i.slider.area.height=t,i.mask.height=t,i.content.scrollPadding=t)},sna.presentation.ScrollableContainer.prototype.initContent=function(){var e,t=this.game.getParameterValue("tinkUpdateButtonsDisabled"),i=this.scope.config.content;if(i){i.autoHeight?(e=this.presentation.createPresentation(i,this,this.scope.model),i.scrollPaddingPortrait&&this.presentation.scope.layout.has("Portrait")&&(i.scrollPadding=i.scrollPaddingPortrait),i.scrollPadding&&i.scrollPadding.dynamic&&(e.height<2030?i.scrollPadding=i.scrollPadding.default:i.scrollPadding=i.scrollPadding.higerHeight),s={type:"Graphics",variant:"Rectangle",color:"0X000000",width:i.width||1500,height:e.height/this.presentation.globalScale+(i.scrollPadding||1e3),alpha:0},r=this.presentation.createPresentation(s,e,this.scope.model),e.addChild(r),this.graph=r):e=this.presentation.createPresentation(i,this,this.scope.model),this.content=e,this.container.addChild(e);var n=this.content.height,s=-n/2+this.maskHeight,r=-s;if(Math.abs(s)<20)return void(this.isScrollNeeded=!1);this.iface.ui.makeInteractive(this.content),t&&(this.content.interactive=!0),i.noPointer&&(this.content.noPointer=!0),this.content.anchor={x:.5,y:.5},this.content.allowOverrides=!0,this.content.canReleaseOutside=!0,this.content.followCursorRules={offsetX:0,offsetY:-1e3,disableX:!0,disableY:!1,minY:s,maxY:r,notifyChange:!0},t?this.presentation.scope.layout.has(sna.service.ENVIRONMENT_MOBILE)?(this.content.on("touchstart",this.onContentPressed.bind(this)),this.content.on("touchend",this.onContentDrag.bind(this,!0)),this.content.on("touchendoutside",this.onContentDrag.bind(this,!0))):(this.content.on("pointerdown",this.onContentPressed.bind(this)),this.content.on("pointerup",this.onContentDrag.bind(this,!0)),this.content.on("pointerupoutside",this.onContentDrag.bind(this,!0))):(this.content.over=function(){},this.content.press=this.onContentPressed.bind(this),this.content.release=this.onContentDrag.bind(this,!0)),this.content.onFollow=this.onContentDrag.bind(this,!1),this.scope.config.useWheelScroll&&(t?(this.content.on("pointerover",this.onContentOver.bind(this)),this.content.on("pointerout",this.onContentOut.bind(this))):(this.content.over=this.onContentOver.bind(this),this.content.out=this.onContentOut.bind(this)),this.scrollDelta=void 0===this.scope.config.scrollDelta?100*this.presentation.globalScale:this.scope.config.scrollDelta*this.presentation.globalScale,this.iface.view.addEventListener("wheel",this.onWheelHandler.bind(this),!1))}n=e.height,e.y=n/2-this.maskHeight,this.content.scope.config.y=this.content.y},sna.presentation.ScrollableContainer.prototype.onContentPressed=function(){for(var e=(this.game.getParameterValue("tinkUpdateButtonsDisabled")?this.iface.getPointerCoords():this.iface.ui.pointers[0]).y,t={x:1,y:1},i=this;i;)i.scale&&(t.x*=i.scale.x,t.y*=i.scale.y),i=i.parent;log(this,"content.press",sna.log.DEBUG,"y:"+this.content.y+", gy:"+this.getGlobalPosition().y+", py:"+e),this.content.followCursorRules.offsetX=0,this.content.followCursorRules.offsetY=this.content.y+(this.getGlobalPosition().y-e)/t.y,this.followCursor()},sna.presentation.ScrollableContainer.prototype.followCursor=function(){(this.game.getParameterValue("tinkUpdateButtonsDisabled")?this.iface:this.iface.ui).followCursor(this.content)},sna.presentation.ScrollableContainer.prototype.onContentOver=function(){this.inFocus=!0},sna.presentation.ScrollableContainer.prototype.onContentOut=function(){this.inFocus=!1},sna.presentation.ScrollableContainer.prototype.onWheelHandler=function(e){var t,i,n;this.inFocus&&(e.preventDefault(),i=-(t=this.content.height/2-this.maskHeight),n=e.deltaY<0?1:-1,e=void 0===this.scrollDelta?e.deltaY*this.presentation.globalScale:this.scrollDelta*n,(n=this.content.y+e)<=t&&i<=n?(this.content.y+=e,this.content.scope.config.y=this.content.y):(t<n&&(this.content.y=t),n<i&&(this.content.y=i)),this.slider.initModel())},sna.presentation.ScrollableContainer.prototype.onContentDrag=function(e){this.slider.initModel(),this.content.scope.config.y=this.content.y,e&&(this.unfollowCursor(),log(this,"onContentDrag",sna.log.DEBUG,"Follow update -> "+Array.prototype.slice.call(arguments).join(",")))},sna.presentation.ScrollableContainer.prototype.unfollowCursor=function(){(this.game.getParameterValue("tinkUpdateButtonsDisabled")?this.iface:this.iface.ui).unfollowCursor(this.content)},sna.presentation.ScrollableContainer.prototype.getPosition=function(){if(!this._initialized)return this._initialized=!0,0;var e=this.content.height/2-this.maskHeight;return(this.content.y-e)/(-e-e)},sna.presentation.ScrollableContainer.prototype.initSlider=function(){var e=this.scope.config.slider;e&&(e.value="@parent.getPosition",e=this.presentation.createPresentation(e,this,this.scope.model),this.addChild(e),(this.slider=e).setter=function(e){var t=this.content.height/2-this.maskHeight;this.content.y=t+(-t-t)*e,this.content.scope.config.y=this.content.y}.bind(this))},sna.presentation.ScrollableContainer.prototype.initMask=function(){var e=this.scope.config.mask;e&&(e=this.presentation.createPresentation(e,this,this.scope.model),this.addChild(e),this.container.mask=e,this.maskHeight=e.scope.config.height)},sna.presentation.ScrollableContainer.prototype.resetPosition=function(){var e=this.content.height;this.content.y=e/2-this.maskHeight,this.slider.initModel()},sna.module.core.controller(sna.presentation.SCROLLABLE_CONTAINER,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.ScrollableContainer]),sna.presentation.SPINE_CONTAINER="SpineContainer",sna.presentation.SpineContainer=function(e,t,i){sna.presentation.Container.call(this,e,t.presentation);var n,s,r,o,i=t.loader.pixiLoader,e=this.scope.config,i=i.resources[this.presentation.parseValue(this,e.spine)];this.iface=t.iface,this.spine=new PIXI.spine.Spine(i.spineData),this.spine.skeleton.setToSetupPose(),this.sound=t.sound,this.genTexture=null,e.skin&&(e.skin=this.presentation.parseValue(this,e.skin),this.spine.spineData.findSkin(e.skin)&&this.setSkin(e.skin)),this.spine.update(0),this.addChild(this.spine),e.onStart&&(this.enabled=!0,s=e.onStart.split(":"),n=t.iface.createCallback(this,s.shift(),s),this.spine.state.addListener({start:function(e){n()}.bind(this)})),e.onComplete&&(this.enabled=!0,s=e.onComplete.split(":"),r=t.iface.createCallback(this,s.shift(),s),this.spine.state.addListener({complete:function(e){r()}.bind(this)})),e.mask&&(e.mask.isMask=!0,o=this.presentation.createPresentation(e.mask,this,this.scope.model),this.addChild(o)),e.blurred&&((o=new PIXI.filters.BlurFilter).blurX=e.blurred.x||0,o.blurY=e.blurred.y||5,this.filters=[o])},sna.presentation.SpineContainer.prototype=Object.create(sna.presentation.Container.prototype),sna.presentation.SpineContainer.prototype.initPresentationContainer=sna.presentation.SpineContainer.prototype.initPresentation,sna.presentation.SpineContainer.prototype.initPresentation=function(){this.initPresentationContainer();var e,t=this.scope.config;t.useGlobalScale&&(this.scale.x*=this.presentation.globalScale,this.scale.y*=this.presentation.globalScale),t.useGlobalScaleSpine&&(this.spine.scale.x*=this.presentation.globalScale,this.spine.scale.y*=this.presentation.globalScale),void 0!==t.scaleX&&(e=t.skipGlobalScale?1:this.presentation.globalScale,this.scale.x=t.scaleX*e),void 0!==t.scaleY&&(e=t.skipGlobalScale?1:this.presentation.globalScale,this.scale.y=t.scaleY*e),t.swapSlots&&0<t.swapSlots.length&&this.swapSlots(t),t.tint&&this.setTint(t.tint),this.spine&&this.spine.spineData&&this.spine.spineData.animations&&(this.spineAnimations={},this.spine.spineData.animations.forEach(function(e){this.spineAnimations[e.name.replace(/ /g,"_")]=e.name},this)),this.setInitialAnimation()},sna.presentation.SpineContainer.prototype.swapSlots=function(e){for(var t=0;t<e.swapSlots.length;t+=2)this.swapSlot(e[e.swapSlots[t+1]]||{type:"Container"},e.swapSlots[t])},sna.presentation.SpineContainer.prototype.swapSlot=function(e,t){this.swappedSlots||(this.swappedSlots={}),this.swappedSlots[t]=this.presentation.createPresentation(e,this,this.scope.model),sna.presentation.util.addToSpineSlot(this.swappedSlots[t],this,t,!0)},sna.presentation.SpineContainer.prototype.setInitialAnimation=function(){var s=this.scope.config;"object"==typeof s.initialAnimation&&null!==s.initialAnimation?(s.initialAnimation.name=this.presentation.parseValue(this,s.initialAnimation.name),s.initialAnimation.name&&this.hasAnimation(s.initialAnimation.name)&&(this.spine.initialAnimation=!0,s.initialAnimation.loop&&void 0!==s.initialAnimation.loopDelay?(s.initialAnimation.loopDelay=this.presentation.parseValue(this,s.initialAnimation.loopDelay),this.gotoAndPlay(s.initialAnimation.name,!1,s.initialAnimation.timeScale||1),this.spine.state.addListener({complete:function(e){var t,i=new this.presentation.timeline,n=s.initialAnimation.loopAnimations;n&&n.animations&&n.animations.length?(n.random?t=Math.floor(Math.random()*n.animations.length):(t=n.animations.indexOf(this.lastAnimation)+1,null==animations[t]&&(t=0)),i.call(this.gotoAndPlay,[n.animations[t],!1,s.initialAnimation.timeScale||1],this,"+="+s.initialAnimation.loopDelay)):i.call(this.gotoAndPlay,[s.initialAnimation.name,!1,s.initialAnimation.timeScale||1],this,"+="+s.initialAnimation.loopDelay)}.bind(this)})):(this.gotoAndPlay(s.initialAnimation.name,!!s.initialAnimation.loop,s.initialAnimation.timeScale||1),s.initialAnimation.play||(s.initialAnimation.goToEnd?this.gotoAndStop(this.getAnimationDuration(s.initialAnimation.name)):null!=s.initialAnimation.goToFrame&&this.gotoAndStop(s.initialAnimation.goToFrame))),s.initialAnimation.sound&&s.initialAnimation.sound.name&&this.sound.sounds[s.initialAnimation.sound.name]&&this.sound.playSound(s.initialAnimation.sound.name,s.initialAnimation.sound.loop||!1))):s.initialAnimation&&(s.initialAnimation=this.presentation.parseValue(this,s.initialAnimation),this.hasAnimation(s.initialAnimation)&&(this.spine.initialAnimation=!0,this.gotoAndPlay(s.initialAnimation),this.gotoAndStop(0))),s.printBones&&this.spine.skeleton.slots.forEach(function(e){},this),s.hideBones&&this.presentation.parseValue(this,s.hideBones)&&s.hideBonesList&&this.hideSpecificBones(s.hideBonesList),s.updateTickOnInit&&this.spine.updateTick(1),s.forceTickUpdate&&this.setForceTickUpdate(s.forceTickUpdate)},sna.presentation.SpineContainer.prototype.changeSlotTextures=function(e){for(var t=Object.keys(e),i=0;i<t.length;i++){var n=t[i];this.changeSlotTexture(e[n],n)}},sna.presentation.SpineContainer.prototype.changeSlotTexture=function(e,t){this.genTexture&&this.genTexture.destroy(!0);var i=this.presentation.createPresentation(e,this.parent.parent,this.scope.model);this.genTexture=this.presentation.renderer.generateTexture(i);var n,s=this.genTexture.width,r=this.genTexture.height;e.optional&&e.optional.scale&&(n=1,"object"==typeof e.optional.scale&&e.optional.scale.dynamic?-1!=this.presentation.iface.scope.layout.layoutTags.indexOf("Portrait")&&e.optional.scale["Mobile,Portrait"]?n=e.optional.scale["Mobile,Portrait"]:e.optional.scale.default&&(n=e.optional.scale.default):n=e.optional.scale,s*=n,r*=n),this.spine.hackTextureBySlotName(t,this.genTexture,{width:s,height:r}),i.destroy()},sna.presentation.SpineContainer.prototype.updateDigit=function(e,t){var i=this.scope.config.changeSlotTextures[e];i.text=t,this.changeSlotTexture(i,e)},sna.presentation.SpineContainer.prototype.setForceTickUpdate=function(e){"boolean"==typeof e&&(this.spine.forceTickUpdate=e),"string"==typeof e&&(this.spine.forceTickUpdate="true"==e)},sna.presentation.SpineContainer.prototype.hideSpecificBones=function(e){this.setBonesVisibility(e,!1)},sna.presentation.SpineContainer.prototype.showSpecificBones=function(e){this.setBonesVisibility(e,!0)},sna.presentation.SpineContainer.prototype.setBonesVisibility=function(e,t){(e.constructor===Array?e:[e]).forEach(function(e){e=this.spine.skeleton.findBone(e);e&&(this.setBonePropertyValue(e,"scaleX",t?1:0),this.setBonePropertyValue(e,"active",t))},this)},sna.presentation.SpineContainer.prototype.setBonePropertyValue=function(e,t,i){e[t]=i},sna.presentation.SpineContainer.prototype.setSkin=function(e){this.spine.spineData.findSkin(e)&&(this.spine.skeleton.setSkin(null),this.spine.skeleton.setSkinByName(e))},sna.presentation.SpineContainer.prototype.gotoAndPlayTimeline=function(e,t,i,n){var s=new this.presentation.timeline;return s.call(this.gotoAndPlay,[e,t,i,n],this),sna.debug.logJsDelays&&console.log("js delay from timeline: "+this.getAnimationDuration(e,i)),s.set({},{},this.getAnimationDuration(e,i)),s},sna.presentation.SpineContainer.prototype.gotoAndPlay=function(e,t,i,n){var s=this.spine.state;this.spine.skeleton;void 0!==e&&e||log(this.name,"playSpineAnimation",sna.log.FATAL,"Spine inline config does not have animationName: ",config),this.scope.config.initialAnimation&&this.scope.config.initialAnimation.sound&&(this.scope.config.initialAnimation.name!=e?this.scope.config.initialAnimation.sound.name&&this.sound.sounds[this.scope.config.initialAnimation.sound.name]&&this.sound.stopSound(this.scope.config.initialAnimation.sound.name):this.scope.config.initialAnimation.sound.name&&this.sound.sounds[this.scope.config.initialAnimation.sound.name]&&this.sound.playSound(this.scope.config.initialAnimation.sound.name,this.scope.config.initialAnimation.sound.loop||!1)),t=void 0!==t&&t,i=void 0!==i?i:1,n=void 0!==n?n:0,s&&(s.timeScale=i,s.setAnimation(n,e,t,0),this.lastAnimation=e)},sna.presentation.SpineContainer.prototype.gotoAndStop=function(e){var t=this.spine,i=this.spine.state;void 0!==e?(t.autoUpdate=!1,t.update(e),i.timeScale=0,t.autoUpdate=!0):i.timeScale=0,this.scope.config.initialAnimation&&this.scope.config.initialAnimation.sound&&this.scope.config.initialAnimation.name==this.lastAnimation&&this.scope.config.initialAnimation.sound.name&&this.sound.sounds[this.scope.config.initialAnimation.sound.name]&&this.sound.stopSound(this.scope.config.initialAnimation.sound.name)},sna.presentation.SpineContainer.prototype.gotoAndPlayMultipleAnimations=function(e,t,i,n){this.spine.state.timeScale=1,this.spine.stateData.setMixByName?this.spine.stateData.setMixByName(e,t,n):this.spine.stateData.setMix&&this.spine.stateData.setMix(e,t,n),this.spine.state.setAnimation(0,e,i),this.spine.state.addAnimation(1,t,i,n)},sna.presentation.SpineContainer.prototype.resume=function(e){this.spine;this.spine.state.timeScale=1},sna.presentation.SpineContainer.prototype.getAnimationDuration=function(e,t){return t=t||1,this.spine.spineData.findAnimation(e)?this.spine.spineData.findAnimation(e).duration/t:1.5},sna.presentation.SpineContainer.prototype.gotoAnimationAndStop=function(e,t){this.spine.initialAnimation=!0,this.gotoAndPlay(e),this.gotoAndStop(t)},sna.presentation.SpineContainer.prototype.gotoAnimationEnd=function(e){this.gotoAnimationAndStop(e,this.getAnimationDuration(e))},sna.presentation.SpineContainer.prototype.gotoAnimationStart=function(e){this.gotoAnimationAndStop(e,1)},sna.presentation.SpineContainer.prototype.hasAnimation=function(e){return this.spine.state.hasAnimation(e)},sna.presentation.SpineContainer.prototype.setBonePosition=function(e,t,i){this.setBoneOptions(e,t,i)},sna.presentation.SpineContainer.prototype.setBoneOptions=function(t,i,e){i=i||{},this.spine.spineData.bones.filter(function(e){return t==e.name},this).forEach(function(t){Object.keys(i).forEach(function(e){t[e]=i[e]})},this),e||this.spine.skeleton.setToSetupPose()},sna.presentation.SpineContainer.prototype.setBonePositionTimeline=function(t,i,e){i=i||{};var n=new this.timeline;return this.spine.spineData.bones.filter(function(e){return t==e.name},this).forEach(function(e){void 0!==i.x&&n.to(e,5,{x:i.x,y:i.y},"start")},this),n},sna.presentation.SpineContainer.prototype.changeAttachment=function(t,i,e){e=this.spine.spineData.findSkin(e||"default").attachments.filter(function(e){return e.hasOwnProperty(t)},this);if(e.length)try{e.forEach(function(e){e[t].region.originalTexture||(e[t].region.originalTexture=e[t].region.texture.clone()),e[t].region.texture=i},this)}catch(e){}},sna.presentation.SpineContainer.prototype.playRandomAnimations=function(t,e,i){var n=this;t&&"null"!=t?"string"==typeof t&&(t=t.split(",")):t=this.spine.spineData.animations.map(function(e){return e.name}),"null"!=e&&"false"!=e||(e=!1),Boolean(e)?(i&&"null"!=i||(i=1e4),this.randomAnimationInterval=setInterval(function(){var e=Math.floor(Math.random()*t.length);n.gotoAndStop(0),n.gotoAndPlay(t[e])},parseInt(i))):(i=Math.floor(Math.random()*t.length),n.gotoAndPlay(t[i]))},sna.presentation.SpineContainer.prototype.resetSpine=function(){this.spine.spineData.defaultSkin.attachments.forEach(function(e){angular.forEach(e,function(e){e.region&&e.region.originalTexture&&(e.region.texture=e.region.originalTexture)},this)}),this.spine.parent.removeChild(this.spine),this.destroyPresentation();var e=this.presentation.main.loader.pixiLoader.resources[this.scope.config.spine];this.spine=new PIXI.spine.Spine(e.spineData),this.addChild(this.spine)},sna.presentation.SpineContainer.prototype.getAttachment=function(t,e){return this.spine.spineData.findSkin(e||"default").attachments.filter(function(e){return e.hasOwnProperty(t)},this)},sna.presentation.SpineContainer.prototype.hideSpineBone=function(e){var t=this.spine.skeleton.findBone(e);t?t.active=!1:((e=this.spine.skeleton.findSlot(e)).bone&&(e.bone.active=!1),e.bone.scaleX=0)},sna.presentation.SpineContainer.prototype.showSpineBone=function(e){var t=this.spine.skeleton.findBone(e);t?t.active=!0:((e=this.spine.skeleton.findSlot(e)).bone&&(e.bone.active=!0),e.bone.scaleX=1)},sna.presentation.SpineContainer.prototype.setTint=function(e){this.spine.tint=e},sna.presentation.SpineContainer.prototype.setDimmedTint=function(){this.setTint("0x808080")},sna.presentation.SpineContainer.prototype.setRegularTint=function(){this.setTint("0xFFFFFF")},sna.presentation.SpineContainer.prototype.animationTransition=function(e,t,i,n){this.spine.state.timeScale=1,this.spine.stateData.setMixByName?this.spine.stateData.setMixByName(e,t,n):this.spine.stateData.setMix&&this.spine.stateData.setMix(e,t,n),this.spine.state.setAnimation(0,e,!1),this.spine.state.addAnimation(0,t,!0,n)},sna.presentation.SpineContainer.prototype.destroyPresentation=function(){this.spine.destroy({children:!0}),this.randomAnimationInterval&&clearInterval(this.randomAnimationInterval)},sna.presentation.SpineContainer.prototype.updateLayoutContainer=sna.presentation.SpineContainer.prototype.updateLayout,sna.presentation.SpineContainer.prototype.updateLayout=function(){this.updateLayoutContainer(),this.updateIdleAnimation()},sna.presentation.SpineContainer.prototype.updateIdleAnimation=function(){var e,t,i,n=this.scope.config;n&&n.updateIdleAnimations&&(e=this.scope.config.idleLandscape,t=this.scope.config.idlePortrait,(n=this.presentation.scope.layout.has(sna.service.ENVIRONMENT_PORTRAIT))&&t&&(i=t),this.gotoAndPlay(i=!n&&e?e:i,!0))},sna.presentation.SpineContainerFactory=function(e,t,i){return new sna.presentation.SpineContainer(e,t,i)},sna.module.core.controller(sna.presentation.SPINE_CONTAINER,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.SpineContainerFactory]),sna.presentation.RADIO_BUTTONS_CONTAINER="RadioButtonsContainer",sna.presentation.RadioButtonsContainer=function(e,t){sna.presentation.Container.call(this,e,t.presentation),this.name=sna.presentation.RADIO_BUTTONS_CONTAINER,this.iface=t.iface,this.presentation=t.presentation,this.enabled=!0,this.buttons={},this.game=t.game},sna.presentation.RadioButtonsContainer.prototype=new sna.presentation.Container({},{}),sna.presentation.RadioButtonsContainer.prototype.initPresentationBase=sna.presentation.RadioButtonsContainer.prototype.initPresentation,sna.presentation.RadioButtonsContainer.prototype.initPresentation=function(){this.initPresentationBase();var e,i,t=this.scope,n=t.config,s=t.model;if(void 0===n.selectedButtonValue&&null===n.selectedButtonValue||(e=this.presentation.parseValue(this,n.selectedButtonValue),c=(sna.service.util.returnIf(this,"iface.scope.game.activeGameTypeIndex")||0)+1,""!=e&&(e/=c)),isNaN(e)?this.currentValue=e:this.currentValue=e.toFixed(2),n.buttonsValues&&(n.buttonsValues=this.presentation.parseValue(this,n.buttonsValues)),n.buttonsText&&(n.buttonsText=this.presentation.parseValue(this,n.buttonsText)),n.onRadioSelected&&(r=n.onRadioSelected.split(":"),i=this.iface.createCallback(this,r.shift(),r),this.onRadioSelected=function(e,t){t=e.scope.model.value,e.toggleState?this.currentValue=t:this.currentValue=NaN,n.twins&&angular.forEach(n.twins,function(e){e=this.presentation.getById(e);void 0!==e&&void 0!==e.setValue&&e.setValue(t,!0)},this),i(e,t),this.updateOtherButtons(e)}),void 0!==n.dynamicLayout){var r,o,a,l,h,t=n.dynamicLayout,c=this.game.getParameterValue("markets")||{};void 0!==(t="function"==typeof this.iface.isTargetMarket&&this.iface.isTargetMarket(c.ukgc)&&n.dynamicLayoutUKGC?n.dynamicLayoutUKGC:t).itemsPerRow&&("dynamic"===t.itemsPerRow?(r=t.maxRowNumber||5,c=t.minItemsPerRow||3,r=Math.round(this.game.scope.game.coinValues.length/r),t.itemsPerRow=r<c?c:r):(t.itemsPerRow=this.presentation.parseValue(this,t.itemsPerRow),o=Math.ceil((n.buttonsValues||[]).length/t.itemsPerRow),a=t.itemsPerRow));for(var p=(l="object"!=typeof t.xOffset?t.xOffset:l)*(a-1)/2,u=(h="object"!=typeof t.yOffset?t.yOffset:h)*(o-1)/2,d=0,m=0;m<o;m++)for(var f=0;f<a&&d!==n.buttonsValues.length;f++){var g=angular.copy(n.button),v=n.buttonsValues[d];switch(n.align){case"t":g.x=f*l-p,g.y=m*h;break;case"b":g.x=f*l-p,g.y=-2*u+m*h;break;case"l":g.x=f*l,g.y=m*h-u;break;case"r":g.x=-2*p+f*l,g.y=m*h-u;break;case"tl":g.x=f*l,g.y=m*h;break;case"tr":g.x=-2*p+f*l,g.y=m*h;break;case"bl":g.x=f*l,g.y=-2*u+m*h;break;case"br":g.x=-2*p+f*l,g.y=-2*u+m*h;break;default:g.x=f*l-p,g.y=m*h-u}if(n.buttonsVisibility&&(g.visible=n.buttonsVisibility[d].visible),null==g.untoggleable&&(g.untoggleable=!0),void 0!==n.buttonsTextures&&(g.textures=n.buttonsTextures[d]),void 0!==g.text)if(Array.isArray(g.text))for(var y=0;y<g.text.length;y++)void 0!==g.text[y]&&void 0===g.text[y].text&&(void 0!==n.buttonsText?g.text[y].text=n.buttonsText[y]:g.text[y].text=v);else void 0===g.text.text&&(void 0!==n.buttonsText?g.text.text=n.buttonsText[d]:g.text.text=v);var b=this.presentation.createPresentation(g,this,{slotModel:s,value:v});this.game.getParameterValue("tinkUpdateButtonsDisabled")&&(b.pressCallback=this.onRadioSelected.bind(this,b,v)),n.buttonsDisabled&&this.presentation.parseValue(this,n.buttonsDisabled[d])&&b.disable(),(this.buttons[v]=b).setPressAction(this.onRadioSelected.bind(this,b,v)),this.addChild(b),v==e&&void 0!==e&&(this.selected=b.setToggleState(!0),n.invokeSelectedButton&&this.onRadioSelected(b,e)),d++}}else for(var S=0;S<n.buttonsValues.length;S++){g=angular.copy(n.button),v=n.buttonsValues[S];if(void 0!==n.buttonsTooltips&&(g.tooltip=angular.copy(n.buttonsTooltips[S])),g.x=n.buttonsCoordinates[S].x,g.y=n.buttonsCoordinates[S].y,n.buttonsVisibility&&(g.visible=n.buttonsVisibility[S].visible),null==g.untoggleable&&(g.untoggleable=!0),void 0!==n.buttonsTextures&&(g.textures=n.buttonsTextures[S]),void 0!==g.text)if(Array.isArray(g.text))for(y=0;y<g.text.length;y++)void 0!==g.text[y]&&void 0===g.text[y].text&&(void 0!==n.buttonsText?g.text[y].text=n.buttonsText[y]:g.text[y].text=v);else void 0===g.text.text&&(void 0!==n.buttonsText?g.text.text=n.buttonsText[S]:g.text.text=v);b=this.presentation.createPresentation(g,this,{slotModel:s,value:v});this.game.getParameterValue("tinkUpdateButtonsDisabled")&&(b.pressCallback=this.onRadioSelected.bind(this,b,v)),n.buttonsDisabled&&this.presentation.parseValue(this,n.buttonsDisabled[S])&&b.disable(),(this.buttons[v]=b).setPressAction(this.onRadioSelected.bind(this,b,v)),this.addChild(b),v==e&&void 0!==e&&(this.selected=b.setToggleState(!0),n.invokeSelectedButton&&this.onRadioSelected(b,e))}},sna.presentation.RadioButtonsContainer.prototype.updatePresentation=function(e){angular.forEach(this.buttons,function(e){e.updatePresentation&&e.updatePresentation();var t=this.iface.getTotalBet();this.game&&this.game.getCurrentBetValue&&(t=this.game.getCurrentBetValue()),+e.scope.model.value.toFixed(2)==t?e.setToggleState(!0):e.setToggleState(!1)},this)},sna.presentation.RadioButtonsContainer.prototype.deselectAllButtons=function(){angular.forEach(this.buttons,function(e){e.setToggleState(!1)},this)},sna.presentation.RadioButtonsContainer.prototype.updateButtons=function(){var t=0;angular.forEach(this.buttons,function(e){this.presentation.parseValue(this,this.scope.config.buttonsDisabled[t])?e.disable():e.enable(),t++},this)},sna.presentation.RadioButtonsContainer.prototype.disableButtons=function(){angular.forEach(this.buttons,function(e){e.disable(),e.setToggleState(!1)},this)},sna.presentation.RadioButtonsContainer.prototype.enableButtons=function(){angular.forEach(this.buttons,function(e){e.enable()},this)},sna.presentation.RadioButtonsContainer.prototype.setValue=function(e,t){var i=this.buttons[e];void 0!==i&&i.enabled&&(i.setToggleState(!0),this.updateOtherButtons(i),!0!==t&&this.onRadioSelected(i,e))},sna.presentation.RadioButtonsContainer.prototype.updateOtherButtons=function(t){angular.forEach(this.buttons,function(e){e!==t&&e.enabled&&e.setToggleState(!1)},this)},sna.presentation.RadioButtonsContainer.prototype.updatePresentationActivateSS=function(){this.buttons&&Object.keys(this.buttons).forEach(function(e){var t=this.buttons[e];t.scope.model.value?t.scope.model.value=t.scope.model.value*this.game.getSuperStakeMultiplier():t.scope.model.value=parseFloat(e).toFixed(2)+this.scope.model.currency.sign}.bind(this))},sna.presentation.RadioButtonsContainer.prototype.updatePresentationDeactivateSS=function(){this.buttons&&Object.keys(this.buttons).forEach(function(e){e=this.buttons[e];e.scope.model.value=e.scope.model.value/this.game.getSuperStakeMultiplier()}.bind(this))},sna.presentation.RadioButtonsContainer.prototype.gameTypeChangedUpdate=function(){this.buttons&&Object.keys(this.buttons).forEach(function(e){var t=this.buttons[e],i=1;this.iface.superStakeActive&&(i=this.iface.game.getSuperStakeMultiplier()),t.scope.model.value=+e*this.iface.game.getActiveGameType().betMultiplier/this.iface.initialBetMultiplier*i,t.scope.model.value.toFixed(2)==this.iface.getTotalBet()?t.setToggleState(!0):t.setToggleState(!1)}.bind(this))},sna.presentation.RadioButtonsContainerFactory=function(e,t){return new sna.presentation.RadioButtonsContainer(e,t)},sna.module.core.controller(sna.presentation.RADIO_BUTTONS_CONTAINER,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.RadioButtonsContainerFactory]),sna.presentation.RADIO_BUTTONS_CONTAINER_MOBILE="RadioButtonsContainerMobile",sna.presentation.RadioButtonsContainerMobileMobile=function(e,t){sna.presentation.Container.call(this,e,t.presentation),this.name=sna.presentation.EXPENDABLES_RADIO_BUTTONS_CONTAINER_MOBILE,this.iface=t.iface,this.presentation=t.presentation,this.enabled=!0,this.buttons={},this.game=t.game},sna.presentation.RadioButtonsContainerMobileMobile.prototype=new sna.presentation.Container({},{}),sna.presentation.RadioButtonsContainerMobileMobile.prototype.initPresentationBase=sna.presentation.RadioButtonsContainerMobileMobile.prototype.initPresentation,sna.presentation.RadioButtonsContainerMobileMobile.prototype.initPresentation=function(){this.initPresentationBase();var e,i,t=this.scope,n=t.config,s=t.model;if(void 0===n.selectedButtonValue&&null===n.selectedButtonValue||(e=this.presentation.parseValue(this,n.selectedButtonValue),e/=(sna.service.util.returnIf(this,"iface.scope.game.activeGameTypeIndex")||0)+1),this.currentValue=e.toFixed(2),n.buttonsValues&&(n.buttonsValues=this.presentation.parseValue(this,n.buttonsValues)),n.buttonsText&&(n.buttonsText=this.presentation.parseValue(this,n.buttonsText)),n.onRadioSelected&&(r=n.onRadioSelected.split(":"),i=this.iface.createCallback(this,r.shift(),r),this.onRadioSelected=function(e,t){this.iface.superStakeActive&&"totalBetRadioButtonsMobile"==this.scope.config.id&&(t*=this.game.getSuperStakeMultiplier()),this.currentValue=t,n.twins&&angular.forEach(n.twins,function(e){e=this.presentation.getById(e);void 0!==e&&void 0!==e.setValue&&e.setValue(t,!0)},this),i(e,t),this.updateOtherButtons(e)}),void 0!==n.dynamicLayout){var r,o,a,l,h,c=n.dynamicLayout,t=this.game.getParameterValue("markets"),p=n.buttonsValues.length%n.dynamicLayout.itemsPerRow;void 0!==(c=t&&this.iface.isTargetMarket(t.ukgc)&&n.dynamicLayoutUKGC?n.dynamicLayoutUKGC:c).itemsPerRow&&("dynamic"===c.itemsPerRow&&(r=c.maxRowNumber||5,t=c.minItemsPerRow||3,r=Math.round(this.game.scope.game.coinValues.length/r),c.itemsPerRow=r<t?t:r),"object"==typeof c.itemsPerRow||(o=Math.ceil(n.buttonsValues.length/c.itemsPerRow),a=c.itemsPerRow));for(var u=(l="object"!=typeof c.xOffset?c.xOffset:l)*(a-1)/2,d=(h="object"!=typeof c.yOffset?c.yOffset:h)*(o-1)/2,m=0,f=0;f<o;f++)for(var g=0;g<a&&m!==n.buttonsValues.length;g++){var v=angular.copy(n.button),y=n.buttonsValues[m];switch(positionMultiplier=g,n.alignToCenter&&n.buttonsValues.length-m<=p&&p%2==0&&n.dynamicLayout.itemsPerRow%2==0&&positionMultiplier++,n.align){case"t":v.x=-u+positionMultiplier*l,v.y=f*h;break;case"b":v.x=-u+positionMultiplier*l,v.y=-2*d+f*h;break;case"l":v.x=positionMultiplier*l,v.y=f*h-d;break;case"r":v.x=-2*u+positionMultiplier*l,v.y=f*h-d;break;case"tl":v.x=positionMultiplier*l,v.y=f*h;break;case"tr":v.x=-2*u+positionMultiplier*l,v.y=f*h;break;case"bl":v.x=positionMultiplier*l,v.y=-2*d+f*h;break;case"br":v.x=-2*u+positionMultiplier*l,v.y=-2*d+f*h;break;default:v.x=-u+positionMultiplier*l,v.y=f*h-d}if(n.buttonsVisibility&&(v.visible=n.buttonsVisibility[m].visible),v.untoggleable=!0,void 0!==n.buttonsTextures&&(v.textures=n.buttonsTextures[m]),void 0!==v.text)if(Array.isArray(v.text))for(var b=0;b<v.text.length;b++)void 0!==v.text[b]&&void 0===v.text[b].text&&(void 0!==n.buttonsText?v.text[b].text=n.buttonsText[b]:v.text[b].text=y);else void 0===v.text.text&&(void 0!==n.buttonsText?v.text.text=n.buttonsText[m]:v.text.text=y);var S=this.presentation.createPresentation(v,this,{slotModel:s,value:y});this.game.getParameterValue("tinkUpdateButtonsDisabled")&&(S.pressCallback=this.onRadioSelected.bind(this,S,y)),n.buttonsDisabled&&this.presentation.parseValue(this,n.buttonsDisabled[m])&&S.disable(),(this.buttons[y]=S).setPressAction(this.onRadioSelected.bind(this,S,y)),this.addChild(S),y==e&&void 0!==e&&(this.selected=S.setToggleState(!0),n.invokeSelectedButton&&this.onRadioSelected(S,e)),m++}}else for(var T=0;T<n.buttonsValues.length;T++){v=angular.copy(n.button),y=n.buttonsValues[T];if(void 0!==n.buttonsTooltips&&(v.tooltip=angular.copy(n.buttonsTooltips[T])),v.x=n.buttonsCoordinates[T].x,v.y=n.buttonsCoordinates[T].y,n.buttonsVisibility&&(v.visible=n.buttonsVisibility[T].visible),v.untoggleable=!0,void 0!==n.buttonsTextures&&(v.textures=n.buttonsTextures[T]),void 0!==v.text)if(Array.isArray(v.text))for(b=0;b<v.text.length;b++)void 0!==v.text[b]&&void 0===v.text[b].text&&(void 0!==n.buttonsText?v.text[b].text=n.buttonsText[b]:v.text[b].text=y);else void 0===v.text.text&&(void 0!==n.buttonsText?v.text.text=n.buttonsText[T]:v.text.text=y);S=this.presentation.createPresentation(v,this,{slotModel:s,value:y});this.game.getParameterValue("tinkUpdateButtonsDisabled")&&(S.pressCallback=this.onRadioSelected.bind(this,S,y)),n.buttonsDisabled&&this.presentation.parseValue(this,n.buttonsDisabled[T])&&S.disable(),(this.buttons[y]=S).setPressAction(this.onRadioSelected.bind(this,S,y)),this.addChild(S),y==e&&void 0!==e&&(this.selected=S.setToggleState(!0),n.invokeSelectedButton&&this.onRadioSelected(S,e))}},sna.presentation.RadioButtonsContainerMobileMobile.prototype.updatePresentation=function(){angular.forEach(this.buttons,function(e){+e.scope.model.value.toFixed(2)==(this.scope.model.bet*this.scope.model.coinValue*(this.scope.model.totalNumberOfPaylines||1)).toFixed(2)?e.setToggleState(!0):e.setToggleState(!1)},this)},sna.presentation.RadioButtonsContainerMobileMobile.prototype.updatePresentationActivateSS=function(){this.buttons&&Object.keys(this.buttons).forEach(function(e){var t=this.buttons[e];t.scope.model.value?t.scope.model.value=t.scope.model.value*this.game.getSuperStakeMultiplier():t.scope.model.value=parseFloat(e).toFixed(2)+this.scope.model.currency.sign}.bind(this))},sna.presentation.RadioButtonsContainerMobileMobile.prototype.updatePresentationDeactivateSS=function(){this.buttons&&Object.keys(this.buttons).forEach(function(e){e=this.buttons[e];e.scope.model.value=e.scope.model.value/this.game.getSuperStakeMultiplier()}.bind(this))},sna.presentation.RadioButtonsContainerMobileMobile.prototype.deselectAllButtons=function(){angular.forEach(this.buttons,function(e){e.setToggleState(!1)},this)},sna.presentation.RadioButtonsContainerMobileMobile.prototype.updateButtons=function(){var t=0;angular.forEach(this.buttons,function(e){this.presentation.parseValue(this,this.scope.config.buttonsDisabled[t])?e.disable():e.enable(),t++},this)},sna.presentation.RadioButtonsContainerMobileMobile.prototype.setValue=function(e,t){var i=this.buttons[e];void 0!==i&&i.enabled&&(i.setToggleState(!0),this.updateOtherButtons(i),!0!==t&&this.onRadioSelected(i,e))},sna.presentation.RadioButtonsContainerMobileMobile.prototype.updateOtherButtons=function(t){angular.forEach(this.buttons,function(e){e!==t&&e.enabled&&e.setToggleState(!1)},this)},sna.presentation.RadioButtonsContainerMobileMobile.prototype.gameTypeChangedUpdate=function(){this.buttons&&Object.keys(this.buttons).forEach(function(e){var t=this.buttons[e],i=1;this.iface.superStakeActive&&(i=this.iface.game.getSuperStakeMultiplier()),t.scope.model.value=+e*this.iface.game.getActiveGameType().betMultiplier/this.iface.initialBetMultiplier*i,t.scope.model.value.toFixed(2)==this.iface.getTotalBet()?t.setToggleState(!0):t.setToggleState(!1)}.bind(this))},sna.presentation.RadioButtonsContainerMobileMobileFactory=function(e,t){return new sna.presentation.RadioButtonsContainerMobileMobile(e,t)},sna.module.core.controller(sna.presentation.RADIO_BUTTONS_CONTAINER_MOBILE,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.RadioButtonsContainerMobileMobileFactory]),sna.presentation.TABS_CONTAINER="TabsContainer",sna.presentation.TabsContainer=function(e,t,i){sna.presentation.Container.call(this,e,t.presentation),this.name=sna.presentation.RADIO_BUTTONS_CONTAINER,this.iface=t.iface,this.presentation=t.presentation,this.tabs=[],this.menuItems=[],this.sound=i,this.activeIndex=null,this.enabled=!0},sna.presentation.TabsContainer.prototype=new sna.presentation.Container({},{}),sna.presentation.TabsContainer.prototype.ALLOWED_CONTROLS={NEXT:"next",PREV:"prev",SHOW_TAB:"showTab"},sna.presentation.TabsContainer.prototype.initPresentationContainer=sna.presentation.TabsContainer.prototype.initPresentation,sna.presentation.TabsContainer.prototype.initPresentation=function(){var n,e=this.scope.config.menu;void 0!==e&&(e.type=void 0!==e.type?e.type:"Container",(n=this.presentation.createPresentation(e,this,this.scope.model)).isOpen=function(e){n.open=e},void 0!==e.items&&angular.forEach(e.items,function(e,t){var i=this.presentation.createPresentation(e,this,this.scope.model);switch(n.addChild(i),this.menuItems.push(i),e.control){case this.ALLOWED_CONTROLS.NEXT:i.release=this.showNextTab.bind(this,e);break;case this.ALLOWED_CONTROLS.PREV:i.release=this.showPreviousTab.bind(this,e);break;case this.ALLOWED_CONTROLS.SHOW_TAB:i.release=this.showTab.bind(this,e)}},this)),this.scope.config.tabsAboveMenu&&this.addChild(n);var i,s,e=this.scope.config.tabs;void 0!==e&&(i=0,s=this.scope.config.tabAnimations,angular.forEach(e,function(e,t){void 0!==s&&(void 0!==s.show&&e.animation.push(s.show[i]),void 0!==s.hide&&e.animation.push(s.hide[i]),void 0!==s.close&&e.animation.push(s.close[i]));e=this.presentation.createPresentation(e,this,this.scope.model);e.hide(),this.addChild(e),this.tabs.push(e),i++},this)),this.scope.config.tabsAboveMenu||this.addChild(n);e=this.presentation.parseValue(this,this.scope.config.defaultTab);void 0!==e&&(this.defaultTab=e,this.activeIndex=this.defaultTab),this.scope.config.onTabChange&&(e=this.scope.config.onTabChange.split(":"),this.onTabChange=this.iface.createCallback(this,e.shift(),e)),void 0!==this.tabs[this.activeIndex]&&this.tabs[this.activeIndex].show(),this.scope.config.resetTabsPosition&&(this.resetTabsPosition=this.presentation.parseValue(this,this.scope.config.resetTabsPosition)),this.initPresentationContainer()},sna.presentation.TabsContainer.prototype.showTab=function(e){var t=e.tab,e=e.onPressSound;e&&this.sound.playSound(e,!1),this._showTab(t)},sna.presentation.TabsContainer.prototype._showTab=function(e){this.activeIndex!==e&&(void 0!==this.scope.config.tabAnimations?(null!==this.activeIndex&&this.presentation.createAnimationTimeline("hideTab"+this.activeIndex.toString(),0,!1,!0),this.activeIndex=e,this.presentation.createAnimationTimeline("showTab"+this.activeIndex.toString(),0,!1,!0)):(void 0!==this.tabs[this.activeIndex]&&this.tabs[this.activeIndex].hide(),this.activeIndex=e,void 0!==this.tabs[this.activeIndex]&&this.tabs[this.activeIndex].show()),null!==this.activeIndex&&this.onTabChange&&this.onTabChange())},sna.presentation.TabsContainer.prototype.showTabByIndex=function(e){e=this.menuItems[e].scope.config;e&&e.tab&&this._showTab(e.tab)},sna.presentation.TabsContainer.prototype.setActiveIndex=function(e){this.activeIndex=void 0===e?null:e},sna.presentation.TabsContainer.prototype.showNextTab=function(e){e=e.onPressSound;e&&this.sound.playSound(e,!1),void 0!==this.tabs[this.activeIndex]&&this.tabs[this.activeIndex].hide(),this.activeIndex=(this.activeIndex+1)%this.tabs.length,void 0!==this.tabs[this.activeIndex]&&this.tabs[this.activeIndex].show(),null!==this.activeIndex&&this.onTabChange&&this.onTabChange()},sna.presentation.TabsContainer.prototype.showPreviousTab=function(e){e=e.onPressSound;e&&this.sound.playSound(e,!1),void 0!==this.tabs[this.activeIndex]&&this.tabs[this.activeIndex].hide(),this.activeIndex=(this.activeIndex-1+this.tabs.length)%this.tabs.length,void 0!==this.tabs[this.activeIndex]&&this.tabs[this.activeIndex].show(),null!==this.activeIndex&&this.onTabChange&&this.onTabChange()},sna.presentation.TabsContainer.prototype.close=function(e){if(this.resetTabsPosition)for(var t=0;t<this.tabs.length;t++)this.presentation.createAnimationTimeline("closeTab"+t.toString(),0,!1,!0);else this.presentation.createAnimationTimeline("closeTab"+this.activeIndex.toString(),0,!1,!0);0<=this.defaultTab&&this.showTabByIndex(this.defaultTab)},sna.presentation.TabsContainer.prototype.enable=function(){this.enabled=!0},sna.presentation.TabsContainer.prototype.disable=function(){this.enabled=!1},sna.presentation.TabsContainerFactory=function(e,t,i){return new sna.presentation.TabsContainer(e,t,i)},sna.module.core.controller(sna.presentation.TABS_CONTAINER,[sna.service.SCOPE,sna.service.MAIN,sna.service.SOUND,sna.presentation.TabsContainerFactory]),sna.presentation.MULTI_STYLE_TEXT="MultiStyleText",sna.presentation.MultiStyleText=function(e,t,i,n,s,r){this.presentation=t,this.scope=e,this.sound=s,this.background=null,this.interval=r;t=e.config;this.scope=e,this.animations={},t.decimals=t.decimals||0,t.isCurrency=t.isCurrency||!1,t.showCurrencySign=void 0===t.showCurrencySign||t.showCurrencySign,sna.presentation.util.setupLangConf(this.presentation,this),this.decimalFactor=Math.pow(10,this.presentation.parseValue(this,t.decimals));var o,r=this.getText(),e=this.getTagStylesConfig(t);this.tagConf=e,this.mstRef=MultiStyleText.call(this,r,e),sna.presentation.util.setupAnchor(this.presentation,this),sna.presentation.util.setupFontSize(this.presentation,this),sna.presentation.util.setUpWordWrapWidth(this.presentation,this),t.autoUpdate&&(t.autoUpdate===!!t.autoUpdate?i.registerAutoUpdate(this):i.registerEventCallback(t.autoUpdate,this,this.updatePresentation.bind(this))),sna.presentation.util.setupAlpha(this.presentation,this),sna.presentation.util.setupRotation(this.presentation,this),this.cacheAsBitmap=t.cacheAsBitmap||!1,t.width&&(this.width=t.width),t.height&&(this.height=t.height),sna.presentation.util.setupVisibility(this.presentation,this),sna.presentation.util.setupX(this.presentation,this),sna.presentation.util.setupY(this.presentation,this),sna.presentation.util.setupScale(this.presentation,this),this.frameskipCount=t.skipTextFrames||0,sna.presentation.util.setupMaxWidth(this.presentation,this),sna.presentation.util.setupMaxHeight(this.presentation,this),t.scaleX&&(this.scale.x=t.scaleX),t.scaleY&&(this.scale.y=t.scaleY),t.allowOverrides&&(this.allowOverrides=t.allowOverrides),t.breakWordWidth&&("zh_CN"==sna.service.ENVIRONMENT_LANG||"jp_JP"==sna.service.ENVIRONMENT_LANG)&&0<this.getText().length&&this.setText(this.breakWord(this.getText(),Math.round(t.breakWordWidth/(t.fontSize||t.size)))),this.currentDate&&this.interval(this.updateTimePresentation.bind(this),1e3),t.onPress&&(i.ui.makeInteractive(this),o=t.onPressSound,this.release=function(){o&&s.playSound(o),this.invokeReleaseAction()},t=this.scope.config.onPress.split(":"),t=i.createCallback(this,t.shift(),t),this.setPressAction(t))},sna.presentation.MultiStyleText.prototype=Object.create(MultiStyleText.prototype),sna.presentation.MultiStyleText.prototype.breakWord=function(e,t){return e.match(new RegExp(".{1,"+t+"}","g")).join(" ")},sna.presentation.MultiStyleText.prototype.initPresentation=function(){this.updateDimensions();var e=this.scope.config;this.scope.model;e.hasBackground&&(e=this.scope.parent.getChildAt(this.scope.parent.children.length-1),this.background=e)},sna.presentation.MultiStyleText.prototype.invokeReleaseAction=function(){this.releaseCallback&&this.releaseCallback(this,this.scope.model)},sna.presentation.MultiStyleText.prototype.setPressAction=function(e){this.releaseCallback=e},sna.presentation.MultiStyleText.prototype.setDisabledPresentation=function(){},sna.presentation.MultiStyleText.prototype.setEnabledPresentation=function(){},sna.presentation.MultiStyleText.prototype.disable=function(){this.enabled=!1,this.setDisabledPresentation()},sna.presentation.MultiStyleText.prototype.enable=function(){this.enabled=!0,this.setEnabledPresentation()},sna.presentation.MultiStyleText.prototype.config=function(){return this.scope.config},sna.presentation.MultiStyleText.prototype.initTagConfig=function(e,t){if(t.font&&(e.fontFamily=t.font),t.fontFamily&&(e.fontFamily=t.fontFamily),t.size=void 0!==t.size?t.size:30,t.size&&(e.fontSize=Math.ceil(t.size*this.presentation.globalScale)+"px"),t.fontSize&&(e.fontSize=Math.ceil(t.fontSize*this.presentation.globalScale)+"px"),t.wordWrap&&(e.wordWrap=t.wordWrap,e.wordWrapWidth=(t.wordWrapWidth||100)*this.presentation.globalScale,e.lineHeight=(t.wordWrapLineHeight||t.fontSize||t.size)*this.presentation.globalScale,e.align=t.wordWrapAlign||"center"),t.fill&&(e.fill=t.fill),t.stroke&&(e.stroke=t.stroke),t.strokeColor&&(e.stroke=t.strokeColor),t.thickness&&(e.strokeThickness=t.thickness*this.presentation.globalScale),t.strokeThickness&&(e.strokeThickness=t.strokeThickness*this.presentation.globalScale),t.tint&&this.setTint(t.tint),t.gradientType)switch(t.gradientType){case"vertical":e.fillGradientType=PIXI.TEXT_GRADIENT.LINEAR_VERTICAL;break;case"horizontal":e.fillGradientType=PIXI.TEXT_GRADIENT.LINEAR_HORIZONTAL}t.gradientStops&&(e.fillGradientStops=t.gradientStops),t.fillGradientStops&&(e.fillGradientStops=t.fillGradientStops),t.valign&&(e.valign=t.valign),t.dropShadow&&(e.dropShadow=t.dropShadow,e.dropShadowColor=t.dropShadowColor||"black",e.dropShadowAngle=void 0!==t.dropShadowAngle?t.dropShadowAngle:Math.PI/4,e.dropShadowDistance=void 0!==t.dropShadowDistance?t.dropShadowDistance:5,e.dropShadowBlur=void 0!==t.dropShadowBlur?t.dropShadowBlur:0),e.padding=t.padding||0,e.lineJoin=t.lineJoin||"miter",e.miterLimit=t.miterLimit||10,e.fontStyle=t.fontStyle||"normal",e.fontWeight=t.fontWeight||"normal",e.fontVariant=t.fontVariant||"normal",e.letterSpacing=void 0!==t.letterSpacing?Math.ceil(t.letterSpacing*this.presentation.globalScale):0},sna.presentation.MultiStyleText.prototype.setTint=function(e){this.tint=e},sna.presentation.MultiStyleText.prototype.resetTint=function(){this.tint="0xFFFFFF"},sna.presentation.MultiStyleText.prototype.getTagStylesConfig=function(e){var t={default:{}},i=e.tagStyles;if(this.initTagConfig(t.default,e),i)for(var n in i)i.hasOwnProperty(n)&&(t[n]={},this.initTagConfig(t[n],i[n]));return t},sna.presentation.MultiStyleText.prototype.getText=function(e){var t,i=e||this.scope.config.text;if((i="number"==typeof(i=i.constructor==Array?(t="",angular.forEach(i,function(e){e=this.presentation.parseValue(this,e);(e="number"==typeof e?this.getNumberAsText(e):e)instanceof Date&&(this.currentDate=e,e=this.getDateAsText(e)),t+=e},this),t):this.presentation.parseValue(this,i))?this.getNumberAsText(i):i)&&this.scope.config.replace&&0<this.scope.config.replace.length)for(var n=0;n<this.scope.config.replace.length;n+=2)i=i.replace(this.scope.config.replace[n],this.presentation.parseValue(this,this.scope.config.replace[n+1]));return i=i&&(this.scope.config.toUpperCase?i.toUpperCase():i)},sna.presentation.MultiStyleText.prototype.setText=function(e){this.text=e,this.dirty=!0,this.updateDimensions()},sna.presentation.MultiStyleText.prototype.updatePresentation=function(e){var t,i;this.animation("$changeValue")?this.presentation.createAnimationTimeline("$changeValue",0,!1,!0,this):(this.text=this.getText(),e||sna.presentation.util.setupVisibility(this.presentation,this)),this.background&&(i=this.scope.config,t=this.background.scope.config,e=(i.backgroundPaddingL||i.backgroundPaddingH||i.backgroundPadding||0)+(this.width||0)+(i.backgroundPaddingR||i.backgroundPaddingH||i.backgroundPadding||0),i=(i.backgroundPaddingT||i.backgroundPaddingV||i.backgroundPadding||0)+(this.height||0)+(i.backgroundPaddingB||i.backgroundPaddingV||i.backgroundPadding||0),t.width=e,t.height=i,this.background.updatePresentation&&(this.background.updatePresentation(),this.parent.positionElement(this.background))),this.updateDimensions()},sna.presentation.MultiStyleText.prototype.getnumber=function(){var e=this.scope.config,t=e.decimalSeparator,i=e.thousandSeparator,n=this.presentation.parseValue(this,e.decimals),s=this.presentation.parseValue(this,e.isCurrency),r=this.presentation.parseValue(this,e.showCurrencySign),e="";s&&(o=this.presentation.scope.game.config.currency,e=!1!==r?o.sign:"",o.sign_after,t=void 0!==o.decimal_sep?o.decimal_sep:t,i=void 0!==o.thousand_sep?o.thousand_sep:i,n=void 0!==o.decimals?o.decimals:n);var o=this.text;s&&e&&n&&(e=new RegExp("\\"+e,"g"),o=o.replace(e,""));i=new RegExp("\\"+i,"g");return o=o.replace(i,""),n&&(t=new RegExp("\\"+t,"g"),o=o.replace(t,".")),o=o.trim(),o=parseFloat(o)},sna.presentation.MultiStyleText.prototype.setnumber=function(e){this.frameskipCount?this.frameskipCount--:(e=this.getNumberAsText(e),this.text=e,this.frameskipCount=this.scope.config.skipTextFrames||0),this.updateDimensions()},sna.presentation.MultiStyleText.prototype._replaceText=function(e,t){var i=this.scope.config.text||"";if(i.constructor!=Array)return i;i=[].concat(i);return void 0!==e&&e<i.length&&0<=e&&(i[e]=t),i},sna.presentation.MultiStyleText.prototype.updateTextValue=function(e,t){this.frameskipCount?this.frameskipCount--:(e=this.getNumberAsText(e),e=this._replaceText(t,e),this.text=this.getText(e),this.presentation.createAnimationTimeline("$changeValue",0,!1,!0,this),this.frameskipCount=this.scope.config.skipTextFrames||0)},sna.presentation.MultiStyleText.prototype.getDateAsText=function(e){var t=e.getHours()+"";t<=9&&(t="0"+t);e=e.getMinutes()+"";return t+":"+(e=e<=9?"0"+e:e)},sna.presentation.MultiStyleText.prototype.updateTimePresentation=function(){var e=new Date;this.currentDate.getMinutes()!=e.getMinutes()&&this.updatePresentation()},sna.presentation.MultiStyleText.prototype.getNumberAsText=function(e){var t,i,n=this.scope.config,s=n.decimalSeparator,r=n.thousandSeparator,o=this.presentation.parseValue(this,n.decimals),a=this.presentation.parseValue(this,n.isCurrency),n=this.presentation.parseValue(this,n.showCurrencySign);a&&(l=this.presentation.scope.game.config.currency,t=!1!==n?l.sign:"",i=l.sign_after,s=void 0!==l.decimal_sep?l.decimal_sep:s,r=void 0!==l.thousand_sep?l.thousand_sep:r,o=void 0!==l.decimals?l.decimals:o);var l=Math.pow(10,o),h=c=parseFloat(Math.round(e*l)/l).toFixed(o),c=o?h.slice(-(o+1)):"";for(a&&o&&(c=c.substr(0,0)+s+c.substr(1)),o&&(h=h.slice(0,-(o+1)));c=h.slice(-3)+c,(h=h.slice(0,-3))&&(c=(r||"")+c),h;);return c=a?i?c+""+t:t+""+c:c},sna.presentation.MultiStyleText.prototype.getscale=function(){return this.scale.x},sna.presentation.MultiStyleText.prototype.setscale=function(e){this.scale.set(e,e)},sna.presentation.MultiStyleText.prototype.setalpha=function(e){this.alpha=e},sna.presentation.MultiStyleText.prototype.show=sna.presentation.util.show,sna.presentation.MultiStyleText.prototype.hide=sna.presentation.util.hide,sna.presentation.MultiStyleText.prototype.getX=sna.presentation.util.getX,sna.presentation.MultiStyleText.prototype.setX=sna.presentation.util.setX,sna.presentation.MultiStyleText.prototype.getY=sna.presentation.util.getY,sna.presentation.MultiStyleText.prototype.setY=sna.presentation.util.setY,sna.presentation.MultiStyleText.prototype.updateDimensions=sna.presentation.util.updateDimensions,sna.presentation.MultiStyleText.prototype.log=function(e){log("TextLog","log",sna.log.FATAL,e)},sna.presentation.MultiStyleText.prototype._updateTagStyle=function(e,t){var i=this.tagConf[e||"default"];if(i)t.call(this,i),this.mstRef.styles=this.tagConf,this.dirty=!0;else{var n=[];for(i in this.tagConf)this.tagConf.hasOwnProperty(i)&&n.push(i);log("MultiStyleText","setFillColor",sna.log.FATAL,"Could not find tag: "+e+". Hint: Check if right tag name is used in config file [ Available tags: "+n.join(", ")+" ]")}},sna.presentation.MultiStyleText.prototype.setFillColor=function(t,e){this._updateTagStyle(e,function(e){e.fill=t})},sna.presentation.MultiStyleText.prototype.setSize=function(t,e){this._updateTagStyle(e,function(e){e.fontSize=t+"px"})},sna.presentation.MultiStyleText.prototype.setDropShadow=function(t,e){this._updateTagStyle(e,function(e){e.dropShadow=t})},sna.presentation.MultiStyleText.prototype.setDropShadowColor=function(t,e){this._updateTagStyle(e,function(e){e.dropShadowColor=t})},sna.presentation.MultiStyleText.prototype.setDropShadowAngle=function(t,e){this._updateTagStyle(e,function(e){e.dropShadowAngle=t})},sna.presentation.MultiStyleText.prototype.setDropShadowDistance=function(t,e){this._updateTagStyle(e,function(e){e.dropShadowDistance=t})},sna.presentation.MultiStyleText.prototype.setDropShadowBlur=function(t,e){this._updateTagStyle(e,function(e){e.dropShadowBlur=t})},sna.presentation.MultiStyleText.prototype.setStroke=function(t,e){this._updateTagStyle(e,function(e){e.stroke=t})},sna.presentation.MultiStyleText.prototype.setThickness=function(t,e){this._updateTagStyle(e,function(e){e.strokeThickness=Number(t*this.presentation.globalScale)})},sna.presentation.MultiStyleText.prototype.setPadding=function(t,e){this._updateTagStyle(e,function(e){e.padding=t})},sna.presentation.MultiStyleText.prototype.animation=function(e,t){if(!t)return this.animations[e];this.animations[e]=t},sna.presentation.MultiStyleText.prototype.updateLayout=function(){var e=this.scope.config;e.xFactory&&(e.x=e.xFactory.call(this)),e.yFactory&&(e.y=e.yFactory.call(this)),e.fontSizeFactory&&(e.fontSize?(e.fontSize=e.fontSizeFactory.call(this),this.style.fontSize=Math.ceil(e.fontSize*this.presentation.globalScale)+"px"):(e.size=e.fontSizeFactory.call(this),this.style.fontSize=Math.ceil(e.size*this.presentation.globalScale)+"px")),e.scaleFactory&&(e.scale=e.scaleFactory.call(this),this.scale.set(e.scale,e.scale)),e.visibleFactory&&(e.visible=e.visibleFactory.call(this),e.visible?this.show():this.hide()),e.rotationFactory&&(e.rotation=e.rotationFactory.call(this),this.rotation=e.rotation),e.maxWidthFactory&&(this.maxWidth=e.maxWidthFactory.call(this)*this.presentation.globalScale,this.updateDimensions()),e.wordWrapWidthFactory&&(this.style.wordWrapWidth=e.wordWrapWidthFactory.call(this),this.updateDimensions()),e.anchorAlignFactory&&(e.anchorAlign=e.anchorAlignFactory.call(this),sna.presentation.util.setupAnchor(this.presentation,this))},sna.presentation.MultiStyleTextFactory=function(e,t,i,n,s){var r=t.presentation,t=t.iface;return new sna.presentation.MultiStyleText(e,r,t,i,n,s)},sna.module.core.controller(sna.presentation.MULTI_STYLE_TEXT,[sna.service.SCOPE,sna.service.MAIN,sna.service.PIXI_LOADER,sna.service.SOUND,sna.service.INTERVAL,sna.presentation.MultiStyleTextFactory]),sna.presentation.NUMPAD_KEYBOARD_COMPONENT="NumpadKeyboardComponent",sna.presentation.NumpadKeyboardComponent=function(e,t,i){sna.presentation.Container.call(this,e,t.presentation),this.main=t,this.name=sna.presentation.NUMPAD_KEYBOARD_COMPONENT,this.iface=t.iface,this.sound=i,this.presentation=t.presentation,this.enabled=!0,this.overlay=[],this.background=[],this.display=[],this.numbers=[],this.delete=[],this.enter=null,this.close=null,this.clear=null,this.separator=null,this.decimal_sep=".",this.thousand_sep=",",this.maxDigitsCount=4,this.defer=null,this.backgroundButton=null,this.text="0"},sna.presentation.NumpadKeyboardComponent.prototype=new sna.presentation.Container({},{}),sna.presentation.NumpadKeyboardComponent.prototype.initPresentationBase=sna.presentation.NumpadKeyboardComponent.prototype.initPresentation,sna.presentation.NumpadKeyboardComponent.prototype.initPresentation=function(){this.initPresentationBase();var e,t,i,n,s=this.scope,r=s.config,o=s.model;r.maxDigitsCount&&(this.maxDigitsCount=r.maxDigitsCount),r.overlay&&(r.overlay.constructor===Array?angular.forEach(r.overlay,function(e){e=this.presentation.createPresentation(e,this,o);this.overlay.push(e),this.addChild(e)},this):(s=this.presentation.createPresentation(r.overlay,this,o),this.overlay.push(s),this.addChild(s))),r.closeOnBackgroundClick&&((e=this.presentation.createPresentation({type:"Button",areaHeight:3e3,areaWidth:4e3},this,o)).release=this.onBackgroundClick.bind(this),this.backgroundButton=e,this.addChild(e)),r.background&&(r.background.constructor===Array?angular.forEach(r.background,function(e){e=this.presentation.createPresentation(e,this,o);this.background.push(e),this.addChild(e)},this):(e=this.presentation.createPresentation(r.background,this,o),this.background.push(e),this.addChild(e))),r.display&&(r.display.constructor===Array||(t=this.presentation.createPresentation(r.display,this,o),this.display.push(t),this.addChild(t))),r.numbers&&r.numbers.constructor===Array&&angular.forEach(r.numbers,function(e){var t=this.presentation.createPresentation(e,this,o);"Button"===e.type&&(this.numbers.push(t),t.release=this.onNumberPressed.bind(this,e)),this.addChild(t)},this),r.delete&&(r.delete.constructor===Array||(t=this.presentation.createPresentation(r.delete,this,o),"Button"===r.delete.type&&((this.delete=t).release=this.onDeletePressed.bind(this,r.delete)),this.addChild(t))),r.enter&&(r.enter.contructor===Array||(i=this.presentation.createPresentation(r.enter,this,o),"Button"===r.enter.type&&((this.enter=i).release=this.onEnterPressed.bind(this,r.enter)),this.addChild(i))),r.close&&(r.close.contructor===Array||(i=this.presentation.createPresentation(r.close,this,o),"Button"===r.close.type&&((this.close=i).release=this.onClosePressed.bind(this,r.close)),this.addChild(i))),r.clear&&(r.clear.contructor===Array||(n=this.presentation.createPresentation(r.clear,this,o),"Button"===r.clear.type&&((this.clear=n).release=this.onClearPressed.bind(this,r.clear)),this.addChild(n))),r.separator&&(r.separator.value&&(this.decimal_sep=this.presentation.parseValue(this,r.separator.value)),r.separator.contructor===Array||(n=this.presentation.createPresentation(r.separator,this,o),"Button"===r.separator.type&&((this.separator=n).release=this.onSeparatorPressed.bind(this,r.separator)),this.addChild(n))),r.useThousandSeparator&&(this.useThousandSeparator=r.useThousandSeparator,this.scope.model.currency&&(this.thousand_sep=this.scope.model.currency.thousand_sep||","))},sna.presentation.NumpadKeyboardComponent.prototype.onNumberPressed=function(e){var t=e.onPressSound;t&&this.sound.playSound(t,!1);t=parseFloat(this.text);if(!isNaN(t)){if(0==t&&-1==this.text.indexOf(this.decimal_sep))this.text=e.value.toString();else{t=this.text.split(this.decimal_sep,2);if(t[0].length<this.maxDigitsCount){if(void 0!==t[1]&&2===t[1].length)return;this.text+=e.value.toString()}else{if(t[0].length!==this.maxDigitsCount||void 0===t[1])return;if(2===t[1].length)return;this.text+=e.value.toString()}}this.useThousandSeparator?this._setDisplayTextWithThousandSep():this._setDisplayText(this.text)}},sna.presentation.NumpadKeyboardComponent.prototype._setDisplayTextWithThousandSep=function(){var e=this.text.split(/(?=(?:...)*$)/);if(1<e.length){for(var t="",i=0;i<e.length-1;i++)t=(t=t.concat(e[i])).concat(this.thousand_sep);t=t.concat(e[e.length-1]),this._setDisplayText(t)}else this._setDisplayText(this.text)},sna.presentation.NumpadKeyboardComponent.prototype.onDeletePressed=function(e){e=e.onPressSound;e&&this.sound.playSound(e,!1);e=this.getValue();0!=e&&(1==this.text.length&&(this.text="0",this._setDisplayText(this.text)),0!=e&&1<this.text.length&&(this.text=this.text.slice(0,-1),this._setDisplayText(this.text)))},sna.presentation.NumpadKeyboardComponent.prototype.onClearPressed=function(e){e=e.onPressSound;e&&this.sound.playSound(e,!1),this.text="0",this._setDisplayText(this.text)},sna.presentation.NumpadKeyboardComponent.prototype.onEnterPressed=function(e){e=e.onPressSound;e&&this.sound.playSound(e,!1),this.hide(),this.defer.resolve(this.getValue())},sna.presentation.NumpadKeyboardComponent.prototype.onClosePressed=function(e){this.hide()},sna.presentation.NumpadKeyboardComponent.prototype.onSeparatorPressed=function(e){-1==this.text.indexOf(this.decimal_sep)&&(this.text+=this.decimal_sep,this._setDisplayText(this.text))},sna.presentation.NumpadKeyboardComponent.prototype._setDisplayText=function(e){this.display[0].setText(e),this.shouldDisable()?(this.enter.disable(),this.clear.disable()):(this.enter.enable(),this.clear.enable())},sna.presentation.NumpadKeyboardComponent.prototype.shouldDisable=function(){return!(0<parseFloat(this.display[0].text))},sna.presentation.NumpadKeyboardComponent.prototype.getValue=function(){","===this.decimal_sep&&(this.text=this.text.replace(",",".")),this.thousand_sep&&(this.text=this.text.replace(this.thousand_sep,""));var e=parseFloat(this.text);if(!isNaN(e))return e},sna.presentation.NumpadKeyboardComponent.prototype.onEnter=function(){},sna.presentation.NumpadKeyboardComponent.prototype.init=function(e){return this.defer=this.main.q.defer(),this.text=e.toString(),this.text=this.text.replace(".",this.decimal_sep),this.useThousandSeparator?this._setDisplayTextWithThousandSep():this._setDisplayText(this.text),this.defer.promise},sna.presentation.NumpadKeyboardComponent.prototype.onBackgroundClick=function(){this.hide(),this.presentation.createAnimationTimeline("numpadKeyboardClosed",0,!1,!0),this.defer.reject(this.text)},sna.presentation.NumpadKeyboardComponent.prototype.close=function(){this.visible&&(this.defer.reject(this.text),this.hide())},sna.presentation.NumpadKeyboardComponentFactory=function(e,t,i){return new sna.presentation.NumpadKeyboardComponent(e,t,i)},sna.module.core.controller(sna.presentation.NUMPAD_KEYBOARD_COMPONENT,[sna.service.SCOPE,sna.service.MAIN,sna.service.SOUND,sna.presentation.NumpadKeyboardComponentFactory]),sna.presentation.FLEX_CONTAINER="FlexContainer",sna.presentation.FlexContainer=function(e,t){sna.presentation.Container.call(this,e,t.presentation)},sna.presentation.FlexContainer.prototype=Object.create(sna.presentation.Container.prototype),sna.presentation.FlexContainer.prototype.initPresentation=function(){this.setY(0);var e=this.scope,t=e.model,i=e.config,n=i.ySpacing||0;i&&(e=i.children,angular.forEach(e,function(e){e=this.presentation.createPresentation(e,this,t);e&&(this.addChild(e),e.setY(this.height+n))},this)),i.pushUp&&this.setY(-this.height/2+(this.scope.config.initialConfig.y||0))},sna.module.core.controller(sna.presentation.FLEX_CONTAINER,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.FlexContainer]),sna.model.slot={},sna.presentation.slot={},sna.service.slot={},sna.module.slot=angular.module("snaSlot",["snaCore"]),sna.model.slot.SYMBOL={LINE:"L",WILD:"W",SCATTER:"S",STICKY:"T",AREA:"A",COLUMN:"C",BOX:"B",EXPAND:"E",MULTIPLIER:"M",BONUS:"BNS",MYSTERY:"MY"},sna.model.slot.SymbolType=function(e){this.config=e,this.name=e.name,this.id=e.id,this.type=e.type,this.payouts=e.payouts},sna.model.slot.SymbolType.prototype.is=function(e){for(var t=this.type.length-1;0<=t;)if(this.type[t--]===e)return!0;return!1},sna.model.slot.Symbol=function(e){this.type=e,this.win=!1,this.index=null,this.reel=null,this.extra=null,this.features=[]},sna.model.slot.Symbol.prototype.hasFeature=function(e){return-1!==this.features.indexOf(e)},sna.model.slot.Symbol.prototype.hasAnyFeature=function(){var e=Array.prototype.slice.call(arguments),t=!1;return angular.forEach(e,function(e){this.hasFeature(e)&&(t=!0)},this),t},sna.model.slot.Symbol.prototype.isSymbolTypeScatter=function(){return!!this.type&&this.type.is(sna.model.slot.SYMBOL.SCATTER)},sna.model.slot.Symbol.prototype.isSymbolTypeMystery=function(){return!!this.type&&this.type.is(sna.model.slot.SYMBOL.MYSTERY)},sna.model.slot.Symbol.prototype.isSymbolTypeWild=function(){return!!this.type&&this.type.is(sna.model.slot.SYMBOL.WILD)},sna.model.slot.Symbol.prototype.isSymbolTypeBonus=function(){return!!this.type&&this.type.is(sna.model.slot.SYMBOL.BONUS)},sna.model.slot.Symbol.prototype.isSymbolTypeMultiplier=function(){return!!this.type&&this.type.is(sna.model.slot.SYMBOL.MULTIPLIER)},sna.model.slot.Symbol.prototype.isSymbolTypeRegular=function(){return!!this.type&&this.type.is(sna.model.slot.SYMBOL.LINE)},sna.model.slot.Symbol.prototype.isSymbolTypeName=function(e){if(this.type)return this.type.name==e},sna.model.slot.Symbol.prototype.symbolTypeHasFeature=function(e){return!!this.type.config.features&&-1!==this.type.config.features.indexOf(e)},sna.model.slot.Symbol.prototype.winning=function(e){return void 0===e?this.win:(this.win=e,this)},sna.model.slot.REEL="Reel",sna.model.slot.Reel=function(e){this.config=e,this.length=e.length,this.size=e.size,this.nextSymbols=[],this.symbols=[],this.topSymbols=[],this.bottomSymbols=[],this.spinningSymbols=[],this.position=0,this.set=null,this.slot=null,this.mode=this.STOPPED,this.features=[]},sna.model.slot.REEL_STOPPED="Static",sna.model.slot.REEL_STARTING="Start",sna.model.slot.REEL_SPINNING="Spin",sna.model.slot.REEL_STOPPING="Stop",sna.model.slot.Reel.prototype.setValue=function(e,i){this.symbols.length=0,angular.forEach(e,function(e,t){e=this.slot.createSymbolByName(e);e.index=t,e.reel=this,i&&i[t]&&(e.features=i[t]),this.symbols[t]=e},this),this.features=[]},sna.model.slot.Reel.prototype.setNextSymbols=function(e,i){this.nextSymbols.length=0,angular.forEach(e,function(e,t){e=this.slot.createSymbolByName(e);e.index=t,e.reel=this,i&&i[t]&&(e.features=i[t]),this.nextSymbols[t]=e},this)},sna.model.slot.Reel.prototype.setTopSymbols=function(i,n){this.topSymbols.length=0,angular.forEach(i,function(e,t){e=this.slot.createSymbolByName(e);e.index=t-i.length,e.reel=this,n&&n[t]&&(e.features=n[t]),this.topSymbols[t]=e},this),this.features=[]},sna.model.slot.Reel.prototype.setBottomSymbols=function(e,i){this.bottomSymbols.length=0,angular.forEach(e,function(e,t){e=this.slot.createSymbolByName(e);e.index=t+this.symbols.length,e.reel=this,i&&i[t]&&(e.features=i[t]),this.bottomSymbols[t]=e},this),this.features=[]},sna.model.slot.Reel.prototype.hasFeature=function(e){return-1!==this.features.indexOf(e)},sna.model.slot.Reel.prototype.setWinningSymbols=function(i,n,s){i&&this.eachSymbol(function(e,t){e.win=i[t]},this),n&&this.eachTopSymbol(function(e,t){e.win=n[t]},this),s&&this.eachBottomSymbol(function(e,t){e.win=s[t]},this)},sna.model.slot.Reel.prototype.parentSet=function(e){return e?(this.set=e,this):this.set},sna.model.slot.Reel.prototype.parentSlot=function(e){return e?(this.slot=e,this):this.slot},sna.model.slot.Reel.prototype.everySymbol=function(e,t){return angular.forEach([].concat(this.symbols,this.topSymbols,this.bottomSymbols,this.nextSymbols),e,t||this)},sna.model.slot.Reel.prototype.eachSymbol=function(e,t){return angular.forEach(this.symbols,e,t||this)},sna.model.slot.Reel.prototype.eachTopSymbol=function(e,t){return angular.forEach(this.topSymbols,e,t||this)},sna.model.slot.Reel.prototype.eachBottomSymbol=function(e,t){return angular.forEach(this.bottomSymbols,e,t||this)},sna.model.slot.Reel.prototype.eachNextSymbol=function(e,t){return angular.forEach(this.nextSymbols,e,t||this)},sna.model.slot.Reel.prototype.symbol=function(e){return this.symbols[e]},sna.model.slot.Reel.prototype.reelSize=function(e){return void 0===e?this.size:(this.size=e,this)},sna.model.slot.DYNAMIC_REEL="DynamicReel",sna.model.slot.DynamicReel=function(e){sna.model.slot.Reel.call(this,e),this.spinningSymbols=[]},sna.model.slot.DynamicReel.prototype=new sna.model.slot.Reel({}),sna.model.slot.DynamicReel.prototype.symbol=function(e){return e<this.spinningSymbols.length?this.spinningSymbols[e]:this.symbols[e-this.spinningSymbols.length]},sna.model.slot.DynamicReel.prototype.setSpinningSymbols=function(e){this.spinningSymbols.length=0,angular.forEach(e,function(e,t){e=this.slot.createSymbolByName(e);e.index=t,this.spinningSymbols.push(e)},this)},sna.model.slot.DynamicReel.prototype.setValueReel=sna.model.slot.DynamicReel.prototype.setValue,sna.model.slot.DynamicReel.prototype.setValue=function(e,t){this.setValueReel(e,t),this.config.staticSymbols&&!this.spinningSymbols.length&&angular.forEach(this.config.staticSymbols,function(e,t){e=this.slot.createSymbolByName(e);e.index=t,this.spinningSymbols.push(e)},this),this.length=this.spinningSymbols.length+this.size},sna.model.slot.REEL_SET="ReelSet",sna.model.slot.ReelSet=function(e){this.id=e.id,this.name=e.name,this.reels=[],this.slot=null,this.mode=sna.model.slot.MODE_IDLE},sna.model.slot.ReelSet.prototype.reel=function(e,t){if(!t)return this.reels[e||0];(this.reels[e]=t).parentSet(this),t.index=e,t.parentSlot(this.slot)},sna.model.slot.ReelSet.prototype.size=function(){return this.reels.length},sna.model.slot.ReelSet.prototype.setSpinningSymbols=function(i){this.eachReel(function(e,t){e.setSpinningSymbols&&i[t]&&e.setSpinningSymbols(i[t])},this)},sna.model.slot.ReelSet.prototype.setValue=function(s){angular.forEach(s.middle,function(e,t){var i=this.reels[t],n=!1;s.symbolFeatures&&s.symbolFeatures.middle&&(n=s.symbolFeatures.middle[t]||!1),i&&this.reels[t].setValue(e,n)},this),angular.forEach(s.top,function(e,t){var i=this.reels[t],n=!1;s.symbolFeatures&&s.symbolFeatures.top&&(n=s.symbolFeatures.top[t]||!1),i&&this.reels[t].setTopSymbols(e,n)},this),angular.forEach(s.bottom,function(e,t){var i=this.reels[t],n=!1;s.symbolFeatures&&s.symbolFeatures.bottom&&(n=s.symbolFeatures.bottom[t]||!1),i&&this.reels[t].setBottomSymbols(e,n)},this),angular.forEach(s.next,function(e,t){var i=this.reels[t],n=!1;s.symbolFeatures&&s.symbolFeatures.next&&(n=s.symbolFeatures.next[t]||!1),i&&this.reels[t].setNextSymbols(e,n)},this)},sna.model.slot.ReelSet.prototype.setWinningSymbols=function(i,n,s){this.eachReel(function(e,t){e.setWinningSymbols(i[t],n[t],s[t])},this)},sna.model.slot.ReelSet.prototype.parentSlot=function(t){if(!t)return this.slot;this.slot=t,this.eachReel(function(e){e.parentSlot(t)})},sna.model.slot.ReelSet.prototype.eachReel=function(e,t){return angular.forEach(this.reels,e,t||this)},sna.model.slot.ReelSet.prototype.eachSymbol=function(n,s){this.eachReel(function(e,i){e.eachSymbol(function(e,t){n.call(s||this,e,i,t)})})},sna.model.slot.ReelSet.prototype.setMode=function(e){this.mode=e},sna.model.slot.ReelSet.prototype.hasWinningPayline=function(e){return 0<this.countWinningPaylines()},sna.model.slot.ReelSet.prototype.countWinningPaylines=function(e){return this.paylines.filter(function(e){return e.win}).length},sna.model.slot.ReelSet.prototype.copyReelSetValues=function(i){this.eachReel(function(e,t){t=i.reels[t].symbols.map(function(e){return e.type.name});e.setValue(t)})},sna.model.slot.GRID_REELSET="GridReelSet",sna.model.slot.GridReelSet=function(e,t){sna.model.slot.ReelSet.call(this,e);for(var i=e.number,i=0;i<e.number;i++){var n=angular.copy(e);e.staticSymbols&&(n.staticSymbols=e.staticSymbols[i]);n=t.produce(e.reel,n);this.reel(i,n)}this.initialConfig=e},sna.model.slot.GridReelSet.prototype=new sna.model.slot.ReelSet({}),sna.model.slot.MODE_IDLE="Idle",sna.model.slot.MODE_SPIN="Spin",sna.model.slot.MODE_WIN="Win",sna.model.slot.MODE_STOP="Stop",sna.model.slot.MODE_FAST_WIN="FastWin",sna.model.slot.MODE_FAST_STOP="FastStop",sna.model.slot.MODE_WIN_INDIVIDUAL="Individual",sna.model.slot.MODE_FEATURE_START="FeatureStart",sna.model.slot.MODE_FEATURE_STOP="FeatureStop",sna.model.slot.MODE_FEATURE_WAIT="FeatureWait",sna.model.slot.MODE_FEATURE_CLOSE="FeatureClose",sna.model.slot.MODE_FEATURE_PLAY="FeaturePlay",sna.model.slot.PLAY_MODE={FUN:"Fn",REAL:"Rl",FREE:"Fr",REPLAY:"Rp"},sna.model.slot.GAME_MODE={REGULAR:"R",FREESPINS:"F",BONUS:"B"},sna.model.slot.Slot=function(e){(this.config=e).staticSymbols&&this.processStaticSymbols(e.staticSymbols),this.id=e.id,this.name=e.name,this.reels=null,this.reelsets={},this.symbols={},this.displayCoins=!1,this.balanceCash=e.balance,this.balanceCashOnly=e.balanceCashOnly,this.balanceCash=e.balance,this.freeBalance=e.freeBalance||0,this.balanceCoin=e.balanceCoin||0,this.coinValue=e.coinValue||1,this.coinNumber=e.coinNumber||1,this.bets=e.bets||[],this.bet=e.bet||e.bets[0],this.maxBet=e.maxBet||e.bets[e.bets.length-1],this.lastBet=e.lastBet||this.bet,this.defaultBet=this.bet,this.useBetLinesForTotalBet=e.useBetLinesForTotalBet||!1,this.showPayoutsInCoins=e.showPayoutsInCoins||!1,this.toggleValuesEnabled=e.toggleValuesEnabled||!1,this.playMode=e.playMode||sna.model.slot.PLAY_MODE.FUN;var t=sna.service.util.readCookie("showValuesInCash");t&&"true"==t||void 0===e.showValuesInCash?this.showValuesInCash=!0:this.showValuesInCash=e.showValuesInCash,this.bigWinThreshold=0,this.isBigWin=!1,this.bigWinIndex=-1,this.totalWin=e.totalWin||0,this.totalCoinsWin=e.totalCoinsWin||0,this.wins=[],this.totalWinBySym={},this.currency=e.currency,this.scatterCount=[],this.language=e.language||"en",this.autoplay={active:!1,left:0,played:0,leftOrPlayed:0,disabled:!1,options:e.autoplayOptions||[],winThreshold:parseFloat(sna.service.util.readCookie("winThreshold"))||0,winThresholdActive:"true"==sna.service.util.readCookie("winThresholdActive")||!1,winIncreaseThreshold:parseFloat(sna.service.util.readCookie("winIncreaseThreshold"))||0,winIncreaseThresholdActive:"true"==sna.service.util.readCookie("winIncreaseThresholdActive")||!1,winDecreaseThreshold:parseFloat(sna.service.util.readCookie("winDecreaseThreshold"))||0,winDecreaseThresholdActive:"true"==sna.service.util.readCookie("winDecreaseThresholdActive")||!1,stopOnFeature:!!sna.service.util.readCookie("stopOnFeature")&&Boolean(sna.service.util.readCookie("stopOnFeature")),stopOnMiniFeature:"true"==sna.service.util.readCookie("stopOnMiniFeature")||!1,initialBalance:0,newBalance:0},this.bonusGames=[],this._mode=sna.model.slot.MODE_IDLE,this.freespins={total:0,left:0,retrigger:0,retriggerCount:0,start:!1,end:!1,active:!1,win:0,totalWin:0,multiplier:1,name:"fs"},this.freeRounds=e.freeRounds||{id:0,available:!1,active:!1,end:!1,accepted:!1,total:0,left:0,used:0,validFrom:"",validTo:"",betLevel:0,bet:0,totalWin:0},this.jackpots=e.jackpots||null,this.hompageURL=e.hompageURL||"http://sna.rs",this.vibrationEnabled=e.vibrationEnabled||!1},sna.model.slot.Slot.prototype.processStaticSymbols=function(e){},sna.model.slot.Slot.prototype.increaseBet=function(){var e=this.bet,t=this.bets.indexOf(e);this.bet=this.bets[t+1]||e,this.setWin(0)},sna.model.slot.Slot.prototype.decreaseBet=function(){var e=this.bet,t=this.bets.indexOf(e);this.bet=this.bets[t-1]||e,this.setWin(0)},sna.model.slot.Slot.prototype.placeBet=function(){this.balanceCash>=this.getTotalBet()&&!0!==this.freeRounds.active&&(this.balanceCash-=this.getTotalBet())},sna.model.slot.Slot.prototype.getTotalBet=function(){return this.bet*this.coinNumber},sna.model.slot.Slot.prototype.addReelset=function(e){(this.reelsets[e.name]=e).parentSlot(this)},sna.model.slot.Slot.prototype.addSymbol=function(e){this.symbols[e.name]=e},sna.model.slot.Slot.prototype.setReels=function(e){return e?(this.reels=this.reelsets[e],this):this.reels},sna.model.slot.Slot.prototype.createSymbolByName=function(e){return new sna.model.slot.Symbol(this.symbols[e])},sna.model.slot.Slot.prototype.setValue=function(e){this.reels.setValue(e)},sna.model.slot.Slot.prototype.setWinningSymbols=function(e,t,i){this.reels.setWinningSymbols(e,t,i)},sna.model.slot.Slot.prototype.setSpinningSymbols=function(e){this.processSpinningSymbols(e),this.reels.setSpinningSymbols(e)},sna.model.slot.Slot.prototype.isInMode=function(e){return this.mode()==e},sna.model.slot.Slot.prototype.mode=function(e){return log("Slot","mode",sna.log.DEBUG,"Slot mode changed to: "+e),void 0!==e?(this._mode=e,this):this._mode},sna.model.slot.Slot.prototype.setSpinification=function(i){this.hasSpinification=!1,i.spinification&&angular.forEach(this.reels.reels,function(e,t){this.hasSpinification=this.hasSpinification||i.spinification[t],e.spinificationHoldActive=!1,e.spinification=i.spinification[t],i.spinificationPossible&&(e.spinificationPossible=i.spinificationPossible[t]),void 0!==i.scatterCount&&(e.scatterCount=i.scatterCount[t])},this)},sna.model.slot.Slot.prototype.setStackedFeatureSymbols=function(i){i.hasStackSymbols&&angular.forEach(this.reels.reels,function(e,t){e.hasStackSymbols=i.hasStackSymbols[t]},this)},sna.model.slot.Slot.prototype.setMaxBet=function(){this.lastBet=this.bet,this.bet=this.maxBet},sna.model.slot.Slot.prototype.restoreMaxBet=function(){this.bet=this.lastBet},sna.model.slot.Slot.prototype.setAutoplayRounds=function(e){this.autoplay.active=!0,this.autoplay.left=Number(e)||1/0,this.autoplay.left===1/0?(this.autoplay.played=0,this.autoplay.leftOrPlayed=0):this.autoplay.leftOrPlayed=this.autoplay.left,this.autoplay.initialBalance=this.balanceCash,this.autoplay.newBalance=this.balanceCash},sna.model.slot.Slot.prototype.updateAutoplay=function(e){this.autoplay.newBalance=e},sna.model.slot.Slot.prototype.stopAutoplay=function(){this.autoplay.active=!1,this.autoplay.left=0,this.autoplay.initialBalance=0,this.autoplay.newBalance=0,this.autoplay.played=0,this.autoplay.leftOrPlayed=0},sna.model.slot.Slot.prototype.setAautoplayWinThreshold=function(e){this.autoplay.winThreshold=e,sna.service.util.writeCookie("winThreshold",e)},sna.model.slot.Slot.prototype.setAutoplayWinThresholdActive=function(e){this.autoplay.winThresholdActive=e,sna.service.util.writeCookie("winThresholdActive",e)},sna.model.slot.Slot.prototype.setAutoplayWinIncreaseThreshold=function(e){this.autoplay.winIncreaseThreshold=e,sna.service.util.writeCookie("winIncreaseThreshold",e)},sna.model.slot.Slot.prototype.setAutoplayWinIncreaseThresholdActive=function(e){this.autoplay.winIncreaseThresholdActive=e,sna.service.util.writeCookie("winIncreaseThresholdActive",e)},sna.model.slot.Slot.prototype.setAutoplayWinDecreaseThreshold=function(e){this.autoplay.winDecreaseThreshold=e,sna.service.util.writeCookie("winDecreaseThreshold",e)},sna.model.slot.Slot.prototype.setAutoplayWinDecreaseThresholdActive=function(e){this.autoplay.winDecreaseThresholdActive=e,sna.service.util.writeCookie("winDecreaseThresholdActive",e)},sna.model.slot.Slot.prototype.setAutoplayStopOnFeature=function(e){this.autoplay.stopOnFeature=e,sna.service.util.writeCookie("stopOnFeature",e)},sna.model.slot.Slot.prototype.setAutoplayStopOnMiniFeature=function(e){this.autoplay.stopOnMiniFeature=e,sna.service.util.writeCookie("stopOnMiniFeature",e)},sna.model.slot.Slot.prototype.setShowValuesInCash=function(e){this.showValuesInCash=e,sna.service.util.writeCookie("showValuesInCash",e)},sna.model.slot.Slot.prototype.setVibrationEnabled=function(e){this.vibrationEnabled=e},sna.model.slot.Slot.prototype.getVibrationEnabled=function(e){return this.vibrationEnabled},sna.model.slot.Slot.prototype.processSpinningSymbols=function(e){for(var t=sna.model.slot.SYMBOL,i=0;i<e.length;i++)for(var n=e[i],s=0;s<n.length;s++){var r=n[s],r=this.symbols[r],o=1,a=1;if(r.is(t.DOUBLE_SQUARE)&&(o=a=2),1<(o=r.is(t.TRIPLE_SQUARE)?a=3:o)||1<a)for(var l,h,c,p=0;p<o;p++)for(l=0;l<a;l++)(p||l)&&(c=s+l,(h=i+p)>=e.length||c>=n.length||(e[h][c]="empty"))}},sna.model.slot.Slot.prototype.isMaxBet=function(){return this.bet==this.bets[this.bets.length-1]},sna.model.slot.Slot.prototype.isMinBet=function(){return this.bet==this.bets[0]},sna.model.slot.Slot.prototype.isInfinityAutoplay=function(){return this.autoplay.left===1/0},sna.model.slot.Slot.prototype.isLimitedAutoplay=function(){return this.autoplay.left!==1/0},sna.model.slot.Slot.prototype.isInFreeSpins=function(){return this.feature&&this.feature.active&&"fs"==this.feature.name},sna.model.slot.Slot.prototype.restoreGame=function(e){this.restoreData=e.restoreData},sna.model.slot.Slot.prototype.getActiveBet=function(){return this.showValuesInCash?this.getTotalBet():this.coinNumber*this.betLines},sna.model.slot.Slot.prototype.getActiveWin=function(){return this.showValuesInCash?this.totalWin||"":this.totalCoinsWin||""},sna.model.slot.Slot.prototype.setWin=function(e){this.totalWin=e,this.totalCoinsWin=e},sna.model.slot.Slot.prototype.getActiveBalance=function(){return this.showValuesInCash?this.balanceCash:this.balanceCash/this.bet},sna.model.slot.Slot.prototype.getActiveFeatureTotalWin=function(){return this.feature?this.showValuesInCash&&this.feature.active?this.feature.totalWin:this.feature.totalCoinsWin:""},sna.model.slot.Slot.prototype.resetFreeRounds=function(){this.freeRounds={id:0,available:!1,active:!1,end:!1,accepted:!1,total:0,left:0,used:0,validFrom:"",validTo:"",betLevel:0,bet:0,totalWin:0}},sna.service.slot.SLOT="SlotService",sna.service.slot.Slot=function(){sna.service.Game.call(this),this.name=sna.service.slot.SLOT,this.factory(sna.model.slot.DYNAMIC_REEL,function(e,t){return new sna.model.slot.DynamicReel(t)}),this.factory(sna.model.slot.GRID_REELSET,function(e,t,i){return new sna.model.slot.GridReelSet(t,i)})},sna.service.slot.Slot.prototype=new sna.service.Game,sna.service.slot.Slot.prototype.setBalanceCash=function(e,t,i){var n=this.scope.game;void 0!==e&&(n.balanceCash=e,n.balance=e),void 0!==t&&(n.balanceCashOnly=t),void 0!==i&&(n.freeBalance=i)},sna.service.slot.Slot.prototype.spin=function(e){this.scope.game.mode(sna.model.slot.MODE_SPIN);var t,i=!0;void 0===e&&(e=!(this.scope.game.feature||this.scope.game.freeRounds&&this.scope.game.freeRounds.active)),this.scope.game.feature&&(t=this.scope.game.feature,"FreeSpins"==(t=this.scope.config.slotFeatures[t.name]).type&&(i=!1)),e&&this.scope.game.placeBet(),i&&(e=this.scope.game.autoplay,i=this.scope.game.isInfinityAutoplay(),this.conditionForAutoplayUpdate()&&(i?(e.played++,e.leftOrPlayed=e.played):(e.left--,e.leftOrPlayed=e.left))),this.scope.game.feature&&("FreeSpins"!=(t=this.scope.config.slotFeatures[this.scope.game.feature.name]).type||t.decreaseDisabled||(this.scope.game.feature.left--,this.scope.game.feature.left<0&&(this.scope.game.feature.left=0)))},sna.service.slot.Slot.prototype.conditionForAutoplayUpdate=function(){return this.scope.game.autoplay.active},sna.service.slot.Slot.prototype.spinOutcome=function(e){e.reels&&(this.scope.game.setValue(e.reels),this.scope.game.setWinningSymbols(e.winningSymbols||!1,e.winningTopSymbols||!1,e.winningBottomSymbols||!1),this.scope.game.totalWin=e.win||0,this.scope.game.totalCoinsWin=e.coinsWin||0,this.scope.game.scatterWin=e.scatterWin,this.scope.game.scatterCount=e.scatterCount,void 0!==e.balance&&null!==e.balance&&(this.scope.game.balanceCash=e.balance),void 0!==e.freeBalance&&null!==e.freeBalance&&(this.scope.game.freeBalance=e.freeBalance||0),void 0!==e.balanceCashOnly&&null!==e.balanceCashOnly&&(this.scope.game.balanceCashOnly=e.balanceCashOnly||0),this.scope.game.setSpinification(e),this.scope.game.setStackedFeatureSymbols(e),this.scope.game.isBigWin=this.isBigWin(e.win),this.scope.game.totalWinBySym=e.totalWinBySym,this.scope.game.miniFeature=e.miniFeature,this.updateFreeRounds(e.freeRounds),this.updateJackpots(e.jackpots),this.updateAutoplayBalance(e.balance)),e.wins&&this.processWins(e)},sna.service.slot.Slot.prototype.updateJackpots=function(e){e&&(this.scope.game.jackpots=e)},sna.service.slot.Slot.prototype.updateFreeRounds=function(e){e&&(this.scope.game.freeRounds=e)},sna.service.slot.Slot.prototype.processWins=function(e){angular.forEach(e.wins,function(e){this.processWin(e)},this)},sna.service.slot.Slot.prototype.processWin=function(e){},sna.service.slot.Slot.prototype.updateAutoplayBalance=function(e){this.scope.game.updateAutoplay(e)},sna.service.slot.Slot.prototype.processSpinData=function(e){e.reels&&this.scope.game.setSpinningSymbols(e.reels)},sna.service.slot.Slot.prototype.autoplayThresholdTriggered=function(){var e=this.scope.game.autoplay;if(e.active){if(e.winThresholdActive&&this.scope.game.totalWin>=e.winThreshold)return!0;if(e.winIncreaseThresholdActive&&e.newBalance-e.initialBalance>=e.winIncreaseThreshold)return!0;if(e.winDecreaseThresholdActive&&e.initialBalance-e.newBalance>e.winDecreaseThreshold-this.getTotalBet())return!0;if(this.getStopOnFeatureCondition())return!0;if(this.getStopOnMiniFeatureCondition())return!0}return!1},sna.service.slot.Slot.prototype.getStopOnFeatureCondition=function(){return this.scope.game.autoplay.stopOnFeature&&this.scope.game.feature},sna.service.slot.Slot.prototype.getStopOnMiniFeatureCondition=function(){return this.scope.game.autoplay.stopOnMiniFeature&&this.scope.game.miniFeature},sna.service.slot.Slot.prototype.isBigWin=function(e){if(void 0===e)return!1;var t=this.scope.config.parameters.bigWinValues,i=Math.min.apply(null,t)*this.scope.game.getTotalBet();if(this.scope.game.bigWinIndex=-1,i<=e){for(var n=this.scope.game.bigWinIndex=0;n<t.length;n++)e>t[n]*this.scope.game.getTotalBet()&&(this.scope.game.bigWinIndex=n);return!0}return!1},sna.service.slot.Slot.prototype.totalWinDuration=function(){var e=this.scope.game.totalWin,t=this.scope.game.getTotalBet();return this.getParameterValue("totalWinDuration",e/t)||.001},sna.service.slot.Slot.prototype.soundNameByWinValue=function(){var e=this.scope.game.totalWin,t=this.scope.game.getTotalBet();return this.getParameterValue("soundNameByWinValue",e/t)||"win"},sna.service.slot.Slot.prototype.soundNameByCount=function(e){return this.getParameterValue("soundNameByCount",e)||""},sna.service.slot.Slot.prototype.setupGame=sna.service.slot.Slot.prototype.setup,sna.service.slot.Slot.prototype.setup=function(e){var t=this.scope.config;this.processConfigUpdate(t,e);var i=t.slot,n=new sna.model.slot.Slot(i);angular.forEach(i.symbols,function(e){e=new sna.model.slot.SymbolType(e);n.addSymbol(e)}),angular.forEach(i.reels,function(e){e.staticSymbols&&n.processSpinningSymbols(e.staticSymbols);var t=this.produce(e.type,e,this);n.addReelset(t),!e.default&&1!=i.reels.length||n.setReels(t.name)},this),e.slot.initial?n.setValue(e.slot.initial):n.setValue(i.initial),e.restoreData&&n.restoreGame(e),this.scope.game=n,log(this.name,"setup",sna.log.DEBUG,"Created initial game model:",n)},sna.service.slot.Slot.prototype.processConfigUpdate=function(n,e){var s,t,i;void 0!==e.slot.playMode&&(n.slot.playMode=e.slot.playMode),e.slot.currency&&(n.slot.currency=angular.extend(n.slot.currency,e.slot.currency)),e.slot.language&&(n.slot.language=e.slot.language),e.slot.bets&&(n.slot.bets=e.slot.bets),e.slot.defaultBet&&(n.slot.bet=e.slot.defaultBet),e.slot.betLinesActive&&(n.slot.betLinesActive=e.slot.betLinesActive),e.slot.betLinesActiveList&&(n.slot.betLinesActiveList=e.slot.betLinesActiveList),e.slot.betLevel&&(n.slot.betLevel=e.slot.betLevel),e.slot.maxBet&&(n.slot.maxBet=e.slot.maxBet),e.slot.betLevels&&(n.slot.betLevels=e.slot.betLevels),e.slot.betLevelBets&&(n.slot.betLevelBets=e.slot.betLevelBets),e.slot.lastBet&&(n.slot.lastBet=e.slot.lastBet),e.slot.coinNumber&&(n.slot.coinNumber=e.slot.coinNumber),e.slot.coinValue&&(n.slot.coinValue=e.slot.coinValue),e.slot.reels&&n.slot.reels[0].reel==sna.model.slot.DYNAMIC_REEL&&(n.slot.reels[0].staticSymbols=e.slot.reels),e.slot.totalWin&&(n.slot.totalWin=e.slot.totalWin),e.slot.rtp&&(n.slot.rtp=e.slot.rtp),e.slot.totalCoinsWin&&(n.slot.totalCoinsWin=e.slot.totalCoinsWin),void 0!==e.slot.balance&&(n.slot.balance=e.slot.balance),void 0!==e.slot.balanceCash&&(n.slot.balanceCash=e.slot.balanceCash),void 0!==e.slot.balanceCashOnly&&(n.slot.balanceCashOnly=e.slot.balanceCashOnly),void 0!==e.slot.freeBalance&&(n.slot.freeBalance=e.slot.freeBalance),e.slot.paylines&&(n.slot.paylines=[],angular.forEach(e.slot.paylines,function(e,t){n.slot.paylines.push({id:t,positions:e})},this)),e.slot.autoplayOptions&&(n.slot.autoplayOptions=e.slot.autoplayOptions),e.slot.defaultAutoplayOption&&(n.slot.defaultAutoplayOption=e.slot.defaultAutoplayOption),void 0!==e.slot.showPayoutsInCoins&&(n.slot.showPayoutsInCoins=e.slot.showPayoutsInCoins),e.slot.symbols&&(s={},angular.forEach(n.slot.symbols,function(e,t){s[e.name]=t},this),angular.forEach(e.slot.symbols,function(e,t){var i=s[e.name];void 0!==i&&angular.merge(n.slot.symbols[i],e)},this)),e.slot.freeRounds&&(t=n.slot.freeRounds={},i=e.slot.freeRounds,t.id=i.id,t.available=i.available||!1,t.active=i.active||!1,t.end=i.end||!1,t.accepted=i.accepted||!1,t.total=i.total||!1,t.left=i.left||0,t.used=i.used||0,t.validFrom=i.validFrom,t.validTo=i.validTo,t.betLevel=i.betLevel,t.bet=i.bet,t.coinValue=i.coinValue,t.cashBet=i.cashBet,t.totalWin=i.totalWin||0,t.totalCoinsWin=i.totalCoinsWin||0,t.customData=i.customData,t.start=i.start),e.slot.jackpots&&(n.slot.jackpots=e.slot.jackpots),e.slot.hompageURL&&(n.slot.hompageURL=e.slot.hompageURL)},sna.service.slot.Slot.prototype.hasFreeRounds=function(){return this.scope.game.freeRounds.available},sna.service.slot.Slot.prototype.acceptFreeRounds=function(){var e=this.scope.game.freeRounds,t=this.scope.game;e.accepted=!0,e.active=!0,t.betLevel=e.betLevel,t.bet=e.bet,t.coinValue=e.coinValue},sna.service.slot.Slot.prototype.endFreeRounds=function(){var e=this.scope.game.freeRounds;e.active=!1,e.end=!0,e.accepted=!1,this.scope.game.bet=this.scope.game.defaultBet,this.scope.game.betLevel=this.scope.game.defaultBetLevel},sna.service.slot.Slot.prototype.resetFreeRounds=function(){this.scope.game.resetFreeRounds()},sna.service.slot.Slot.prototype.isFreeRoundsActive=function(){return this.scope.game.freeRounds.active},sna.service.slot.Slot.prototype.isFreeRoundsEnd=function(){return this.scope.game.freeRounds.end},sna.service.slot.Slot.prototype.isFreeRoundsAccepted=function(){return this.scope.game.freeRounds.accepted},sna.service.slot.Slot.prototype.getTotalBet=function(){return this.scope.game.getTotalBet()},sna.service.slot.Slot.prototype.isInBaseGame=function(){var e=this.scope.game.feature;return!e||e.start&&!e.started&&!e.confirmed},sna.service.slot.Slot.prototype.isInFreeSpins=function(){return!this.isInBaseGame()},sna.service.slot.Slot.prototype.isFreeSpinsStart=function(){return this.scope.game.feature&&this.scope.game.feature.start},sna.service.slot.Slot.prototype.isFreeSpinsConfirmed=function(){return this.scope.game.feature&&this.scope.game.feature.confirmed},sna.service.slot.Slot.prototype.getMiniFeatureByName=function(t){var e,i=this.scope.game.miniFeature;return i&&(i.constructor===Array?e=i.find(function(e){return e.name===t}):i.name===t&&(e=i)),e},sna.service.slot.Slot.prototype.isAutoplayActive=function(){return this.scope.game&&this.scope.game.autoplay&&this.scope.game.autoplay.active},sna.service.slot.SlotProvider=function(){sna.service.GameProvider.call(this)},sna.service.slot.SlotProvider.prototype=new sna.service.GameProvider,sna.service.slot.SlotProvider.prototype._create=function(){return new sna.service.slot.Slot},sna.module.slot.provider(sna.service.slot.SLOT,function(){return new sna.service.slot.SlotProvider}),sna.service.slot.SLOT_INTERFACE="SlotInterfaceService",sna.service.slot.REELS_ID="reels",sna.service.slot.TOTAL_WIN_ID="totalWin",sna.service.slot.BIG_WIN_ID="bigWin",sna.service.slot.SlotInterface=function(){sna.service.Interface.call(this),this.name=sna.service.slot.SLOT_INTERFACE,this.fastWinFullStopCallback=this.createFastWinFullStopCallback(),this.fastWinIndividualStopCallback=this.createFastWinIndividualStopCallback(),this.fastStopCallback=this.createFastStopCallback(),"false"==sna.service.util.readCookie("useSpinShortcut")?this.useSpinShortcut=!1:this.useSpinShortcut=!0,this.cheatStack=[],this.fastStopAnimationPromise={}},sna.service.slot.SlotInterface.prototype=new sna.service.Interface,sna.service.slot.SlotInterface.prototype.setupInterface=sna.service.slot.SlotInterface.prototype.setup,sna.service.slot.SlotInterface.prototype.setup=function(){this.setupInterface(),this.addKeyboardCallback([27],this.escapeKeyCallback.bind(this)),this.addKeyboardCallback([116],this.refreshKeyCallback.bind(this)),this.addKeyboardCallback([13,32],this.enterAndSpaceKeyCallback.bind(this)),this.autoEnableSounds()},sna.service.slot.SlotInterface.prototype.escapeKeyCallback=function(){var e;!sna.debug.enableCheats||(e=this.presentation.getById(this.getCheatsId()))&&(e.visible?e.hide():e.show())},sna.service.slot.SlotInterface.prototype.refreshKeyCallback=function(){window.location.reload()},sna.service.slot.SlotInterface.prototype.enterAndSpaceKeyCallback=function(){var e;this.scope.game.feature||(e=this.presentation.getById("interfaceContainer"))&&e.visible&&(this.winInProgress?this.fastWinFullStopCallback():this.presentation.getById(this.getStopButtonId()).enabled&&this.presentation.getById(this.getStopButtonId()).visible&&this.useSpinShortcut?this.fastStop():this.presentation.getById(this.getSpinButtonId()).visible&&this.useSpinShortcut?(e=this.q.when(!0),(e=!0===this.autoplayMenuOpened?(e=e.then(this.presentation.createAnimationTimeline.bind(this.presentation,"autoplayStop",0,!1,!0,null))).then(function(){this.autoplayMenuOpened=!1}.bind(this)):e).then(this.spin.bind(this,this))):this.useSpinShortcut&&this.onScreenClick())},sna.service.slot.SlotInterface.prototype.autoEnableSounds=function(){var t,i,e,n,s=this.scope.layout,r=this.scope.config.parameters.autoEnableSounds;r&&(i=t=!1,e=r.environments,angular.forEach(e,function(e){s.has(e)&&(t=!0,void 0!==r.skipAllSoundToggleForEnvironments&&(i=-1!=r.skipAllSoundToggleForEnvironments.indexOf(e)))},this),t&&(n=function(){angular.forEach(r.toggleButtons,function(e){var t=this.presentation.getById(e.id);t&&t.setToggleState(e.state)},this),this.scope.game.feature?angular.forEach(r.restartSoundsFreeSpins,function(e){"loop"!=e.mode&&null!=e.mode||(this.sound.stopSound(e.name),this.sound.playSoundOnce(e.name,"loop",e.volume)),"playlist"==e.mode&&(this.sound.stopPlaylistSound(e.name),this.sound.playPlaylistSound(e.name,e.loop,e.shuffle,e.startIndex,e.volume))},this):angular.forEach(r.restartSounds,function(e){"loop"!=e.mode&&null!=e.mode||(this.sound.stopSound(e.name),this.sound.playSoundOnce(e.name,"loop",e.volume)),"playlist"==e.mode&&(this.sound.stopPlaylistSound(e.name),this.sound.playPlaylistSound(e.name,e.loop,e.shuffle,e.startIndex,e.volume))},this),i||this.allSoundToggle(),this.removeGlobalPressCallback(n)}.bind(this),this.addGlobalPressCallback(n,!0)))},sna.service.slot.SlotInterface.prototype.spin=function(e,t){this.winInProgress&&this.fastWinFullStopCallback(),this.spinInProgress=!0,this.blockSpinInterface(),this.cancelIdleAnimations();var i=this.presentation.getById(this.getSettingsPagesPanelId());if(i&&i.hide(),this.presentation.cancelAnimation("spinStartAsync",!0),this.shouldHandleInsufficientFunds(t=void 0===t?!0:t))return this.handleInsufficientFunds(),void(this.spinInProgress=!1);this.spinStartTime=(new Date).getTime(),this.scope.game.autoplay.disabled=!0,this.presentation.prerenderIfAssetsAvailable(this.scope.config.iface.prerenderAssetPackCount),log(this.name,"spin",sna.log.DEBUG,"Spin button pressed"),this.game.spin();i=this.scope.lastResult,t=this.q.when(!0);return this.winInProgress&&i&&i.outcome.hasWins&&(this.winInProgress=!1,t=(t=t.then(function(){this.q.all([this.presentation.cancelAnimation.bind(this.presentation,"winFull",!0),this.presentation.cancelAnimation.bind(this.presentation,"loseFull",!0),this.presentation.cancelAnimation.bind(this.presentation,"bigWin",!0)])}.bind(this))).then(this.presentation.createAnimationTimeline.bind(this.presentation,"fastWinStop",0,!1,!0))),sna.debug.enableCheats&&0<this.cheatStack.length&&(t=t.then(function(){this.playCheatStack(null,this.cheatStack.shift())}.bind(this)),"LeanderYggCommunicationService"===this.communication.providerName)?t:t=t.then(this.sendRequestAndPlayStartAnimation.bind(this))},sna.service.slot.SlotInterface.prototype.playIdleAnimations=function(){this.idleAnimationsActive||this.spinInProgress||(this.presentation.createAnimationTimeline("idleStart",0,!1,!0),this.idleAnimationsActive=!0)},sna.service.slot.SlotInterface.prototype.cancelIdleAnimations=function(){this.idleAnimationsActive=!1,this.presentation.createAnimationTimeline("idleStop",0,!1,!0),this.presentation.cancelAnimation("idleStart")},sna.service.slot.SlotInterface.prototype.sendRequestAndPlayStartAnimation=function(){this.presentation.createAnimationTimeline("spinStartAsync",0,!1,!0),this.scope.game.feature&&this.scope.game.feature.active||this.addGlobalPressCallback(this.fastStopCallback),this.sounds.spinStart(this.scope.game.feature);var e=this.playSpinStartAnimation(),t=this.sendSpinRequest();return this.q.all([e,t]).then(function(e){this.processSpinResult(e[1])}.bind(this))},sna.service.slot.SlotInterface.prototype.playSpinStartAnimation=function(){return this.presentation.createAnimationTimeline("spinStart",0,!1,!0)},sna.service.slot.SlotInterface.prototype.sendSpinRequest=function(){return this.communication.spin(this.getSpinRequestParams())},sna.service.slot.SlotInterface.prototype.getSpinRequestParams=function(){},sna.service.slot.SlotInterface.prototype.shouldHandleInsufficientFunds=function(e){var t=this.scope.game.freeRounds.active;return!(this.scope.game.feature&&"fs"==this.scope.game.feature.name&&this.scope.game.feature.active&&!!this.scope.game.feature.left)&&!t&&this.scope.game.getActiveBalance()<this.scope.game.getActiveBet()&&e},sna.service.slot.SlotInterface.prototype.handleInsufficientFunds=function(){return this.scope.game.mode(sna.model.slot.MODE_IDLE),this.scope.game.autoplay.active&&this.stopAutoplay(),this.enableInterface(),this.restoreBetButtons(),this.restoreSpinInterface(),this.communication.getBalance().then(function(e){return e.data||0==e.data?this.game.setBalanceCash(e.data):!e&&0!=e||this.game.setBalanceCash(e),e}.bind(this)).then(function(e){this.getBalanceId()&&this.presentation.getById(this.getBalanceId()).updatePresentation()}.bind(this)),this.presentation.createAnimationTimeline("ShowInsufficientFunds",0,!1,!0,null)},sna.service.slot.SlotInterface.prototype.processSpinResult=function(e){return this.scope.game.mode(sna.model.slot.MODE_STOP),this.setActiveFeature(e),this.game.spinOutcome(e.outcome),this.game.processSpinData(e),this.scope.lastResult=e,this.onOutcomeSet(),log(this.name,"processSpinResult",sna.log.DEBUG,"Spin completed with response:",e),this.getRequiredAssets(e).then(this.checkMinimumSpinDuration.bind(this)).then(this.presentation.createAnimationTimeline.bind(this.presentation,"spinStopPrepare",0,!1,!0,null)).then(this.enableQuickStop.bind(this)).then(this.processBeforeSpinStop.bind(this)).then(this.processSpinStop.bind(this)).then(this.processWin.bind(this))},sna.service.slot.SlotInterface.prototype.processBeforeSpinStop=function(){return this.processMiniFeatureSpinModifier()};sna.service.slot.SlotInterface.prototype.processMiniFeatureSpinModifier=function(){var e,t=this.q.when(!0);return!this.game.getParameterValue("miniFeatureStatesEnabled")||(e=(this.scope.lastResult&&this.scope.lastResult.outcome||{}).miniFeature)&&(t=t.then(this.handleMiniFeature.bind(this,e,"duringSpin"))),t},sna.service.slot.SlotInterface.prototype.onOutcomeSet=function(){this.presentation.createAnimationTimeline("outcomeSetAsync",0,!1,!0,null)},sna.service.slot.SlotInterface.prototype.setActiveFeature=function(e){var t=null;angular.forEach(e.outcome.features,function(e){e.active&&(t&&!t.end||(t=e))},this),this.scope.game.feature=t},sna.service.slot.SlotInterface.prototype.checkMinimumSpinDuration=function(){var e=this.scope.game.feature;if(!this.scope.config.iface.minimumSpinDuration||e&&!e.start)return!0;minSpinDuration=this.scope.config.iface.minimumSpinDuration,this.scope.game.turboMode&&(minSpinDuration=this.scope.config.iface.minimumSpinDurationTurboSpin);e=(new Date).getTime()-this.spinStartTime;if(e<1e3*minSpinDuration){var t=this.q.defer();return window.setTimeout(function(){t.resolve(!0)},1e3*minSpinDuration-e),t.promise}return!0},sna.service.slot.SlotInterface.prototype.processSpinStop=function(){var e=this.scope.config.iface.enableEarlyReelStop&&this.earlyReelStopEnabled&&this.earlyReelStopTriggered;return this.earlyReelStopEnabled=!1,this.earlyReelStopTriggered=!1,e?this.fastStop(!0):(this.presentation.createAnimationTimeline("spinStopAsync",0,!1,!0),this.presentation.createAnimationTimeline("spinStop",0,!1,!0))},sna.service.slot.SlotInterface.prototype.earlyEnableSpinInterface=function(e){var t=this.scope.game,i=t.autoplay;t.feature||t.miniFeature||i.active?this.presentation.getById(this.getStopButtonId()).disable():(e&&this.fastStop(!1),this.restoreSpinInterface())},sna.service.slot.SlotInterface.prototype.checkBigWinAssets=function(){if(this.scope.game.isBigWin)return this.getRequriedBigWinAssets(this.scope.lastResult)},sna.service.slot.SlotInterface.prototype.getRequiredAssets=function(e){var t=this.getRequiredSymbolAssets(e),e=this.getRequriedBigWinAssets(e);return this.q.all([t,e])},sna.service.slot.SlotInterface.prototype.getRequriedBigWinAssets=function(e){var t=this.presentation.scope.config.parameters.bigWinValues,i=this.presentation.scope.config.parameters.bigWinAssetPackPrefix;if(i&&t){for(var n=[],s=this.scope.game.bet,r=e.outcome.win,o=0;o<t.length;o++)r/s>t[o]&&n.push(this.presentation.loadGameModePresentation(i+o));return this.q.all(n)}},sna.service.slot.SlotInterface.prototype.getRequiredSymbolAssets=function(e){var t=this.scope.game,i=this.presentation.assetManager,s=[];t.reels.eachReel(function(e,t){e.eachSymbol(function(e,t){var i,n;e.win&&-1===s.indexOf(e.type.name)&&(i=e.type.name,(n=e.type.type[1])?(i=i.replace("_"+n,""),-1===s.indexOf(i)&&s.push(i)):s.push(i)),this.getAdditionalSymbolAssets&&this.getAdditionalSymbolAssets(e,s)}.bind(this))}.bind(this));var n=this.q.when(!0);return 0<s.length&&(s.push("win"),angular.forEach(s,function(e){i.assetPackDefined(e)&&(n=n.then(i.ensureAssetPackLoaded.bind(i,e,this.presentation.preloadTextures.bind(this.presentation,e))))},this)),n},sna.service.slot.SlotInterface.prototype.processWin=function(){if(this.removeGlobalPressCallback(this.fastStopCallback),this.scope.lastResult&&this.scope.lastResult.insufficientFunds)return this.handleInsufficientFunds();this.spinInProgress=!1,this.presentation.getById(sna.service.slot.REELS_ID).scope.config.earlyEnableSpin||this.earlyEnableSpinInterface(!1);var e=this.q.when(!0);return e=(e=(e=e.then(this.processAfterSpinStop.bind(this))).then(this.processMiniFeature.bind(this,null))).then(this.processOutcomeAnimations.bind(this))},sna.service.slot.SlotInterface.prototype.processAfterSpinStop=function(){return this.q.when(!0)},sna.service.slot.SlotInterface.prototype.processMiniFeature=function(e){var t=this.q.when(!0),i=this.scope.lastResult.outcome.miniFeature,e=e||"beforeWin";return i&&((this.isAutoplayThresholdTriggered()||this.scope.game.autoplay.active&&!this.scope.game.autoplay.left)&&this.stopAutoplay(),t=(t=t.then(this.handleMiniFeature.bind(this,i,e))).then(this.checkBigWinAssets.bind(this)),this.game.getParameterValue("miniFeatureStatesEnabled")||(t=t.then(this.onMiniFeatureCompleted.bind(this,i)))),t},sna.service.slot.SlotInterface.prototype.processMiniFeatureAfterWin=function(){this.game.getParameterValue("disableStopButtonAfterWin")&&this.disableStopButton();var e,t=this.q.when(!0);return!this.game.getParameterValue("miniFeatureStatesEnabled")||(e=this.scope.lastResult.outcome.miniFeature)&&(t=(t=t.then(this.handleMiniFeature.bind(this,e,"afterWin"))).then(this.onMiniFeatureCompleted.bind(this,e))),t},sna.service.slot.SlotInterface.prototype.disableStopButton=function(){var e=this.presentation.getById(this.getStopButtonId());e&&e.disable()},sna.service.slot.SlotInterface.prototype.handleMiniFeature=function(e,t){var i=this.q.when(!0);if(e)if(e.constructor===Array){e.sort(function(e,t){return e.priority-t.priority},this);for(var n=0;n<e.length;n++)i=i.then(this.startMiniFeature.bind(this,e[n],t))}else i=i.then(this.startMiniFeature.bind(this,e,t));return i},sna.service.slot.SlotInterface.prototype.onMiniFeatureCompleted=function(e){var t,e=((this.scope.lastResult||{}).outcome||{}).miniFeature;!this.scope.game.activeMiniFeature||((t=this.scope.config.slotFeatures[this.scope.game.activeMiniFeature.name]).hideUIOnDialogShow||t.hideUI)&&this.setWrapperVisibility(!0),this.game.getParameterValue("codependentMiniFeatures")&&(e&&(e.constructor===Array?e.forEach(function(e){this.presentation.destroyGameModePresentation(e.name)},this):this.presentation.destroyGameModePresentation(e.name)),this.scope.game.miniFeature=null,this.scope.game.newFeature=!1),this.scope.game.activeMiniFeature=null},sna.service.slot.SlotInterface.prototype.processOutcomeAnimations=function(){var e,t=this.scope.lastResult.outcome,i=this.scope.game;if(t.hasWins){this.winInProgress=!0,this.scope.game.mode(sna.model.slot.MODE_WIN),this.addGlobalPressCallback(this.fastWinFullStopCallback),i.isBigWin&&(e=this.playBigWinAnimation()),this.presentation.createAnimationTimeline("winFullAsync",0,!1,!0);t=this.playWinFullAnimation(),i=this.playLoseFullAnimation();return this.q.all([e,i,t]).then(this.handleFastWinStopPromise.bind(this)).then(this.removeGlobalPressCallback.bind(this,this.fastWinFullStopCallback)).then(this.processMiniFeatureAfterWin.bind(this)).then(this.afterWinPresentation.bind(this))}return this.processMiniFeatureAfterWin().then(this.afterWinPresentation.bind(this))},sna.service.slot.SlotInterface.prototype.handleFastWinStopPromise=function(e){},sna.service.slot.SlotInterface.prototype.useCustomSpinificationStaggers=function(){return!1},sna.service.slot.SlotInterface.prototype.playLoseFullAnimation=function(){return this.loseFull=!0,this.presentation.createAnimationTimeline("loseFull",0,!1,!0)},sna.service.slot.SlotInterface.prototype.playWinFullAnimation=function(){return this.loseFull=!1,this.presentation.createAnimationTimeline("winFull",0,!1,!0)},sna.service.slot.SlotInterface.prototype.playBigWinAnimation=function(){return this.presentation.createAnimationTimeline("bigWin",0,!1,!0,null)},sna.service.slot.SlotInterface.prototype.afterWinPresentation=function(){this.game.getParameterValue("destroyBigWinOnComplete")&&this.destroyBigWinGameMode();var e=this.scope.lastResult,t=e.outcome,i=t.features,n=null,s=null,r=null,o=this.scope.game,a=o.autoplay;this.communication.roundCompleted(),angular.forEach(i,function(e){e.active&&e.start&&(s=e),e.active&&e.end&&(n=e),!e.active||e.start||e.end||(r=e)},this);var l=this.q.defer(),i=l.promise;i=(i=i.then(this.presentation.createAnimationTimeline.bind(this.presentation,"afterWin",0,!1,!0,null))).then(this.endFreeRounds.bind(this)),l.resolve(!0);var h,l=!0;return n&&(this.isAutoplayThresholdTriggered()&&this.stopAutoplay(),i=(i=(h=this.scope.config.slotFeatures[n.name]).showWinIndividual?i.then(this.showFreeSpinsWinIndividual.bind(this)):i).then(this.finishFeature.bind(this,n,t,e))),!h||"end"!=h.destroyOn||s||r||a.active||(i=(i=i.then(this.enableInterface.bind(this))).then(this.restoreSpinInterface.bind(this))),s&&((this.isAutoplayThresholdTriggered()||this.scope.game.autoplay.active&&!this.scope.game.autoplay.left)&&this.stopAutoplay(),i=(i=(i=i.then(this.beforeFeatureStart.bind(this,s))).then(this.startFeature.bind(this,s,t,e))).then(this.afterFeatureStart.bind(this,s)),l=!1),r&&(i=i.then(this.updateFeature.bind(this,r,t,e)),e=this.scope.config.slotFeatures[r.name],this.isFeatureSpinAuto(e)&&(l=!1,e.showWinIndividual&&(i=i.then(this.showFreeSpinsWinIndividual.bind(this))),i=(i=e.delayBeforeSpin&&this.delayBeforeSpinCondition()?i.then(this.createTimerPromise.bind(this,e.delayBeforeSpin)):i).then(this.spin.bind(this,null)))),n&&l&&"FreeSpins"==h.type&&(this.game.getParameterValue("displayWinsAfterFreeSpins")||(l=!1)),this.scope.lastResult.outcome.win||(l=!1),s||r||n||(this.handleRealityCheck(),h=a.disabled=!1,o.freeRounds&&o.freeRounds.accepted&&o.freeRounds.end&&(h=!0),(this.isAutoplayThresholdTriggered()||h)&&(this.stopAutoplay(),this.restoreSpinInterface()),a.active&&a.left?(i=i.then(this.spin.bind(this)),l=!1):(0==o.autoplay.left&&o.autoplay.active&&this.stopAutoplay(),this.setReadyToSpinUserInterfaceState(),this.playIdleAnimations())),l&&this.winInProgress&&(i=i.then(this.handleWinIndividual.bind(this))),s||r||n||l||this.scope.game.mode(sna.model.slot.MODE_IDLE),s||r||n||!this.pendingFreeRounds||(this.scope.game.freeRounds.active=!0,this.setFreeRounds(),this.pendingFreeRounds=!1),i=i.then(this.presentation.unloadTextures.bind(this.presentation)),this.winInProgress=!1,i},sna.service.slot.SlotInterface.prototype.isFeatureSpinAuto=function(e){return"FreeSpins"===e.type&&"auto"===e.spin},sna.service.slot.SlotInterface.prototype.delayBeforeSpinCondition=function(){return!0},sna.service.slot.SlotInterface.prototype.setReadyToSpinUserInterfaceState=function(){this.enableInterface()},sna.service.slot.SlotInterface.prototype.isAutoplayThresholdTriggered=function(){return this.game.autoplayThresholdTriggered()},sna.service.slot.SlotInterface.prototype.handleRealityCheck=function(){},sna.service.slot.SlotInterface.prototype.handleWinIndividual=function(){this.spinInProgress||(this.scope.game.mode(sna.model.slot.MODE_WIN_INDIVIDUAL),this.presentation.createAnimationTimeline("winIndividual",0,!1,!0))},sna.service.slot.SlotInterface.prototype.showFreeSpinsWinIndividual=function(){var e=this.q.when(!0);return e=(e=(e=e.then(this.addGlobalPressCallback.bind(this,this.fastWinIndividualStopCallback))).then(this.presentation.createAnimationTimeline.bind(this.presentation,"winIndividualFS",0,!1,!0,null))).then(this.removeGlobalPressCallback.bind(this,this.fastWinIndividualStopCallback))},sna.service.slot.SlotInterface.prototype.fastStop=function(e){if(this.removeGlobalPressCallback(this.fastStopCallback),this.scope.game.mode(sna.model.slot.MODE_FAST_STOP),this.presentation.getById(this.getStopButtonId()).disable(),!this.scope.config.iface.enableEarlyReelStop||!this.earlyReelStopEnabled)return this.presentation.cancelAnimation("spinStop"),!0===e?this.presentation.createAnimationTimeline("fastSpinStop",0,!1,!0):this.presentation.createAnimationTimeline("fastSpinStop",0,!1,!0).then(this.processWin.bind(this));this.earlyReelStopTriggered=!0},sna.service.slot.SlotInterface.prototype.blockSpinInterface=function(){this.presentation.getById(this.getSpinButtonId()).hide();var e=this.scope.game.feature,t=this.scope.config.slotFeatures.fs;freeSpinActive=e&&e.active&&"FreeSpins"===t.type,freeSpinActive?("manual"==t.spin&&this.presentation.getById(this.getSpinButtonId()).show(),this.presentation.getById(this.getStopButtonId()).hideInPortrait()):this.presentation.getById(this.getStopButtonId()).show(),this.scope.config.iface.enableEarlyReelStop?(this.earlyReelStopEnabled=!0,this.earlyReelStopTriggered=!1,this.presentation.getById(this.getStopButtonId()).enable()):this.presentation.getById(this.getStopButtonId()).disable()},sna.service.slot.SlotInterface.prototype.createFastWinFullStopCallback=function(){return function(){this.fastWinStopClicked=!0,this.sounds.winAnimationStop(this.scope.game.feature),this.scope.game.mode(sna.model.slot.MODE_FAST_WIN),this.removeGlobalPressCallback(this.fastWinFullStopCallback),this.presentation.cancelAnimation("winFull",!0),this.presentation.cancelAnimation("loseFull",!0),this.presentation.cancelAnimation("bigWin",!0),this.presentation.createAnimationTimeline("fastWinStop",0,!1,!0).then(function(){this.winInProgress=!1}.bind(this))}.bind(this)},sna.service.slot.SlotInterface.prototype.createFastWinIndividualStopCallback=function(){return function(){this.scope.game.mode(sna.model.slot.MODE_FAST_WIN),this.removeGlobalPressCallback(this.fastWinIndividualStopCallback),this.presentation.cancelAnimation("winIndividualFS",!0),this.presentation.createAnimationTimeline("fastWinIndividualFSStop",0,!1,!0).then(function(){this.winInProgress=!1}.bind(this))}.bind(this)},sna.service.slot.SlotInterface.prototype.createFastStopCallback=function(){return function(){return this.fastStop()}.bind(this)},sna.service.slot.SlotInterface.prototype.enableQuickStop=function(){this.presentation.getById(this.getStopButtonId()).enable()},sna.service.slot.SlotInterface.prototype.restoreSpinInterface=function(){var e=this.scope.game,t=(e.autoplay,!1);e.freeRounds&&e.freeRounds.accepted&&e.freeRounds.end&&(t=!0),e.feature||e.autoplay.left||t||(this.presentation.getById(this.getSpinButtonId()).show(),this.presentation.getById(this.getStopButtonId()).hide())},sna.service.slot.SlotInterface.prototype.increaseBet=function(){this.game.scope.game.increaseBet(),this.updateBetButtonsOnBetChange()},sna.service.slot.SlotInterface.prototype.decreaseBet=function(){this.game.scope.game.decreaseBet(),this.updateBetButtonsOnBetChange()},sna.service.slot.SlotInterface.prototype.increaseBetLevel=function(){this.game.scope.game.increaseBetLevel(),this.updateBetButtonsOnBetChange()},sna.service.slot.SlotInterface.prototype.decreaseBetLevel=function(){this.game.scope.game.decreaseBetLevel(),this.updateBetButtonsOnBetChange()},sna.service.slot.SlotInterface.prototype.updateBetButtonsOnBetChange=function(){this.updateBetButtons(),this.updateMaxBetButton(),this.cashCoinsValuesUpdatePresentation(),this.autoUpdatePresentation()},sna.service.slot.SlotInterface.prototype.setWinThreshold=function(e,t){new RegExp(/^[0-9.]+$/).test(t)||(e.scope.inputValue=0),this.game.scope.game.setAautoplayWinThreshold(t)},sna.service.slot.SlotInterface.prototype.setWinThresholdState=function(e,t){this.game.scope.game.setAutoplayWinThresholdActive(t)},sna.service.slot.SlotInterface.prototype.setWinIncreaseThreshold=function(e,t){new RegExp(/^[0-9.]+$/).test(t)||(e.scope.inputValue=0),this.game.scope.game.setAutoplayWinIncreaseThreshold(t)},sna.service.slot.SlotInterface.prototype.setWinIncreaseThresholdState=function(e,t){this.game.scope.game.setAutoplayWinIncreaseThresholdActive(t)},sna.service.slot.SlotInterface.prototype.setWinDecreaseThreshold=function(e,t){new RegExp(/^[0-9.]+$/).test(t)||(e.scope.inputValue=0),this.game.scope.game.setAutoplayWinDecreaseThreshold(t)},sna.service.slot.SlotInterface.prototype.setWinDecreaseThresholdState=function(e,t){this.game.scope.game.setAutoplayWinDecreaseThresholdActive(t)},sna.service.slot.SlotInterface.prototype.setStopOnFeatureState=function(e,t){this.game.scope.game.setAutoplayStopOnFeature(t)},sna.service.slot.SlotInterface.prototype.setStopOnMiniFeatureState=function(e,t){this.game.scope.game.setAutoplayStopOnMiniFeature(t)},sna.service.slot.SlotInterface.prototype.setShowValuesInCash=function(e,t){this.scope.game.setShowValuesInCash(t="true"===(t="false"===t?!1:t)?!0:t),this.cashCoinsValuesUpdatePresentation(t)},sna.service.slot.SlotInterface.prototype.cashCoinsValuesUpdatePresentation=function(e){var t=this.presentation.getById(this.getBalanceId());t&&t.updatePresentation();var i=this.presentation.getById(this.getBetId());i&&((t=this.presentation.getById(this.getBetLabelId()))&&t.scope.config.coinsTranslation&&t.scope.config.cashTranslation&&(labelTranslation=e?t.scope.config.cashTranslation:t.scope.config.coinsTranslation,t.text=this.scope.translations[labelTranslation],t.dirty=!0),i.updatePresentation());i=this.presentation.getById(this.getWinId());i&&(i.updatePresentation(),this.scope.game.setWin(0),i.hide())},sna.service.slot.SlotInterface.prototype.getReelStagger=function(e,t){t=this.presentation.getById(t),t=t?t.scope.config:void 0;if(t){if(sna.service.util.readCookie("reelStagger")?t.reelStagger=parseFloat(sna.service.util.readCookie("reelStagger")):sna.service.util.readCookie("reelEndStagger")&&(t.reelEndStagger=parseFloat(sna.service.util.readCookie("reelEndStagger"))),t.reelStagger)return Math.abs(t.reelStagger-e.scope.config.max);if(t.reelEndStagger)return Math.abs(t.reelEndStagger-e.scope.config.max)}return 0},sna.service.slot.SlotInterface.prototype.setReelStagger=function(e,t,i){t=this.presentation.getById(t),t=t?t.scope.config:void 0;t&&(void 0!==t.reelStagger?(t.reelStagger=Math.abs(i-e.scope.config.max),sna.service.util.writeCookie("reelStagger",t.reelStagger)):void 0!==t.reelEndStagger&&(t.reelEndStagger=Math.abs(i-e.scope.config.max),sna.service.util.writeCookie("reelEndStagger",t.reelEndStagger)))},sna.service.slot.SlotInterface.prototype.maxBetToggle=function(e){e.toggleState?(this.scope.game.setMaxBet(),this.presentation.getById(this.getBetUpButtonId())&&this.presentation.getById(this.getBetUpButtonId()).disable()):(this.scope.game.restoreMaxBet(),this.scope.game.isMinBet()&&this.presentation.getById(this.getBetDownButtonId())&&this.presentation.getById(this.getBetDownButtonId()).disable()),this.restoreBetButtons(),this.scope.config.parameters.preserveWinOnMaxBet||this.scope.game.setWin(0);e=this.presentation.getById(this.getWinId());e&&e.hide(),this.autoUpdatePresentation()},sna.service.slot.SlotInterface.prototype.updateMaxBetButton=function(){this.presentation.getById(this.getMaxBetButtonId())&&(this.scope.game.isMaxBet()&&this.scope.game.isMaxBetLines()&&this.scope.game.isMaxBetLevel()?this.presentation.getById(this.getMaxBetButtonId()).setToggleState(!0):this.presentation.getById(this.getMaxBetButtonId()).setToggleState(!1))},sna.service.slot.SlotInterface.prototype.updateBetButtons=function(){this.scope.game.isMinBet()?(this.presentation.getById(this.getBetDownButtonId())&&this.presentation.getById(this.getBetDownButtonId()).disable(),this.presentation.getById(this.getBetUpButtonId())&&this.presentation.getById(this.getBetUpButtonId()).enable()):(this.scope.game.isMaxBet()?this.presentation.getById(this.getBetUpButtonId())&&this.presentation.getById(this.getBetUpButtonId()).disable():this.presentation.getById(this.getBetUpButtonId())&&this.presentation.getById(this.getBetUpButtonId()).enable(),this.presentation.getById(this.getBetDownButtonId())&&this.presentation.getById(this.getBetDownButtonId()).enable())},sna.service.slot.SlotInterface.prototype.restoreBetButtons=function(){!this.scope.game.isMinBet()&&this.presentation.getById(this.getBetDownButtonId())&&this.presentation.getById(this.getBetDownButtonId()).enable(),!this.scope.game.isMaxBet()&&this.presentation.getById(this.getBetUpButtonId())&&this.presentation.getById(this.getBetUpButtonId()).enable()},sna.service.slot.SlotInterface.prototype.fastStopMiniFeature=function(){return!1},sna.service.slot.SlotInterface.prototype.startMiniFeature=function(e,t){var i=this.q.when(!1),n=e.name,s=this.scope.config.slotFeatures[n];return this.game.getParameterValue("miniFeatureStatesEnabled")&&s.triggerOn!==t||(this.scope.game.activeMiniFeature=e,this.scope.game.mode(sna.model.slot.MODE_FEATURE_START),s.notGameMode||(i=i.then(this.presentation.loadGameModePresentation.bind(this.presentation,n))),this.fastStopMiniFeature(e,t)||(i=i.then(this.beforeMiniFeatureStart.bind(this,e,t)),i=(i=(i=(i=s.hideOnStart?i.then(this.setMiniFeatureElementsOptions.bind(this,s,"hide")):i).then(this.triggerEvent.bind(this,n+"MiniFeatureSetup"))).then(this.playMiniFeature.bind(this,e))).then(this.finishMiniFeature.bind(this,e)))),i},sna.service.slot.SlotInterface.prototype.miniFeatureFastStop=function(e,t){},sna.service.slot.SlotInterface.prototype.beforeMiniFeatureStart=function(e){return e.started=!0,this.sounds.beforeMiniFeatureStart(),this.playMiniFeatureBeforeAnimation(e)},sna.service.slot.SlotInterface.prototype.playMiniFeatureBeforeAnimation=function(e){return this.presentation.createAnimationTimeline(e.name+"Before",0,!1,!0)},sna.service.slot.SlotInterface.prototype.playMiniFeature=function(e){this.sounds.miniFeatureStart();var t=this.scope.config.slotFeatures[e.name],i=this.q.when(!0),i=t.fastStopEnabled?i.then(this.playAnimationWithFastStop.bind(this,e.name+"Start")):(i=t.hideUIOnDialogShow||t.hideUI?i.then(this.setWrapperVisibility.bind(this,!1)):i).then(this.presentation.createAnimationTimeline.bind(this.presentation,e.name+"Start",0,!1,!0,null));return t.picker&&(i=(i=t.picker.in?i.then(this.presentation.createAnimationTimeline.bind(this.presentation,t.picker.in,0,!1,!0,null)):i).then(this.handlePickerFeature.bind(this,e)),t.picker.out&&(i=i.then(this.presentation.createAnimationTimeline.bind(this.presentation,t.picker.out,0,!1,!0,null)))),t.confirmation&&(i=i.then(this.processMiniFeatureConfirmation.bind(this,e,t))),t.hideUIOnDialogShow&&(i=i.then(this.setWrapperVisibility.bind(this,!0))),i=t.createTrigger?i.then(this.triggerEvent.bind(this,e.name+"Trigger")):i},sna.service.slot.SlotInterface.prototype.processMiniFeatureConfirmation=function(e,t){return t.confirmation.enabled?(this.processMiniFeatureConfirmationButton(t),(this.isInReplay()?this.createTimerPromise(3):this.waitForUserConfirmation(e.name+"Start")).then(this.onMiniFeatureConfirmed.bind(this,e))):this.q.when(!0)},sna.service.slot.SlotInterface.prototype.onMiniFeatureConfirmed=function(e){return this.presentation.createAnimationTimeline(e.name+"After")},sna.service.slot.SlotInterface.prototype.processMiniFeatureConfirmationButton=function(e){var e=e.confirmation.buttonId;void 0===e||(e=this.presentation.getById(e))&&e.enable()},sna.service.slot.SlotInterface.prototype.playAnimationWithFastStop=function(e){this.fastStopAnimationPromise[e]=this.q.when(!0);var t=this.q.when(!0),i=this.createFastStopAnimationCallback(e);return t=(t=(t=(t=t.then(this.addGlobalPressCallback.bind(this,i))).then(this.presentation.createAnimationTimeline.bind(this.presentation,e,0,!1,!0,null))).then(this.removeGlobalPressCallback.bind(this,i))).then(this.waitForFastStopAnimationPromise.bind(this,e))},sna.service.slot.SlotInterface.prototype.createFastStopAnimationCallback=function(e){var t=function(){this.removeGlobalPressCallback(t),this.presentation.cancelAnimation(e,!0),this.fastStopAnimationPromise[e]=this.presentation.createAnimationTimeline(e+"FastStop")}.bind(this);return t},sna.service.slot.SlotInterface.prototype.waitForFastStopAnimationPromise=function(e){return this.fastStopAnimationPromise[e]},sna.service.slot.SlotInterface.prototype.handlePickerFeature=function(e){if(this.activePicker={feature:e,config:this.scope.config.slotFeatures[e.name],buttons:this.getPickerButtons(e),deferred:this.q.defer()},this.activePicker.buttons.forEach(function(e){e.enable()}),e.active)return this.activePicker.deferred.promise},sna.service.slot.SlotInterface.prototype.getPickerButtons=function(e){for(var t=this.scope.config.slotFeatures[e.name].picker,i=[],n=t.buttonPrefix||e.name,s=t.buttonSuffix||"Option",r=0;r<t.optionCount;r++){var o=this.presentation.getById(n+s+r);o&&i.push(o)}return i},sna.service.slot.SlotInterface.prototype.handlePickerOption=function(t,e){this.activePicker.buttons.forEach(function(e){t===e?e.disableNormal():e.disable()});var i=this.activePicker.buttons.indexOf(t);-1<i&&this.activePicker.buttons.splice(i,1),this.activePicker.lastPicked=t;var i=this.q.when(!0);return i=(i=(i=i.then(this.getPickerResponse.bind(this,e))).then(this.playPickerRevealAnimation.bind(this))).then(this.handlePickerOutcome.bind(this))},sna.service.slot.SlotInterface.prototype.getPickerResponse=function(e){return this.q.when(!0)},sna.service.slot.SlotInterface.prototype.playPickerRevealAnimation=function(){return this.presentation.createAnimationTimeline(this.activePicker.feature.name+"Reveal",0,!1,!0,null)},sna.service.slot.SlotInterface.prototype.handlePickerOutcome=function(){if(this.isPickerFinished())return this.activePicker.deferred.resolve(!0);this.activePicker.buttons.forEach(function(e){e.enable()})},sna.service.slot.SlotInterface.prototype.isPickerFinished=function(){return!1},sna.service.slot.SlotInterface.prototype.setMiniFeatureElementsOptions=function(i,n){var s="hide"==n;if(s&&(this.hideOnStartValueHolder=[]),i.hideOnStart.forEach(function(e){var t=this.presentation.getById(e);t&&(t.animations.tweenMiniFeature&&delete t.animations.tweenMiniFeature,s?i.tweenHideOnStart?(this.hideOnStartValueHolder[e]={},this.hideOnStartValueHolder[e].alpha=t.alpha,this.hideOnStartValueHolder[e].visible=t.visible,this.tweenMiniFeatureAnimationConfig={variant:"Sequence",name:"tweenMiniFeature",children:[{variant:"Tween",duration:i.tweenDuration||.3,alpha:0},"call:hide"]},t.animation(this.tweenMiniFeatureAnimationConfig.name,t.presentation.createAnimation(t,this.tweenMiniFeatureAnimationConfig))):(this.hideOnStartValueHolder[e]=t.visible,t[n]()):this.hideOnStartValueHolder[e]&&(this.hideOnStartValueHolder[e].visible&&t[n](),i.tweenHideOnStart&&(e=null!=this.hideOnStartValueHolder[e].alpha?this.hideOnStartValueHolder[e].alpha:1,this.tweenMiniFeatureAnimationConfig={variant:"Sequence",name:"tweenMiniFeature",children:[{variant:"Tween",duration:i.tweenDuration||.3,alpha:e}]},t.animation(this.tweenMiniFeatureAnimationConfig.name,t.presentation.createAnimation(t,this.tweenMiniFeatureAnimationConfig)))))},this),s||(delete this.hideOnStartValueHolder,delete this.tweenMiniFeatureAnimationConfig),i.tweenHideOnStart)return this.presentation.createAnimationTimeline("tweenMiniFeature",0,!1,!0)},sna.service.slot.SlotInterface.prototype.finishMiniFeature=function(e,t){this.sounds.miniFeatureEnd(),this.scope.game.mode(sna.model.slot.MODE_FEATURE_STOP);var i=e.name,n=this.scope.config.slotFeatures[i],s=this.scope.game.feature||this.scope.game.newFeature;return n.notClearedOnComplete||this.scope.game.miniFeature&&this.scope.game.miniFeature.constructor==Array||(this.scope.game.miniFeature={}),n.notGameMode||this.game.getParameterValue("codependentMiniFeatures")||this.presentation.destroyGameModePresentation(i),s||n.interfaceDisabledOnFinish||(this.enableInterface(),this.restoreSpinInterface()),this.scope.game.newFeature=!1,n.hideUIOnDialogShow&&this.setWrapperVisibility(!1),this.presentation.createAnimationTimeline(e.name+"End",0,!1,!0).then(function(){n.hideOnStart&&this.setMiniFeatureElementsOptions(n,"show")}.bind(this))},sna.service.slot.SlotInterface.prototype.beforeFeatureStart=function(e){return this.sounds.beforeFeatureStart(),this.presentation.createAnimationTimeline(e.name+"Before",0,!1,!0)},sna.service.slot.SlotInterface.prototype.afterFeatureStart=function(e){return this.sounds.afterFeatureStart(),this.presentation.createAnimationTimeline(e.name+"After",0,!1,!0)},sna.service.slot.SlotInterface.prototype.startFeature=function(e){this.onFeatureStart(),this.sounds.featureStart(),this.scope.game.mode(sna.model.slot.MODE_FEATURE_START);var t=e.name;return this.scope.game.feature=e,this.presentation.loadGameModePresentation(t).then(this.afterFeatureLoaded.bind(this,t)).then(this.processFeatureTypeAndPlayStartAnimation.bind(this,t))},sna.service.slot.SlotInterface.prototype.afterFeatureLoaded=function(e){return this.q.when(!0)},sna.service.slot.SlotInterface.prototype.processFeatureTypeAndPlayStartAnimation=function(n){var e,t,i=this.scope.config.slotFeatures[n],s=this.triggerEvent(n+"FeatureSetup");return"SelectOption"===i.type&&(this.scope.game.mode(sna.model.slot.MODE_FEATURE_WAIT),this.presentation.getById(i.optionsId).setOptionAction(function(e){this.scope.game.mode(sna.model.slot.MODE_FEATURE_PLAY);var t=null,i=this.presentation.createAnimationTimeline(n+"Select",0,!1,!0),e=this.communication.playFeature(n,{value:e}).then(function(e){t=e});this.q.all([i,e]).then(function(){return this.processFeatureOutcome(t)}.bind(this))}.bind(this))),"Confirmation"===i.type&&(this.scope.game.mode(sna.model.slot.MODE_FEATURE_WAIT),this.featureAlreadyConfirmed=!1,e=function(){if(!this.featureAlreadyConfirmed){this.featureAlreadyConfirmed=!0,this.scope.game.mode(sna.model.slot.MODE_FEATURE_PLAY);var e=this.presentation.createAnimationTimeline(n+"Confirm",0,!1,!0);return e=(e=e.then(this.communication.playFeature.bind(this.communication,n))).then(function(e){this.processFeatureOutcome(e)}.bind(this))}}.bind(this),(t=this.presentation.getById(i.confirmId))&&t.setPressAction(e),t=this.scope.game.autoplay,i.maxDisplayTime?window.setTimeout(e,1e3*i.maxDisplayTime):i.maxDisplayTimeAutoplay&&t.active&&t.left&&window.setTimeout(e,1e3*i.maxDisplayTimeAutoplay)),s=s.then(this.playFeatureStartAnimation.bind(this,n))},sna.service.slot.SlotInterface.prototype.playFeatureStartAnimation=function(e){return this.presentation.createAnimationTimeline(e+"Start",0,!1,!0,null)},sna.service.slot.SlotInterface.prototype.onFeatureStart=function(){this.disableInterface()},sna.service.slot.SlotInterface.prototype.finishFeature=function(e,t,i){this.sounds.featureEnd(),this.scope.game.mode(sna.model.slot.MODE_FEATURE_STOP);var n=e.name,s=this.scope.config.slotFeatures[n];s.totalWinDisplay&&(this.scope.game.totalWin=e.totalWin);var r=this.scope.game;return this.scope.game.feature=e,this.game.getParameterValue("markFeatureCompletedOnClose")||(this.scope.game.feature.completed=!0),this.featureAlreadyClosed=!1,this.presentation.createAnimationTimeline(n+"End",0,!1,!0).then(this.presentation.createAnimationTimeline.bind(this.presentation,n+"EndDone",0,!1,!0,null)).then(this.sounds.featureEndDone.bind(this)).then(this.triggerEvent.bind(this,n+"End")).then(function(){var e;"end"==s.destroyOn&&(this.presentation.destroyGameModePresentation(n),this.restoreSpinInterface(),this.enableInterface(),this.scope.game.feature=null,(e=this.scope.game.autoplay).disabled=!1,e.active&&e.left&&this.spin()),"close"==s.destroyOn&&(e=r.autoplay,s.maxDisplayTimeEnd?window.setTimeout(this.closeFeature.bind(this,null,n),1e3*s.maxDisplayTimeEnd):s.maxDisplayTimeEndAutoplay&&e.active&&e.left&&window.setTimeout(this.closeFeature.bind(this,null,n),1e3*s.maxDisplayTimeEndAutoplay)),this.scope.config.iface.handleRealityCheckOnFeatureFinish&&this.handleRealityCheck()}.bind(this))},sna.service.slot.SlotInterface.prototype.updateFeature=function(e,t,i){return this.scope.game.feature=e,this.presentation.createAnimationTimeline(e.name+"Update",0,!1,!0)},sna.service.slot.SlotInterface.prototype.closeFeature=function(e,t){if(this.sounds.featureClose(),this.featureAlreadyClosed)return this.q.when(!0);this.scope.game.feature&&this.game.getParameterValue("markFeatureCompletedOnClose")&&(this.scope.game.feature.completed=!0),this.featureAlreadyClosed=!0,this.scope.game.mode(sna.model.slot.MODE_FEATURE_CLOSE);var i=t,t=this.scope.lastResult;angular.forEach(t.outcome.features,function(e){e.name===i&&0},this);var n=this.scope.config.slotFeatures[i];return this.presentation.createAnimationTimeline(i+"Close",0,!1,!0).then(function(){"close"==n.destroyOn&&(this.presentation.destroyGameModePresentation(i),this.scope.game.feature=null),this.restoreSpinInterface();var e=this.scope.game.autoplay;e.disabled=!1,e.active&&e.left&&this.spin()}.bind(this))},sna.service.slot.SlotInterface.prototype.processFeatureOutcome=function(e){var t=(this.scope.lastResult=e).outcome,i=t.features,n=null,s=null,r=null;angular.forEach(i,function(e){e.start&&(s=e),e.end&&(n=e),!e.active||e.end||e.start||(r=e)},this);var o=this.q.defer(),i=o.promise;return o.resolve(!0),n&&(i=i.then(this.finishFeature.bind(this,n,t,e))),s&&(i=(i=i.then(this.beforeFeatureStart.bind(this,s))).then(this.startFeature.bind(this,s,t,e))),i=r&&"fs"!=r.name?i.then(this.updateFeature.bind(this,r)):i},sna.service.slot.SlotInterface.prototype.openAutoplay=function(){this.presentation.createAnimationTimeline("autoplayOpen",0,!1,!0),this.autoplayMenuOpened=!0},sna.service.slot.SlotInterface.prototype.stopAutoplay=function(){this.presentation.createAnimationTimeline("autoplayStop",0,!1,!0),this.scope.game.stopAutoplay(),this.winInProgress&&this.restoreSpinInterface(),this.autoplayMenuOpened=!1},sna.service.slot.SlotInterface.prototype.toggleAutoplay=function(){this.autoplayMenuOpened?this.stopAutoplay():this.openAutoplay()},sna.service.slot.SlotInterface.prototype.startAutoplay=function(e,t){t=Number(t),this.scope.game.setAutoplayRounds(t),this.presentation.createAnimationTimeline("autoplayStart",0,!1,!0).then(function(){this.spin()}.bind(this))},sna.service.slot.SlotInterface.prototype.disableInterface=function(){this.presentation.createAnimationTimeline("disableInterface",0,!1,!0)},sna.service.slot.SlotInterface.prototype.enableInterface=function(){this.spinInProgress||this.hasPendingFreeRoundsNotification||!this.gameReady||this.presentation.createAnimationTimeline("enableInterface",0,!1,!0)},sna.service.slot.SlotInterface.prototype.debugger=function(e){},sna.service.slot.SlotInterface.prototype.setUseSpinShortcut=function(e,t){this.useSpinShortcut="true"==t,sna.service.util.writeCookie("useSpinShortcut",this.useSpinShortcut)},sna.service.slot.SlotInterface.prototype.getUseSpinShortcut=function(){return this.useSpinShortcut},sna.service.slot.SlotInterface.prototype.getShoInCoins=function(){return 0==this.scope.game.showValuesInCash},sna.service.slot.SlotInterface.prototype.getShoInCash=function(){return this.scope.game.showValuesInCash},sna.service.slot.SlotInterface.prototype.setVibrationEnabled=function(e,t){this.game.scope.game.setVibrationEnabled("true"==t)},sna.service.slot.SlotInterface.prototype.getVibrationEnabled=function(){return this.game.scope.game.getVibrationEnabled()},sna.service.slot.SlotInterface.prototype.playCheat=function(e,t){this.presentation.getById(this.getCheatsId()).hide(),this.communication.playCheat(t)},sna.service.slot.SlotInterface.prototype.playCheat=function(e,t){this.cheatStack.push(t),sna.debug.debugPanelEnabled&&sna.debug.enableCheats&&this.recreateArray()},sna.service.slot.SlotInterface.prototype.createCheatText=function(e,t){var i,n;sna.debug.debugPanelEnabled&&sna.debug.enableCheats&&(n=(i=this.presentation.getById("debugPanelContainer")).scope.config.textButton,e.constructor==Object&&(e="RESPONSE ID: "+e.id),n.text=e,n.stackId=t,n.onPress=n.onPress+":"+e,n.y=i.scope.config.yOffset*(t+2),i.children[1].addChild(this.presentation.createPresentation(n,i.children[1],i.children[1].scope.model)))},sna.service.slot.SlotInterface.prototype.showHideDebugPanel=function(){var e=this.presentation.getById("debugPanelContainer");e.visible?e.hide():e.show()},sna.service.slot.SlotInterface.prototype.recreateArray=function(){for(var e=0;e<this.cheatStack.length;e++)this.createCheatText(this.cheatStack[e],e)},sna.service.slot.SlotInterface.prototype.removeMe=function(e,t){if(sna.debug.debugPanelEnabled&&sna.debug.enableCheats){var i=this.presentation.getById("debugPanelContainer");if(i.children[1].removeChildren(0,Object.keys(i.children[1].children).length),e)for(var n=0;n<this.cheatStack.length;n++)n===e.scope.config.stackId&&this.cheatStack.splice(n,1);this.recreateArray()}},sna.service.slot.SlotInterface.prototype.playCheatStack=function(e,t){this.presentation.getById(this.getCheatsId()).hide(),this.communication.playCheat(t);t=this.presentation.getById("manualCheat");this.removeMe(),t.hide(),this.isDialogOpened=!1},sna.service.slot.SlotInterface.prototype.getStopButtonId=function(){return"StopButton"},sna.service.slot.SlotInterface.prototype.getSpinButtonId=function(){return"SpinButton"},sna.service.slot.SlotInterface.prototype.getBetUpButtonId=function(){return"betUp"},sna.service.slot.SlotInterface.prototype.getBetDownButtonId=function(){return"betDown"},sna.service.slot.SlotInterface.prototype.getMaxBetButtonId=function(){return"maxBet"},sna.service.slot.SlotInterface.prototype.getCheatsId=function(){return"cheats"},sna.service.slot.SlotInterface.prototype.getSettingsPagesPanelId=function(){return"settingsPagesPanel"},sna.service.slot.SlotInterface.prototype.getBalanceId=function(){return"balanceValue"},sna.service.slot.SlotInterface.prototype.getBetId=function(){return"betValue"},sna.service.slot.SlotInterface.prototype.getBetLabelId=function(){return"betLabel"},sna.service.slot.SlotInterface.prototype.getWinId=function(){return"winValue"},sna.service.slot.SlotInterface.prototype.setFreeRounds=function(e){var t=this.scope.game.freeRounds.accepted;if(e&&e.end?this.scope.game.freeRounds.used++:e&&(this.scope.game.freeRounds=e),this.scope.game.freeRounds.accepted=t,!this.game.isFreeRoundsAccepted()){e=this.scope.game.isInMode(sna.model.slot.MODE_IDLE),t=this.scope.game.isInMode(sna.model.slot.MODE_WIN_INDIVIDUAL);if(e||t)return this.presentation.createAnimationTimeline("$freeRoundsStart",0,!1,!0,null);this.scope.game.freeRounds.active=!1,this.pendingFreeRounds=!0}},sna.service.slot.SlotInterface.prototype.endFreeRounds=function(){if(this.game.isFreeRoundsAccepted()&&this.game.isFreeRoundsEnd()&&(this.scope.game.autoplay.active&&this.stopAutoplay(),this.game.endFreeRounds(),this.presentation.createAnimationTimeline("freeRoundsEnd",0,!1,!0,null),this.freeRoundsConfirmPromise=this.q.defer()),this.freeRoundsConfirmPromise)return this.freeRoundsConfirmPromise.promise},sna.service.slot.SlotInterface.prototype.acceptFreeRounds=function(){return this.game.acceptFreeRounds(),this.presentation.createAnimationTimeline("freeRoundsAccepted",0,!1,!0).then(this.presentation.createAnimationTimeline.bind(this.presentation,"freeRoundsClose",0,!1,!0,null))},sna.service.slot.SlotInterface.prototype.declineFreeRounds=function(){return this.scope.game.freeRounds.rejected=!0,this.scope.game.freeRounds.active=!1,this.communication.declineFreeRounds(this.scope.game.freeRounds.id).then(this.presentation.createAnimationTimeline.bind(this.presentation,"freeRoundsClose",0,!1,!0,null))},sna.service.slot.SlotInterface.prototype.useLaterFreeRounds=function(){return this.scope.game.freeRounds.active=!1,this.presentation.createAnimationTimeline("freeRoundsClose",0,!1,!0)},sna.service.slot.SlotInterface.prototype.updateFreeRounds=function(){var e=this.scope.game.freeRounds;return e.end=e.used==e.total,this.presentation.createAnimationTimeline("freeRoundsUpdate",0,!1,!0,null)},sna.service.slot.SlotInterface.prototype.createTimerPromise=function(e,t,i){var n=this.q.defer();t=void 0===t||t;return this.timer=window.setTimeout(function(){n.resolve(t)},1e3*e),n.promise},sna.service.slot.SlotInterface.prototype.confirmFreeRoundsEnd=function(){return this.freeRoundsConfirmPromise.resolve(),this.game.resetFreeRounds(),this.enableInterface(),this.presentation.createAnimationTimeline("freeRoundsClose",0,!1,!0)},sna.service.slot.SlotInterface.prototype.waitForUserConfirmation=function(e){return void 0===this.confirmPromises&&(this.confirmPromises={}),this.confirmPromises[e]=this.q.defer(),this.confirmPromises[e].promise},sna.service.slot.SlotInterface.prototype.userConfirmed=function(e,t,i,n){return null!=e&&e.disable(),null!=t&&void 0!==this.confirmPromises&&null!==this.confirmPromises&&void 0!==this.confirmPromises[t]&&null!==this.confirmPromises[t]?this.confirmPromises[t].resolve(n):log(this,"userConfirmed",sna.log.ERROR,"No such message confirmation"+t),void 0!==i?this.presentation.createAnimationTimeline(i,0,!1,!0,null):this.q.when(!0)},sna.service.slot.SlotInterface.prototype.restoreFeature=function(e){return this.scope.game.feature=e,this.restoreGameModePresentation(e)},sna.service.slot.SlotInterface.prototype.restoreGameModePresentation=function(e){var t=this.presentation.loadGameModePresentation(e.name);return t=(t=t.then(this.triggerEvent.bind(this,e.name+"Restore"))).then(this.presentation.createAnimationTimeline.bind(this.presentation,e.name+"Restore",0,!1,!0,null))},sna.service.slot.SlotInterface.prototype.destroyBigWinGameMode=function(){var e=this.presentation.scope.config.parameters.bigWinValues,t=this.presentation.scope.config.parameters.bigWinAssetPackPrefix;if(t&&e){for(var i=0;i<e.length;i++)this.presentation.destroyGameModePresentation(t+i);return PIXI.utils.clearTextureCache(),this.q.when(!0)}},sna.service.slot.SlotInterface.prototype.setAnyFlag=function(e,t){return this[e]=t,!1},sna.service.slot.SlotInterface.prototype.getAnyFlag=function(e){return this[e]},sna.service.slot.SlotInterface.prototype.setSpinInProgress=function(e){this.spinInProgress=e},sna.service.slot.SlotInterface.prototype.updateReelsPresentation=function(){var e=this.presentation.getById("reels");if(e)for(var t=0;t<e.reels.length;t++)e.reels[t].prepareOutcomeSymbols(!1)},sna.service.slot.SlotInterfaceProvider=function(){sna.service.InterfaceProvider.call(this)},sna.service.slot.SlotInterfaceProvider.prototype=new sna.service.InterfaceProvider,sna.service.slot.SlotInterfaceProvider.prototype._create=function(){return new sna.service.slot.SlotInterface},sna.module.slot.provider(sna.service.slot.SLOT_INTERFACE,function(){return new sna.service.slot.SlotInterfaceProvider}),sna.service.slot.SLOT_COMMUNICATION="SlotCommunicationService",sna.service.slot.SlotCommunication=function(e){sna.service.Communication.call(this,e),this.name=sna.service.slot.SLOT_COMMUNICATION},sna.service.slot.SlotCommunication.prototype=new sna.service.Communication({}),sna.service.slot.SlotCommunication.prototype.spin=function(){var e=this.q.defer();return e.resolve({}),e.promise},sna.service.slot.SlotCommunication.prototype.closeSpin=function(){var e=this.q.defer();return e.resolve({}),e.promise},sna.service.slot.SlotCommunicationProvider=function(){sna.service.CommunicationProvider.call(this)},sna.service.slot.SlotCommunicationProvider.prototype=new sna.service.CommunicationProvider,sna.service.slot.SlotCommunicationProvider.prototype._create=function(){return new sna.service.slot.SlotCommunication(this.config)},sna.module.slot.provider(sna.service.slot.SLOT_COMMUNICATION,function(){return new sna.service.slot.SlotCommunicationProvider}),sna.presentation.slot.SYMBOL_DYNAMIC_CONTAINER="SymbolDynamicContainer",sna.presentation.slot.SymbolDynamicContainer=function(e,t){sna.presentation.Container.call(this,e,t.presentation),this.enabled=!0,this.sounds=t.sounds,this.iface=t.iface,this.symbolPayouts=[]},sna.presentation.slot.SymbolDynamicContainer.prototype=Object.create(sna.presentation.Container.prototype),sna.presentation.slot.SymbolDynamicContainer.prototype.initPresentationContainer=sna.presentation.Container.prototype.initPresentation,sna.presentation.slot.SymbolDynamicContainer.prototype.initPresentation=function(){this.initPresentationContainer(),this.onInitSymbolContainer(),this.initSymbolLayers(),this.initSymbolPresentation(),this.initBlurredPresentation(),this.initPayoutConfig(),this.initAnimations()},sna.presentation.slot.SymbolDynamicContainer.prototype.onInitSymbolContainer=function(){this.scope.model.winAnimationName=this.scope.config.winAnimationName,this.scope.model.landAnimationName=this.scope.config.landAnimationName},sna.presentation.slot.SymbolDynamicContainer.prototype.initSymbolLayers=function(){this.staticLayer=this.scope.parent.staticSymbolLayer,this.winLayer=this.scope.parent.scope.parent.winSymbolLayer},sna.presentation.slot.SymbolDynamicContainer.prototype.initSymbolPresentation=function(){var e=this.scope.config,e=this.shouldUseDynamicPresentation()?e.dynamic:e.static;this.symbolPresentation=this.presentation.createPresentation(e,this,this.scope.model),this.addChild(this.symbolPresentation)},sna.presentation.slot.SymbolDynamicContainer.prototype.initBlurredPresentation=function(){var e=this.scope.config;e.blur&&(this.symbolPresentationBlurred=this.presentation.createPresentation(e.blur,this,this.scope.model),this.addChild(this.symbolPresentationBlurred),this.symbolPresentationBlurred.visible=!1)},sna.presentation.slot.SymbolDynamicContainer.prototype.switchPresentation=function(e,t){e=this.scope.config[e],t=t||this.scope.model;this.symbolPresentation.destroy({children:!0}),this.symbolPresentation=this.presentation.createPresentation(e,this,t),this.addChild(this.symbolPresentation),this.additionalThingsToSet()},sna.presentation.slot.SymbolDynamicContainer.prototype.additionalThingsToSet=function(){},sna.presentation.slot.SymbolDynamicContainer.prototype.shouldUseDynamicPresentation=function(){return this.scope.model.win||this.scope.config.forceDynamic},sna.presentation.slot.SymbolDynamicContainer.prototype.blur=function(e){this.symbolPresentation.visible=!e,this.symbolPresentationBlurred.visible=e},sna.presentation.slot.SymbolDynamicContainer.prototype.showWin=function(){},sna.presentation.slot.SymbolDynamicContainer.prototype.showStatic=function(){},sna.presentation.slot.SymbolDynamicContainer.prototype.landingAction=function(){},sna.presentation.slot.SymbolDynamicContainer.prototype.transformToSymbol=function(e){this.scope.model.type=this.iface.scope.game.symbols[e];var t=this.scope.config.y,e=this.scope.config.x;this.scope.config=this.scope.parent.getSymbolConfig(this.scope.model),this.scope.config.x=e,this.scope.config.y=t,this.symbolPresentation&&(this.symbolPresentation.destroy({children:!0}),this.initSymbolPresentation()),this.symbolPresentationBlurred&&(this.symbolPresentationBlurred.destroy({children:!0}),this.initBlurredPresentation()),this.onInitSymbolContainer()},sna.presentation.slot.SymbolDynamicContainer.prototype.initAnimations=function(){this.initWinFullAnimation(),this.initWinIndividualAnimation(),this.initStopWinIndividualAnimation(),this.initLoseFullAnimation(),this.initSpinStartAsyncAnimation(),this.initLandingAnimation(),this.initSpinificationHoldAnimation(),this.initStopSpinificationHoldAnimation()},sna.presentation.slot.SymbolDynamicContainer.prototype.initSpinificationHoldAnimation=function(){var e={name:"spinificationHold",variant:"Sequence",children:["stop:symbolLand","call:bringToFront","children:spinificationHold:cascade"]},t=this.presentation.createAnimation(this,e);this.animation(e.name,t)},sna.presentation.slot.SymbolDynamicContainer.prototype.initStopSpinificationHoldAnimation=function(){var e={name:"stopSpinificationHold",variant:"Sequence",children:["stop:spinificationHold","call:bringToBack","children:stopSpinificationHold:cascade"]},t=this.presentation.createAnimation(this,e);this.animation(e.name,t)},sna.presentation.slot.SymbolDynamicContainer.prototype.initLoseFullAnimation=function(){var e={name:"loseFull",variant:"Group",children:["stop:symbolLand","children:loseFull:cascade"]},t=this.presentation.createAnimation(this,e);this.animation(e.name,t)},sna.presentation.slot.SymbolDynamicContainer.prototype.initWinIndividualAnimation=function(){var e={variant:"Sequence",name:"winIndividual",condition:{type:"AND",values:["@model.win",{type:"NOT",value:"@parent.winDisabled"}]},children:["call:bringToFront","children:winIndividual:cascade","call:bringToBack"]},t=this.presentation.createAnimation(this,e);this.animation(e.name,t)},sna.presentation.slot.SymbolDynamicContainer.prototype.initStopWinIndividualAnimation=function(){var e={type:"Animation",variant:"Group",name:"stopWinIndividual",children:["stop:winIndividual","children:stopWinIndividual:cascade"]},t=this.presentation.createAnimation(this,e);this.animation(e.name,t)},sna.presentation.slot.SymbolDynamicContainer.prototype.initWinFullAnimation=function(){var e={type:"Animation",variant:"Sequence",name:"winFull",condition:{type:"AND",values:["@model.win",{type:"NOT",value:"@parent.winDisabled"}]},children:["call:bringToFront","children:winFull:cascade","call:bringToBack"],stagger:0},t=this.presentation.createAnimation(this,e);this.animation(e.name,t)},sna.presentation.slot.SymbolDynamicContainer.prototype.initFastWinStopAnimation=function(){var e={type:"Animation",variant:"Group",name:"fastWinStop",children:["children","call:showStatic"]},t=this.presentation.createAnimation(this,e);this.animation(e.name,t)},sna.presentation.slot.SymbolDynamicContainer.prototype.initSpinStartAsyncAnimation=function(){var e={type:"Animation",variant:"Group",name:"spinStartAsync",children:["stop:winIndividual","children:spinStartAsync:cascade","call:bringToBack"]},t=this.presentation.createAnimation(this,e);this.animation(e.name,t)},sna.presentation.slot.SymbolDynamicContainer.prototype.initLandingAnimation=function(){var e={type:"Animation",variant:"Group",name:"symbolLand",children:this.setLandingCondition()?["children:symbolLand:cascade","call:landingAction"]:[]},t=this.presentation.createAnimation(this,e);this.animation(e.name,t)},sna.presentation.slot.SymbolDynamicContainer.prototype.setLandingCondition=function(){return this.scope.model.landAnimationName},sna.presentation.slot.SymbolDynamicContainer.prototype.shouldShiftStaticLayer=function(){return"object"==typeof this.winLayer},sna.presentation.slot.SymbolDynamicContainer.prototype.bringToFront=function(){this.shouldShiftStaticLayer()&&(this.parentLayer=this.winLayer)},sna.presentation.slot.SymbolDynamicContainer.prototype.bringToBack=function(){this.shouldShiftStaticLayer()&&(this.parentLayer=this.staticLayer)},sna.presentation.slot.SymbolDynamicContainer.prototype.initPayoutConfig=function(){this.makePayoutInteractive(this)},sna.presentation.slot.SymbolDynamicContainer.prototype.makePayoutInteractive=function(e){e.interactive=!0,e.allowGlobalPress=!0;var t,i,n,s,r,o,a,l,h=this.presentation.main.iface.scope.config.parameters;h.miniPaytable&&(i=void 0!==(t=h.miniPaytable.constructor===Object?h.miniPaytable:{}).x?t.x:-30,n=void 0!==t.y?t.y:-10,s=void 0!==t.size?t.size:40,r=void 0!==t.vSpacing?t.vSpacing:50,o=h.miniPaytable.symbolHitArea,void 0!==t.customOffsets&&void 0!==t.customOffsets[this.scope.model.type.name]&&(t.customOffsets[this.scope.model.type.name].x&&(i=t.customOffsets[this.scope.model.type.name].x),t.customOffsets[this.scope.model.type.name].y&&(n=t.customOffsets[this.scope.model.type.name].y),t.customOffsets[this.scope.model.type.name].symbolHitArea&&(o=t.customOffsets[this.scope.model.type.name].symbolHitArea),t.customOffsets[this.scope.model.type.name].size&&(s=t.customOffsets[this.scope.model.type.name].size),t.customOffsets[this.scope.model.type.name].vSpacing&&(r=t.customOffsets[this.scope.model.type.name].vSpacing)),o&&(a=o.width*this.presentation.globalScale,l=o.height*this.presentation.globalScale,e.hitArea=new PIXI.Rectangle(-a/2,-l/2,a,l)),t.customScale&&(a=e.width,l=e.height,t.customScale.constructor===Object?(a*=t.customScale.w,l*=t.customScale.h):(a*=t.customScale,l*=t.customScale),e.hitArea=new PIXI.Rectangle(-a/2,-l/2,a,l)),"empty"!==this.scope.model.type.name&&(e.click=function(){this.handleMiniPaytable()}.bind(this),e.tap=function(){this.handleMiniPaytable()}.bind(this)),this._defaultPayoutConfig={type:h.miniPaytable.type||"TripleBellsPayoutContainer",reversed:!0,noAnimations:!0,skipIdAssignment:!0,vSpacing:r,miniPaytable:!0,maxWidth:t.maxWidth,y:n,x:i,payout:{type:"Container",maxDigits:20,children:[{type:"Text",text:["@model.count",":"],font:"dejavuSansBold",size:s,stroke:"#000000",thickness:5,fill:"#FFFFFF",anchorAlign:"r"},{type:"Text",maxWidth:t.maxWidth||1/0,x:t.xRightAlign*this.presentation.globalScale||0,text:"@model.win",font:"dejavuSansBold",isCurrency:"@slot.showValuesInCash",showCurrencySign:!1,decimals:0,size:s,stroke:"#000000",thickness:5,fill:"#FFFFFF",anchorAlign:t.anchorAlign||"l"}]}})},sna.presentation.slot.SymbolDynamicContainer.prototype.handleMiniPaytable=function(){this.iface.spinCycleActive||(this.hideActiveSymbolPayout(),this.isMiniPaytableAllowed()&&(this.symbolPayouts.length?this.toggleSymbolPayoutsVisibility():this.initSymbolPayouts(),this.presentation.main.iface.miniPaytable=this.symbolPayouts))},sna.presentation.slot.SymbolDynamicContainer.prototype.hideActiveSymbolPayout=function(e){var t=this.presentation.main.iface.miniPaytable;t&&t!==this.symbolPayouts&&t.forEach(function(e){e.visible=!1},this)},sna.presentation.slot.SymbolDynamicContainer.prototype.toggleSymbolPayoutsVisibility=function(e){this.symbolPayouts.forEach(function(e){e.visible=!e.visible},this)},sna.presentation.slot.SymbolDynamicContainer.prototype.initSymbolPayouts=function(e){this.createSymbolPayout(this)},sna.presentation.slot.SymbolDynamicContainer.prototype.createSymbolPayout=function(e){var t=this.scope.config.payout?angular.copy(this.scope.config.payout):angular.copy(this._defaultPayoutConfig);t.symbol=this.scope.model.type.name;t=this.presentation.createPresentation(t,this,this.scope.model.reel.slot);t.setscale(this.scope.config.payoutScale||1),t.updatePresentation(),t.setY(-t.height/2+(this._defaultPayoutConfig.y||0)),e.addChild(t),this.symbolPayouts.push(t)},sna.presentation.slot.SymbolDynamicContainer.prototype.removeSymbolPayouts=function(){this.symbolPayouts.forEach(function(e){e.destroy({children:!0})},this),this.symbolPayouts=[]},sna.presentation.slot.SymbolDynamicContainer.prototype.isMiniPaytableAllowed=function(){if(this.scope.model.reel){var e=this.iface.scope.game.mode(),t=this.scope.model.reel.slot.feature,i=[sna.model.slot.MODE_IDLE,sna.model.slot.MODE_FAST_WIN,sna.model.slot.MODE_WIN,sna.model.slot.MODE_WIN_INDIVIDUAL,sna.model.slot.MODE_FEATURE_CLOSE];return!t&&-1!==i.indexOf(e)}},sna.presentation.slot.SymbolDynamicContainer.prototype.destroySymbolContainer=sna.presentation.slot.SymbolDynamicContainer.prototype.destroy,sna.presentation.slot.SymbolDynamicContainer.prototype.destroy=function(e){this.destroySymbolContainer(e),this.symbolPayouts=[],this.blurred=0,this.iface=null},sna.presentation.slot.SymbolDynamicContainerFactory=function(e,t){return new sna.presentation.slot.SymbolDynamicContainer(e,t)},sna.module.slot.controller(sna.presentation.slot.SYMBOL_DYNAMIC_CONTAINER,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.slot.SymbolDynamicContainerFactory]),sna.presentation.slot.REEL_CONTAINER="ReelContainer",sna.presentation.slot.REEL_BOUNCE_AMPLITUDE=6,sna.presentation.slot.REEL_BOUNCE_FREQUENCY=1,sna.presentation.slot.ReelContainer=function(e,t){sna.presentation.Container.call(this,e,t),this.currentSymbolOffset=0,this.symbols=[],this.symbolsContainer=new sna.presentation.Container({},this.presentation),this.addChild(this.symbolsContainer),this.reelMask=null,this.scope.config&&(this.reelSpeed=1/(this.scope.config.reelSpeed||5),this.fastReelSpeed=1/(this.scope.config.fastReelSpeed||this.scope.config.reelSpeed),this.scope.config.mask&&(this.scope.config.mask.width&&(this.scope.config.mask.width*=this.presentation.globalScale),this.scope.config.mask.height&&(this.scope.config.mask.height*=this.presentation.globalScale)),this.scope.config.reelHeight*=this.presentation.globalScale,this.scope.config.reelWidth*=this.presentation.globalScale,this.scope.config.symbolHeight*=this.presentation.globalScale,this.scope.config.symbolWidth*=this.presentation.globalScale)},sna.presentation.slot.ReelContainer.prototype=new sna.presentation.Container({},{}),sna.presentation.slot.ReelContainer.prototype.positionElementLayerContainer=sna.presentation.slot.ReelContainer.prototype.positionElement,sna.presentation.slot.ReelContainer.prototype.initPresentation=function(){this.createSymbols(),this.prepareMask(),this.enableMask(),this.initAnimations()},sna.presentation.slot.ReelContainer.prototype.createSymbols=function(){},sna.presentation.slot.ReelContainer.prototype.enableMask=function(){this.reelMask&&(this.mask=this.reelMask,this.reelMask.visible=!0)},sna.presentation.slot.ReelContainer.prototype.disableMask=function(){this.reelMask&&(this.mask=null,this.reelMask.visible=!1)},sna.presentation.slot.ReelContainer.prototype.positionElement=function(e){this.scope.config;var t=e.scope.config;if("Symbol"==t.tag){t=this.getSymbolPosition(e,t.index);return e.x=t.x,void(e.y=t.y)}this.positionElementLayerContainer(e)},sna.presentation.slot.ReelContainer.prototype.prepareMask=function(){var e,t,i=this.scope.config,n=i.mask,s=this.scope.model;i.mask&&("rect"===n.type?(this.reelMask=new PIXI.Graphics,this.reelMask.beginFill(16777215,1),this.reelMask.lineStyle(5,16777215,1),e=-n.width/2+(n.x||0),t=-n.height/2+(n.y||0),this.reelMask.drawRect(e,t,n.width,n.height),this.reelMask.endFill()):this.reelMask=this.presentation.createPresentation(i.mask,this,s),this.reelMask.visible=!1,this.addChild(this.reelMask))},sna.presentation.slot.ReelContainer.prototype.addSymbol=function(e,t){this.symbols[t]&&(this.animation("spinStart").removeChild(this.symbols[t]),this.animation("fastWinStop").removeChild(this.symbols[t]),this.animation("winFull").removeChild(this.symbols[t]),this.symbolsContainer.removeChild(this.symbols[t])),(this.symbols[t]=e).scope.model.win&&(this.animation("spinStart").addChild(this.symbols[t]),this.animation("fastWinStop").addChild(this.symbols[t]),this.animation("winFull").addChild(this.symbols[t])),this.symbolsContainer.addChild(e),t>=this.currentSymbolOffset&&t<this.currentSymbolOffset+this.scope.model.size?e.visible=!0:e.visible=!1},sna.presentation.slot.ReelContainer.prototype.initAnimations=function(){var e=this.scope.config,t=e.bounceAmplitude||sna.presentation.slot.REEL_BOUNCE_AMPLITUDE,i=e.bounceFrequency||sna.presentation.slot.REEL_BOUNCE_FREQUENCY,n=this.getSymbolDistance()*this.scope.model.size,s={type:"Animation",variant:"Sequence",name:"spinStart",children:["local","call:enableMask","call:prepareSpinSymbols",{variant:"Tween",target:"@parent.symbolsContainer",y:"+="+n,duration:2.5*this.reelSpeed,ease:["Back","easeIn",[.7]]},{variant:"Loop",label:"spin",children:["call:rotateSymbols",{variant:"Tween",target:"@parent.symbolsContainer",y:"+="+n,duration:this.reelSpeed}]}]},e=this.presentation.createAnimation(this,s);this.animation(s.name,e);t={type:"Animation",variant:"Sequence",name:"spinStop",children:["endLoop:spinStart:spin","stop:spinStart:spin","call:prepareStopSymbols",{variant:"Tween",target:"@parent.symbolsContainer",y:"+="+(n-50),duration:this.reelSpeed},"call:disableMask","call:removeStopSymbols",{variant:"Tween",target:"@parent.symbolsContainer",y:"+=50",duration:2.5*this.reelSpeed,ease:["Elastic","easeOut",[t,i]]}]},i=this.presentation.createAnimation(this,t);this.animation(t.name,i);i={type:"Animation",variant:"Sequence",name:"fastSpinStop",children:["endLoop:spinStart:spin","stop:spinStart:spin","call:prepareStopSymbols",{variant:"Tween",target:"@parent.symbolsContainer",y:"+="+n,duration:.001},"call:disableMask","call:removeStopSymbols"]},n=this.presentation.createAnimation(this,i);this.animation(i.name,n);i={type:"Animation",variant:"Group",name:"winFull",children:["local:"],stagger:0},n=this.presentation.createAnimation(this,i);this.animation(i.name,n);i={type:"Animation",variant:"Group",name:"fastWinStop",children:["local:"],stagger:0},n=this.presentation.createAnimation(this,i);this.animation(i.name,n)},sna.presentation.slot.ReelContainer.prototype.blur=function(t){void 0===t&&(t=!0),angular.forEach(this.symbols,function(e){e.blur(t)},this)},sna.presentation.slot.ReelContainer.prototype.rotateSymbols=function(){var e,t=this.scope.model,i=t.size,n=this.getSymbolDistance();for(this.symbolsContainer.y=0,e=this.currentSymbolOffset-i;e<this.currentSymbolOffset;e++){var s=(e+t.length)%t.length;this.symbols[s].y+=i*n}for(e=this.currentSymbolOffset;e<this.currentSymbolOffset+i;e++){s=(e+t.length)%t.length;this.symbols[s].visible=!1}this.currentSymbolOffset-=i,this.currentSymbolOffset=(this.currentSymbolOffset+t.length)%t.length,this.prepareSpinSymbols()},sna.presentation.slot.ReelContainer.prototype.prepareSpinSymbols=function(){for(var e=this.scope.model,t=this.scope.model.size,i=this.currentSymbolOffset-t;i<this.currentSymbolOffset;i++){var n=(i+e.length)%e.length,s=this.symbols[n],n=this.getSymbolPosition(s,n);s.x=n.x,s.y=n.y,s.visible=!0}},sna.presentation.slot.ReelContainer.prototype.prepareStopSymbols=function(){var e,t=this.scope.model,i=t.size;for(this.updatePresentation(),angular.forEach(this.symbols,function(e,t){e.visible=!1},this),e=this.currentSymbolOffset;e<this.currentSymbolOffset+2*i;e++){var n=(e+t.length)%t.length,s=this.symbols[n];s.visible=!0;n=this.getSymbolPosition(s,n);s.x=n.x,s.y=n.y}var r=this.getSymbolDistance();this.symbolsContainer.y=-i*r},sna.presentation.slot.ReelContainer.prototype.updatePresentation=function(){},sna.presentation.slot.ReelContainer.prototype.getSymbolPresentation=function(e){return this.symbols[e]},sna.presentation.slot.ReelContainer.prototype.getSymbolPresentationOffset=function(e){e=((e=e+this.currentSymbolOffset)+this.scope.model.length)%this.scope.model.length;return this.symbols[e]},sna.presentation.slot.ReelContainer.prototype.removeStopSymbols=function(){for(var e=this.scope.model,t=e.size,i=this.currentSymbolOffset+t;i<this.currentSymbolOffset+2*t;i++){var n=(i+e.length)%e.length;this.symbols[n].visible=!1}},sna.presentation.slot.ReelContainer.prototype.getSymbolDistance=function(){return this.scope.config.symbolHeight+this.getSpaceBetweenSymbols()},sna.presentation.slot.ReelContainer.prototype.getSymbolConfig=function(e){var e=this.scope.parent.getSymbolConfig(e);return(e=angular.copy(e)).tag="Symbol",e},sna.presentation.slot.ReelContainer.prototype.getSpaceBetweenSymbols=function(){var e=this.scope.config,t=this.scope.model.size;return(e.reelHeight-e.symbolHeight*t)/(t-1)||0},sna.presentation.slot.ReelContainer.prototype.getSymbolPosition=function(e,t){var i=this.scope.config,n=this.scope.model,s={x:0},r=(t-this.currentSymbolOffset+n.length)%n.length,o=this.scope.model.size,t=this.scope.model.length,r=-o/2+r+.5;r>n.length/2&&(r-=t);t=this.getSpaceBetweenSymbols();s.y=r*i.symbolHeight;i=0<r?Math.floor:Math.ceil;return s.y+=i(r)*t,s},sna.presentation.slot.ReelContainerFactory=function(e,t){return new sna.presentation.slot.ReelContainerFactory(e,t)},sna.module.slot.controller(sna.presentation.slot.REEL_CONTAINER,["$scope","PresentationService",sna.presentation.slot.ReelContainerFactory]),sna.presentation.slot.DYNAMIC_REEL_CONTAINER="DynamicReelContainer",sna.presentation.slot.DynamicReelContainer=function(e,t,i){sna.presentation.slot.ReelContainer.call(this,e,t,i),this.scope.model&&(this.currentSymbolOffset=this.scope.model.spinningSymbols.length)},sna.presentation.slot.DynamicReelContainer.prototype=new sna.presentation.slot.ReelContainer({},{}),sna.presentation.slot.DynamicReelContainer.prototype.createSymbols=function(){var i=0;angular.forEach(this.scope.model.spinningSymbols,function(e){var t=this.getSymbolConfig(e);t.index=i;e=this.presentation.createPresentation(t,this,e);this.addSymbol(e,i++)},this),this.scope.model.eachSymbol(function(e){var t=this.getSymbolConfig(e);t.index=i;e=this.presentation.createPresentation(t,this,e);this.addSymbol(e,i++)},this)},sna.presentation.slot.DynamicReelContainer.prototype.updatePresentation=function(){this.currentSymbolOffset=this.symbols.length-this.scope.model.size;var i=this.scope.model.spinningSymbols.length;this.scope.model.eachSymbol(function(e){var t=this.getSymbolConfig(e);t.index=i;e=this.presentation.createPresentation(t,this,e);this.addSymbol(e,i++)},this)},sna.presentation.slot.DynamicReelContainer.prototype.getSymbolPresentation=function(e){var t=this.scope.model.spinningSymbols.length;return this.symbols[e+t]},sna.presentation.slot.DynamicReelContainerFactory=function(e,t,i){return new sna.presentation.slot.DynamicReelContainer(e,t,i)},sna.module.slot.controller(sna.presentation.slot.DYNAMIC_REEL_CONTAINER,["$scope",sna.service.PRESENTATION,"Timeline",sna.presentation.slot.DynamicReelContainerFactory]),sna.presentation.slot.CACHED_REEL_CONTAINER="CachedReelContainer",sna.presentation.slot.CachedReelContainer=function(e,t,i,n){sna.presentation.Container.call(this,e,t),this.scope=e,this.presentation=t,this.sounds=i,this.timeline=n,this.staxxWin=0,this.outcomeSymbols=[],this.topSymbols=[],this.bottomSymbols=[],this.spinningSymbols=[],this.symbolsOverlay=[],this.scope.config&&(this.reelSpeed=1/(this.scope.config.reelSpeed||5),this.symbolDistance=this.scope.config.symbolHeight+this.getSpaceBetweenSymbols())},sna.presentation.slot.CachedReelContainer.prototype=new sna.presentation.Container({},{}),sna.presentation.slot.CachedReelContainer.prototype.clearSymbolWins=function(){angular.forEach(this.outcomeSymbols,function(e,t){e.showStatic()},this),angular.forEach(this.topSymbols,function(e,t){e.showStatic()},this),angular.forEach(this.bottomSymbols,function(e,t){e.showStatic()},this)},sna.presentation.slot.CachedReelContainer.prototype.initPresentation=function(){this.initSymbolsContainer(),this.prepareMask(),this.createSpinningSymbols(),this.prepareOutcomeSymbols(!1),this.addChild(this.symbolsContainer),this.prepareSpinification(),this.initAnimations();var e=this.scope.config;e.showIdleTopSymbols&&this.animation("spinStart").setShowIdleTopSymbols(!0),e.showIdleBottomSymbols&&this.animation("spinStart").setShowIdleBottomSymbols(!0),!1===e.hideMask&&this.enableMask()},sna.presentation.slot.CachedReelContainer.prototype.initSymbolsContainer=function(){var e;this.symbolsContainer=this.presentation.createPresentation({type:"Container"},this,this.scope.model),this.addChild(this.symbolsContainer),this.scope.config.addSymbolStaticLayer&&(e=new PIXI.display.Group(2,this.setSymbolZIndex),this.staticSymbolLayer=new PIXI.display.Layer(e),this.addChild(this.staticSymbolLayer))},sna.presentation.slot.CachedReelContainer.prototype.setSymbolZIndex=function(e){e.zOrder=100*e.scope.model.reel.index+e.scope.model.reel.index},sna.presentation.slot.CachedReelContainer.prototype.clear=function(){for(var e=this.symbolsContainer.children.length-1;0<=e;e--){var t=this.symbolsContainer.children[e];-1==this.spinningSymbols.indexOf(t)&&(t.parent.removeChild(t),this.scope.config.destroySymbols&&t.destroy({children:!0}))}},sna.presentation.slot.CachedReelContainer.prototype.recreateReelSymbols=function(e){this.clear(),this.scope.model.symbols.splice(0,this.scope.model.symbols.length),e.forEach(function(t,e){var i=this.iface.scope.config.slot.symbols.filter(function(e){return e.name==t})[0];(t=new sna.model.slot.Symbol(i)).type=new sna.model.slot.SymbolType(i),t.index=e,this.scope.model.symbols.push(t)},this),this.prepareOutcomeSymbols()},sna.presentation.slot.CachedReelContainer.prototype.createSpinningSymbols=function(){angular.forEach(this.spinningSymbols,function(e){e.parent.removeChild(e),this.scope.config.destroySymbols&&e.destroy({children:!0})},this),this.spinningSymbols.length=0;var s=this.scope.model.spinningSymbols.length,r=this.scope.model.size;angular.forEach(this.scope.model.spinningSymbols,function(e,t){var i=this.getSpinningSymbolConfig(e),n=this.getSpinningSymbolOffset(e);i.x=n.x,i.y=(-s+t-(r/2-.5))*this.symbolDistance+n.y;e=this.presentation.createPresentation(i,this,e);e.visible=!1,this.spinningSymbols.push(e),this.symbolsContainer.addChild(e)},this),this.addingAdditionalSpinningSymbols(s,r)},sna.presentation.slot.CachedReelContainer.prototype.addingAdditionalSpinningSymbols=function(e,t){for(var i=e-t;i<e;i++){var n=this.scope.model.spinningSymbols[i],s=this.getSpinningSymbolConfig(n),r=this.getSpinningSymbolOffset(n);s.x=r.x,s.y=(-e+i-e-(t/2-.5))*this.symbolDistance+r.y;n=this.presentation.createPresentation(s,this,n);n.visible=!1,this.spinningSymbols.push(n),this.symbolsContainer.addChild(n)}},sna.presentation.slot.CachedReelContainer.prototype.getSpinningSymbolOffset=function(e){return this.getSymbolOffset(e)},sna.presentation.slot.CachedReelContainer.prototype.getSpinningSymbolConfig=function(e){e=this.scope.parent.getSymbolConfig(e);return{type:"Sprite",texture:e.blur.texture,noBlurTexture:e.blur.noBlurTexture,atlas:e.blur.atlas,scale:e.blur.scale||1}},sna.presentation.slot.CachedReelContainer.prototype.replaceOutcomeSymbol=function(e,t){var i=this.outcomeSymbols.indexOf(e);this.outcomeSymbols[i]=t,this.symbolsContainer.removeChild(e),this.symbolsContainer.addChild(t)},sna.presentation.slot.CachedReelContainer.prototype.prepareOutcomeSymbols=function(e,t,i){var s=0,n=this.scope.model.size,r=this.scope.model.bottomSymbols.length,o=this.scope.model.topSymbols.length;e&&(s=-t/this.presentation.globalScale-(n+r)*this.symbolDistance);var a=this.scope.model.size;angular.forEach(this.outcomeSymbols,function(e){e.parent&&e.parent.removeChild(e),this.scope.config.destroySymbols&&e.destroy({children:!0})},this),angular.forEach(this.topSymbols,function(e){e.parent&&e.parent.removeChild(e),this.scope.config.destroySymbols&&e.destroy({children:!0})},this),angular.forEach(this.bottomSymbols,function(e){e.parent&&e.parent.removeChild(e),this.scope.config.destroySymbols&&e.destroy({children:!0})},this),this.outcomeSymbols.length=0,this.topSymbols.length=0,this.bottomSymbols.length=0,i||this.scope.model.eachTopSymbol(function(e,t){var i=this.getSymbolConfig(e),n=this.getSymbolOffset(e);i.x=n.x,i.y=(t-o-(a/2-.5))*this.getOutcomeSymbolDistance()+s+n.y,i.win&&i.win.placeholder&&(i.win.y=(i.win.y||0)-s),i.winIndividual&&i.winIndividual.placeholder&&(i.winIndividual.y=(i.winIndividual.y||0)-s);i=this.presentation.createPresentation(i,this,e);this.topSymbols.push(i),e.win||(i.visible=!1),this.symbolsContainer.addChild(i)},this),this.scope.model.eachSymbol(function(e,t){var i=this.getSymbolConfig(e),n=this.getSymbolOffset(e),t=(t-(a/2-.5))*this.getOutcomeSymbolDistance()+n.y;i.x=n.x,i.y=t+s,i.finalPositionY=t,i.win&&i.win.placeholder&&(i.win.y=(i.win.y||0)-s),i.winIndividual&&i.winIndividual.placeholder&&(i.winIndividual.y=(i.winIndividual.y||0)-s);e=this.presentation.createPresentation(i,this,e);this.outcomeSymbols.push(e),this.symbolsContainer.addChild(e)},this),i||this.scope.model.eachBottomSymbol(function(e,t){var i=this.getSymbolConfig(e),n=this.getSymbolOffset(e);i.x=n.x,i.y=(t+a-(a/2-.5))*this.getOutcomeSymbolDistance()+s+n.y,i.win&&i.win.placeholder&&(i.win.y=(i.win.y||0)-s),i.winIndividual&&i.winIndividual.placeholder&&(i.winIndividual.y=(i.winIndividual.y||0)-s);i=this.presentation.createPresentation(i,this,e);this.bottomSymbols.push(i),e.win||(i.visible=!1),this.symbolsContainer.addChild(i)},this)},sna.presentation.slot.CachedReelContainer.prototype.getOutcomeSymbolDistance=function(){return this.symbolDistance},sna.presentation.slot.CachedReelContainer.prototype.getSymbolConfig=function(e,t){var e=this.scope.parent.getSymbolConfig(e);return(e=angular.copy(e)).tag="Symbol",e},sna.presentation.slot.CachedReelContainer.prototype.getSymbolPresentationOffset=function(e){return this.outcomeSymbols[e]},sna.presentation.slot.CachedReelContainer.prototype.prepareStopSymbols=function(e){},sna.presentation.slot.CachedReelContainer.prototype.initAnimations=function(){this.initSpinAnimations(),this.initWinAnimations(),this.initSpinificationAnimations(),this.scope.config.staxxGame&&this.initStaxxAnimation()},sna.presentation.slot.CachedReelContainer.prototype.initSpinAnimations=function(){var e={type:this.scope.config.spinAnimation||"SpinAnimation"},e=this.presentation.createAnimation(this,e);this.animation("spinStart",e),this.animation("spinStop",e),this.animation("fastSpinStop",e)},sna.presentation.slot.CachedReelContainer.prototype.initWinAnimations=function(){var e={type:this.scope.config.reelWinAnimation||"ReelWinAnimation"},e=this.presentation.createAnimation(this,e);this.animation("winFull",e),this.animation("fastWinStop",e)},sna.presentation.slot.CachedReelContainer.prototype.initSpinificationAnimations=function(){var e;this.reelSpinification&&((e=this.animation("spinificationStart"))||(spinificationStartConfig={type:"Animation",variant:"Sequence",name:"spinificationStart",children:["local"]},e=this.presentation.createAnimation(this,spinificationStartConfig),this.animation(spinificationStartConfig.name,e)),e.addChild(this.reelSpinification),(e=this.animation("spinificationEnd"))||(spinificationEndConfig={type:"Animation",variant:"Sequence",name:"spinificationEnd",children:["local"]},e=this.presentation.createAnimation(this,spinificationEndConfig),this.animation(spinificationEndConfig.name,e)),e.addChild(this.reelSpinification),(e=this.animation("spinificationFastEnd"))||(spinificationFastEndConfig={type:"Animation",variant:"Sequence",name:"spinificationFastEnd",children:["local"]},e=this.presentation.createAnimation(this,spinificationFastEndConfig),this.animation(spinificationFastEndConfig.name,e)),e.addChild(this.reelSpinification))},sna.presentation.slot.CachedReelContainer.prototype.initStaxxAnimation=function(){},sna.presentation.slot.CachedReelContainer.prototype.enableMask=function(){this.reelMask&&(this.mask=this.reelMask,this.reelMask.visible=!0)},sna.presentation.slot.CachedReelContainer.prototype.getSymbolOffset=function(e){return{x:0,y:0}},sna.presentation.slot.CachedReelContainer.prototype.disableMask=function(){var e=this.scope.config,e=void 0===e.hideMask||1==e.hideMask;this.reelMask&&e&&(this.mask=null,this.reelMask.visible=!1)},sna.presentation.slot.CachedReelContainer.prototype.prepareMask=function(){var e,t,i=this.scope.config,n=i.mask,s=this.scope.model;if(i.mask){if(n.constructor===Array)for(var r=0;!this.reelMask&&r<i.mask.length;)this.reelMask=this.presentation.createPresentation(i.mask[r],this,s),r++;else"rect"===n.type?(this.reelMask=new PIXI.Graphics,this.reelMask.beginFill(16777215,1),this.reelMask.lineStyle(0,16777215,1),e=-n.width*this.presentation.globalScale/2+(n.x||0),t=-n.height*this.presentation.globalScale/2+(n.y||0),this.reelMask.drawRect(e,t,n.width*this.presentation.globalScale,n.height*this.presentation.globalScale),this.reelMask.endFill()):this.reelMask=this.presentation.createPresentation(i.mask,this,s);this.reelMask&&(this.reelMask.visible=!1,this.addChild(this.reelMask))}},sna.presentation.slot.CachedReelContainer.prototype.prepareSpinification=function(){var e=this.scope.config,t=e.spinification,i=this.scope.model;if(e.spinification){if(t.constructor===Array)for(var n=0;!this.reelSpinification&&n<e.spinification.length;)this.reelSpinification=this.presentation.createPresentation(e.spinification[n],this,i),n++;else this.reelSpinification=this.presentation.createPresentation(t,this,i);t.animationSpeed&&(this.reelSpinification.animationSpeed=t.animationSpeed/60),this.reelSpinification.visible=!1,this.addChild(this.reelSpinification)}},sna.presentation.slot.CachedReelContainer.prototype.getSpaceBetweenSymbols=function(){var e=this.scope.config,t=this.scope.model.size;return(e.reelHeight-e.symbolHeight*t)/(t-1)||0},sna.presentation.slot.CachedReelContainer.prototype.disableAnimations=function(e){var t;void 0===this.disabledAnimations&&(this.disabledAnimations={}),void 0===this.emptyAnimation&&(this.emptyAnimation=this.presentation.createAnimation(this,{variant:"Sequence",children:[]})),e=void 0===e?this.animations:(t={},angular.forEach(e,function(e){t[e]=this.animations[e]},this),t),angular.forEach(e,function(e,t){this.disableAnimation(t)},this)},sna.presentation.slot.CachedReelContainer.prototype.disableAnimation=function(e){this.disabledAnimations[e]=this.animations[e],this.animations[e]=this.emptyAnimation},sna.presentation.slot.CachedReelContainer.prototype.enableAnimations=function(e){var t;e=void 0===e?this.animations:(t={},angular.forEach(e,function(e){t[e]=this.animations[e]},this),t),angular.forEach(e,function(e,t){this.enableAnimation(t)},this)},sna.presentation.slot.CachedReelContainer.prototype.enableAnimation=function(e){this.disabledAnimations&&void 0!==this.disabledAnimations[e]&&(this.animations[e]=this.disabledAnimations[e])},sna.presentation.slot.CachedReelContainer.prototype.eachSymbol=function(e,t){return angular.forEach(this.outcomeSymbols,e,t||this)},sna.presentation.slot.CachedReelContainer.prototype.getSymbolPosition=function(e){var t={x:0};return t.y=(e-(this.scope.model.size/2-.5))*this.symbolDistance*this.presentation.globalScale,t},sna.presentation.slot.CachedReelContainer.prototype.isSpinDisabled=function(e){return"spinStart"===e?!!this.scope.model.disabled:"spinStop"===e||"fastSpinStop"===e?!!this.scope.model.wasDisabled:void 0},sna.presentation.slot.CachedReelContainer.prototype.onSpinDisabled=function(e){this.scope.config.dontPrepareOutcomeIfDisabled||this.prepareOutcomeSymbols()},sna.presentation.slot.CachedReelContainer.prototype.destroyPresentation=function(){this.clear(),angular.forEach(this.outcomeSymbols,function(e){e.parent&&e.parent.removeChild(e),this.scope.config.destroySymbols&&e.destroy({children:!0})},this),angular.forEach(this.topSymbols,function(e){e.parent&&e.parent.removeChild(e),this.scope.config.destroySymbols&&e.destroy({children:!0})},this),angular.forEach(this.bottomSymbols,function(e){e.parent&&e.parent.removeChild(e),this.scope.config.destroySymbols&&e.destroy({children:!0})},this)},sna.presentation.slot.CachedReelContainer.prototype.prepareOnScreenOutcomeSymbols=function(){this.prepareOutcomeSymbols(!1)},sna.module.slot.controller(sna.presentation.slot.CACHED_REEL_CONTAINER,[sna.service.SCOPE,sna.service.PRESENTATION,sna.service.SOUNDS,sna.service.TIMELINE,sna.presentation.slot.CachedReelContainer]),sna.presentation.slot.REELS_CONTAINER="ReelsContainer",sna.presentation.slot.ReelsContainer=function(e,t,i){sna.presentation.LayerContainer.call(this,e,t);e=this.scope.config;e&&e.reelset&&(this.scope.slot=this.scope.model,this.scope.model=this.scope.slot.reelsets[e.reelset]),this.timeline=i,this.reels=[],e&&e.reels&&(this.reelsContainer=new sna.presentation.Container({config:e.reels},t)),this.scope.config&&(this.scope.config.mask&&(this.scope.config.mask.width&&(this.scope.config.mask.width*=this.presentation.globalScale),this.scope.config.mask.height&&(this.scope.config.mask.height*=this.presentation.globalScale)),this.scope.config.reelWidth*=this.presentation.globalScale,this.scope.config.reelHeight*=this.presentation.globalScale,this.scope.config.areaWidth*=this.presentation.globalScale,this.scope.config.areaHeight*=this.presentation.globalScale)},sna.presentation.slot.ReelsContainer.prototype=new sna.presentation.LayerContainer({},{}),sna.presentation.slot.ReelsContainer.prototype.positionElementLayerContainer=sna.presentation.slot.ReelsContainer.prototype.positionElement,sna.presentation.slot.ReelsContainer.prototype.initPresentationLayerContainer=sna.presentation.slot.ReelsContainer.prototype.initPresentation,sna.presentation.slot.BACKGROUND_SINGLE="single",sna.presentation.slot.BACKGROUND_MULTI="multi",sna.presentation.slot.ReelsContainer.prototype.addReel=function(e){this.reels.push(e),this.reelsContainer.addChild(e),this.animation("spinStart")&&this.animation("spinStart").children&&this.animation("spinStart").addChild(e),this.animation("fastWinStop")&&this.animation("fastWinStop").children&&this.animation("fastWinStop").addChild(e),this.animation("winFull")&&this.animation("winFull").children&&this.animation("winFull").addChild(e)},sna.presentation.slot.ReelsContainer.prototype.positionElement=function(e){var t=this.scope.config,i=e.scope.config;if("Background"==i.tag){var n=t.areaHeight/e.texture.height;e.scale.set(n,n);var s=this.getReelPosition(i.index);return e.x=s.x,void(e.y=s.y)}if("Separator"==i.tag){n=this.getReelPosition(i.index-1),s=this.getReelPosition(i.index);return e.y=(n.y+s.y)/2,void(e.x=n.x+(s.x-n.x)/2)}if("Reel"==i.tag){i=this.getReelPosition(i.index);return e.x=i.x,void(e.y=i.y)}this.positionElementLayerContainer(e)},sna.presentation.slot.ReelsContainer.prototype.clearSymbolWins=function(){angular.forEach(this.reels,function(e,t){e.clearSymbolWins()},this)},sna.presentation.slot.ReelsContainer.prototype.initPresentation=function(){this.initPresentationLayerContainer();var e=this.scope.config;if(e){var t,i=e.background;i&&(i.atlas||(i.atlas=this.scope.config.atlas),i.variant==sna.presentation.slot.BACKGROUND_SINGLE?(i.tag="Background",this.backgroundContainer=new sna.presentation.Container({config:i},this.presentation),this.addChild(this.backgroundContainer),this.scope.model.size(),this.scope.model.eachReel(function(e,t){(i=angular.copy(i)).index=t;e=this.presentation.createPresentation(i,this,e);this.backgroundContainer.addChild(e)},this)):(t=this.presentation.createPresentation(i,this),this.addChild(t)));var n=e.separator;if(n&&(n.tag="Separator",n&&n.variant==sna.presentation.slot.BACKGROUND_SINGLE)){this.separatorContainer=new sna.presentation.Container({config:n},this.presentation),this.addChild(this.separatorContainer);for(var s=this.scope.model.size(),r=1;r<s;r++){(n=angular.copy(n)).index=r;var o=this.presentation.createPresentation(n,this);this.separatorContainer.addChild(o)}}this.initReelsContainer(),this.initAnimations(),this.initReelPresentation(),this.initWinSymbolContainer(),this.prepareMask(),this.enableMask()}},sna.presentation.slot.ReelsContainer.prototype.initWinSymbolContainer=function(){var e;this.scope.config.addSymbolWinLayer&&(e=new PIXI.display.Group(3,this.setSymbolZIndex),this.winSymbolLayer=new PIXI.display.Layer(e),(e=this.presentation.createPresentation({type:"Container",layer:"WIN_SYMBOLS",name:"winLayer"},this,this.scope.model)).addChild(this.winSymbolLayer),this.addChild(e))},sna.presentation.slot.ReelsContainer.prototype.setSymbolZIndex=function(e){e.zOrder=100*e.scope.model.reel.index+e.scope.model.reel.index},sna.presentation.slot.ReelsContainer.prototype.initReelsContainer=function(){this.reelsContainer&&this.addChild(this.reelsContainer)},sna.presentation.slot.ReelsContainer.prototype.initAnimations=function(){var e={type:"Animation",variant:"Group",name:"spinStart",children:["local:"],stagger:this.presentation.parseValue(this,this.scope.config.reelStartStagger)||this.presentation.parseValue(this,this.scope.config.reelStagger)||0};this.animation("winIndividual")&&(e.children.unshift("call:clearSymbolWins"),e.children.unshift("stop:winIndividual"),e.children.unshift("stop:winFull"));var t=this.presentation.createAnimation(this,e);this.animation(e.name,t);e={type:this.scope.config.slotStopAnimation||"SlotStopAnimation",stagger:this.presentation.parseValue(this,this.scope.config.reelEndStagger)||this.presentation.parseValue(this,this.scope.config.reelStagger)||0},t=this.presentation.createAnimation(this,e);this.animation("spinStop",t),this.animation("fastSpinStop",t);e={type:"Animation",variant:"Group",name:"winFull",children:["local:"],stagger:0},t=this.presentation.createAnimation(this,e);this.animation(e.name,t);e={type:"Animation",variant:"Group",name:"fastWinStop",children:["local"],stagger:0},t=this.presentation.createAnimation(this,e);this.animation(e.name,t)},sna.presentation.slot.ReelsContainer.prototype.getReelPosition=function(e){var t=this.scope.config,i={};i.y=this.getReelConfigByIndex(e).y||0;var n,s,r,o=this.scope.model.size();return 1==o?i.x=0:o%2?(r=(t.areaWidth-t.reelWidth*o)/(o-1)||0,i.x=(s=-o/2+e+.5)*t.reelWidth,n=0<s?Math.floor:Math.ceil,i.x+=n(s)*r):(r=(t.areaWidth-t.reelWidth*o)/(o-1)||0,i.x=(s=-o/2+e+.5)*t.reelWidth,i.x+=s*r),i},sna.presentation.slot.ReelsContainer.prototype.getReelConfigByIndex=function(e){return this.scope.config.reels},sna.presentation.slot.ReelsContainer.prototype.initReelPresentation=function(){},sna.presentation.slot.ReelsContainer.prototype.getSymbolConfig=function(e){var t=this.presentation.scope.config;return e.type||(log(this.name,"getSymbolConfig",sna.log.FATAL,"Could not get configuration for symbol: "+e+". Using empty symbol instead."),e.type=new sna.model.slot.SymbolType(this.scope.model.slot.config.symbols.find(function(e){return"empty"==e.name}))),t.presentation.symbols[e.type.name]},sna.presentation.slot.ReelsContainer.prototype.prepareMask=function(){var e,t,i=this.scope.config.mask;i&&("rect"===i.type?(this.reelsMask=new PIXI.Graphics,this.reelsMask.beginFill(16777215,1),this.reelsMask.lineStyle(0,16777215,1),e=-i.width/2+(i.x||0),t=-i.height/2+(i.y||0),this.reelsMask.drawRect(e,t,i.width,i.height),this.reelsMask.endFill()):this.reelsMask=this.presentation.createPresentation(i,this,this.scope.model),this.reelsMask.visible=!1,this.reelsContainer.addChild(this.reelsMask))},sna.presentation.slot.ReelsContainer.prototype.enableMask=function(){this.reelsMask&&(this.reelsContainer.mask=this.reelsMask,this.reelsMask.visible=!0)},sna.presentation.slot.ReelsContainer.prototype.disableMask=function(){this.reelsMask&&(this.reelsContainer.mask=null,this.reelsMask.visible=!1)},sna.presentation.slot.ReelsContainer.prototype.getReelByModelIndex=function(t){return this.reels.find(function(e){return e.scope.model.index==t},this)},sna.presentation.slot.ReelsContainer.prototype.getOutcomeSymbolPresentation=function(e,t){return this.reels[e].outcomeSymbols[t]},sna.presentation.slot.ReelsContainerFactory=function(e,t,i){return new sna.presentation.slot.ReelsContainer(e,t,i)},sna.module.slot.controller(sna.presentation.slot.REELS_CONTAINER,"Timeline",["$scope",sna.service.PRESENTATION,sna.presentation.slot.ReelsContainerFactory]),sna.presentation.slot.GRID_REELS_CONTAINER="GridReelsContainer",sna.presentation.slot.GridReelsContainer=function(e,t,i){sna.presentation.slot.ReelsContainer.call(this,e,t,i)},sna.presentation.slot.GridReelsContainer.prototype=new sna.presentation.slot.ReelsContainer({},{}),sna.presentation.slot.GridReelsContainer.prototype.initReelPresentation=function(){var i=this.scope.config.reels;i&&(i.tag="Reel",this.scope.model.eachReel(function(e,t){(i=angular.copy(i)).index=t;e=this.presentation.createPresentation(i,this,e);this.addReel(e)},this))},sna.presentation.slot.GridReelsContainer.prototype.createReelLayout=function(i){this.reels.forEach(function(e,t){e.recreateReelSymbols(i[t])},this)},sna.presentation.slot.GridReelsContainerFactory=function(e,t,i){return new sna.presentation.slot.GridReelsContainer(e,t,i)},sna.module.slot.controller(sna.presentation.slot.GRID_REELS_CONTAINER,[sna.service.SCOPE,sna.service.PRESENTATION,sna.service.TIMELINE,sna.presentation.slot.GridReelsContainerFactory]),sna.presentation.slot.SPIN_ANIMATION="SpinAnimation",sna.presentation.slot.SpinAnimation=function(e,t){this.scope=e,this.presentation=t.presentation,this.timelineFactory=this.presentation.timeline,this.iface=t.iface,this.sounds=t.sounds,this.init(),this.showIdleTopSymbols=!1,this.showIdleBottomSymbols=!1},sna.presentation.slot.SpinAnimation.prototype.init=function(){this.symbolDistance=this.scope.parent.symbolDistance*this.presentation.globalScale,this.scope.config.spinSpeed?this.spinSpeed=this.scope.config.spinSpeed:(e=this.presentation.parseValue(this.scope.parent,this.scope.parent.scope.config.reelSpeed)||5,this.spinSpeed=1/e),this.spinSymbolDuration=this.spinSpeed/this.scope.model.size,this.spinStartDuration=this.spinSymbolDuration*(this.scope.model.size+this.scope.model.topSymbols.length)*this.scope.parent.scope.config.startFactor,this.spinStartDistance=this.symbolDistance*(this.scope.model.size+this.scope.model.topSymbols.length),this.spinStartAmplitude=this.scope.parent.scope.config.startAmplitude,this.spinDuration=this.spinSymbolDuration*this.scope.model.spinningSymbols.length,this.spinBeginDistance=this.scope.parent.symbolDistance*this.scope.model.size*this.presentation.globalScale,this.spinDistance=this.scope.parent.symbolDistance*(this.scope.model.size+this.scope.model.spinningSymbols.length)*this.presentation.globalScale,this.spinStopAdjustmentDuration=this.spinSymbolDuration,this.spinBounceDistance=this.scope.parent.scope.config.bounceDistance*this.presentation.globalScale,this.spinBounceAmplitude=this.scope.parent.scope.config.bounceAmplitude,this.spinBounceFrequency=this.scope.parent.scope.config.bounceFrequency,this.spinBounceDuration=this.spinSymbolDuration*this.scope.parent.scope.config.endFactor,this.fastBounceDuration=this.spinSymbolDuration*this.scope.parent.scope.config.fastEndFactor,this.spinStopDuration=this.spinSymbolDuration*(this.scope.model.size+this.scope.model.bottomSymbols.length),this.spinStopDistance=this.symbolDistance*(this.scope.model.size+this.scope.model.bottomSymbols.length)-this.spinBounceDistance,this.blurEnabled=this.scope.parent.scope.config.blurEnabled,this.spinStopBeforeFinalDuration=(this.scope.model.bottomSymbols.length+this.scope.model.size)*(this.spinDuration/this.scope.model.spinningSymbols.length);var e=this.scope.parent.scope.config;this.minY=-e.reelHeight*this.presentation.globalScale/2,this.maxY=e.reelHeight*this.presentation.globalScale/2,angular.forEach(this.scope.parent.spinningSymbols,function(e){e.scope.config;e.minY=this.minY-e.height-e.y,e.maxY=this.maxY+e.height-e.y},this)},sna.presentation.slot.SpinAnimation.prototype.setShowIdleTopSymbols=function(e){this.showIdleTopSymbols=e},sna.presentation.slot.SpinAnimation.prototype.setShowIdleBottomSymbols=function(e){this.showIdleBottomSymbols=e},sna.presentation.slot.SpinAnimation.prototype.animate=function(e){var t=this.scope.parent;if("function"==typeof t.isSpinDisabled&&t.isSpinDisabled(e.name))return this.firstSpinLoop&&(this.firstSpinLoop.stop(),this.firstSpinLoop.kill()),this.spinLoop&&(this.spinLoop.stop(),this.spinLoop.kill()),t.symbolsContainer.setY(0),t.onSpinDisabled(e.name),new this.timelineFactory;switch(e.name){case"spinStart":return this.scope.parent.spinning=!0,this.animateSpinStart(e);case"spinStop":return this.animateSpinStop(e);case"fastSpinStop":return this.animateFastSpinStop(e)}},sna.presentation.slot.SpinAnimation.prototype.animateSpinStart=function(){this.init();var e=this.scope.parent,t=this.scope.parent.symbolsContainer;this.outcomePrepared=!1,this.containerFinalized=!1,this.containerReset=!1,this.spinLoop=new this.timelineFactory({paused:!0});var i={};i.setY=this.spinDistance,i.ease=Linear.easeInOut,i.repeat=-1,this.spinLoop.to(t,this.spinDuration,i),this.firstSpinLoop=new this.timelineFactory({paused:!0,onComplete:function(){[].concat(this.scope.parent.topSymbols,this.scope.parent.bottomSymbols);angular.forEach(this.scope.parent.topSymbols,function(e){e.hide()},this)},onCompleteScope:this}),this.firstSpinLoop.to(t,this.spinDuration,{setY:this.spinDistance,ease:Linear.easeInOut}),this.firstSpinLoop.set(t,{setY:this.spinBeginDistance}),this.firstSpinLoop.call(this.spinLoop.resume,[],this.spinLoop);i=new this.timelineFactory;return i.call(this.scope.parent.enableMask,[],this.scope.parent,0),i.call(this.initContainer,[],this),i.to(t,this.spinStartDuration,{setY:this.spinStartDistance,ease:Back.easeIn.config(this.spinStartAmplitude),onComplete:this.afterSpinStart,onCompleteScope:this}),this.blurEnabled&&i.call(function(){angular.forEach(e.spinningSymbols,function(e,t){e.blur&&e.blur(!0)},this)},[],this),i.call(this.firstSpinLoop.resume,[],this.firstSpinLoop),i},sna.presentation.slot.SpinAnimation.prototype.animateSpinStop=function(s){var r=this.scope.parent.symbolsContainer,o=new this.timelineFactory;return this.stopPosition=!1,this.symbolAdjustment=!1,this.fastSpinStopPosition=!1,this.finalStopPosition=!1,this.outcomePrepared=!1,this.containerFinalized=!1,this.containerReset=!1,this.firstSpinLoop&&(o.call(this.firstSpinLoop.stop,[],this.firstSpinLoop),o.call(this.firstSpinLoop.kill,[],this.firstSpinLoop)),this.spinLoop&&(o.call(this.spinLoop.stop,[],this.spinLoop),o.call(this.spinLoop.kill,[],this.spinLoop)),o.call(function(){this.scope.model.slot.hideStickiesReel&&this.scope.model.slot.hideStickiesReel[this.scope.model.index]&&o.call(this.iface.triggerEvent,["HideStickies",this.scope.model.index],this.iface);var e=r.y%this.symbolDistance;this.symbolAdjustment=this.symbolDistance-e;var t=this.symbolAdjustment/this.symbolDistance*(this.spinDuration/this.scope.model.spinningSymbols.length);this.stopPosition=r.y,o.to(r,t,{setY:this.stopPosition+this.symbolAdjustment,ease:Linear.easeInOut}),o.set(r,{setY:this.stopPosition+this.symbolAdjustment}),o.call(this.prepareOutcome,[],this);var i=(this.scope.model.bottomSymbols.length+this.scope.model.size)*this.symbolDistance-this.spinBounceDistance*this.presentation.globalScale;this.fastSpinStopPosition=this.stopPosition+this.symbolAdjustment+i;var n=(this.scope.model.bottomSymbols.length+this.scope.model.size)*(this.spinDuration/this.scope.model.spinningSymbols.length),e=Linear.easeInOut,t=this.scope.parent.scope.config.spinification;this.scope.model.spinification&&t&&t.slowSpin&&(i=(this.scope.model.bottomSymbols.length+this.scope.model.size)*this.symbolDistance,n=t.slowSpinDuration,e=Power2.easeOut),o.to(r,n,{setY:this.stopPosition+this.symbolAdjustment+i,ease:e}),o.call(this.finalizeContainer,[],this),o.call(this.scope.parent.disableMask,[],this.scope.parent),this.presentation.main.iface.onReelStop&&o.call(this.presentation.main.iface.onReelStop,[this.scope.parent,s],this.presentation.main.iface),o.call(this.presentation.createAnimationTimeline,["reelStop",0,!1,!0,this.scope.parent],this.presentation),o.call(this.presentation.createAnimationTimeline,["reelStopSound",0,!1,!0],this.presentation);i={reelIndex:this.scope.model.index};o.call(this.sounds.reelSpinStop,[i],this.sounds),this.scope.model.config.number==this.scope.model.index+1&&(o.call(this.presentation.createAnimationTimeline,["allReelsStopped",0,!1,!0],this.presentation),o.call(this.sounds.reelsSpinStop,[],this.sounds)),o.call(function(){var i=[];angular.forEach(this.scope.parent.outcomeSymbols,function(e,t){i[t]=this.presentation.createAnimationTimeline("symbolLand",0,!1,!0,e).animation},this),this.scope.parent.scope.config.waitForLandingAnimations&&(this.scope.parent.scope.config.landingAnimationDelay?o.add(i,this.presentation.parseValue(this.scope.parent,this.scope.parent.scope.config.landingAnimationDelay)):o.add(i,"symbolLand"))},[],this);e=(this.scope.model.bottomSymbols.length+this.scope.model.size)*this.symbolDistance;this.finalStopPosition=this.stopPosition+this.symbolAdjustment+e,o.to(r,this.spinBounceDuration,{setY:this.finalStopPosition,ease:Elastic.easeOut.config(this.spinBounceAmplitude,this.spinBounceFrequency),onComplete:this.resetContainer.bind(this)});i=this.scope.parent.scope.parent.scope.config.earlyEnableSpin,e=this.scope.parent.scope.parent.scope.config.earlyEnableSpinOffset||0;this.scope.model.config.number==this.scope.model.index+1&&i&&o.call(function(){this.iface.earlyEnableSpinInterface(!0)},[],this,"-="+e),this.presentation.main.iface.onReelStopped&&o.call(this.presentation.main.iface.onReelStopped,[this.scope.parent,s],this.presentation.main.iface)},[s],this),o.set({},{},"+=0.001"),this.stopTimeline=o},sna.presentation.slot.SpinAnimation.prototype.animateFastSpinStop=function(i){var n=this.scope.parent.symbolsContainer,s=new this.timelineFactory;return this.sounds.reelsSpinStop(),this.sounds.fastReelsSpinStop(),this.scope.model.slot.hideStickiesReel&&this.scope.model.slot.hideStickiesReel[this.scope.model.index]&&s.call(this.iface.triggerEvent,["FastHideStickies",this.scope.model.index],this.iface),this.iface.game.getParameterValue("spinParameters")&&this.iface.game.getParameterValue("spinParameters").graduallySlowSpinification&&(this.fastSpinStopPosition=!1),this.containerReset||(this.spinLoop&&(s.call(this.spinLoop.stop,[],this.spinLoop),s.call(this.spinLoop.kill,[],this.spinLoop)),this.firstSpinLoop&&(s.call(this.firstSpinLoop.stop,[],this.firstSpinLoop),s.call(this.firstSpinLoop.kill,[],this.firstSpinLoop)),this.stopTimeline&&(s.call(this.stopTimeline.stop,[],this.stopTimeline),s.call(this.stopTimeline.kill,[],this.stopTimeline)),s.call(function(){var e,t;this.stopPosition||(this.stopPosition=n.y),this.symbolAdjustment||(e=this.stopPosition%this.symbolDistance,this.symbolAdjustment=this.symbolDistance-e),this.fastSpinStopPosition||(t=(this.scope.model.bottomSymbols.length+this.scope.model.size)*this.symbolDistance-this.spinBounceDistance*this.presentation.globalScale,this.fastSpinStopPosition=this.stopPosition+this.symbolAdjustment+t),this.finalStopPosition||(t=(this.scope.model.bottomSymbols.length+this.scope.model.size)*this.symbolDistance,this.finalStopPosition=this.stopPosition+this.symbolAdjustment+t),s.set(n,{setY:this.stopPosition+(this.symbolAdjustment||0)}),s.call(this.prepareOutcome,[],this),this.presentation.main.iface.onFastReelStop&&s.call(this.presentation.main.iface.onFastReelStop,[this.scope.parent,i],this.presentation.main.iface),s.call(this.presentation.createAnimationTimeline,["reelStop",0,!1,!0],this.presentation),this.scope.model.config.number==this.scope.model.index+1&&s.call(this.presentation.createAnimationTimeline,["fastReelStopSound",0,!1,!0],this.presentation),s.call(function(){var i=[];angular.forEach(this.scope.parent.outcomeSymbols,function(e,t){i[t]=this.presentation.createAnimationTimeline("fastSymbolLand",0,!1,!0,e).animation},this)},[],this),this.containerFinalized?(s.set(n,{setY:this.finalStopPosition}),s.call(this.finalizeContainer,[],this),s.call(this.scope.parent.disableMask,[],this.scope.parent),s.call(this.resetContainer,[],this),s.set({},{},"+=0.001")):(s.set(n,{setY:this.fastSpinStopPosition}),s.call(this.finalizeContainer,[],this),s.call(this.scope.parent.disableMask,[],this.scope.parent),s.to(n,this.fastBounceDuration,{setY:this.finalStopPosition,ease:Elastic.easeOut.config(this.spinBounceAmplitude,this.spinBounceFrequency)}),s.call(this.resetContainer,[],this),s.resume()),this.presentation.main.iface.onFastReelStopped&&s.call(this.presentation.main.iface.onFastReelStopped,[this.scope.parent,i],this.presentation.main.iface)},[i],this),s.set({},{},"+=0.001")),s},sna.presentation.slot.SpinAnimation.prototype.afterSpinStart=function(){var e=this.scope.parent.outcomeSymbols,t=e.length;for(s=0;s<t;s++)e[s].visible=!1;var i=this.scope.parent.spinningSymbols,t=i.length;for(s=0;s<t;s++)i[s].visible=!0;var n=this.scope.parent.topSymbols,t=n.length;for(s=0;s<t;s++)n[s].visible=!1;var s,r=this.scope.parent.bottomSymbols,t=r.length;for(s=0;s<t;s++)r[s].visible=!1},sna.presentation.slot.SpinAnimation.prototype.prepareOutcome=function(e){if(!this.outcomePrepared){this.outcomePrepared=!0,this.scope.parent.prepareOutcomeSymbols(!0,this.stopPosition+this.symbolAdjustment);var t=this.scope.parent.symbolsContainer,i=this.scope.parent.spinningSymbols,n=i.length;for(r=0;r<n;r++)i[r].visible=i[r].visible&&i[r].y>=-t.y+this.minY,e&&(i[r].visible=!0);var s=this.scope.parent.topSymbols,n=s.length;for(r=0;r<n;r++)s[r].visible=!0;var r,o=this.scope.parent.bottomSymbols,n=o.length;for(r=0;r<n;r++)o[r].visible=!0}},sna.presentation.slot.SpinAnimation.prototype.resetContainer=function(){var e,t;this.containerReset||(this.containerReset=!0,e=this.scope.parent,t=this.scope.parent.symbolsContainer,angular.forEach(e.outcomeSymbols,function(e){e.y+=t.y,e.scope.config.y=e.y},this),angular.forEach(e.topSymbols,function(e){e.y+=t.y,e.scope.config.y=e.y},this),angular.forEach(e.bottomSymbols,function(e){e.y+=t.y,e.scope.config.y=e.y},this),t.setY(0),this.scope.parent.createSpinningSymbols())},sna.presentation.slot.SpinAnimation.prototype.finalizeContainer=function(){var e;this.containerFinalized||(this.iface.spinningReels&&this.iface.spinningReels.pop(),this.scope.parent.spinning=!1,this.containerFinalized=!0,e=this.scope.parent,angular.forEach(e.spinningSymbols,function(e){e.visible=!1},this),this.showIdleTopSymbols||angular.forEach(e.topSymbols,function(e){e.visible=!1},this),this.showIdleBottomSymbols||angular.forEach(e.bottomSymbols,function(e){e.visible=!1},this))},sna.presentation.slot.SpinAnimation.prototype.initContainer=function(){this.iface.spinningReels=this.iface.spinningReels||[],this.iface.spinningReels.push(this);var e=this.scope.parent,t=e.scope.config;if(!t.hideSpinStartOffscreenTop){var i=e.topSymbols,n=i.length;for(r=0;r<n;r++)i[r].visible=!0}if(!t.hideSpinStartOffscreenBottom){var s=e.bottomSymbols,n=s.length;for(r=0;r<n;r++)s[r].visible=!0}var r,e=this.scope.model.size+1;if(0<e)for(r=this.scope.model.spinningSymbols.length-e-this.scope.model.topSymbols.length;r<this.scope.model.spinningSymbols.length-this.scope.model.topSymbols.length;r++)this.scope.parent.spinningSymbols[r]&&(this.scope.parent.spinningSymbols[r].visible=!0)},sna.presentation.slot.SpinAnimation.prototype.afterSpinFrame=function(){for(var e=this.scope.parent.symbolsContainer,t=this.scope.parent.spinningSymbols,i=t.length,n=0;n<i;n++){var s=t[n];s.visible=e.y>s.minY&&e.y<s.maxY}},sna.module.slot.controller(sna.presentation.slot.SPIN_ANIMATION,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.slot.SpinAnimation]),sna.presentation.slot.IDLE_ANIMATIONS="IdleAnimation",sna.presentation.slot.IdleAnimation=function(e,t){this.scope=e,this.presentation=t.presentation,this.timeline=t.presentation.timeline,this.iface=t.iface},sna.presentation.slot.IdleAnimation.prototype.animate=function(e){switch(this.symTaken&&this.symTaken.showStatic(),this.lastTimeline&&(this.lastTimeline.kill(),this.lastTimeline.stop(),delete this.lastTimeline),e.name){case"idleStart":return this.symArr=[],this.stopped=!1,this.scope.model.slot&&this.scope.model.slot.feature&&this.scope.model.slot.feature.active?new this.timeline:this.animateSymbolIdleStart(e);case"idleStop":return this.stopped=!0,new this.timeline}},sna.presentation.slot.IdleAnimation.prototype.animateSymbolIdleStart=function(e){if(this.symTaken&&this.symTaken.showStatic(),this.lastTimeline&&(this.lastTimeline.kill(),this.lastTimeline.stop(),delete this.lastTimeline),this.stopped)return new this.timeline;var t=new this.timeline({onComplete:function(){this.animateSymbolIdleStart(e)},onCompleteScope:this});0===this.symArr.length&&(this.scope.parent.reels||this.scope.parent.children.filter(function(e){return e.reels})).forEach(function(e){e.eachSymbol(function(e){e.scope.config.hasIdle&&this.symArr.push(e)},this)},this);var i=this.scope.config,n=Math.round(Math.random()*(i.interval[1]||5))+(i.interval[0]||2),i=this.symArr.splice(Math.floor(Math.random()*this.symArr.length),1)[0];return!i||i._destroyed?t:(i.scope.config.forceCreateWin=!0,i.scope.config.win.y=0,i.win||i.initWinPresentation(),i.animations.idleSymbol&&t.add(i.animations.idleSymbol.animate(e),"+="+n),this.symTaken=i,this.lastTimeline=t)},sna.module.slot.controller(sna.presentation.slot.IDLE_ANIMATIONS,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.slot.IdleAnimation]),sna.presentation.slot.REEL_WIN_ANIMATION="ReelWinAnimation",sna.presentation.slot.ReelWinAnimation=function(e,t,i){this.scope=e,this.presentation=t,this.timelineFactory=i},sna.presentation.slot.ReelWinAnimation.prototype.animate=function(e){switch(e.name){case"winFull":return this.animateWinFull(e);case"fastWinStop":return this.animateFastWinStop(e)}},sna.presentation.slot.ReelWinAnimation.prototype.animateWinFull=function(t){var e=new this.timelineFactory,i=[],n=this.scope.parent;return n.spinning||(angular.forEach(n.topSymbols,function(e){!e.scope.model.win||(e=e.animation("winFull"))&&i.push(e.animate(t))},this),angular.forEach(n.outcomeSymbols,function(e){!e.scope.model.win&&!e.scope.model.forceWin||(e=e.animation("winFull"))&&i.push(e.animate(t))},this),angular.forEach(n.bottomSymbols,function(e){!e.scope.model.win||(e=e.animation("winFull"))&&i.push(e.animate(t))},this),e.add(i,0,!1,0)),e},sna.presentation.slot.ReelWinAnimation.prototype.animateFastWinStop=function(t){var e=new this.timelineFactory,i=[],n=this.scope.parent;return angular.forEach(n.outcomeSymbols,function(e){!e.scope.model.win&&!e.scope.model.forceWin||(e=e.animation("fastWinStop"))&&i.push(e.animate(t))},this),angular.forEach(n.topSymbols,function(e){!e.scope.model.win||(e=e.animation("fastWinStop"))&&i.push(e.animate(t))},this),angular.forEach(n.bottomSymbols,function(e){!e.scope.model.win||(e=e.animation("fastWinStop"))&&i.push(e.animate(t))},this),e.add(i,0,!1,0),e},sna.module.slot.controller(sna.presentation.slot.REEL_WIN_ANIMATION,[sna.service.SCOPE,sna.service.PRESENTATION,sna.service.TIMELINE,sna.presentation.slot.ReelWinAnimation]),sna.presentation.slot.PAYOUT_CONTAINER="PayoutContainer",sna.presentation.slot.PayoutContainer=function(e,t,i,n){sna.presentation.Container.call(this,e,t),n.registerAutoUpdate(this),this.payouts=[]},sna.presentation.slot.PayoutContainer.prototype=new sna.presentation.Container({},{}),sna.presentation.slot.PayoutContainer.prototype.initPresentationContainer=sna.presentation.Container.prototype.initPresentation,sna.presentation.slot.PayoutContainer.prototype.initPresentation=function(){var n,e=this.scope,t=e.config,s=e.model,r=t.payout,t=s.symbols[t.symbol],o=s.showPayoutsInCoins,a=r.useTotalBet;t&&(r.tag="Payout",n=0,angular.forEach(t.payouts,function(e,t){var i;0<e&&(n++,i=a?o?e:e*s.getTotalBet()*s.coinNumber:o?e:e*s.bet*s.coinNumber,payoutModel={index:n,count:t,multiplier:e,win:i},i=this.presentation.createPresentation(r,this,payoutModel),this.addChild(i),this.payouts.push(i))},this))},sna.presentation.slot.PayoutContainer.prototype.positionElementContainer=sna.presentation.Container.prototype.positionElement,sna.presentation.slot.PayoutContainer.prototype.positionElement=function(e){var t=this.scope.config;if("Payout"==e.scope.config.tag){var i=e.scope.model.index,t=t.vSpacing||0;return e.y=i*t*this.presentation.globalScale,void(e.x=0)}this.positionElementContainer(e)},sna.presentation.slot.PayoutContainer.prototype.updatePresentation=function(e){var s=this.scope.model,r=(s.bet,s.coinNumber),o=s.showPayoutsInCoins,a=this.scope.config.payout.useTotalBet;angular.forEach(this.payouts,function(e,t){var i,n=e.scope.model;i=a?o?n.multiplier:n.multiplier*s.getTotalBet()*r:o?n.multiplier:n.multiplier*s.bet*r,n.win=i,e.updatePresentation()},this)},sna.presentation.slot.PayoutContainerFactory=function(e,t,i,n){n=n.iface;return new sna.presentation.slot.PayoutContainer(e,t,i,n)},sna.module.slot.controller(sna.presentation.slot.PAYOUT_CONTAINER,["$scope",sna.service.PRESENTATION,"Timeline",sna.service.MAIN,sna.presentation.slot.PayoutContainerFactory]),sna.presentation.slot.PAYLINES_INFO_CONTAINER="PaylinesInfoContainer",sna.presentation.slot.PaylinesInfoContainer=function(e,t,i,n){sna.presentation.Container.call(this,e,t),n.registerAutoUpdate(this),this.paylines=[]},sna.presentation.slot.PaylinesInfoContainer.prototype=new sna.presentation.Container({},{}),sna.presentation.slot.PaylinesInfoContainer.prototype.initPresentationContainer=sna.presentation.Container.prototype.initPresentation,sna.presentation.slot.PaylinesInfoContainer.prototype.initPresentation=function(){var e=this.scope,o=e.config,a=o.groupContainer,l=o.label,h=o.backgroundImage,c=o.groupImage,p=o.cellNo,e=(e=e.model.paylines).filter(function(e){return!(!0===e.paylinesInfoHidden)});a.tag="PaylinesInfo",e.length&&angular.forEach(e,function(e,t){paylinesModel={index:t,no:t+1,positions:e.positions};var i,n=this.presentation.createPresentation(a,this,paylinesModel),e=this.presentation.createPresentation(l,this,paylinesModel);n.addChild(e),h&&(i=this.presentation.createPresentation(h,this,paylinesModel),n.addChild(i)),c&&(i=this.presentation.createPresentation(c,this,paylinesModel),n.addChild(i));for(var s=0;s<p;s++){var r=parseInt(paylinesModel.positions[s]);!isNaN(r)&&0<=r&&((r=o.cellImage).tag="PaylinesInfoCell",r.imagePosition=s,r=this.presentation.createPresentation(r,this,paylinesModel),n.addChild(r))}this.addChild(n)},this)},sna.presentation.slot.PaylinesInfoContainer.prototype.positionElementContainer=sna.presentation.Container.prototype.positionElement,sna.presentation.slot.PaylinesInfoContainer.prototype.positionElement=function(e){var t=this.scope.config,i=e.scope.config;if("PaylinesInfo"==i.tag){var n=(r=e.scope.model).index,s=Math.floor(n/t.columns),n=n%t.columns;return e.x=n*t.hGroupSpacing*this.presentation.globalScale,void(e.y=s*t.vGroupSpacing*this.presentation.globalScale)}if("PaylinesInfoCell"==i.tag){var r=e.scope.model,n=t.hCellSpacing,s=t.vCellSpacing;return e.x=t.cellImage.x+i.imagePosition*n*this.presentation.globalScale,void(e.y=t.cellImage.y+r.positions[i.imagePosition]*s*this.presentation.globalScale)}this.positionElementContainer(e)},sna.presentation.slot.PaylinesInfoContainerFactory=function(e,t,i,n){n=n.iface;return new sna.presentation.slot.PaylinesInfoContainer(e,t,i,n)},sna.module.slot.controller(sna.presentation.slot.PAYLINES_INFO_CONTAINER,["$scope",sna.service.PRESENTATION,"Timeline",sna.service.MAIN,sna.presentation.slot.PaylinesInfoContainerFactory]),sna.model.payline={},sna.presentation.payline={},sna.service.payline={},sna.module.payline=angular.module("snaPayline",["snaCore","snaSlot"]),sna.model.payline.Payline=function(e){this.id=void 0!==e.id?e.id:Number(e.name),this.name=void 0!==e.name?e.name:String(e.id),this.positions=e.positions,this.win=!1,this.amount=0,this.symbol=null,this.winPositions=[],e.paylinesInfoHidden&&(this.paylinesInfoHidden=e.paylinesInfoHidden)},sna.model.payline.Payline.prototype.winning=function(e){return void 0===e?this.win:(this.win=e,this)},sna.model.payline.Payline.prototype.winAmount=function(e){return void 0===e?this.amount:(this.amount=e,this)},sna.model.payline.Payline.prototype.winningPositions=function(e){return void 0===e?this.winPositions:(this.winPositions=e,this)},sna.model.payline.Payline.prototype.winSymbol=function(e){return void 0===e?this.symbol:(this.symbol=e,this)},sna.model.payline.Payline.prototype.hasFeature=function(e){return void 0===e?this.feature:(this.feature=e,this)},sna.model.payline.Slot=sna.model.slot.Slot,sna.model.slot.Slot=function(e){sna.model.payline.Slot.call(this,e),this.paylines=[],angular.forEach(e.paylines,function(e){this.paylines.push(new sna.model.payline.Payline(e))},this),this.totalNumberOfPaylines=this.paylines.length,this.betLines=this.config.betLines?this.totalNumberOfPaylines:1,this.maxBetLines=this.config.betLines?this.totalNumberOfPaylines:1,this.lastBetLines=this.betLines,this.betLevels=this.config.betLevels||[1],this.betLevel=this.config.betLevel||this.betLevels[0],this.maxBetLevel=this.betLevels[this.betLevels.length-1],this.lastBetLevel=this.betLevel,this.defaultBetLevel=this.betLevel,this.useBetLinesForTotalBet=this.config.useBetLinesForTotalBet||!1,this.betLevelBets=this.config.betLevelBets||[],this.betLinesActive=e.betLinesActive||this.totalNumberOfPaylines},sna.model.slot.Slot.prototype=sna.model.payline.Slot.prototype,sna.model.slot.Slot.prototype.getTotalBet=function(){return this.useBetLinesForTotalBet?this.bet*this.coinNumber*this.betLines*this.betLevel:this.bet*this.coinNumber*this.betLevel},sna.model.slot.Slot.prototype.getBetPerLine=function(){return this.bet*this.betLevel},sna.model.payline.Slot.prototype.increaseBetLines=function(){this.betLines=this.betLines<this.totalNumberOfPaylines?this.betLines+1:this.totalNumberOfPaylines},sna.model.slot.Slot.prototype.decreaseBetLines=function(){this.betLines=1<this.betLines?this.betLines-1:1},sna.model.slot.Slot.prototype.isMaxBetLevel=function(){return this.betLevel==this.betLevels[this.betLevels.length-1]},sna.model.slot.Slot.prototype.isMinBetLevel=function(){return this.betLevel==this.betLevels[0]},sna.model.slot.Slot.prototype.setMaxBetLevel=function(){this.lastBetLevel=this.betLevel,this.betLevel=this.maxBetLevel},sna.model.slot.Slot.prototype.restoreMaxBetLevel=function(){this.betLevel=this.lastBetLevel},sna.model.slot.Slot.prototype.increaseBetLevel=function(){var e;this.isMaxBetLevel()||(e=this.betLevels.indexOf(this.betLevel),this.betLevel=this.betLevels[e+1])},sna.model.slot.Slot.prototype.decreaseBetLevel=function(){var e;this.isMinBetLevel()||(e=this.betLevels.indexOf(this.betLevel),this.betLevel=this.betLevels[e-1])},sna.model.slot.Slot.prototype.setBetLines=function(e){this.betLines=e},sna.model.slot.Slot.prototype.eachPayline=function(e,t){angular.forEach(this.paylines,e,t||this)},sna.model.slot.Slot.prototype.getPaylineById=function(t){var i=null;return this.eachPayline(function(e){if(e.id===t)return i=e,!1}),i},sna.model.slot.Slot.prototype.setMaxBetLines=function(){this.lastBetLines=this.betLines,this.betLines=this.maxBetLines},sna.model.slot.Slot.prototype.restoreMaxBetLines=function(){this.betLines=this.lastBetLines},sna.model.slot.Slot.prototype.isMaxBetLines=function(){return this.betLines==this.totalNumberOfPaylines},sna.model.slot.Slot.prototype.isMinBetLines=function(){return 1==this.betLines},sna.presentation.slot.PAYLINE_GRID_REELS_CONTAINER="PaylineGridReelsContainer",sna.presentation.slot.PaylineGridReelsContainer=function(e,t){sna.presentation.slot.GridReelsContainer.call(this,e,t.presentation,t.presentation.timeline),this.iface=t.iface,this.game=t.game,this.iface.registerEventCallback("updateAnimations",this,this.updateAnimations),this.iface.registerEventCallback("prepareWinIndividual",this,this.preparePaylineWins),this.iface.registerEventCallback("prepareOutcomeSymbols",this,this.prepareOutcomeSymbols),this.paylinePresentations=[]},sna.presentation.slot.PaylineGridReelsContainer.prototype=Object.create(sna.presentation.slot.GridReelsContainer.prototype),sna.presentation.slot.PaylineGridReelsContainer.prototype.sortBy={ASCENDING_WIN:"ascendingWin",ASCENDING_ID:"ascendingId"},sna.presentation.slot.PaylineGridReelsContainer.prototype.initPresentationGridReelsContainer=sna.presentation.slot.PaylineGridReelsContainer.prototype.initPresentation,sna.presentation.slot.PaylineGridReelsContainer.prototype.initPresentation=function(){this.initPresentationGridReelsContainer(),this.initPaylineLayers()},sna.presentation.slot.PaylineGridReelsContainer.prototype.initPaylineLayers=function(){var e={name:"spinStart",variant:"Tween",duration:.2,alpha:0};this.scope.config.hidePaylinesInstantly&&(e={name:"spinStart",variant:"Sequence",children:["call:setalpha:0"]});var t=this.scope.config,i=t.paylineIndicators||{type:"Container",layer:"PAYLINE_INDICATOR",animation:[e]};this.paylineIndicators=this.presentation.createPresentation(i,this,this.scope.model),this.addChild(this.paylineIndicators),this.animation("spinStart").addChild(this.paylineIndicators);e=t.paylineAmounts||{type:"Container",layer:"PAYLINE_AMOUNT",animation:[e]};this.paylineAmounts=this.presentation.createPresentation(e,this,this.scope.model),this.addChild(this.paylineAmounts),this.animation("spinStart").addChild(this.paylineAmounts)},sna.presentation.slot.PaylineGridReelsContainer.prototype.preparePaylineWin=function(e){var t,i,n;e.winning()&&(t=this.createPaylineAnimation(e),this.scope.config.payline&&((i=this.scope.config.payline.indicator)&&(n=this.createPaylineIndicatorPresentation(angular.copy(i),this.paylineIndicators,e),this.paylineIndicators.addChild(n),t.addChild(n)),(n=this.scope.config.payline.amount)&&(n=this.createPaylineAmountPresentation(angular.copy(n),this.paylineAmounts,e),this.paylineAmounts.addChild(n),t.addChild(n))),this.addWinningPaylineSymbols(e,t))},sna.presentation.slot.PaylineGridReelsContainer.prototype.createPaylineAnimation=function(e){var t;return(t=e?this.presentation.createAnimation(this,{variant:"Sequence",name:"winIndividual",children:["call:setActivePayline:"+e.id,{variant:"Group",children:["local"]}]}):this.presentation.createAnimation(this,{variant:"Group",name:"winIndividual",children:["local"]})).animations={},t.animation=function(e,t){return t?this.animations[e]=t:this.animations[e]},t.animation("winIndividual",t),this.animation("winIndividual").addChild(t),t.paylineModel=angular.copy(e),t},sna.presentation.slot.PaylineGridReelsContainer.prototype.setActivePayline=function(e){this.scope.slot.activePaylineId=e},sna.presentation.slot.PaylineGridReelsContainer.prototype.createPaylineIndicatorPresentation=function(e,t,i){return"Graphics"==e.type&&"PolyLine"==e.variant&&(e.points=this.calculatePaylineIndicatorPoints(e,i)),this.presentation.createPresentation(e,t,i)},sna.presentation.slot.PaylineGridReelsContainer.prototype.calculatePaylineIndicatorPoints=function(e,t){var i=[],n=this.scope.model.reels.length,s=this.scope.model.reels[0].size,r=e.yOffset||this.scope.config.areaHeight/s/this.presentation.globalScale,o=e.xOffset||this.scope.config.areaWidth/n/this.presentation.globalScale,a=-o*(n-1)/2,l=-r*(s-1)/2;return angular.forEach(t.positions,function(e,t){i.push({x:a+t*o,y:l+e*r})},this),i},sna.presentation.slot.PaylineGridReelsContainer.prototype.createPaylineAmountPresentation=function(e,t,i){var n=this.scope.model.reels.length,s=this.scope.model.reels[0].size,r=e.yOffset||this.scope.config.areaHeight/s/this.presentation.globalScale,o=e.xOffset||this.scope.config.areaWidth/n/this.presentation.globalScale,a=Math.floor((n-1)/2),l=void 0!==e.winReelIndex?e.winReelIndex:a,n=i.positions[l];return e.x=(l-a)*o,e.y=(-(s-1)/2+n)*r,void 0===e.showInCoins||e.showInCoins||(i.amount=this.getPaylineWinAmount(i),i.showValuesInCash=this.scope.slot.showValuesInCash),this.presentation.createPresentation(e,t,i)},sna.presentation.slot.PaylineGridReelsContainer.prototype.addWinningPaylineSymbols=function(i,n){n&&angular.forEach(i.winPositions,function(e,t){e&&(e=i.positions[t],void 0!==(e=this.reels[t].getSymbolPresentationOffset(e))&&n.addChild(e))},this)},sna.presentation.slot.PaylineGridReelsContainer.prototype.initAnimations=function(){this.initSpinStartAnimation(),this.initHaltWinIndividualAnimation(),this.initSpinStopAnimation(),this.initStopWinIndividualAnimation(),this.initFastWinStopAnimation(),this.initWinFullAnimation(),this.initWinIndividualAnimation()},sna.presentation.slot.PaylineGridReelsContainer.prototype.initSpinStopAnimation=function(){var e={type:this.scope.config.slotStopAnimation||"SlotStopAnimation",stagger:this.presentation.parseValue(this,this.scope.config.reelEndStagger)||this.presentation.parseValue(this,this.scope.config.reelStagger)||0},e=this.presentation.createAnimation(this,e);this.animation("spinStop",e),this.animation("fastSpinStop",e)},sna.presentation.slot.PaylineGridReelsContainer.prototype.initHaltWinIndividualAnimation=function(){var e={variant:"Sequence",name:"haltWinIndividual",children:["stop:winIndividual:paylineLoop","endLoop:winIndividual:paylineLoop","children:stopWinIndividual:cascade"]},t=this.presentation.createAnimation(this,e);this.animation(e.name,t)},sna.presentation.slot.PaylineGridReelsContainer.prototype.initSpinStartAnimation=function(){var e={variant:"Sequence",name:"spinStart",children:["stop:winIndividual:paylineLoop","endLoop:winIndividual:paylineLoop",{variant:"Group",children:["local"],stagger:this.presentation.parseValue(this,this.scope.config.reelStartStagger)||this.presentation.parseValue(this,this.scope.config.reelStagger)||0},"call:clearPaylineWins"]},t=this.presentation.createAnimation(this,e);this.animation(e.name,t)},sna.presentation.slot.PaylineGridReelsContainer.prototype.initStopWinIndividualAnimation=function(){var e={variant:"Sequence",name:"stopWinIndividual",children:["stop:winIndividual:paylineLoop","endLoop:winIndividual:paylineLoop","children:stopWinIndividual:cascade","call:clearPaylineWins"]},t=this.presentation.createAnimation(this,e);this.animation(e.name,t)},sna.presentation.slot.PaylineGridReelsContainer.prototype.initFastWinStopAnimation=function(){var e={variant:"Group",name:"fastWinStop",children:["children:fastWinStop:cascade"]},t=this.presentation.createAnimation(this,e);this.animation(e.name,t)},sna.presentation.slot.PaylineGridReelsContainer.prototype.initWinFullAnimation=function(){var e={variant:"Sequence",name:"winFull",children:["call:preparePaylineWins",{variant:"Group",children:["local"]}]},t=this.presentation.createAnimation(this,e);this.animation(e.name,t)},sna.presentation.slot.PaylineGridReelsContainer.prototype.initWinIndividualAnimation=function(){var e={name:"winIndividual",label:"paylineLoop",variant:"Loop",children:[{variant:"Sequence",children:["local"]}]},t=this.presentation.createAnimation(this,e);this.animation(e.name,t)},sna.presentation.slot.PaylineGridReelsContainer.prototype.clearPaylineWins=function(){this.paylineIndicators&&this.paylineAmounts&&(this.paylineIndicators.alpha=1,this.paylineAmounts.alpha=1,angular.forEach([].concat(this.paylineAmounts.children,this.paylineIndicators.children),function(e){this.paylineIndicators.mask!=e&&this.paylineAmounts.mask!=e&&e.destroy({children:!0})},this)),this.animation("winSum")&&this.animation("winSum").children&&this.animation("winSum").removeChildren(),this.animation("winFull")&&this.animation("winFull").children&&this.animation("winFull").removeChildren(),this.animation("winIndividual")&&this.animation("winIndividual").children&&this.animation("winIndividual").removeChildren(),this.animation("winIndividualFS")&&this.animation("winIndividualFS").children&&this.animation("winIndividualFS").removeChildren(),this.paylineAnimations&&angular.forEach(this.paylineAnimations,function(e,t){this.paylineAnimations[t].length=0},this)},sna.presentation.slot.PaylineGridReelsContainer.prototype.updateAnimations=function(){},sna.presentation.slot.PaylineGridReelsContainer.prototype.preparePaylineWins=function(){var e=angular.copy(this.scope.model.slot.paylines);this.scope.config.payline&&this.scope.config.payline.sortBy&&(e=this.sortPaylines(this.scope.config.payline.sortBy,e));for(var t=0;t<e.length;t++)this.preparePaylineWin(e[t])},sna.presentation.slot.PaylineGridReelsContainer.prototype.prepareOutcomeSymbols=function(){for(var e=this.reels,t=0;t<e.length;t++)e[t].prepareOnScreenOutcomeSymbols(),!e[t].enabled&&e[t].disableSymbols&&e[t].disableSymbols()},sna.presentation.slot.PaylineGridReelsContainer.prototype.sortPaylines=function(e,t){return e&&(e.constructor===Array?angular.forEach(e,function(e){t=this._doSort(e,t)},this):t=this._doSort(e,t)),t},sna.presentation.slot.PaylineGridReelsContainer.prototype._doSort=function(e,t){if(t)switch(e){case this.sortBy.ASCENDING_WIN:t=t.sort(function(e,t){return e.amount-t.amount});break;case this.sortBy.ASCENDING_ID:t=t.sort(function(e,t){return e.id-t.id});break;default:var i;e.constructor!==Object||(i=e.property)&&(t=t.sort(function(e,t){return e[i]==t[i]?0:!e[i]&&t[i]?1:e[i]&&!t[i]?-1:void 0}))}return t},sna.presentation.slot.PaylineGridReelsContainer.prototype.getPaylineWinAmount=function(e){return this.scope.slot.showValuesInCash?e.amount*this.scope.slot.bet:e.amount},sna.presentation.slot.PaylineGridReelsContainer.prototype.getOutcomeSymbolPresentation=function(e,t){return this.reels[e].outcomeSymbols[t]},sna.presentation.slot.PaylineGridReelsContainer.prototype.eachReel=function(e,t){return angular.forEach(this.reels,e,t||this)},sna.presentation.slot.PaylineGridReelsContainer.prototype.eachSymbol=function(n,s){this.eachReel(function(e,i){e.eachSymbol&&e.eachSymbol(function(e,t){n.call(s||this,e,i,t)})})},sna.presentation.slot.PaylineGridReelsContainer.prototype.destroyPresentation=function(){this.iface.unregisterEventCallback("prepareWinIndividual",this,this.preparePaylineWins)},sna.presentation.slot.PaylineGridReelsContainerFactory=function(e,t){return new sna.presentation.slot.PaylineGridReelsContainer(e,t)},sna.module.slot.controller(sna.presentation.slot.PAYLINE_GRID_REELS_CONTAINER,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.slot.PaylineGridReelsContainerFactory]),sna.service.payline.Slot=sna.service.slot.Slot,sna.service.slot.Slot=function(){sna.service.payline.Slot.call(this)},sna.service.slot.Slot.prototype=sna.service.payline.Slot.prototype,sna.service.slot.Slot.prototype.spinOutcomePaylineBase=sna.service.slot.Slot.prototype.spinOutcome,sna.service.slot.Slot.prototype.spinOutcome=function(e){this.clearPaylineWins(),this.spinOutcomePaylineBase(e),log("Paylines","spinOutcome",sna.log.DEBUG,"paylines:",this.scope.game.paylines)},sna.service.slot.Slot.prototype.processWinPaylineBase=sna.service.slot.Slot.prototype.processWin,sna.service.slot.Slot.prototype.processWin=function(e){var t;"payline"===e.type?(t=this.scope.game.getPaylineById(e.id))&&(t.winning(!0),void 0!==e.win&&t.winAmount(e.win),void 0!==e.symbolWins&&t.winningPositions(e.symbolWins),void 0!==e.symbol&&t.winSymbol(e.symbol),void 0!==e.feature&&t.hasFeature(e.feature)):this.processWinPaylineBase(e)},sna.service.slot.Slot.prototype.clearPaylineWins=function(){this.scope.game.eachPayline(function(e){e.winning(!1).winAmount(0).winningPositions([]).hasFeature(null)})},sna.service.slot.SlotInterface.prototype.increaseBetLines=function(){this.game.scope.game.increaseBetLines(),this.updateBetLinesButtons(),this.updateMaxBetButton(),this.autoUpdatePresentation()},sna.service.slot.SlotInterface.prototype.increaseBetLevel=function(){this.game.scope.game.increaseBetLevel(),this.updateBetLevelButtons(),this.updateMaxBetButton(),this.autoUpdatePresentation()},sna.service.slot.SlotInterface.prototype.decreaseBetLines=function(){this.game.scope.game.decreaseBetLines(),this.updateBetLinesButtons(),this.updateMaxBetButton(),this.autoUpdatePresentation()},sna.service.slot.SlotInterface.prototype.decreaseBetLevel=function(){this.game.scope.game.decreaseBetLevel(),this.updateBetLevelButtons(),this.updateMaxBetButton(),this.autoUpdatePresentation()},sna.service.slot.SlotInterface.prototype.selectPayline=function(e,t){this.setBetLines(parseInt(t)+1)},sna.service.slot.SlotInterface.prototype.displayPayline=function(e,t){t=this.presentation.getById(t);this.presentation.createAnimationTimeline("showPayline",0,!1,!0,t)},sna.service.slot.SlotInterface.prototype.hidePayline=function(e,t){t=this.presentation.getById(t);this.presentation.createAnimationTimeline("hidePayline",0,!1,!0,t)},sna.service.slot.SlotInterface.prototype.setBetLines=function(e){this.game.scope.game.setBetLines(e),this.autoUpdatePresentation()},sna.service.slot.SlotInterface.prototype.updateBetLinesButtons=function(){this.scope.game.isMinBetLines()?(this.presentation.getById(this.getBetLinesDownId())&&this.presentation.getById(this.getBetLinesDownId()).disable(),this.presentation.getById(this.getBetLinesUpId())&&this.presentation.getById(this.getBetLinesUpId()).enable()):(this.scope.game.isMaxBetLines()?this.presentation.getById(this.getBetLinesUpId())&&this.presentation.getById(this.getBetLinesUpId()).disable():this.presentation.getById(this.getBetLinesUpId())&&this.presentation.getById(this.getBetLinesUpId()).enable(),this.presentation.getById(this.getBetLinesDownId())&&this.presentation.getById(this.getBetLinesDownId()).enable())},sna.service.slot.SlotInterface.prototype.updateBetLevelButtons=function(){this.scope.game.isMinBetLevel()?(this.presentation.getById(this.getBetLevelDownId())&&this.presentation.getById(this.getBetLevelDownId()).disable(),this.presentation.getById(this.getBetLevelUpId())&&this.presentation.getById(this.getBetLevelUpId()).enable()):(this.scope.game.isMaxBetLevel()?this.presentation.getById(this.getBetLevelUpId())&&this.presentation.getById(this.getBetLevelUpId()).disable():this.presentation.getById(this.getBetLevelUpId())&&this.presentation.getById(this.getBetLevelUpId()).enable(),this.presentation.getById(this.getBetLevelDownId())&&this.presentation.getById(this.getBetLevelDownId()).enable())},sna.service.slot.SlotInterface.prototype.restoreBetLinesButtons=function(){!this.scope.game.isMinBetLines()&&this.presentation.getById(this.getBetLinesDownId())&&this.presentation.getById(this.getBetLinesDownId()).enable(),!this.scope.game.isMaxBetLines()&&this.presentation.getById(this.getBetLinesUpId())&&this.presentation.getById(this.getBetLinesUpId()).enable()},sna.service.slot.SlotInterface.prototype.restoreBetLevelButtons=function(){!this.scope.game.isMinBetLevel()&&this.presentation.getById(this.getBetLevelDownId())&&this.presentation.getById(this.getBetLevelDownId()).enable(),!this.scope.game.isMaxBetLevel()&&this.presentation.getById(this.getBetLevelUpId())&&this.presentation.getById(this.getBetLevelUpId()).enable()},sna.service.slot.SlotInterface.prototype.maxBetToggleOld=sna.service.slot.SlotInterface.prototype.maxBetToggle,sna.service.slot.SlotInterface.prototype.maxBetToggle=function(e){e.toggleState?(this.scope.game.setMaxBetLines(),this.scope.game.setMaxBetLevel(),this.presentation.getById(this.getBetLinesUpId())&&this.presentation.getById(this.getBetLinesUpId()).disable(),this.presentation.getById(this.getBetLevelUpId())&&this.presentation.getById(this.getBetLevelUpId()).disable()):(this.scope.game.restoreMaxBetLines(),this.scope.game.restoreMaxBetLevel(),this.scope.game.isMinBetLines()&&this.presentation.getById(this.getBetLinesDownId())&&this.presentation.getById(this.getBetLinesDownId()).disable(),this.scope.game.isMinBetLevel()&&this.presentation.getById(this.getBetLevelDownId())&&this.presentation.getById(this.getBetLevelDownId()).disable()),this.restoreBetLinesButtons(),this.restoreBetLevelButtons(),this.maxBetToggleOld(e)},sna.service.slot.SlotInterface.prototype.getBetLinesUpId=function(){return"betLinesUp"},sna.service.slot.SlotInterface.prototype.getBetLinesDownId=function(){return"betLinesDown"},sna.service.slot.SlotInterface.prototype.getBetLevelUpId=function(){return"betLevelUp"},sna.service.slot.SlotInterface.prototype.getBetLevelDownId=function(){return"betLevelDown"},sna.model.tripleBellsProvider={},sna.presentation.tripleBellsProvider={},sna.service.tripleBellsProvider={},sna.module.tripleBellsProvider=angular.module("tripleBellsProvider",["snaCore"]),sna.model.slot.TripleBellsSettingsConfiguration=function(){this.game={},this.game.animations=!0,this.game.background_sounds=!1,this.game.balanceInCoins=!1,this.game.balanceInCurrency=!0,this.game.bet_max=!1,this.game.coin_value=1,this.game.fast_spin=!1,this.game.game_sounds=!1,this.game.intro_screen=!0,this.game.line_bet=1,this.game.play_twin=!1,this.game.slideable_touch=!1,this.game.touch_anywhere=!1,this.game.spacebar_spin=!0,this.general={},this.general.sounds=!0},sna.model.slot.TripleBellsSettingsConfiguration.prototype=Object.create(Object.prototype),sna.service.tripleBellsProvider.TRIPLE_BELLS_GAME="TripleBellsGameService",sna.service.tripleBellsProvider.TRIPLE_BELLS_GAME_PROVIDER=sna.service.tripleBellsProvider.TRIPLE_BELLS_GAME+sna.service.PROVIDER_SUFFIX,sna.service.tripleBellsProvider.TripleBellsGame=function(){sna.service.slot.Slot.call(this),this.name=sna.service.tripleBellsProvider.TRIPLE_BELLS_GAME},sna.service.tripleBellsProvider.TripleBellsGame.prototype=Object.create(sna.service.slot.Slot.prototype),sna.service.tripleBellsProvider.TripleBellsGame.prototype.setupSlotService=sna.service.tripleBellsProvider.TripleBellsGame.prototype.setup,sna.service.tripleBellsProvider.TripleBellsGame.prototype.setup=function(e){this.setupSlotService(e),this.setUserConfigurations(e),this.setupGameTypes(e),this.setupCoinValues(e),this.setupGambleType(e),this.setReplay(e.slot.replay),this.setupJackpot(e),this.setRTP(e),this.setSpinOptions(e),this.setSimpleMessage(e),this.setPokerStars(e),this.setSpinToWin(e),this.scope.game.realityReminder={},this.scope.game.realityReminder.stake=0,this.scope.game.realityReminder.winnings=0,this.scope.game.lastSpinCoinValue=this.scope.game.coinValue,this.scope.game.bankSettings=e.bankSettings,this.scope.game.homeButtonDeactivate=e.homeButtonDeactivate,this.scope.game.fullScreenButtonDeactivate=e.fullScreenButtonDeactivate,this.scope.game.serverVersion=e.serverVersion,this.scope.game.multiplier=1,this.scope.game.winnings=[],this.scope.game.superWheelGame=e.superWheelGame},sna.service.tripleBellsProvider.TripleBellsGame.prototype.setPokerStars=function(e){this.scope.game.isPokerStars=!1,e&&e.slot&&e.slot.isPokerStars&&(this.scope.game.isPokerStars=e.slot.isPokerStars)},sna.service.tripleBellsProvider.TripleBellsGame.prototype.setSpinToWin=function(e){e.spinToWinEnabled&&(this.scope.game.spinToWinEnabled=e.spinToWinEnabled)},sna.service.tripleBellsProvider.TripleBellsGame.prototype.setUserConfigurations=function(t){t&&t.slot&&t.slot.configuration&&Object.keys(t.slot.configuration).forEach(function(e){t.slot.configuration[e];this.setConfigurationModel(t,e)}.bind(this))},sna.service.tripleBellsProvider.TripleBellsGame.prototype.setConfigurationModel=function(e,t){var i,n=!1,s=["true","false"];e&&e.slot.configuration&&e.slot.configuration[t]&&("all"===(i=e.slot.configuration[t])?n=!0:"none"!==i&&-1===s.indexOf(i)&&isNaN(i)?(e=(e=i).charAt(0).toUpperCase()+e.slice(1),this.scope.layout.has(e)&&(n=!0),"maxWinProbability"===t&&(n=i),"gameHistoryLib"===t&&(n=i)):n="none"!==i&&(-1!==s.indexOf(i)?"true"===i:i)),this.scope.game[t]=n},sna.service.tripleBellsProvider.TripleBellsGame.prototype.setSpinOptions=function(e){var t,i,n;e&&e.slot&&null!=e.slot.minimumSpinDuration&&this.scope.game.reelsets&&(t=this.scope.config.slot.reels[0].number,n=this.getParameterValue("spinParameters"),i=e.slot.minimumSpinDuration,n.spinStopDuration?(this.scope.config.iface.minimumSpinDuration=i-n.spinStopDuration.default,this.scope.config.iface.minimumSpinDurationTurboSpin=i-n.spinStopDuration.turbo):(n=this.getParameterValue("customSpinDurationStagger")||(n.reelEndStagger?n.reelEndStagger.default:0),this.scope.config.iface.minimumSpinDuration=e.slot.minimumSpinDuration-t*n,this.scope.config.iface.minimumSpinDurationTurboSpin=e.slot.minimumSpinDuration,this.scope.game.reelStopDuration=t*n),this.scope.config.iface.minimumSpinDurationTurboSpin&&(this.scope.game.disableSlamStopConfiguration=this.scope.game.disableSlamStop,this.scope.game.disableSlamStop=!0)),e&&e.slot&&e.slot.configuration&&null!=e.slot.configuration.disableSpaceBar&&(this.scope.game.disableSpaceBar="true"==e.slot.configuration.disableSpaceBar)},sna.service.tripleBellsProvider.TripleBellsGame.prototype.setupGambleType=function(e){e.slot.gambleType&&(this.scope.game.gambleType=e.slot.gambleType)},sna.service.tripleBellsProvider.TripleBellsGame.prototype.setRTP=function(e){this.scope.game.rtp=this.scope.game.config.rtp,e.slot&&e.slot.rtp&&(this.scope.game.rtp=e.slot.rtp)},sna.service.tripleBellsProvider.TripleBellsGame.prototype.setMiniFeature=function(e){e.miniFeature&&(this.scope.game.miniFeature=e.miniFeature)},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getWinLineSound=function(e){return this.scope.game&&this.scope.game.cascadeCount<12?e.replace("<placeholder>",this.scope.game.cascadeCount-1):"0"},sna.service.tripleBellsProvider.TripleBellsGame.prototype.setReplay=function(e){e&&(this.scope.game.replay=e)},sna.service.tripleBellsProvider.TripleBellsGame.prototype.resetReplay=function(){this.setActiveGameType(this.scope.game.replay.activeGameIndex),this.scope.game.setValue(this.scope.game.replay.reels),this.scope.game.balanceCash=this.scope.game.replay.balance;1==this.scope.game.replay.activeGameIndex?this.getSuperStakeMultiplier():this.scope.game.replay.activeGameIndex,this.scope.game.coinValue=this.scope.game.replay.coinValue,this.scope.game.replay.freeRounds?(this.scope.game.freeRounds=this.scope.game.replay.freeRounds,this.scope.game.freeRounds.postponed||(this.scope.game.freeRounds.active=!0)):this.resetFreeRounds()},sna.service.tripleBellsProvider.TripleBellsGame.prototype.setupJackpot=function(e){e.slot.jackpot&&(this.scope.game.jackpot=e.slot.jackpot),this.scope.game.replay&&this.scope.game.replay.jackpot&&(this.scope.game.jackpot=this.scope.game.replay.jackpot)},sna.service.tripleBellsProvider.TripleBellsGame.prototype.setupCoinValues=function(e){e=(e.slot.coinValues?e:this.scope.config).slot;this.scope.game.coinValues=e.coinValues},sna.service.tripleBellsProvider.TripleBellsGame.prototype.setupGameTypes=function(e){e=(e.slot.gameTypes?e:this.scope.config).slot;this.scope.game.gameTypes=e.gameTypes,this.setActiveGameType(void 0!==e.activeGameIndex?e.activeGameIndex:this.scope.game.gameTypes.length-1),this.scope.game.lastSpinGameTypeIndex=this.scope.game.activeGameTypeIndex},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getActiveGameType=function(){return this.scope.game.gameTypes[this.scope.game.activeGameTypeIndex]},sna.service.tripleBellsProvider.TripleBellsGame.prototype.setActiveGameType=function(e){this.getActiveGameTypeIndex()!==e&&this.setActiveGameTypeIndex(e)},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getActiveGameTypeIndex=function(){return this.scope.game.activeGameTypeIndex},sna.service.tripleBellsProvider.TripleBellsGame.prototype.setActiveGameTypeIndex=function(e){(e<0||e>this.scope.game.gameTypes.length-1||this.scope.game.hideSuperStake)&&(log(this.name,"setActiveGameTypeIndex",sna.log.DEBUG,"Invalid game type index: "+e),e=0),this.scope.game.activeGameTypeIndex=e},sna.service.tripleBellsProvider.TripleBellsGame.prototype.spinOutcomeSlotService=sna.service.tripleBellsProvider.TripleBellsGame.prototype.spinOutcome,sna.service.tripleBellsProvider.TripleBellsGame.prototype.spinOutcome=function(e){this.clearSpinification(e),this.spinOutcomeSlotService(e),this.chechkSpinificationType(e),this.outcomeEmptySetup(e),this.setMaxWinReached(e),e.reels&&(this.placeRealityReminderWinnings(this.scope.game.totalWin),this.scope.game.realityReminderLastWin=this.scope.game.totalWin),this.scope.game.superWheel=e.superWheel,this.setSimpleMessage(e),this.scope.game.totalWinBeforeGamble=e.win,sna.service.tripleBellsProvider.playModes.REPLAY===this.scope.game.playMode&&e.freeRounds&&0<=e.freeRounds.left&&e.freeRounds.start&&this.acceptFreeRounds()},sna.service.tripleBellsProvider.TripleBellsGame.prototype.chechkSpinificationType=function(n){n.spinification&&this.scope.game.reels&&angular.forEach(this.scope.game.reels.reels,function(e,t){var i;e.spinification&&(i="regular",n.spinificationType&&(i=n.spinificationType),e.spinificationType=i)},this)},sna.service.tripleBellsProvider.TripleBellsGame.prototype.setMaxWinReached=function(e){this.scope.game.maxWinReached=e.maxWinReached||!1},sna.service.tripleBellsProvider.TripleBellsGame.prototype.outcomeEmptySetup=function(e){e.reels&&e.reels.length||this.scope.game.setValue(this.scope.config.slot.initial.middle),e.wins&&e.wins.length||(e.wins=[]),e.win||(this.scope.game.totalWin=0)},sna.service.tripleBellsProvider.TripleBellsGame.prototype.resetSimpleMessage=function(e){this.scope.game.simpleMessageArr=[],this.scope.game.simpleMessage=null,this.scope.game.simpleMessageCode=null},sna.service.tripleBellsProvider.TripleBellsGame.prototype.setSimpleMessage=function(e){this.resetSimpleMessage(),e&&e.simpleMessage&&0<e.simpleMessage.length&&(this.scope.game.simpleMessageArr=e.simpleMessage,this.scope.game.simpleMessage=e.simpleMessage[0],this.scope.game.simpleMessageCode=e.simpleMessageCode)},sna.service.tripleBellsProvider.TripleBellsGame.prototype.clearSpinification=function(e){this.scope.game.reelsets&&Object.keys(this.scope.game.reelsets).forEach(function(e){e=this.scope.game.reelsets[e];e&&e.reels&&e.reels.forEach(function(e){e.spinification=!1}.bind(this))}.bind(this))},sna.service.tripleBellsProvider.TripleBellsGame.prototype.spin=function(e){this.scope.game.restoreData=null;var t=this.scope.game;t.mode(sna.model.slot.MODE_SPIN);var i,n=t.feature,s=n?this.scope.config.slotFeatures[n.name]:null,e=void 0===(e=n&&"fs"==n.name?!1:e)||e,t=this.shouldUpdateAutoplay(n,s);e&&this.placeBet(),n||this.placeRealityReminderStake(),t&&(e=this.scope.game.autoplay,t=this.scope.game.isInfinityAutoplay(),this.conditionForAutoplayUpdate()&&(t?(e.played++,e.leftOrPlayed=e.played):(e.left--,e.leftOrPlayed=e.left))),n&&"FreeSpins"==s.type&&(n.left--,i=!1,["game0","game1","game2","game3"].forEach(function(e){n[e]&&(i=!0,0<n[e].left&&n.left--,n[e].left--)}),i&&n.left++),this.scope.game.lastSpinGameTypeIndex=this.scope.game.activeGameTypeIndex,this.scope.game.lastSpinCoinValue=this.scope.game.coinValue},sna.service.tripleBellsProvider.TripleBellsGame.prototype.shouldUpdateAutoplay=function(e,t){return!e||!t||"FreeSpins"!=t.type},sna.service.tripleBellsProvider.TripleBellsGame.prototype.canGamble=function(){return this.scope.lastResult&&this.scope.lastResult.gambleOutcome&&this.scope.lastResult.gambleOutcome.canGamble&&this.scope.game.gambleType&&this.scope.game.gambleType.active},sna.service.tripleBellsProvider.TripleBellsGame.prototype.isBigWin=function(e){if(this.scope.game.bigWinIndex=-1,void 0===e)return!1;var t=this.scope.config.parameters.bigWinValues;if(Math.min.apply(null,t)*this.getTotalBetInCash()<=e){for(var i=this.scope.game.bigWinIndex=0;i<t.length;i++)e>=t[i]*this.getTotalBetInCash()&&(this.scope.game.bigWinIndex=i);return!0}return!1},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getBigWinIndex=function(){return this.isBigWin(this.scope.game.cascadeWin),this.scope.game.bigWinIndex},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getBigWinIndexForValue=function(e){var t=-1,i=this.scope.config.parameters.bigWinValues;if(Math.min.apply(null,i)*this.getTotalBetInCash()<=e)for(var t=0,n=0;n<i.length;n++)e>=i[n]*this.getTotalBetInCash()&&(t=n);return t},sna.service.tripleBellsProvider.TripleBellsGame.prototype.placeBet=function(){this.getBalanceInCash()>=this.getTotalBetInCash()&&!this.isFreeRoundsActive()&&(this.scope.game.balanceCash-=this.getTotalBetInCash())},sna.service.tripleBellsProvider.TripleBellsGame.prototype.autoplayThresholdTriggered=function(){var e=this.scope.game.autoplay;if(e.active){if(e.winThresholdActive&&this.scope.game.totalWin>=e.winThreshold)return!0;if(e.autoplayAnyWinThresholdActive&&this.scope.game.totalWin)return!0;if(e.winIncreaseThresholdActive&&e.totalWin>=e.winIncreaseThreshold)return!0;if(e.winDecreaseThresholdActive&&(e.initialBalance-e.newBalance+this.getTotalBetInCash()-this.scope.game.totalWin).toFixed(2)>e.winDecreaseThreshold&&!this.scope.game.feature)return!0;if(e.totalBetToGambleThresholdActive&&e.totalBetToGamble>=e.totalBetToGambleThreshold)return!0}return!1},sna.service.tripleBellsProvider.TripleBellsGame.prototype.isAutoplayPaused=function(){return this.scope.game.autoplay.paused},sna.service.tripleBellsProvider.TripleBellsGame.prototype.resumeAutoplay=function(){var e=this.scope.game.autoplay;e.paused=!1,e.active=!0,e.freeSpinsFromAutoplay=!0},sna.service.tripleBellsProvider.TripleBellsGame.prototype.pauseAutoplay=function(){var e=this.scope.game.autoplay;e.paused=!0,e.active=!1,e.freeSpinsFromAutoplay=!0},sna.service.tripleBellsProvider.TripleBellsGame.prototype.startAutoplay=function(e){var t=this.scope.game.balanceCash,i=this.scope.game.autoplay;i.active=!0,i.left=Number(e)||1/0,i.left===1/0?(i.played=0,i.leftOrPlayed=0):i.leftOrPlayed=i.left,i.initialBalance=t,i.newBalance=t,i.totalWin=0,i.totalBetToGamble=0,i.freeSpinsFromAutoplay=!1},sna.service.tripleBellsProvider.TripleBellsGame.prototype.stopAutoplay=function(){var e=this.scope.game.autoplay;e.active=!1,e.paused=!1,e.left=0,e.initialBalance=0,e.newBalance=0,e.played=0,e.leftOrPlayed=0,e.winDecreaseThresholdActive&&(e.winDecreaseThresholdActive=!1),e.winIncreaseThresholdActive&&(e.winIncreaseThresholdActive=!1),e.totalWin=0,e.totalBetToGamble=0;var t=this.scope.game.feature;t&&t.start&&!e.stopOnFeature&&(e.freeSpinsFromAutoplay=!0),t&&t.start||(e.freeSpinsFromAutoplay=!1)},sna.service.tripleBellsProvider.TripleBellsGame.prototype.resetThresholds=function(){var e=this.scope.game.autoplay;e.winThresholdActive=!1,e.winThreshold=0,e.winIncreaseThresholdActive=!1,e.winIncreaseThreshold=0,e.totalWin=0,e.totalBetToGambleThresholdActive=!1,e.totalBetToGambleThreshold=0,e.winDecreaseThresholdActive=!1,e.winDecreaseThreshold=0,e.autoplayAnyWinThresholdActive=!1},sna.service.tripleBellsProvider.TripleBellsGame.prototype.resetAutoplay=function(){this.stopAutoplay(),this.resetThresholds()},sna.service.tripleBellsProvider.TripleBellsGame.prototype.updateAutoplayBalance=function(e){this.scope.game.updateAutoplay(e);e=this.scope.game.autoplay;sna.service.util.returnIf(this,"scope.game.feature.active")&&!sna.service.util.returnIf(this,"scope.game.feature.start")||(e.totalBetToGamble+=this.getTotalBetInCash())},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getAutoplayValue=function(){return this.scope.game.autoplay.left===1/0?"":this.scope.game.autoplay.left},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getTotalWinInCash=function(){return this.scope.game.totalWin},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getCascadeWinInCash=function(){return this.scope.game.totalWin},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getBalanceInCash=function(){return+this.scope.game.balanceCash},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getFsTotalWinInCash=function(){return this.scope.game.feature&&this.scope.game.feature.grandTotal||0},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getFsPrevTotalWinInCash=function(){return this.scope.game.feature?this.scope.game.feature.prevTotalWin:0},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getTotalBetInCash=function(){return parseFloat((this.getTotalBetInCoins()*this.getCoinValue()).toFixed(4))},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getBaseTotalBetInCash=function(){var e=this.getTotalBetInCash();return this.scope.game.ssActive&&(e/=this.getSuperStakeMultiplier()),e},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getBaseTotalBetInCoins=function(){var e=this.getTotalBetInCoins();return this.scope.game.ssActive&&(e/=this.getSuperStakeMultiplier()),e},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getMinimalBetInCash=function(){return this.scope.game.bets[0]*this.scope.game.coinValues[0]*this.getBetLinesActive()},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getBetLinesActive=function(){return this.scope.game.betLinesActive},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getTotalWinInCoins=function(){return Math.round(this.getTotalWinInCash()/this.getCoinValue())},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getCascadeWinInCoins=function(){return Math.round(this.getCascadeWinInCash()/this.getCoinValue())},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getTotalBetInCoins=function(){return this.getGameBet()*this.getActiveGameType().betMultiplier*this.getBetModeModifier()},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getBetModeModifier=function(){var e=this.getBetMode();return 1===e||22===e||58===e?this.getBetLinesForBetMode(e):1},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getBalanceInCoins=function(){return Math.round(this.getBalanceInCash()/this.getCoinValue())},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getFsTotalWinInCoins=function(){return Math.round(this.getFsTotalWinInCash()/this.getCoinValue())},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getFsPrevTotalWinInCoins=function(){return Math.round(this.getFsPrevTotalWinInCash()/this.getCoinValue())},sna.service.tripleBellsProvider.TripleBellsGame.prototype.inFreeSpins=function(){return!(!this.scope.game.feature||!1!==this.scope.game.feature.start)},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getCoinOrCashValue=function(e,t){var i=Math.round(e/this.getCoinValue()),n=e;return t&&(n=sna.service.util.formatCurrency(e,this.scope.game.currency)),this.scope.game.showValuesInCash?n:i},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getCoinValue=function(){return Number(this.scope.game.coinValue)},sna.service.tripleBellsProvider.TripleBellsGame.prototype.isWinLessThanBet=function(){return this.getTotalWinInCash()<=this.getTotalBetInCash()},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getGameBet=function(){return this.getActiveGameType().superbet?2*this.scope.game.bet:this.scope.game.bet},sna.service.tripleBellsProvider.TripleBellsGame.prototype.isInMode=function(){var e=arguments[0];if(void 0===e)return!1;e.constructor!==Array&&(e=[].slice.call(arguments));var t=!1;return angular.forEach(e,function(e){!1===t&&this.scope.game.isInMode(e)&&(t=!0)},this),t},sna.service.tripleBellsProvider.TripleBellsGame.prototype.isReelEnabled=function(e){return e<this.getActiveGameType().activeReels},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getDevice=function(){return this.scope.layout.environmentTags.find(function(e){if("Tablet"==e||"Mobile"==e)return e})},sna.service.tripleBellsProvider.TripleBellsGame.prototype.placeRealityReminderStake=function(){this.scope.game.realityReminder.stake+=this.getTotalBetInCash()},sna.service.tripleBellsProvider.TripleBellsGame.prototype.placeRealityReminderWinnings=function(e){this.scope.game.realityReminder.winnings+=e},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getRealityReminderStake=function(){return this.scope.game.realityReminder.stake},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getRealityReminderWinnings=function(){return this.scope.game.realityReminder.winnings},sna.service.tripleBellsProvider.TripleBellsGame.prototype.gameStateRestored=function(){return void 0!==this.scope.game.restoreData&&null!==this.scope.game.restoreData},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getPayoutBet=function(e){e=(e?this.getTotalBetInCoins():this.scope.game.bet)*this.scope.game.coinNumber;return this.scope.game.ssActive&&(e/=this.getSuperStakeMultiplier()),this.scope.game.showPayoutsInCoins||(e*=this.getCoinValue()),e},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getGameSettings=function(){return this.scope.game.gameSettings},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getGameSettingsProperty=function(e,t){return sna.service.tripleBellsProvider.playModes.REPLAY!=this.scope.game.playMode&&(null!=(e=((t=t||!1)?this.scope.game.gameSettings.general:this.scope.game.gameSettings.game)[e])?isNaN(parseInt(e))?!!e&&("true"===e.toString().toLowerCase()||"all"===e.toString().toLowerCase()):parseInt(e):e)},sna.service.tripleBellsProvider.TripleBellsGame.prototype.setGameSettingsProperty=function(e,t,i){i=i||!1,this.scope.game&&(i?this.scope.game.gameSettings.general[e]=t:this.scope.game.gameSettings.game[e]=t)},sna.service.tripleBellsProvider.TripleBellsGame.prototype.showTouchAnywhereButton=function(){return null==this.scope.game.touchAnywhereButton||this.scope.game.touchAnywhereButton},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getBetPerLine=function(){return this.scope.game.bet},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getGameTypes=function(){return this.scope.game.gameTypes},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getBetModes=function(){return this.scope.game.gameTypes.map(function(e){return e.bmode})},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getCoinValues=function(){return this.scope.game.coinValues.map(Number)},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getBetLinesForBetMode=function(t){return this.scope.game.gameTypes.find(function(e){return e.bmode==t},this).lines},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getActiveCoinValueIndex=function(){return this.scope.game.coinValues.indexOf(this.scope.game.coinValue.toString())},sna.service.tripleBellsProvider.TripleBellsGame.prototype.setMaxBetCoinValue=function(){this.scope.game.lastCoinValue=this.scope.game.coinValue,this.scope.game.coinValue=this.scope.game.coinValues[this.scope.game.coinValues.length-1]},sna.service.tripleBellsProvider.TripleBellsGame.prototype.restoreMaxBetCoinValue=function(){this.scope.game.coinValue=this.scope.game.lastCoinValue},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getCoinEmitterFrequency=function(){return this.getParameterValue("coinEmitterFrequency",this.scope.game.totalCoinsWin)||.1},sna.service.tripleBellsProvider.TripleBellsGame.prototype.isBetStateChanged=function(){var e=this.scope.game;return e.lastSpinCoinValue!=e.coinValue},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getBetMode=function(e){return this.getActiveGameType().bmode},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getGameTypeIndexByBetMode=function(e){for(var t=0,i=0;i<this.scope.game.gameTypes.length;i++)if(this.scope.game.gameTypes[i].bmode==e){t=i;break}return t},sna.service.tripleBellsProvider.TripleBellsGame.prototype.updateFreeRounds=function(e){e&&angular.merge(this.scope.game.freeRounds,e)},sna.service.tripleBellsProvider.TripleBellsGame.prototype.hasPendingFreeRoundsNotification=function(e){return!(!(e=this.scope.game.freeRounds)||e.rejected||!e.end||!e.active)},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getBetSettingsTextures=function(e,t){e=e||"bttn_CHOOSE_BET_<currencyPlaceholder>_<statePlaceholder>.png";var i="COIN",n=["regular","hover","push","inactive"];switch(this.scope.game.currency.name){case"EUR":i="EURO";break;case"USD":i="DOLLAR";break;case"GBP":i="POUND"}e=e.replace("<currencyPlaceholder>",i);for(var s=[],r=0;r<4;r++)s.push(e.replace("<statePlaceholder>",n[r]));return t&&t.length?s.toString():s},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getBetSettingsTexturesGameRules=function(){return this.getBetSettingsTextures()[0]},sna.service.tripleBellsProvider.TripleBellsGame.prototype.acceptFreeRounds=function(){this.scope.game.previousBet=this.scope.game.bet,this.scope.game.previousGameTypeIndex=this.scope.game.activeGameTypeIndex,this.scope.game.previousCoinValue=this.scope.game.coinValue,this.scope.game.freeRounds.accepted=!0,this.scope.game.freeRounds.active=!0,this.scope.game.bet=this.scope.game.freeRounds.bet,this.scope.game.coinValue=this.scope.game.freeRounds.coinValue},sna.service.tripleBellsProvider.TripleBellsGame.prototype.endFreeRounds=function(){this.scope.game.freeRounds.end=!0,this.scope.game.freeRounds.accepted=!1;var e=void 0!==this.scope.game.previousGameTypeIndex?this.scope.game.previousGameTypeIndex:this.scope.game.activeGameTypeIndex;this.setActiveGameType(e),this.scope.game.bet=this.scope.game.previousBet||this.scope.game.defaultBet,this.scope.game.coinValue=this.scope.game.previousCoinValue||this.scope.game.defaultCoinValue},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getBigWinThresholds=function(){return this.scope.config.parameters.bigWinValues},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getFreeSpinsPlayed=function(e,t,i){return i&&i.retrigger?i.retriggerCount+e-t:e-t},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getSuperStakeMultiplier=function(){return this.getParameterValue("superStakeMultiplier")||2},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getSuperStakeBmodeValue=function(){return this.getParameterValue("superStakeBmodeValue")||22},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getDefaultBmodeValue=function(){return this.getParameterValue("defaultBmodeValue")||1},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getBuyBonusPrice=function(e){var t=sna.service.tripleBellsProvider.playModes.REPLAY!=this.scope.game.playMode?this.getParameterValue("isBuyBonusPriceSuperStakeImmune")?this.scope.game.showValuesInCash?this.getBaseTotalBetInCash():this.getBaseTotalBetInCoins():this.scope.game.showValuesInCash?this.getTotalBetInCash():this.getTotalBetInCoins():this.scope.game.showValuesInCash?this.getTotalBetInCash():this.getBaseTotalBetInCoins();return t*this.getBuyBonusPriceMultiplier(e)},sna.service.tripleBellsProvider.TripleBellsGame.prototype.canAffordBuyBonus=function(e){var t=this.getParameterValue("buyFSButtonsNeverDisabled"),i=this.getBalanceInCash();return!!t||(i=this.getBuyFeatureLimit()&&i>this.getBuyFeatureLimit()?this.getBuyFeatureLimit():i)>=this.getBaseTotalBetInCash()*this.getBuyBonusPriceMultiplier(e)},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getBuyBonusPriceMultiplier=function(e){return e?+this.getParameterValue("buyFreeSpinsButtons").buy[e].value:this.getParameterValue("buyBonusPriceMultiplier")||100},sna.service.tripleBellsProvider.TripleBellsGame.prototype.checkLanguage=function(){return"en_US"==this.scope.game.language||"en"==this.scope.game.language},sna.service.tripleBellsProvider.TripleBellsGame.prototype.processWins=function(e){this.scope.game.winnings=angular.copy(e.wins||[])},sna.service.tripleBellsProvider.TripleBellsGame.prototype.getBuyFeatureLimit=function(){if(this.scope.game.buyFeatureLimitInPlayerCurrency)return+this.scope.game.buyFeatureLimitInPlayerCurrency},sna.service.tripleBellsProvider.TripleBellsGameProvider=function(){sna.service.slot.SlotProvider.call(this)},sna.service.tripleBellsProvider.TripleBellsGameProvider.prototype=new sna.service.slot.SlotProvider,sna.service.tripleBellsProvider.TripleBellsGameProvider.prototype._create=function(){return new sna.service.tripleBellsProvider.TripleBellsGame},sna.module.tripleBellsProvider.provider(sna.service.tripleBellsProvider.TRIPLE_BELLS_GAME,sna.service.tripleBellsProvider.TripleBellsGameProvider),sna.service.tripleBellsProvider.HSLB="nl_NL",sna.service.tripleBellsProvider.TRIPLE_BELLS_COMMUNICATION="TripleBellsCommunicationService",sna.service.tripleBellsProvider.CODE_OK="OK",sna.service.tripleBellsProvider.CODE_INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",sna.service.tripleBellsProvider.CODE_FUNDS_STRUCTURE_CHANGED="FUNDS_STRUCTURE_CHANGED",sna.service.tripleBellsProvider.TripleBellsCommunicationService=function(e){sna.service.slot.SlotCommunication.call(this,e),this.name=sna.service.tripleBellsProvider.TRIPLE_BELLS_COMMUNICATION,this.gameSessionReplay=null,this.gameRoundReplayCache={};e=this.getUrlParameters();this.walletType=e.walletType,this.requestId=0,this.REQUEST_ATTEMPTS=0,"undefined"!=typeof leanderGMApi&&(this.REQUEST_ATTEMPTS=5),sna.debug.enableCheats&&"1"===e.debugPanel&&(sna.debug.debugPanelEnabled=!0),this.taskQueue=[],this.tournamentService=null},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype=new sna.service.slot.SlotCommunication({}),sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.REQUEST_ATTEMPTS_TIMEOUT=2500,sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.HEARTBEAT_INTERVAL=60,sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.buttons={START:"btn_start"},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.events={WIN:"evt_win",CONF_ENTER:"evt_conf_enter",SPIN_ENTER:"evt_spin_enter",NOTIFY:"evt_notify",ROTATE:"evt_rotate",BTNPUSH_CONF:"evt_btnpush_conf",BTNPUSH_CHEAT:"evt_btnpush_cheat",BTNPUSH:"evt_btnpush",GMBL_ENTER:"evt_gmbl_enter",WIN_FEAT:"evt_win_feat",WHEEL:"evt_wheel",SPIN_EXTEN:"evt_spin_exten",CONF_EXTEN:"evt_conf_exten",CLICK_ME_ENTER:"evt_clickme1_enter",BET_PLACED:"evt_bet_placed",SEL_GAME_ENTER:"evt_selgame_enter"},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.symbols={SCATTER:""},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.request=function(t){function i(e){this.failureRequestFlag=!1,this.reattemptCount=0,o.resolve(e),this.iface&&t&&t.data&&this.iface.onRequestSuccess(t.data.id)}function n(e){this.reattemptCount<this.REQUEST_ATTEMPTS?(this.reattemptCount++,this.retryTimeoutId=setTimeout(s.bind(this,t),this.REQUEST_ATTEMPTS_TIMEOUT||0)):(clearTimeout(this.retryTimeoutId),this.reattemptCount=0,o.reject(e),this.iface&&t&&t.data&&this.iface.onRequestReject(t.data.id)),this.failureRequestFlag||this.requestId--,this.failureRequestFlag=!0}function s(e){return this.iface&&e&&e.data&&this.iface.onRequestSent(e.data.id),(GcwGameClient&&!this.replayMode?GcwGameClient.triggerEvent(gcw.api.GameEventType.NGS_REQUEST,e.data,!0):this.http({method:e.method||sna.service.HTTP_POST,url:e.url||this.gameSessionUrl,headers:e.headers||{"Content-Type":"application/json"},data:e.data||{}})).then(i.bind(this),n.bind(this))}function r(){var t=this.taskQueue,i=t[0];i.cb.call(this,i.params).then(function(e){t.shift(),i.d.resolve(e),0<t.length&&r.call(this)}.bind(this),function(e){t.shift(),i.d.reject(e),0<t.length&&r.call(this)}.bind(this))}this.reattemptCount=0;var o=this.q.defer();return t&&t.data&&void 0!==t.data.id?(t.data.id=Number(t.data.id),this.taskQueue.push({cb:s,params:t,d:o}),1==this.taskQueue.length&&r.call(this)):s.call(this,t),o.promise.then(this.successResponseCallback.bind(this),this.failureResponseCallback.bind(this))},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.successResponseCallback=function(e){var t=e.data,e=this.detectServerError(e.data);return e&&(sna.error.handleError(e),sna.error.fatalErrorOccured=!1),t},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.failureResponseCallback=function(e){var t=GcwGameClient.initialData.initConf.brand;if(!t.includes("betfair")&&!t.includes("paddypower")){e={message:e.status+" "+e.statusText,exception:e,type:sna.error.COMMUNICATION_ERROR,code:void 0};return sna.error.handleError(e),!1}GcwGameClient.triggerEvent(gcw.api.GameEventType.ERROR,{errorMessage:"NO_INTERNET",errorCode:"NO_INTERNET"})},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.jackpotRequest=function(e){return this.http({method:e.method||sna.service.HTTP_POST,url:e.url||this.gameSessionUrl,headers:e.headers||{"Content-Type":"application/json"},data:e.data||{}}).then(this.successResponseCallback.bind(this),function(){return{}})},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.setCommunicationParams=function(){var e=this.getUrlParameters(),t=this.scope.config.communication;this.gameId=t.gameId,this.playerId=t.playerId||e.playerId,this.authUrl=t.authUrl,GcwGameClient?e.serverUrl=GcwGameClient.initialData.gameSessionUrl:(document.getElementsByTagName("gcw-game").length&&(e.serverUrl=document.getElementsByTagName("gcw-game")[0].getAttribute("gcw-server-url")),document.getElementById("gcw-game")&&(e.serverUrl=document.getElementById("gcw-game").getAttribute("gcw-server-url")),document.getElementsByTagName("ngc-game").length&&(e.serverUrl=document.getElementsByTagName("ngc-game")[0].getAttribute("ngc-server-url"))),this.remoteAuth=!!e.serverUrl,this.remoteAuth?this.gameSessionUrl=e.serverUrl:this.gameSessionUrl=t.gameSessionUrl,GcwGameClient&&GcwGameClient.initialData&&GcwGameClient.initialData.replayConf&&GcwGameClient.initialData.replayConf.gameRoundRef?(this.replayMode=!0,this.gameRoundReference=GcwGameClient.initialData.replayConf.gameRoundRef,this.gameSessionUrl=GcwGameClient.initialData.gameSessionUrl):e.replayUrl&&e.roundRef?(this.replayMode=!0,e.roundRef=e.roundRef.replace(/%20/g," "),this.gameRoundReference=e.roundRef,this.gameSessionUrl=e.replayUrl):this.replayMode=!1},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getUrlParameters=function(){var t={},e=window.location.href,i=null,n=e.indexOf("?"),s=e.indexOf("#");return-1===n||-1===s?(0<n&&(i=n),0<s&&(i=s)):index=s<n?s:n,e=(e=e.substring(i+1)).split("&"),angular.forEach(e,function(e){e=e.split("=");t[e[0]]=e[1]}),t},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getGameMode=function(e){return e.game.currentWallet&&e.game.currentWallet.rm?sna.service.tripleBellsProvider.playModes.REAL:e.game.currentWallet&&e.game.currentWallet.fm?sna.service.tripleBellsProvider.playModes.FUN:this.commLog?sna.service.tripleBellsProvider.playModes.REPLAY:void 0},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.preSetup=function(e){return this.setCommunicationParams(),this.configUpdate={slot:{}},this.replayMode?this.processReplays(e):this.processRegularGame(e)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.setup=function(e){return this.q.when(!0)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processReplays=function(e){var t=this.q.when(!0);return t=(t=(t=(t=(t=(t=(t=(t=(t=t.then(this.initReplays.bind(this))).then(this.processInitReplays.bind(this))).then(this.getGameSessionReplay.bind(this,this.gameRoundReference))).then(this.setGameSessionReplay.bind(this))).then(this.getGameRoundReplay.bind(this,this.gameRoundReference))).then(this.setGameRoundReplay.bind(this))).then(this.loadTranslations.bind(this))).then(this.processTranslations.bind(this))).then(this.notifyTranslationsLoaded.bind(this,e))},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.initReplays=function(){this.requestId++;var e={date:(new Date).toISOString(),configuration:{init:!0},operation:{init:!1,initReplay:!0}};return this.request({data:e})},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processInitReplays=function(e){return this.configUpdate=this.configUpdate||{},this.configUpdate.slot=this.configUpdate.slot||{},this.configUpdate.slot.language=this.getLanguage(e),this.configUpdate.slot.rtp=this.getRTP(e),this.setConfiguration(e),e},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getGameSessionReplay=function(e){return this.fetchGameSessionReplay(e).then(this.processGameSessionReplay.bind(this))},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.fetchGameSessionReplay=function(e){e={date:(new Date).toISOString(),replay:{gameSessionReplay:!0,gameRoundReplay:{gameRoundReference:e}}};return this.request({data:e})},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processGameSessionReplay=function(e){return e.replay.gameSession},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.setGameSessionReplay=function(e){this.gameSessionReplay=e,this.configUpdate.slot.playMode=sna.service.tripleBellsProvider.playModes.REPLAY},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getGameRoundReplay=function(e,t){this.gameRoundReference=e;var i={},e=this.q.when(!0);return e=(e=(e=e.then(this.fetchAndProcessPrevGameRoundReplay.bind(this,i))).then(this.fetchAndProcessNextGameRoundReplay.bind(this,i))).then(this.fetchAndProcessCurrentGameRoundReplay.bind(this,i,t))},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.handleGameRoundReplay=function(e,t,i){return this.processGameRoundReplay(i,e,t)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.isReplayCached=function(e){return!!this.gameRoundReplayCache[e]},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.setPreviousRoundReplay=function(e){e=this.getPreviousReplayRoundReference(e);if(e)return this.fetchGameRoundReplay(e.reference)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.fetchGameRoundReplay=function(t){if(void 0!==this.gameRoundReplayCache[t])return this.q.when(this.gameRoundReplayCache[t]);var e={date:(new Date).toISOString(),replay:{gameSessionReplay:!1,gameRoundReplay:{gameRoundReference:t}}};return this.request({data:e}).then(function(e){return this.gameRoundReplayCache[t]=e}.bind(this))},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getPreviousReplayRoundReference=function(t){var e=this.gameSessionReplay.gameRounds.findIndex(function(e){return e.reference==t});return this.gameSessionReplay.gameRounds[e-1]?this.gameSessionReplay.gameRounds[e-1].reference:null},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processPreviousGameRound=function(e,t){t&&t.replay?this.prevCommLog=t.replay.gameRound.commLog:this.prevCommLog=null},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getNextReplayRoundReference=function(t){var e=this.gameSessionReplay.gameRounds.findIndex(function(e){return e.reference==t});return this.gameSessionReplay.gameRounds[e+1]?this.gameSessionReplay.gameRounds[e+1].reference:null},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processNextGameRound=function(e,t){t&&t.replay?this.nextCommLog=t.replay.gameRound.commLog:this.nextCommLog=null},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.checkReplayBuyFreeSpins=function(e){var t=e.request,e=e.response.game.events.find(function(e){return"evt_win"==e.type});return t.game.input.event.button&&0==t.game.input.event.button.localeCompare("btn_num0")&&e&&0<e.spins&&"-"==e.sym},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.fetchAndProcessPrevGameRoundReplay=function(e){var t=this.getPreviousReplayRoundReference(this.gameRoundReference);return this.fetchGameRoundReplay(t).then(this.processPreviousGameRound.bind(this,e))},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.fetchAndProcessNextGameRoundReplay=function(e){var t=this.getNextReplayRoundReference(this.gameRoundReference);return this.fetchGameRoundReplay(t).then(this.processNextGameRound.bind(this,e))},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.fetchAndProcessCurrentGameRoundReplay=function(e,t){return this.fetchGameRoundReplay(this.gameRoundReference).then(this.handleGameRoundReplay.bind(this,e,t)).then(this.superWheelRound.bind(this))},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.superWheelRound=function(t){if(this.commLog[this.commLog.length-1].response.superWheel&&null!=this.commLog[this.commLog.length-1].response.superWheel.historyLink){var e=this.commLog[this.commLog.length-1].response.superWheel.historyLink;return this.request({method:sna.service.HTTP_GET,url:e,data:{}}).then(function(e){return t.superWheelWin=e.history[0].winInPlayerCurrency,t}.bind(this))}return t},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processGameRoundReplay=function(e,t,i){return e&&e.replay?(this.setPokerStars(e),this.setConfiguration(e),this.processGameRoundReplayResponse(e,t,i)):this.q.when(!0)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processGameRoundReplayResponse=function(e,t,i){this.commLog=e.replay.gameRound.commLog,this.commLogIndex=0,t.bet=null,t.balance=null,t.activeGameIndex=null,t.gameSessionId=null,t.gameRoundId=null,t.playerId=null,t.gameRoundDate=null,t.gameRoundTime=null,t.nextGameRound=null,t.prevGameRound=null,t.freeRounds=null,t.freeSpins=null,this.prevCommLog&&(1<this.prevCommLog.length&&(s=0,(n=this.prevCommLog[this.prevCommLog.length-1].response.game.currentWallet).bonuses&&(s=n.bonuses.reduce(function(e,t){return e+t.amount},0)),this.commLog[this.commLogIndex].request.game.input.currentWallet=n,this.commLog[this.commLogIndex].request.game.input.currentWallet.rm+=s),this.checkReplayBuyFreeSpins(this.prevCommLog[this.commLogIndex])&&(this.prevCommLog[this.commLogIndex].request.game.input.currentWallet=this.commLog[this.commLogIndex].request.game.input.currentWallet,this.prevCommLog[this.commLogIndex].response.game.currentWallet=this.commLog[this.commLogIndex].request.game.input.currentWallet,this.prevCommLog[this.commLogIndex].response.game.walletAfterLastBet=this.commLog[this.commLogIndex].request.game.input.currentWallet,this.processTransformReplayResponse(),t.freeSpins=!0,this.prevCommLog=null)),t.response=e.replay.gameRound.commLog[0].response,t.request=e.replay.gameRound.commLog[0].request,t.isSpinReplay=this.isSpinReplayRound(this.commLog[0].response);var n=this.commLog[this.commLogIndex].dateProcessed;t.gameRoundDate=sna.service.util.formatDate(new Date(n)),t.gameRoundTime=sna.service.util.formatTime(new Date(n)),t.gameSessionId=e.replay.gameRound.gameSessionId,t.gameRoundId=e.replay.gameRound.gameRoundId,t.playerId=e.replay.gameRound.playerId;var s={game:{}};s.game.currentWallet=this.commLog[this.commLogIndex].request.game.input.currentWallet,s.game.walletAfterLastBet=this.commLog[this.commLogIndex].response.game.walletAfterLastBet,s.game.events=e.replay.gameRound.initEvents,this.removeFreespinsEvents&&this.removeFreespinsEvents(s),s.game.currentWallet.freeRounds&&this.commLog[this.commLogIndex].response.game.walletAfterLastBet.freeRounds&&(s.game.currentWallet.freeRounds.totalWin=this.commLog[this.commLogIndex].response.game.walletAfterLastBet.freeRounds.totalWin),s.game.currentWallet.freeRounds&&this.commLog[this.commLogIndex].response.game.currentWallet.freeRounds&&(s.game.currentWallet.freeRounds.totalWin=this.commLog[this.commLogIndex].response.game.currentWallet.freeRounds.totalWin);n=this.commLog[this.commLogIndex].request.game.input.currentWallet.rm||this.commLog[this.commLogIndex].request.game.input.currentWallet.fm;t.balance=n,t.bets=this.getResponseBets(s),t.reels=this.getReplayStartReels(s),t.currency=this.getResponseCurrency(s),this.commLog[this.commLogIndex].request.game.input.currentWallet.fm&&!this.commLog[this.commLogIndex].request.game.input.currentWallet.rm&&(t.currency.name="",t.currency.code="",t.currency.sign=null),t.gameTypes=this.getResponseGameTypes(s),t.coinValues=this.getResponseCoinValues(s),t.freeRounds=this.getResponseFreeRounds(s,!0),this.checkAndSetEmptyResponseReplayRound(e,t),i||this.scope.game&&this.scope.game.replay&&this.scope.game.replay.isEmptyResponse&&this.scope.game.replay.balance&&this.scope.game.replay.emptyResponseType&&this.scope.game.replay.emptyResponseType.collect&&(t.balance=this.scope.game.replay.balance);for(var r,o,a=0;a<t.gameTypes.length;a++)void 0!==this.commLog[this.commLogIndex].request.game.input.event.bmode?this.commLog[this.commLogIndex].request.game.input.event.bmode==t.gameTypes[a].bmode&&(t.activeGameIndex=a):void 0!==this.commLog[this.commLogIndex].request.game.input.event.btnevt&&this.commLog[this.commLogIndex].request.game.input.event.btnevt.bmode==t.gameTypes[a].bmode&&(t.activeGameIndex=a);null===t.activeGameIndex&&angular.forEach(s.game.events,function(e){e.type==this.events.CONF_ENTER&&(t.activeGameIndex=e.bmode.allowed.indexOf(e.bmode.value))},this),void 0!==this.commLog[this.commLogIndex].request.game.input.event.betpl?(t.bet=this.commLog[this.commLogIndex].request.game.input.event.betpl,t.coinValue=this.commLog[this.commLogIndex].request.game.input.event.denom/1e4,void 0!==t.bet&&void 0!==t.coinValue&&(this.oldValuesRoundReplay={bet:t.bet,coinValue:t.coinValue})):void 0!==this.commLog[this.commLogIndex].request.game.input.event.btnevt?(t.bet=this.commLog[this.commLogIndex].request.game.input.event.btnevt.betpl,t.coinValue=this.commLog[this.commLogIndex].request.game.input.event.btnevt.denom/1e4,void 0!==t.bet&&void 0!==t.coinValue&&(this.oldValuesRoundReplay={bet:t.bet,coinValue:t.coinValue})):(t.gameTypes[t.activeGameIndex].lines,this.oldValuesRoundReplay||(r=(r=this.commLog[this.commLogIndex].response.game.events[1])||this.commLog[this.commLogIndex].response.game.events[0],this.oldValuesRoundReplay={bet:r.betpl?r.betpl.value:r.denom/100,coinValue:(r.denom&&r.denom.value?r.denom.value:r.denom)/1e4}),t.bet=this.oldValuesRoundReplay.bet,t.coinValue=this.oldValuesRoundReplay.coinValue),"prev"!=this.iface.replayDirection||t.isEmptyResponse||this.iface.scope.config.parameters.overridePreviousRoundReplay&&(o=this.iface.scope.game.ssActive?this.iface.game.getSuperStakeMultiplier():1,r=t.gameTypes[this.iface.game.getActiveGameTypeIndex()].lines,t.balance=(this.commLog[0].response.game.currentWallet.rm||this.commLog[0].response.game.currentWallet.fm)+t.bet*t.coinValue*r*o),t.bet||!this.commLog[this.commLogIndex]||!this.commLog[this.commLogIndex].response||(o=!(o=this.commLog[this.commLogIndex].response.game.events.filter(function(e){return"evt_conf_enter"==e.type}))||!o.length?this.prevCommLog?this.prevCommLog[this.commLogIndex].response.game.events.filter(function(e){return"evt_conf_enter"==e.type}):e.replay.gameRound.initEvents.filter(function(e){return"evt_conf_enter"==e.type}):o)&&o[o.length-1]&&(o=o[o.length-1],t.bet=o.betpl.value,t.coinValue=o.denom.value/1e4,this.oldValuesRoundReplay={bet:t.bet,coinValue:t.coinValue});for(a=0;a<this.gameSessionReplay.gameRounds.length;a++){var l=this.gameSessionReplay.gameRounds[a],h=this.gameSessionReplay.gameRounds[a+1],c=this.gameSessionReplay.gameRounds[a-1];l.reference==this.gameRoundReference&&(h&&(t.nextGameRound=h.reference),c&&(t.prevGameRound=c.reference))}return t.gambleFeatureEnabled=this.isGambleEnabledInReplay(e),(this.activeReplay=t).ssActive=this.isSuperStakeActive(this.commLog[this.commLog.length-1].response),t},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.checkAndSetEmptyResponseReplayRound=function(e,t){var i,n,s;this.commLog[this.commLogIndex]&&this.commLog[this.commLogIndex].response&&this.commLog[this.commLogIndex].response.game&&this.commLog[this.commLogIndex].response.game.events&&(i=this.getEvent(this.commLog[0].response,this.events.CONF_ENTER),n=this.getEvent(this.commLog[0].response,this.events.CONF_EXTEN),s=this.getEvent(this.commLog[0].response,this.events.NOTIFY),t.isEmptyResponse=i&&1==this.commLog[0].response.game.events.length,t.isEmptyResponse=t.isEmptyResponse||2==this.commLog[0].response.game.events.length&&(n||s),t.isEmptyResponse=t.isEmptyResponse||3==this.commLog[0].response.game.events.length&&n&&s),t.isEmptyResponse&&(s=this.commLog[this.commLogIndex].request.game.input,t.balance=s.currentWallet.rm||s.currentWallet.fm,t.emptyResponseType={collect:!1,betChange:!1,stakeChange:!1,buyFeatureOpen:!1,buyFeatureClose:!1,featureBought:!1},this.setEmptyResponseType(t.emptyResponseType))},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.isSpinReplayRound=function(e){return e.game.events.find(function(e){return e.type==this.events.SPIN_ENTER},this)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getReplayStartReels=function(e){return this.getResponseReels(e,!0)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processTransformReplayResponse=function(){var e=this.commLog[this.commLogIndex].response,t=this.getEvents(e,this.events.SPIN_ENTER);1<t.length?(t=t[t.length-1],e=e.game.events.indexOf(t),(t=angular.copy(this.commLog[this.commLogIndex])).response.game.events=this.commLog[this.commLogIndex].response.game.events.splice(e),this.commLog.splice(1,0,t)):this.commLog.unshift(this.prevCommLog[this.prevCommLog.length-1])},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.setEmptyResponseType=function(e){var t,i=this.iface.game.getParameterValue("buyFreeSpinsButtons"),n=this.commLog[0],s=n.request.game.input.event.button;i&&("btn_none"==s?(this.nextCommLog&&-1<(this.nextCommLog[0].request.game.input.event.button||this.nextCommLog[0].request.game.input.event.btnevt.button).indexOf("btn_num")&&(e.buyFeatureOpen=!0),this.prevCommLog&&((t=this.prevCommLog[0].request).game.input.event.denom!=n.request.game.input.event.denom?e.betChange=!0:t.game.input.event.bmode!=n.request.game.input.event.bmode&&(e.stakeChange=!0))):"btn_collect"==s?e.collect=!0:s==i.cancel?e.buyFeatureClose=!0:"object"==typeof i.buy?(n=Object.values(i.buy).find(function(e){return e.id==s},this),e.buyFeatureClose=!0,n&&(e.featureBought=!0)):s==i.buy?(e.featureBought=!0,e.buyFeatureClose=!0):e.collect=!0)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.isGambleEnabledInReplay=function(e){for(var t=(e.replay.gameRound.commLog.map(function(e){return e.response})||[]).map(function(e){return e.game?e.game.events:[]}),i=0;i<t.length;i++)for(var n=t[i],s=0;s<n.length;s++)if(n[s].type===this.events.GMBL_ENTER)return!0;return!1},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.setGameRoundReplay=function(e){this.configUpdate.slot.replay=e,this.configUpdate.slot.currency=e.currency,this.configUpdate.slot.balance=e.balance,this.configUpdate.slot.initial=e.reels,this.configUpdate.slot.gameTypes=e.gameTypes,this.configUpdate.slot.activeGameIndex=e.activeGameIndex,this.configUpdate.slot.showPayoutsInCoins=this.getShowPayoutsInCoins(),this.configUpdate.slot.defaultBet=e.bet,this.configUpdate.slot.coinValues=e.coinValues,this.configUpdate.slot.coinValue=e.coinValue,this.configUpdate.slot.bets=e.bets,this.configUpdate.slot.freeRounds=e.freeRounds},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getCommLogResponseParams=function(){return this.commLog[this.commLogIndex]?this.commLog[this.commLogIndex].response:null},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getCommLogRequestParams=function(){return this.commLog[this.commLogIndex]?this.commLog[this.commLogIndex].request.game.input:null},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.resetReplay=function(){this.commLogIndex=0,this.totalCascadeWin=0,this.totalCascadeCoinsWin=0,this.isRespinResponse=!1,this.respinResponse=null},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processRegularGame=function(e){var t=this.q.when(!0);return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.then(this.auth.bind(this))).then(this.processAuth.bind(this))).then(this.notifyAuthComplete.bind(this,e))).then(this.initHeartbeat.bind(this))).then(this.configure.bind(this))).then(this.setPokerStars.bind(this))).then(this.processWrapperConfiguration.bind(this))).then(this.updateConfiguration.bind(this))).then(this.processConfiguration.bind(this))).then(this.notifyConfigurationComplete.bind(this,e))).then(this.loadTranslations.bind(this))).then(this.processTranslations.bind(this))).then(this.overrideSimpleMessage.bind(this))).then(this.notifyTranslationsLoaded.bind(this,e))},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.overrideSimpleMessage=function(e){this.messageToOverride&&"MAX_WIN_REACHED"==this.messageToOverride.code&&this.configUpdate&&this.configUpdate.simpleMessage&&this.messageToOverride.message===this.configUpdate.simpleMessage[0]&&(e.data.MAXIMUM_ALLOWED_WIN?this.configUpdate.simpleMessage[0]=e.data.MAXIMUM_ALLOWED_WIN.replace("{0}",Number(this.configUpdate.slot.gameSettings.game.maxWin).toFixed(2)).replace("(1)",this.configUpdate.slot.currency.code):this.configUpdate.simpleMessage[0]=this.messageToOverride.message)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.auth=function(){var e="";if(this.playerId&&(e="&playerId="+this.playerId),walletType="",this.walletType&&(walletType="&walletType="+this.walletType),!this.remoteAuth)return this.request({method:sna.service.HTTP_GET,url:this.authUrl+"?gameId="+this.gameId+e+walletType,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processAuth=function(e){this.remoteAuth||(this.gameSessionId=e.data.gameSessionId,this.gameSessionUrl=e.data.gameSessionUrl,this.playerId=e.data.playerId)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.notifyAuthComplete=function(e){e(this,{name:"tripleBellsProviderAuth"})},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.initForNoReason=function(){var e={id:null,date:(new Date).toISOString(),operation:{init:!0}};return this.request({data:e})},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.configure=function(){this.requestId++;var e=this.scope.config.parameters,t={id:""+this.requestId,date:(new Date).toISOString(),operation:{init:!0,exit:!1},game:{buttonCode:null,confirm:null,input:null,hearthBeatForceGetBalance:null,init:!0,forfeitFreeRounds:null,forfeitBonus:null,payInAmount:null},configuration:{init:!0},jackpot:{init:!0,historyEnabled:!0},social:{init:!0}};return e.gambleFeatureEnabled&&(t.gamble={init:!0}),this.request({data:t})},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processWrapperConfiguration=function(e){var t;return GcwGameClient&&(t=e.game?e.game.walletAfterLastBet:{},GcwGameClient.triggerEvent(gcw.api.GameEventType.WALLET_UPDATE,{balance:t.rm||0,free_balance:t.fm||0})),"undefined"!=typeof leanderGMApi&&e.configuration&&e.configuration.game&&e.configuration.game.sessionExpiry&&leanderGMApi.enableSessionTimeout(e.configuration.game.sessionExpiry),e},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.notifyConfigurationComplete=function(e){e(this,{name:"tripleBellswProviderConfig"})},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getRTP=function(e){var t=!1;return t=e&&e.operation&&e.operation.game&&e.operation.game.rtp?e.operation.game.rtp:t},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.hasQuattroRestore=function(e){var i=!1;return e.partials.forEach(function(e,t){0<t&&(i=i||0<e.game.events.filter(function(e){return"evt_win"==e.type}.bind(this)).length)}.bind(this)),i=this.configUpdate&&this.configUpdate.slot&&0<this.configUpdate.slot.activeGameIndex?i||this.hasRestore(e):i},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processQuattroDisabled=function(e){e&&e.configuration&&e.configuration.game&&(e.partials=this.processPartialResponses(e),e.configuration.game.forceSingleGame&&!this.hasQuattroRestore(e)&&(this.configUpdate.slot.configuration.forceSingleGame=e.configuration.game.forceSingleGame))},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.isFreeSpinsActive=function(e,i){var t=!1;return t=e&&e.game&&e.game.events?!!e.game.events.filter(function(e){var t=e.type===this.events.SPIN_ENTER&&0<e.spinstep;return t=!i?t||e.type===this.events.WIN&&0<e.spins:t},this).length:t},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.setSpacebarSpin=function(e){e&&e.configuration&&e.configuration.game&&(this.configUpdate.slot.disableSpaceBar="true"==e.configuration.game.disableSpaceBar)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.setConfiguration=function(n){var s=["inactivityMessage","hideClock","hideBalance","disableSlamStop","hideFastSpin","hideAutoSpin","disableSpaceBar","hideHomeButton","showWinProbabilityDisplay","maxWinMultiplier","maxWinProbability","showHistoryButton","gameHistoryLib","hideSuperStake","featureBuyDisabled","showPortVersion","isDisplaySessionTime","isDisplayNet","HSLB","nlLicense","buyBonusManualSpin","_buyBonusActivated","buyFeatureLimitInPlayerCurrency","removeGameRulesDl","touchAnywhereButton"],r=s.map(function(e){return e.toLowerCase()},this);n&&n.configuration&&n.configuration.game&&Object.keys(n.configuration.game).forEach(function(e){var t,i=n.configuration.game[e];"autoplayOptions"===e?("]"!==(t="["!==(t=n.configuration.game.autoplayOptions)[0]?"["+t:t)[t.length-1]&&(t+="]"),t=JSON.parse(t),this.scope.config.slot.autoplayOptions=t,this.scope.config.slot.autoplayOptionsUkgc=t):(this.configUpdate.slot.configuration=this.configUpdate.slot.configuration||{},-1!==(e=r.indexOf(e.toLowerCase()))&&(this.configUpdate.slot.configuration[s[e]]=i))},this),this.configUpdate.slot.configuration.nlLicense=!0},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.isSuperStakeActive=function(e){e=this.getEvent(e,this.events.CONF_ENTER);if(e)return this.scope.config.parameters.superStakeBmodeValue?e.bmode.value==this.scope.config.parameters.superStakeBmodeValue:1<e.bmode.value},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.setPokerStars=function(e){this.configUpdate=this.configUpdate||{},this.configUpdate.slot=this.configUpdate.slot||{},this.configUpdate.slot.isPokerStars=!1,this.isPokerStars=!1;var t=this.getUrlParameters(),t=!0===t.ps||"true"===t.ps;return(e&&e.operation&&e.operation.casino&&-1!=e.operation.casino.brand.indexOf("pokerstars")||t&&sna.debug.enableCheats)&&(this.configUpdate.slot.isPokerStars=!0,this.isPokerStars=!0,this.REQUEST_ATTEMPTS=5),e},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.updateConfiguration=function(t){if((this.isLastEvent(t,this.events.CONF_ENTER)||this.isLastEvent(t,this.events.CONF_EXTEN))&&this.wasBuyFeatureOpen(t))return this.setCurrentWallet(t),this.closeBuyBonus(!1).then(function(e){return t.game.events=e.game.events,t}.bind(this));return t},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.wasBuyFeatureOpen=function(e){return!!e.game.events.filter(function(e){return"-"===e.sym&&(e.type===this.events.WIN||e.type===this.events.NOTIFY)},this).length},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processFreeSpinsEnvironment=function(e){this.iface.presentation.updateLayoutCallbacks.push(this.iface.presentation.checkFreeSpinsLayout.bind(this.iface.presentation))},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processConfiguration=function(e){this.processInitialWalletState(e),this.configUpdate=this.configUpdate||{slot:{}},this.configUpdate.response=e;var t=!(this.configUpdate.slot.configuration={});e&&e.game&&0!=e.game.mode&&(t=e.game.mode===sna.service.tripleBellsProvider.playModes.FUN),this.gameStepNo=1,e.game&&(e.game.gameStepNo||0==e.game.gameStepNo)&&(this.gameStepNo=e.game.gameStepNo),e.spinToWin&&(triggerGameWrapperModelUpdate({spinToWin:{feedsLink:e.spinToWin.feedsLink,historyLink:e.spinToWin.historyLink},general:{enableSpinToWinInterface:!0,sessionId:this.gameSessionUrl}}),this.configUpdate.spinToWinEnabled=!0),e.game&&(this.processBalance(e),this.processBetMode(e),this.processMinimumSpinDuration(e),this.processGambleActive(e),this.setCurrentWallet(e),this.processTournamentConfiguration(e),this.processSimpleMessage(e),this.scope.config.parameters.addFreeSpinsEnvironment&&this.processFreeSpinsEnvironment(e),this.configUpdate.slot.balance=t?e.game.walletAfterLastBet.fm:e.game.walletAfterLastBet.rm,this.configUpdate.slot.playMode=e.game.mode||this.configUpdate.slot.playMode,this.configUpdate.slot.gambleType=e.gamble,this.configUpdate.slot.bets=this.getResponseBets(e),this.configUpdate.slot.coinValues=this.getResponseCoinValues(e),this.configUpdate.slot.initial=this.getResponseReels(e,!0),this.configUpdate.slot.currency=this.getResponseCurrency(e),this.configUpdate.slot.gameTypes=this.getResponseGameTypes(e),this.configUpdate.slot.coinValue=this.getCoinValue(e),this.configUpdate.slot.jackpot=this.getJackpotData(e),this.configUpdate.slot.gameSettings=this.getResponseGameSettings(e),this.configUpdate.slot.language=this.getLanguage(e),this.configUpdate.slot.freeRounds=this.getResponseFreeRounds(e,!0),this.configUpdate.slot.rtp=this.getRTP(e,!0),this.configUpdate.slot.reels=this.getResponseSpinningSymbols(e),this.configUpdate.slot.staticSymbols=this.getResponseSpinningSymbols(e),this.configUpdate.slot.regulationId=this.getUrlParameters().regulationId?this.getUrlParameters().regulationId:void 0),e.superWheel&&e.superWheel.superWheelGame&&(this.configUpdate.superWheelGame=e.superWheel.superWheelGame),e&&e.outcome&&e.outcome.simpleMessage&&(this.configUpdate.simpleMessage=e.outcome.simpleMessage),this.processPartialResponses&&this.processQuattroDisabled(e),this.setConfiguration(e),this.setSpacebarSpin(e),sna.service.ENVIRONMENT_LANG=this.configUpdate.slot.language,e.isInitialResponse=!0,this.processInitialGameState(e),this.configUpdate.slot.freeRounds&&!this.configUpdate.slot.freeRounds.start&&e.outcome.freeRounds&&(this.configUpdate.slot.freeRounds.totalWin=e.outcome.freeRounds.totalWin,this.configUpdate.slot.freeRounds.totalCoinsWin=e.outcome.freeRounds.totalCoinsWin),e.operation.buttonsdisabled?this.configUpdate.buttonsDisabled="true"===e.operation.buttonsdisabled:this.configUpdate.buttonsDisabled=!1,e.configuration.game.bankSettings&&"false"==e.configuration.game.bankSettings?this.configUpdate.bankSettings=!1:this.configUpdate.bankSettings=!0,e.configuration.game.homeButtonDeactivate&&(this.configUpdate.homeButtonDeactivate=e.configuration.game.homeButtonDeactivate),e.configuration.game.fullScreenButtonDeactivate&&(this.configUpdate.fullScreenButtonDeactivate=e.configuration.game.fullScreenButtonDeactivate),e.configuration.game.hideTurboSpin&&(this.configUpdate.hideTurboSpin=e.configuration.game.hideTurboSpin),this.configUpdate&&this.configUpdate.slot&&this.configUpdate.slot.freeRounds&&this.configUpdate.slot.freeRounds.end&&e.game.numberOfNonAnimatedEvents<=1&&(this.configUpdate.slot.balance=e.game.walletAfterLastBet.rm||e.game.walletAfterLastBet.fm,this.configUpdate.slot.freeRounds.customData=this.configUpdate.slot.freeRounds.customData||{},this.configUpdate.slot.freeRounds.customData.newBalance=e.game.currentWallet.rm||e.game.currentWallet.fm),this.hasRestore(e)||e.game.mode&&(this.configUpdate.slot.balance=e.game.mode==sna.service.tripleBellsProvider.playModes.FUN?e.game.currentWallet.fm:e.game.currentWallet.rm),e.operation&&(this.configUpdate.ukgc=e.operation.ukgc,this.configUpdate.serverVersion=e.operation.cgsportversion),this.processInitialSpinToWin(e)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processInitialWalletState=function(e){var t;e&&e.game&&e.game.currentWallet&&e.game.walletAfterLastBet&&(t=angular.copy(e.game.walletAfterLastBet.freeRounds),e.game.walletAfterLastBet=angular.copy(e.game.currentWallet),e.game.walletAfterLastBet.freeRounds||(e.game.walletAfterLastBet.freeRounds=t))},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processInitialSpinToWin=function(e){var t=e.spinToWin;t&&t.studioLink&&(this.configUpdate.restoreData=this.configUpdate.restoreData||{},this.configUpdate.restoreData.previousOutcome=this.configUpdate.restoreData.previousOutcome||{},this.configUpdate.response=this.configUpdate.response||{},this.configUpdate.response.outcome=this.configUpdate.response.outcome||{},this.configUpdate.response.outcome.spinToWin=this.configUpdate.response.outcome.spinToWin||{},this.configUpdate.response.outcome.spinToWin.studioLink=t.studioLink,this.configUpdate.slot.balance+=e.outcome.win||0)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processTournamentConfiguration=function(e){this.tournamentService&&this.tournamentService.configure(e)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.initTournamentPresentation=function(e){this.tournamentService&&this.tournamentService.initPresentation(e)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processInitialGameState=function(e){return this.processResponseTransform(e),this.processFreeSpinsRestore(e),this.processWins(e),this.processGambleFeature(null,e),this.processFeatures(e),this.processRestore(e),e},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processSimpleMessage=function(n){return n&&n.game&&n.game.messagesAfterGameEvents&&n.game.messagesAfterGameEvents.length&&(n.outcome.simpleMessage=[],n.game.messagesAfterGameEvents.forEach(function(e){var t,i;e.message&&("MAX_WIN_REACHED"===e.code?(n.game.events.find(function(e){return e.type===this.events.ROTATE},this)||(n.outcome.reels=n.outcome.reels||{},n.outcome.reels.middle=angular.copy(this.scope.config.slot.initial.middle)),n.outcome.hasRespin=!1,n.outcome.simpleMessageCode=e.code,n.outcome.features&&n.outcome.features.freespins&&(this.scope.game&&!this.scope.game.feature?n.outcome.features={}:(n.outcome.features.freespins.start=!1,n.outcome.features.freespins.end=!0,n.outcome.features.freespins.restoreLeft=0,n.outcome.features.freespins.left=0,n.outcome.features.freespins.grandTotal=parseFloat(this.configUpdate.slot.gameSettings.game.maxWin),n.outcome.features.freespins.totalWin=parseFloat(this.configUpdate.slot.gameSettings.game.maxWin))),this.respinResponse=null,t=e.code,i=e.message,this.messageToOverride={code:t,message:i},sna.service.util.returnIf(this.iface.scope,"translations.MAXIMUM_ALLOWED_WIN")&&this.configUpdate.slot.gameSettings?n.outcome.simpleMessage.push(sna.service.util.returnIf(this.iface.scope,"translations.MAXIMUM_ALLOWED_WIN").replace("{0}",Number(this.configUpdate.slot.gameSettings.game.maxWin).toFixed(2)).replace("(1)",this.configUpdate.slot.currency.code)):n.outcome.simpleMessage.push(e.message)):n.outcome.simpleMessage.push(e.message),e.buttons&&e.buttons.length)},this)),n},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processResponseTransform=function(e){},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processGambleActive=function(e){this.scope.layout.has(sna.presentation.MINI_LAYOUT)?this.scope.config.parameters.gambleFeatureEnabled=!1:this.scope.config.parameters.gambleFeatureEnabled=e.gamble&&e.gamble.active||this.isLastEvent(e,this.events.GMBL_ENTER)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processFreeSpinsRestore=function(e){},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.transformRestoreResponse=function(e){for(var t=e.game.events,i=null,n=t.length-1;0<=n;n--)if("evt_spin_enter"===t[n].type){i=n;break}null!==i&&(e.game.originalEvents=angular.copy(t),e.game.events=t.slice(i))},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processMinimumSpinDuration=function(e){e&&e.configuration&&e.configuration.game&&(void 0!==e.configuration.game.spinDuration&&(this.configUpdate.slot=this.configUpdate.slot||{},this.configUpdate.slot.minimumSpinDuration=parseFloat(e.configuration.game.spinDuration)/1e3),void 0!==e.configuration.game.demo&&(sna.debug.enableCheats="true"===e.configuration.game.demo),void 0!==e.configuration.game.debugPanel&&(sna.debug.enableCheats="true"===e.configuration.game.debugPanel))},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processRestore=function(e){this.hasRestore(e)?(this.gameStepNo=e.game.gameStepNo,this.configUpdate.restoreData={},this.configUpdate.restoreData.previousOutcome=e.outcome,this.configUpdate.restoreData.previousOutcome.balance=this.configUpdate.slot.balance,this.configUpdate.restoreData.previousOutcome.placeBetBalance=this.configUpdate.slot.balance,this.configUpdate.restoreData.previousOutcome.restored=!0,this.configUpdate.restoreData.previousOutcome.reels=this.getPreviousOutcomeReels(e),e.gambleOutcome&&(this.configUpdate.restoreData.gambleOutcome=e.gambleOutcome,e.gambleOutcome.isRestore=0<e.gambleOutcome.gmblstep,e.gambleOutcome.prevWinmeter=e.gambleOutcome.gval,this.scope.config.parameters.divideGambleWinOnRestore&&e.gambleOutcome.isWin&&(e.gambleOutcome.prevWinmeter=e.gambleOutcome.gval/2),this.restoredGambleResponse=angular.copy(e),this.restoredGambleResponse.gambleOutcome.isRestore=!1,this.configUpdate.restoreData.gambleStarted=this.isGambleStarted(e),this.configUpdate.restoreData.gambleActive=this.isGambleActive(e),this.configUpdate.restoreData.gambleRestore=this.shouldRestoreGambleFeature(e))):(delete this.respinResponse,delete this.cascadeResponse)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getPreviousOutcomeReels=function(e){return this.configUpdate.slot.initial},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.hasRestore=function(e){var t=this.isGambleActive(e);if(e.gamble&&e.gamble.active||t){var i=this.shouldRestoreFreeSpinsWithGamble(e),n=this.shouldRestoreGambleFeature(e);return t||i||n}n=this.shouldRestoreFreeSpins(e),e=this.hasNonAnimatedEvents(e);return n||e},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.hasNonAnimatedEvents=function(e){return e.game.numberOfNonAnimatedEvents>(this.scope.config.parameters.nonAnimatedEventsThreshold||1)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.hasZeroNonAnimatedEvents=function(e){return 0===e.game.numberOfNonAnimatedEvents},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.isConfEnterLastEvent=function(e){return this.isLastEvent(e,this.events.CONF_ENTER)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.isConfExtenLastEvent=function(e){return this.isLastEvent(e,this.events.CONF_EXTEN)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.isLastEvent=function(e,t){e=e.game.events,e=e[e.length-1];return e&&e.type==t},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.shouldRestoreFreeSpins=function(e){var t=!1;return!(t=e&&e.outcome&&e.outcome.features&&e.outcome.features.freespins?!0:t)&&e&&e.outcome&&e.outcome.features&&delete e.outcome.features.freespins,t},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.shouldRestoreFreeSpinsWithGamble=function(e){var t,i=!1;return e.outcome.features&&e.outcome.features.freespins&&(t=e.outcome.features.freespins,i=(i=(i=i||!t.end)||t.end&&!this.isGambleStarted(e)&&this.isGambleActive(e))||t.end&&!this.isGambleStarted(e)&&this.isGambleLimitExceeded(e)),i||!e.outcome.features||this.nextFreeSpinsEvents&&this.nextFreeSpinsEvents.length||(delete e.outcome.features.freespins,this.configUpdate.freeSpinsGambleActive=!0),i},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.shouldRestoreGambleFeature=function(e){for(var t=null,i=e.game.events,n=0;n<i.length;n++)if(i[n].type==this.events.GMBL_ENTER){t=i[n];break}return!!t&&(0<t.gmblstep&&(t.consecutiveWinsLimitReached||t.gambleLimitReached)||!t.isWin)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.isGambleLimitExceeded=function(e){for(var t=null,i=e.game.events,n=0;n<i.length;n++)if(i[n].type==this.events.GMBL_ENTER){t=i[n];break}return t&&t.winmeter>t.maxgmbl},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.isGambleStarted=function(e){for(var t=null,i=e.game.events,n=0;n<i.length;n++)if(i[n].type==this.events.GMBL_ENTER){t=i[n];break}return t&&0<t.gmblstep},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.isGambleActive=function(e){return this.isLastEvent(e,this.events.GMBL_ENTER)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.isGambleLimitReached=function(e){var t=!1,e=e.game.events.filter(function(e){return e.type===this.events.GMBL_ENTER},this);return e.length&&(gambleEvent=e[e.length-1],t=gambleEvent.winmeter>gambleEvent.maxgmbl),t},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getLanguage=function(e){if(e&&e.operation&&e.operation.player){this.language=void 0!==e.operation.player.locale&&null!==e.operation.player.locale?e.operation.player.locale:this.language;e=this.getUrlParameters();return"localhost"==window.location.host&&e.langCode&&(this.language=e.langCode),this.language}},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getShowPayoutsInCoins=function(e){var t=this.getUrlParameters();return!(t&&(t.hasOwnProperty("simpleBet")||!!t.simpleBet))},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getResponseCoinValues=function(e){var t=null;return angular.forEach(e.game.events,function(e){e.type==this.events.CONF_ENTER&&(t=e.denom.allowed)},this),t=t&&t.map(function(e){return e/1e4+""})},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getResponseBets=function(e){var t=null;return angular.forEach(e.game.events,function(e){e.type==this.events.CONF_ENTER&&(t=e.betpl.allowed,this.configUpdate.slot.defaultBet=e.betpl.value)},this),t},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getResponseReels=function(e){var t=!1,n={symbolFeatures:{}};return n.symbolFeatures.middle=sna.service.util.fillReelsArray(null,this.scope.config.slot.reels[0].number,this.scope.config.slot.reels[0].size),n.top=sna.service.util.fillReelsArray(this.generateRandomSymbol.bind(this),this.scope.config.slot.reels[0].number,2),n.bottom=this.generateFakeWinBottomSymbols(),n.middle=this.scope.config.slot.initial.middle,e.status&&e.status.code===sna.service.tripleBellsProvider.CODE_INSUFFICIENT_FUNDS?n.middle=this.scope.config.slot.initial.middle:angular.forEach(e.game.events,function(e){e.type!==this.events.ROTATE||t&&!this.scope.config.parameters.useLastRotateEvent||(angular.forEach(e.reels,function(e,i){e=e.split("").reverse(),angular.forEach(e,function(e,t){n.middle[i][t]=this.symbolMappings[e]||"empty"},this)},this),t=!0)},this),n},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processInsufficientFundsGameRound=function(e){GcwGameClient||e.status&&e.status.code===sna.service.tripleBellsProvider.CODE_INSUFFICIENT_FUNDS&&(this.gameStepNo=e.id,this.roundCompleted())},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.generateRandomSymbol=function(){var e=angular.copy(this.symbolMappings);delete e.X;var t=Object.keys(e);return e[t[t.length*Math.random()<<0]]},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.generateFakeWinBottomSymbols=function(){if(.75<Math.random()){for(var e=this.lowPaySymbolMappings,t=Object.keys(e),i=e[t[t.length*Math.random()<<0]],n=[],s=0;s<this.scope.config.slot.reels[0].number;s++)n[s]=[],n[s][0]=s<3?i:this.generateRandomSymbol();return n}return sna.service.util.fillReelsArray(this.generateRandomSymbol.bind(this),this.scope.config.slot.reels[0].number,1)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.lowPaySymbolMappings={1:"sym01",2:"sym03",3:"sym05",4:"sym07",5:"sym09",6:"sym10",7:"sym11"},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.symbolMappings={1:"sym01",O:"sym02",2:"sym03",L:"sym04",3:"sym05",P:"sym06",4:"sym07",B:"sym08",5:"sym09",6:"sym10",7:"sym11",8:"sym12",J:"sym13",X:"symStar"},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getResponseCurrency=function(e){var t={name:"",code:""};this.configUpdate.slot.playMode==sna.service.tripleBellsProvider.playModes.REAL||this.configUpdate.slot.playMode==sna.service.tripleBellsProvider.playModes.REPLAY?(t.name=e.game.currentWallet.currencyCode.toUpperCase(),t.code=e.game.currentWallet.currencyCode.toUpperCase()):t.fmCode=e.game.currentWallet.currencyCode.toUpperCase();return t.sign=e.game.currentWallet.currencySymbol,0===e.game.currentWallet.decimalSpaces?t.decimals=(e.game.currentWallet.rm||e.game.currentWallet.fm||0).countDecimals():t.decimals=e.game.currentWallet.decimalSpaces,t.decimal_sep=0===t.decimals?"":".",t.thousand_sep=",",t.sign_after=-1===["USD","EUR","GBP","RON","CAD"].indexOf(t.code),("ro_RO"==this.getLanguage(e)&&"RON"==t.code||"fr_FR"==this.getLanguage(e)&&"CAD"==t.code)&&(t.sign_after=!0),t.currency_sep="HUF"==t.code?" ":"",t},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getQuattroResponseGameTypes=function(e,s){var r=[];return angular.forEach(e.game.events,function(n){var e;n.type==this.events.CONF_ENTER&&(e=n.bmode.allowed,r=[],angular.forEach(e,function(e,t){var i={};i.bmode=e,i.denom=n.denom.value,i.lines=s.lines,i.activeReels=s.activeReels,35==e&&(i.activeMachines=["S","S1"]),36==e&&(i.activeMachines=["Q","Q1","Q2"]),37==e&&(i.activeMachines=["Q","Q1","Q2","Q3"]),38==e&&(i.activeMachines=["Q","Q1","Q2","Q3","Q4"]),i.betMultiplier=e-34,i.superbet=!1,r.push(i),n.bmode.value==e&&(this.configUpdate.slot.activeGameIndex=t)},this))},this),r},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getResponseGameTypes=function(e,t){var r=[];return angular.forEach(e.game.events,function(n){if(n.type==this.events.CONF_ENTER){var e;try{e=this.scope.config.parameters.superStakeBmodeValue}catch(e){}if(void 0!==e){for(var t,i=0;i<n.bmode.allowed.length;i++)if(n.bmode.allowed[i]===e){t=i;break}void 0!==t&&n.bmode.allowed.splice(1,0,n.bmode.allowed.splice(t,1)[0])}r=[];var s=n.bmode.allowed;angular.forEach(s,function(e,t){var i={};i.bmode=e,i.denom=n.denom.value,i.lines=n.lines.value,i.betMultiplier=1,i.superbet=!1,r.push(i),n.bmode.value==e&&(this.configUpdate.slot.activeGameIndex=t)},this)}},this),r},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.playCheatResponse=function(e){return this.q.when(e).then(this.processSpinResult.bind(this))},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.spin=function(e){if(this.cheat&&this.cheat.constructor==Object){var t=angular.copy(this.cheat);return this.cheat=null,this.playCheatResponse(t)}this.failureRequestFlag||this.requestId++;t=this.createSpinData(e);if(0,this.iface.totalWinUpdateSent=!1,GcwGameClient){e=this.q.when(!0);return e=(e=(e=!this.scope.game.feature?(e=e.then(GcwGameClient.triggerEvent.bind(GcwGameClient,gcw.api.GameEventType.ROUND_REQUEST,{},!0))).then(GcwGameClient.triggerEvent.bind(GcwGameClient,gcw.api.GameEventType.ROUND_START)):e).then(this.fetchResponse.bind(this,{data:t}))).then(this.processWrapperSpinResult.bind(this))}return this.fetchResponse({data:t}).then(this.processSpinResult.bind(this))},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processWrapperSpinResult=function(e){var t=e.game?e.game.casinoGameRoundId:0,i=e.game?e.game.walletAfterLastBet:{};return GcwGameClient.triggerEvent(gcw.api.GameEventType.ROUND_ID,t),GcwGameClient.triggerEvent(gcw.api.GameEventType.WALLET_UPDATE,{balance:i.rm||0,free_balance:i.fm||0}),this.processSpinResult(e)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.createRequestData=function(e){return{id:""+this.requestId,date:(new Date).toISOString(),game:{input:{event:e,currentWallet:this.getCurrentWallet()}}}},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.createSpinData=function(e){this.currentWallet&&this.currentWallet.freeRounds&&this.scope.game.freeRounds&&!this.scope.game.freeRounds.active&&(this.currentWallet.freeRounds.postponed=!0);var t=parseFloat((1e4*this.scope.game.coinValue).toPrecision(7)),i={type:this.events.BTNPUSH_CONF,button:this.buttons.START,lines:e.lines,betpl:e.betpl,denom:t,bmode:e.bmode};this.cheat&&(i={btnevt:{type:this.events.BTNPUSH_CONF,button:this.buttons.START,lines:e.lines,betpl:e.betpl,denom:t,bmode:e.bmode},type:this.events.BTNPUSH_CHEAT,cheat:this.cheat}),this.spinDataCondition()&&(i={type:this.events.BTNPUSH,button:this.buttons.START},this.cheat&&(i={btnevt:{type:this.events.BTNPUSH,button:this.buttons.START},type:this.events.BTNPUSH_CHEAT,cheat:this.cheat})),this.cheat=null;i={id:""+this.requestId,date:(new Date).toISOString(),game:{input:{event:i,currentWallet:this.getCurrentWallet()}},jackpot:{init:!1,timestamp:this.jackpotTimestamp,historyEnabled:!0}};return this.scope.game&&this.scope.game._buyBonusActivated&&this.iface.game.getParameterValue("updateBuyBonusActivatedOnNextSpin")&&(i.configuration={init:!1,save:{game:{_buyBonusActivated:!1}}},this.scope.game._buyBonusActivated=!1),i},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.spinDataCondition=function(){return this.scope.game.feature&&"fs"===this.scope.game.feature.name},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.playGambleFeature=function(e,t){var i;return("restore"===e?this.q.when(this.restoredGambleResponse):(this.requestId++,i="cheat"==e?{cheat:"H",btnevt:{button:"btn_red",type:"evt_btnpush"},type:"evt_btnpush_cheat"}:{type:"evt_btnpush",button:"btn_"+e},t&&(i.preserveSuperWheel=!0),this.gameStepNo++,i={id:""+this.requestId,date:(new Date).toISOString(),game:{input:{event:i,currentWallet:this.getCurrentWallet()}}},this.fetchResponse({data:i}))).then(this.processGambleFeature.bind(this,e)).then(this.processSimpleMessage.bind(this)).then(this.processAdditionalMethods.bind(this))},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processAdditionalMethods=function(e){return e},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processGambleFeature=function(e,t){var i;return this.processBalance(t),this.processGambleOutcome(e,t),this.userDeclinedFreeRounds||this.processFreeRounds(t),GcwGameClient&&t&&t.game&&"collect"==e&&(i=t.game.currentWallet,e=t.game.walletAfterLastBet,e=i.rm-e.rm+i.fm-e.fm,this.getResponseCurrency(t),GcwGameClient.triggerEvent(gcw.api.GameEventType.WALLET_UPDATE,{balance:i.rm||0,free_balance:i.fm||0}),this.totalWinUpdateSent||(GcwGameClient.triggerEvent(gcw.api.GameEventType.TOTAL_WIN_UPDATE,Number(e.toFixed(i.decimalSpaces))),this.totalWinUpdateSent=!0)),t},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processGambleOutcome=function(e,t){if(t.game&&t.game.events)for(var i=0;i<t.game.events.length;i++){var n=t.game.events[i];n&&n.type==this.events.GMBL_ENTER&&(t.gambleOutcome=n,t.gambleOutcome.gambleLimitReached=n.winmeter>n.maxgmbl,t.gambleOutcome.consecutiveWinsLimitReached=n.gmblstep>=n.gmblmeter,t.gambleOutcome.canGamble=i==t.game.events.length-1,t.gambleOutcome.isWin=0<n.winmeter)}return this.processJackpotWins(t),t},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.fetchResponse=function(e){if(this.replayMode){var t=this.commLog[this.commLogIndex];return this.commLogIndex++,t?this.q.when(angular.copy(t.response)):this.q.when({error:!0})}return this.request(e)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getCurrentWallet=function(){return this.currentWallet},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.setCurrentWallet=function(e){this.currentWallet=e.game.currentWallet},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processSpinResult=function(e){return this.replayMode||this.resetTimer(),(e=e||{}).outcome=e.outcome||{},e.outcome.wins=[],e.game&&(e.game.events=e.game.events||[]),this.buyFeatureActive&&(this.totalCascadeWin=0,this.totalCascadeCoinsWin=0),this.gameStepNo=e.game&&e.game.gameStepNo||1,e.game&&(this.processResponseTransform(e),this.processBetMode(e),this.processBalance(e),this.processReels(e),this.processWins(e),this.processJackpotWins(e),this.processFeatures(e),this.processGambleFeature(null,e),this.setCurrentWallet(e),this.processInsufficientFundsGameRound(e),this.processSimpleMessage(e)),e.spinToWin&&this.processSpinToWin(e),e.superWheel&&this.processSuperWheel(e),e},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processSuperWheel=function(e){var t=e.superWheel;t.studioLink&&(e.outcome=e.outcome||{},e.outcome.superWheel=e.outcome.superWheel||{},e.outcome.superWheel.studioLink=t.studioLink)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processSpinToWin=function(e){var t=e.spinToWin;t.studioLink&&(e.outcome=e.outcome||{},e.outcome.spinToWin=e.outcome.spinToWin||{},e.outcome.spinToWin.studioLink=t.studioLink)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processFreeRounds=function(e){e.outcome=e.outcome||{},e.game&&e.game.events&&(e.outcome.freeRounds=this.getResponseFreeRounds(e,!1))},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processJackpotWins=function(e){e.game&&e.game.jackpotWins&&e.game.jackpotWins.length&&(e.outcome.jackpot={wonAmount:e.game.jackpotWins[0].valueInPlayersCurrency,userWon:!0})},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processReels=function(e){e.outcome=e.outcome||{},e.outcome.reels=this.getResponseReels(e,!1),e.reels=this.getResponseSpinningSymbols(e)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getResponseSpinningSymbols=function(e){var n=[];return angular.forEach(this.scope.config.slot.reels[0].staticSymbols,function(e,t){var i=Math.floor(Math.random()*(e.length-1));n[t]=e.slice(i).concat(e.slice(0,i))},this),n},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processBalance=function(t){var e;t.outcome=t.outcome||{},t.game&&(t.game.currentWallet&&t.game.currentWallet.bonuses&&(t.game.currentWallet.bonuses.forEach(function(e){t.game.currentWallet.rm+=e.amount}.bind(this)),delete t.game.currentWallet.bonuses),t.game.walletAfterLastBet&&t.game.walletAfterLastBet.bonuses&&(t.game.walletAfterLastBet.bonuses.forEach(function(e){t.game.walletAfterLastBet.rm+=e.amount}.bind(this)),delete t.game.walletAfterLastBet.bonuses),e=t.game.mode==sna.service.tripleBellsProvider.playModes.FUN,t.status&&t.status.code!==sna.service.tripleBellsProvider.CODE_OK&&(t.game.walletAfterLastBet.fm=t.game.currentWallet.fm,t.game.walletAfterLastBet.rm=t.game.currentWallet.rm),t.game.currentWallet&&(t.outcome.balance=e?t.game.currentWallet.fm:t.game.currentWallet.rm),t.game.walletAfterLastBet&&(t.outcome.placeBetBalance=e?t.game.walletAfterLastBet.fm:t.game.walletAfterLastBet.rm))},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processBetMode=function(t){t.outcome=t.outcome||{},t&&t.game&&t.game.events&&angular.forEach(t.game.events,function(e){e.type==this.events.CONF_ENTER&&(t.outcome.betMode=e.bmode.value)},this)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getActiveBetMode=function(e){var t=this.scope.game?this.scope.game.gameTypes[this.scope.game.activeGameTypeIndex].bmode:1;if(e&&e.game&&e.game.events)for(var i=0;i<e.game.events.length;i++){var n=e.game.events[i];n.type==this.events.CONF_ENTER&&(t=n.bmode.value)}return t},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processWins=function(t){var i;t.outcome=t.outcome||{},t.outcome.winningSymbols=sna.service.util.fillReelsArray(!1,this.scope.config.slot.reels[0].number,this.scope.config.slot.reels[0].size),t.outcome.winningTopSymbols=sna.service.util.fillReelsArray(!1,this.scope.config.slot.reels[0].number,this.scope.config.slot.reels[0].size+1),t.outcome.winningBottomSymbols=sna.service.util.fillReelsArray(!1,this.scope.config.slot.reels[0].number,this.scope.config.slot.reels[0].size+1),t.outcome.wins=[],t.outcome.win=0,t.outcome.coinsWin=0,t.game&&t.game.events&&(i=this.getActiveCoinValue(t),angular.forEach(t.game.events,function(e){this.checkIfEventBeforeSpinEvt(e,t)||(e.type===this.events.WIN&&this.processWinEvent(e,t,i),e.type===this.events.WIN_FEAT&&this.processWinFeatureEvent(e,t,i),e.type===this.events.NOTIFY&&this.processNotifyEvent(e,t,i))},this)),t.outcome.hasWins=t.outcome.hasWins||!!t.outcome.wins.length},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getActiveCoinValue=function(e){var t=(this.scope.game||this.configUpdate.slot).coinValue;if(e&&e.game&&e.game.events)for(var i=0;i<e.game.events.length;i++){var n=e.game.events[i];if(n.type==this.events.BET_PLACED){t=n.denom/1e4;break}n.type==this.events.CONF_ENTER&&(t=n.denom.value/1e4)}return t},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processNotifyEvent=function(e,t,i){e.code!=this.scope.config.parameters.maxWinReachedCode&&0!=e.code||(t.outcome.maxWinReached=e.vals[0]*i)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processWinEvent=function(e,t,i){e.sym==this.symbols.SCATTER?t.outcome.wins.push(this.createScatterPaylineWin(e,t)):t.outcome.wins.push(this.createPaylineWin(e,t)),t.outcome.win+=e.credit*i,t.outcome.coinsWin+=e.credit},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.createScatterPaylineWin=function(e,t){return this.createPaylineWin(e,t)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.createPaylineWin=function(e,i){var n={type:"payline"};return n.id=e.line,n.win=e.credit,n.symbol=this.symbolMappings[e.sym],n.feature="J"==e.sym?"mystery":null,n.symbolWins=[],angular.forEach(this.getPaylineById(n.id).positions,function(e,t){n.symbolWins[t]=!1,null!==e&&(i.outcome.winningSymbols[t][e]=!0,n.symbolWins[t]=!0)},this),n},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processWinFeatureEvent=function(e,t,i){},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processFeatures=function(e,t){e.outcome=e.outcome||{},this.processFreeSpins(e,t),this.processSpinification(e),this.maxWinReachedInFreeSpins(e)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.maxWinReachedInFreeSpins=function(e){e.outcome.maxWinReached&&e.outcome.features&&e.outcome.features.freespins&&(e.outcome.features.freespins.end=!0,e.outcome.features.freespins.totalWin=e.outcome.maxWinReached,e.outcome.features.freespins.grandTotal=e.outcome.maxWinReached)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.additionalConditionProcessFreeSpins=function(){return!0},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processFreeSpins=function(e){var i=(this.scope.game||this.configUpdate.slot).coinValue;if(e.game.events)for(var t=0;t<e.game.events.length;t++){var n=e.game.events[t];n.type==this.events.BET_PLACED&&(i=n.denom/1e4)}var s=e.outcome;angular.forEach(e.game.events,function(e){var t;e.type===this.events.WIN&&0<e.spins?(s.features=s.features||{},s.features.freespins&&0<s.features.freespins.restoreLeft||s.features.freespins&&0==s.features.freespins.restoreLeft&&0<e.spins?(s.features.freespins.start=!1,s.features.freespins.left+=e.spins,s.features.freespins.retrigger=!0,s.features.freespins.retriggerArray=s.features.freespins.retriggerArray||[],s.features.freespins.retriggerArray.push(e.spins),s.features.freespins.retriggerCount=s.features.freespins.retriggerCount||0,s.features.freespins.retriggerCount=s.features.freespins.retriggerCount+e.spins):(s.features.freespins={},s.features.freespins.start=!0,s.features.freespins.retrigger=!1,s.features.freespins.retriggerCount=0,s.features.freespins.total=e.spins,s.features.freespins.left=e.spins,s.features.freespins.symbol=e.sym,s.features.freespins.totalWin=0,s.features.freespins.totalCoinsWin=0,s.features.freespins.prevTotalWin=0,this.scope.config.parameters.includeInitialFreeSpinWin&&(0<e.credit?(s.features.freespins.totalWin=parseFloat((e.credit*i).toFixed(2)),s.features.freespins.prevTotalWin=s.features.freespins.totalWin,s.features.freespins.totalCoinsWin=e.credit):(s.features.freespins.totalCoinsWin=s.coinsWin,s.features.freespins.totalWin=parseFloat(s.win).toFixed(2),s.features.freespins.prevTotalWin=s.features.freespins.totalWin,s.features.freespins.grandTotal=s.features.freespins.totalWin))),s.features.freespins.end=!1,s.features.freespins.active=!0,s.features.freespins.multiplier=e.fsmulti||e.multiplier||1,s.features.freespins.name="fs",this.scope.game&&(this.scope.game.freespins=angular.copy(s.features.freespins))):e.type===this.events.SPIN_ENTER&&0<e.spinstep&&this.additionalConditionProcessFreeSpins()&&((t={start:!1,active:!0}).total=e.spinmeter,t.left=e.spinmeter-e.spinstep,t.restoreLeft=e.spinmeter-e.spinstep,t.end=0==t.left&&!t.retrigger&&!this.hasRetriggerRestore,t.totalWin=parseFloat((e.featmeter*i+s.win).toFixed(2)),t.prevTotalWin=e.featmeter*i,t.grandTotal=parseFloat((e.winmeter*i+s.win).toFixed(2)),t.multiplier=e.fsmulti||e.multiplier||1,t.name="fs",this.scope.config.parameters.includeInitialFreeSpinWin&&(t.totalWin=parseFloat((e.winmeter*i+s.win).toFixed(2)),t.prevTotalWin=parseFloat((e.winmeter*i).toFixed(2)),t.grandTotal=parseFloat((e.winmeter*i+s.win).toFixed(2))),s.features=s.features||{},s.features.freespins=s.features.freespins||{},s.features.freespins=t)},this),this.buyFeatureActivated&&(this.buyFeatureActivated=!1)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processSpinification=function(e){},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getPaylineById=function(e){if(void 0!==this.scope.game)return this.scope.game.getPaylineById(e);for(var t=this.scope.config.slot.paylines,i=0;i<t.length;i++)if(t[i].id==e)return t[i]},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.roundCompleted=function(e){GcwGameClient&&this.shouldTriggerRoundEndEvent()&&GcwGameClient.triggerEvent(gcw.api.GameEventType.ROUND_END),this.requestId++;var t=this.gameStepNo||1,t={id:""+this.requestId,date:(new Date).toISOString(),game:{confirm:{count:0,gameStepNo:t}}};return e&&(t.configuration={init:!1,save:{game:e}}),this.request({data:t})},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.shouldTriggerRoundEndEvent=function(){return!this.scope.game.feature||this.scope.game.feature.end},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.requestJackpotData=function(){var e={date:(new Date).toISOString(),game:{},jackpot:{init:!1,lastActualizationTimestamp:this.jackpotTimestamp,historyEnabled:!0}};return this.jackpotRequest({data:e}).then(this.getJackpotData.bind(this))},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getJackpotData=function(e){if(e){var t={};return e.jackpot&&!this.configUpdate.spinToWinEnabled&&(this.jackpotTimestamp=e.jackpot.timestamp,e.jackpot.values&&(t=1<e.jackpot.values.length?this.getGrandJackpotData(e):this.getMysteryJackpotData(e))),t}return null},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getGrandJackpotData=function(e){var t=e.jackpot.values[0],i=e.jackpot.values[1],e={isGrandJackpotActive:!0};return t&&(e.currentValue=t.value,e.miniJackpotMinimalAmount=t.minValue,e.miniJackpotMaximumAmount=t.maxValue,e.miniJackpotAmount=t.value,e.miniJackpotPercent=t.value/t.maxValue*100,e.miniJackpotMaxValueInPlayerCurrency=t.maxValueInPlayerCurrency,e.miniJackpotMinValueInPlayerCurrency=t.minValueInPlayerCurrency,e.miniJackpotValueInPlayerCurrency=t.valueInPlayerCurrency,t.history&&(e.miniJackpotWinners=t.history.map(function(e){var t={};return t.amount=e.amount,t.date=sna.service.util.msToDateShortYear(e.date),t.time=sna.service.util.msToTimeAmPm(e.date),t},this))),i&&(e.grandJackpotMinimalAmount=i.minValue,e.grandJackpotMaximumAmount=i.maxValue,e.grandJackpotAmount=i.value,e.grandJackpotPercent=i.value/i.maxValue*100,e.grandJackpotMaxValueInPlayerCurrency=i.maxValueInPlayerCurrency,e.grandJackpotMinValueInPlayerCurrency=i.minValueInPlayerCurrency,e.grandJackpotValueInPlayerCurrency=i.valueInPlayerCurrency),t.winByAnotherPlayer&&t.winByAnotherPlayer.hasWon&&t.winByAnotherPlayer.dateWon!==this.lastJackpotDateWon&&(this.lastJackpotDateWon=t.winByAnotherPlayer.dateWon,e.notifications=e.notifications||[],e.notifications.push({wonAmount:t.winByAnotherPlayer.playerWin,userWon:!1})),i&&i.winByAnotherPlayer&&i.winByAnotherPlayer.hasWon&&i.winByAnotherPlayer.dateWon!==this.lastJackpotDateWon&&(this.lastJackpotDateWon=i.winByAnotherPlayer.dateWon,e.notifications=e.notifications||[],e.notifications.push({wonAmount:i.winByAnotherPlayer.playerWin,userWon:!1})),e},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getMysteryJackpotData=function(e){var t={},e=e.jackpot.values[0];return e&&(e.value&&(t.currentValue=e.valueInPlayerCurrency||e.value),e.maxValue&&(t.maxValue=e.maxValueInPlayerCurrency||e.maxValue),e.winByAnotherPlayer&&e.winByAnotherPlayer.hasWon&&e.winByAnotherPlayer.dateWon!==this.lastJackpotDateWon&&(this.lastJackpotDateWon=e.winByAnotherPlayer.dateWon,t.notifications=t.notifications||[],t.notifications.push({wonAmount:e.winByAnotherPlayer.playerWin,userWon:!1}))),t},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getCoinValue=function(e){var t;this.scope.game?t=this.scope.game.coinValue:this.configUpdate.slot&&(t=this.configUpdate.slot.coinValue);for(var i=0;i<e.game.events.length;i++){var n=e.game.events[i];n.type==this.events.BET_PLACED&&(t=n.denom/1e4),n.type==this.events.CONF_ENTER&&(t=n.denom.value/1e4)}return t},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.initHeartbeat=function(e){return this.initTimer(1e3*this.HEARTBEAT_INTERVAL,this.heartbeat.bind(this),null,!1),e},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.initTimer=function(e,t,i,n){this.timerThreshold=e,this.timerCallback=t,this.timerCallbackParams=void 0!==i?i:null,this.invokeApply=void 0===n||n,this.timer=this.interval(this.timerCallback,this.timerThreshold,0,n,this.timerCallbackParams)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.resetTimer=function(e){null!==this.timer&&(this.interval.cancel(this.timer),this.timer=this.interval(this.timerCallback,this.timerThreshold,0,this.invokeApply,this.timerCallbackParams))},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.heartbeat=function(){var e={date:(new Date).toISOString(),game:{}};return this.request({data:e})},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.heartbeatRequest=function(e){return this.http({method:e.method||sna.service.HTTP_POST,url:e.url||this.gameSessionUrl,headers:e.headers||{"Content-Type":"application/json"},data:{date:(new Date).toISOString(),game:{}}}).then(this.successResponseCallback.bind(this),function(){return{}})},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getBalance=function(){return this.q.when({data:this.scope.game.balanceCash})},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.detectServerError=function(e){if(GcwGameClient){var t=(i=e.status).code;e.history&&e.status===sna.service.tripleBellsProvider.CODE_OK&&(t=i),this.lastErrorCode=t;if(e.status.errorCode=t,e.status.errorMessage=e.status.message,t!==sna.service.tripleBellsProvider.CODE_OK&&530!=i.externalCode&&"INSUFFICIENT_FUNDS"!=i.code){GcwGameClient.triggerEvent(gcw.api.GameEventType.ERROR,e.status);GcwGameClient.initialData.initConf.brand;if("undefined"==typeof leanderGMApi&&!this.isPokerStars&&!e.status.processed)return{message:i.message,exception:i.code,type:sna.error.BACKEND_ERROR,code:"ERROR_BACKEND"}}else"INSUFFICIENT_FUNDS"==t&&this.isPokerStars&&(t={errorCode:e.status.code,errorMessage:e.status.externalMessage,data:{id:e.status.externalCode}},GcwGameClient.triggerEvent(gcw.api.GameEventType.ERROR,t));return!1}var i;return(i=e.status).code!==sna.service.tripleBellsProvider.CODE_OK&&i.code!==sna.service.tripleBellsProvider.CODE_INSUFFICIENT_FUNDS&&{message:i.message,exception:i.code,type:sna.error.BACKEND_ERROR,code:"ERROR_BACKEND"}},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.playCheat=function(e){this.cheat=e},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.saveGameSettings=function(){var e,i,n=["buyBonusManualSpin","inactivityMessage","hideClock","hideBalance","autoplayOptions","enrichedWrapper","disableSlamStop","hideFastSpin","hideAutoSpin","disableSpaceBar","hideHomeButton","SpinDuration","demo","debugPanel","spinDuration","forceSingleGame","maxAutoSpins","hideSuperStake","featureBuyDisabled","hideFullScreenButton","hideSoundButton","moveMenuButton","menuStartPage","hideIntroScreen","maxWin","isDisplaySessionTime","isDisplayNet","homeButtonDeactivate","hideAutoHold","disableHoldDialog","hideRegister","showWinProbabilityDisplay","maxWinProbability","maxWinMultiplier","showHistoryButton","gameHistoryLib","superJokerMaxBet","showPortVersion","buyFeatureLimitInPlayerCurrency","removeGameRulesDl"].map(function(e){return e.toLowerCase()},this),t=angular.copy(this.scope.game.gameSettings);this.scope.game.gameSettings.game&&(e=Object.keys(this.scope.game.gameSettings.game),i={},e.forEach(function(e){var t=this.scope.game.gameSettings.game[e];-1===n.indexOf(e.toLowerCase())&&(i[e]=t)}.bind(this)),t.game=i),this.requestId++;t={configuration:{init:!1,save:t},date:(new Date).toISOString(),id:""+this.requestId};return this.request({data:t})},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getResponseGameSettings=function(e){if(e){var t={};return e.configuration&&(t.game={},t.general={},t.game=e.configuration.game,t.general=e.configuration.general),t}return null},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getResponseFreeRounds=function(e,t){var i,n,s,r=null,o=this.nextCommLog&&this.nextCommLog[0].response.game.currentWallet.freeRounds?this.nextCommLog[0].response.game.currentWallet.freeRounds.available:null;return e&&e.game&&(e.game.currentWallet&&e.game.currentWallet.freeRounds&&e.game.currentWallet.freeRounds.available>o||!e.game.currentWallet.freeRounds&&e.game.walletAfterLastBet&&e.game.walletAfterLastBet.freeRounds&&0==e.game.walletAfterLastBet.freeRounds.available)&&(i=e.game.currentWallet,n=e.game.walletAfterLastBet,o=e.outcome,i&&i.freeRounds?(i.decimalSpaces,s=i.freeRounds):n&&n.freeRounds&&(this.isGambleActive(e),n.decimalSpaces,s=n.freeRounds),e.outcome&&e.outcome.features&&e.outcome.features.freespins&&(this.isGambleLimitReached(e)||0),s&&(r={},angular.forEach(e.game.events,function(e){e.type==this.events.CONF_ENTER&&angular.forEach(e.betpl.allowed,function(e){e<=s.roundConfig.betpl&&(r.bet=e)}.bind(this))},this),r.customData={bmode:s.roundConfig.bmode},r.coinValue=s.roundConfig.denom/1e4,r.left=s.available,r.end=0==r.left,r.totalWin=s.totalWin,r.end&&this.configUpdate.slot&&this.configUpdate.slot.customData&&(this.configUpdate.slot.freeRounds.customData.newBalance=e.game.currentWallet.rm||e.game.currentWallet.fm),i.freeRounds||o.balance>o.placeBetBalance&&(r.totalWin=+(o.balance-o.placeBetBalance).toFixed(2)),r.postponed=s.postponed,!this.prevCommLog&&!this.nextCommLog||r.postponed||(o=this.nextCommLog)&&(o=o[o.length-1].response.game.currentWallet.freeRounds||{available:0},r.postponed=o.available==s.available),r.totalCoinsWin=Math.round(r.totalWin/r.coinValue)||0,r.total=s.total,r.available=i&&i.freeRounds?s.available:0,r.start=s.available===s.total&&0<s.available&&!r.postponed,e.game.messagesAfterGameEvents&&e.game.messagesAfterGameEvents.length&&(e=e.game.messagesAfterGameEvents.find(function(e){return"MAX_WIN_REACHED"!=e.code}),r.message=null,e&&(r.message=e.message)))),r},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.activateBuyFeature=function(e){e=e||"btn_num0",this.requestId++;e={id:""+this.requestId,date:(new Date).toISOString(),configuration:{init:!1,save:{game:{_buyBonusActivated:!0}}},game:{input:{event:{type:"evt_btnpush",button:e},currentWallet:this.getCurrentWallet()}}};return this.fetchResponse({data:e}).then(this.createFakeBuyFeatureResponse.bind(this))},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.createFakeBuyFeatureResponse=function(){this.requestId++;var e={id:""+this.requestId,date:(new Date).toISOString(),game:{input:{event:{type:this.events.BTNPUSH,button:this.buttons.START},currentWallet:this.getCurrentWallet()}}};this.buyFeatureActive=!0;var t=this.q.when(!0);return t=(t=(t=(t=(t=t.then(this.fetchResponse.bind(this,{data:e}))).then(this.buyFeatureBeforeSpinResult.bind(this))).then(this.processSpinResult.bind(this))).then(this.processBuyBonusOutcome.bind(this))).then(function(e){return this.buyFeatureActive=!1,e}.bind(this))},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.buyFeatureBeforeSpinResult=function(e){return e},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.setBuyBonusOutcome=function(e){return e.reels=e.reels||{},this.scope.config.slot.buyBonusOutcome&&(e.reels.middle=angular.copy(this.scope.config.slot.buyBonusOutcome.middle)),e.reelHasScatter=[!0,!0,!0],e.hasScatterSpinification=!0,e.hasPotentialWin=!1,e.hasLineWins=!1,e.hasWins=!1,e.win=0,e.wins=[],e.buyFeatureActive=!0,e.features&&(e.features.freespins.left=e.features.freespins.total,e.features.freespins.start=!0),e.hasRespin=!1,delete e.reels.symbolFeatures.middle,e},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processBuyBonusOutcome=function(e){if(e.status&&e.status.code===sna.service.tripleBellsProvider.CODE_INSUFFICIENT_FUNDS)return e;if(this.fakeRespNeeded(e))return e;var t=[];t.unshift(e);e=this.cutFakeResponse(angular.copy(e));return this.setBuyBonusOutcome(e.outcome),t.unshift(e),t},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.fakeRespNeeded=function(e){e=e.game.events.find(function(e){return e.type==this.events.SPIN_ENTER},this);return e&&0==e.spinstep&&0<e.spinmeter},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.cutFakeResponse=function(e){var t=!1;return e.game.events=e.game.events.filter(function(e){if(!t)return e.type==this.events.ROTATE&&(t=!0),e},this),e},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.updateBetConfiguration=function(e){this.requestId++;var t=parseFloat((1e4*this.scope.game.coinValue).toPrecision(7)),e={type:"evt_btnpush_conf",button:"btn_none",lines:e.lines,betpl:e.betpl,denom:t,bmode:e.bmode},e={id:""+this.requestId,date:(new Date).toISOString(),game:{input:{event:e,currentWallet:this.getCurrentWallet()}}};return this.fetchResponse({data:e})},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.closeBuyBonus=function(e){var t;e||(e=(t=this.scope.config.parameters.buyFreeSpinsButtons)&&t.cancel?t.cancel:"btn_num1"),this.requestId++;e={id:""+this.requestId,date:(new Date).toISOString(),game:{input:{event:{type:"evt_btnpush",button:e},currentWallet:this.getCurrentWallet()}}};return this.fetchResponse({data:e})},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.openBuyBonus=function(e){e={type:"evt_btnpush_conf",button:"btn_none",lines:e.lines,betpl:e.betpl,denom:Number((1e4*this.scope.game.coinValue).toFixed(2)),bmode:e.bmode};try{this.scope.config.parameters.openBonusEvent&&(e=this.scope.config.parameters.openBonusEvent)}catch(e){}this.requestId++;e={id:""+this.requestId,date:(new Date).toISOString(),game:{input:{event:e,currentWallet:this.getCurrentWallet()}}};return this.fetchResponse({data:e})},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.sendRequestBuyFreespinsFeature=function(e){this.requestId++;e={buyFreeSpins1:"btn_num1",buyFreeSpins2:"btn_num2",buyFreeSpins3:"btn_num3",buyFreeSpins4:"btn_num4"}[e];if(e){e={type:"evt_btnpush",button:e},e={id:""+this.requestId,date:(new Date).toISOString(),game:{input:{event:e,currentWallet:this.getCurrentWallet()}}};return this.q.when(!0).then(this.fetchResponse.bind(this,{data:e})).then(this.processBuyFreeSpins.bind(this))}},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processBuyFreeSpins=function(e){return e.outcome=e.outcome||{},this.processFreeSpins(e),e},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processBuyFreespinsFeatureActive=function(e){e&&e.game&&e.game.events&&"evt_selgame_enter"==e.game.events[e.game.events.length-1].type&&(e.game.events=e.game.events.filter(function(e,t){return"evt_conf_enter"==e.type||"evt_rotate"==e.type&&0==e.mode||"evt_selgame_enter"==e.type||"evt_spin_enter"==e.type}.bind(this)))},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.isBuyFreespinsFeatureActive=function(e){return!!(e&&e.game&&e.game.events)&&"evt_selgame_enter"==e.game.events[e.game.events.length-1].type},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.checkIfEventBeforeSpinEvt=function(e,t){var i=t.game.events,t=i.filter(function(e){return e.type==this.events.SPIN_ENTER},this);if(1<t.length&&0==t[0].spinmeter&&0<t[1].spinmeter&&0<t[1].spinstep){t=i.indexOf(t[t.length-1]);if(i.indexOf(e)<t)return!0}return!1},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.declineFreeRounds=function(e){return this.currentWallet&&this.currentWallet.freeRounds&&this.scope.game.freeRounds&&!this.scope.game.freeRounds.active&&(this.currentWallet.freeRounds.postponed=!0),this.updateBetConfiguration(e)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.loadBetConfiguration=function(e){this.requestId++;e={type:"evt_btnpush_conf",button:"btn_none",lines:e.lines,betpl:e.betpl,denom:e.denom,bmode:e.bmode},e={id:""+this.requestId,date:(new Date).toISOString(),game:{input:{event:e,currentWallet:this.getCurrentWallet()}}};return this.fetchResponse({data:e})},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getEvent=function(e,t,s){var r=t;return"evt"!==t.slice(0,3)&&(r=this.events[t]),e.game.events.find(function(i){if(s){var e=Object.keys(s),n=Object.values(s);return e.every(function(e,t){return n[t]==i[e]},this)&&i.type==r}return i.type==r},this)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getEvents=function(e,t){var i=t,n=e;return e&&e.game&&e.game.events&&(n=e.game.events),"evt"!==t.slice(0,3)&&(i=this.events[t]),n.filter(function(e){return e.type==i},this)},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.selectFreeSpinsOption=function(e,t){this.requestId++;var i=this.iface&&this.iface.cheatStack.shift();if(i){if(i.constructor==Object){var n=angular.copy(i);return this.cheat=null,this.q.when(n).then(this.processFreeSpinsPickerResponse.bind(this))}data={id:""+this.requestId,date:(new Date).toISOString(),game:{input:{event:{btnevt:{type:"evt_btnpush",button:"btn_num"+e},type:this.events.BTNPUSH_CHEAT,cheat:i},currentWallet:this.getCurrentWallet()}}}}else data={id:""+this.requestId,date:(new Date).toISOString(),game:{input:{event:{type:"evt_btnpush",button:"btn_num"+e},currentWallet:this.getCurrentWallet()}}};return this.fetchResponse({data:data}).then(this.processFreeSpinsPickerResponse.bind(this))},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.processFreeSpinsPickerResponse=function(e){return this.firstFreeSpinResponse=angular.copy(e),this.firstFreeSpinResponse.game.events=e.game.events.splice(e.game.events.findIndex(function(e){return e.type===this.events.SPIN_ENTER&&1===e.spinstep},this)),this.processFeatures(e),e},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.getFreeSpinsPickerOption=function(){var e=this.commLog[this.commLogIndex].request.game.input.event;return(e.cheat&&e.btnevt?e.btnevt:e).button},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.isInFreeSpinActive=function(e,i){var t=!1;return t=e&&e.game&&e.game.events?!!e.game.events.filter(function(e){var t=e.type===this.events.SPIN_ENTER&&0<e.spinstep&&e.spinmeter!==e.spinstep;return t=!i?t||e.type===this.events.WIN&&0<e.spins:t},this).length:t},sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.mapSymbolPositions=function(e){for(var t=[],i=0;i<e.length;i+=2)t.push({ri:e[i],si:this.scope.config.slot.reels[0].size-1-e[i+1]});return t},sna.service.tripleBellsProvider.TripleBellsCommunicationServiceProvider=function(){sna.service.slot.SlotCommunicationProvider.call(this)},sna.service.tripleBellsProvider.TripleBellsCommunicationServiceProvider.prototype=new sna.service.slot.SlotCommunicationProvider,sna.service.tripleBellsProvider.TripleBellsCommunicationServiceProvider.prototype._create=function(){return new sna.service.tripleBellsProvider.TripleBellsCommunicationService(this.config)},sna.service.tripleBellsProvider.TripleBellsCommunicationServiceProvider.prototype._init=function(e,t,i,n,s,r,o){var a=this._create();return a.q=t,a.http=i,a.scope=n,a.httpSerializer=s,a.interval=r,a.casino=e.get(this.config.casinoServiceName,this),a},sna.module.tripleBellsProvider.provider(sna.service.tripleBellsProvider.TRIPLE_BELLS_COMMUNICATION,sna.service.tripleBellsProvider.TripleBellsCommunicationServiceProvider),sna.service.tripleBellsProvider.TRIPLE_BELLS_INTERFACE="TripleBellsInterfaceService",sna.service.tripleBellsProvider.TRIPLE_BELLS_INTERFACE_PROVIDER=sna.service.tripleBellsProvider.TRIPLE_BELLS_INTERFACE+sna.service.PROVIDER_SUFFIX,sna.service.tripleBellsProvider.events={GAME_TYPE_UPDATED:"gameTypeUpdated",JACKPOT_RESET:"jackpotReset",JACKPOT_UPDATED:"jackpotUpdated",MYSTERY_UPDATED:"mysteryUpdated",GAMBLE_FEATURE_PREPARE:"gambleFeaturePrepared",GAMBLE_FEATURE_REVEAL:"gambleFeatureReveal",GAMBLE_FEATURE_PLAY:"gambleFeaturePlay",GAME_RESTORED:"gameRestored",GAME_STARTED:"gameStarted",PREPARE_OUTCOME_SYMBOLS:"prepareOutcomeSymbols",RECREATE_OUTCOME_SYMBOLS:"recreateOutcomeSymbols",AFTER_GAME_STARTED:"afterGameStartd",CASH_COIN_TOGGLE:"cashCoinToggle"},sna.service.tripleBellsProvider.playModes={FUN:"FUN",REPLAY:"REPLAY",REAL:"REAL"},sna.service.tripleBellsProvider.gameBrands={STAKELOGIC2:"stakelogic2",STAKELOGIC:"stakelogic",RELAX:"relax"},sna.service.tripleBellsProvider.K_Symbol="k",sna.service.tripleBellsProvider.M_Symbol="m",sna.service.tripleBellsProvider.spinMenuOrientation={RIGHT:"r",LEFT:"l"},sna.service.tripleBellsProvider.TripleBellsInterface=function(){sna.service.slot.SlotInterface.call(this),this.name=sna.service.tripleBellsProvider.TRIPLE_BELLS_INTERFACE,this.footerBalanceInCoins=!1,this.footerWinInCoins=!1,this.footerBetInCoins=!1,this.footerInCoins=!1,this.gameAndCoinSelectionOpened=!1,this.colorMatrixFilter=new PIXI.filters.ColorMatrixFilter,this.filterResolution=1.5,this.colorMatrixFilter.blackAndWhite(),this.colorMatrixFilter.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.autoplayNumberOfSpins=5,this.useSpacebar=!1,this.introPageTimer={},this.introPageTimer.intervalId=null,this.introPageTimer.duration=null,this.currentIntroPage="introPage0",this.realityReminder={},this.realityReminder.duration=null,this.realityReminder.intervalId=null,this.realityReminder.stopwatchIntervalId=null,this.realityReminder.expired=!1,this.realityReminder.elapsedTime=0,this.activeReelIndex=0,this.activeSpinStartSoundIndex=0,this.jackpot={},this.jackpot.notifications=[],this.touchAnywhereCallback=this.createTouchAnywhereCallback(),this.mobileMenuButtonDragged=!1,this.mobileSpinMenuOrientation=sna.service.tripleBellsProvider.spinMenuOrientation.LEFT,this.isMysteryInTwoRows=!1,this.isGameSettingsChanged=!1,this.requestStartTs=Date.now(),this.keyPressStartTs=Date.now(),this.isDialogOpened=!1,this.autoplayJackpotThresholdActive=!1,this.autoplayJackpotThresholdTriggered=!1,this.slidableTouch=!1,this.autoCollectWins=!1,this.audioElapsedTimeMs=0,this.calculatedTotalWinDuration=0,this.showGambleButtons=!1,this.hasTaCb=!1,this.spinButtonPositionReset=!0,this.scatterLandingSoundIndex0=0,this.scatterLandingSoundIndex1=0,this.scatterLandingSoundIndex2=0,this.scatterLandingSoundIndex3=0,this.multiplierLandingSoundIndex=0,this.isRoundComplete=!0,this.updateFooterWin=!0,this.showCurrencySignsInGui,this.setShowCurrencySignsInGui(!1),this.gameSetupCompleted=!1,this.activeTotalWin=0,this.cheatStack=[],this.cheatStackResponse=[],this.winSumDone=!0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype=Object.create(sna.service.slot.SlotInterface.prototype),sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setupSlotInterface=sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setup,sna.service.tripleBellsProvider.TripleBellsInterface.prototype.returnIf=sna.service.util.returnIf,sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setup=function(){this.setupSlotInterface(),sna.service.tripleBellsProvider.playModes.REPLAY===this.scope.game.playMode&&this.addKeyboardCallback([72],this.hKeyCallBack.bind(this)),this.playerHaveFreeRounds=!!this.returnIf(this,"scope.game.freeRounds"),void 0!==this.game.getParameterValue("introPageCycleDuration")&&(this.introPageTimer.duration=this.game.getParameterValue("introPageCycleDuration")),this.game.getParameterValue("overridePdfDownload")||this.setGameRulesUrl(),this.scope.isInterfaceReady=!0,this.presentation.main.environment.environmentTags.push(this.scope.game.language),this.scope.game.spinToWinEnabled&&this.presentation.main.environment.environmentTags.push("SpinToWin"),this.presentation.scope.lang=this.scope.game.language;var e=sna.presentation.util.getUrlParameters(),t=this.game.getParameterValue("urlParametersStrings");this.setGameSettingsModel(),this.setDefaultSoundState(),this.isSimpleBet=e&&(e.hasOwnProperty(t.simpleBet)||!!e[t.simpleBet]),this.updateGameType(),this.spinButtonMenuOpened=!1,this.presentation.main.environment.is(sna.service.ENVIRONMENT_MOBILE)&&(this.registerEventCallback("stopSpinButtonAutoplay",this,this.stopSpinButtonAutoplay),this.registerEventCallback("startSpinButtonAutoplay",this,this.startSpinButtonAutoplay)),this.setTargetMarket(),this.scope.game.autoplay.totalBetToGambleThreshold=parseFloat("true"==sna.service.util.readCookie("totalBetToGambleThreshold"))||0;t=this.game.getParameterValue("markets");this.isTargetMarket(t.ukgc)&&this.game.getParameterValue("lossLimit")&&(this.scope.game.autoplay.winDecreaseThreshold=parseFloat("true"==sna.service.util.readCookie("winDecreaseThreshold"))||this.game.getParameterValue("lossLimit")[0]*this.getBet()),this.scope.game.autoplay.totalBetToGambleThresholdActive="true"==sna.service.util.readCookie("totalBetToGambleThresholdActive")||!1,this.scope.game.autoplay.stopOnFeature=!0,sna.service.tripleBellsProvider.playModes.REPLAY!==this.scope.game.playMode&&this.setupRealityReminder(),this.presentation.main.environment.is(sna.service.ENVIRONMENT_MOBILE)&&(this.startAutoplayMobile=!1),this.setGameBrand(),sna.service.tripleBellsProvider.playModes.REPLAY===this.scope.game.playMode||this.game.getParameterValue("jackpotDisabled")||this.scope.game.spinToWinEnabled||this.setupJackpot(),this.updateWrapperCustomPlayAreaButtonsSpacing(2160),this.setupMystery(),this.triggerMysteryUpdate&&this.registerEventCallback(sna.service.tripleBellsProvider.events.MYSTERY_UPDATED,this,this.setMysteryText),sna.service.tripleBellsProvider.playModes.REPLAY===this.scope.game.playMode&&this.setMasterVolume(null,0),this.checkAudioContextRef=this.checkForAudioContext.bind(this),this.presentation.main.environment.is(sna.service.ENVIRONMENT_MOBILE)||document.addEventListener("click",this.checkAudioContextRef,!1),this.presentation.main.environment.register(this.onLayoutChange.bind(this)),this.setupGambleFeature(),this.removeKeyboardCallback([13,32]),window.addEventListener("keydown",function(e){if("Space"==e.code){var t=this.presentation.getById(this.getCheatsId());if(t&&t.visible)e.preventDefault(),e.target&&(e.target.value+=" ");else{t=this.game.getParameterValue("spinHoldTimeout")||250,e=Date.now();if(e-this.keyPressStartTs>t)return this.isSpaceBarHeldDown=!0,this.keyPressStartTs=e,this.enterAndSpaceKeyCallback()}}}.bind(this)),window.addEventListener("keyup",function(e){"Space"==e.code&&(e=this.game.getParameterValue("spinHoldTimeout")||250,this.keyPressStartTs-=e,this.isSpaceBarHeldDown=!1)}.bind(this)),window.addEventListener("blur",function(){this.isSpaceBarHeldDown=!1}.bind(this)),this.hasIntro=this.game.getGameSettingsProperty("intro_screen",!1),this.processWrapperPendingEvents(),this.setupRTP(),this.scope.game.playMode===sna.service.tripleBellsProvider.playModes.FUN&&(this.scope.game.currency.sign=""),this.pointer.skipCursorUpdate=!0,void 0!==triggerGameWrapperModelUpdate&&triggerGameWrapperModelUpdate({general:{landscapeOnlyGame:window.SNA.landscapeOnly||!1}}),this.setTwinGameActive(this.game.getGameSettingsProperty("play_twin"),!1),window.SLSW&&(this.isReplay()||(window.SLSW.onSwButtonStateChange(function(e){this.scope.game.superWheelGame||this.superWheelActive!=!!e&&(this.superWheelActive=!!e,this.setBuyFeatureState())}.bind(this)),window.SLSW.onRoundCompleted(function(e){this.superWheelPromise&&this.superWheelPromise.resolve(),delete this.scope.game.superWheel,this.scope.game.superWheelOutcome?this.scope.game.superWheelOutcome.totalWin+=e.result.amount:(this.scope.game.superWheelOutcome={},this.scope.game.superWheelOutcome.totalWin=e.result.amount),this.scope.game.superWheelOutcome.multiplier=e.result.multiplier,this.updateWrapperGameMessage("FAST_WIN",(this.scope.game.totalWin+e.result.amount)*this.getSuperWheelMultiplier()),this.game.isInFreeSpins()&&(this.scope.game.feature.totalWin+=e.result.amount,this.scope.game.feature.grandTotal+=e.result.amount,this.updateWrapperFreeSpinsTotalWin())}.bind(this))))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.speedUpAnimations=function(e){var t,i=this.presentation.getById("speedUp");this.animationSpeedUp?(TweenMax.globalTimeScale(1),i.setTextures("skip_normal.png","replay.json"),this.animationSpeedUp=!1):(t=this.game.getParameterValue("debugSpeedUp")||15,TweenMax.globalTimeScale(t),i.setTextures("pause_normal.png","replay.json"),this.animationSpeedUp=!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.openLogger=function(e){var t=this.presentation.getById("logContainer");t&&(t.setalpha(1),t.show(),e.setalpha(0),e.initialDimensions={width:e.width,height:e.height})},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.closeLogger=function(e){var t=this.presentation.getById("logContainer");t&&(t.setalpha(0),t.hide(),this.presentation.getById("log").setalpha(1))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.whatToLog=function(e){var t=e.parent.parent.scope.config.id,i=e.toggleState;switch(t){case"logErrors":sna.debug.logAllErrors=i,sna.debug.logAngularErrors=i;break;case"logDelays":sna.debug.logConfigDelays=i,sna.debug.logJsDelays=i;break;case"logAnimations":sna.debug.enableLogging=i;break;case"logButtonStates":sna.debug.enableWrapperButtonState=i;break;case"logSounds":sna.debug.enableLoggingSounds=i}},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.loggerBtnVisible=function(){return-1<window.location.href.indexOf("localhost")||(sna.log.logLevels.PresentationService.createAnimationTimeline&&delete sna.log.logLevels.PresentationService.createAnimationTimeline,!1)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isLoggerToggled=function(e){switch(e){case"logErrors":return sna.debug.logAllErrors||sna.debug.logAngularErrors;case"logDelays":return sna.debug.logConfigDelays;case"logAnimations":return sna.debug.enableLogging;case"logButtonStates":return sna.debug.enableWrapperButtonState;case"logSounds":return sna.debug.enableLoggingSounds;default:return 0}},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.playingInFunMode=function(){if(this.game.getParameterValue("funModeCheck")&&this.scope.game.playMode===sna.service.tripleBellsProvider.playModes.FUN)return this.funModeDialog=!1,this.presentation.createAnimationTimeline("ShowFunPlayDialog",0,!1,!0,null)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateCashCoinCommonValues=function(e){this.betInCoins=void 0!==e?e:!this.isSimpleBet,this.balanceInCoins=void 0!==e?e:!this.isSimpleBet,this.totalBetInCoins=void 0!==e?e:!this.isSimpleBet,this.fsTotalWinInCoins=void 0!==e?e:!this.isSimpleBet,this.footerBalanceInCoins=void 0!==e&&e,this.footerWinInCoins=void 0!==e&&e,this.footerBetInCoins=void 0!==e&&e,this.scope.game.showPayoutsInCoins=void 0!==e&&e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onScreenClick=function(){var e=this.game.getParameterValue("portraitModeEnabled");void 0!==e&&!e&&this.presentation.scope.layout.has(sna.service.ENVIRONMENT_PORTRAIT)||(this.requestFullScreen(),this.preventSleepIfNeeded(),e=(e=this.getCurrentPointerTarget())&&!e.allowGlobalPress,this.runGlobalPressCallbacks(e))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.afterSpinStopTickerCondition=function(){return!this.scope.game.totalWin&&!this.scope.game.autoplay.active},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.runGlobalPressCallbacks=function(e){for(var t=this.globalPressCallbacks.length,i=this.globalPressCallbacks.length-1;0<=i;i--){var n=this.globalPressCallbacks[i];if(e&&!n.clickThrough||n(),t>this.globalPressCallbacks.length)return this.runGlobalPressCallbacks()}},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getInteractionManager=function(){return this.presentation.renderer.plugins.interaction},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getCurrentPointerTarget=function(){return this.getInteractionManager().eventData.currentTarget},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.gambleFeatureTimer=function(e){(e||this.gambleFeatureOpened)&&(this.sound.sounds.GambleMusic&&this.sound.playSound("GambleMusic"),this.gambleTimer&&clearTimeout(this.gambleTimer),this.gambleTimer=setTimeout(function(){this.sound.sounds.GambleTickingFading&&(this.sound.playSoundOnce("GambleTickingFading"),this.sound.stopSound("GambleMusic"))}.bind(this),5e3)),!this.gambleFeatureOpened&&this.gambleTimer&&clearTimeout(this.gambleTimer)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onLayoutChange=function(){this.spinToWinGameActive||(this.game.getParameterValue("portraitModeEnabled")||(this.presentation.scope.layout.has(sna.service.ENVIRONMENT_PORTRAIT)&&sna.debug.preventFullscreen?sna.debug.pauseGameExecution&&this.pauseGameExecution():this.resumeGameExecution()),this.game.getParameterValue("landscapeModeDisabled")&&(this.presentation.scope.layout.has(sna.service.ENVIRONMENT_LANDSCAPE)&&this.presentation.scope.layout.has(sna.service.ENVIRONMENT_MOBILE)&&sna.debug.preventFullscreen?sna.debug.pauseGameExecution&&this.pauseGameExecution():this.resumeGameExecution()),this.presentation.scope.layout.has(sna.service.ENVIRONMENT_IPHONE)&&this.presentation.scope.layout.has(sna.service.ENVIRONMENT_SAFARI)&&this.presentation.scope.layout.has(sna.service.ENVIRONMENT_WINDOWED)&&!this.presentation.scope.layout.has(sna.service.DISABLE_IOS_FS)?(sna.debug.pauseGameExecution&&this.pauseGameExecution(),this.disableTouchAnywhereOneTimeOnWindowedIOS=!0):this.resumeGameExecution())},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setDefaultSoundStateInterfaceService=sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setDefaultSoundState,sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setDefaultSoundState=function(){if(sna.service.tripleBellsProvider.playModes.REPLAY==this.scope.game.playMode)return!1;var e=this.isPokerStars()||!1;GcwGameClient&&this.isPokerStars()?(GcwGameClient.wrapperData.musicActivePending?(e=GcwGameClient.wrapperData.musicActive,this.sound.setGroupState(GcwGameClient.wrapperData.musicActive,sna.service.SOUND_TYPE_MUSIC)):(this.sound.setGroupState(!0,sna.service.SOUND_TYPE_MUSIC),e=!0),GcwGameClient.wrapperData.soundEffectsActivePending?(e=GcwGameClient.wrapperData.soundEffectsActive,this.sound.setGroupState(GcwGameClient.wrapperData.soundEffectsActive,sna.service.SOUND_TYPE_FX,sna.service.SOUND_TYPE_INTERFACE)):(this.sound.setGroupState(!0,sna.service.SOUND_TYPE_FX,sna.service.SOUND_TYPE_INTERFACE),e=!0)):(this.sound.setGroupState(e,sna.service.SOUND_TYPE_FX,sna.service.SOUND_TYPE_INTERFACE),this.sound.setGroupState(e,sna.service.SOUND_TYPE_MUSIC)),this.setDefaultSoundStateInterfaceService(e),this.setMasterSoundStatePresentation(e)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setupGambleFeature=function(){this.gambleFeatureEnabled=this.game.getParameterValue("gambleFeatureEnabled")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setupMystery=function(){var e=this.presentation.scope.config.slot.symbols;if(e)for(var t=0;t<e.length;t++)"symStar"==e[t].name&&(this.starMultiplier=e[t].payouts[2]);this.starMultiplier=this.starMultiplier||40,this.minMysteryMultiplier=this.game.getParameterValue("minMysteryMultiplier")||1.25,this.maxMysteryMultiplier=this.game.getParameterValue("maxMysteryMultiplier")||6,this.triggerMysteryUpdate=this.game.getParameterValue("triggerMysteryUpdate")||!1},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getMysteryText=function(e){var e=parseInt(e),t=this.scope.game.bet,i=this.game.getCoinValue(),n=this.minMysteryMultiplier*this.starMultiplier*t,t=this.maxMysteryMultiplier*this.starMultiplier*t;return this.betInCoins||(n*=i,t*=i),this.formatNumberString(n,e)+"-"+this.formatNumberString(t,e)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setMysteryText=function(){},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setupJackpot=function(){this.jackpot.interval=this.game.getParameterValue("jackpotRefreshTimer")||10,this.jackpot.timerId=window.setInterval(this.updateJackpot.bind(this),1e3*this.jackpot.interval),this.registerEventCallback(sna.service.tripleBellsProvider.events.JACKPOT_UPDATED,this,this.onJackpotUpdated),this.notificationActive=!1},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateJackpot=function(){return this.communication.requestJackpotData().then(this.processJackpotData.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.resetJackpot=function(){this.scope.game.jackpot=this.scope.game.jackpot||{},this.scope.game.jackpot.currentValue=0,this.triggerEvent(sna.service.tripleBellsProvider.events.JACKPOT_RESET)};sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processJackpotData=function(e){var t=this.q.when(!0);return t=e&&(!this.scope.game.jackpot||this.scope.game.jackpot.currentValue!==e.currentValue||e.notifications)?(t=t.then(this.setJackpot.bind(this,e))).then(this.triggerEvent.bind(this,sna.service.tripleBellsProvider.events.JACKPOT_UPDATED)):t},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onJackpotUpdated=function(e){(this.scope.game.isInMode(sna.model.slot.MODE_IDLE)||this.scope.game.isInMode(sna.model.slot.MODE_WIN_INDIVIDUAL))&&this.checkJackpotNotifications()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setJackpot=function(e){e&&(e.currentValue&&(this.scope.game.jackpot=this.scope.game.jackpot||{},this.scope.game.jackpot.currentValue=e.currentValue),e.isGrandJackpotActive&&(this.scope.game.jackpot=e),e.notifications&&(this.jackpot.notifications=this.jackpot.notifications||[],this.jackpot.notifications=this.jackpot.notifications.concat(e.notifications)))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.checkJackpotNotifications=function(){if(this.jackpot.notifications.length&&!this.notificationActive&&(this.scope.game.autoplay.active&&(this.pauseAutoplay(),this.wasAutoplayPaused=!0),0<this.jackpot.notifications.length)){var e=this.jackpot.notifications.splice(0,1)[0];return this.handleJackpotNotificaiton(e).then(this.checkJackpotNotifications.bind(this))}},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getAutoplayOptions=function(){var e=this.game.getParameterValue("markets");return this.isTargetMarket(e.ukgc)?this.scope.game.config.autoplayOptionsUkgc:this.scope.game.config.autoplayOptions},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleJackpotNotificaiton=function(e){if(this.introDone){if(this.notificationActive=!0,this.scope.game.jackpot=this.scope.game.jackpot||{},this.scope.game.jackpot.wonAmount=e.wonAmount,e.userWon){e=this.game.getParameterValue("markets");return this.isTargetMarket(e.ukgc)&&this.autoplayJackpotThresholdActive&&(this.autoplayJackpotThresholdTriggered=!0),GcwGameClient&&GcwGameClient.triggerEvent(gcw.api.GameEventType.JACKPOT),this.returnIf(this,"scope.game.autoplay.active")&&this.stopAutoplay(),this.presentation.createAnimationTimeline("jackpotWon",0,!1,!0,null)}return this.presentation.createAnimationTimeline("jackpotWonOnOtherMachine",0,!1,!0,null)}return this.q.when(!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.closeJackpotNotification=function(e){return e&&e.disable&&e.disable(),this.presentation.cancelAnimation("jackpotWon",!0),this.presentation.cancelAnimation("jackpotWonOnOtherMachine",!0),this.presentation.createAnimationTimeline("closeJackpotNotification",0,!1,!0,null).then(function(){this.notificationActive=!1,this.wasAutoplayPaused&&!this.returnIf(this.scope,"lastResult.outcome.jackpot.userWon")&&(this.wasAutoplayPaused=!1,this.startOrResumeAutoplay())}.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getJackpotMaxValue=function(e){var t=this.scope.game.jackpot&&this.scope.game.jackpot.maxValue?this.scope.game.jackpot.maxValue:5e3;if(e)return this.formatNumberString(t,3);var i=angular.copy(this.scope.game.currency),e=i.code;return(e="EUR"!==e?i.sign:e)+" "+t},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isFreeSpinsType=function(e){var t=this.scope.config.slotFeatures.fs;return!!t&&t.spin==e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.blockSpinInterface=function(){this.presentation.getById(this.getSpinButtonId()).hide();var e=this.scope.game.feature,t=this.scope.config.slotFeatures.fs,e=e&&e.active&&t&&"FreeSpins"===t.type;!(t&&"manual"==t.spin)&&e||this.presentation.getById(this.getStopButtonId()).show(),this.scope.config.iface.enableEarlyReelStop?(this.earlyReelStopEnabled=!0,this.earlyReelStopTriggered=!1,this.presentation.getById(this.getStopButtonId()).enable()):this.presentation.getById(this.getStopButtonId()).disable()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.restoreSpinInterface=function(){var e=this.scope.config,t=this.scope.game,i=(t.autoplay,t.feature),n=!1;(n=i&&i.name?"manual"==e.slotFeatures[i.name].spin:n)?t.feature&&(!t.feature||t.feature.start)||t.autoplay.left||(this.presentation.getById(this.getSpinButtonId()).show(),this.presentation.getById(this.getStopButtonId()).hide()):t.feature||t.autoplay.left||(this.presentation.getById(this.getSpinButtonId()).show(),this.presentation.getById(this.getStopButtonId()).hide())},sna.service.slot.SlotInterface.prototype.earlyEnableSpinInterface=function(e){var t=this.scope.config,i=this.scope.game,n=i.autoplay,s=i.feature,r=!1;(r=s&&s.name?"manual"==t.slotFeatures[s.name].spin:r)?s&&s.start||i.miniFeature||n.active?this.presentation.getById(this.getStopButtonId()).disable():(e&&this.fastStop(!1),this.restoreSpinInterface()):s||i.miniFeature||n.active?this.presentation.getById(this.getStopButtonId()).disable():(e&&this.fastStop(!1),this.restoreSpinInterface())},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setGameBrand=function(){this.gameBrand=this.presentation.main.loader.gamebrand||sna.service.tripleBellsProvider.gameBrands.STAKELOGIC2},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getGameBrand=function(){return this.gameBrand},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isGameBrand=function(e){return this.gameBrand===e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.superBetPosible=function(){return 1<this.scope.game.gameTypes.length},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setupRealityReminder=function(){var e=this.game.getParameterValue("urlParametersStrings"),t=sna.presentation.util.getUrlParameters(),e=parseInt(t[e.realityReminder]);e&&!isNaN(e)&&(this.realityReminder.duration=e,this.realityReminder.stopwatchIntervalId=window.setInterval(this.onRealityReminderStopwatchTick.bind(this),1e3),this.realityReminder.intervalId=window.setTimeout(this.onRealityReminderExpired.bind(this),1e3*this.realityReminder.duration))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.hKeyCallBack=function(){var e;!this.scope.game.replay||(e=this.presentation.getById("replayContainer"))&&e.setalpha(+!e.alpha)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.escapeKeyCallback=function(){var e,t;sna.debug.enableCheats&&(e=this.presentation.getById(this.getCheatsId()),t=this.presentation.getById("manualCheat"),e&&(e.visible?(this.isDialogOpened=!1,e.hide(),t.hide()):(this.isDialogOpened=!0,e.show(),t.show(),this.sound.sounds.TestMenuOpen&&this.sound.playSound("TestMenuOpen",!1))))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isTargetMarket=function(e){return this.targetMarket==e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getTargetMarket=function(){return this.targetMarket},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setTargetMarket=function(e){var t=this.game.getParameterValue("urlParametersStrings"),i=this.game.getParameterValue("markets");this.communication.configUpdate.ukgc?this.targetMarket=i.ukgc:1==sna.presentation.util.getUrlParameters()[t.market]&&i[t.market]?this.targetMarket=i[t.market]:this.targetMarket=i.other},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setInitialUIStates=function(){var e=this.scope.game;this.game.getParameterValue("gameName");this.triggerMysteryUpdate&&this.triggerEvent(sna.service.tripleBellsProvider.events.MYSTERY_UPDATED),this.setInitialAutoplayStates(),e.turboMode=!1;var t=this.presentation.getById(this.getToggleFastSpinUkgcId()),i=this.presentation.getById(this.getToggleFastSpinOtherId());t&&i&&(t.setToggleState(e.turboMode),i.setToggleState(e.turboMode)),!this.presentation.main.environment.is(sna.service.ENVIRONMENT_MOBILE)||(n=this.presentation.getById(this.getToggleFastSpinMenuMobileId()))&&n.setToggleState(e.turboMode),this.presentation.main.environment.is(sna.service.ENVIRONMENT_DESKTOP)&&(s=this.isTargetMarket("OTHER")?this.presentation.getById(this.getToggleSpacebarSpinOtherId()):this.presentation.getById(this.getToggleSpacebarSpinUkgcId()))&&s.setToggleState(this.game.getGameSettingsProperty("spacebar_spin"));var n=this.presentation.getById(this.getFooterCoinCashId());n&&(r=this.scope.translations,value=this.footerInCoins?this.scope.game.currency.name:r.COINS,n.text=value,n.scope.config.text=value,this.scope.config.slot.toggleValuesEnabled||this.isSimpleBet&&n.disable());var s=this.presentation.getById("footerBalanceLabel");s&&this.isSimpleBet&&s.disable();var r=this.presentation.getById("footerWinLabel");r&&this.isSimpleBet&&r.disable();n=this.presentation.getById("footerBetLabel");n&&this.isSimpleBet&&n.disable();var o,a,s=this.presentation.getById("autoplaySelectSpinNumberSettingsUkgc"),r=this.presentation.getById("autoplaySelectSpinNumberSettingsOther");this.scope.game.playMode===sna.service.tripleBellsProvider.playModes.FUN?(n={value:"Infinity",component:""},this.isTargetMarket("OTHER")?r&&(r.addOption(n),r._update("Infinity")):s&&(s.addOption(n),s._update("Infinity")),this.autoplayNumberOfSpins=1/0):(this.isTargetMarket("OTHER")?r&&r._update(100):s&&s._update(100),this.autoplayNumberOfSpins=100),(e=this.scope.game).bet===e.maxBet&&this.presentation.main.environment.is(sna.service.ENVIRONMENT_DESKTOP)&&this.scope.game.isMaxCoinValueLevel()&&(s=this.presentation.getById(this.getMaxBetButtonId()),e=this.presentation.getById("maxBetText"),s&&(s.setToggleState(!0),s.disable()),this.game.getParameterValue("newUI"),e&&!this.isMaxBet()&&(e.scope.config.fill="#9d9d9d",e.style.fill="#9d9d9d"),this.isMaxBet()&&(e=this.presentation.getById("maxBetButton"),o=this.presentation.getById("maxBetButtonMobile"),e&&e.setToggleState(!0),o&&o.setToggleState(!0))),!this.presentation.main.environment.is(sna.service.ENVIRONMENT_MOBILE)||(a=this.presentation.getById("btnSpinOptionsContainer"))&&(a.hitArea=new PIXI.Rectangle(0,0,0,0)),this.game.getGameSettingsProperty("background_sounds")||(o=this.game.getGameSettingsProperty("background_sounds"),(a=this.presentation.getById("tglBackgroundSounds"))&&(GcwGameClient&&this.fsButtonDisabled()?a.setToggleState(this.sound.getDefaultSoundState()):a.setToggleState(o))),this.isPokerStars()||this.checkForMasterSoundState()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setInitialAutoplayStates=function(){var e,t,i=this.scope.game.autoplay;0!==i.winDecreaseThreshold||i.winDecreaseThresholdActive||((e=this.presentation.getById(this.getToggleLossLimitId()))&&e.disable(),(e=this.presentation.getById(this.getBtnAutospinSettingsId()))&&e.disable()),0!==i.winIncreaseThreshold||i.winIncreaseThresholdActive||(t=this.presentation.getById(this.getToggleWinLimitId()))&&t.disable(),0!==i.winThreshold||i.winThresholdActive||(t=this.presentation.getById(this.getToggleSingleWinLimitId()))&&t.disable(),0!==i.totalBetToGambleThreshold||i.totalBetToGambleThresholdActive||(n=this.presentation.getById(this.getToggleTotalBetToGambleId()))&&n.disable();var n=this.presentation.getById(this.getToggleAnyWinId());n&&n.setToggleState(!1)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.checkJackpot=function(){var e=this.scope.game;return!!(e&&e.jackpot&&0<Object.keys(e.jackpot).length)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.jackpotVisible=function(){var e=this.scope.game.jackpot;return!(!e||0==e.currentValue&&!e.maxValue)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleFreeRoundsUserDecline=function(e){return this.scope.game.userDeclinedFreeRounds=!0,this.communication.userDeclinedFreeRounds=!0,this.game.updateFreeRounds({message:"",declined:!0}),this.userConfirmed(e,"freeRounds","hideFreeRoundsStartDialog",!1)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.gameInit=function(e,t){this.setInitialUIStates(),this.buttonsDisabled=t.buttonsDisabled,this.presentation.createAnimationTimeline("buttonsDisabledUpdate",0,!1,!0,null),void 0===this.freeRoundsPostponed&&(this.freeRoundsPostponed=this.returnIf(this,"scope.game.replay.freeRounds.postponed"));var i=this.q.when(!0);return i=(i=(i=i.then(this.processIntro.bind(this,t))).then(this.processSpinToWinIntro.bind(this,t))).then(this.processWrapperAdditionSection.bind(this,t)),i=(i=(i=(i=this.isVisibleSuperStake()?(i=!this.game.getParameterValue("processSuperStakeInRestoreGame")||!e?i.then(this.processSuperStake.bind(this,t,e)):i).then(this.handleSuperStakeReplay.bind(this)):i).then(this.setBuyFeatureState.bind(this))).then(this.restoreFreeRounds.bind(this,t))).then(this.restoreLastResult.bind(this,t)),e?(i=i.then(this.restoreGame.bind(this,t)),this.scope.game.freeRounds&&this.scope.game.freeRounds.start&&(this.returnIf(this,"scope.game.feature.active")||this.returnIf(t,"restoreData.previousOutcome.features.freespins.active")||(this.hasPendingFreeRoundsNotification=!0,i=(i=i.then(function(){this.scope.game.feature&&(!this.scope.game.feature||this.scope.game.feature.active)||this.processFreeRoundsStartDialog(t)}.bind(this))).then(function(){this.scope.game.feature&&(!this.scope.game.feature||this.scope.game.feature.active)||(this.hasPendingFreeRoundsNotification=!1)}.bind(this))))):(i=(i=(i=(i=(i=(i=i.then(this.presentation.createAnimationTimeline.bind(this.presentation,"beforeStartUp",0,!1,!0,null))).then(this.processFreeRoundsEndDialog.bind(this,t))).then(this.processFreeRoundsStartDialog.bind(this,t))).then(function(){this.playerHaveFreeRounds&&(this.playerHaveFreeRounds=!1)}.bind(this))).then(this.startGame.bind(this,t))).then(function(){this.game.getParameterValue("funModeCheck")&&this.scope.game.playMode===sna.service.tripleBellsProvider.playModes.FUN&&this.funModeDialogTimeout()}.bind(this)),this.showBaseGameOnJackpotInactive()),i=(i=i.then(this.gameInitBeforeSimpleMessages.bind(this))).then(this.handleSimpleMessages.bind(this)),i=(i=this.isVisibleSuperStake()?i.then(this.setDefaultGameType.bind(this)):i).then(this.onGameSetupCompleted.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setDefaultGameType=function(){var e;this.scope.game.freeRounds.active?this.updateGameType():this.scope.game.ssActive||(e=this.game.getGameTypeIndexByBetMode(this.game.getDefaultBmodeValue()),this.game.setActiveGameTypeIndex(e||0))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.showBaseGameOnJackpotInactive=function(){this.checkJackpot()&&!this.jackpotVisible()&&this.showBaseGame()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onGameSetupCompleted=function(){this.gameSetupCompleted=!0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processIntro=function(e){var t=this.q.when(!0);return t=!this.checkJackpot()||this.jackpotVisible()||this.game.getParameterValue("jackpotIntroSkipDisabled")?t.then(this.showIntro.bind(this,e)):t.then(this.skipIntro.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processSpinToWinIntro=function(e){var t=this.scope.game.spinToWinEnabled,i=this.game.getGameSettingsProperty("skipSpinToWinDialog");if(t&&!i)return this.spinToWinIntroDeferred=this.q.defer(),this.spinToWinIntroPromise=this.spinToWinIntroDeferred.promise,this.updateWrapperModel({general:{templatePopup:{type:"SpinToWinIntro",data:{action_ok:function(e){this.game.setGameSettingsProperty("skipSpinToWinDialog",e),this.spinToWinIntroDeferred.resolve(!0)}.bind(this)}}}}),this.spinToWinIntroPromise.then(this.handleSpinToWinIntroCheckboxState.bind(this)).then(function(){this.scope.game.freeRounds.start||this.onSpinToWinIntroCompleted()}.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleSpinToWinIntroCheckboxState=function(){if(this.game.getGameSettingsProperty("skipSpinToWinDialog"))return this.communication.saveGameSettings()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onSpinToWinIntroCompleted=function(){var e=this.scope.game.restoreData&&this.scope.game.restoreData.previousOutcome&&this.scope.game.restoreData.previousOutcome.features&&this.scope.game.restoreData.previousOutcome.features.freespins&&this.scope.game.restoreData.previousOutcome.features.freespins.active;(!this.game.gameStateRestored()||this.game.gameStateRestored()&&e)&&this.enableInterface()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processWrapperAdditionSection=function(e){this.isAdditionSectionVisibleOnGameStart()&&(this.updateWrapperAdditionSection(!0),this.toggleAdditionSection())},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isAdditionSectionVisibleOnGameStart=function(){return this.isGrandJackpot()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.gameInitBeforeSimpleMessages=function(){return this.q.when(!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.skipIntro=function(){this.showBaseGame(),this.showWrapperAndSetInitialWrapperState()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleSuperStakeReplay=function(){var e,t=this.q.when(!0);return sna.service.tripleBellsProvider.playModes.REPLAY!=this.scope.game.playMode||(e=this.game.getActiveGameType())&&e.bmode==this.game.getSuperStakeBmodeValue()&&(t=t.then(this.activateSuperStake.bind(this,this.presentation.getById("superStakeBtnPlus"),!1,!0))),t},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.funModeDialogTimeout=function(){this.funModeDialog=!1;var e=12e4;this.game.getParameterValue("funModeCheckInterval")&&(e=1e3*this.game.getParameterValue("funModeCheckInterval")),setTimeout(function(){this.funModeDialog=!0}.bind(this),e)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.restoreFreeRounds=function(e){var t=this.scope.game.freeRounds;t&&t.total!==this.scope.game.freeRounds.left&&this.enableFreeRounds()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.restoreReelsPresentation=function(e){this.updateReelsPresentation()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.restoreLastResult=function(e){this.scope.lastResult=e.response},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.restoreOutcome=function(e){this.restoreLastResult(e),this.setSpinResult({outcome:this.scope.game.restoreData.previousOutcome,gambleOutcome:this.scope.game.restoreData.gambleOutcome}),this.restoreReelsPresentation()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setFeatureOnRestore=function(e){return{start:!0,name:"fs",active:!0,restored:!0}},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.restoreGame=function(e){this.restoreOutcome(e);var t=this.scope.game.restoreData.previousOutcome,i=this.scope.layout.has(sna.service.ENVIRONMENT_MOBILE);this.updateWrapperModel({elements:{BUTTON_SPIN:{visible:!i,enabled:!1}}});var n=this.q.when(!0);this.isFreeSpinsRestore()?(this.presentation.createAnimationTimeline("fsRestoreAsync",0,!1,!0,null),n=n.then(this.restoreFeature.bind(this,t.features.freespins)),this.gambleAllowed=!1,this.winNotCollected=!0):(t&&t.features&&(t.features.freespins&&t.features.freespins.start&&(this.scope.game.feature=this.setFeatureOnRestore(t)),t.features.freespinsGamble&&(t.features.freespinsGamble.restored=!0,this.scope.game.feature=t.features.freespinsGamble)),this.winNotCollected=this.scope.lastResult.outcome.hasWins,this.scope.game.restoreData.gambleOutcome&&(this.gambleAllowed=this.scope.game.restoreData.gambleOutcome.canGamble,this.winNotCollected||(this.winNotCollected=0<this.scope.game.restoreData.gambleOutcome.gmblstep))),t&&t.features&&t.features.freespins&&!t.features.freespins.start&&(n=n.then(this.showFeatureRestoredDialog.bind(this,t.features.freespins)));var s=e.restoreData,i=s.gambleRestore,t=s.gambleStarted,s=s.gambleActive;return this.gambleAllowed=this.gambleAllowed&&s,this.gameRestored=!0,n=(n=(n=(n=(n=this.disableUIOnFeatureActiveCondition()?n.then(this.updateWrapperButtonsState.bind(this,"DISABLED")):n).then(this.setGameType.bind(this,null,this.game.getActiveGameTypeIndex()))).then(this.triggerEvent.bind(this,sna.service.tripleBellsProvider.events.GAME_RESTORED))).then(this.checkBigWinAssets.bind(this))).then(this.presentation.createAnimationTimeline.bind(this.presentation,"$gameRestore",0,!1,!0,null)),n=(n=!this.gambleFeatureEnabled&&s?(n=n.then(this.collectGambleFeature.bind(this))).then(this.processWinResult.bind(this)):!t&&s?(n=(n=n.then(this.createTimerPromise.bind(this,1))).then(this.processFirstRoundGambleRestore.bind(this))).then(this.processWinResult.bind(this)):s||!s&&i?(this.autoPlayGamble=!0,this.scope.game.isRespinActive=!1,n.then(this.initGambleFeatureRestore.bind(this,e))):(n=n.then(this.beforeWinRestore.bind(this))).then(this.processWinResult.bind(this))).then(this.onGameRestoreCompleted.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.disableUIOnFeatureActiveCondition=function(){return this.scope.game.feature&&this.scope.game.feature.start},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.beforeWinRestore=function(){return this.createTimerPromise(1)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isFreeSpinsRestore=function(){if(this.scope.game.restoreData){var e=this.scope.game.restoreData.previousOutcome;return e&&e.features&&e.features.freespins&&!e.features.freespins.start&&!e.fsBought}return!1},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onGameRestoreCompleted=function(e){return this.gameSetupCompleted=!0,this.q.when(!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.showFeatureRestoredDialog=function(e){var t,i=this.q.when(!0);return i=(i=this.game.getParameterValue("waitForButtonClickedToRestore")&&0<this.restoreCounter()?(this.waitForUserConfirmation(e.name+"Restore"),(i=i.then(this.processRestoreDialog.bind(this,e))).then(this.waitForRestoreConfirmation.bind(this,e))):(t=void 0!==(t=this.game.getParameterValue("fsRestoreDelay"))?t:0<e.left?3:.5,i.then(this.createTimerPromise.bind(this,t)))).then(this.processRestoreDialogFinished.bind(this,e))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processRestoreDialog=function(e){return this.presentation.createAnimationTimeline(e.name+"RestoreDialog")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.waitForRestoreConfirmation=function(e){return this.confirmPromises[e.name+"Restore"].promise},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processRestoreDialogFinished=function(e){return this.playAfterFeatureStartAnimation(e).then(this.afterFeatureStartAnimationFinished.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processFirstRoundGambleRestore=function(){this.presentation.getById(this.getSpinButtonId()).enable()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.initGambleFeatureRestore=function(e){return this.q.when(!0).then(this.restoreGambleFeature.bind(this,e))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.restoreGambleFeature=function(e){this.gambleFeatureOutcome=e.restoreData.gambleOutcome;var e=this.q.when(!0);return e=(e=(e=e.then(this.disableGambleOptions.bind(this))).then(this.presentation.createAnimationTimeline.bind(this.presentation,"gambleFeatureRestore",0,!1,!0,null))).then(this._afterWinPresentation.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.startGame=function(){var e=this.q.when(!0);return e=(e=(e=e.then(this.triggerEvent.bind(this,sna.service.tripleBellsProvider.events.GAME_STARTED))).then(this.presentation.createAnimationTimeline.bind(this.presentation,"switchOff",0,!1,!0,null))).then(this.presentation.createAnimationTimeline.bind(this.presentation,"startUpInit",0,!1,!0,null)),e=(e=(e=(e=this.scope.game.playMode!==sna.service.tripleBellsProvider.playModes.REPLAY?e.then(this.presentation.createAnimationTimeline.bind(this.presentation,"startUp",0,!1,!0,null)):e).then(this.presentation.createAnimationTimeline.bind(this.presentation,"switchOn",0,!1,!0,null))).then(this.setGameType.bind(this,null,this.game.getActiveGameTypeIndex()))).then(this.triggerEvent.bind(this,sna.service.tripleBellsProvider.events.AFTER_GAME_STARTED))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.toggleBetMode=function(e){var t=this.game.getActiveGameTypeIndex();if(this.scope.game.gameTypes.length-1==t){if(this.setGameType(e,t=0),this.isVisibleSuperStake())return this.deactivateSuperStake(this.presentation.getById("superStakeBtnMinus"),!1)}else t++;return this.scope.game.gameTypes.length-1==t&&(this.setGameType(e,t),this.isVisibleSuperStake())?this.activateSuperStake(this.presentation.getById("superStakeBtnMinus"),!1):this.setGameType(e,t)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setGameType=function(e,t,i){var n=this.q.when(!0);if(!this.scope.game.gameTypes[parseInt(t)])return n;if(this.game.getActiveGameTypeIndex()==t)return n;var s=this.scope.game.freeRounds;if((this.spinInProgress||!this.winSumDone||s&&s.active)&&!i)return n;this.game.setActiveGameType(t),this.enableAutoplayUkgc(),this.scope.game.isInMode(sna.model.slot.MODE_WIN_INDIVIDUAL)&&(this.presentation.createAnimationTimeline("switchOn",0,!1,!0,null),this.scope.game.mode(sna.model.slot.MODE_IDLE));t=this.presentation.animationCache,n=(n=(n=t.startUp&&t.startUp.length?n.then(this.cancelStartUpAnimation.bind(this)):n).then(this.updateGameType.bind(this))).then(this.updateWrapperBetValue.bind(this));return n=!this.scope.game.freeRounds||!this.scope.game.freeRounds.active?n.then(this.updateWrapperBetButtons.bind(this)):n},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateGameType=function(){var e=this.q.when(!0);return e=(e=(e=e.then(this.triggerEvent.bind(this,sna.service.tripleBellsProvider.events.GAME_TYPE_UPDATED))).then(this.presentation.createAnimationTimeline.bind(this.presentation,sna.service.tripleBellsProvider.events.GAME_TYPE_UPDATED,0,!1,!0,null))).then(this.autoUpdatePresentation.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.createFastWinFullStopAdditionalConfig=function(){},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.startOrResumeReplay=function(e){return this.replayInProgress?this.resumeReplay(e):this.startReplay(e)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.startReplay=function(e){this.replayInProgress=!0;var t=this.q.when(!0);return t=(t=(t=(t=(t=(t=(t=t.then(this.resetReplay.bind(this))).then(function(){var e=this.scope.game.freeRounds;if(e&&Number.isInteger(e.available)&&!this.freeRoundsPostponed)return this.enableFreeRounds()}.bind(this))).then(this.autoUpdatePresentation.bind(this))).then(this.presentation.createAnimationTimeline.bind(this.presentation,"initReplay",0,!1,!0,null))).then(this.presentation.createAnimationTimeline.bind(this.presentation,"startReplay",.3,!1,!0,null))).then(function(){return this.scope.game.replay.isSpinReplay?this.spin(this.presentation.getById(this.getSpinButtonId()),!1):(this.scope.lastResult=this.communication.processSpinResult(this.scope.game.replay.response),this.game.spinOutcome(this.scope.lastResult.outcome),this.communication.commLogIndex++,this.scope.lastResult.outcome.features&&this.scope.lastResult.outcome.features.freespins&&(this.scope.game.feature=this.scope.lastResult.outcome.features.freespins),this.customInitialBuyBonusReplayRoundSetup(this.scope.game.replay.response),this.processWinResult())}.bind(this))).then(function(){return this.replayInProgress=!1,this.presentation.createAnimationTimeline("endReplay",0,!1,!0,null)}.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.customInitialBuyBonusReplayRoundSetup=function(){},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.resumeReplay=function(e){var t=this.q.when(!0);return t=(t=t.then(this.resumeRootTimeline.bind(this))).then(this.presentation.createAnimationTimeline.bind(this.presentation,"resumeReplay",0,!1,!0,null))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.resumeRootTimeline=function(e){this.rootTimeline&&this.rootTimeline.resume()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.pauseReplay=function(e){var t=this.q.when(!0);return t=(t=t.then(this.presentation.createAnimationTimeline.bind(this.presentation,"pauseReplay",0,!1,!0,null))).then(this.pauseRootTimeline.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.pauseRootTimeline=function(e){this.rootTimeline=TimelineLite.exportRoot(),this.rootTimeline.pause()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.changeReplay=function(e){var t=this.q.when(!0);return this.game.resetSimpleMessage(),void 0===this.freeRoundsPostponed&&(this.freeRoundsPostponed=this.returnIf(this,"scope.game.replay.freeRounds.postponed")),t=(t=(t=(t=(t=(t=(t=(t=t.then(this.setNewReplay.bind(this,e))).then(this.resetReplay.bind(this))).then(this.updateGameType.bind(this))).then(this.updateMaxBetButton.bind(this))).then(function(){var e=this.game.getActiveGameType();if(e&&e.bmode==this.game.getSuperStakeBmodeValue()){if(!this.superStakeActive){var t=this.presentation.getById("superStakeBtnPlus");return this.sound.playSoundOnce("ActivateSuperStakeSound"),this.activateSuperStake(t)}this.setSuperStakeModel(!0)}else if(e&&(1==e.bmode||e.bmode!=this.game.getSuperStakeBmodeValue())){if(this.superStakeActive){e=this.presentation.getById("superStakeBtnMinus");return this.sound.playSoundOnce("DeactivateSuperStakeSound"),this.deactivateSuperStake(e,!0)}this.setSuperStakeModel(!1)}return this.q.when(!0)}.bind(this))).then(this.presentation.createAnimationTimeline.bind(this.presentation,"replayChanged",0,!1,!0,null))).then(this.showEmptyReplayRoundDialog.bind(this))).then(function(){var e=this.scope.game.replay;if(e&&e.jackpot)return this.scope.game.jackpot=e.jackpot,this.triggerEvent(sna.service.tripleBellsProvider.events.JACKPOT_UPDATED)}.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.showEmptyReplayRoundDialog=function(){this.scope.game.replay.isEmptyResponse&&this.handleWrapperDialog("emptyReplayRoundMessage")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.showPrevReplay=function(e){return this.replayIsPrev=!0,e.disable(),this.changeReplay(!0).then(function(){this.scope.game.replay.prevGameRound&&e.enable()}.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.showNextReplay=function(e){return this.replayIsPrev=!1,e.disable(),this.changeReplay().then(function(){this.scope.game.replay.nextGameRound&&e.enable()}.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setNewReplay=function(e){var t=e?this.scope.game.replay.prevGameRound:this.scope.game.replay.nextGameRound;this.replayDirection=e?"prev":"next";var i=this.communication.isReplayCached(t),n=this.q.when(!0),n=(n=(n=!i?n.then(this.presentation.createAnimationTimeline.bind(this.presentation,"showLoadingScreen",0,!1,!0,null)):n).then(this.communication.getGameRoundReplay.bind(this.communication,t,e))).then(this.game.setReplay.bind(this.game));return n=!i?n.then(this.presentation.createAnimationTimeline.bind(this.presentation,"hideLoadingScreen",0,!1,!0,null)):n},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.resetReplay=function(){return this.winNotCollected=!1,this.hasNextGambleReplay=!1,this.communication.resetReplay(),this.game.resetReplay(),this.stopWinIndividualAnimation(),this.updateReelsPresentation(),this.gambleFeatureEnabled=this.scope.game.replay.gambleFeatureEnabled,this.triggerEvent("resetReplay")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateReelsPresentation=function(){this.triggerEvent(sna.service.tripleBellsProvider.events.PREPARE_OUTCOME_SYMBOLS);var e=this.presentation.getById("reels");if(e)for(var t=0;t<e.reels.length;t++)e.reels[t].prepareOutcomeSymbols(!1),-1*e.reels[t].outcomeSymbols[0].y<e.reels[t].outcomeSymbols.length*e.reels[t].symbolDistance&&e.reels[t].symbolsContainer.setY(0),e.reels[t].enabled||e.reels[t].disableSymbols()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setSpinAndMenuDraggableState=function(e){var t,i;this.presentation.main.environment.is(sna.service.ENVIRONMENT_MOBILE)&&this.slidableTouch&&(t=this.presentation.getById(this.getSpinButtonContainer()),i=this.presentation.getById(this.getMenuButtonContainer()),t.draggable=e="true"===e,i.draggable=e)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.showUICallback=function(){return function(){this.presentation.createAnimationTimeline("forceShowUI",0,!1,!0,null)}.bind(this)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getStopButtonTextures=function(){return this.scope.game.disableSlamStop?["btn_spin_normal.png","btn_spin_hover.png","btn_spin_down.png","btn_spin_disabled.png"]:["btn_stopSpin_normal.png","btn_stopSpin_hover.png","btn_stopSpin_down.png","btn_stopSpin_disabled.png"]},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onFastStopClicked=function(e){return this.sound.sounds.ButtonReelStop&&this.sound.playSoundOnce("ButtonReelStop"),this.scope.game.disableSlamStop&&this.scope.game.disableSlamStopConfiguration?void 0:this.fastStop(e)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.createFastStopCallback=function(){return function(){return this.scope.game.disableSlamStop?function(){}:this.fastStop()}.bind(this)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.fastStop=function(e){if(!this.spinInProgress)return this.q.when(!0);if(this.removeGlobalPressCallback(this.fastStopCallback),this.touchAnywhereEnabled||this.removeGlobalPressCallback(this.touchAnywhereCallback),this.scope.game.mode(sna.model.slot.MODE_FAST_STOP),this.disableSpinStopButton(),this.scope.config.iface.enableEarlyReelStop&&this.earlyReelStopEnabled)this.earlyReelStopTriggered=!0;else if(this.spinInProgress)return this.fastSpinStopClicked=!0,this.presentation.cancelAnimation("spinStop"),this.shouldCancelAnimationSpinificationEndOnFastStop&&this.presentation.cancelAnimation("spinificationEnd"),!0===e?this.presentation.createAnimationTimeline("fastSpinStop",0,!1,!0):this.presentation.createAnimationTimeline("fastSpinStop",0,!1,!0).then(this.processWinResult.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getWinTicker=function(e){e=e?this.game.getBigWinIndexForValue(e):this.scope.game.bigWinIndex;return this.getWinTickerForIndex(e)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getWinTickerForIndex=function(e){if(this.isUKGC()&&this.game.isWinLessThanBet())return"";var t=this.presentation.scope.translations.WINNER_NEW_UI,i=this.presentation.scope.translations.BIG_WINNER_TICKER,n=this.presentation.scope.translations.MEGA_WINNER_TICKER,s=this.presentation.scope.translations.INSANE_WINNER,r=this.presentation.scope.translations.INSANE_WINNER,o=t;switch(e){case 0:o=i;break;case 1:o=n;break;case 2:o=s;break;case 3:o=r}return o},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.spin=function(e,t){if(this.buyFeatureActivated=!1,this.gameRestored=!1,this.game.getParameterValue("dontCancelAnimationWinSumDoneAsyncOnSpin")||this.presentation.cancelAnimation("winSumDoneAsync",!0),this.winIndividualDisabled=!1,this.fastSpinStopActive=!1,this.reelStopSoundPlayed=!1,this.gambleCompleted=!1,delete this.insufficientFundsMessage,this.presentation.isAnimationRunning("jackpotWon")||this.presentation.isAnimationRunning("jackpotWonOnOtherMachine"))return this.closeJackpotNotification();if(this.scope.game.freeRounds&&this.scope.game.freeRounds.end&&this.scope.game.freeRounds.active&&!this.scope.game.feature)return this.winInProgress&&!this.winSumDone?this.fastWinFullStopCallback():this.handleGambleCollect();if(!(this.getIsDialogAutoplayOpened()||this.buyFeatureDialogOpened||this.betSettingsOpened)){n=(n=(n=this.q.when(!0)).then(function(){this.updateWrapperModel({elements:{BUTTON_SUPERSTAKE:{enabled:!1}}})}.bind(this))).then(this.onSpinStart.bind(this));var i=this.scope.game.feature&&this.scope.game.feature.active;if(this.hasPendingFreeRoundsNotification&&(!this.scope.game.feature||this.scope.game.feature&&!this.scope.game.feature.active))return n;if(this.simpleMessageActive)return n;this.presentation.scope.layout.has(sna.service.ENVIRONMENT_DESKTOP)||(this.scope.game.autoplay.start?(this.scope.game.autoplay.start=!1,n=(n=n.then(this.createTimerPromise.bind(this,1))).then(this.addGlobalPressCallback.bind(this,this.touchAnywhereCallback))):this.addGlobalPressCallback(this.touchAnywhereCallback),i&&this.isFeatureSpinAuto()&&!this.game.getParameterValue("dontRemoveTouchAnywhereOnFeature")&&this.removeGlobalPressCallback(this.touchAnywhereCallback)),this.hideMiniPaytable();var n=this.q.when(!0);if(this.shouldFastWinStopSpinMethod())return this.fastWinFullStopCallback(),this.touchAnywhereEnabled||this.removeGlobalPressCallback(this.touchAnywhereCallback),n;if(this.spinInProgress)return n;if(!this.isGambleFeatureOpen()&&this.shouldPromptGambleDialog())return n;if(!this.funModeDialog||this.scope.game.feature&&this.scope.game.feature.active||(this.playingInFunMode(),n=n.then(this.waitForUserConfirmation.bind(this,"funMode"))),!(this.scope.game.feature||this.scope.lastResult&&this.scope.lastResult.outcome.hasRespin)&&this.game.hasPendingFreeRoundsNotification()){if(this.scope.game.autoplay.active&&this.stopAutoplay(),!this.isReplay())return this.handleGambleCollect();this.handleGambleCollect()}var s=Date.now(),i=this.game.getParameterValue("spinClickTimeout")||0;if(s-this.requestStartTs<i)return n;if(this.requestStartTs=s,this.spinInProgress=!0,this.activeTotalWin=0,this.isRoundComplete=!1,this.showGambleButtons=!1,this.reelStopSoundPlayed=!1,this.presentation.main.environment.is(sna.service.ENVIRONMENT_MOBILE)){this.isSpinButtonMenuOpened()&&this.hideSpinButtonMenu(),this.animateAutoplayProgress&&this.animateAutoplayProgress.reject(),this.presentation.cancelAnimation("animateAutoplayProgress"),this.presentation.createAnimationTimeline("hideAutoplayProgress",0,!1,!0,null);var r=this.presentation.getById("autoplayStartBtn");if(this.startAutoplayMobile&&"released"!=r.action)return this.startAutoplayMobile=!1,this.spinInProgress=!1,n}r=this.presentation.animationCache;return n=(n=(n=(n=r.startUp&&r.startUp.length?(n=n.then(this.cancelStartUpAnimation.bind(this))).then(this.updateGameType.bind(this)):n).then(this.presentation.createAnimationTimeline.bind(this.presentation,"switchOn",0,!1,!0,null))).then(this.spinSlotInterface.bind(this,e,t))).then(function(){if(!this.touchAnywhereEnabled)return this.removeGlobalPressCallback(this.touchAnywhereCallback)}.bind(this))}},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.hideMiniPaytable=function(){this.miniPaytable&&this.miniPaytable.forEach(function(e){e.visible=!1},this)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.preventFastWinStop=function(){return!1},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.shouldFastWinStopSpinMethod=function(){return 0==this.winSumDone},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onSpinStart=function(){return this.q.when(!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.spinSlotInterface=function(e,t){this.lastPlayedOnReelSetIndex=-1,this.multiplierLandingSoundIndex=-1,this.scatterLandingSoundIndex0=-1,this.scatterLandingSoundIndex1=-1,this.scatterLandingSoundIndex2=-1,this.scatterLandingSoundIndex3=-1,this.activeReelIndex=0,this.winInProgress&&!this.cascadeActive&&this.fastWinFullStopCallback(),this.blockSpinInterface(),this.cancelIdleAnimations();var i=this.presentation.getById(this.getSettingsPagesPanelId());if(i&&i.hide(),this.presentation.cancelAnimation("spinStartAsync",!0),void 0===t&&(t=!0),this.shouldHandleAutoplayLimit())return this.presentation.createAnimationTimeline("showAutoplayLimitDialog",0,!1,!0),this.stopAutoplay(),this.restoreSpinInterface(),this.spinInProgress=!1,void this.enableInterface();this.touchAnywhereEnabled&&this.isFeatureSpinAuto()&&(this.isDialogOpened=!1),this.spinStartTime=(new Date).getTime();i=this.scope.game.autoplay;i.disabled=!0,this.gambleAllowed=i.left<=1,this.presentation.prerenderIfAssetsAvailable(this.scope.config.iface.prerenderAssetPackCount),log(this.name,"spin",sna.log.DEBUG,"Spin button pressed");t=this.scope.lastResult,i=this.q.when(!0);return this.winInProgress&&t&&t.outcome.hasWins&&(this.winInProgress=!1,i=(i=i.then(function(){this.q.all([this.presentation.cancelAnimation.bind(this.presentation,"winFull",!0),this.presentation.cancelAnimation.bind(this.presentation,"winSum",!0),this.presentation.cancelAnimation.bind(this.presentation,"loseFull",!0),this.presentation.cancelAnimation.bind(this.presentation,"bigWin",!0)])}.bind(this))).then(this.presentation.createAnimationTimeline.bind(this.presentation,"fastWinStop",0,!1,!0))),i=(i=i.then(this.stopRunningAnimations.bind(this))).then(function(){return!this.winNotCollected||this.scope.game.isRespinActive||"REPLAY"==this.scope.game.playMode||this.isMaxWinReached()||(this.handleGambleCollect(),this.updateBalance(!1),0!=this.activeTotalWin&&(this.activeTotalWin=0)),this.q.when(!0)}.bind(this)),this.scope.game.isRespinActive&&(!this.scope.game.isRespinActive||this.game.getParameterValue("asyncCascade"))||(i=i.then(this.playStartAnimation.bind(this))),i=(i=!this.scope.game.isRespinActive?i.then(this.handleSimpleMessages.bind(this,!0)):i).then(this.handlePlaceBetBalance.bind(this)),i=(i=0<this.cheatStack.length&&0===Object.keys(this.returnIf(this.communication,"respinResponse")).length?i.then(function(){this.playCheatStack(null,this.cheatStack.shift())}.bind(this)):i).then(this.sendRequest.bind(this)),i=!this.scope.game.isRespinActive?i.then(this.processWrapperResultShown.bind(this)):i},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateFsCounterOnOutcome=function(){var e=!this.scope.game.isRespinActive&&!this.scope.game.wasRespinActive,t=this.scope.game.isRespinActive&&!this.scope.game.wasRespinActive;return this.game.isInFreeSpins()&&(e||t)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateFsCounterAfterSpinStop=function(){var e=this.scope.game.feature;if(this.updateFsCounterOnOutcome()&&e&&!e.retrigger)return this.updateWrapperFreeSpinsCounter()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.stopRunningAnimations=function(){if(this.presentation.createAnimationTimeline("spinStartAsync",0,!1,!0),this.winIndividualActive)return this.haltWinIndividualAnimation()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handlePlaceBetBalance=function(){this.game.spin(!1)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getTitleRules=function(){return this.presentation.scope.translations.TITLE_RULES},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getGameName=function(){var e=this.game.getParameterValue("gameName"),t=["OF"];return this.game.getParameterValue("capitalizeFirstLetters")&&(e=e.split(" ").map(function(e){return-1<t.indexOf(e)?e.toLowerCase():e[0].toUpperCase()+e.slice(1).toLowerCase()},this).join(" ")),this.scope.game.forceSingleGame?e.replace(" QUATTRO",""):e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setupRTP=function(){if(this.scope.game.rtp){var i=this.scope.game.rtp+"%",n=/\d{0,2}(\.|\,)\d{0,2}\s?\%/,e=Object.keys(this.scope.translations),t=this.game.getParameterValue("rtpReplacementExcludeKeys");if(t&&Array.isArray(t))for(var s=0;s<t.length;s++)-1!==e.indexOf(t[s])&&e.splice(e.indexOf(t[s]),1);e.forEach(function(e,t){-1!=this.scope.translations[e].indexOf("<RTPplaceholder>")?this.scope.translations[e]=this.scope.translations[e].replace("<RTPplaceholder>",i):n.test(this.scope.translations[e])&&(this.scope.translations[e]=this.scope.translations[e].replace(n,i))}.bind(this)),this.setGameRulesUrl()}},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getDownloadableGameRueles=function(){var e=this.scope.game.language.split("_")[0],t=this.scope.game.rtp||"",i=this.scope.config.parameters;if(i.overridePdfDownload){var n=i.gameCode,s=i.supportedLanguages;s&&-1!=s.indexOf(this.scope.game.language)?-1<["el_GR","da_DK","ci_CO"].indexOf(this.scope.game.language)&&(e="ci_CO"==this.scope.game.language?"ES":this.scope.game.language.split("_")[1]):e="en";for(var r=(i.overrideGameRulesName||i.gameName).toLowerCase().split(" "),o=0;o<r.length;o++)r[o]=r[o].charAt(0).toUpperCase()+r[o].substring(1);return(n?n+"_":"")+(r=r.join("_"))+"_"+e.toUpperCase()+"_DL_Game_Rules_"+t.replace(".","_")+".pdf"||""}if(this.game.getParameterValue("downloadableGameRules")){e=this.game.getParameterValue("downloadableGameRules")[e];return e&&e[t]?e[t]:this.game.getParameterValue("downloadableGameRules").default[t]}if(this.game.getParameterValue("useGameRulesUrlFromParams")){t=this.scope.gameRules.split("/");return t[t.length-1]}return""},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleGambleCollect=function(){var e=this.presentation.scope.layout.has(sna.presentation.MINI_LAYOUT);return(this.gambleFeatureEnabled||e)&&this.winNotCollected&&!this.scope.game.feature&&(this.collectGambleFeature(),this.scope.game.autoplay.active&&this.collectPromise?this.handleGambleCollectPromise=this.collectPromise.then(this.updateBalance.bind(this)).then(this.createTimerPromise.bind(this,.5)):this.handleGambleCollectPromise=this.collectPromise),this.q.when(!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isGambleFeatureOpen=function(){return this.gambleFeatureOpened},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.shouldHandleAutoplayLimit=function(){this.game.getParameterValue("markets");var e=!1,t=this.scope.game.autoplay;return e=t.active&&t.totalBetToGambleThresholdActive?t.totalBetToGamble+this.game.getTotalBetInCash()>t.totalBetToGambleThreshold:e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getRequriedBigWinAssets=function(e){this.presentation.scope.config.parameters.bigWinValues;var t=this.presentation.scope.config.parameters.bigWinAssetPackPrefix;if(t){for(var i=[],n=0;n<=this.scope.game.bigWinIndex;n++)i.push(this.presentation.loadGameModePresentation(t+n));return this.q.all(i)}},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processWin=function(){this.activeWinLineIndex=0,this.game.getParameterValue("customSpinInProgress")||this.game.getParameterValue("prolongedSpinInProgress")||(this.spinInProgress=!1);var e=!1;!(e=this.presentation.getById(sna.service.slot.REELS_ID)?this.presentation.getById(sna.service.slot.REELS_ID).scope.config.earlyEnableSpin:e)&&this.additionalEarlyEnableSpinCondition()&&this.earlyEnableSpinInterface(!1);var e=this.q.when(!0);return e=(e=(e=e.then(this.checkBigWinAssets.bind(this))).then(this.processAfterSpinStop.bind(this))).then(this.processMiniFeatureAndOutcomeAnimation.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.additionalEarlyEnableSpinCondition=function(){return!0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.checkBigWinAssets=function(){var e=(this.scope.lastResult||{}).outcome||{};return this.loadBigWinAssets(e.win||0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.loadBigWinAssets=function(e){var t=this.game.getBigWinIndexForValue(e);if(-1<t){for(var i=this.presentation.scope.config.parameters.bigWinAssetPackPrefix||"bigWin_",n=[],s=0;s<=t;s++)n.push(this.presentation.loadGameModePresentation(i+s));return this.q.all(n)}return this.q.when(!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processMiniFeatureAndOutcomeAnimation=function(){var e=this.q.when(!0);return e=(this.game.getParameterValue("showMiniFeatureAfterWinAnimations")&&!this.game.getParameterValue("showMiniFeatureBeforeWinAnimations")?e:e=e.then(this.processMiniFeature.bind(this,"beforeWin"))).then(this.processOutcomeAnimations.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processMiniFeatureSlotInterface=sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processMiniFeature,sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processMiniFeature=function(e){var t=this.q.when(!0),i=this.scope.lastResult.outcome.miniFeature,e=e||"beforeWin";return i&&(t=(t=(t=this.game.getParameterValue("disableUIOnMiniFeature")&&!this.game.isInFreeSpins()?t.then(this.updateWrapperButtonsState.bind(this,"DISABLED")):t).then(this.handleMiniFeature.bind(this,i,e))).then(this.checkBigWinAssets.bind(this)),this.game.getParameterValue("miniFeatureStatesEnabled")||(t=t.then(this.onMiniFeatureCompleted.bind(this,i)))),t},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.cancelStartUpAnimation=function(){var e=this.q.when(!0);return e=(e=(e=e.then(this.presentation.cancelAnimation.bind(this.presentation,"startUp",!1))).then(this.presentation.createAnimationTimeline.bind(this.presentation,"stopStartUp",0,!1,!0,null))).then(this.sound.stopSound.bind(this.sound,"Startup"))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.playStartAnimation=function(){return this.scope.game.isRespinActive||this.sound.sounds.ButtonReelStart&&this.sound.playSoundOnce("ButtonReelStart"),this.spinAnimationStartTimer=new Date,this.playSpinStartAnimation()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.sendRequest=function(){this.setupFastSpinStopOnScreenClick();var t=null,e=this.q.all([this.roundCompletePromise,this.collectPromise]).then(this.onNewSpinCycleStarted.bind(this)).then(function(){this.spinCycleActive=!0,sna.service.tripleBellsProvider.playModes.REPLAY!==this.scope.game.playMode&&(this.roundCompleteDeferred=this.q.defer(),this.roundCompletePromise=this.roundCompleteDeferred.promise)}.bind(this)).then(this.sendSpinRequest.bind(this)).then(function(e){t=e}.bind(this));return this.q.all([e]).then(function(){return this.winNotCollected=t.outcome.hasWins,this.processSpinResult(t)}.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setupFastSpinStopOnScreenClick=function(){this.game.getParameterValue("fastSpinStopOnSreenClick")&&this.addGlobalPressCallback(this.fastStopCallback)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onNewSpinCycleStarted=function(){return this.q.when(!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.sendSpinRequest=function(){if(this.buyBonusResponse&&this.buyBonusResponse.length){var e=angular.copy(this.buyBonusResponse.shift());return this.q.when(e)}return this.communication.spin(this.getSpinRequestParams())},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.playSpinStartAnimation=function(e){return this.spinStartPromise=this.presentation.createAnimationTimeline("spinStart",0,!1,!0),this.spinStartPromise},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.hideCheatButton=function(){return null==this.scope.game.enableCheats||this.scope.game.enableCheats},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.chooseNextTicker=function(e){var t=e.scope.config,i=t.tickers;if(void 0===this.currentTicker&&(this.currentTicker=0),i){e=i.indexOf("@translate.TAP_ANYWHERE_TICKER");this.scope.game.disableSlamStop&&-1!=e&&i.splice(e,1);e=i.indexOf("@translate.ACTIVATE_TURBO_SPIN_TICKER");this.scope.game.hideFastSpin&&-1!=e&&i.splice(e,1);e=i.indexOf("@translate.SUPERSTAKE_ACTIVATE_SUPERSTAKE_MODE");this.isVisibleSuperStake()||-1==e||i.splice(e,1);e=i.indexOf("@translate.MEGA_SUPERSTAKE_ACTIVATE_SUPERSTAKE_MODE");this.isVisibleSuperStake()||-1==e||i.splice(e,1),this.currentTicker==t.superStakeTickers&&this.superStakeActive&&(this.currentTicker++,this.currentTicker>=i.length&&(this.currentTicker=0));t=i[this.currentTicker],t=this.presentation.parseValue(this,t);return this.currentTicker++,this.currentTicker>=i.length&&(this.currentTicker=0),t}},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getBalanceVisibility=function(){return!this.isPokerStars()||!(this.presentation&&this.presentation.scope&&this.presentation.scope.layout.has("Desktop"))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processSpinResult=function(e){var t;return this.game.getParameterValue("resetFastSpinStopAfterWin")||(this.fastSpinStopClicked=!1),this.scope.game.mode(sna.model.slot.MODE_STOP),this.setSpinResult(e),this.scope.lastResult.status&&this.scope.lastResult.status.code!==sna.service.tripleBellsProvider.CODE_OK&&(((t=this.scope.game.autoplay).active||t.paused)&&this.stopAutoplay(),this.notPokerStars()&&this.scope.lastResult.status.code===sna.service.tripleBellsProvider.CODE_INSUFFICIENT_FUNDS&&this.handleInsufficientFunds()),this.updateBalance(!0),this.onOutcomeSet(),this.scope.game.feature&&(this.scope.game.feature.active&&this.presentation.createAnimationTimeline("featureActiveSpinStart",0,!1,!0),this.gambleAllowed=!1),this.scope.lastResult.gambleOutcome&&(this.gambleAllowed=this.gambleAllowed&&this.scope.lastResult.gambleOutcome.canGamble),this.gambleFeatureOutcome=null,log(this.name,"processSpinResult",sna.log.DEBUG,"Spin completed with response:",e),this.getRequiredAssets(e).then(this.processBeforeSpinStop.bind(this)).then(this.checkMinimumSpinDuration.bind(this)).then(this.presentation.createAnimationTimeline.bind(this.presentation,"spinStopPrepare",0,!1,!0,null)).then(this.enableQuickStop.bind(this)).then(this.checkIfQuickStopPressed.bind(this)).then(this.processSpinStop.bind(this)).then(this.disableSpinStopButton.bind(this)).then(this.processWinResult.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processWinResult=function(){this.removeGlobalPressCallback(this.fastStopCallback);var e=this.q.when(!0),t=this.scope.game.feature;return t&&t.active&&t.retrigger&&this.game.getParameterValue("updateWinAfterFsRetrigger")&&(e=e.then(this.updateFeature.bind(this,t,this.scope.lastResult.outcome,this.scope.lastResult))),e=this.isMaxWinReached()?e.then(this.processMaxWinReached.bind(this)):e.then(this.processWin.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processSpinToWinOutcome=function(e){var t=this.q.when(!0);try{e&&e.studioLink&&(this.pauseGameExecution(!0),this.spinToWinGameActive=!0,t=t.then(this.processSpinToWinStudio.bind(this,e.studioLink)))}catch(e){}return t},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isSpinToWinActive=function(){return void 0!==(((this.scope.lastResult||{}).outcome||{}).spinToWin||{}).studioLink},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processSpinToWinStudio=function(e){return this.spinToWinDeferred=this.q.defer(),this.spinToWinPromise=this.spinToWinDeferred.promise,this.updateWrapperModel({spinToWin:{studioLink:e,onComplete:function(){this.resumeGameExecution(!0),this.spinToWinGameActive=!1,this.requestBalanceUpdate().then(this.finalizeSpinToWin.bind(this))}.bind(this)}}),this.spinToWinPromise},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.requestBalanceUpdate=function(){return this.isReplay()?this.q.when(!0):this.communication.heartbeatRequest({}).then(this.processHeartBeatResponse.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processHeartBeatResponse=function(e){e.game&&(this.communication.processBalance(e),this.processWrapperWalletUpdated(e.outcome))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.finalizeSpinToWin=function(){this.spinToWinDeferred.resolve()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.disableSpinStopButton=function(){this.updateWrapperModel({elements:{BUTTON_SPIN_STOP:{visible:this.stopButton.visible,enabled:!1}}})},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.hideSpinStopButton=function(){this.updateWrapperModel({elements:{BUTTON_SPIN_STOP:{visible:!1,enabled:this.stopButton.enabled}}})},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processMaxWinReached=function(){return this.scope.game.freeRounds&&this.scope.game.freeRounds.active&&this.updateWrapperModel({general:{totalWinFreeRoundsValue:this.scope.game.freeRounds.totalWin.toFixed(this.scope.game.currency.decimals)}}),this.processAfterSpinStop().then(this.onMaxWinReached.bind(this)).then(this.handleSimpleMessages.bind(this)).then(this.stopWinIndividualAnimation.bind(this)).then(this.setSpinInProgress.bind(this,!1)).then(this.processAfterWinPresentation.bind(this)).then(this.processMaxWinFooter.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onMaxWinReached=function(){return this.q.when(!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processMaxWinFooter=function(){return this.q.when(!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setSpinResult=function(e){this.setSpinResponseJackpotData(e),this.setActiveFeature(e),this.game.spinOutcome(e.outcome),this.game.processSpinData(e),this.updateAfterSuperWheel(),this.scope.previousResult=this.scope.lastResult,e.game&&(this.scope.lastResult=e)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateAfterSuperWheel=function(){this.scope.game.superWheelOutcome&&(this.scope.game.balanceCash+=this.scope.game.superWheelOutcome.totalWin,this.scope.game.feature&&(this.scope.game.feature.totalWin+=this.scope.game.superWheelOutcome.totalWin,this.scope.game.feature.grandTotal+=this.scope.game.superWheelOutcome.totalWin))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setSpinResponseJackpotData=function(e){try{this.processJackpotData(this.communication.getJackpotData(e)),this.setCurrentUserJackpotNotification(e)}catch(e){}},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setCurrentUserJackpotNotification=function(e){e&&e.outcome&&e.outcome.jackpot&&(this.jackpot.notifications=this.jackpot.notifications||[],this.jackpot.notifications.push(angular.copy(e.outcome.jackpot)))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onOutcomeSet=function(){this.presentation.createAnimationTimeline("outcomeSetAsync",0,!1,!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getMinSpinDurationValue=function(){var e,t=this.scope.game.turboMode,i=this.scope.config.iface;return t?(e=i.minimumSpinDurationTurboSpin,i.minimumSpinDurationsTurboSpin&&(e=i.minimumSpinDurationsTurboSpin[0])):e=i.minimumSpinDuration,e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.checkMinimumSpinDuration=function(){this.presentation.getById("reels");var e=this.scope.game.feature,t=this.getMinSpinDurationValue();if(this.additionalConditionCheckMinimumSpinDuration(t,e)){var i=(new Date).getTime()-this.spinStartTime;if(i<1e3*t){var n=this.q.defer(),e=function(){n.resolve(!0)}.bind(this);return window.setTimeout(e,1e3*t-i),n.promise}return!0}return!0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.additionalConditionCheckMinimumSpinDuration=function(e,t){return e&&(!t||t.start)&&!this.scope.game.wasRespinActive},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.checkIfQuickStopPressed=function(){var e,t=this.q.when(!0);return this.scope.game.disableSlamStop||(e=this.game.getGameSettingsProperty("spinDuration")||this.game.getGameSettingsProperty("SpinDuration"),(this.earlyReelStopTriggered||this.fastSpinStopClicked||this.scope.game.turboMode)&&this.scope.config.iface.minimumSpinDuration&&!e&&(e=this.scope.game.reelStopDuration||0,t=t.then(this.createTimerPromise.bind(this,e)))),t},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isMinimumSpinDurationExpired=function(){var e=(new Date).getTime()-this.spinStartTime;return(1e3*this.scope.config.iface.minimumSpinDurationTurboSpin||0)<e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processAfterSpinStop=function(){return this.presentation.createAnimationTimeline("afterSpinStopAsync",0,!1,!0),this.triggerEvent("afterSpinStop")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processOutcomeAnimations=function(){this.onProcessOutcomeAnimations(),this.presentation.cancelAnimation("fastWinStop",!0),this.presentation.cancelAnimation("fastWinStopAsync",!0);var e=this.q.when(!0);return e=(e=this.scope.game.maxWinReached?(e=e.then(this.beforeMaxWinReachedEvent.bind(this))).then(this.customGameMaxWinReachedEvent.bind(this)):e.then(this.processWinPresentation.bind(this))).then(this.afterWinPresentation.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processWinPresentation=function(){var e=this.q.when(!0);return this.fastWinStopClicked||(0<this.scope.game.autoplay.left&&(this.gambleAllowed=!1),this.updateFooterWin=!0,e=(e=this.shouldHandleWinAnimations()?e.then(this.handleWinAnimations.bind(this)):e).then(this.afterHandleWinAnimations.bind(this)),e=(e=(e=this.miniFeatureAfterWinCondition()?e.then(this.processMiniFeatureAfterWin.bind(this)):e).then(this.processShowGambleButtons.bind(this))).then(this.destroyBigWinGameMode.bind(this))),e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onProcessOutcomeAnimations=function(){return this.triggerEvent("prepareWinLines")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.miniFeatureAfterWinCondition=function(){return this.game.getParameterValue("showMiniFeatureAfterWinAnimations")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.beforeMaxWinReachedEvent=function(){if(!this.game.getParameterValue("showWinBeforeMaxWinReached"))return this.q.when(!0);this.scope.game.totalWin=this.scope.game.maxWinReached;var e=this.q.when(!0);return e=(e=(e=(e=(e=this.shouldHandleWinAnimations()?e.then(this.handleWinAnimations.bind(this)):e).then(this.afterHandleWinAnimations.bind(this))).then(this.processShowGambleButtons.bind(this))).then(this.destroyBigWinGameMode.bind(this))).then(this.setWrapperVisibility.bind(this,!1))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.customGameMaxWinReachedEvent=function(){if(this.scope.game.maxWinReached){var e,t=this.q.when(!0);return this.updateWrapperButtonsState("DISABLED"),this.updateWrapperModel({general:{gameMessage:null}}),t=(t=(t=(t=this.presentation.getById("maxWinText")?(this.setMaxWinReachText(),this.presentation.getById("maxWinReachedBtn").enable(),this.setWrapperVisibility(!this.game.getParameterValue("hideUiOnMaxWinReached")),t.then(this.presentation.createAnimationTimeline.bind(this.presentation,"animateMaxWinReached",0,!1,!0,null))):(e=this.scope.game.ssActive?this.getTotalBet()/(this.game.getParameterValue("superStakeMultiplier")||2):this.getTotalBet(),this.game.getParameterValue("maxWinReachedBaseBetOnly")&&(e=this.getTotalBet()),e=this.scope.translations.MAXIMUM_PRIZE_OVERLAY.replace("!","! \n").replace("{0}",this.scope.game.maxWinReached/e),this.scope.game.maxWinReachedText=e,t.then(this.handleWrapperDialog.bind(this,"maxWinReached")))).then(this.waitForMaxWinReachedDialogToClose.bind(this))).then(this.presentation.createAnimationTimeline.bind(this.presentation,"closeMaxWinReached",0,!1,!0,null))).then(function(){this.setWrapperVisibility(!0),this.updateWrapperButtonsState(this.game.isInFreeSpins()?"FREE_SPINS":"IDLE"),this.updateWrapperGameMessage("WIN",this.scope.game.totalWin)}.bind(this))}return this.q.when(!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.confirmMaxWinReachedRead=function(){this.confirmPromises.maxWinReached&&this.confirmPromises.maxWinReached.resolve()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.waitForMaxWinReachedDialogToClose=function(){return this.isReplay()?this.createTimerPromise(3):this.waitForUserConfirmation("maxWinReached")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setMaxWinReachText=function(){var e=this.presentation.getById("maxWinText"),t=this.scope.game.ssActive?this.getTotalBet()/(this.game.getParameterValue("superStakeMultiplier")||2):this.getTotalBet(),t=this.scope.translations.MAXIMUM_PRIZE_OVERLAY.replace("!","! \n").replace("{0}",this.scope.game.maxWinReached/t);e.setText(t)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getMaxWinReachedCongratulationsText=function(){var e=this.scope.translations.FS_CONGRATULATIONS,t=this.scope.translations.CONGRATULATIONS;return void 0!==e?e:t},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getMaxWinReachedRegularButton=function(){return void 0===this.game.getParameterValue("maxWinReachedClickAnywhereButton")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.shouldHandleWinAnimations=function(){return this.scope.game.totalWin&&!this.isMaxWinReached()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.afterHandleWinAnimations=function(){},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processShowGambleButtons=function(){if(this.scope.game.totalWin)return this.handleShowGambleButtons()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.checkBigWin=function(){return this.game.getParameterValue("staxxGame")?this.game.staxxWin:this.scope.game.totalWin},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleWinAnimations=function(){this.prepareWinCountUp(),this.presentation.createAnimationTimeline("winFullAsync",0,!1,!0),this.game.getParameterValue("cascadeBigWins")?this.scope.game.isBigWin=this.game.isBigWin(this.scope.game.cascadeWin):(e=this.checkBigWin(),this.scope.game.isBigWin=this.game.isBigWin(e));var e=[];return this.additionalWinAnimationCondition(this.scope.lastResult.outcome)&&(e.push(this.playWinFullAnimation()),e.push(this.playLoseFullAnimation())),this.additionalHandleWinCountUpCondition(this.scope.lastResult.outcome)&&e.push(this.handleWinCountUp()),this.q.all(e).then(this.handleWinAnimationsCompleted.bind(this,this.scope.lastResult.outcome))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateFsTotalWinCondition=function(){return!0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleWinAnimationsCompleted=function(e){return this.additionalHandleWinCountUpCondition(e,!0)?this.q.when(!0):this.handleWinCountUp()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.additionalWinAnimationCondition=function(e){return e.wins&&e.wins.length},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.additionalHandleWinCountUpCondition=function(e){return!this.scope.game.isBigWin&&!this.game.getParameterValue("runWinSumAfterWinFull")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.shouldUpdateFooterAfterWin=function(){return this.scope.game.totalWin&&!this.spinInProgress},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.prepareWinCountUp=function(){this.activeCountWin=this.game.getParameterValue("hasCascadeWins")?this.scope.game.cascadeWin:this.scope.game.totalWin,this.activeTotalWin+=this.activeCountWin,this.resetWinCountUpFlags()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.resetWinCountUpFlags=function(){this.scope.game.mode(sna.model.slot.MODE_WIN),this.winInProgress=!0,this.winSumDone=!1,this.fastWinStopClicked=!1,this.addGlobalPressCallback(this.fastWinFullStopCallback)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleWinCountUp=function(){return this.q.when(!0).then(this.playWinSumPrepareAnimation.bind(this)).then(this.playWinSumAnimation.bind(this)).then(this.handleFastWinStopPromise.bind(this)).then(this.handleWinSumDone.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleShowGambleButtons=function(){var e=this.scope.lastResult.gambleOutcome,t=this.gambleFeatureEnabled&&this.gambleAllowed&&!this.autoCollectWins&&(this.userGambleConfirmation||this.game.scope.config.parameters.overrideUserGambleConfirmationDialog);e&&t&&(this.showGambleButtons=!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleFastWinStopPromise=function(e){return this.fastWinStopClicked?(this.fastWinStopClicked=!1,this.fastWinStopPromise):this.q.when(e)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getSpinRequestParams=function(){var e=angular.extend({betpl:this.scope.game.bet},this.game.getActiveGameType());return this.scope.game.ssActive&&(e.betpl=e.betpl/this.game.getSuperStakeMultiplier()),e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.disableBigWinStop=function(){this.removeGlobalPressCallback(this.fastTotalWinFullStopCallback)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.pauseAutoplay=function(e){return this.game.pauseAutoplay(),this.removeGlobalPressCallback(this.touchAnywhereCallback),this.presentation.createAnimationTimeline("autoplayPause",0,!1,!0,null)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.fastWinStopCallback=function(){var e;this.fastWinStopClicked=!0,this.scope.game.mode(sna.model.slot.MODE_FAST_WIN),this.removeGlobalPressCallback(this.fastWinFullStopCallback),this.presentation.cancelAnimation("winSum",!0),this.presentation.cancelAnimation("winFull",!0),this.presentation.cancelAnimation("loseFull",!0),this.presentation.cancelAnimation("bigWin",!0),this.presentation.cancelAnimation("winSumLines",!0),this.createFastWinFullStopAdditionalConfig(),this.isMaxWinReached()||this.preventFastWinStop()||(e=this.presentation.createAnimationTimeline("fastWinStop",0,!1,!0).then(function(){this.winInProgress=!1}.bind(this)),this.game.getParameterValue("fastWinStopSync")&&(this.fastWinStopPromise=e),this.wrapperFastWinStopUiInteraction())},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onBuyFeatureOpened=function(){this.buyFeatureOpen=!0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onBuyFeatureClosed=function(){this.buyFeatureOpen=!1},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.createFastWinFullStopCallback=function(){return this.fastWinStopCallback.bind(this)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.startFeatureSlotInterface=sna.service.tripleBellsProvider.TripleBellsInterface.prototype.startFeature,sna.service.tripleBellsProvider.TripleBellsInterface.prototype.startFeature=function(e){return e.started=!0,this.startFeatureSlotInterface(e).then(function(){(this.isUKGC()||this.game.getParameterValue("stopAutoplayBeforeFreeSpins"))&&this.stopAutoplay()}.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.startAutoplay=function(e){this.game.startAutoplay(this.autoplayNumberOfSpins);var t=this.presentation.getById("stopOnBonusBtn");return this.game.getParameterValue("newUI")&&t&&(this.isUKGC()&&t.setToggleState(!0),this.scope.game.autoplay.stopOnFeature=t.toggleState),GcwGameClient&&GcwGameClient.triggerEvent(gcw.api.GameEventType.AUTOPLAY_ACTIVATE),this.animateAutoplayIsInProgress=!1,this.presentation.createAnimationTimeline("autoplayStart",0,!1,!0,null).then(this.spin.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.startAutoplayFromUI=function(e){this.startAutoplayMobile=!1,this.startAutoplay()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.startOrResumeAutoplay=function(e){if(this.isRoundComplete)return this.game.isInMode(sna.model.slot.MODE_SPIN,sna.model.slot.MODE_STOP,sna.model.slot.MODE_WIN)?(this.game.resumeAutoplay(),this.presentation.createAnimationTimeline("autoplayResume",0,!1,!0,null)):(this.game.isAutoplayPaused()?this.game.resumeAutoplay():this.game.startAutoplay(this.autoplayNumberOfSpins),0===this.game.getAutoplayValue()?(this.game.stopAutoplay(),this.resetAutoplaySpins(),this.restoreSpinInterface(),this.presentation.createAnimationTimeline("autoplayStop",0,!1,!0,null)):this.presentation.createAnimationTimeline("autoplayStart",0,!1,!0,null).then(function(){var e=this.q.when(!0);return this.game.autoplayThresholdTriggered()||this.autoplayJackpotThresholdActive&&this.autoplayJackpotThresholdTriggered?(this.presentation.createAnimationTimeline("showAutoplayLimitDialog",0,!1,!0),this.stopAutoplay(),this.restoreSpinInterface(),this.enableInterface(),this.autoplayJackpotThresholdTriggered=!1):e=e.then(this.spin.bind(this)),e}.bind(this)))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.resetAutoPlaySpinSettings=function(){var e=this.presentation.getById("tglTotalBetToGamble");e&&e.setToggleState(!1);e=this.presentation.getById("totalBetToGambleThresholdText");e&&e.setText("0");e=this.presentation.getById("tglLossLimit");e&&e.setToggleState(!1);e=this.presentation.getById("winDecreaseThresholdValue");e&&e.setText("0");e=this.presentation.getById("tglSingleWin");e&&e.setToggleState(!1);e=this.presentation.getById("winThresholdText");e&&e.setText("0")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.stopAutoplay=function(e){var t,i;this.resetAutoPlaySpinSettings(),this.sound.sounds.ButtonAutoplayStop&&this.sound.playSound("ButtonAutoplayStop"),!this.scope.game.autoplay.winThresholdActive&&this.scope.game.autoplay.left&&(t=this.presentation.getById("SpinButton"),(i=this.presentation.getById("spinContainer"))&&(i.dragging=!1,t.release(),t.action="")),this.presentation.createAnimationTimeline("autoplayStop",0,!1,!0,null),this.game.stopAutoplay(),GcwGameClient&&GcwGameClient.triggerEvent(gcw.api.GameEventType.AUTOPLAY_DEACTIVATE),this.resetAutoplaySpins(),this.resetAutoplayValues(),this.autoUpdatePresentation(),this.game.isInMode(sna.model.slot.MODE_WIN_INDIVIDUAL)||(this.game.isInMode(sna.model.slot.MODE_SPIN,sna.model.slot.MODE_STOP,sna.model.slot.MODE_WIN,sna.model.slot.MODE_FEATURE_CLOSE,sna.model.slot.MODE_FEATURE_PLAY,sna.model.slot.MODE_FEATURE_START,sna.model.slot.MODE_FEATURE_STOP,sna.model.slot.MODE_FEATURE_WAIT)?(this.game.getParameterValue("newUI")&&!this.touchAnywhereEnabled&&this.disableInterface(),(this.game.isInMode(sna.model.slot.MODE_FEATURE_CLOSE,sna.model.slot.MODE_FEATURE_PLAY,sna.model.slot.MODE_FEATURE_START,sna.model.slot.MODE_FEATURE_STOP,sna.model.slot.MODE_FEATURE_WAIT)||this.scope.game.miniFeature)&&this.blockSpinInterface()):this.restoreSpinInterface()),e&&(this.handleGambleStopAutoplay(),this.resetAutoplay())},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onBuyBonusCardClicked=function(e){var t=this.q.when(!0);return this.isDialogOpened=!1,this.setUseSpacebarSpin(!1),t=(t=(t=t.then(this.disableInterface.bind(this))).then(this.communication.updateBetConfiguration.bind(this.communication,this.getSpinRequestParams()))).then(this.communication.activateBuyFeature.bind(this.communication,e,this.getSpinRequestParams()))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleGambleStopAutoplay=function(e){this.scope.game.feature||this.gambleFeatureEnabled&&(this.gambleAllowed=!0,this.showGambleButtons=!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.resetAutoplaySpins=function(){this.game.getParameterValue("markets");this.scope.game.lossLimitSet=!1,this.singleLimitIndex=0;var e=this.presentation.getById("autoplaySelectSpinNumberSettingsUkgc"),t=this.presentation.getById("autoplaySelectSpinNumberSettingsOther");this.scope.game.playMode===sna.service.tripleBellsProvider.playModes.FUN?(this.isTargetMarket("OTHER")?t&&t._update("Infinity"):e&&e._update("Infinity"),this.autoplayNumberOfSpins=1/0):(this.isTargetMarket("OTHER")?t&&t._update(100):e&&e._update(100),this.autoplayNumberOfSpins=100)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.closeSettings=function(){var e=this.game.getParameterValue("markets");this.resetAutoplaySpins(),this.settingsGameRulesOpen=!1;var t=this.q.when(!0);this.resetAutoplayValues(),this.game.getParameterValue("newUI")||!this.isTargetMarket(e.ukgc)||(i=this.presentation.getById("btnAutospinSettings"))&&i.disable(),this.resetAutoPlaySpinSettings();var i=document.getElementById("gamerulesidLandscape");i&&(i.style.display="none");i=document.getElementById("gamerulesidPortrait");i&&(i.style.display="none");i=document.getElementById("gamerulesid");return i&&(i.style.display="none"),t=t.then(this.presentation.createAnimationTimeline.bind(this.presentation,"hideSettingsPanel",0,!1,!0,null)),this.scope.game&&this.scope.game.autoplay&&!this.scope.game.autoplay.active&&(this.scope.game.autoplay.winThresholdActive=!1,this.scope.game.autoplay.winDecreaseThreshold=0,this.scope.game.autoplay.winDecreaseThresholdActive=!1,this.scope.game.autoplay.winThreshold=0,this.singleLimitIndex=0),t=t.then(this.updateGameSettings.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.showHtmlButton=function(){var e=document.getElementById("gamerulesidLandscape");e&&(e.style.display="block");e=document.getElementById("gamerulesidPortrait");e&&(e.style.display="block")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.resetAutoplayValues=function(){this.singleLimitIndex=0,this.returnIf(this,"scope.game.autoplay.winDecreaseThreshold")&&(this.scope.game.autoplay.winDecreaseThreshold=0,this.scope.game.autoplay.winDecreaseThresholdActive=!1),this.returnIf(this,"scope.game.autoplay.winIncreaseThreshold")&&(this.scope.game.autoplay.winIncreaseThreshold=0,this.scope.game.autoplay.winIncreaseThresholdActive=!1),this.returnIf(this,"scope.game.autoplay.winThreshold")&&(this.scope.game.autoplay.winThreshold=0,this.scope.game.autoplay.winThresholdActive=!1),this.returnIf(this,"scope.game.autoplay.totalBetToGambleThreshold")&&(this.scope.game.autoplay.totalBetToGambleThreshold=0,this.scope.game.autoplay.totalBetToGambleThresholdActive=!1)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isPokerStars=function(){return"undefined"!=typeof leanderGMApi?leanderGMApi.gameOptions&&"pokerstars"==leanderGMApi.gameOptions.siteId:this.scope.game.isPokerStars},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.notPokerStars=function(){return!this.isPokerStars()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.shouldShowBtnDownload=function(e){return!this.isPokerStars()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isVisibleinPokerStarsApp=function(e){return this.shouldShowBtnDownload()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.shouldShowRegisterSettingsTab=function(e){return!this.isPokerStars()&&!1!==this.scope.game.bankSettings&&(this.scope.game.playMode===sna.service.tripleBellsProvider.playModes.FUN?"REGISTER"==e:"BANK"==e)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setAutoplayNumberOfSpins=function(e,t){this.autoplayNumberOfSpins=t},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setCoinValue=function(e,t){this.scope.game.bet=t;t=this.game.getParameterValue("markets");this.isTargetMarket(t.ukgc)&&(this.resetAutoplay(),this.autoUpdatePresentation()),this.presentation.scope.layout.has(sna.presentation.MINI_LAYOUT)&&this.updateMaxBetToggle(),this.updateMaxBetButton(),this.enableAutoplayUkgc(),this.triggerMysteryUpdate&&this.triggerEvent(sna.service.tripleBellsProvider.events.MYSTERY_UPDATED),this.presentation.createAnimationTimeline("switchOn",0,!1,!0,null)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setBet=function(e,t,i){var n=this.getCurrentBetIndexFromAllBetsArray(),s=0,s="next"==i?this.getBetByIndexFromAllBetsArray(++n):"prev"==i?this.getBetByIndexFromAllBetsArray(--n):i;this.setDenomValueTotalBet(null,this.getModifiedBetToSet(s)),this.autoUpdatePresentation(),GcwGameClient&&(GcwGameClient.triggerEvent(gcw.api.GameEventType.TOTAL_BET_UPDATE,s),GcwGameClient.wrapperData.prevTotalBet=s),this.stopWinIndividualAnimation(),this.updateWrapperPaytable(),this.updateWrapperBetValue(),this.updateWrapperBetButtons(),this.setBuyFeatureState()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getModifiedBetToSet=function(e){return e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setBuyFeatureState=function(){var e=this.presentation.getById("buyFeatureButton"),t=this.game.getParameterValue("buyFreeSpinsButtons");t&&t.otherButtons||e&&(!this.superWheelActive&&this.canAffordBuyBonus(e)?e.enable():e.disable())},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getCurrentBetIndexFromAllBetsArray=function(){var e=this.getTotalBets(),t=parseFloat(this.getTotalBet()),t=Math.round(100*t)/100;return e.indexOf(t)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getSelectedBetIndexFromAllBetsArray=function(e){var t=this.getTotalBets(),e=Math.round(100*e)/100;return t.indexOf(e)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getBetByIndexFromAllBetsArray=function(e){return this.getTotalBets()[e]},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setDenomValueByCoinValueIndex=function(e){this.scope.game.coinValue=this.game.getCoinValues()[e],this.onDenomValueChanged()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setDenomValueTotalBet=function(e,t){var i=parseFloat(t);isNaN(i)&&log(this.name,"setDenomValueTotalBet",sna.log.DEBUG,"Error in parsing denom value"),this.game.getParameterValue("neki_parametar")?this.scope.game.coinValue=this.game.getCoinValues()[this.getSelectedBetIndexFromAllBetsArray(t)]:this.scope.game.coinValue=Number((i/this.scope.game.bet/this.game.getBetModeModifier()).toFixed(this.scope.game.currency.decimals)),this.onDenomValueChanged()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onDenomValueChanged=function(e,t){this.presentation.scope.layout.has(sna.presentation.MINI_LAYOUT)&&this.updateMaxBetToggle(),this.updateMaxBetButton(),this.enableAutoplayUkgc(),this.presentation.createAnimationTimeline("switchOn",0,!1,!0,null),this.presentation.createAnimationTimeline("betParamChange",0,!1,!0,null),this.onBetChanged()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setDenomValue=function(e,t){t=parseFloat(t);isNaN(t)&&log(this.name,"setDenomValue",sna.log.DEBUG,"Error in parsing denom value"),this.scope.game.coinValue=t,this.presentation.scope.layout.has(sna.presentation.MINI_LAYOUT)&&this.updateMaxBetToggle();t=this.presentation.getById("balanceValue");t&&t.updatePresentation();t=this.presentation.getById("footerBalanceLabel");t&&t.updatePresentation(),this.updateMaxBetButton(),this.enableAutoplayUkgc();t=this.presentation.getById("footerWinLabel");t&&t.setText(this.resetFooterWinLabel()),this.presentation.createAnimationTimeline("switchOn",0,!1,!0,null)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.resetAutoplay=function(){this.presentation.createAnimationTimeline("autoplayStop",0,!1,!0,null);this.game.getParameterValue("markets");this.game.resetAutoplay(),this.setInitialAutoplayStates(),this.resetAutoplaySpins(),this.resetAutoplayValues(),this.game.isInMode(sna.model.slot.MODE_SPIN,sna.model.slot.MODE_STOP)||this.restoreSpinInterface()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.playWinFullAnimation=function(){var e=this.q.when(!0);return(e=!this.isUKGC()||!this.game.isWinLessThanBet()?e.then(this.presentation.createAnimationTimeline.bind(this.presentation,"winAnnouncement",0,!1,!0,null)):e).then(this.presentation.createAnimationTimeline.bind(this.presentation,"winSumReset",0,!1,!0,null)).then(this.runWinFullAnimation.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.runWinFullAnimation=function(){if(!this.fastWinStopClicked)return this.isUKGC()&&this.game.isWinLessThanBet()?this.q.when(!0):this.presentation.createAnimationTimeline("winFull",0,!1,!0,null)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.playWinSumPrepareAnimation=function(){return this.presentation.createAnimationTimeline("winSumPrepare",0,!1,!0,null)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.playWinSumAnimation=function(){if(!this.fastWinStopClicked)return this.presentation.createAnimationTimeline("winSum",0,!1,!0,null)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.playWinFullExplodeAnimation=function(e){if(!this.fastWinStopClicked)return this.winFullExplodePromise=this.presentation.createAnimationTimeline("winFullExplode",0,!1,!0,null),this.winFullExplodePromise},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.gameSpecificButtonsStateChange=function(e){return!0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleWinSumDone=function(){var e=this.q.when(!0);return e=(e=this.game.getParameterValue("fastWinStopDelay")&&this.scope.game.isBigWin&&this.fastWinStopClicked?e.then(this.createTimerPromise.bind(this,this.game.getParameterValue("fastWinStopDelay"))):e).then(function(){return this.removeGlobalPressCallback(this.fastWinFullStopCallback),this.presentation.createAnimationTimeline("winSumDoneAsync",0,!1,!0,null),this.presentation.createAnimationTimeline("winSumDone",0,!1,!0,null).then(this.updateFooterWinPresentation.bind(this))}.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateFooterWinPresentation=function(){this.scope.game.isBigWin&&this.setBigWinActive(!1);var t=this.game.getParameterValue("disableActiveTotalWin")?this.game.getTotalWinInCash():this.activeTotalWin;if(this.game.getParameterValue("showCascadeWinOnly")&&this.scope.game.isRespinActive&&(t=this.getCascadeWin()),this.game.getParameterValue("useFooterSmallWinCountUp"))return this.updateWrapperGameMessage("WIN",t);if(this.shouldSkipUpdateFooterWinWhileSpinIsInProgress())return this.q.when(!0);if(this.game.getParameterValue("recalculateTotalWin")){t=0;return this.scope.game.winnings.filter(function(e){return e.winPositions.length<=this.activeReelIndex},this).forEach(function(e){t+=e.win},this),this.additionalWinUpdateCondition()?this.updateWrapperGameMessage("WIN",t,{duration:.2}):this.q.when(!0)}return t?this.updateWrapperGameMessage("FAST_WIN",t):void 0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.additionalWinUpdateCondition=function(){return!0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.shouldSkipUpdateFooterWinWhileSpinIsInProgress=function(){return this.game.getParameterValue("skipUpdateFooterWinWhileSpinIsInProgress")&&this.spinInProgress},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getCurrencyFormatedValue=function(e,t){return t?this.currencyFormatterFunction(e):e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getTotalWin=function(){return this.scope.game.showValuesInCash?this.game.getTotalWinInCash().toFixed(this.scope.game.currency.decimals):this.game.getTotalWinInCoins()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getCascadeWin=function(){return this.scope.game.showValuesInCash?this.scope.game.cascadeWin:this.scope.game.cascadeCoinsWin},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getLastWin=function(){if(this.scope.game.totalWin&&(this.lastWin=this.scope.game.totalWin),this.lastWin)return this.scope.game.showValuesInCash?this.lastWin:this.lastWin/this.game.getCoinValue()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateBalanceValuePresentation=function(){var e;GcwGameClient?(e=this.game.getBalanceInCash(),GcwGameClient.triggerEvent(gcw.api.GameEventType.WALLET_UPDATE,{balance:e||0})):((e=this.presentation.getById("balanceValue"))&&e.updatePresentation(),(e=this.presentation.getById("balanceSettings"))&&e.updatePresentation())},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getBalance=function(){if(GcwGameClient&&(e=this.game.getBalanceInCash(),GcwGameClient.triggerEvent(gcw.api.GameEventType.WALLET_UPDATE,{balance:e||0})),this.balanceInCoins)return this.game.getBalanceInCoins();var e=angular.copy(this.scope.game.currency);return this.getShowCurrencySignsInGui()||(e.sign=""),e.sign_after=0,this.game.getParameterValue("newUI")?isNaN(this.game.getBalanceInCash())?this.returnIf(this,"scope.lastResult.outcome.balance")||0:this.game.getBalanceInCash():sna.service.util.formatCurrency(this.game.getBalanceInCash(),e)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getStartingAutoplayValue=function(){var e=this.getAutoplayOptions();return this.scope.game.playMode===sna.service.tripleBellsProvider.playModes.FUN&&-1!=e.indexOf("")?"":-1!=e.indexOf(100)?100:e[e.length-1]},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getPaylineWin=function(){return this.scope.game.showValuesInCash?this.scope.game.paylineWin:this.scope.game.paylineCoinsWin},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getFsTotalWinRestored=function(){var e=this.returnIf(this,"scope.game.feature.prevTotalWin")||0;return sna.service.util.formatCurrency(e,this.scope.game.currency)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getFsTotalWin=function(){return this.game.getParameterValue("hideTotalWinFreeSpinValue")?null:this.fsTotalWinInCoins?this.game.getFsTotalWinInCoins():this.game.getFsTotalWinInCash()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.addCustomWrapperDialogFunctionality=function(){},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getPrevFsTotalWin=function(){return this.fsTotalWinInCoins?this.game.getFsPrevTotalWinInCoins():this.game.getFsPrevTotalWinInCash()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getFooterBalanceLabel=function(){var e=this.scope.translations,t="";this.presentation.main.environment.is(sna.service.ENVIRONMENT_DESKTOP)&&(t=" ");var i=angular.copy(this.scope.game.currency),n="",n=this.isSimpleBet?i.sign:this.scope.game.currency.name;i.sign="";i=sna.service.util.formatCurrency(this.game.getBalanceInCash(),i);return e.BALANCE+":  "+t+"<t1>"+n+"</t1>"+t+" <curr>"+i+"</curr>"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateFooterWinLabel=function(){this.presentation.getById(this.getFooterWinLabelId()).updatePresentation()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getFooterWinLabel=function(){var e=this.scope.translations,t="";this.presentation.main.environment.is(sna.service.ENVIRONMENT_DESKTOP)&&(t=" ");var i=angular.copy(this.scope.game.currency),n="",n=this.isSimpleBet?i.sign:this.scope.game.currency.name;i.sign="";var s=this.updateFooterWin?this.game.getTotalWinInCash():0,r="";return 0!==s&&(r=sna.service.util.formatCurrency(s,i)),e.WIN+":  "+t+"<t1>"+n+"</t1>"+t+" <curr>"+r+"</curr>"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.resetFooterWinLabel=function(){this.updateFooterWin&&(this.updateFooterWin=!1);var e=this.scope.translations,t="";this.presentation.main.environment.is(sna.service.ENVIRONMENT_DESKTOP)&&(t=" ");var i=angular.copy(this.scope.game.currency),n="",n=this.isSimpleBet?i.sign:this.scope.game.currency.name;return e.WIN+":  "+t+"<t1>"+n+"</t1>"+t+" <curr></curr>"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getCoinsBetLabel=function(){var e=this.scope.translations;return this.betInCoins?e.COINS:e.BET},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getWin=function(e,t){return this.betInCoins?this.formatNumberString(e.win,t):this.formatNumberString(e.win*this.game.getCoinValue(),t)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getBet=function(){return this.betInCoins?this.game.getGameBet():this.game.getGameBet()*this.game.getCoinValue()+""},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getBets=function(){return this.betInCoins?this.scope.game.bets:this.scope.game.bets.map(function(e){return{value:e,component:e*this.game.getCoinValue()+""}}.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getTotalBet=function(){if(GcwGameClient&&GcwGameClient.wrapperData.prevTotalBet!=this.game.getTotalBetInCash()&&(GcwGameClient.triggerEvent(gcw.api.GameEventType.TOTAL_BET_UPDATE,this.game.getTotalBetInCash()),GcwGameClient.wrapperData.prevTotalBet=this.game.getTotalBetInCash()),this.totalBetInCoins)return this.game.getTotalBetInCoins();var e=angular.copy(this.scope.game.currency);return this.getShowCurrencySignsInGui()||(e.sign=""),e.sign_after=0,this.game.getParameterValue("newUI")?+this.game.getTotalBetInCash():sna.service.util.formatCurrency(this.game.getTotalBetInCash(),e)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getTotalBetReal=function(){if(GcwGameClient&&GcwGameClient.wrapperData.prevTotalBet!=this.game.getTotalBetInCash()&&(GcwGameClient.triggerEvent(gcw.api.GameEventType.TOTAL_BET_UPDATE,this.game.getTotalBetInCash()),GcwGameClient.wrapperData.prevTotalBet=this.game.getTotalBetInCash()),this.totalBetInCoins)return this.game.getTotalBetInCoins();var e=angular.copy(this.scope.game.currency);return this.getShowCurrencySignsInGui()||(e.sign=""),e.sign_after=0,this.game.getParameterValue("newUI")?+this.game.getTotalBetInCash()/10:sna.service.util.formatCurrency(this.game.getTotalBetInCash(),e)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getFooterBetLabel=function(){var e=this.scope.translations,t="";this.presentation.main.environment.is(sna.service.ENVIRONMENT_DESKTOP)&&(t=" ");var i=angular.copy(this.scope.game.currency),n="",n=this.isSimpleBet?i.sign:this.scope.game.currency.name;i.sign="";i=sna.service.util.formatCurrency(this.game.getTotalBetInCash(),i);return e.BET+":  "+t+"<t1>"+n+"</t1>"+t+" <curr>"+i+"</curr>"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isDialogVisible=function(){var e=this.presentation.getById("gambleFeatureDialog");if(e)return e.visible},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.changeFooterCoinsCash=function(e){var t,i,n,s,r,o,a,l,h,c,p,u,d;this.spinInProgress||(this.scope.config.slot.toggleValuesEnabled?(this.footerInCoins=!this.footerInCoins,l=this.footerInCoins,h="",c=this.scope.translations,this.footerInCoins?(h=this.scope.game.currency.fmCode||this.scope.game.currency.name,this.scope.game.showValuesInCash=!1):(h=c.COINS,this.scope.game.showValuesInCash=!0),this.updateCashCoinCommonValues(l),p=this.presentation.getById(this.getFooterBalanceLabelId()),u=this.presentation.getById(this.getFooterWinLabelId()),d=this.presentation.getById(this.getFooterBetLabelId()),t=this.presentation.getById("balanceValue"),i=this.presentation.getById("totalBetValue"),a=this.presentation.getById("grandTotal"),n=this.presentation.getById("lastWinValue"),s=this.presentation.getById("fsTotalWinInDialog"),r=this.presentation.getById("fsTotalWinValue"),void 0!==(o=this.presentation.getById("freeRoundsTotalWin"))&&o.updatePresentation(),void 0!==t&&t.updatePresentation(),void 0!==i&&i.updatePresentation(),void 0!==a&&a.setnumber(this.getTotalWin()),(a=this.scope.game.feature)&&a.active?(void 0!==n&&n.setnumber(this.getFsTotalWin()-this.getPrevFsTotalWin()),void 0!==s&&s.setnumber(this.getFsTotalWin()),void 0!==r&&r.setnumber(this.getFsTotalWin())):void 0!==n&&n.setnumber(this.getLastWin()),this.triggerEvent(sna.service.tripleBellsProvider.events.CASH_COIN_TOGGLE)):(this.footerInCoins=!this.footerInCoins,l=this.footerInCoins,h="",c=this.scope.translations,h=this.footerInCoins?this.scope.game.currency.fmCode||this.scope.game.currency.name:c.COINS,this.footerBalanceInCoins=l,this.footerWinInCoins=l,this.footerBetInCoins=l,p=this.presentation.getById(this.getFooterBalanceLabelId()),u=this.presentation.getById(this.getFooterWinLabelId()),d=this.presentation.getById(this.getFooterBetLabelId()),p.updatePresentation(),u.updatePresentation(),d.updatePresentation(),e.updatePresentation()),void 0!==(e=this.presentation.getById(this.getFooterCoinCashId()))&&(e.text=h,e.scope.config.text=h,e.updatePresentation()),void 0!==(e=this.presentation.getById(this.getSettingsCoinCashId()))&&e.setToggleState(!this.scope.game.showValuesInCash),this.presentation.createAnimationTimeline("betParamChange",0,!1,!0,null))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setInitialSoundStateMobile=function(e){var t=this.presentation.getById(this.getSoundOnId()),i=this.presentation.getById(this.getSoundOffId()),n=!0;e?(t&&t.show(),i&&i.hide()):(t&&t.hide(),i&&i.show(),n=!1),this.sound.setDefaultSoundState(n),this.sound.setGroupState(n,sna.service.SOUND_TYPE_FX,sna.service.SOUND_TYPE_INTERFACE),this.sound.setGroupState(n,sna.service.SOUND_TYPE_MUSIC);i=this.presentation.getById(this.getToggleSettingsSoundId());i&&i.setToggleState(n);i=this.presentation.getById(this.getToggleSettingsBackgroundSoundId());i&&i.setToggleState(n)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setSettingsLimitsTogglePresentation=function(e,t,i){t?(e.enable(),e.setToggleState(!0),void 0!==i&&i.call(this,null,!0)):(e.disable(),e.setToggleState(!1),void 0!==i&&i.call(this,null,!1))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.showNumpadKeyboard=function(e){var t,n=e,i=this.presentation.getById(this.getNumpadKeyboardId()),e=n.scope.config.tag;switch(i.visible||i.show(),e){case"autoplayWin":t=this.scope.game.autoplay.winThreshold;break;case"autoplayIncrease":t=this.scope.game.autoplay.winIncreaseThreshold;break;case"autoplayDecrease":t=this.scope.game.autoplay.winDecreaseThreshold;break;case"autoplayTotalBet":t=this.scope.game.getAutoplayTotalBetToGambleThreshold()}i.init(t).then(function(e){switch(n.scope.config.tag){case"autoplayWin":var t=this.presentation.getById(this.getToggleSingleWinLimitId());this.setSettingsLimitsTogglePresentation(t,e,this.setWinThresholdState),this.scope.game.setAautoplayWinThreshold(e);break;case"autoplayIncrease":t=this.presentation.getById(this.getToggleWinLimitId());this.setSettingsLimitsTogglePresentation(t,e,this.setWinIncreaseThresholdState),this.scope.game.setAutoplayWinIncreaseThreshold(e);break;case"autoplayDecrease":var i=this.presentation.getById(this.getToggleLossLimitId());this.setSettingsLimitsTogglePresentation(i,e,this.setWinDecreaseThresholdState),this.scope.game.setAutoplayWinDecreaseThreshold(e);break;case"autoplayTotalBet":i=this.presentation.getById(this.getToggleTotalBetToGambleId());this.setSettingsLimitsTogglePresentation(i,e,this.setTotalBetToGambleThresholdState),this.scope.game.setAutoplayTotalBetToGambleThreshold(e)}this.presentation.getById(this.getToggleLossLimitId()).toggleState&&this.enableAutoplayUkgc(),n.buttonText.updatePresentation()}.bind(this)).catch(function(e){})},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.enableBtnAutoplaySettingsUkgc=function(e){var t=this.presentation.getById(this.getBtnAutospinSettingsId());t&&(e?t.enable():t.disable())},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.checkForLossLimitThreshold=function(){var e=this.scope.game.getAutoplayWinDecreaseThreshold(),t=this.game.getTotalBetInCash();return e&&t<=e?!0:!1},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.checkForTotalBetToGambleThreshold=function(){var e=this.scope.game.getAutoplayTotalBetToGambleThreshold();return this.game.getTotalBetInCash()<=e||0===e?!0:!1},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.enableAutoplayUkgc=function(){var e=this.presentation.getById(this.getToggleTotalBetToGambleId()),t=!1;e&&e.toggleState?this.checkForLossLimitThreshold()&&this.checkForTotalBetToGambleThreshold()&&(t=!0):this.checkForLossLimitThreshold()&&(t=!0),this.enableBtnAutoplaySettingsUkgc(t)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setTotalBetToGambleThresholdState=function(e,t){this.game.scope.game.setAutoplayTotalBetToGambleThresholdActive(t)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onToggleLossLimit=function(e,t){this.setWinDecreaseThresholdState(t),t?this.enableAutoplayUkgc():this.enableBtnAutoplaySettingsUkgc(t)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onToggleTotalBet=function(e,t){var i=this.presentation.getById(this.getToggleLossLimitId());this.setTotalBetToGambleThresholdState(i,t),i.toggleState&&(t?this.enableAutoplayUkgc():this.checkForLossLimitThreshold()&&this.enableBtnAutoplaySettingsUkgc(!0))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.showSpinButtonMenu=function(){this.presentation.createAnimationTimeline("showSpinOptionsMenu",0,!1,!0,null),this.spinButtonMenuOpened=!0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.hideSpinButtonMenu=function(){this.presentation.createAnimationTimeline("hideSpinOptionsMenu",0,!1,!0,null),this.spinButtonMenuOpened=!1},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.openSpinButtonMenu=function(e,t){this.spinInProgress?e.disable():"true"===t?this.showSpinButtonMenu():this.hideSpinButtonMenu()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isSpinButtonMenuOpened=function(e){return this.spinButtonMenuOpened},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.showQuattroTitle=function(e){return!!this.scope.game.forceSingleGame},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.shouldShowQuattroButtons=function(e){return!this.scope.game.forceSingleGame},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.shouldShowQuattroIntro=function(e){return!this.scope.game.forceSingleGame},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.showQuattroButtonDesc=function(e){return!this.scope.game.forceSingleGame&&null!=this.scope.game.forceSingleGame},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.shouldShowQuattroModDesc=function(e){return null!=this.game.scope.translations.QUATTRO_MODE&&!this.scope.game.forceSingleGame},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.shouldShowClickSpinDesc=function(e){return null!=this.game.scope.translations.CLICKSPIN_AUTOPLAY&&!this.scope.game.hideAutoSpin},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.hideHowToDescription=function(){return"de_DE"!=this.scope.game.language&&!this.isTargetMarket("UK")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.shouldShowRegularIntro=function(e){return!!this.scope.game.forceSingleGame},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.visibleSpacebarSpin=function(e){return!this.scope.game.disableSpaceBar},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.visibleSpaceBarAndTouchAnywhere=function(e){return!(this.scope.game.disableSpaceBar&&!this.presentation.main.environment.is(sna.service.ENVIRONMENT_MOBILE))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.showSpinButtonOldDesc=function(e){return!this.scope.game.hideAutoSpin&&!this.scope.game.hideFastSpin},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.showSpinButtonNewDesc=function(e){return!!(this.scope.game.hideAutoSpin||this.scope.game.hideFastSpin||this.scope.game.hideAutoSpin&&this.scope.game.hideFastSpin)||!(null==this.scope.game.hideAutoSpin||null==this.scope.game.hideFastSpin||!this.scope.game.hideAutoSpin||!this.scope.game.hideFastSpin)&&void 0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.showSpinButtonOldDescDesk=function(e){return!this.scope.game.disableSpaceBar},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.showSpinButtonNewDescDesk=function(e){return!!this.scope.game.disableSpaceBar},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.spinSettingsVisible=function(){return!(this.scope.game&&this.scope.game.disableSpaceBar&&this.scope.game.hideAutoSpin&&this.scope.game.hideFastSpin)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setXMenuButton=function(e){return this.spinSettingsVisible()?e:+e-170},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.positionXSpinOptionsMaxBet=function(){return this.scope.game.hideFastSpin?-130:106},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.checkForAutoplay=function(e){if(this.onScreenClick(),!e.screenClickHitDetected)return e.releaseOutside(),this.q.when(!0);if(this.scope.layout.environmentTags.find(function(e){if("Tablet"==e||"Mobile"==e)return e})&&this.getHideAutoSpin()){e=this.presentation.createAnimationTimeline("animateAutoplayProgress",0,!1,!0,null);return this.animateAutoplayProgress=e.animation.defered,this.animateAutoplayIsInProgress=!0,e=e.then(this.triggerEvent.bind(this,"startSpinButtonAutoplay"))}},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.startSpinButtonAutoplay=function(){this.presentation.createAnimationTimeline("hideAutoplayProgress",0,!1,!0,null),this.startAutoplayMarket(null)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.stopSpinButtonAutoplay=function(){this.animateAutoplayProgress&&this.animateAutoplayProgress.reject();var e=this.q.when(!0);return e=(e=e.then(this.presentation.cancelAnimation.bind(this.presentation,"animateAutoplayProgress"))).then(this.presentation.createAnimationTimeline.bind(this.presentation,"hideAutoplayProgress",0,!1,!0,null))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getUseSpacebarSpin=function(){return this.useSpacebar},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setUseSpacebarSpin=function(e){(this.scope.game.disableSpaceBar||this.scope.lastResult&&this.scope.lastResult.outcome&&this.scope.lastResult.outcome.features&&this.scope.lastResult.outcome.features.nextFreespins&&this.scope.lastResult.outcome.features.nextFreespins.active)&&(e=!1),this.useSpacebar=e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getIsDialogOpened=function(){return this.isDialogOpened},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getIsDialogAutoplayOpened=function(){var e=!1,t=this.presentation.getById("autoplayDialog");t&&t.visible&&(e=!0);t=this.presentation.getById("autoplaySettingsContainer");return e=t&&t.visible?!0:e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.toggleStopOnFeature=function(e){this.scope.game.autoplay.stopOnFeature=!this.scope.game.autoplay.stopOnFeature},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setIsDialogOpened=function(e){e="false"!==e&&("true"===e||e);this.isDialogOpened=e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onClosePopUpGameFilter=function(){var e=this.game.getParameterValue("markets");this.isTargetMarket(e.other)?this.presentation.getById(this.getToggleSpacebarSpinOtherId()):this.presentation.getById(this.getToggleSpacebarSpinUkgcId())},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.toggleSpacebarSpin=function(e){this.setUseSpacebarSpin(e.toggleState),this.isGameSettingsChanged=!0,this.game.setGameSettingsProperty("spacebar_spin",this.useSpacebar)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.toggleJackpot=function(e){this.autoplayJackpotThresholdActive=e.toggleState},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.toggleAnyWin=function(e){this.scope.game.autoplay.autoplayAnyWinThresholdActive=e.toggleState},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.toggleFastSpin=function(e){this.scope.game.turboMode=!this.scope.game.turboMode;var t=this.getGameName();sna.service.util.writeCookie(t+"_turboMode",this.scope.game.turboMode);var i=this.presentation.getById(this.getToggleFastSpinUkgcId()),t=this.presentation.getById(this.getToggleFastSpinOtherId());i&&i.setToggleState(e.toggleState),t&&t.setToggleState(e.toggleState),this.isGameSettingsChanged=!0,!this.presentation.main.environment.is(sna.service.ENVIRONMENT_MOBILE)||(t=this.presentation.getById(this.getToggleFastSpinMenuMobileId()))&&t.setToggleState(e.toggleState);e=this.presentation.getById("toggleFastSpinSettingsButton");e&&e.setToggleState(this.scope.game.turboMode);e=this.presentation.getById("fastSpinBtn");e&&e.setToggleState(this.scope.game.turboMode)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setFastSpin=function(e){this.scope.game.turboMode=e;e=this.presentation.getById("toggleFastSpinSettingsButton");e&&e.setToggleState(this.scope.game.turboMode);e=this.presentation.getById("fastSpinBtn");e&&e.setToggleState(this.scope.game.turboMode)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getSpinParameter=function(e){e=this.game.getParameterValue("spinParameters")[e];return this.scope.game.turboMode?e.turbo:e.default},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.soundToggle=function(e,t){var i=this.presentation.getById(this.getToggleSettingsSoundId()),n=this.presentation.getById(this.getToggleSettingsBackgroundSoundId()),s=!this.sound.getDefaultSoundState();this.sound.setGroupState(s=void 0!==t?t:s,sna.service.SOUND_TYPE_MUSIC),this.sound.setGroupState(s,sna.service.SOUND_TYPE_FX,sna.service.SOUND_TYPE_INTERFACE),this.sound.setDefaultSoundState(s),this.setMasterSoundStatePresentation(s),i&&i.setToggleState(s),n&&n.setToggleState(s),this.isGameSettingsChanged=!0,this.game.setGameSettingsProperty("game_sounds",s),void 0!==this.game.getGameSettingsProperty("background_sounds")&&this.game.setGameSettingsProperty("background_sounds",s),this.game.getParameterValue("newUI")||this.updateGameSettings(),GcwGameClient&&GcwGameClient.triggerEvent(gcw.api.GameEventType.GENERAL_SOUND_STATUS_CHANGE,s)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.toggleGameSounds=function(e,t){var i=e.toggleState;void 0!==t&&(e.setToggleState(t),i=t),this.sound.setGroupState(i,sna.service.SOUND_TYPE_FX,sna.service.SOUND_TYPE_INTERFACE),this.isGameSettingsChanged=!0,this.game.setGameSettingsProperty("game_sounds",i),this.checkForMasterSoundState(),GcwGameClient&&GcwGameClient.triggerEvent(gcw.api.GameEventType.SOUND_EFFECTS_STATUS_CHANGE,i)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.toggleBackgroundSounds=function(e,t){var i=e.toggleState;void 0!==t&&(e.setToggleState(t),i=t),this.sound.setGroupState(i,sna.service.SOUND_TYPE_MUSIC),this.isGameSettingsChanged=!0,this.game.setGameSettingsProperty("background_sounds",i),this.checkForMasterSoundState(),GcwGameClient&&GcwGameClient.triggerEvent(gcw.api.GameEventType.MUSIC_STATUS_CHANGE,i)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.checkForMasterSoundState=function(){var e=this.presentation.getById(this.getToggleSettingsSoundId()),t=this.presentation.getById(this.getToggleSettingsBackgroundSoundId()),i=[];e&&i.push(e),t&&i.push(t);for(var n=!1,s=0;s<i.length;s++)if(i[s].toggleState){n=!0;break}this.sound.setDefaultSoundState(n),this.setMasterSoundStatePresentation(n)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setMasterSoundStatePresentation=function(e){var t,i,n;this.presentation.scope.layout.has(sna.service.ENVIRONMENT_DESKTOP)?(n=this.presentation.getById(this.getFooterSoundId()))&&n.setToggleState(e):(t=this.presentation.getById(this.getSoundOnId()),i=this.presentation.getById(this.getSoundOffId()),(n=this.presentation.getById(this.getFooterSoundId()))&&n.setToggleState(e),e?(t&&t.show(),i&&i.hide()):(t&&t.hide(),i&&i.show()))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateWinlines=function(e){var t=this.game.getActiveGameType().lines,i=this.presentation.getById(this.getBtnWinlinesId());i.setButtonText(t),i.buttonText.scope.config.text=t||""},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.playManualCheat=function(){var e=this.presentation.getById("manualCheat");this.lastCheatInput&&!this.manualCheat&&(this.manualCheat=this.lastCheatInput),e&&null!=this.manualCheat&&-1==this.manualCheat.indexOf("{")?(-1<this.manualCheat.search(":")?this.manualCheat.split(":").forEach(function(e){this.cheatStack.push(e.toUpperCase())},this):this.cheatStack.push(this.manualCheat.toUpperCase()),this.removeMe(),e.clearText(),this.manualCheat=void 0):-1<this.manualCheat.indexOf("{")&&(this.cheatStackResponse.push(JSON.parse(this.manualCheat)),this.cheatStack.push(JSON.parse(this.manualCheat)),this.manualCheat="RESPONSE CHEAT: "+this.cheatStackResponse.length,this.removeMe(),e.clearText(),this.manualCheat=void 0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setManualCheat=function(e,t){this.manualCheat=t},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.playGambleCheat=function(e){this.presentation.getById(this.getCheatsId()).hide(),this.presentation.getById("manualCheat").hide(),this.isDialogOpened=!1,this.playGambleFeature(null,"cheat")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.playCheatSlotInterface=sna.service.tripleBellsProvider.TripleBellsInterface.prototype.playCheat,sna.service.slot.SlotInterface.prototype.playCheat=function(e,t){this.lastCheatInput=t,this.cheatStack.push(t),this.recreateArray()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.enterAndSpaceKeyCallback=function(){this.isSpaceBarHeldDown=!1;var e=this.scope.game.miniFeature,t=this.scope.game.feature&&this.scope.game.feature.active;if(this.game.getParameterValue("enableSpacebarFastStopInFreeSpinsStart")||(t=t&&!this.scope.game.feature.start),(t=this.game.getParameterValue("disableSpaceBarInMiniFeature")?t||e:t)&&this.game.getParameterValue("enableSpacebarFastStopInFreeSpins")&&!this.game.getGameSettingsProperty("disableSpaceBar")&&this.useSpacebar)return this.runGlobalPressCallbacks(!1);var i=this.stopButton,e=this.spinButton;!this.game.getGameSettingsProperty("spacebar_spin")||"true"===this.game.getGameSettingsProperty("disableSpaceBar")||this.game.getGameSettingsProperty("disableSpaceBar")||sna.service.tripleBellsProvider.playModes.REPLAY===this.scope.game.playMode||!this.useSpacebar||this.scope.layout.has(sna.service.ENVIRONMENT_MOBILE)||this.autoPlayGamble||this.getIsDialogOpened()&&!this.gambleFeatureOpened||!i&&!e||t||this.blockWrapperButtonEvents||!this.gameSetupCompleted||this.blockClicks||(i.enabled?this.fastStop():t||((this.winInProgress||this.customFastWinStopCondition())&&e.enabled?this.fastWinFullStopCallback():!e.visible||!e.enabled||this.winInProgress||this.spinInProgress||this.cascadeActive||(this.sound.playSoundOnce("ButtonReelStart",!1),this.spin(this))))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.customFastWinStopCondition=function(){return!1},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getRealityReminderText=function(){var e=this.scope.translations,t=angular.copy(this.scope.game.config.currency);t.sign_after=!1;var i=sna.service.util.msToTime(1e3*this.realityReminder.elapsedTime).split(":");if(void 0===(r=e.REALITY_CHECK_PLAYING_FOR))return r=e.REMINDER_TEXT01+" ",0<i[0]&&(r+=parseInt(i[0])+" ",1<i[0]?r+=e.HOURS:r+=e.HOUR,r+=" "),(0<i[1]||0===i[1]&&0<i[0])&&(r+=parseInt(i[1])+" ",1<i[1]?r+=e.MINUTES:r+=e.MINUTE,r+=" "),0<i[2]&&(r+=parseInt(i[2])+" ",1<i[2]?r+=e.SECONDS:r+=e.SECOND),r+=".\n",r+=e.STAKE+": "+sna.service.util.formatCurrency(this.game.getRealityReminderStake(),t),r+="\n",r+=e.WINNINGS+": "+sna.service.util.formatCurrency(this.game.getRealityReminderWinnings(),t);var n=i[0],s=i[1],i=i[2],r=-1<r.indexOf("{1}")?(r=(r=r.replace("{0}",n)).replace("{1}",s)).replace("{2}",i):r.replace("{0}",n+":"+s+":"+i);return r+="\n",r+=-1<e.REALITY_CHECK_STAKE.indexOf("{0}")?e.REALITY_CHECK_STAKE.replace("{0}"," "+sna.service.util.formatCurrency(this.game.getRealityReminderStake(),t)):e.REALITY_CHECK_STAKE+" "+sna.service.util.formatCurrency(this.game.getRealityReminderStake(),t),r+="\n",r+=-1<e.REALITY_CHECK_WINNINGS.indexOf("{0}")?e.REALITY_CHECK_WINNINGS.replace("{0}"," "+sna.service.util.formatCurrency(this.game.getRealityReminderWinnings(),t)):e.REALITY_CHECK_WINNINGS+sna.service.util.formatCurrency(this.game.getRealityReminderWinnings(),t)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onRealityReminderStopwatchTick=function(){this.realityReminder.elapsedTime++},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onRealityReminderExpired=function(){this.realityReminder.intervalId=null,this.realityReminder.expired=!0,(this.scope.game.isInMode(sna.model.slot.MODE_IDLE)||this.scope.game.isInMode(sna.model.slot.MODE_WIN_INDIVIDUAL))&&this.handleRealityReminder()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleRealityReminder=function(){this.realityReminder.expired&&(this.scope.game&&this.scope.game.autoplay&&this.scope.game.autoplay.active&&this.stopAutoplay(),this.restoreSpinInterface(),this.presentation.createAnimationTimeline("showRealityReminderDialog",0,!1,!0))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.continueRealityReminder=function(){return this.realityReminder.expired=!1,null===this.realityReminder.intervalId&&(this.realityReminder.intervalId=window.setTimeout(this.onRealityReminderExpired.bind(this),1e3*this.realityReminder.duration)),this.enableInterface(),this.presentation.createAnimationTimeline("hideRealityReminderDialog",0,!1,!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.stopRealityReminder=function(){return window.clearInterval(this.realityReminder.stopwatchIntervalId),this.goToHome(),this.realityReminder.stopwatchIntervalId=null,this.realityReminder.expired=!1,this.enableInterface(),this.presentation.createAnimationTimeline("hideRealityReminderDialog",0,!1,!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleGambleFeature=function(){var e,t,i,n=this.q.when(!0);return(this.gambleFeatureEnabled&&this.gambleAllowed&&!this.spinInProgress&&this.winNotCollected||this.autoPlayGamble)&&(this.userGambleConfirmation||(this.gambleFeatureOpened=!1),this.gambleFeaturePlayed=!1,(this.scope.lastResult.outcome.hasWins||this.autoPlayGamble||this.scope.game.wasRespinActive&&this.scope.game.totalWin)&&(this.autoCollectWins?n=n.then(this.handleGambleCollect.bind(this)):(e=this.scope.game.autoplay,t=!!this.scope.lastResult.gambleOutcome&&this.scope.lastResult.gambleOutcome.canGamble,i=this.scope.lastResult.gambleOutcome,(t&&!e.left||this.autoPlayGamble)&&(this.gambleFeaturePromise=this.q.defer(),n=(n=n.then(this.playWinIndividualAnimation.bind(this))).then(this.triggerEvent.bind(this,sna.service.tripleBellsProvider.events.GAMBLE_FEATURE_PREPARE,i)),this.showGambleButtons&&!this.userGambleConfirmationDialogOpened&&(n=(n=n.then(this.presentation.createAnimationTimeline.bind(this.presentation,"gambleFeaturePrepare",0,!1,!0,null))).then(this.presentation.createAnimationTimeline.bind(this.presentation,"gambleFeatureShowButtons",0,!1,!0,null))),!this.shouldOpenGamble&&!this.autoPlayGamble||this.hasNextGambleReplay||(n=n.then(this.openGambleFeature.bind(this))),n=(n=(n=this.autoPlayGamble?n.then(this.autoPlayGambleFeature.bind(this)):n).then(this.waitForGambleFeatureToComplete.bind(this))).then(this.endGambleFeature.bind(this)))))),n},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getGameRulesGambleText=function(){var e=this.scope.game.gambleType;if(e){var t=angular.copy(this.scope.game.currency);this.getShowCurrencySignsInGui()||(t.sign="");var i=e.maxRoundCount,e=e.maxStake,e=this.scope.game.showValuesInCash?sna.service.util.formatCurrency(e*this.game.getCoinValue(),t):e,t=this.scope.translations[this.scope.game.showValuesInCash?"GAMBLE_UP_TO_CASH2":"GAMBLE_UP_TO"];if(t)return t.replace("{value1}",i.toString()).replace("{value2}",e.toString())}},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.autoPlayGambleFeature=function(){return sna.service.tripleBellsProvider.playModes.REPLAY!==this.scope.game.playMode?(this.autoPlayGamble=!1,"R"==(e=this.scope.lastResult.gambleOutcome.gtype)?t=this.presentation.getById("gambleOptionRed"):"B"==e?t=this.presentation.getById("gambleOptionBlack"):"D"==e?t=this.presentation.getById("gambleOptionDiamonds"):"H"==e?t=this.presentation.getById("gambleOptionHearts"):"S"==e?t=this.presentation.getById("gambleOptionSpades"):"C"==e&&(t=this.presentation.getById("gambleOptionClubs")),this.playGambleFeature(t,"restore")):(this.autoPlayGamble=!1,"R"==(e=this.scope.lastResult.gambleOutcome.gtype)?t=this.presentation.getById("gambleOptionRed"):"B"==e?t=this.presentation.getById("gambleOptionBlack"):"D"==e?t=this.presentation.getById("gambleOptionDiamonds"):"H"==e?t=this.presentation.getById("gambleOptionHearts"):"S"==e?t=this.presentation.getById("gambleOptionSpades"):"C"==e&&(t=this.presentation.getById("gambleOptionClubs")),this.playGambleFeature(t,null));var e,t},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleFreeSpinsGambleFeature=function(){var e=this.scope.lastResult,t=this.q.when(!0);if(sna.service.tripleBellsProvider.playModes.REPLAY!==this.scope.game.playMode)return e&&e.gambleOutcome&&e.gambleOutcome.canGamble&&(this.gambleAllowed=!0,this.winNotCollected=!0,this.scope.lastResult.outcome.hasWins=!0,this.gambleFeatureOutcome=this.scope.lastResult.gambleOutcome,this.autoCollectWins?this.game.getParameterValue("useDelayedFreeSpinsCollect")&&(t=t.then(this.handleGambleCollect.bind(this))):t=(t=this.gambleFeatureEnabled&&this.gambleAllowed&&!this.userGambleConfirmation&&!this.game.scope.config.parameters.overrideUserGambleConfirmationDialog&&0<this.scope.game.totalWin?sna.service.tripleBellsProvider.playModes.REPLAY!==this.scope.game.playMode?(t=t.then(this.userGambleConfirmationDialog.bind(this))).then(this.waitForUserGambleConfirmationToComplete.bind(this)):t:(t=t.then(this.presentation.createAnimationTimeline.bind(this.presentation,"gambleFeaturePrepare",0,!1,!0,null))).then(this.presentation.createAnimationTimeline.bind(this.presentation,"gambleFeatureShowButtons",0,!1,!0,null))).then(this.handleGambleFeature.bind(this)),t=t.then(this.presentation.createAnimationTimeline.bind(this.presentation,"afterWin",0,!1,!0,null))),t=(t=t.then(this.enableInterface.bind(this))).then(this.restoreSpinInterface.bind(this));var i=this.communication.getCommLogRequestParams();return t=i&&"btn_collect"===i.event.button?(t=(t=(t=t.then(this.collectGambleFeature.bind(this))).then(this.presentation.createAnimationTimeline.bind(this.presentation,"afterWin",0,!1,!0,null))).then(this.enableInterface.bind(this))).then(this.restoreSpinInterface.bind(this)):(this.prepareGambleReplay(),e&&e.gambleOutcome&&e.gambleOutcome.canGamble&&(this.gambleAllowed=!0,this.winNotCollected=!0,this.scope.lastResult.outcome.hasWins=!0,this.gambleFeatureOutcome=this.scope.lastResult.gambleOutcome,t=(t=!this.autoCollectWins?(t=this.gambleFeatureEnabled&&this.gambleAllowed&&!this.userGambleConfirmation&&!this.game.scope.config.parameters.overrideUserGambleConfirmationDialog&&0<this.scope.game.totalWin?sna.service.tripleBellsProvider.playModes.REPLAY!==this.scope.game.playMode?t.then(this.userGambleConfirmationDialog.bind(this)):t:(t=t.then(this.presentation.createAnimationTimeline.bind(this.presentation,"gambleFeaturePrepare",0,!1,!0,null))).then(this.presentation.createAnimationTimeline.bind(this.presentation,"gambleFeatureShowButtons",0,!1,!0,null))).then(this.handleGambleFeature.bind(this)):t).then(this.presentation.createAnimationTimeline.bind(this.presentation,"afterWin",0,!1,!0,null))),(t=t.then(this.enableInterface.bind(this))).then(this.restoreSpinInterface.bind(this)))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.playGambleFeature=function(e,t){this.presentation.createAnimationTimeline("_stopBlinking",0,!1,!0,null),this.gambleFeaturePlayed=!0,this.disableGambleOptions(e);var e=this.communication.playGambleFeature(t),t=this.presentation.createAnimationTimeline("gambleFeatureOptionChosen",0,!1,!0,null),t=this.q.all([e,t]);return t=(t=(t=t.then(this.processGambleFeatureResponse.bind(this))).then(function(e){var t=this.q.when(!0);return t=this.isMaxWinReached()?(t=(t=(t=(t=(t=t.then(this.setSpinResult.bind(this,e))).then(this.game.setSimpleMessage.bind(this.game,e.outcome))).then(this.endGambleFeature.bind(this))).then(this.handleSimpleMessages.bind(this))).then(this.enableInterface.bind(this))).then(this.updateBalance.bind(this)):(t=(t=(t=(t=t.then(this.presentation.createAnimationTimeline.bind(this.presentation,"gambleFeaturePlay",0,!1,!0,null))).then(this.presentation.createAnimationTimeline.bind(this.presentation,"gambleFeatureReveal",0,!1,!0,null))).then(this.triggerEvent.bind(this,sna.service.tripleBellsProvider.events.GAMBLE_FEATURE_REVEAL))).then(this.processGambleFeatureOutcome.bind(this)),(t=sna.service.tripleBellsProvider.playModes.REPLAY===this.scope.game.playMode?t.then(this.processNextGambleReplay.bind(this)):t).then(function(){this.setUseSpacebarSpin(this.game.getGameSettingsProperty("spacebar_spin"))}.bind(this)))}.bind(this))).then(this.handleRoundCompleted.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.userGambleConfirmationDialog=function(){var e=this.q.when(!0),t=this.scope.game.autoplay;return t&&t.left||this.anotherClientInitiialized||this.backendError?e:(this.userGambleConfirmationDialogConfirmationPromise=this.q.defer(),this.presentation.getById(this.getSpinButtonId()).disable(),this.disableInterface(),this.userGambleConfirmationDialogOpened=!0,this.removeGlobalPressCallback(this.touchAnywhereCallback),e=e.then(this.presentation.createAnimationTimeline.bind(this.presentation,"userGambleConfirmationDialogShow",0,!1,!0,null)))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.waitForUserGambleConfirmationToComplete=function(){return this.userGambleConfirmationDialogConfirmationPromise?this.userGambleConfirmationDialogConfirmationPromise.promise:this.q.when(!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleUserGambleConfirmation=function(e,t){this.userGambleConfirmation=!0,this.userGambleConfirmationDialogOpened=!1,this.autoCollectWins="collect"==t,this.presentation.createAnimationTimeline("userGambleConfirmationDialogHide",0,!1,!0,null),this.presentation.getById(this.getSpinButtonId()).enable(),this.autoCollectWins?this.handleGambleCollect():(this.presentation.createAnimationTimeline("gambleFeaturePrepare",0,!1,!0,null),this.presentation.createAnimationTimeline("gambleFeatureShowButtons",0,!1,!0,null),this.openGambleFeature()),this.userGambleConfirmationDialogConfirmationPromise&&this.userGambleConfirmationDialogConfirmationPromise.resolve(),this.touchAnywhereEnabled&&this.addGlobalPressCallback(this.touchAnywhereCallback)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.toggleGamble=function(e){null==this.autoCollectWins&&(this.autoCollectWins=!1),this.userGambleConfirmation=!0,this.autoCollectWins=!this.autoCollectWins},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processNextGambleReplay=function(){var e=this.communication.getCommLogRequestParams();if(e)return e.event&&"btn_collect"===e.event.button?this.collectGambleFeature():this.gambleFeatureOutcome.isWin?(this.hasNextGambleReplay=!0,this.prepareGambleReplay(),this.createTimerPromise().then(this.handleGambleFeature.bind(this))):void 0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.disableGambleOptions=function(e){for(var t=["gambleOptionBlack","gambleOptionRed","gambleOptionHearts","gambleOptionSpades","gambleOptionClubs","gambleOptionDiamonds","gambleOptionGamble","gambleOptionCollect"],i=0;i<t.length;i++){var n=this.presentation.getById(t[i]);n&&(n.animations&&n.animations._blink&&n.animations._blink.stop(),n.resetTextures(),e==n?n.disableNormal():n.disable())}},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processGambleFeatureOutcome=function(e){var t=(t=this.q.when(!0)).then(this.presentation.createAnimationTimeline.bind(this.presentation,"gambleFeaturePlayed",0,!1,!0,null));return t=this.returnIf(this,"gambleFeatureOutcome.isWin")?this.gambleFeatureOutcome.canGamble?(t=t.then(this.playGambleFeatureWinAnimations.bind(this))).then(this.presentation.createAnimationTimeline.bind(this.presentation,"gambleFeatureReset",0,!1,!0,null)):(t=(t=(t=t.then(this.presentation.createAnimationTimeline.bind(this.presentation,"gambleFeatureWin",0,!1,!0,null))).then(this.presentation.createAnimationTimeline.bind(this.presentation,"gambleFeatureLimitReached",0,!1,!0,null))).then(this.presentation.createAnimationTimeline.bind(this.presentation,"gambleFeatureHideButtons",0,!1,!0,null)),(t=this.game.getParameterValue("stopWinIndividualOnCollect")&&0<this.getGambleStep()?t.then(this.stopWinIndividualAnimation.bind(this)):t).then(function(){this.winNotCollected=!1,this.gambleFeaturePromise&&this.gambleFeaturePromise.resolve()}.bind(this))):(this.winNotCollected=!1,(t=(t=t.then(this.stopWinIndividualAnimation.bind(this))).then(this.presentation.createAnimationTimeline.bind(this.presentation,"gambleFeatureLost",0,!1,!0,null))).then(function(){this.gambleFeaturePromise&&this.gambleFeaturePromise.resolve()}.bind(this)))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.playGambleFeatureWinAnimations=function(e){var t=this.q.when(!0);return t=(t=t.then(this.presentation.createAnimationTimeline.bind(this.presentation,"gambleFeatureWin",0,!1,!0,null))).then(this.presentation.createAnimationTimeline.bind(this.presentation,"gambleFeatureAfterWin",0,!1,!0,null))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processGambleFeatureResponse=function(e){return e.constructor===Array&&(e=e[0]),this.q.when(e).then(function(t){t.outcome=t.outcome||{};var e=t.outcome;return t&&t.game&&t.game.messagesAfterGameEvents&&t.game.messagesAfterGameEvents.length&&(t.outcome.simpleMessage=[],t.game.messagesAfterGameEvents.forEach(function(e){e.message&&(e.buttons&&0<e.buttons.length||t.outcome.simpleMessage.push(e.message))}.bind(this))),this.scope.game.simpleMessageArr=[],this.scope.game.simpleMessage=null,e&&e.simpleMessage&&0<e.simpleMessage.length&&(this.scope.game.simpleMessageArr=e.simpleMessage,this.scope.game.simpleMessage=e.simpleMessage[0],this.scope.game.simpleMessageCode=e.simpleMessageCode),t}.bind(this)).then(function(e){return this.returnIf(e,"response.outcome.jackpot")?this.handleJackpotNotificaiton(e.outcome.jackpot).then(this.resetJackpot.bind(this)).then(function(){return e}):e}.bind(this)).then(function(e){return e.outcome&&e.outcome.freeRounds?(this.game.updateFreeRounds(e.outcome.freeRounds),this.presentation.createAnimationTimeline("updateFreeRounds",0,!1,!0,null).then(function(){return e})):e}.bind(this)).then(function(e){return this.scope.game.freeRounds&&this.scope.game.freeRounds.end&&this.scope.game.freeRounds.active&&e&&e.game&&e.game.messagesAfterGameEvents&&0<e.game.messagesAfterGameEvents.length&&(this.scope.game.freeRounds.message=e.game.messagesAfterGameEvents[0].message,this.presentation.createAnimationTimeline("updateFreeRounds",0,!1,!0,null)),e}.bind(this)).then(function(e){if(this.scope.game.balanceCash=e.outcome.balance,e.gambleOutcome){var t=this.scope.lastResult;return t&&(t.outcome.hasWins=t.outcome.hasWins&&e.gambleOutcome.isWin,t.outcome.win=e.gambleOutcome.isWin?t.outcome.win:0),this.scope.game.totalWin=e.gambleOutcome.isWin?e.gambleOutcome.winmeter*this.game.getCoinValue():0,this.scope.game.totalGambleWin=this.scope.game.totalWin,this.scope.game.totalCoinsWin=e.gambleOutcome.isWin?e.gambleOutcome.winmeter:0,this.gambleFeatureOutcome=angular.copy(e.gambleOutcome),this.triggerEvent(sna.service.tripleBellsProvider.events.GAMBLE_FEATURE_PLAY,this.gambleFeatureOutcome).then(function(){return e})}return e}.bind(this)).then(this.updateScopeOnGambleFeature.bind(this,e))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateScopeOnGambleFeature=function(e){return e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.openGambleFeature=function(){if(this.haltWinIndividualAnimation(),this.winSumDone)return this.showGambleFeature();this.shouldOpenGamble=!0,this.fastWinFullStopCallback()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.showGambleFeature=function(){return this.shouldOpenGamble=!1,this.gambleFeatureOpened=!0,-1!=this.presentation.iface.scope.layout.layoutTags.indexOf("Portrait")&&this.updateWrapperGameMessage("EMPTY"),this.q.when(!0).then(this.presentation.createAnimationTimeline.bind(this.presentation,"gambleFeatureOpen",0,!1,!0,null))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.closeGambleFeature=function(){return this.gambleFeatureOpened=!1,this.q.when(!0).then(this.presentation.createAnimationTimeline.bind(this.presentation,"gambleFeatureClose",0,!1,!0,null))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.endGambleFeature=function(){var e;0==this.scope.game.totalWin?(this.presentation.createAnimationTimeline("gambleFeatureHideButtons",0,!1,!0,null),e=-this.scope.game.realityReminderLastWin,this.game.placeRealityReminderWinnings(e)):(e=this.scope.game.totalWin-this.scope.game.totalWinBeforeGamble,this.game.placeRealityReminderWinnings(e)),this.presentation.createAnimationTimeline("gambleFeatureEnd",0,!1,!0,null),this.gambleFeatureOpened=!1},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.balanceUpdatePresentation=function(){this.presentation.createAnimationTimeline("UpdateBalance",0,!1,!0,null),this.sound.sounds.BallanceUpdate&&(this.isUKGC()&&this.game.isWinLessThanBet()?this.sound.playSoundOnce("BallanceUpdate",!1,.3):this.sound.playSoundOnce("BallanceUpdate",!1))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getGambleStep=function(){return this.gambleFeatureOutcome?this.gambleFeatureOutcome.gmblstep:this.scope.lastResult&&this.scope.lastResult.gambleOutcome?this.scope.lastResult.gambleOutcome.gmblstep:0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.collectGambleFeature=function(){this.disableGambleOptions(),this.winSumDone||this.fastWinFullStopCallback(),this.winNotCollected=!1,this.presentation.createAnimationTimeline("gambleFeatureHideButtons",0,!1,!0,null),this.presentation.createAnimationTimeline("gambleWinsCollectedByUserAsync",0,!1,!0,null),this.collectPromise=this.q.when(!0),sna.service.tripleBellsProvider.playModes.REPLAY!=this.scope.game.playMode&&(this.collectPromise=this.collectPromise.then(function(){if(this.isRoundCompletePromise)return this.isRoundCompletePromise}.bind(this)).then(this.communication.playGambleFeature.bind(this.communication,"collect")).then(this.processGambleFeatureResponse.bind(this))),this.collectPromise=this.collectPromise.then(this.updateBalance.bind(this,!1)).then(this.balanceUpdatePresentation.bind(this));var e=(e=this.q.when(!0)).then(this.presentation.createAnimationTimeline.bind(this.presentation,"gambleWinsCollectedByUser",0,!1,!0,null));return e=(e=this.game.getParameterValue("stopWinIndividualOnCollect")&&0<this.getGambleStep()?e.then(this.stopWinIndividualAnimation.bind(this)):e.then(this.processWinIndividual.bind(this))).then(function(){this.gambleFeaturePromise&&this.gambleFeaturePromise.resolve(),this.gambleFeatureOpened&&this.endGambleFeature()}.bind(this)),e=sna.service.tripleBellsProvider.playModes.REPLAY!==this.scope.game.playMode?e.then(this.handleRoundCompleted.bind(this)):e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.currencyFormatterFunction=function(e,t){if(this.scope.game.showValuesInCash){var i=angular.copy(this.scope.game.currency);return void 0===t&&(i.sign="",i.sign_after=0),sna.service.util.formatCurrency(e,i)}return e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getGambleWin=function(){if(this.scope.game.showValuesInCash){var e=this.getGambleWinInCoins()*this.game.getCoinValue();return this.game.getParameterValue("preventCurrencyGambleWin")?e:this.currencyFormatterFunction(e,!0)}return this.getGambleWinInCoins()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getGambleWinInCoins=function(){return this.gambleFeatureOutcome?this.gambleFeatureOutcome.isRestore?(this.gambleFeatureOutcome.winmeter,this.gambleFeatureOutcome.prevWinmeter):this.gambleFeatureOutcome.winmeter:Math.round(this.scope.game.totalWin/this.scope.game.coinValue)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getGambleWinRestore=function(){if(this.scope.game.showValuesInCash){var e=this.getGambleWinInCoins()*this.game.getCoinValue();return sna.service.util.formatCurrency(e,this.scope.game.currency)}return 2*this.getGambleWinInCoins()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getGambleColorPay=function(){if(this.scope.game.showValuesInCash){var e=this.getGambleWinInCoins()*this.game.getCoinValue()*2;return this.game.getParameterValue("preventCurrencyGambleWin")?e:this.currencyFormatterFunction(e,!0)}return 2*this.getGambleWinInCoins()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getGambleSuitPay=function(){if(this.scope.game.showValuesInCash){var e=this.getGambleWinInCoins()*this.game.getCoinValue()*4;return this.game.getParameterValue("preventCurrencyGambleWin")?e:this.currencyFormatterFunction(e)}return 4*this.getGambleWinInCoins()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.waitForGambleFeatureToComplete=function(){return this.gambleFeaturePromise.promise},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.stopWinIndividualAnimation=function(){this.winIndividualActive=!1,this.winIndividualDisabled=!0;var e=this.presentation.getById("reels");return e&&e.destroyPresentation&&e.destroyPresentation(),this.presentation.createAnimationTimeline("stopWinIndividual",0,!1,!0,null)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.haltWinIndividualAnimation=function(){return this.winIndividualActive=!1,this.winIndividualDisabled=!1,this.presentation.createAnimationTimeline("haltWinIndividual",0,!1,!0,null)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.afterWinPresentation=function(){var e;return this.game.getParameterValue("prolongedSpinInProgress")&&(this.spinInProgress=!1),this.game.getParameterValue("destroyBigWinsOnComplete")&&(e=this.presentation.gameModeCache,angular.forEach(e,function(e,t){-1!=t.indexOf("bigWin_")&&this.presentation.destroyGameModePresentation(t)},this)),this._afterWinPresentation()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype._afterWinPresentation=function(){var e,t=this.q.when(!0);return 0==this.scope.game.autoplay.left&&this.scope.game.autoplay.active&&(this.stopAutoplay(),this.restoreSpinInterface()),this.shouldPromptGambleDialog()&&(t=(t=t.then(this.userGambleConfirmationDialog.bind(this))).then(this.waitForUserGambleConfirmationToComplete.bind(this))),this.winInProgress=!1,this.winIndividualActive=!1,this.winSumDone=!0,this.scope.lastResult&&this.scope.lastResult.outcome.hasWins&&!this.isMaxWinReached()&&(t=t.then(this.presentation.createAnimationTimeline.bind(this.presentation,"winDone",0,!1,!0,null))),this.scope.game.autoplay&&this.scope.game.autoplay.active&&0==this.scope.game.autoplay.left&&this.handleGambleStopAutoplay(),this.gambleFeatureEnabled&&(e=this.scope.lastResult&&this.scope.lastResult.outcome&&this.scope.lastResult.outcome.features&&this.scope.lastResult.outcome.features.freespins&&this.scope.lastResult.outcome.features.freespins.active,this.scope.game.restoreData&&!this.scope.game.restoreData.gambleRestore&&!this.scope.game.restoreData.gambleActive||e?this.scope.game.feature&&(!this.scope.game.feature||this.scope.game.feature.active)||(t=t.then(this.collectGambleFeature.bind(this))):t=t.then(this.processGambleFeature.bind(this))),sna.service.tripleBellsProvider.playModes.REPLAY!==this.scope.game.playMode&&(t=t.then(this.updateBalance.bind(this,!1)),(e=this.scope.lastResult&&this.scope.lastResult.gambleOutcome)&&e.canGamble||!this.scope.game.totalWin||(this.winNotCollected=!1)),this.scope.game.freeRounds&&this.scope.game.freeRounds.end&&this.scope.game.freeRounds.active&&(t=t.then(this.createTimerPromise.bind(this,.5))),t=(t=(t=(t=this.scope.game.superWheel&&this.isReplay()?t.then(this.processSuperWheelFeature.bind(this)):t).then(this.checkJackpotNotifications.bind(this))).then(this.processPickerBeforeFeature.bind(this))).then(this.processAfterWinPresentation.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processPickerBeforeFeature=function(){var e=this.q.when(!0);return e=this.hasActiveFeaturePicker()?(e=(e=this.game.getParameterValue("beforePickerFeatureAnimation")?e.then(this.presentation.createAnimationTimeline.bind(this.presentation,this.game.getParameterValue("beforePickerFeatureAnimation"))):e).then(this.processFeaturePicker.bind(this,this.scope.lastResult.outcome.features.freespins))).then(this.onFeaturePickerComplete.bind(this)):e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onFeaturePickerComplete=function(){var e=this.q.when(!0),t=this.scope.config.slotFeatures[this.returnIf(this.scope,"lastResult.outcome.features.freespins.name")];return 0==this.returnIf(this.scope.game,"freespins.total")&&(this.scope.game.freespins.active=!1,this.scope.lastResult.outcome.features.freespins.active=!1,t.picker&&t.picker.animations&&t.picker.animations.onLose&&(e=e.then(this.onPickerLose.bind(this,t.picker.animations.onLose)))),e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.hasActiveFeaturePicker=function(){return this.returnIf(this.scope,"lastResult.outcome.features.freespins.pickerActive")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onPickerLose=function(e){var t=this.q.when(!0);return t=(t=(t=t.then(this.presentation.createAnimationTimeline.bind(this.presentation,e))).then(this.setWrapperVisibility.bind(this,!0))).then(this.enableInterface.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.shouldPromptGambleDialog=function(){return this.gambleFeatureEnabled&&sna.service.tripleBellsProvider.playModes.REPLAY!==this.scope.game.playMode&&this.gambleAllowed&&!this.userGambleConfirmation&&!this.game.scope.config.parameters.overrideUserGambleConfirmationDialog&&(0<this.scope.game.totalWin||0<this.activeTotalWin)&&!this.scope.game.autoplay.active&&!this.autoCollectWins&&!(this.gambleFeatureOutcome&&this.gambleFeatureOutcome.isRestore)&&this.game.getParameterValue("newUI")&&!this.returnIf(this,"scope.game.feature.active")&&this.winNotCollected&&!this.isMaxWinReached()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processGambleFeature=function(){if(sna.service.tripleBellsProvider.playModes.REPLAY===this.scope.game.playMode&&!this.scope.game.feature){var e=this.communication.getCommLogRequestParams();if(e)if("btn_collect"==e.event.button)return this.gambleAllowed=!1,this.collectGambleFeature();this.prepareGambleReplay()}return this.gambleFeatureEnabled?this.handleGambleFeature():this.collectGambleFeature()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.prepareGambleReplay=function(){var e,t=this.communication.getCommLogRequestParams(),i=this.communication.getCommLogResponseParams(),n=!1;i&&i.game&&i.game.events&&(n=i.game.events.find(function(e){return"evt_gmbl_enter"==e.type})),t&&("btn_red"==(t=t.event.button)?e="R":"btn_black"==t?e="B":"btn_num0"==t?e="H":"btn_num1"==t?e="D":"btn_num2"==t?e="S":"btn_num3"==t&&(e="C"),this.autoPlayGamble=!this.scope.game.feature,n&&(this.scope.lastResult.gambleOutcome||(this.scope.lastResult.gambleOutcome=n),this.scope.lastResult.gambleOutcome.history=n.history),this.scope.lastResult.gambleOutcome=this.scope.lastResult.gambleOutcome||{},this.scope.lastResult.gambleOutcome.gtype=e)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.goToLink=function(e,t){window.location.replace(t)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.filterSimpleMessage=function(e){var t=document.createElement("DIV");t.innerHTML=e;e=t.children[0].text;return t.removeChild(t.children[0]),{buttonText:e,simpleMessageText:t.textContent||t.innerText||""}},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.detectHTML=function(e){var t=!1;if(/(https?:\/\/[^\s]+)/g.test(e)){var i=document.createElement("html");i.innerHTML=e;for(var n=i.getElementsByTagName("a"),s=0;s<n.length;s++)t=n[s].getAttribute("href");return{messages:this.filterSimpleMessage(e),url:t}}return!1},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.confirmSimpleMessageRead=function(e,t){this.userConfirmed(e,"simpleMessageRead"+t)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleSimpleMessages=function(e){var t=this.q.when(!0);return this.simpleMessageActive?t:t=(t=!0===e&&this.collectPromise?this.collectPromise:t).then(function(){if(this.scope.game&&this.scope.game.simpleMessageArr&&0<this.scope.game.simpleMessageArr.length&&!this.simpleMessageActive){this.scope.game.autoplay&&this.scope.game.autoplay.active&&this.isMaxWinReached()&&this.stopAutoplay(),this.isMaxWinReached()&&this.updateWrapperGameMessage("EMPTY"),this.simpleMessageActive=!0;var n=this.q.when(!0);return this.scope.game.simpleMessageArr.forEach(function(e,t){var i;e!=this.scope.game.freeRounds.message&&(i=this.game.getParameterValue("simpleMessageStagger")||.2,n=(n=(n=(n=(n=n.then(function(e,t){var i=this.detectHTML(e);i&&(i.url&&(this.scope.game.simpleMessageUrl=i.url),i.messages&&i.messages.simpleMessageText&&(e=i.messages.simpleMessageText),i.messages&&i.messages.buttonText&&(this.scope.game.simpleMessageButtonText=i.messages.buttonText)),this.scope.game.simpleMessage=e,this.scope.game.simpleMessageIndex=t}.bind(this,e,t))).then(this.presentation.createAnimationTimeline.bind(this.presentation,"showSimpleMessageDialog",0,!1,!0,null))).then(function(){return this.waitForUserConfirmation("simpleMessageRead"+this.scope.game.simpleMessageIndex)}.bind(this))).then(function(){return this.winNotCollected=!1,this.presentation.createAnimationTimeline("hideSimpleMessageDialog",0,!1,!0,null)}.bind(this))).then(this.createTimerPromise.bind(this,i)))}.bind(this)),n=n.then(function(){this.scope.game.simpleMessageArr=[],this.simpleMessageActive=!1,this.scope.game.simpleMessageButtonText=!1}.bind(this))}}.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isReplay=function(){return sna.service.tripleBellsProvider.playModes.REPLAY==this.scope.game.playMode},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.showPaylineWin=function(){return!this.isMaxWinReached()&&this.gambleCompleted},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.featureEndCondition=function(e){return e.active&&e.end},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.featureUpdateCondition=function(e){return e.active&&!e.start&&!e.end},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processAfterWinPresentation=function(){this.gambleCompleted=!0,this.fastWinStopClicked=!1;var e=this.scope.lastResult,t=e.outcome,i=t.features,n=null,s=null,r=null;angular.forEach(i,function(e){e.active&&e.start&&!e.started&&(!s||e.priority>s.priority)&&(s=e),this.featureEndCondition(e)&&(!n||e.priority>n.priority)&&(n=e),this.featureUpdateCondition(e)&&(!r||e.priority>r.priority)&&(r=e)},this);var o=this.q.when(!0);o=o.then(this.updateBalance.bind(this,!1)),s||r||n||(o=o.then(this.handleAutoplayPauseAfterWin.bind(this))),sna.service.tripleBellsProvider.playModes.REPLAY!==this.scope.game.playMode&&(this.gambleFeatureEnabled&&this.gambleFeatureOutcome||(!this.scope.game.freeRounds.active||!this.scope.game.freeRounds.end||this.scope.game.freeRounds&&this.scope.game.freeRounds.end&&this.scope.game.feature&&this.scope.game.feature.active&&!this.scope.game.feature.end||this.isReplay())&&this.shouldHandleRoundCompleted()&&(o=o.then(function(){this.isRoundCompletePromise=this.handleRoundCompleted()}.bind(this)))),this.spinInProgress||(this.presentation.createAnimationTimeline("afterWinAsync",0,!1,!0,null),o=o.then(this.presentation.createAnimationTimeline.bind(this.presentation,"afterWin",0,!1,!0,null)));var a,l,h,c,p=this.scope.game.winnings.length;return(this.game.getParameterValue("showWinIndividual")||this.isQuattroGame)&&(p=!0),Array.isArray(this.scope.game.winnings)||Object.keys(this.scope.game.winnings)&&Object.keys(this.scope.game.winnings).length&&(p=-1<Object.values(this.scope.game.winnings).findIndex(function(e){return 0<e.length})),this.isMaxWinReached()&&(i||"FREE_SPINS"!=this.wrapperButtonsState||(n={name:"fs",active:!0,start:!1,end:!0,totalWin:this.game.getGameSettingsProperty("maxWin")})),n&&(o=(o=(o=(h=this.scope.config.slotFeatures[n.name]).showWinIndividual?o.then(this.showFreeSpinsWinIndividual.bind(this)):o).then(this.beforeFeatureFinish.bind(this,n,t,e))).then(this.finishFeature.bind(this,n,t,e))),!h||"end"!=h.destoryOn||s||r||(o=(o=o.then(this.enableInterface.bind(this))).then(this.restoreSpinInterface.bind(this))),s&&(this.handleRealityReminder(),(c=this.scope.game.autoplay)&&c.stopOnFeature||c&&c.active&&(c.freeSpinsFromAutoplay=!0),(this.game.getParameterValue("newUI")?this.game.autoplayThresholdTriggered()&&!this.returnIf(this,"scope.game.feature.active")||this.autoplayJackpotThresholdActive&&this.autoplayJackpotThresholdTriggered:this.game.autoplayThresholdTriggered()||this.autoplayJackpotThresholdActive&&this.autoplayJackpotThresholdTriggered)&&(this.presentation.createAnimationTimeline("showAutoplayLimitDialog",0,!1,!0),this.autoplayJackpotThresholdTriggered=!1),o=(o=(o=o.then(this.beforeFeatureStart.bind(this,s))).then(this.startFeature.bind(this,s,t,e))).then(this.afterFeatureStart.bind(this,s)),this.game.getParameterValue("displayWinsOnFreeSpinStart")||(p=!1)),o=o.then(this.unloadSpinAssets.bind(this)),r&&!s&&((a=this.scope.game.feature).retrigger&&this.game.getParameterValue("hasActionOnFsRetrigger")&&(o=o.then(this.beforeFeatureStart.bind(this,s))),a.retrigger&&this.game.getParameterValue("updateWinAfterFsRetrigger")||(o=o.then(this.updateFeature.bind(this,r,t,e))),t=this.scope.config.slotFeatures[r.name],o=this.isFeatureSpinAuto(t)?(p=!1,t.showWinIndividual&&(o=o.then(this.showFreeSpinsWinIndividual.bind(this))),e=this.game.getParameterValue("freespinsDelaySpin"),t=this.game.getParameterValue("freespinsWinDelaySpin"),e&&(o=o.then(this.createTimerPromise.bind(this,e))),(o=t&&this.scope.game.winnings.length?o.then(this.createTimerPromise.bind(this,t)):o).then(this.spin.bind(this,null))):(o=o.then(this.playWinIndividualAnimation.bind(this))).then(this.enableFreeSpinsInterface.bind(this))),n&&p&&"FreeSpins"==h.type&&(this.game.getParameterValue("displayWinsAfterFreeSpins")||(p=!1)),i&&!n||delete this.scope.game.superWheelOutcome,!this.isQuattroGame&&!this.game.getParameterValue("showWinIndividual")||this.scope.lastResult.outcome.win||(p=!1),s||r||n||(c=this.scope.game.autoplay)&&c.active&&c.left||(o=o.then(this.processFreeRoundsStartDialog.bind(this)).then(function(){if(!this.scope.game.freeRounds.active&&this.additionalConditionOnAfterWinInterfaceEnabled())return this.enableInterface()}.bind(this))),s||r||n||(l=this.scope.game.freeRounds)&&l.active&&l.end&&1<this.scope.game.autoplay.left&&(this.stopAutoplay(),this.restoreSpinInterface()),s||r||n||(o=(o=o.then(this.handleFreeRounds.bind(this))).then(function(){if(this.isVisibleSuperStake()&&this.scope.game.activeGameTypeIndex===this.game.getGameTypeIndexByBetMode(this.game.getSuperStakeBmodeValue())&&!this.scope.game.ssActive)return this.activateSuperStake(this.presentation.getById("superStakeBtnPlus"),!1,!1)}.bind(this)),this.handleRealityReminder(),h=this.scope.game,(c=h.autoplay).disabled=!1,o=o.then(function(){var e=this.game.getParameterValue("newUI")?this.game.autoplayThresholdTriggered()||this.autoplayJackpotThresholdActive&&this.autoplayJackpotThresholdTriggered&&!this.returnIf(this,"scope.game.feature.active"):this.game.autoplayThresholdTriggered()||this.autoplayJackpotThresholdActive&&this.autoplayJackpotThresholdTriggered;if(e){this.presentation.createAnimationTimeline("showAutoplayLimitDialog",0,!1,!0),c.totalWin>c.winThreshold&&this.handleGambleCollect(),this.stopAutoplay(),this.restoreSpinInterface(),this.autoplayJackpotThresholdTriggered=!1;e=this.game.getParameterValue("autoplayLimitDialog");if(e)return this.waitForUserConfirmation("autoplayLimitDialog")}this.shouldStopAutoplay()&&this.stopAutoplay()}.bind(this)),c.active&&c.left||this.isSpaceBarHeldDown?(c.active&&c.left&&(i=this.game.getParameterValue("turboAutoPlayDelay"),l=this.game.getParameterValue("autoPlayDelay"),h=this.game.getParameterValue("autoPlayWinDelay"),this.scope.game.turboMode&&void 0!==i&&(h=l=i),!this.scope.lastResult.outcome.hasWins&&l&&(o=o.then(this.createTimerPromise.bind(this,l))),this.scope.lastResult.outcome.hasWins&&h&&(o=o.then(this.createTimerPromise.bind(this,h)))),o=o.then(function(){var e=this.q.when(!0);return c.active&&0<c.left&&!c.disabled||this.isSpaceBarHeldDown?e=e.then(this.spin.bind(this)):(this.restoreSpinInterface(),this.enableInterface(),this.playIdleAnimations()),e}.bind(this)),p=!1):(this.featureConditionInterfaceEnabled()&&this.enableInterface(),this.playIdleAnimations())),n||(c=this.scope.game.autoplay,o=o.then(this.handleSimpleMessages.bind(this,!c.active||0==c.left))),p&&(o=o.then(this.processWinIndividual.bind(this))),s||r||n||p||(this.handleRealityReminder(),this.scope.game.mode(sna.model.slot.MODE_IDLE)),s||r||n||!this.pendingFreeRounds||(this.scope.game.freeRounds.active=!0,this.setFreeRounds(),this.pendingFreeRounds=!1),o=o.then(this.presentation.unloadTextures.bind(this.presentation)),this.winInProgress=!1,o=sna.service.tripleBellsProvider.playModes.REPLAY!==this.scope.game.playMode?o.then(function(){this.isRoundComplete=!0}.bind(this)):o},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.shouldStopAutoplay=function(){return!1},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.shouldHandleRoundCompleted=function(){return!0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.featureConditionInterfaceEnabled=function(){return!this.scope.game.feature},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.additionalConditionOnAfterWinInterfaceEnabled=function(){return!0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.unloadSpinAssets=function(){return this.q.when(!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.waitForUserConfirmation=function(e,t){var i=this.scope.game.autoplay,n=this.scope.game.feature;if(i&&i.freeSpinsFromAutoplay&&!i.stopOnFeature&&!this.isUKGC()&&n&&n.start&&this.messageHasConfirmationTimer(e)){n=this.game.getParameterValue("startFeatureTiming")||7;return this.fsTimerPromise=this.createTimerPromise(n,!0,"fsStartTimerPromise"),this.game.getParameterValue("overrideStopOnBonusBeforeFsStart")?this.stopOnBonusOverrided(this.fsTimerPromise):this.fsTimerPromise}return t&&this.presentation.createAnimationTimeline(t,0,!1,!0,null),void 0===this.confirmPromises&&(this.confirmPromises={}),this.confirmPromises[e]=this.q.defer(),this.confirmPromises[e].promise},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.messageHasConfirmationTimer=function(e){return"fsStart"===e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.stopOnBonusOverrided=function(e){return e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.openGameSettings=function(){var e=this.scope.gameRules.replace(/ /gi,"%20");window.open(e,"_blank")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.userConfirmed=function(e,t,i,n){var s=this.q.when(!0);return this.userConfirmedAdditionalAction(e,t,i,n),null!=e&&"object"==typeof e&&e.disable(),"freeRounds"==t&&"hideFreeRoundsStartDialog"==i&&(0==n?this.scope.game.userDeclinedFreeRounds=!0:this.scope.game.userAcceptedFreeRounds=!0),"freeRoundsEnd"==t&&this.game.getParameterValue("newUI")&&(this.scope.game.userAcceptedFreeRounds=!1,this.isReplay()||this.handleRoundCompleted(),this.betValueBeforeFreeRounds&&this.setBet(null,null,this.betValueBeforeFreeRounds),this.game.getGameSettingsProperty("superStakeActive")&&(s=(s=s.then(this.createTimerPromise.bind(this,.2))).then(function(){this.activateSuperStake()}.bind(this)))),this.fsTimerPromise&&this.messageClearsConfirmationTimer(t)&&this.timerContinueCallback?(this.timerContinueCallback(),this.q.when(!0)):(null!=t&&void 0!==this.confirmPromises&&null!==this.confirmPromises&&void 0!==this.confirmPromises[t]&&null!==this.confirmPromises[t]?this.confirmPromises[t].resolve(n):log(this,"userConfirmed",sna.log.ERROR,"No such message confirmation"+t),void 0!==i?this.presentation.createAnimationTimeline(i,0,!1,!0,null):(this.timerContinueCallback&&this.messageClearsConfirmationTimer(t)&&this.timerContinueCallback(),s))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.messageClearsConfirmationTimer=function(e){return"fsStart"===e||"fsStartDialogConfirmation"===e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.userConfirmedAdditionalAction=function(e,t,i,n){},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.createTimerPromise=function(e,t,i){var n=this.q.defer();sna.debug.logJsDelays&&console.log("js delay: "+e),t=void 0===t||t;function s(){n.resolve(t),this.timerContinueCallback&&(this.timerContinueCallback=null)}return"fsStartTimerPromise"==i&&(this.timerContinueCallback=s),this.timer=window.setTimeout(s,1e3*e),n.promise},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleAutoplayPauseAfterWin=function(){var e,t=this.q.when(!0);return!this.gambleAllowed&&this.winNotCollected&&1<this.scope.game.autoplay.left&&!this.scope.game.autoplay.active&&this.scope.game.autoplay.paused&&(t=t.then(this.collectGambleFeature.bind(this)),e=this.game.getParameterValue("autoPlayWinDelay")||.5,t=t.then(this.createTimerPromise.bind(this,e))),t},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processWinIndividual=function(){this.scope.game.mode(sna.model.slot.MODE_WIN_INDIVIDUAL),this.spinInProgress||this.playWinIndividualAnimation()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setGameRulesUrl=function(){var e=["de_DE","da_DK","es_ES","el_GR","hr_HR","nl_NL","ro_RO","it_IT","sv_SE","en_US","pt_BR","br_BR"],t=this.game.getParameterValue("gameRulesUrl"),i=this.scope.game.language.split("_")[1];e&&-1!=e.indexOf(this.scope.game.language)&&"en"!=this.scope.game.language.split("_")[0]?-1<["sv_SE"].indexOf(this.scope.game.language)&&(i=this.scope.game.language.split("_")[0].toUpperCase()):i="",-1!==e.indexOf(this.scope.game.language)&&void 0!==this.game.getParameterValue("gameRulesUrl"+i)&&(t=this.game.getParameterValue("gameRulesUrl"+i)),this.game.getParameterValue("replaceDLGameRules")&&(e=this.scope.game.rtp.slice(0,2),this.game.getParameterValue("noSliceRTP")&&(e=this.scope.game.rtp),(i=/\d{2}(\.|\,)\d{0,2}/).test(t)&&(t=t.replace(i,e))),void 0!==t&&(this.scope.game.forceSingleGame&&-1!=t.indexOf(" NoQuattro")||this.scope.game.forceSingleGame||-1==t.indexOf(" NoQuattro")||(t=t.replace(" NoQuattro",""))),this.scope.gameRules=sna.service.DEFAULT_ASSET_PATH+t},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setGameRulesUrl2=function(){this.scope.gameRules=sna.service.DEFAULT_ASSET_PATH+gameRulesLocation},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleRoundCompleted=function(){if(sna.service.tripleBellsProvider.playModes.REPLAY===this.scope.game.playMode)return this.q.when(!0);var e=this.getRoundCompleteSaveConfiguration();return this.gambleFeatureEnabled&&this.collectPromise?this.collectPromise.then(function(){return this.communication.roundCompleted(e).then(function(){this.roundCompleteDeferred&&(this.roundCompleteDeferred.resolve(),this.spinCycleActive=!1)}.bind(this))}.bind(this)):this.communication.roundCompleted(e).then(function(){this.roundCompleteDeferred&&(this.roundCompleteDeferred.resolve(),this.spinCycleActive=!1)}.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getRoundCompleteSaveConfiguration=function(){var e=null,t=this.scope.game.feature;return(this.scope.game._buyBonusActivated&&t&&t.end||this.clearBuyBonusActivated)&&(this.scope.game._buyBonusActivated=!(e={_buyBonusActivated:!1}),this.clearBuyBonusActivated&&(this.clearBuyBonusActivated=!1)),e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isFeatureSpinAuto=function(){return!(this.scope.game._buyBonusActivated&&this.scope.game.buyBonusManualSpin)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.playBonusLandingSound=function(e){},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.customPlaySound=function(e){},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.playReelStopSound=function(){var e=this.scope.config.slot.reels[0].number;this.activeReelIndex<e&&(this.reelStopSoundPlayed&&this.fastSpinStopClicked||(this.fastSpinStopClicked&&(this.reelStopSoundPlayed=!0),e="ReelStop",e+=this.activeReelIndex,this.sound.sounds[e]&&this.sound.playSound(e,!1),this.sound.sounds.ReelStop&&this.sound.playSound("ReelStop",!1),this.activeReelIndex++))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.playSpinStartSound=function(){this.activeSpinStartSoundIndex=this.activeSpinStartSoundIndex%5;var e="ReelSpin"+this.activeSpinStartSoundIndex;this.sound.sounds[e]&&this.sound.playSoundOnce(e,!1),this.activeSpinStartSoundIndex++},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.goToSettingsAutoplay=function(){var e=new this.timeline,t=this.presentation.getById("tabsSettings");this.presentation.getById("spinSettingsScrollable");e.call(function(){this.game.getParameterValue("newUI")?(this.resetAutoplayValues(),this.presentation.createAnimationTimeline("showAutoplaySettingsPanel",0,!1,!0)):this.presentation.createAnimationTimeline("showSettingsPanel",0,!1,!0),t.showTabByIndex(1)},[],this)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.startAutoplayMarket=function(){var e="ButtonAutoplayStart",t="ButtonGeneral";this.scope.game.autoplay.start=!0,this.presentation.main.environment.is(sna.service.ENVIRONMENT_DESKTOP)?this.isTargetMarket("OTHER")||this.game.isInMode(sna.model.slot.MODE_SPIN,sna.model.slot.MODE_STOP,sna.model.slot.MODE_WIN)||this.game.isAutoplayPaused()?(this.startOrResumeAutoplay(null),this.sound.sounds[e]&&this.sound.playSoundOnce(e,!1)):(this.goToSettingsAutoplay(),this.sound.sounds[t]&&this.sound.playSoundOnce(t,!1)):this.isTargetMarket("OTHER")?(this.startAutoplayMobile=!1,this.startAutoplay(null),this.sound.sounds[e]&&this.sound.playSoundOnce(e,!1)):(this.startAutoplayMobile=!0,this.goToSettingsAutoplay(),this.sound.sounds[t]&&this.sound.playSoundOnce(t,!1))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.formatNumberString=function(e,t,i){var n=e.toString(),t=void 0===t?n.length:t;if(n.length<=t)return n;var s,i=void 0===i?1:i;return 1e6<=e?(s=new RegExp("^-?\\d+(?:.\\d{0,"+(i||-1)+"})?"),n=(e/1e6).toString().match(s)[0]+sna.service.tripleBellsProvider.M_Symbol):1e3<=e&&(s=new RegExp("^-?\\d+(?:.\\d{0,"+(i||-1)+"})?"),n=(e/1e3).toString().match(s)[0]+sna.service.tripleBellsProvider.K_Symbol),n},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.displayError=function(e){if(this.communication.lastErrorCode!==sna.service.tripleBellsProvider.CODE_INSUFFICIENT_FUNDS&&(this.handleAutoplayOnError(),!this.isPokerStars())){this.presentation.main.environment.is(sna.service.ENVIRONMENT_DESKTOP);var t=this.presentation.getById("errorDialogMessage");switch(e.type){case sna.error.SCRIPT_ERROR:t.updatePresentation(!0);break;case sna.error.ANGULAR_ERROR:t.text=this.scope.translations.ERROR_ANGULAR_MESSAGE,t.scope.config.text=this.scope.translations.ERROR_ANGULAR_MESSAGE,t.updatePresentation(!0);break;case sna.error.COMMUNICATION_ERROR:case sna.error.SOCKET_ERROR:t.text=this.scope.translations.ERROR_COMMUNICATION_MESSAGE,t.scope.config.text=this.scope.translations.ERROR_COMMUNICATION_MESSAGE,t.updatePresentation(!0);break;case sna.error.GAME_CLIENT_OBSOLETE:t.text=e.message.slice(0,200),t.scope.config.text=e.message.slice(0,200),t.updatePresentation(!0),this.anotherClientInitiialized=!0;break;case sna.error.GAME_SESSION_CLOSED:t.text=e.message.slice(0,200),t.scope.config.text=e.message.slice(0,200),t.updatePresentation(!0);break;case sna.error.BACKEND_ERROR:t.text=e.message.slice(0,200),t.scope.config.text=e.message.slice(0,200),t.updatePresentation(!0),this.backendError=!0}return this.handleSpacebarOnError(!0),this.presentation.createAnimationTimeline("showErrorDialog",0,!1,!0)}},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleSpacebarOnError=function(e){this.presentation.main.environment.is(sna.service.ENVIRONMENT_DESKTOP)&&(e||(e=this.game.getParameterValue("markets"),this.isTargetMarket(e.other)?this.presentation.getById(this.getToggleSpacebarSpinOtherId()):this.presentation.getById(this.getToggleSpacebarSpinUkgcId())))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleAutoplayOnError=function(){var e=this.scope.game.autoplay;(e.active||!e.active&&e.paused)&&this.stopAutoplay()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.closeErrorDialog=function(){this.presentation.createAnimationTimeline("hideErrorDialog",0,!1,!0,null),this.backendError=!1},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.toggleDesktopFullScreenInterfaceService=sna.service.tripleBellsProvider.TripleBellsInterface.prototype.toggleDesktopFullScreen,sna.service.tripleBellsProvider.TripleBellsInterface.prototype.toggleDesktopFullScreen=function(){this.sound.playSoundOnce("ButtonGeneral",!1),this.toggleDesktopFullScreenInterfaceService()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.requestFullScreen=function(){var e;!function(){try{return window.self!==window.top}catch(e){return!0}}()&&(e=this.scope.layout,sna.debug.preventFullscreen||e.has(sna.service.ENVIRONMENT_IOS)||e.has(sna.service.ENVIRONMENT_DESKTOP)&&!1===this.forceFullScreen||(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||(document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen?document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen()),this.forceFullScreen=!1))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateMaxBetButtonSlotInterfaceService=sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateMaxBetButton,sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateMaxBetButton=function(){this.presentation.getById("maxBetButton").setToggleState(this.isMaxBet())},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.activateSuperStake=function(e,t,i){if(this.scope.game.ssActive)return this.q.when(!0);var n=this.scope.game&&this.scope.game.freeRounds&&0<this.scope.game.freeRounds.left&&this.scope.game.freeRounds.accepted;return!i&&(this.blockClicks||n||this.spinInProgress)?this.q.when(!0):(this.ssWasToggled=!0,this.scope.game.feature||this.sound.playSoundOnce("SuperStakeBackgroundMusic",!0,1),this.presentation.createAnimationTimeline("superStakeActivated",0,!1,!0),this.game.getParameterValue("toggleGameModeOnSuperStake")&&this.setGameType(!1,this.game.getGameTypeIndexByBetMode(this.game.getSuperStakeBmodeValue())),this._activateSuperStake(e,t,i))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype._activateSuperStake=function(e,t,i){if(!(this.scope.game&&this.scope.game.freeRounds&&0<this.scope.game.freeRounds.left&&this.scope.game.freeRounds.accepted)){e&&e.disable();var n=this.presentation.getById(this.getSpinButtonId());if(n.disable(),this.setSuperStakeModel(!0),this.additionalSuperStakeMethods(),this.handleSuperStakeActivationPresentations(!0),this.autoUpdatePresentation(),this.toggleSuperStakePromise=this.saveSuperStakeState(!0),this.triggerEvent("betChanged"),this.presentation.createAnimationTimeline("animateLogoSuperStake",0,!1,!0,null),i)return this.presentation.createAnimationTimeline("setSuperStakeUserInterface",0,!1,!0,null),this.q.when(!0).then(this.handleAfterSuperStakeActivation.bind(this,n,i,!0));var s=this.presentation.createAnimationTimeline("setSuperStakeUserInterface",0,!1,!0,null),e=sna.service.tripleBellsProvider.playModes.REPLAY!=this.scope.game.playMode&&this.game.getParameterValue("updateBetConfigurationOnSuperStake")&&!this.spinInProgress?this.communication.updateBetConfiguration(this.getSpinRequestParams()):this.q.when(!0);return this.q.all([s,e,this.toggleSuperStakePromise]).then(function(){this.scope.game.totalWin&&this.stopWinIndividualAnimation()}.bind(this)).then(this.handleAfterSuperStakeActivation.bind(this,n,i,!0))}},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.deactivateSuperStake=function(e,t){return(this.blockClicks||this.spinInProgress)&&"REPLAY"!=this.scope.game.playMode?this.q.when(!0):(this.scope.game.feature||this.sound.stopSound("SuperStakeBackgroundMusic"),this.game.getParameterValue("toggleGameModeOnSuperStake")&&this.setGameType(!1,0),this._deactivateSuperStake(e,t))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype._deactivateSuperStake=function(e,t){var i=this.presentation.getById(this.getSpinButtonId());i.disable(),this.isInReplay()||this.setSuperStakeModel(!1),this.additionalSuperStakeMethods(),this.handleSuperStakeActivationPresentations(!1),this.autoUpdatePresentation(),e&&e.disable(),this.toggleSuperStakePromise=this.toggleSuperStakePromise=this.saveSuperStakeState(!1),this.triggerEvent("betChanged");var n=this.presentation.createAnimationTimeline("resetSuperStakeUserInterface",0,!1,!0,null),e=this.game.getParameterValue("updateBetConfigurationOnSuperStake")&&!this.spinInProgress?this.communication.updateBetConfiguration(this.getSpinRequestParams()):this.q.when(!0);return this.q.all([n,e,this.toggleSuperStakePromise]).then(function(){this.scope.game.totalWin&&this.stopWinIndividualAnimation()}.bind(this)).then(this.handleAfterSuperStakeActivation.bind(this,i,!1,!1))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.additionalSuperStakeMethods=function(){},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setSuperStakeModel=function(e){var t=1;this.game.getParameterValue("preventModelUpdateSuperStakeMultiplier")||(e?t=this.game.getSuperStakeMultiplier():this.isReplay()||(t=1/this.game.getSuperStakeMultiplier()));var i=1,n=0;e&&(i=this.game.getSuperStakeBmodeValue(),n=this.game.getDefaultBmodeValue());i=this.game.getGameTypeIndexByBetMode(i);this.scope.game.freeRounds&&this.scope.game.freeRounds.active||this.game.setActiveGameTypeIndex(i||n),this.scope.game.autoplay.winDecreaseThreshold=this.scope.game.autoplay.winDecreaseThreshold*t,this.superStakeActive=e,this.scope.game.ssActive=e,this.blockClicks=e,sna.service.tripleBellsProvider.playModes.REPLAY!=this.scope.game.playMode&&(this.scope.game.bet*=t,this.scope.game.lastBet=this.scope.game.lastBet*t,this.scope.game.maxBet=this.scope.game.maxBet*t),this.superStakeInProgress=!0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleSuperStakeActivationPresentations=function(e){var t=this.presentation.getById("superStakeBtnMinus"),i=this.presentation.getById("superStakeBtnPlus"),n=this.presentation.getById("superStakeBlockingInterface"),s=this.presentation.getById("superStakeBlockingInterfaceMobile");n&&n.show(),s&&s.show(),e?(i.hide(),t.show(),t.disable()):(i.show(),i.disable(),t.hide());t=this.presentation.getById("superStakeButton");t&&t.setToggleState(e);t=this.presentation.getById("superStakeButtonMobile");t&&t.setToggleState(e)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.saveSuperStakeState=function(e){var t=this.q.when(!0);return this.scope.game.freeRounds&&this.scope.game.freeRounds.active?t:(this.game.setGameSettingsProperty("superStakeActive",e),this.roundCompletePromise&&(t=t.then(function(){return this.roundCompletePromise}.bind(this))),this.collectPromise&&(t=t.then(this.collectPromise)),sna.service.tripleBellsProvider.playModes.REPLAY!=this.scope.game.playMode?t.then(this.communication.saveGameSettings.bind(this.communication)):t)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleAfterSuperStakeActivation=function(e,t,i){this.toggleSuperStakePromise=null,this.blockClicks=!1,this.ssWasToggled=!1;var n=this.presentation.getById("superStakeBlockingInterface");n&&n.hide();var s,n=this.presentation.getById("superStakeBlockingInterfaceMobile");n&&n.hide(),i?(s=this.presentation.getById("superStakeBtnMinus"))&&!t&&s.enable():(s=this.presentation.getById("superStakeBtnPlus"))&&s.enable(),this.superStakeInProgress=!1,t||e.enable();t=this.presentation.getById("settingsPageBet"),e=this.presentation.getById("settingsPageBetMobile");t&&t.updatePresentation(),e&&e.updatePresentation(),this.updateWrapperBetValue()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.wasSuperStakeActive=function(){return this.game.getGameSettingsProperty("superStakeActive")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setSuperStakeDialogText=function(){return null},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processSuperStake=function(e,t){var i=this.q.when(!0),n=this.wasSuperStakeActive();n||sna.service.tripleBellsProvider.playModes.REPLAY!=this.scope.game.playMode||(n=0<this.scope.game.activeGameTypeIndex);var s=this.game.getGameSettingsProperty("super_stake_prompted"),r=e.slot&&e.slot.freeRounds&&e.slot.freeRounds.start,o=e.slot&&e.slot.freeRounds&&(0<e.slot.freeRounds.left||e.slot.freeRounds.end),a=e.restoreData&&e.restoreData.previousOutcome&&e.restoreData.previousOutcome.features&&e.restoreData.previousOutcome.features.freespins&&e.restoreData.previousOutcome.features.freespins.active;return this.game.getSuperStakeBmodeValue()==e.slot.gameTypes[e.slot.activeGameIndex].bmode?i=i.then(this.activateSuperStake.bind(this,this.presentation.getById("superStakeBtnPlus"),!1,t)):s?!n||o&&!this.freeRoundsPostponed||(i=this.shouldRestoreSuperStake()?i.then(this.restoreSuperStake.bind(this)):i.then(this.activateSuperStake.bind(this,this.presentation.getById("superStakeBtnPlus"),!1,t))):e&&e.slot&&"REPLAY"!=e.slot.playMode&&(!r&&!o||this.freeRoundsPostponed)&&!a?i=(i=i.then(this.processSuperStakeDialog.bind(this))).then(function(){this.enableInterface()}.bind(this)):n?i=i.then(this.activateSuperStake.bind(this,this.presentation.getById("superStakeBtnPlus"),!1,t)):(t=this.game.getGameTypeIndexByBetMode(this.game.getDefaultBmodeValue()),this.game.setActiveGameTypeIndex(t||0)),i},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getFreeRoundsPreviousTotalWin=function(e){return e.toFixed(this.scope.game.currency.decimals)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.shouldRestoreSuperStake=function(){return 0!==Number(this.returnIf(this,"scope.game.restoreData.previousOutcome.win"))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.restoreSuperStake=function(){return this.scope.game.ssActive?this.q.when(!0):this.activateSuperStake(this.presentation.getById("superStakeBtnPlus"),!1,!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processSuperStakeDialog=function(){this.game.setGameSettingsProperty("super_stake_prompted",!0);var e=this.waitForUserConfirmation("superStake"),t=this.communication.saveGameSettings(),i=this.presentation.createAnimationTimeline("showSuperStaketDialog",0,!1,!0,null);return this.q.all([e,t,i]).then(this.handleSuperStakeDecision.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleSuperStakeDecision=function(e){if("true"==e[0])return this.activateSuperStake(this.presentation.getById("superStakeBtnPlus"),!0);this.presentation.getById("superStakeBtnPlus").show(),this.presentation.getById("superStakeBtnPlus").enable(),this.presentation.getById("superStakeBtnMinus").hide(),this.presentation.getById("superStakeBtnMinus").disable()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.toggleSuperStake=function(e){var t;this.blockClicks||(this.superStakeActive?(t=this.presentation.getById("superStakeBtnMinus"),this.sound.playSoundOnce("DeactivateSuperStakeSound"),this.deactivateSuperStake(t,!0)):(t=this.presentation.getById("superStakeBtnPlus"),this.sound.playSoundOnce("ActivateSuperStakeSound"),this.activateSuperStake(t,!0)))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getAutoUpdate=function(){return this.scope.game.playMode!==sna.service.tripleBellsProvider.playModes.REPLAY},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateMaxBetToggle=function(){var e=this.presentation.getById("maxBetSettings1"),t=this.presentation.getById("maxBetSettings2"),i=this.scope.game.isMaxBet()&&this.scope.game.isMaxCoinValueLevel();e&&e.setToggleState(i),t&&t.setToggleState(i)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.maxBetToggleSlotInterface=sna.service.tripleBellsProvider.TripleBellsInterface.prototype.maxBetToggle,sna.service.tripleBellsProvider.TripleBellsInterface.prototype.maxBetToggle=function(e){var t,i,n,s;this.presentation.scope.layout.has(sna.presentation.MINI_LAYOUT)&&!e.toggleState||this.hasOnlyOneBet()?e.setToggleState(!0):(t=this.game.getParameterValue("newUI"),this.scope.game.lastCoinValue||(this.scope.game.lastCoinValue=this.scope.game.lastSpinCoinValue),e.toggleState?(this.game.setMaxBetCoinValue(),t&&!e.scope.config.onPressSound&&e.scope.config.onActivateSound&&this.sound.sounds[e.scope.config.onActivateSound]&&this.sound.sounds[e.scope.config.onActivateSound].play()):t?e.setToggleState(!0):this.game.restoreMaxBetCoinValue(),s=this.presentation.getById("totalBetPlusBtn"),n=this.presentation.getById("totalBetMinusBtn"),(i=this.presentation.getById("SelectCoinValue"))&&i.nextBtn&&i.previousBtn&&(s=i.nextBtn,n=i.previousBtn),e.toggleState?s&&(s.disable(),n.enabled||n.enable()):s&&(s.enable(),n.enabled&&n.disable()),this.maxBetToggleSlotInterface(e),s=this.presentation.getById("maxBetText"),(n=this.presentation.getById("SelectCoin"))&&n.updatePresentation(),(n=this.presentation.getById("balanceValue"))&&n.updatePresentation(),(n=this.presentation.getById("footerBetLabel"))&&n.updatePresentation(),(n=this.presentation.getById("footerBalanceLabel"))&&n.updatePresentation(),s&&!t&&e.toggleState&&(s.scope.config.fill="#9d9d9d",s.style.fill="#9d9d9d"),!s||t||e.toggleState||(s.scope.config.fill="#39d52d",s.style.fill="#39d52d"),this.triggerMysteryUpdate&&this.triggerEvent(sna.service.tripleBellsProvider.events.MYSTERY_UPDATED),(s=this.presentation.getById("totalBetRadioButtons"))&&s.updatePresentation(),(s=this.presentation.getById("footerWinLabel"))&&s.setText(this.resetFooterWinLabel()),s=this.presentation.getById("totalBetValue"),i&&((s=i).activeIndex=i.options.length-1),s&&s.updatePresentation(),t||e.disable(),this.presentation.createAnimationTimeline("switchOn",0,!1,!0,null),this.presentation.createAnimationTimeline("betParamChange",0,!1,!0,null),this.stopWinIndividualAnimation(),this.onBetChanged("maxBet"),this.setBuyFeatureState())},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onBetChanged=function(e){},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.hasOnlyOneBet=function(){var e=this.scope.game.coinValues||[],t=this.scope.game.bets||[];return e.length<2&&t.length<2},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.maxBetClicked=function(e){},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.toggleTouchAnywhere=function(e){e.toggleState?(this.touchAnywhereEnabled=!0,this.addGlobalPressCallback(this.touchAnywhereCallback,!1)):(this.touchAnywhereEnabled=!1,this.removeGlobalPressCallback(this.touchAnywhereCallback))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.removeTouchAnywhereCallback=function(){return this.touchAnywhereEnabled&&this.removeGlobalPressCallback(this.touchAnywhereCallback),this.q.when(!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.createTouchAnywhereCallback=function(){return function(){var e,t;this.gambleFeatureOpened||this.isDialogOpened||(this.disableTouchAnywhereOneTimeOnWindowedIOS?this.disableTouchAnywhereOneTimeOnWindowedIOS=!1:(e=this.stopButton||{},t=this.spinButton||{},e.enabled?this.fastStop():t.enabled&&this.spin(this)))}.bind(this)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.toggleSlidableTouch=function(e){var t,i=this.presentation.getById(this.getSpinButtonContainer()),n=this.presentation.getById(this.getMenuButtonContainer());e.toggleState?(this.spinButtonPositionReset=!1,this.forceReset=!0,this.slidableTouch=!0,i.draggable=!0,this.game.getParameterValue("newUI")||(n.draggable=!0),t=this.presentation.getById(this.getToggleTouchAnywhereOtherMobileId()),e=this.presentation.getById(this.getToggleTouchAnywhereUkgcMobileId()),t.setToggleState(!1),e&&e.setToggleState(!1),t.onToggle(t)):(this.slidableTouch=!1,i.draggable=!1,n.draggable=!1,this.mirrorSpinButtonOptions("l"),i.scope.config.y=i.scope.config.initialConfig.y,i.scope.config.x=i.scope.config.initialConfig.x,this.game.getParameterValue("newUI"),sna.presentation.util.setupX(this.presentation,i),sna.presentation.util.setupY(this.presentation,i),i.setX(i.scope.config.x),i.setY(i.scope.config.y),n.scope.config.y=n.scope.config.initialConfig.y,n.scope.config.x=n.scope.config.initialConfig.x,this.game.getParameterValue("newUI"),sna.presentation.util.setupX(this.presentation,n),sna.presentation.util.setupY(this.presentation,n),n.setX(n.scope.config.x),n.setY(n.scope.config.y))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isMobileOrientationChanged=function(){var e=this.scope.layout,t=!1;return-1!=e.environmentTags.indexOf(sna.service.ENVIRONMENT_MOBILE)&&(-1!=e.newTags.indexOf(sna.service.ENVIRONMENT_LANDSCAPE)?-1!=e.oldTags.indexOf(sna.service.ENVIRONMENT_PORTRAIT)&&(t=!0):-1!=e.oldTags.indexOf(sna.service.ENVIRONMENT_LANDSCAPE)&&(t=!0)),t},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getGameRulesContentSymbolPayouts=function(s,e){var t=this.scope.config.slot.symbols,r=e.scope.config.symbolsInUse,o=e.scope.config.symbolPlaceholder,a=angular.copy(this.scope.game.currency);return a.sign="",t&&t.forEach(function(i){var n;i.payouts&&-1!=r.indexOf(i.name)&&(n=this.game.getPayoutBet(),i.payouts.forEach(function(e,t){t="{"+o[i.name]+(t+1)+"}";-1!=s.indexOf(t)&&(e=sna.service.util.formatCurrency(e*n,a),s=s.replace(t,e))}.bind(this)))}.bind(this)),s},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getBigWinTotalScale=function(){return this.presentation.main.environment.is(sna.service.ENVIRONMENT_MOBILE)&&this.presentation.scope.layout.has(sna.service.ENVIRONMENT_PORTRAIT)?this.game.scope.config.parameters.bigWinScalePortrait||"1.5":this.game.scope.config.parameters.bigWinScaleLandscape||"2"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getBigWinLeftPosition=function(){return"-"+this.presentation.getById("winLabel").width},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getBigWinTopPosition=function(){return this.presentation.main.environment.is(sna.service.ENVIRONMENT_MOBILE)&&this.presentation.scope.layout.has(sna.service.ENVIRONMENT_PORTRAIT)?this.presentation.scope.layout.has(sna.service.ENVIRONMENT_CHROME)?-150:this.game.scope.config.parameters.bigWinTopPositionPortrait||"-=280":this.game.scope.config.parameters.bigWinTopPositionLandscape||"-=360"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.resetSpinButtonPosition=function(){var e;this.spinButtonPositionReset&&!this.forceReset||!this.isMobileOrientationChanged||this.slidableTouch&&!this.isMobileOrientationChanged()||(e=this.presentation.getById(this.getSpinButtonContainer()),this.spinButtonPositionReset=!0,this.presentation.scope.layout.has(sna.service.ENVIRONMENT_LANDSCAPE)?(this.presentation.scope.layout.has(sna.service.ENVIRONMENT_TABLET)?sna.presentation.util.setDynamicX(this.presentation.parseValue(e,e.scope.config.initialConfig.x.Tablet)*this.presentation.globalScale,e,this.presentation,"Tablet"):sna.presentation.util.setDynamicX(e.scope.config.initialConfig.x.default*this.presentation.globalScale,e,this.presentation),e.setY(0),this.mirrorSpinButtonOptions(sna.service.tripleBellsProvider.spinMenuOrientation.LEFT)):this.presentation.scope.layout.has(sna.service.ENVIRONMENT_PORTRAIT)&&(e.updateLayout(),e.setX(e.scope.config.x),e.setY(e.scope.config.y)))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.resetMenuButtonPosition=function(){var e;this.spinButtonPositionReset&&!this.forceReset||!this.isMobileOrientationChanged||this.slidableTouch&&!this.isMobileOrientationChanged()||(e=this.presentation.getById(this.getMenuButtonContainer()),this.spinButtonPositionReset=!0,this.presentation.scope.layout.has(sna.service.ENVIRONMENT_LANDSCAPE)?(this.presentation.scope.layout.has(sna.service.ENVIRONMENT_TABLET)?sna.presentation.util.setDynamicX(this.presentation.parseValue(e,e.scope.config.initialConfig.x.Tablet)*this.presentation.globalScale,e,this.presentation,"Tablet"):sna.presentation.util.setDynamicX(e.scope.config.initialConfig.x.default*this.presentation.globalScale,e,this.presentation),e.setY(0),this.mirrorSpinButtonOptions(sna.service.tripleBellsProvider.spinMenuOrientation.LEFT)):this.presentation.scope.layout.has(sna.service.ENVIRONMENT_PORTRAIT)&&(e.updateLayout(),e.setX(e.scope.config.x),e.setY(e.scope.config.y)))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onDragSpinButton=function(e,t){this.presentation.getById("SpinButton").wasDragged=!0,this.scope.game.spinButtonDragged=!0;var i,n=this.presentation.getById(this.getSpinButtonContainer()),s=this.presentation.animationCache;this.scope.game.freeRounds&&this.scope.game.freeRounds.end?n.dragging=!1:(s.animateAutoplayProgress&&s.animateAutoplayProgress.length&&(this.triggerEvent("stopSpinButtonAutoplay"),this.startAutoplayMobile&&(this.startAutoplayMobile=!1)),this.checkSpinAndMenuCollision()&&!this.game.getParameterValue("newUI")&&(this.mobileMenuButtonDragged||(i=this.presentation.getById(this.getMenuButtonContainer()),this.presentation.scope.layout.has(sna.service.ENVIRONMENT_TABLET)?sna.presentation.util.setDynamicX(-i.x,i,this.presentation,"Tablet"):sna.presentation.util.setDynamicX(-i.x,i,this.presentation))),i=this.presentation.getById(this.getMenuButtonContainer()),this.slidableTouchSpinBtnContPosition={x:n.x,y:n.y},n.draggable&&(this.scope.layout.has(sna.service.ENVIRONMENT_PORTRAIT)?this.preventLeavingPortraitViewport(n,i.width/2):this.preventLeavingLandscapeViewport(n,n.width/2)))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onDragMenuButton=function(e,t){this.mobileMenuButtonDragged=!0;var i=(i=this.presentation.getById("menuMobileButton"))||this.presentation.getById("menuContainer");this.scope.layout.has(sna.service.ENVIRONMENT_PORTRAIT)?this.preventLeavingPortraitViewport(e,i.width/2):this.preventLeavingLandscapeViewport(e,i.width/2)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.preventLeavingPortraitViewport=function(e,t){var i=20*this.presentation.globalScale,n=e.getBounds();n.y<=0&&(e.y=e.y+e.height/2*this.presentation.globalScale+i),n.y+n.height>=this.presentation.scope.layout.viewHeight&&(e.y=e.y-e.height/2*this.presentation.globalScale-i);var s=this.presentation.getById(this.getSpinButtonId()).getBounds();n.x<=0&&(e.x=e.x+e.width/2*this.presentation.globalScale+i),n.x+n.width>=this.presentation.scope.layout.viewWidth&&(e.x=e.x-e.width/2*this.presentation.globalScale-i),s.x+s.width/2<this.presentation.scope.layout.viewWidth/2?this.mirrorSpinButtonOptions(sna.service.tripleBellsProvider.spinMenuOrientation.RIGHT):this.mirrorSpinButtonOptions(sna.service.tripleBellsProvider.spinMenuOrientation.LEFT)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.preventLeavingLandscapeViewport=function(e,t){var i=20*this.presentation.globalScale,n=e.getBounds();n.y<=0&&(e.y=e.y+e.height/2*this.presentation.globalScale+i),n.y+n.height>=this.presentation.scope.layout.viewHeight&&(e.y=e.y-e.height/2*this.presentation.globalScale-i);var s=this.presentation.getById(this.getSpinButtonId()).getBounds();n.x<=0&&(e.x=e.x+e.width/2*this.presentation.globalScale+i),n.x+n.width>=this.presentation.scope.layout.viewWidth&&(e.x=e.x-e.width/2*this.presentation.globalScale-i),s.x+s.width/2<this.presentation.scope.layout.viewWidth/2?this.mirrorSpinButtonOptions(sna.service.tripleBellsProvider.spinMenuOrientation.RIGHT):this.mirrorSpinButtonOptions(sna.service.tripleBellsProvider.spinMenuOrientation.LEFT)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.checkSpinAndMenuCollision=function(){var e=this.presentation.getById(this.getSpinButtonContainer()),t=this.presentation.getById(this.getMenuButtonContainer());return this.checkCollision(e,t)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.checkCollision=function(e,t){e=e.getBounds(),t=t.getBounds();return e.x+e.width>t.x&&e.x<t.x+t.width&&e.y+e.height>t.y&&e.y<t.y+t.height},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.mirrorSpinButtonOptions=function(e){var t,i,n;e!==this.mobileSpinMenuOrientation&&(t=this.presentation.getById("btnSpinOptionsContainer"),i=this.presentation.getById(this.getMaxBetButtonId()),n=this.presentation.getById("tglFastSpinMenuMobile"),t&&i&&n&&(e===sna.service.tripleBellsProvider.spinMenuOrientation.RIGHT?(t.rotation=3.14,i.rotation=3.14,n.rotation=3.14,t.x=t.x-130*this.presentation.globalScale):(t.x=t.x+130*this.presentation.globalScale,t.rotation=0,i.rotation=0,n.rotation=0),this.mobileSpinMenuOrientation=e))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.showOverlay=function(e){var t=document.getElementById("background-overlay");t&&-1===t.className.indexOf("show")&&(t.className+="show")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.hideOverlay=function(e){var t=document.getElementById("background-overlay");t&&-1!==t.className.indexOf("show")&&(t.className=t.className.replace("show","")),this.game.getParameterValue("newUI")&&this.touchAnywhereEnabled&&this.addGlobalPressCallback(this.touchAnywhereCallback)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.goToSettingsPaytable=function(){var e=new this.timeline,t=this.presentation.getById("tabsSettings"),i=this.presentation.getById("tabSettingsScrollable");e.to(i.content,0,{y:1025*this.presentation.globalScale},0),e.call(function(){this.presentation.createAnimationTimeline("showSettingsPanel",0,!1,!0),t.showTabByIndex(3)},[],this),e.to(i.content,.5,{setY:"-="+2100*this.presentation.globalScale,onUpdate:this.onUpdatePaytableTabScroll.bind(this),ease:Sine.easeInOut},0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setSingleWinLimitValue=function(e,t){var i=this.game.getParameterValue("singleLimit"),n=this.presentation.getById("singleWinLimitMinusButton");this.game.getParameterValue("markets");n&&n.enable();var s=this.presentation.getById("singleWinLimitPlusButton");s&&s.enable(),this.singleLimitIndex=this.singleLimitIndex||0,"next"==t?(this.singleLimitIndex++,this.singleLimitIndex==i.length&&(this.singleLimitIndex--,s&&s.disable())):"prev"==t&&(this.singleLimitIndex--,0==this.singleLimitIndex&&(this.singleLimitIndex=0,n&&n.disable())),this.presentation.createAnimationTimeline("singleWinLimitChange",0,!1,!0),this.scope.game.autoplay.winThreshold=i[this.singleLimitIndex]*this.getTotalBet(),this.scope.game.autoplay.winThresholdActive=0!=this.scope.game.autoplay.winThreshold,this.autoUpdatePresentation()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setLossLimitValue=function(e,t){var i=this.game.getParameterValue("lossLimit"),n=this.game.getParameterValue("markets");this.isTargetMarket(n.ukgc)&&(this.scope.game.lossLimitSet=!0);var s=this.getTotalBet(),r=this.scope.game.autoplay.winDecreaseThreshold/s,r=i.indexOf(r);-1==r&&(r=0),"next"==t?(this.presentation.getById("autoPlayLossLimitMinusBtn").enable(),r++,e&&r==i.length-1&&e.disable()):"prev"==t&&(this.presentation.getById("autoPlayLossLimitPlusBtn").enable(),r--,e&&0==r&&e.disable()),this.presentation.createAnimationTimeline("lossLimitChange",0,!1,!0),this.scope.game.autoplay.winDecreaseThreshold=i[r]*s,this.scope.game.autoplay.winDecreaseThresholdActive=0!=this.scope.game.autoplay.winDecreaseThreshold,this.autoplayNumberOfSpins&&0!=this.autoplayNumberOfSpins&&this.scope.game.lossLimitSet&&(this.enableAutoplayButton(),this.isTargetMarket(n.ukgc)&&0==r&&0==this.scope.game.autoplay.winDecreaseThreshold&&this.disableAutoplayButton()),this.autoUpdatePresentation()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isNlLicense=function(){return!!this.scope.game.nlLicense},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getCoinValueText=function(){var e=this.scope.game.gameTypes[0].denom/1e4,t=angular.copy(this.scope.game.currency);t.sign="";sna.service.util.formatCurrency(e,t);return sna.service.util.formatCurrency(e,t)+" "+this.scope.game.currency.name},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onUpdatePaytableTabScroll=function(){this.presentation.getById("tabSettingsScrollable").slider.initModel()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleInsufficientFunds=function(){if(this.scope.lastResult.status.code===sna.service.tripleBellsProvider.CODE_INSUFFICIENT_FUNDS){var e=this.presentation.getById("insufficientFundsMessage"),t="";return this.game.getBalanceInCash()>this.game.getMinimalBetInCash()?this.scope.translations.ERROR_REDUCE_BET?t=this.scope.translations.ERROR_REDUCE_BET:this.scope.lastResult&&this.scope.lastResult.game&&"INSUFFICIENT_FUNDS"==this.game.scope.lastResult.status.code&&(t=this.scope.lastResult.status.message):t=this.scope.translations["ERROR FUNDS"],e.text=t,e.scope.config.text=t,e.updatePresentation(),this.insufficientFundsMessage=t,this.showOverlay(),this.presentation.createAnimationTimeline("ShowInsufficientFunds",0,!1,!0,null)}},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setIntroPageArrow=function(e,t){this.resetIntroPageTimer();var i=this.presentation.getById("introPagesContainer"),n=0;i&&0<i.pages.length&&(n=i.pages.length);var s=0,r=+this.currentIntroPage.replace("introPage","");!r&&0!=r||(r==n-1?"left"==t&&(s=r-1):s=0==r?"right"==t?1+r:n-1:"right"==t?1+r:r-1),this.currentIntroPage="introPage"+s;for(var o=0;o<i.buttons.length;o++)o==s&&i.buttons[o].release()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.showIntro=function(){var e=this.q.when(!0),t=this.game.getGameSettingsProperty("intro_screen",!1);return e=(e=this.presentation.getById("introContainer")?t?(this.goToGamePromise=this.q.defer(),e.then(this.waitForGoToGameClick.bind(this))):(void 0!==this.introPageTimer.duration&&(this.introPageTimer.duration=null),e.then(this.presentation.destroyGameModePresentation.bind(this.presentation,"intro"))):e).then(function(){this.introDone=!0}.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.afterGameEnter=function(){},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onContinueButtonPressed=function(e){e&&e.disable(),null!==this.introPageTimer.duration&&void 0!==this.introPageTimer.duration&&window.clearInterval(this.introPageTimer.intervalId);var t=this.q.when(!0);this.goToGamePromise&&this.goToGamePromise.resolve();e=this.presentation.getById("introContainer");return this.game.getParameterValue("animateHideIntro")?t=t.then(this.animateIntroToBaseGameTransition.bind(this)):(e.hide(),this.showBaseGame()),t=(t=t.then(this.presentation.createAnimationTimeline.bind(this.presentation,"hideIntro",0,!1,!0,null))).then(this.updateGameSettings.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.animateIntroToBaseGameTransition=function(){var e=this.presentation.getById("introContainer"),t=this.presentation.getById("baseGame"),i=this.presentation.getById("logoContainer"),n=this.presentation.getById("baseInterface"),s=this.presentation.getById("jackpotIndicatorContainer"),r=this.q.defer(),o=new this.timeline({onComplete:function(e){e&&e.resolve()},onCompleteParams:[r]});return o.call(this.showBaseGame,[],this),o.add("start"),o.to(e,.3,{alpha:0},"start"),o.to(t,.3,{alpha:1},"start"),i&&o.to(i,.3,{alpha:1},"start"),n&&o.to(n,.3,{alpha:1},"start"),s&&o.to(s,.3,{alpha:1},"start"),r.promise},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.showBaseGame=function(){this.hideOverlay();var e=this.presentation.getById("baseGame"),t=this.presentation.getById("logoContainer"),i=this.presentation.getById("baseInterface"),n=this.presentation.getById("jackpotIndicatorContainer");e&&e.show(),t&&t.show(),i&&i.show(),n&&n.show();var s=this.presentation.getById(this.getSpinButtonContainer()),r=this.presentation.getById(this.getMenuButtonContainer());s&&s.show(),s&&r.show(),this.game.getParameterValue("animateHideIntro")&&(e.setalpha(0),t&&t.setalpha(0),i&&i.setalpha(0),n&&n.setalpha(0))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onDontShowClicked=function(){this.hasIntro=!this.hasIntro,this.game.setGameSettingsProperty("intro_screen",this.hasIntro),this.isGameSettingsChanged=!0,this.presentation.getById("tglIntro").setToggleState(this.game.getGameSettingsProperty("intro_screen",!1));var e=this.presentation.getById("dontshownormal");e&&(e.visible=this.hasIntro);e=this.presentation.getById("dontshowchecked");e&&(e.visible=!this.hasIntro)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onDontShowToggled=function(e){this.game.setGameSettingsProperty("intro_screen",!e.toggleState),this.isGameSettingsChanged=!0;e=this.presentation.getById("tglIntro");e.setToggleState(this.game.getGameSettingsProperty("intro_screen",!1)),e.disable(),this.updateGameSettings().then(function(e){e.enable()}.bind(this,e))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onShowIntroScreen=function(e){this.game.setGameSettingsProperty("intro_screen",e.toggleState),this.isGameSettingsChanged=!0,e.disable(),this.updateGameSettings().then(function(e){e.enable()}.bind(this,e))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.toggleAnimations=function(e){this.game.setGameSettingsProperty("animations",e.toggleState),this.isGameSettingsChanged=!0,this.triggerEvent("backgroundAnimationsToggle")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateGameSettings=function(){var e=this.q.when(!0);return e=this.isGameSettingsChanged?(e=e.then(this.communication.saveGameSettings.bind(this.communication))).then(function(){this.isGameSettingsChanged=!1}.bind(this)):e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setGameSettingsModel=function(){var e=this.communication.configUpdate.slot.gameSettings;this.scope.game.gameSettings=new sna.model.slot.TripleBellsSettingsConfiguration,e&&(angular.equals(e.game,{})||angular.equals(e.general,{})||(this.scope.game.gameSettings=angular.merge(this.scope.game.gameSettings,e)))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.waitForGoToGameClick=function(){return this.startIntroPageTimer(),this.goToGamePromise.promise},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.startIntroPageTimer=function(){null!==this.introPageTimer.duration&&void 0!==this.introPageTimer.duration&&(window.clearInterval(this.introPageTimer.intervalId),this.introPageTimer.intervalId=window.setInterval(this.onIntroPanelTimerExpired.bind(this),1e3*this.introPageTimer.duration))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.resetIntroPageTimer=function(){null!==this.introPageTimer.duration&&void 0!==this.introPageTimer.duration&&(this.lastIntroAnimationTimeline&&(this.lastIntroAnimationTimeline.stop(),this.lastIntroAnimationTimeline.kill(),delete this.lastIntroAnimationTimeline),window.clearInterval(this.introPageTimer.intervalId),this.introPageTimer.intervalId=window.setInterval(this.onIntroPanelTimerExpired.bind(this),1e3*this.introPageTimer.duration))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onIntroResetTimerButtonPressed=function(){this.resetIntroPageTimer()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onIntroPanelTimerExpired=function(){this.lastIntroAnimationTimeline&&(this.lastIntroAnimationTimeline.stop(),this.lastIntroAnimationTimeline.kill(),delete this.lastIntroAnimationTimeline);var e=this.presentation.getById("radioButtonsIntroPages"),t=0;if(void 0!==e){for(var i=0;i<e.children.length;i++)if(e.children[i].toggleState){t=i,e.children[i].toggleState=!1;break}++t===e.children.length&&(t=0),e.setValue(t,!0);for(i=0;i<e.children.length;i++){var n="introPage"+i,s=this.presentation.getById(n);s&&(n!==this.currentIntroPage?(s.hide(),s.setalpha(0)):(s.show(),s.setalpha(1)))}var n="introPage"+t,r=new this.timeline;r.add("blendIntroPages");var o=this.presentation.getById(this.currentIntroPage);void 0!==o&&(r.to(o,.3,{alpha:0},"blendIntroPages"),r.call(o.hide,[],o,"blendIntroPages+=0.3"),r.call(o.setalpha,[0],o,"blendIntroPages+=0.3"));o=this.presentation.getById(n);return void 0!==o&&(this.currentIntroPage=n,r.call(o.setalpha,[0],o,"blendIntroPages"),r.call(o.show,[],o,"blendIntroPages"),r.to(o,.3,{alpha:1},"blendIntroPages"),r.call(o.show,[],o,"blendIntroPages+=0.3"),r.call(o.setalpha,[1],o,"blendIntroPages+=0.3")),this.lastIntroAnimationTimeline=r,this.presentation.createPromiseForTimeline("introPageCycle",0,!1,!0,r)}},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setIntroPages=function(e,t,i){this.resetIntroPageTimer(),this.currentIntroPage="introPage"+i;for(var n=this.presentation.getById("radioButtonsIntroPages"),s=0;s<n.children.length;s++){var i="introPage"+s,r=this.presentation.getById(i);r&&(i!==this.currentIntroPage?(r.hide(),r.setalpha(0)):(r.show(),r.setalpha(1)))}},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleAutoplayInPortrait=function(e){var t=this.scope.game.autoplay,e="true"===e;t.active?e&&this.pauseAutoplay():t.paused&&!e&&this.startOrResumeAutoplay(null)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.shouldInvokeAllReelsStopped=function(e){return this.game.getActiveGameType().activeReels==e.index+1},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.shouldInvokeMachinesReelsStopped=function(e){return!1},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.goToCachier=function(){GcwGameClient&&GcwGameClient.triggerEvent(gcw.api.GameEventType.CASHIER)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.goToRegister=function(){GcwGameClient&&GcwGameClient.triggerEvent(gcw.api.GameEventType.REGISTER)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.goToHome=function(){GcwGameClient?GcwGameClient.wrapperData.lobbyActive&&GcwGameClient.triggerEvent(gcw.api.GameEventType.HOME):window.history.back()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.openHistoryPage=function(){var e=this.scope.game.gameHistoryLib,t=this.communication.gameSessionUrl,i=this.game.getParameterValue("gameIdHistory");e&&t&&i&&window.open(e+"?sessionUrl="+t+"&gameId="+i,"_blank")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onAudioContextSuspended=function(){this.sound.getSound("Startup").unload()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.checkForAudioContext=function(){var e,t;document.removeEventListener("click",this.checkAudioContextRef,!1),this.audioContextTimeout&&(window.clearTimeout(this.audioContextTimeout),this.audioContextTimeout=null,"suspended"===Howler.ctx.state&&Howler._autoResume(),e=Date.now()-this.audioElapsedTimeMs,(t=this.sound.getSound("Startup")).seek(e/1e3),this.sound.playOnce(t,!1))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getTotalBets=function(){var e,t,i,n,s=this.game.getActiveGameType()?this.game.getActiveGameType().betMultiplier:1;return this.game.getParameterValue("betPlusMinusChangesCoinNumber")?(e=this.getPossibleCoinNumbers(),t=this.game.getCoinValue(),e.map(function(e){return+(e*t*s).toFixed(this.scope.game.currency.decimals)},this)):(i=this.isQuattroGame?this.scope.game.betLines:1,n=this.isQuattroGame?this.scope.game.bet:this.game.getGameBet(),this.game.getCoinValues().map(function(e){return+(e*n*s*i*this.game.getBetModeModifier()).toFixed(this.scope.game.currency.decimals)},this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getCoinValues=function(){return this.game.getCoinValues()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateBalance=function(e){this.updateBalanceModel(e);var t=this.scope.game.feature,i=this.scope.game.freeRounds;i&&i.available&&(!i||i.active)||t&&!t.start&&t.active&&!t.end||this.updateBalancePresentation(),GcwGameClient&&!this.gambleFeatureEnabled&&!e&&this.scope.lastResult&&this.scope.lastResult.game&&(t=this.scope.lastResult.game.currentWallet,e=this.scope.lastResult.game.walletAfterLastBet,e=t.rm-e.rm+t.fm-e.fm,GcwGameClient.triggerEvent(gcw.api.GameEventType.WALLET_UPDATE,{balance:t.rm||0,free_balance:t.fm||0}),this.totalWinUpdateSent||(GcwGameClient.triggerEvent(gcw.api.GameEventType.TOTAL_WIN_UPDATE,Number(e.toFixed(t.decimalSpaces))),this.totalWinUpdateSent=!0))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.restoreCounter=function(){return this.returnIf(this,"scope.game.feature.retrigger")?this.scope.game.feature.left-this.scope.game.feature.retriggerCount:this.scope.game.feature.left},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getFsMultiplier=function(){return this.scope.game.feature?this.scope.game.feature.multiplier:1},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getFsCounterTotalRestored=function(){return" / "+this.returnIf(this,"scope.game.feature.total")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getFsCounter=function(){if(this.scope.game.feature)return this.scope.game.feature.retrigger?this.scope.game.feature.retriggerCount+this.scope.game.feature.total-this.scope.game.feature.left:this.scope.game.feature.total-this.scope.game.feature.left},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getFsLeft=function(){if(this.scope.game.feature)return this.scope.game.feature.retrigger?this.scope.game.feature.total-(this.scope.game.feature.retriggerCount+this.scope.game.feature.total-this.scope.game.feature.left):this.scope.game.feature.left},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getFsCounterTotal=function(){if(this.scope.game.feature)return!this.scope.game.feature.retrigger||this.spinInProgress||this.gameRestored?" / "+this.scope.game.feature.total:" / "+(this.scope.game.feature.retriggerCount+this.scope.game.feature.total)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateBalanceModel=function(e){this.gambleFeatureEnabled&&this.returnIf(this,"scope.lastResult.gambleOutcome")||!this.scope.lastResult||!this.scope.lastResult.game||(sna.service.tripleBellsProvider.playModes.REPLAY!==this.scope.game.playMode?(this.scope.game.balanceCash="REAL"==this.scope.game.playMode?this.scope.lastResult.game.currentWallet.rm:this.scope.lastResult.game.currentWallet.fm,e?this.returnIf(e,"game.walletAfterLastBet.rm")||this.returnIf(e,"game.walletAfterLastBet.fm")?this.scope.game.balanceCash="REAL"==this.scope.game.playMode?e.game.walletAfterLastBet.rm:e.game.walletAfterLastBet.fm:this.scope.game.balanceCash=this.scope.lastResult.game.walletAfterLastBet.rm||this.scope.lastResult.game.walletAfterLastBet.fm:void 0===e&&(this.scope.game.balanceCash="REAL"==this.scope.game.playMode?this.scope.lastResult.game.currentWallet.rm:this.scope.lastResult.game.currentWallet.fm)):(this.scope.game.feature&&this.scope.game.feature.start||(this.scope.game.freeRounds&&this.scope.game.freeRounds.active&&this.scope.game.freeRounds.end?this.scope.game.balanceCash=(this.scope.lastResult.game.walletAfterLastBet.rm||this.scope.lastResult.game.walletAfterLastBet.fm)+this.scope.game.freeRounds.totalWin:this.scope.game.balanceCash=(this.scope.lastResult.game.walletAfterLastBet.rm||this.scope.lastResult.game.walletAfterLastBet.fm)+(this.scope.game.feature?this.scope.game.feature.grandTotal:this.scope.game.totalWin)),e&&(this.scope.game.balanceCash=this.scope.lastResult.game.walletAfterLastBet.rm||this.scope.lastResult.game.walletAfterLastBet.fm))),this.gambleFeatureEnabled&&this.scope.lastResult&&this.scope.lastResult.game&&this.scope.lastResult.gambleOutcome&&this.scope.lastResult.gambleOutcome.gambleLimitReached&&(sna.service.tripleBellsProvider.playModes.REPLAY!==this.scope.game.playMode?(this.scope.game.balanceCash="REAL"==this.scope.game.playMode?this.scope.lastResult.game.currentWallet.rm:this.scope.lastResult.game.currentWallet.fm,e&&(this.returnIf(e,"game.walletAfterLastBet.rm")||this.returnIf(e,"game.walletAfterLastBet.fm")||!0===e?this.returnIf(this,"scope.lastResult.outcome.restored")&&this.returnIf(this,"scope.lastResult.game.currentWallet.rm")?this.scope.game.balanceCash=!0===e?"REAL"==this.scope.game.playMode?this.scope.lastResult.game.currentWallet.rm:this.scope.lastResult.game.walletAfterLastBet.fm:"REAL"==this.scope.game.playMode?e.game.walletAfterLastBet.rm:e.game.walletAfterLastBet.fm:this.scope.game.balanceCash="REAL"==this.scope.game.playMode?this.scope.lastResult.game.walletAfterLastBet.rm:this.scope.lastResult.game.walletAfterLastBet.fm:this.scope.game.balanceCash=this.scope.lastResult.game.walletAfterLastBet.rm||this.scope.lastResult.game.walletAfterLastBet.fm)):(this.scope.game.feature&&this.scope.game.feature.start||(this.scope.game.balanceCash=this.scope.lastResult.game.currentWallet.rm||this.scope.lastResult.game.currentWallet.fm),e&&(this.scope.game.balanceCash=this.scope.lastResult.game.walletAfterLastBet.rm||this.scope.lastResult.game.walletAfterLastBet.fm))),sna.service.tripleBellsProvider.playModes.REPLAY!==this.scope.game.playMode&&this.isMaxWinReached()&&(this.spinInProgress?this.scope.game.balanceCash=this.scope.lastResult.game.walletAfterLastBet.rm||this.scope.lastResult.game.walletAfterLastBet.fm:this.scope.game.balanceCash=this.scope.lastResult.game.currentWallet.rm||this.scope.lastResult.game.currentWallet.fm)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateLastWinPresentation=function(){var e=this.presentation.getById("lastWinText");e&&e.updatePresentation();var t=this.presentation.getById("lastWinValue");t&&t.updatePresentation();this.presentation.getById("lastWinDisplay");var i=e.width,n=t.width,s=i+n;e.setX(-s/2+i/2+20*this.presentation.globalScale),t.setX(-s/2+i+n/2)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.enableAutoplayButton=function(){var e=this.presentation.getById("autoplayStartBtn");e&&e.enable()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.disableAutoplayButton=function(){var e=this.presentation.getById("autoplayStartBtn");e&&e.disable()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setAutoplayValue=function(e,t,i){var n=this.game.getParameterValue("markets");this.autoplayNumberOfSpins=i,0==this.scope.game.autoplay.winDecreaseThreshold&&(this.scope.game.lossLimitSet=!1),this.isTargetMarket(n.ukgc)&&!this.scope.game.lossLimitSet||this.enableAutoplayButton()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateBalancePresentation=function(e,t){var i;GcwGameClient&&this.fsButtonDisabled()&&!t||(i=this.scope.game.freeRounds,!(t=this.presentation.getById("balanceValue"))||i&&i.active||isNaN(this.getBalance())||t.updatePresentation(),!(t=this.presentation.getById("balanceSettings"))||i&&i.active||isNaN(this.getBalance())||t.updatePresentation(),(t=this.presentation.getById("footerBalanceLabel"))&&!isNaN(this.getBalance())&&t.updatePresentation(),this.spinInProgress||this.game.getParameterValue("syncBuyFeatureButtonWith")||this.setBuyFeatureState())},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateWin=function(){var e=this.presentation.getById("footerWinLabel");e&&e.updatePresentation()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.afterFeatureStart=function(e){this.fsTimerPromise=null;var t=this.q.when(!0);return t=(t=(t=(t=(t=t.then(this.showFeatureStartDialog.bind(this,e))).then(this.playAfterFeatureStartAnimation.bind(this,e))).then(this.afterFeatureStartAnimationFinished.bind(this))).then(this.unloadSpinAssets.bind(this))).then(this.handleManualFeatureSpin.bind(this,e))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleManualFeatureSpin=function(e){e=this.scope.config.slotFeatures[e.name];return this.isFeatureSpinAuto(e)?this.spin():this.enableFreeSpinsInterface()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.enableFreeSpinsInterface=function(){this.updateWrapperButtonsState("FREE_SPINS_IDLE")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.shouldShowTotalWinFreeSpinValue=function(){return!this.game.getParameterValue("hasFsTotalWinCounter")&&!this.game.getParameterValue("hideTotalWinFreeSpinValue")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.afterFeatureStartAnimationFinished=function(){},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.showFeatureStartDialog=function(e){var t,i,n=this.q.when(!0);return n=n.then(this.presentation.createAnimationTimeline.bind(this.presentation,e.name+"StartDialog",0,!1,!0,null)),this.game.getParameterValue("skipFreeSpinsStartConfirmation")||(t=this.scope.config.slotFeatures&&this.scope.config.slotFeatures.fs&&this.scope.config.slotFeatures.fs.autoStart,n=sna.service.tripleBellsProvider.playModes.REPLAY===this.scope.game.playMode||t?n.then(this.createTimerPromise.bind(this,1)):(i=this.waitForUserConfirmation(e.name+"Start"),n.then(function(){return i}.bind(this)))),n=n.then(this.markFreeSpinsConfirmed.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.markFreeSpinsConfirmed=function(){this.scope.game.feature&&(this.scope.game.feature.confirmed=!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.playAfterFeatureStartAnimation=function(e){this.featureInProgress=!0;var t=this.getFeaturePickerConfig(e),i=(i=this.q.when(!0)).then(this.presentation.createAnimationTimeline.bind(this.presentation,e.name+"After",0,!1,!0,null));return i=t&&t.gameMode&&"start"===t.destroyOn?(i=t.animations.out?i.then(this.presentation.createAnimationTimeline.bind(this.presentation,t.animations.out,0,!1,!0,null)):i).then(this.presentation.destroyGameModePresentation.bind(this.presentation,t.gameMode)):i},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.fsPickerFeatureGameModeActive=function(e,t){return!!e[t.gameMode]},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateFeature=function(e,t,i){var n=this.scope.config.slotFeatures[e.name];this.scope.game.feature=e;var s,r=this.q.when(!0);return n.picker&&(s=n.picker,this.fsPickerFeatureGameModeActive(e,s)&&s&&s.gameMode&&s.useForRetrigger&&(r=r.then(this.processFeaturePicker.bind(this,e)))),r=(r=(r=e.retrigger?(r=(r=(r=r.then(this.setupRetriggerConfirmation.bind(this,e,n))).then(this.playRetriggerAnimation.bind(this,e,n))).then(this.processRetriggerConfirmation.bind(this,e,n))).then(this.playRetriggerEndAnimation.bind(this,e,n)):r).then(this.presentation.createAnimationTimeline.bind(this.presentation,e.name+"Update",0,!1,!0,null))).then(this.updateFreeSpinsCounterOnFeatureUpdate.bind(this,null))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setupRetriggerConfirmation=function(e,t){t.skipRetriggerConfirmation||(this.retriggerConfirmation=this.waitForUserConfirmation(e.name+"Retrigger"))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processRetriggerConfirmation=function(e,t){var i=this.q.when(!0);return sna.service.tripleBellsProvider.playModes.REPLAY!==this.scope.game.playMode?t.skipRetriggerConfirmation||(i=i.then(this.waitForRetriggerConfirmation.bind(this))):i=i.then(this.createTimerPromise.bind(this,1)),i},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.waitForRetriggerConfirmation=function(){return this.retriggerConfirmation},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.playRetriggerAnimation=function(e,t){return this.fsRetrigger=!0,this.processWrapperVisibilityOnRetrigger(!1,t),this.presentation.createAnimationTimeline(e.name+"Retrigger",0,!1,!0,null)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.playRetriggerEndAnimation=function(e,t){return this.presentation.createAnimationTimeline(e.name+"RetriggerEnd",0,!1,!0,null).then(function(){return this.processWrapperVisibilityOnRetrigger(!0,t)}.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateFreeSpinsCounterOnFeatureUpdate=function(){return this.updateWrapperFreeSpinsCounter()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processWrapperVisibilityOnRetrigger=function(e,t){t.hideUIonRetriggerAnimation&&this.setWrapperVisibility(e)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.beforeFeatureFinish=function(e,t,i){},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.finishFeatureSlotInterface=sna.service.tripleBellsProvider.TripleBellsInterface.prototype.finishFeature,sna.service.tripleBellsProvider.TripleBellsInterface.prototype.finishFeature=function(e,t,i){this.finishFeatureDeferred=this.q.defer(),e&&(this.scope.game.totalWin=e.grandTotal,this.winNotCollected=0<e.grandTotal),this.scope.game.realityReminderLastWin=this.scope.game.totalWin,this.winNotCollected&&(this.scope.game.totalWinBeforeGamble=this.scope.game.totalWin);var n=this.q.when(!0);return n=(n=n.then(this.onFinishFeature.bind(this))).then(this.finishFeatureSlotInterface.bind(this,e,t,i)),this.game.getParameterValue("hasBuyFeature")&&(n=n.then(this.createTimerPromise.bind(this,1))),this.useSpacebar=!1,n=n.then(this.finishFeatureHandleAutoplay.bind(this)),n=sna.service.tripleBellsProvider.playModes.REPLAY===this.scope.game.playMode?(n=n.then(this.createTimerPromise.bind(this,3))).then(this.closeFeature.bind(this,null,"fs")):n.then(this.waitForFeatureToBeClosed.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.waitForFeatureToBeClosed=function(){return this.game.getParameterValue("waitForFeatureToBeClosed")?this.finishFeatureDeferred.promise:this.q.when(!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onFinishFeature=function(){return this.updateWrapperGameLayout("BASE_GAME"),this.scope.game.totalWin&&this.updateWrapperGameMessage("FREE_SPINS_WIN",this.scope.game.totalWin),this.game.getParameterValue("hideTickerOnFsDialogs")&&this.updateWrapperGameMessage("EMPTY"),this.game.getParameterValue("hideFastSpinButtonOnFsDialogs")&&this.updateWrapperModel({elements:{BUTTON_FAST_SPIN:{visible:!1,enabled:!1}}}),this.hideSpinStopButton(),this.q.when(!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.finishFeatureHandleAutoplay=function(){var e=this.scope.game.autoplay,t=this.q.when(!0),i=this.scope.config.slotFeatures&&this.scope.config.slotFeatures.fs&&this.scope.config.slotFeatures.fs.autoFinish;return(e&&e.active&&!e.stopOnFeature||i)&&(e=this.game.getParameterValue("closeFeatureTiming")||5,i=this.scope.game.feature?this.scope.game.feature.name:"fs",t=(t=t.then(this.createTimerPromise.bind(this,e))).then(this.closeFeature.bind(this,null,i))),t},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.closeFeature=function(e,t){if(this.game.getParameterValue("stopWinIndividualOnCollect")&&this.stopWinIndividualAnimation(),this.featureAlreadyClosed)return this.q.when(!0);this.featureAlreadyClosed=!0,this.scope.game.feature&&(this.game.getParameterValue("markFeatureCompletedOnClose")&&(this.scope.game.feature.completed=!0),this.scope.game.totalWin=this.scope.game.feature.grandTotal);0<this.scope.game.autoplay.winThreshold&&this.returnIf(this,"scope.game.feature.totalWin")>=this.scope.game.autoplay.winThreshold&&this.scope.game.autoplay.disabled;return this.returnIf(this,"scope.game.autoplay.winDecreaseThresholdActive")&&0<this.returnIf(this,"scope.game.autoplay.winDecreaseThreshold")&&this.returnIf(this,"scope.game.autoplay.disabled"),this.beforeFsClose(t).then(this.handleCloseFeature.bind(this,e,t)).then(this.presentation.createAnimationTimeline.bind(this.presentation,t+"Closed",0,!1,!0,null)).then(this.beforeFeatureClosed.bind(this)).then(this.afterFeatureClosed.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.beforeFsClose=function(e){return this.presentation.createAnimationTimeline(e+"Ending",0,!1,!0,null)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.beforeFeatureClosed=function(){var e=!1,t=this.scope.game.autoplay;t.active&&(this.autoplayAfterfsClose(),e=!0);var i=this.q.when(!0);if(!t.active||t.active&&(t.winDecreaseThreshold<=t.totalBetToGamble&&t.winDecreaseThresholdActive||t.winThreshold<=t.totalWin&&t.winThresholdActive)){if(!this.gambleFeatureEnabled)return this.handleMessagesAfterFeature(e);i=(i=(i=(i=(i=(i=i.then(this.handleFreeSpinsGambleFeature.bind(this))).then(this.afterFreeSpinsGamble.bind(this))).then(this.waitForUserGambleConfirmationToComplete.bind(this))).then(function(){if(this.collectPromise)return this.collectPromise}.bind(this))).then(this.handleSimpleMessages.bind(this))).then(function(){this.handleRealityReminder(),e&&this.presentation.createAnimationTimeline("showAutoplayLimitDialog",0,!1,!0)}.bind(this))}return i=i.then(function(){this.useSpacebar=this.game.getGameSettingsProperty("disableSpaceBar")||this.presentation.getById("tglSpacebarSpinOther").toggleState}.bind(this)),i=this.returnIf(this,"scope.game.freeRounds.active")&&this.returnIf(this,"scope.game.freeRounds.accepted")&&0==this.returnIf(this,"scope.game.freeRounds.left")?(i=i.then(this.createTimerPromise.bind(this,.1))).then(this.handleFreeRounds.bind(this)):i},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleMessagesAfterFeature=function(e){return this.handleSimpleMessages().then(this.handleFreeRounds.bind(this,!0)).then(function(){e&&this.presentation.createAnimationTimeline("showAutoplayLimitDialog",0,!1,!0),this.enableInterface(),this.handleRealityReminder()}.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.afterFeatureClosed=function(){if(this.featureInProgress=!1,this.game.getParameterValue("hideTickerOnFsDialogs")&&this.updateWrapperGameMessage("FREE_SPINS_WIN",this.scope.game.totalWin),this.touchAnywhereEnabled&&this.addGlobalPressCallback(this.touchAnywhereCallback),this.updateWrapperBalanceValue(),!this.game.getParameterValue("waitForFeatureToBeClosed")||!this.finishFeatureDeferred)return this.q.when(!0);this.finishFeatureDeferred.resolve(!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.autoplayAfterfsClose=function(){var e=this.scope.game.autoplay;this.game.autoplayThresholdTriggered()?(this.scope.game.autoplay.winThresholdActive=!1,this.stopAutoplay(),this.restoreSpinInterface(),this.spinInProgress=!1,this.enableInterface()):e.active&&e.left&&!e.disabled?this.spin():this.restoreSpinInterface()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleCloseFeature=function(e,t){this.scope.game.mode(sna.model.slot.MODE_FEATURE_CLOSE);var i=t,t=this.scope.lastResult;angular.forEach(t.outcome.features,function(e){e.name===i&&0},this);var n=this.scope.config.slotFeatures[i];return this.presentation.createAnimationTimeline(i+"Close",0,!1,!0),this.q.when(!0).then(function(){"close"==n.destroyOn&&(this.presentation.destroyGameModePresentation(i),this.scope.game.feature=null),this.scope.game.autoplay.disabled=!1,this.restoreSpinInterface(),this.autoCollectWins&&this.collectGambleFeature()}.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.afterFreeSpinsGamble=function(){return this.updateBalance()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.stopMobileSpinAutoplayButton=function(){this.triggerEvent("stopSpinButtonAutoplay"),this.startAutoplayMobile&&(this.startAutoplayMobile=!1)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getSoundOnId=function(){return"btnSoundOn"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getSpinButtonContainer=function(){return"btnSpinMobileContainer"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getMenuButtonContainer=function(){return"btnMenuMobileContainer"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getSettingsCoinCashId=function(){return"tglCoinsCash"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getFooterCoinCashId=function(){return"footerCoinCash"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getSoundOffId=function(){return"btnSoundOff"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getFooterBalanceLabelId=function(){return"footerBalanceLabel"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getFooterWinLabelId=function(){return"footerWinLabel"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getFooterBetLabelId=function(){return"footerBetLabel"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getNumpadKeyboardId=function(){return"numpadKeyboard"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getToggleLossLimitId=function(){return"tglLossLimit"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getToggleWinLimitId=function(){return"tglWinLimit"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getToggleAnyWinId=function(){return"tglAnyWin"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getToggleSingleWinLimitId=function(){return"tglSingleWin"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getToggleTotalBetToGambleId=function(){return"tglTotalBetToGamble"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getToggleFastSpinUkgcId=function(){return"tglFastSpinUkgc"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getToggleFastSpinOtherId=function(){return"tglFastSpinOther"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getToggleFastSpinMenuMobileId=function(){return"tglFastSpinMenuMobile"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getToggleSlidableTouchOtherMobileId=function(){return"tglSlidableTouchOther"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getToggleSlidableTouchUkgcMobileId=function(){return"tglSlidableTouchUkgc"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getToggleTouchAnywhereOtherMobileId=function(){return"tglTouchAnywhereOther"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getToggleTouchAnywhereUkgcMobileId=function(){return"tglTouchAnywhereUkgc"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getToggleSpacebarSpinUkgcId=function(){return"tglSpacebarSpinUkgc"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getToggleSpacebarSpinOtherId=function(){return"tglSpacebarSpinOther"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getToggleSettingsSoundId=function(){return"tglGameSounds"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getToggleSettingsBackgroundSoundId=function(){return"tglBackgroundSounds"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getBtnWinlinesId=function(){return"btnNavBar"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getBtnAutospinSettingsId=function(){return"btnAutospinSettings"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getFooterSoundId=function(){return"btnSound"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getFsStartSpinButtonId=function(){return"fsStartSpinButton"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getFsEndSpinButtonId=function(){return"fsEndSpinButton"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getAspectRatio=function(){return this.presentation.view.clientWidth/this.presentation.view.clientHeight},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.buttonPositionFix=function(e){return 1/this.getAspectRatio()*e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.buttonScaleFix=function(e){return 1/this.getAspectRatio()*e/100},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.rampFunction=function(){return-1.05*this.getAspectRatio()+1.91},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.stepFunction=function(e,t,i){return this.getAspectRatio()<i?JSON.parse(e):JSON.parse(t)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.twoStepFunction=function(e,t,i,n,s){var r=this.getAspectRatio();return r<n?e:n<=r&&r<s?t:s<=r?i:void 0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.threeStepFunction=function(e,t,i,n,s,r,o){var a=this.getAspectRatio();return a<s?e:s<=a&&a<r?t:r<=a&&a<o?i:o<=a?n:void 0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.fourStepFunction=function(e,t,i,n,s,r,o,a,l){var h=this.getAspectRatio();return h<r?e:r<=h&&h<o?t:o<=h&&h<a?i:a<=h&&h<l?n:l<=h?s:void 0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getPortraitMiniPaytableScale=function(e,t,i){e=e/100||.7,t=t/100||.5,i=i/100||.95;return this.getAspectRatio()>e?t+(1-this.getAspectRatio()):i},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getWinPresentationPosition=function(e){var t=this.game.getParameterValue("winYPositionAspectRatioThreshold")||.51;return this.getAspectRatio()<=t?this.presentation.parseValue(e,this.game.getParameterValue("winYPositionAspectRatioLow")||"@view.y.b.-960"):this.presentation.parseValue(e,this.game.getParameterValue("winYPositionAspectRatioHigh")||"@view.y.b.-200")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onBalanceUpdate=function(e){this.presentation.getById("SelectCoinValue");void 0===this.lastUpdateBalance&&(this.lastUpdateBalance=this.scope.game.balanceCash),void 0!==this.scope.game.freeRounds&&!0===this.scope.game.freeRounds.active&&(this.lastUpdateFreeRoundsTotalWin=this.scope.game.freeRounds.totalCoinsWin),(this.scope.game.balanceCash>this.lastUpdateBalance||this.scope.game.freeRounds.totalCoinsWin>this.lastUpdateFreeRoundsTotalWin)&&this.sound.sounds.BallanceUpdate&&this.sound.playSoundOnce("BallanceUpdate",!1),this.lastUpdateBalance=this.scope.game.balanceCash},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onFreeRoundsTotalWinUpdate=function(){void 0===this.lastUpdateFreeRoundsTotalWin&&(this.lastUpdateFreeRoundsTotalWin=this.scope.game.freeRounds.totalCoinsWin),this.scope.game.freeRounds.totalCoinsWin>this.lastUpdateFreeRoundsTotalWin&&this.sound.sounds.BallanceUpdate&&this.sound.playSoundOnce("BallanceUpdate",!1),this.lastUpdateFreeRoundsTotalWin=this.scope.game.freeRounds.totalCoinsWin},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getTotalWinDurations=function(){var e=this.game.winSumDelay;return this.game.totalNumberOfWinlines*e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getTotalWinScale=function(){var e=this.scope.config.parameters.winScaleValues,t=(this.scope.config.parameters.bigWinValues[0]-.01)*this.game.getTotalBetInCoins(),t=this.game.getTotalWinInCoins()/t*(e.end-e.start)+e.start;return Math.min(t,e.end)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.hideResetBetDialog=function(){return this.presentation.createAnimationTimeline("hideResetBetDialog",0,!1,!0,null)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.showResetBetDialog=function(){return this.resetBetDefered=this.q.defer(),this.presentation.createAnimationTimeline("showResetBetDialog",0,!1,!0,null)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.waitForResetBetDecision=function(){return this.resetBetDefered.promise},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.confirmResetBet=function(){this.hideResetBetDialog(),this.resetBetDefered.resolve()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setBigWinActive=function(e){this.bigWinActive=e,this.game.getParameterValue("hideUiOnBigWin")&&("buttonsOnly"==this.game.getParameterValue("hideUiOnBigWin")?this.updateWrapperButtonsState("HIDDEN"):this.setWrapperVisibility(!e))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.cancelResetBet=function(){this.hideResetBetDialog(),this.resetBetDefered.reject()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.shouldShowResetBetDialog=function(){return!1},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onBeforeUnloadSlotInterface=sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onBeforeUnload,sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onBeforeUnload=function(){this.onBeforeUnloadSlotInterface(),this.displayError=function(){},clearInterval(this.jackpot.timerId)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.hideGameRulesDownloadButton=function(){var e=document.getElementById("gamerulesidLandscape");e&&(e.style.display="none");e=document.getElementById("gamerulesidPortrait");e&&(e.style.display="none");e=document.getElementById("gamerulesid");e&&(e.style.display="none")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onSettingsTabChanged=function(e){var t=e.activeIndex,i=this.presentation.getById("btnRulesSettings"),e=2;t==(e=i?i.scope.config.tab||2:e)?(this.settingsGameRulesOpen=!0,this.triggerEvent("updateGameRulesButton")):this.hideGameRulesDownloadButton(),GcwGameClient&&(GcwGameClient.triggerEvent(gcw.api.GameEventType.CONTROL_PANEL_STATUS_CHANGE,1==t),GcwGameClient.triggerEvent(gcw.api.GameEventType.ABOUT_STATUS_CHANGE,4==t),GcwGameClient.triggerEvent(gcw.api.GameEventType.PAY_TABLE_STATUS_CHANGE,3==t))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processWrapperPendingEvents=function(){GcwGameClient&&(this.processWrapperVersionEvent(),this.processWrapperCurrencyFormatingEvent(),this.processWrapperMusicActive(),this.processWrapperLobbyActive())},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processWrapperMusicActive=function(){GcwGameClient&&GcwGameClient.wrapperData.musicActivePending},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processWrapperLobbyActive=function(){GcwGameClient&&GcwGameClient.wrapperData.lobbyActivePending},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processWrapperCurrencyFormatingEvent=function(){var e;GcwGameClient&&GcwGameClient.wrapperData.currencyFormattingPending&&(e={prefix:(e=this.scope.game.currency).sign,suffix:"",decimalPlaces:e.decimals,decimalSeparator:e.decimal_sep,groupingSeparator:e.thousand_sep,prefixSeparator:" ",suffixSeparator:"",code:e.code},GcwGameClient.triggerEvent(gcw.api.GameEventType.CURRENCY_FORMATTING_RESPONSE,e))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processWrapperVersionEvent=function(){GcwGameClient&&GcwGameClient.wrapperData.versionPending&&GcwGameClient.triggerEvent(gcw.api.GameEventType.VERSION_RESPONSE,this.scope.config.parameters.version)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processWrapperStart=function(){GcwGameClient&&(this.resumeGameExecution(!0,!0,!0),void 0!==this.previousButtonsState&&(this.updateWrapperButtonsState(this.previousButtonsState),delete this.previousButtonsState),GcwGameClient.triggerEvent(gcw.api.GameEventType.START_SUCCESS))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processWrapperStop=function(){GcwGameClient&&(this.stopAutoplay&&this.stopAutoplay(),this.pauseGameExecution(!0,!0,!0),void 0===this.previousButtonsState&&(this.previousButtonsState=this.wrapperButtonsState),this.updateWrapperButtonsState("DISABLED"),GcwGameClient.triggerEvent(gcw.api.GameEventType.STOP_SUCCESS))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processWrapperTerminate=function(){GcwGameClient&&(this.stopAutoplay&&this.stopAutoplay(),sna.debug.pauseGameExecution&&this.pauseGameExecution(),GcwGameClient.triggerEvent(gcw.api.GameEventType.TERMINATE_SUCCESS))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processWrapperResultShown=function(){GcwGameClient&&GcwGameClient.triggerEvent(gcw.api.GameEventType.RESULTS_SHOWN)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processWrapperWalletUpdated=function(e){GcwGameClient&&(this.scope.game.playMode===sna.service.tripleBellsProvider.playModes.REAL?(this.scope.game.balanceCash=e.balance,this.scope.lastResult&&this.scope.lastResult.game&&(this.scope.lastResult.game.currentWallet.rm=e.balance)):this.scope.game.playMode===sna.service.tripleBellsProvider.playModes.FUN&&(this.scope.game.balanceCash=e.free_balance+e.balance,this.scope.lastResult&&this.scope.lastResult.game&&(this.scope.lastResult.game.currentWallet.fm=e.free_balance+e.balance)),this.updateBalancePresentation(!1,!0))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processWrapperGeneralSoundStatusChanged=function(e){this.scope.game&&this.soundToggle(null,e)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processWrapperMusicStatusChanged=function(e){var t=this.presentation.getById(this.getToggleSettingsBackgroundSoundId());t&&this.toggleBackgroundSounds(t,e)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processSuperWheelRoundStarting=function(e){e&&this.game.getParameterValue("customSuperWheelDialogs")&&(e.enabled=!0,void 0!==e.showRules&&(e.showRules=!1),e.introMessage=this.getSuperWheelIntroMessage(),e.outroMessageCallback=this.getSuperWheelOutroMessage.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processSuperWheelFeature=function(){return this.isReplay()&&this.replaySuperWheelWinDialog(),window.SLSW?(window.SLSW.startSuperWheelRound({soundEnabled:this.game.getGameSettingsProperty("game_sounds")&&this.game.getGameSettingsProperty("background_sounds"),studioLink:this.scope.game.superWheel.studioLink,balance:this.scope.game.balanceCash,betAmount:this.getWrapperBet(),gameConfig:{enabled:!0,gameTrigger:!0}}),this.superWheelPromise=this.q.defer(),this.superWheelPromise.promise):this.q.when(!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.replaySuperWheelWinDialog=function(){var e=this.scope.game.replay.superWheelWin.toFixed(2);this.scope.game.simpleMessage=this.getSuperWheelOutroMessage(e),this.handleWrapperDialog("simpleMessage")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getSuperWheelMultiplier=function(){return this.scope.game.replay?this.scope.game.replay.superWheelMultiplier||1:this.scope.game.superWheelMultiplier||1},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getSuperWheelIntroMessage=function(){return"You have won a Super Wheel Bonus Game with a <X> multiplier!".replace("<X>","x"+this.getSuperWheelMultiplier().toString())},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getSuperWheelOutroMessage=function(e){var t="Congratulations, you have won <X> on the super wheel with a <Y> multiplier! Total win <Z>.";return t=(t=(t=t.replace("<X>",sna.service.util.formatCurrency(e,this.scope.game.currency))).replace("<Y>","x"+this.getSuperWheelMultiplier().toString())).replace("<Z>",sna.service.util.formatCurrency(this.getSuperWheelMultiplier()*e,this.scope.game.currency))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processWrapperSoundEffectsStatusChanged=function(e){this.toggleGameSounds(this.presentation.getById(this.getToggleSettingsSoundId()),e)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processWrapperSettingsTabStatusChanged=function(e,t){switch(t){case"ABOUT":this.updateWrapperModel({general:{currentLayout:"layout_Rules"}});break;case"PAY_TABLE":this.updateWrapperModel({general:{currentLayout:"layout_info"}});break;case"CONTROL_PANEL":this.updateWrapperModel({general:{currentLayout:"layout_General_Settings"}})}},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getFreeRoundsEndMessage=function(){var e,t=this.scope.translations[0<this.scope.game.freeRounds.totalCoinsWin?"DEFAULT_FREE_ROUND_MSG_FORMAT":"FREE_ROUNDS_NO_WIN"];return(t=this.scope.game&&this.scope.game.freeRounds&&this.scope.game.freeRounds.message&&0<this.scope.game.freeRounds.message.length?this.scope.game.freeRounds.message:t)?0<this.scope.game.freeRounds.totalCoinsWin&&(e=0<this.scope.game.freeRounds.totalCoinsWin?"{0,number,0.00}":"{0}",t=(t=t.replace(e,this.scope.game.freeRounds.totalWin)).replace("{1}",this.scope.game.currency.name),this.freeRoundsLastTotalWin=this.scope.game.freeRounds.totalWin):t="",t="nl_NL"===this.scope.game.language?t.replace("beurten","rondes"):t},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processFreeRoundsStartDialog=function(){var e=this.scope.game.freeRounds;return this.scope.game.userDeclinedFreeRounds||this.freeRoundsPostponed?(this.hasPendingFreeRoundsNotification=!1,this.q.when(!0)):e&&!this.freeRoundsStartDialogShow&&e.start?(this.freeRoundsStartDialogShow=!0,this.scope.game.replay?this.processFreeRoundsConfirmation():(this.betValueBeforeFreeRounds=this.getTotalBet(),this.hasIntro?this.presentation.createAnimationTimeline("showFreeRoundsStartDialog",0,!1,!0,null):this.presentation.createAnimationTimeline("showFreeRoundsStartDialog",1,!1,!0,null),this.waitForUserConfirmation("freeRounds").then(this.processFreeRoundsConfirmation.bind(this)))):this.q.when(!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getFreeRoundsTotalWin=function(){var e,t,i=this.scope.game.replay;return t=this.scope.game.showValuesInCash?+this.scope.game.freeRounds.totalWin:this.scope.game.freeRounds.totalCoinsWin,this.freeRoundReplayFlag&&i&&i.response&&i.response.game&&i.response.game.events&&(this.freeRoundReplayFlag=!1,((i=(e=i.response.game).events.find(function(e){return"evt_gmbl_enter"==e.type}))&&i.maxgmbl<i.winmeter||!this.replayInProgress)&&(t=this.scope.game.showValuesInCash?e.walletAfterLastBet.freeRounds?+e.walletAfterLastBet.freeRounds.totalWin:0:e.walletAfterLastBet.freeRounds?+e.walletAfterLastBet.freeRounds.totalWin*this.scope.game.betLines:0)),t},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processFreeRoundsEndDialog=function(e){var t=this.scope.game.freeRounds;if(this.freeRoundsStartDialogShow=!1,t&&(this.isReplay()||t.active)&&t.end){this.scope.game.autoplay.active&&(this.stopAutoplay(),this.restoreSpinInterface()),this.game.endFreeRounds(),this.spinInProgress=!1,this.scope.game.totalWin=+this.scope.game.freeRounds.totalWin,this.scope.game.totalCoinsWin=this.scope.game.freeRounds.totalCoinsWin,this.communication.freeRoundsEnded=!0;t=this.presentation.getById("freeRoundsTotalWin");t&&t.setText&&(t.setText(+this.scope.game.totalWin),t.updatePresentation());t=this.q.when(!0);return this.presentation.createAnimationTimeline("showFreeRoundsEndDialog",0,!1,!0,null),t=(t=this.isReplay()?(t=t.then(this.createTimerPromise.bind(this,2))).then(function(){this.userConfirmed(null,"freeRoundsEnd","hideFreeRoundsEndDialog");return this.updateWrapperModel({general:{popups:[]}})}.bind(this)):t.then(this.waitForUserConfirmation.bind(this,"freeRoundsEnd"))).then(this.processFreeRoundsFinished.bind(this))}return this.q.when(!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processFreeRoundsFinished=function(e){return this.gambleAllowed=!1,this.scope.game.freeRounds.end=!1,this.scope.game.freeRounds.active=!1,this.skipWinUpdate=!0,this.scope.game.activeGameTypeIndex=this.game.getGameSettingsProperty("superStakeActive")?1:0,this.setGameType(null,this.scope.game.activeGameTypeIndex).then(this.updateGameType.bind(this)).then(this.autoUpdatePresentation.bind(this)).then(this.updateBalancePresentation.bind(this)).then(this.restoreSpinInterface.bind(this)).then(this.enableInterface.bind(this)).then(this.showFreeRoundsTotalWin.bind(this)).then(function(){this.updateFooterWin=!0;var e=this.presentation.getById("footerWinLabel");e&&e.updatePresentation();e=this.presentation.getById("grandTotal");e&&(this.scope.game.showValuesInCash?e.setnumber(+this.scope.game.totalWin):this.scope.game.showPayoutsInCoins&&e.setnumber(+this.scope.game.totalCoinsWin));e=this.presentation.getById("lastWinValue");e&&e.setnumber(+this.getFreeRoundsTotalWin()),this.isRoundCompletePromise=this.handleRoundCompleted(),this.skipWinUpdate=!1}.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.showFreeRoundsTotalWin=function(e){if(0<this.scope.game.totalWin)return this.presentation.createAnimationTimeline("showFreeRoundsTotalWin",0,!1,!0,null)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processFreeRoundsConfirmation=function(e){return this.hasPendingFreeRoundsNotification=!1,"false"==e||0==e?(this.freeRoundsPostponed=!0,this.declineFreeRounds()):this.acceptFreeRounds()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.declineFreeRounds=function(){return this.scope.game.freeRounds.rejected=!0,this.scope.game.freeRounds.active=!1,this.communication.declineFreeRounds(this.getSpinRequestParams()).then(this.presentation.createAnimationTimeline.bind(this.presentation,"freeRoundsClose",0,!1,!0,null))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.acceptFreeRounds=function(){var e=this.q.when(!0);return this.scope.game.freeRounds.active=!0,(e=this.isVisibleSuperStake()&&this.scope.game.ssActive?e.then(this.deactivateSuperStake.bind(this,this.presentation.getById("superStakeBtnPlus"))):e).then(this.presentation.createAnimationTimeline.bind(this.presentation,"freeRoundsAccepted",0,!1,!0)).then(this.enableFreeRounds.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.enableFreeRounds=function(){return this.skipSuperStakePrompt=!0,this.game.acceptFreeRounds(),this.isReplay()&&(this.freeRoundReplayFlag=!0),this.setGameType(null,this.game.getGameTypeIndexByBetMode(this.scope.game.freeRounds.customData.bmode),!0).then(this.presentation.createAnimationTimeline.bind(this.presentation,"enableFreeRounds",0,!1,!0,null)).then(this.updateBalancePresentation.bind(this)).then(this.autoUpdatePresentation.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleFreeRounds=function(e){if(this.scope.game&&this.scope.game.freeRounds&&this.scope.game.freeRounds.end){var t=this.presentation.scope.layout.has(sna.presentation.MINI_LAYOUT);return(this.gambleFeatureEnabled||t)&&this.winNotCollected&&!this.scope.game.feature&&this.collectGambleFeature(),this.processFreeRoundsEndDialog(e)}},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getEmptyDialogText=function(){var e=this.scope.game.replay;if(e){e=e.emptyResponseType;if(e){if(e.buyFeatureOpen)return"Buy feature dialog opened";if(e.betChange)return"Player changed bet";if(e.stakeChange)return"Player de/activated super stake";if(e.featureBought)return"Player bought free spins";if(e.buyFeatureClose)return"Buy fs dialog closed";if(e.collect)return"This replay is a collect request"}}return"This replay is a collect request"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.finishShowSpinOptionsMenu=function(){var e;!this.presentation.animationCache.showSpinOptionsMenu||(e=this.presentation.animationCache.showSpinOptionsMenu)&&angular.forEach(e,function(e){e&&e.seek(.3)},this)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.lobbyButtonDisabled=function(){return this.fsButtonDisabled()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.fsButtonDisabled=function(){return this.isPokerStars()&&this.presentation.main.environment.is(sna.service.ENVIRONMENT_DESKTOP)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setShowCurrencySignsInGui=function(e){this.showCurrencySignsInGui=e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getShowCurrencySignsInGui=function(){return this.scope.config.slot.showCurrencySignsInGui||this.showCurrencySignsInGui},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getShowInCash=function(e){return this.scope.game.showValuesInCash},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.hasSessionTime=function(){return!(!this.isUKGC()||!this.game.getGameSettingsProperty("isDisplaySessionTime")||this.isPokerStars())},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.hasSessionWin=function(){return!(!this.isUKGC()||!this.game.getGameSettingsProperty("isDisplayNet")||this.isPokerStars()||this.isReplay())},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getGambleMaxRoundCount=function(){if(this.scope.game.gambleType)return this.scope.game.gambleType.maxRoundCount},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getGambleLimitInCoins=function(){if(this.scope.game.gambleType)return this.scope.game.gambleType.maxStake},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getGambleLimitInCash=function(){return this.getGambleLimitInCoins()*this.game.getCoinValue()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getDynamicTranslation=function(e,t){var i=this.game.getParameterValue("translationsReplace");if(i){var n=i[e];if(n){i=n.key,e=n.placeholder,t=t||n.value,i=this.scope.translations[i];return i&&-1!=i.search(e)?i.replace(e,t):i}}},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.openDownloadableRules=function(){var e=this.scope.gameRules;window.open(e,"_blank")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getTurboSpinSettingsPositionX=function(){var e=170;return e=this.isUKGC()?0:e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isUKGC=function(){var e=this.game.getParameterValue("markets");return this.isTargetMarket(e.ukgc)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.openAutoplaySettings=function(){this.game.getParameterValue("markets");this.scope.game.autoplay.winThreshold=0,this.scope.game.autoplay.winDecreaseThreshold=0,this.scope.game.autoplay.winThresholdActive=!1,this.scope.game.autoplay.totalBetToGambleThreshold=0,this.scope.game.autoplay.totalBetToGambleThresholdActive=!1,this.presentation.getById("autoplayOptions").setValue(this.getStartingAutoplayValue(),!0),this.autoUpdatePresentation(),this.resetAutoplayValues(),this.presentation.createAnimationTimeline("showAutoplaySettingsPanel",0,!1,!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getHowToTranslation=function(){var e=this.scope.translations.TITLE_RULES_HOW_TO;return e=(e=(e=e.replace("{0}",this.getGambleMaxRoundCount())).replace("{1}",this.getGambleLimitInCash())).replace("{2}",this.scope.game.currency.name)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getHomeButtonDeactivate=function(){var e=this.scope.game.homeButtonDeactivate,t=this.presentation.main.environment.is(sna.service.ENVIRONMENT_DESKTOP);return"all"===e||(!("desktop"!==e||!t)||"mobile"===e&&!t)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getHomeButtonVisible=function(){var e=this.scope.game.homeButtonDeactivate,t=this.presentation.main.environment.is(sna.service.ENVIRONMENT_DESKTOP);return"all"!==e&&(("desktop"!==e||!t)&&!("mobile"===e&&!t))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getFullScreenButtonDeactivate=function(){var e=this.scope.game.fullScreenButtonDeactivate,t=this.presentation.main.environment.is(sna.service.ENVIRONMENT_DESKTOP);return"all"===e||(!("desktop"!==e||!t)||"mobile"===e&&!t)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getHideAutoSpinNTurboSpinSection=function(){return this.getHideAutoSpin()&&this.getHideTurboSpin()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getHideAutoSpin=function(){return!this.scope.game.hideAutoSpin},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getShowAutoSpin=function(){return!!this.scope.game.hideAutoSpin},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getFeatureBuyPresentInGame=function(e){return!(sna.service.tripleBellsProvider.playModes.REPLAY!==this.scope.game.playMode||!this.isPokerStars())||(this.scope.game.featureBuyDisabled||this.isPokerStars())},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setYSpinSettingsOldUI=function(){return this.scope.game.hideAutoSpin?-200:0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setYSpinSettingsHideTurboSpinUKDeskOldUI=function(){return this.scope.game.hideFastSpin?-120:0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setYSpinSettingsUKDeskOldUI=function(){return this.scope.game.hideAutoSpin?-620:0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setYSpinSettingsUKOldUI=function(){return this.scope.game.hideAutoSpin?-550:0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setYHideAutoSpinOldUI=function(){return this.scope.game.hideAutoSpin?-150:0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setXHideAutoSpinNewUI=function(){return this.scope.game.hideAutoSpin?0:-170},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getHideTurboSpin=function(){return!this.scope.game.hideFastSpin},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getHideSuperStake=function(){return this.scope.game.hideSuperStake},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isVisiblePortVersion=function(){return!!this.scope.game.showPortVersion},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.hideidePortVersion=function(){return!this.scope.game.showPortVersion||null==this.scope.game.showPortVersion},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isHSLB=function(){return 1==this.scope.game.HSLB},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getDisabledSlamStop=function(){return!!this.scope.game.disableSlamStop},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isVisibleSuperStake=function(){var e=this.getHideSuperStake();return!(!this.getGameHasSuperStake()||e)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.hideSuperStakeVisible=function(){var e=this.getHideSuperStake();return!(this.getGameHasSuperStake()&&!e)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setYHideTurboSpinNewUI=function(){return this.scope.game.hideFastSpin?-200:0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setYHideFSOldUI=function(){return this.scope.game.hideFastSpin?-200:0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setYHideFSSpinSettingsOldUI=function(){return this.scope.layout.has(sna.service.ENVIRONMENT_MOBILE)?this.scope.game.hideFastSpin?100:250:this.scope.game.hideFastSpin?-150:0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setYHideSpaceBarSettingsOldUI=function(){if(!this.scope.layout.has(sna.service.ENVIRONMENT_MOBILE))return this.scope.game.disableSpaceBar?235:385},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setXHideAutoPlayInterfaceOldUI=function(){return this.scope.layout.has(sna.service.ENVIRONMENT_MOBILE)&&this.scope.layout.has(sna.service.ENVIRONMENT_PORTRAIT)?this.scope.game.hideAutoSpin&&this.scope.game.hideHomeButton?-670:this.scope.game.hideAutoSpin?-590:this.scope.game.hideHomeButton?-760:-670:this.scope.layout.has(sna.service.ENVIRONMENT_MOBILE)&&this.scope.layout.has(sna.service.ENVIRONMENT_LANDSCAPE)?this.scope.game.hideAutoSpin&&this.scope.game.hideHomeButton?-600:this.scope.game.hideAutoSpin?-500:this.scope.game.hideHomeButton?-760:-590:void 0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setXHideTurboSpinNewUI=function(){return this.scope.game.hideFastSpin?0:-170},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getShowTurboSpin=function(){return!!this.scope.game.hideFastSpin},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getHideSpaceBar=function(){return!this.scope.game.disableSpaceBar},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setYHideSpaceBar=function(){return this.presentation.main.environment.is(sna.service.ENVIRONMENT_DESKTOP)&&this.scope.game.disableSpaceBar?-200:0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setYHideSpaceBarMainSettings=function(){return this.presentation.main.environment.is(sna.service.ENVIRONMENT_DESKTOP)?this.scope.game.disableSpaceBar?0:100:200},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setPostionOnPSX=function(){return this.isPokerStars()?this.presentation.scope.layout.has(sna.service.ENVIRONMENT_PORTRAIT)?0:1765:this.presentation.scope.layout.has(sna.service.ENVIRONMENT_PORTRAIT)?0:-80},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setPostionOnPSXT=function(){return this.isPokerStars()?this.presentation.scope.layout.has(sna.service.ENVIRONMENT_PORTRAIT)?this.getGameHasSuperStake()&&!this.getHideSuperStake()?this.stepFunction(0,-10,.65):this.stepFunction(0,10,.65):1715:this.presentation.scope.layout.has(sna.service.ENVIRONMENT_PORTRAIT)?0:-30},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setXPS=function(){if(this.isPokerStars()){if(this.presentation.scope.layout.has(sna.service.ENVIRONMENT_PORTRAIT))return this.stepFunction(0,-200,.65)}else if(this.presentation.scope.layout.has(sna.service.ENVIRONMENT_PORTRAIT))return 0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setPostionOnPSY=function(){return this.isPokerStars()?this.presentation.scope.layout.has(sna.service.ENVIRONMENT_PORTRAIT)?this.twoStepFunction(-245,-145,45,.505,.685):-235:this.presentation.scope.layout.has(sna.service.ENVIRONMENT_PORTRAIT)?-400:-430},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setPostionOnPSYT=function(){return this.isPokerStars()?this.presentation.scope.layout.has(sna.service.ENVIRONMENT_PORTRAIT)?this.presentation.scope.layout.has(sna.service.ENVIRONMENT_TABLET)?35:50:-235:this.presentation.scope.layout.has(sna.service.ENVIRONMENT_PORTRAIT)?-400:this.stepFunction(-285,-335,1.58)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.showMenuButtonPS=function(e){return!!this.isPokerStars()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getHideHomeButton=function(){var e=this.scope.game.hideHomeButton;return!this.isPokerStars()&&!e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getMaxWinMultiplier=function(){return this.scope.game.maxWinMultiplier||!1},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getServerVersion=function(){return this.isVisiblePortVersion()?this.scope.game.serverVersion:null},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getMaxWinValueCash=function(){var e=this.getTotalBets(),e=e[e.length-1];return this.getMaxWinMultiplier()*e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getShowWinProbabilityDisplay=function(){return!(!this.scope.game.showWinProbabilityDisplay||!this.getMaxWinMultiplier())},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getGameDoesNotHaveStopOnBonus=function(){return void 0===this.game.getParameterValue("gameDoesNotHaveStopOnBonus")||!0!==this.game.getParameterValue("gameDoesNotHaveStopOnBonus")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getGameDoesntHaveFreeSpins=function(){return!this.presentation.stage.scope.config.game.fs&&!this.presentation.stage.scope.config.game.freespins},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getGameHasSuperStake=function(){return void 0!==this.game.getParameterValue("gameHasSuperStake")&&!0===this.game.getParameterValue("gameHasSuperStake")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setMaxBetButtonX=function(){return this.isVisibleSuperStake()?-190:0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getRTP=function(){return this.scope.game.rtp},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getMaxWinProbability=function(){return this.scope.game.maxWinProbability||!1},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onRequestSent=function(e){var t;void 0!==e&&(t=setTimeout(function(){this.presentation.createAnimationTimeline("showLoadingScreen",0,!1,!0,null),this.requestTimerMap[e].triggered=!0,this.isPokerStars()&&this.scope.game.autoplay.active&&this.stopAutoplay()}.bind(this),this.game.getParameterValue("requestSpinnerTimeout")||1e4),this.requestTimerMap=this.requestTimerMap||{},this.requestTimerMap[e]={timeoutId:t,triggered:!1})},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onRequestSuccess=function(e){this.clearRequestId(e)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onRequestReject=function(e){this.clearRequestId(e),this.presentation.createAnimationTimeline("hideLoadingScreen",0,!1,!0,null)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.clearRequestId=function(e){void 0!==e&&this.requestTimerMap[e]&&(clearTimeout(this.requestTimerMap[e].timeoutId),this.requestTimerMap[e].triggered&&this.presentation.createAnimationTimeline("hideLoadingScreen",0,!1,!0,null))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.openBuyBonusOnWrapper=function(){if(!this.spinInProgress)return this.processWrapperButtonClickEvent({data:null,name:"BUTTON_BUY_BONUS"},"ON_BUTTON_CLICKED")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.openBuyFeature=function(e){if(this.spinInProgress)return this.q.when(!0);e&&e.disable(),this.buyFeatureDialogOpened=!0;var t=this.game.getParameterValue("buyFeatureButtonsIDs")||["confirmBuyBonusBtn","cancelBuyBonusBtn"],i=this.game.getParameterValue("buyFreeSpinsButtons");i&&"object"==typeof i.buy&&(t=Object.keys(this.game.getParameterValue("buyFreeSpinsButtons").buy).map(function(e){return this.game.getParameterValue("buyFreeSpinsButtons").buy[e].id},this)),this.touchAnywhereEnabled&&this.game.getParameterValue("removeTouchAnywhereOnBuyBonusOpened")&&this.removeGlobalPressCallback(this.touchAnywhereCallback),this.updateWrapperGameMessage("EMPTY"),this.setButtonsState(t,!1),this.presentation.getById(this.getSpinButtonId()).disable(),this.disableInterface(),this.onBuyFeatureOpen(),this.updateWrapperModel({elements:{BUTTON_FAST_SPIN:{visible:!0,enabled:!1}}});var n=this.presentation.createAnimationTimeline("buyFeatureOpen",0,!1,!0,null);this.slidableTouch&&(n=n.then(this.disableInterface.bind(this)));e=this.presentation.getById("buyFeatureButtons");e&&e.children.forEach(function(e){e.enabled=!0}),this.game.getParameterValue("hideUiOnBuyFeatureDialogOpen")&&this.presentation.main.environment.is(sna.service.ENVIRONMENT_MOBILE)&&this.setWrapperVisibility(!1);e=this.q.when(!0),e=(e=this.game.getParameterValue("updateBetConfigurationOnBuyOpen")?e.then(this.communication.updateBetConfiguration.bind(this.communication,this.getSpinRequestParams())):e).then(this.communication.openBuyBonus.bind(this.communication,this.getSpinRequestParams()));return(i=this.game.getParameterValue("buyFreeSpinsButtons"))&&i.otherButtons||(e=e.then(this.setButtonsState.bind(this,t,!0))),this.q.all([n,e])},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isBetLimitReached=function(e){var t=this.scope.game.coinValue.toString();return"minus"==e?0==this.scope.game.coinValues.indexOf(t):"plus"==e?this.scope.game.coinValues.indexOf(t)==this.scope.game.coinValues.length-1:void 0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateBuyFeatureBet=function(e){var t=this.q.when(!0),i=e.scope.config.tag;return"minus"==i?t=t.then(this.setBet.bind(this,null,null,"prev")):"plus"==i&&(t=t.then(this.setBet.bind(this,null,null,"next"))),t=(t=t.then(this.updateBuyFeatureState.bind(this,e.parent))).then(this.updateWrapperButtonsState.bind(this,"DISABLED"))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateBuyFeatureState=function(e){var t=this.presentation.getById("buyFeatureTotalBet"),i=this.presentation.getById("buyFeatureValue"),n=this.presentation.getById("buyBonus"),s=this.getElementsByTag(e,"minus")[0],r=this.getElementsByTag(e,"plus")[0],o=this.presentation.getById("confirmBuyBonusBtn"),a=this.scope.game.coinValues,l=a.indexOf(this.scope.game.coinValue.toString());s&&s.enable(),r&&r.enable();e=this.q.when(!0);return 0==l?s.disable():a.length-1==l&&r.disable(),o&&(this.canAffordBuyBonus()?o.enable():o.disable()),e=e.then(function(){"DISABLED"!=this.wrapperButtonsState&&this.updateWrapperButtonsState("DISABLED"),t.updatePresentation(),i&&i.updatePresentation(),n&&n.setButtonsState&&n.setButtonsState()}.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onBuyFeatureOpen=function(e){},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.closeBuyFeature=function(e){var t,i=this.game.getParameterValue("buyFeatureButtonsIDs")||["confirmBuyBonusBtn","cancelBuyBonusBtn"],n=this.game.getParameterValue("buyFreeSpinsButtons");return n&&"object"==typeof n.buy&&(i=Object.keys(this.game.getParameterValue("buyFreeSpinsButtons").buy).map(function(e){return this.game.getParameterValue("buyFreeSpinsButtons").buy[e].id},this)),this.setButtonsState(i,!1),this.touchAnywhereEnabled&&this.addGlobalPressCallback(this.touchAnywhereCallback),this.game.getParameterValue("buyFreeSpinsButtons")&&(t=this.game.getParameterValue("buyFreeSpinsButtons").cancel),this.game.getParameterValue("hideUiOnBuyFeatureDialogOpen")&&this.presentation.main.environment.is(sna.service.ENVIRONMENT_MOBILE)&&this.setWrapperVisibility(!0),(void 0!==e?this.q.all([this.communication.closeBuyBonus(t),this.closeBuyBonusDialog()]):this.closeBuyBonusDialog()).then(this.onBuyBonusClosed.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onBuyBonusClosed=function(){this.enableInterface();var e=this.presentation.getById("buyFeatureButton");e&&e.enable();e=this.presentation.getById("buyFeatureContainer");e&&e.show(),this.isDialogOpened=!1},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.confirmBuyBonus=function(e){if(this.canAffordBuyBonus(e)){var t=e.scope.config.id;e.disable();var i=this.game.getParameterValue("buyFeatureButtonsIDs")||["confirmBuyBonusBtn","cancelBuyBonusBtn"],n=this.game.getParameterValue("buyFreeSpinsButtons");n&&"object"==typeof n.buy?(i=Object.keys(this.game.getParameterValue("buyFreeSpinsButtons").buy).map(function(e){return this.game.getParameterValue("buyFreeSpinsButtons").buy[e].id},this),this.buyFeatureButtonClickedId=e.parent.scope.config.id):(this.buyFeatureButtonClickedId=e.scope.config.id,n&&(t=n.buy)),this.setButtonsState(i,!1),this.setBuyFeatureOtherButtonsState(!1);i=this.q.when(!0);return i=(i=(i=this.game.getParameterValue("updateBetConfigurationOnBuyBonus")?i.then(this.communication.updateBetConfiguration.bind(this.communication,this.getSpinRequestParams())):i).then(this.communication.activateBuyFeature.bind(this.communication,t))).then(function(e){return this.buyFeatureActivated=!0,this.scope.game._buyBonusActivated=!0,this.onBuyBonusFeatureActivated(e)}.bind(this))}i=this.presentation.getById("insufficientFundsMessage");return message=this.scope.translations.INSUFFICIENT_FUNDS,i.text=message,i.scope.config.text=message,i.updatePresentation(),this.showOverlay(),this.presentation.createAnimationTimeline("ShowInsufficientFunds",0,!1,!0,null)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setBuyFeatureOtherButtonsState=function(i){var e=this.game.getParameterValue("buyFreeSpinsButtons");!e||(e=e.otherButtons)&&0<e.length&&e.forEach(function(e){var t=this.presentation.getById(e);t&&(-1<e.search("plus")||-1<e.search("minus")?i&&(-1<e.search("plus")&&!this.isMaxBet()||-1<e.search("minus")&&!this.isMinBet())?t.enable():t.disable():i?t.enable():t.disable())},this)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.canAffordBuyBonus=function(e){return this.game.canAffordBuyBonus()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onBuyBonusFeatureActivated=function(e){return this.q.when(!0).then(this.processActivateBuyResponse.bind(this,e)).then(this.closeBuyBonusDialog.bind(this)).then(this.animateBuyBonusTransition.bind(this)).then(this.spin.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.animateBuyBonusTransition=function(){return this.q.when(!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.closeBuyBonusDialog=function(){return this.buyFeatureDialogOpened=!1,this.setWrapperVisibility(!0),this.presentation.createAnimationTimeline("buyFeatureClose",0,!1,!0,null)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processActivateBuyResponse=function(e){return this.buyBonusResponse=e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.showTournamentInfo=function(){var e=[this.presentation.getById("dtPanelLandscapeDetail"),this.presentation.getById("dtPanelLandscapeInfo"),this.presentation.getById("dtPanelPortraitDetail"),this.presentation.getById("dtPanelPortraitInfo")];e[0].hide(),e[1].show(),e[2].hide(),e[3].show()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.hideTournamentInfo=function(){var e=[this.presentation.getById("dtPanelLandscapeDetail"),this.presentation.getById("dtPanelLandscapeInfo"),this.presentation.getById("dtPanelPortraitDetail"),this.presentation.getById("dtPanelPortraitInfo")];e[0].show(),e[1].hide(),e[2].show(),e[3].hide()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.disableInterface=function(){this.presentation.createAnimationTimeline("disableInterface",0,!1,!0),this.setUseSpacebarSpin(!1)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.enableInterface=function(){this.scope.game.disableSpaceBar||this.scope.layout.has(sna.service.ENVIRONMENT_MOBILE)||!this.game.getGameSettingsProperty("spacebar_spin")||this.setUseSpacebarSpin(!0),this.spinInProgress||this.buyFreespinsRestoreActive||this.presentation.createAnimationTimeline("enableInterface",0,!1,!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.spaceBarEnableConditions=function(){return!0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.playScatterLandingSound=function(e){var t="scatterLanding";this.scatterLandingSoundIndex0=(this.scatterLandingSoundIndex0+1)%(e||3),t+=this.scatterLandingSoundIndex0.toString(),this.sound.sounds[t]&&(this.sound.stopSound(t),this.sound.playSound(t))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.playWildLandingSound=function(){var e="WildLanding";this.sound.sounds[e]&&(this.sound.stopSound(e),this.sound.playSound(e,!1))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.playMultiplierLandingSound=function(){var e="MultiplierLand";this.sound.sounds[e]&&(this.sound.stopSound(e),this.sound.playSoundOnce(e,!1))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.playMysteryLandingSound=function(){var e="MysteryLanding";this.sound.sounds[e]&&(this.sound.stopSound(e),this.sound.playSound(e,!1))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.playCascadeLandingSound=function(e){var t="CascadeLanding";this.activeReelIndex=e.reel.index,t+=this.activeReelIndex.toString(),this.sound.sounds[t]&&this.sound.playSoundOnce(t,!1)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.calcScale=function(e,t,i){var n=this.presentation.view.clientWidth,s=this.presentation.view.clientHeight,e=e/100||.505,t=t/100||.54;return this.getAspectRatio()<e?i||1.1:s/n*t},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getSpinificationStagger=function(e){e=Number(e);return 2},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.handleSpinificationHold=function(t,i){var e=this.scope.lastResult.outcome.reelHasScatter;if(e&&-1!=e.indexOf(!0)){var n=!0,s=this.scope.game.feature;if(!s||s.start)for(var r=0;r<=t.scope.model.index;r++)n=n&&e[r];this.presentation.getById("reels").reels.forEach(function(e){e.scope.model.index<=t.scope.model.index&&e.outcomeSymbols.forEach(function(e){n?e.animations.spinificationHold&&e.animations.spinificationHold.animate(i):e.animations.stopSpinificationHold&&e.animations.stopSpinificationHold.animate(i)},this)})}},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isWinSize=function(e){return"small"===e?this.game.getTotalWinInCoins()<2*this.game.getTotalBetInCoins():"mediumSmall"===e?this.game.getTotalWinInCoins()>=2*this.game.getTotalBetInCoins()&&this.game.getTotalWinInCoins()<5*this.game.getTotalBetInCoins():"mediumLarge"===e?this.game.getTotalWinInCoins()>=5*this.game.getTotalBetInCoins():void 0},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.playWinIndividualAnimation=function(){var e;this.winIndividualDisabled||this.isMaxWinReached()||this.scope.game.maxWinReached||this.winIndividualActive||(e=this.game.getParameterValue("markets"),this.isTargetMarket(e.ukgc)&&this.game.isWinLessThanBet()?this.game.getParameterValue("highlightSymbolsOnSmallWin")&&this.presentation.createAnimationTimeline("smallWinIndividual",0,!1,!0,null):(!this.isAfterFS()||this.isAfterFS()&&this.game.getParameterValue("displayWinsAfterFreeSpins"))&&(this.game.getParameterValue("dimSymbolsBeforeWinIndividual")&&this.presentation.createAnimationTimeline("dimAllSymbols",0,!1,!0),this.presentation.createAnimationTimeline("winIndividual",0,!1,!0),this.winIndividualActive=!0))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isAfterFS=function(){var e=this.scope.lastResult.outcome;if(e){e=e.features&&e.features.freespins;if(e)return e.end}return!1},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setCountupSoundVolumeUKGC=function(){var e=this.game.getParameterValue("markets");this.isTargetMarket(e.ukgc)&&(this.game.isWinLessThanBet()?this.sound&&this.sound.sounds&&this.sound.sounds.CounterWin&&(this.sound.volume(this.sound.sounds.CounterWin,0),this.sound&&this.sound.sounds&&this.sound.sounds.CounterWinEnd&&this.sound.volume(this.sound.sounds.CounterWinEnd,0)):this.sound&&this.sound.sounds&&this.sound.sounds.CounterWin&&(this.sound.volume(this.sound.sounds.CounterWin,1),this.sound&&this.sound.sounds&&this.sound.sounds.CounterWinEnd&&this.sound.volume(this.sound.sounds.CounterWinEnd,1)))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.checkGambleWinUKGC=function(){return!this.isUKGC()||this.gambleFeatureOutcome.gval*this.scope.game.coinValue>this.scope.game.bet*this.scope.game.coinValue},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getRules=function(){this.currentURL=this.currentURL||(window.SNA||{}).basePath||"./";var e="",t='<div class="rowBlock" style = "text-align: left;"><style>.button-text {position:absolute;top:27.5%;text-align: center;white-space: nowrap;font-size: 67%;width: 100%;color: black;}@font-face {font-family: dejavuSansBold;src: url('+this.currentURL+"assets/DEJAVUSANSCONDENSED-BOLD.ttf);}@font-face {font-family: HelveticaRoundedBlack;src: url("+this.currentURL+'assets/HelveticaRoundedLTStd-Black.otf);}</style><div class="rowImageBlock" style = "top: auto;"><div style="position: relative; text-align: center;"><img src="'+this.currentURL+'assets/rules/bttn_GAMBLE_regular.png" style="width: 94%;"/><div class="button-text" style="font-size: 85%; font-family: dejavuSansBold; text-align: center;">'+this.presentation.scope.translations.GAMBLE_HEADER_NEW_UI+'</div></div></div><div class="rowTextBlock"><h3>'+this.scope.translations.GAMBLE_HEADER_NEW_UI+"</h3>"+this.scope.translations.GAMBLE_BUTTON_GAMERULES_DESCRIPTION+'</div></div><div class="rowBlock decor" style = "text-align: left;"><div class="rowImageBlock" style = "top: auto;"><div style="position: relative; text-align: center;"><img src="'+this.currentURL+'assets/rules/bttn_GAMBLE_regular.png" style="width: 94%;"/><div class="button-text" style="font-size: 85%; font-family: dejavuSansBold; text-align: center;">'+this.presentation.scope.translations.COLLECT_BUTTON_HEADER+'</div></div></div><div class="rowTextBlock"><h3>'+this.scope.translations.COLLECT_BUTTON_HEADER+"</h3>"+this.scope.translations.COLLECT_BUTTON_GAMERULES_DESCRIPTION+"</div></div>",i='<div class="rowBlock decor" style = "text-align: left;"><div class="rowImageBlock" style = "top: auto;"><img src="'+this.currentURL+'assets/rules/bttn_MENU_regular.png" /></div><div class="rowTextBlock"><h3>'+this.presentation.scope.translations.GAME_SETTINGS_BUTTON_HEADER_NEW_UI+"</h3>"+this.presentation.scope.translations.GAME_SETTINGS_BUTTON_DESCRIPTION_NEW_UI+"</div></div>",n='<div class="rowBlock decor" style = "text-align: left;"><div class="rowImageBlock" style = "top: auto;"><img src="'+this.currentURL+'assets/rules/bttn_SOUND_OFF_regular.png" /></div><div class="rowTextBlock"><h3>'+this.presentation.scope.translations.MUTE_UNMUTE_BUTTON_HEADER_NEW_UI+"</h3>"+this.presentation.scope.translations.MUTE_UNMUTE_BUTTON_DESCRIPTION_NEW_UI+"</div></div>",s="bttn_CHOOSE_BET"+(1==this.game.getParameterValue("isNewLayoutDisabled")||null==this.game.getParameterValue("isNewLayoutDisabled")?"_"+this.selectBetIcon():""),r='<div class="rowBlock decor" style = "text-align: left;"><div class="rowImageBlock" style = "top: auto;"><img src="'+this.currentURL+"assets/rules/"+s+'.png" /></div><div class="rowTextBlock"><h3>'+this.presentation.scope.translations.BET_SETTINGS_MENU_NEW_UI+"</h3>"+this.presentation.scope.translations.BET_SETTINGS_BUTTON_DESCRIPTION_NEW_UI+"</div></div>",o='<div class="rowBlock decor" style = "text-align: left;"><div class="rowImageBlock" style = "top: auto;"><img src="'+this.currentURL+'assets/rules/bttn_FAST_SPIN_regular.png" /></div><div class="rowTextBlock"><h3>'+this.presentation.scope.translations.TURBO_SPIN_HEADER_NEW_UI+"</h3>"+this.presentation.scope.translations.TURBO_SPIN_BUTTON_DESCRIPTION_NEW_UI+"</div></div>",a=this.presentation.scope.translations.SPIN,l=function(){return this.presentation.scope.layout.has(sna.service.ENVIRONMENT_DESKTOP)?this.getHideSpaceBar()?this.presentation.scope.translations.SPIN_BUTTON_DESCRIPTION_NEW_UI:this.presentation.scope.translations.RULES_SETTINGS_START_BUTTON_NO_SPACE:!this.getHideAutoSpin()||this.scope.config.parameters.cantStartAutoplayByLongSpinHold?this.presentation.scope.translations.SPIN_BUTTON_MOBILE_NEW_UI_NO_AUTOSPIN:this.presentation.scope.translations.SPIN_BUTTON_MOBILE_NEW_UI}.bind(this),h='<div class="rowBlock decor" style = "text-align: left;"><div class="rowImageBlock" style = "top: auto;"><img src="'+this.currentURL+'assets/rules/bttn_SPIN_regular.png" /></div><div class="rowTextBlock"><h3>'+a+"</h3>"+l()+"</div></div>",c='<div class="rowBlock decor" style = "text-align: left;"><div class="rowImageBlock" style = "top: auto;"><img src="'+this.currentURL+'assets/rules/bttn_AUTOSPIN_regular.png" /></div><div class="rowTextBlock"><h3>'+this.presentation.scope.translations.AUTO_SPIN_MENU_NEW_UI+"</h3>"+this.presentation.scope.translations.AUTO_SPIN_BUTTON_DESCRIPTION_NEW_UI+"</div></div>",p='<div class="rowBlock decor" style = "text-align: left;"><div class="rowImageBlock" style = "top: auto;"><div style="position: relative;text-align: bottom;"><div style="position:absolute; top:-20%; left:50%; transform:translate(-46.5%, -50%); white-space: nowrap; font-size: 0.75em;" >'+this.presentation.scope.translations.TOTAL_BET+'</div><img src="'+this.currentURL+'assets/rules/bttn_MIN_regular.png" style="padding-right: 10px;"/><img src="'+this.currentURL+'assets/rules/bttn_PLUS_regular.png" style="padding-left: 10px;"/></div></div><div class="rowTextBlock"><h3>'+this.presentation.scope.translations.TOTAL_BET+"</h3>"+this.presentation.scope.translations.TOTAL_BET_BUTTON_DESCRIPTION_NEW_UI+"</div></div>",u='<div class="rowBlock decor" style = "text-align: left;"><div class="rowImageBlock" style = "top: auto;"><img src="'+this.currentURL+'assets/rules/bttn_menuClose_regular.png" /></div><div class="rowTextBlock"><h3>'+this.presentation.scope.translations.CLOSE+"</h3>"+this.presentation.scope.translations.CLOSE_NEW_UI+"</div></div>",d=function(){return(this.isVisibleSuperStake()?'<div class="rowBlock" style = "text-align: left;">':'<div class="rowBlock decor" style = "text-align: left;">')+'<div class="rowTextBlock"><h3>'+this.presentation.scope.translations.BET_SETTINGS_MENU_NEW_UI+'</h3></div><div class="rowImageBlock" style = "top: auto;"><img src="'+this.currentURL+"assets/rules/"+s+'.png" /></div><div class="rowTextBlock"><h3>'+this.presentation.scope.translations.MAX_BET+"</h3>"+this.presentation.scope.translations.RULES_SETTINGS_MAX_BET_BUTTON_NEW_UI+"</div></div>"}.bind(this),m=function(){var e="";return this.scope.game.showWinProbabilityDisplay?this.presentation.scope.translations.GERMAN_SUPER_STAKE_RULES&&this.presentation.scope.translations.SUPER_STAKE_DESCRIPTION_COMMON_INCREASES&&(e=this.presentation.scope.translations.GERMAN_SUPER_STAKE_RULES+"<br/><br/>"+this.presentation.scope.translations.SUPER_STAKE_DESCRIPTION_COMMON_INCREASES):e=2!==this.game.getParameterValue("superStakeMultiplier")&&this.presentation.scope.translations.SUPER_STAKE_BUTTON_DESCRIPTION_NEWUI_INCREASE||this.presentation.scope.translations.SUPER_STAKE_BUTTON_DESCRIPTION_NEWUI,'<div class="rowBlock decor" style = "text-align: left;"><div class="rowImageBlock" style = "top: auto;"><img src="'+this.currentURL+'assets/rules/bttn_SUPER_STAKE2_active_regular.png" /></div><div class="rowTextBlock"><h3>'+this.presentation.scope.translations.SUPERSTAKE_MODE+"</h3>"+e+"</div></div>"}.bind(this),f='<div class="rowBlock decor" style = "text-align: left;"><div class="rowImageBlock" style = "top: auto;"><img src="'+this.currentURL+'assets/rules/icon_quattro.png" /></div><div class="rowTextBlock">'+this.presentation.scope.translations.GAME_RULES_QUATTRO_BUTTON+"</div></div>",g=function(){var e,t="",t='<div class="rowBlock decor" style = "text-align: left;">',i='<div class="rowImageBlock" style = "top: auto;"><img src="'+this.currentURL+'assets/rules/btn_mainSettings_active.png" /></div><div class="rowTextBlock"><h3>'+this.presentation.scope.translations.GAME_SETTINGS_BUTTON_HEADER_NEW_UI+"<br/><br/>"+this.presentation.scope.translations.MAIN_HEADER_NEW_UI+"<br/><br/>"+this.presentation.scope.translations.INTRO_SCREEN+"</h3>"+this.presentation.scope.translations.MAIN_SETTINGS_INTRO_SCREEN_SECTION_DESCRIPTION+"</div>",n='<div class="rowTextBlock"><h3>'+this.presentation.scope.translations.SPIN+"</h3><h3>"+this.presentation.scope.translations.SPIN_SETTINGS_SPACEBAR_SPIN_SECTION_TITLE+"</h3>"+this.presentation.scope.translations.SPIN_SETTINGS_SPACEBAR_SPIN_SECTION_DESCRIPTION+"</div>",s="";"nl_NL"!==this.scope.game.language&&this.game.showTouchAnywhereButton()&&(s='<div class="rowTextBlock"><h3>'+this.presentation.scope.translations.SPIN+"</h3><h3>"+this.presentation.scope.translations.TOUCH_ANYWHERE_TITLE+"</h3>"+this.presentation.scope.translations.TOUCH_ANYWHERE+"</div>"),this.game.getParameterValue("isNewLayoutDisabled")&&(e='<div class="rowTextBlock"><h3>'+this.presentation.scope.translations.SLIDABLE_TOUCH_TITLE+"</h3>"+this.presentation.scope.translations.SLIDABLE_TOUCH+"</div>");var r='<div class="rowTextBlock"><h3>'+this.presentation.scope.translations.SOUND_NEW_UI+"</h3><h3>"+this.presentation.scope.translations.GAME_SOUNDS+"</h3>"+this.presentation.scope.translations.GAME_SOUNDS_DESCRIPTION_NEW_UI+"<br/><h3>"+this.presentation.scope.translations.BACKGROUND_SOUNDS+"</h3>"+this.getBackgroundSoundDescriptionText()+"</div>",o='<div class="rowTextBlock"><h3>'+this.presentation.scope.translations.GAMBLE_HEADER_NEW_UI+"</h3><h3>"+this.presentation.scope.translations.GAMBLE_FEATURE_HEADER+"</h3>"+this.presentation.scope.translations.GAMBLE_FEATURE_DESCRIPTION_NEW_UI+"</div>";return t+=i,this.presentation.scope.layout.has(sna.service.ENVIRONMENT_DESKTOP)?this.getHideSpaceBar()&&(t+="<br/>",t+=n):(t+="<br/>",t+=s),e&&(t+="<br/>",t+=e),(1==this.isVisibleinPokerStarsApp()&&this.presentation.scope.layout.has(sna.service.ENVIRONMENT_DESKTOP)||this.presentation.scope.layout.has(sna.service.ENVIRONMENT_MOBILE))&&(t+="<br/>",t+=r),this.gambleFeatureEnabled&&(t+="<br/>",t+=o),t+="</div>"}.bind(this),v=function(){var e="",e='<div class="rowBlock decor" style = "text-align: left;">',t='<div class="rowImageBlock" style = "top: auto;"><img src="'+this.currentURL+'assets/rules/bttn_AUTOSPIN_regular.png" /></div><div class="rowTextBlock"><h3>'+this.presentation.scope.translations.AUTO_SPIN_MENU_NEW_UI+"</h3></div>",i=this.presentation.scope.translations.STOP_ON_BONUS_DESCRIPTION&&this.presentation.scope.translations.STOP_ON_BONUS_DESCRIPTION.replace("{1}","7").replace("{}","7"),n='<div class="rowTextBlock"><h3>'+this.presentation.scope.translations.STOP_ON_BONUS_HEADER_NEW_UI+"</h3>"+i+"</div>",s='<div class="rowTextBlock"><h3>'+this.presentation.scope.translations.TURBO_SPIN_HEADER_NEW_UI+"</h3>"+this.presentation.scope.translations.TURBO_SPIN_DESCRIPTION_NEW_UI+"</div>",r='<div class="rowTextBlock"><h3>'+this.presentation.scope.translations.TOTAL_SPINS_NEW_UI+"</h3>"+this.presentation.scope.translations.TOTAL_SPINS_DESCRIPTIONS_NEW_UI+"</div>",o='<div class="rowTextBlock"><h3>'+this.presentation.scope.translations.UKGC_LOSS_LIMIT_HEADER+"</h3>"+this.presentation.scope.translations.UKGC_LOSS_LIMIT_DESCRIPTION_NEW_UI+"</div>",a='<div class="rowTextBlock"><h3>'+this.presentation.scope.translations.UKGC_SINGLE_WIN_LIMIT_HEADER+"</h3>"+this.presentation.scope.translations.UKGC_SINGLE_WIN_LIMIT_DESCRIPTION_NEW_UI+"</div>",i='<div class="rowTextBlock"><h3>'+this.presentation.scope.translations.TRIGGER_FEATURE_START+"</h3>"+this.presentation.scope.translations.START_AUTO_SPIN_NEW_UI+"</div>";return e+=t,this.showMenuButtonPS()||this.isUKGC()||this.getGameDoesntHaveFreeSpins()||(e+="<br/>",e+=n),this.getHideTurboSpin()&&(e+="<br/>",e+=s),e+="<br/>",e+=r,e+="<br/>",e+=o,e+="<br/>",e+=a,e+="<br/>",e+=i,e+="</div>"}.bind(this),y='<div class="rowBlock decor" style = "text-align: left;"><div class="rowImageBlock" style = "top: auto;"><img src="'+this.currentURL+'assets/rules/btn_paytable_active.png" /></div><div class="rowTextBlock" style = "font-weight: bold;">'+this.presentation.scope.translations.PAYTABLE+"</div></div>",b='<div class="rowBlock decor" style = "text-align: left;"><div class="rowImageBlock" style = "top: auto;"><img src="'+this.currentURL+'assets/rules/btn_rules_active.png" /></div><div class="rowTextBlock" style = "font-weight: bold;">'+this.presentation.scope.translations.GAME_RULES+"</div></div>",S='<div class="rowBlock decor" style = "text-align: left;"><div class="rowImageBlock" style = "top: auto;"><img src="'+this.currentURL+'assets/rules/icon_bank.png" /></div><div class="rowTextBlock"><h3>'+this.presentation.scope.translations.BANKING+"</h3>"+this.presentation.scope.translations.BANKING_SETTINGS_GO_TO_CASHIER_PAGE+"</div></div>",T='<div class="rowBlock decor" style = "text-align: left;"><div class="rowImageBlock" style = "top: auto;"><img src="'+this.currentURL+'assets/rules/icon_register.png" /></div><div class="rowTextBlock"><h3>'+this.presentation.scope.translations.REGISTER+"</h3>"+this.presentation.scope.translations.BANKING_SETTINGS_GO_TO_REGISTER_PAGE+"</div></div>",_='<div class="rowBlock decor" style = "text-align: left;"><div class="rowImageBlock" style = "top: auto;"><img src="'+this.currentURL+'assets/rules/bttn_home_active.png" /></div><div class="rowTextBlock"><h3>'+this.presentation.scope.translations.HOME_BUTTON_HEADER+"</h3>"+this.presentation.scope.translations.HOME_BUTTON_DESCRIPTION+"</div></div>",A='<div class="rowBlock decor" style = "text-align: left;"><div class="rowImageBlock"><img src="'+this.currentURL+'assets/rules/bttn_history_active.png" /></div><div class="rowTextBlock"><h3>'+this.presentation.scope.translations.GAME_HISTORY+"</h3></div></div>",a='<div class="rowBlock" style = "text-align: center;"><style>a#donwload-rules-button img:last-child {display: none;}a#donwload-rules-button:hover img:last-child {display: block;}a#donwload-rules-button:hover img:first-child {display: none;}</style><a id="donwload-rules-button" style="display: inline-block;  "text-align: center;" target="_blank" href="'+this.currentURL+"assets/"+this.getDownloadableGameRueles()+'"><img src="'+this.currentURL+'assets/rules/btn_download_normal.png" /><img src="'+this.currentURL+'assets/rules/btn_download_over.png" /></a></div>',l='<div class="rowBlock" style = "text-align: center;"><a id="donwload-rules-button" style="display: inline-block;  "text-align: center;" target="_blank" href="'+this.currentURL+"assets/"+this.getDownloadableGameRueles()+'"><img src="'+this.currentURL+'assets/rules/btn_download_over.png" /></a></div>';return e+=this.getTotalTitleRules(),this.gambleFeatureEnabled&&(e+=t),e+=i,this.fsButtonDisabled()||(e+=n),e+=r,this.getHideTurboSpin()&&(e+=o),e+=h,this.getHideAutoSpin()&&(e+=c),e+=p,e+=u,e+=d(),this.isVisibleSuperStake()&&(e+=m()),this.showQuattroButtonDesc()&&(e+=f),e+=g(),this.getHideAutoSpin()&&(e+=v()),e+=y,e+=b,this.shouldShowRegisterSettingsTab()&&(e+=S),this.shouldShowRegisterSettingsTab()&&(e+=T),this.getHideHomeButton()&&this.getHomeButtonVisible()&&(e+=_),this.scope.game.showHistoryButton&&(e+=A),this.presentation.scope.layout.has(sna.service.ENVIRONMENT_MOBILE)?this.shouldShowBtnDownload()&&(e+="<br/><br/><br/>",e+=l):(e+="<br/><br/>",e+=a),e=(e=(e=e.replace(/h1>/g,"h3>")).replace(/h2>/g,"h3>")).replace(/\r\n/g,"<br/>")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getBackgroundSoundDescriptionText=function(){var e=this.presentation.scope.translations.SOUND_SETTINGS_BACKGROUND_SOUNDS_SECTION_DESCRIPTION_OLD,t=this.presentation.scope.translations.SOUND_SETTINGS_BACKGROUND_SOUNDS_SECTION_DESCRIPTION;return e=t?t:e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getTotalTitleRules=function(){var e="",e='<div class="rowBlock decor" style = "text-align: left; font-weight: bold;">',t=this.getTitleRules(),i="<div>"+this.presentation.scope.translations.QUATTRO_MODE+"</div>",n=(function(){var e="<div>",t=this.presentation.scope.translations.DISCLAIMER_90_MINUTES_NEW+" <br/>";this.presentation.scope.translations.PAYLINES_SELECTED&&(t+=this.presentation.scope.translations.PAYLINES_SELECTED+"<br/>"),t+=this.presentation.scope.translations.PAYLINE_WINS_ADDED+" <br/>",this.presentation.scope.translations.PAYLINES_PAYOUTS_MULTI?t+=this.presentation.scope.translations.PAYLINES_PAYOUTS_MULTI:this.presentation.scope.translations.WIN_LINE_PAYOUTS_MULTIPLIED&&(t+=this.presentation.scope.translations.WIN_LINE_PAYOUTS_MULTIPLIED);return this.getGameDoesntHaveFreeSpins()?e+=t:(e+="",this.game.getParameterValue("freespinsCannotRetrigger")&&this.presentation.scope.translations.FREE_SPINS_CANNOT_RETRIGGER&&(e+="<br/>"+this.presentation.scope.translations.FREE_SPINS_CANNOT_RETRIGGER)),e+="</div>"}.bind(this),function(){var e="<div><h3>"+this.presentation.scope.translations.GAMBLE_FEATURE_HEADER+"</h3></br>",t=this.presentation.scope.translations.GAMBLE_FEATURE_DESCRIPTION_CARDS_NO_FREESPINS,i=this.presentation.scope.translations.GAMBLE_FEATURE_DESCRIPTION_CARDS_NEW,n=this.presentation.scope.translations[this.game.getParameterValue("gambleFeatureTranslationKey")],s=this.presentation.getById("gambleFeatureDialog");return s&&"coin"===s.scope.config.variant?e+=n:this.getGameDoesntHaveFreeSpins()?e+=t:e+=i,e+="</div>"}.bind(this));return e+=t,this.shouldShowQuattroModDesc()&&(e+="<br/><br/><br/>",e+=i),e+="<br/><br/><br/>",this.gambleFeatureEnabled&&(e+=n()),e+="</div>"},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.selectBetIcon=function(){this.scope.game.currency.code;var e=this.scope.game.currency.code;return-1==["EUR","USD","GBP"].indexOf(e)?"COIN_regular":e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processSpinStop=function(){var e=this.scope.config.iface.enableEarlyReelStop&&this.earlyReelStopEnabled&&this.earlyReelStopTriggered;return this.earlyReelStopEnabled=!1,this.earlyReelStopTriggered=!1,this.isPokerStars()&&this.stopAutoplayOnGameDisconnect(),e||this.scope.game.turboMode?this.fastStop(!0):(this.presentation.createAnimationTimeline("spinStopAsync",0,!1,!0),this.presentation.createAnimationTimeline("spinStop",0,!1,!0))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.stopAutoplayOnGameDisconnect=function(){var e=this.scope.lastResult,t=this.scope.previousResult,i=this.scope.game.autoplay;e&&t&&angular.equals(e,t)&&i&&i.active&&this.stopAutoplay()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getWinTickerConfig=function(e,t,i){var t=t||this.getTotalWin(),n=!this.game.inFreeSpins();i&&null!=i.shouldShowTicker&&(n=i.shouldShowTicker);n={img:null,winValue:t,lineWinValue:null,multiplier:null,showWinnerText:n=this.isUKGC()&&this.game.isWinLessThanBet()?!1:n};return i&&void 0!==i.duration&&(n.odometerDuration=i.duration,n.initialValue=i.initialValue||0),n},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getPaylineWinTickerConfig=function(e,t){try{var i=t&&t.currentWin||this.activeTotalWin,n=this.game.getParameterValue("tickerImagesFolder")||"assets/paytable/",s=this.scope.config.presentation.symbols[e.symbol].paytableImage,r=this.currentURL+n+s,o=e.win,a=e.winPositions.length;this.game.getParameterValue("overrideTickerWin")&&(o=e.amount*this.game.getCoinValue(),a=0,e.winPositions.forEach(function(e){"object"==typeof e&&a++}));var l=!this.game.inFreeSpins();t&&null!=t.shouldShowTicker&&(l=t.shouldShowTicker),this.isUKGC()&&this.game.isWinLessThanBet()&&(l=!1);var h={img:r,winValue:i,lineWinValue:o,multiplier:a,showWinnerText:l};return t&&void 0!==t.duration&&(h.odometerDuration=t.duration),h}catch(e){return{}}},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.buyBonusAdditionalConditions=function(){return!1},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onWrapperButtonsStateChange=function(e){this.updateBuyFeatureButtonState(e),this.updateCanvasButtonsStates(e)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateBuyFeatureButtonState=function(e){var t,i=this.presentation.getById("buyFeatureButton"),n=this.scope.game.freeRounds;i&&((t=this.game.getParameterValue("syncBuyFeatureButtonWith"))?(t=this.buttonsInfo[t])&&(!this.game.canAffordBuyBonus()||n.active||this.superWheelActive?i.disable():(t.enabled?i.enable():i.disable(),this.presentation.main.environment.is(sna.service.ENVIRONMENT_MOBILE)&&(t.visible?i.show():i.hide()))):"IDLE"===e&&this.setBuyFeatureState())},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateCanvasButtonsStates=function(e){var t=this.game.getParameterValue("syncCanvasButtonsWithWrapperButtons");t&&t.forEach(function(e){this.updateCanvasButton(e)},this)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateCanvasButton=function(e){e=this.presentation.getById(e);e&&this.buttonsInfo&&this.buttonsInfo.BUTTON_BET_SETTINGS&&(this.buttonsInfo.BUTTON_BET_SETTINGS.enabled?e.enable():e.disable())},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getWinDisplayData=function(e){if(!this.scope.game.showWinProbabilityDisplay)return null;switch(e){case"rtp":return this.getRTP()+"%";case"maxWin":return this.getMaxWinValueCash();case"maxWinProbability":return this.getMaxWinProbability();default:return null}},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.cheatsEnabled=function(){return sna.debug.enableCheats},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onHandleCloseFeature=function(){},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onReplayInit=function(){this.showEmptyReplayRoundDialog()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getActiveMultiplier=function(){return 1},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setSpinInProgress=function(e){this.spinInProgress=e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getSpinInProgress=function(){return this.spinInProgress},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateSettingsBackground=function(e){this.processWrapperSettingsTabStatusChanged(e)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setButtonsState=function(e,t){e&&e.constructor===Array&&e.forEach(function(e){e=this.presentation.getById(e);e&&(t?e.enable():e.disable())},this)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.beforeFeatureStartSlotInterface=sna.service.tripleBellsProvider.TripleBellsInterface.prototype.beforeFeatureStart,sna.service.tripleBellsProvider.TripleBellsInterface.prototype.beforeFeatureStart=function(e){var t=(t=this.q.when(!0)).then(this.beforeFeatureStartSlotInterface.bind(this,e));return t=(t=!this.hasActiveFeaturePicker()?t.then(this.processFeaturePicker.bind(this,e)):t).then(this.disableFastSpinOnFeatureStart.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.pickerDialogOutCondition=function(e,t){return e.retrigger||e.start&&(!t.destroyOn||"beforeStart"===t.destroyOn)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.disableFastSpinOnFeatureStart=function(e){return this.scope.game.turboMode&&this.processWrapperButtonClickEvent({name:"BUTTON_FAST_SPIN"},"ON_BUTTON_CLICK"),this.q.when(!0)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processFeaturePicker=function(e){var t,i=this.q.when(!0),n=this.getFeaturePickerConfig(e);return n&&(i=(i=(this.pickerConfig=n).gameMode?i.then(this.presentation.loadGameModePresentation.bind(this.presentation,n.gameMode)):i).then(this.beforeFeaturePickerStarts.bind(this,n)),(t=n.animations)&&(i=(i=(i=t.in?i.then(this.presentation.createAnimationTimeline.bind(this.presentation,t.in,0,!1,!0,null)):i).then(this.waitForFeaturePickerToComplete.bind(this))).then(this.processFeaturePickerResult.bind(this,e)),this.pickerDialogOutCondition(e,n)&&t.out&&(i=i.then(this.presentation.createAnimationTimeline.bind(this.presentation,t.out,0,!1,!0,null)))),!n.gameMode||n.destroyOn&&"beforeStart"!==n.destroyOn||(i=i.then(this.presentation.destroyGameModePresentation.bind(this.presentation,n.gameMode)))),i},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.beforeFeaturePickerStarts=function(e){e.hideUI&&this.setWrapperVisibility(!1)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processFeaturePickerResult=function(e,t){angular.merge(e,t.outcome.features.freespins)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getFeaturePickerConfig=function(e){var t=this.scope.config.slotFeatures;if(t&&t[e.name]){e=t[e.name];if(e)return e.picker}return null},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.waitForFeaturePickerToComplete=function(){var e,t;return this.featurePickerDeferred=this.q.defer(),sna.service.tripleBellsProvider.playModes.REPLAY===this.scope.game.playMode?(e=this.communication.getFreeSpinsPickerOption(),t=Array.isArray(e)?e[e.length-1]:this.scope.config.slotFeatures.fs.picker.buttons.indexOf(e),e=this.scope.config.slotFeatures.fs.picker.buttons[t],e=this.presentation.getById(e),this.selectFeaturePicker(e,t)):(t=this.pickerConfig)&&t.buttons&&t.buttons.forEach(function(e){e=this.presentation.getById(e);e&&e.enable()},this),this.featurePickerDeferred.promise},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.selectFeaturePicker=function(t,e){this.optionPicked=e;var i=this.pickerConfig;i&&i.buttons&&((n=angular.copy(i.buttons)).filter(function(e){return e!==t.scope.config.id},this),this.setButtonsState(n,!1)),t.disableNormal();var n=this.q.when(!0);return n=(n=n.then(this.communication.selectFreeSpinsOption.bind(this.communication,e))).then(this.processSelectFreeSpinsOptionResponse.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processSelectFreeSpinsOptionResponse=function(e){this.featurePickerDeferred.resolve(e)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isMaxWinReached=function(){return"MAX_WIN_REACHED"===this.scope.game.simpleMessageCode},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getElementsByTag=function(e,t){var i=[];return this.getElements(i,e,t),i},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getElements=function(e,t,i){for(var n=0;n<t.children.length;n++){var s=t.children[n],r=s;(r=s.scope&&s.scope.config?s.scope.config:r)&&r.tag==i?e.push(s):s.children&&s.children.length&&((s=this.getElements(e,s,i))&&e.push(s))}},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.showGameInCoins=function(e){this.betInCoins=e,this.balanceInCoins=e,this.totalBetInCoins=e,this.fsTotalWinInCoins=e,this.footerBalanceInCoins=e,this.footerWinInCoins=e,this.footerBetInCoins=e,this.isSimpleBet=!e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isFunMode=function(){return this.scope.game.playMode===sna.service.tripleBellsProvider.playModes.FUN},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isRealMode=function(){return!this.isFunMode()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.shouldRunSymbolWinAnimation=function(){return!this.game.isWinLessThanBet()||!this.isUKGC()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onWrapperGameMessageUpdate=function(e,t,i){},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onWrapperFreeSpinsTotalWinUpdate=function(){},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.hideWrapperOnFeatureRestore=function(){this.scope.game.feature.left&&this.processWrapperVisibilityOnFeatureEvent(!1)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getwonAmount=function(e){if(!e.jackpot)return null;var t=e.jackpot.wonAmount,e=angular.copy(this.scope.game.currency);return sna.service.util.formatCurrency(t,e)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getMiniJackpotMaxValue=function(){var e=this.scope.game.jackpot;return e&&e.isGrandJackpotActive?e.miniJackpotMaximumAmount:5e3},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isGrandJackpot=function(){return this.scope.game.jackpot&&this.scope.game.jackpot.isGrandJackpotActive},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.showJackpot=function(){return!(!this.communication.grandJackpotService||!this.communication.grandJackpotService.grandJackpotData||1!=this.communication.grandJackpotService.grandJackpotData.enabled)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.showMysteryJackpot=function(){return!(!this.scope.game.jackpot||!this.scope.game.jackpot.currentValue||this.isGrandJackpot())},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getGrandJackpotBaseGameXOffset=function(){var e=this.presentation.globalScale,t=this.presentation.scope.layout.has(sna.service.ENVIRONMENT_LANDSCAPE),i=this.presentation.scope.layout.has(sna.service.ENVIRONMENT_PORTRAIT),n=this.presentation.scope.layout.has(sna.service.ENVIRONMENT_MOBILE),s=0;return(s=this.wrapperAdditionSectionVisible?n&&i?0:n&&t?350:300:s)*e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getGrandJackpotBaseGameYOffset=function(){var e=this.presentation.scope.layout.has(sna.service.ENVIRONMENT_PORTRAIT),t=this.presentation.scope.layout.has(sna.service.ENVIRONMENT_MOBILE),i=this.presentation.getById("baseGameWrapper");if(!i)return 0;var n=0,s="y.t.",r=0,o=this.getAspectRatio();return t&&e&&(this.wrapperAdditionSectionVisible&&(r=.9<o?150:.75<o?250:500),n=this.presentation.parseGlobalCoordinate(i,(s+=o<.5625?960+r:880+r).split("."))),n},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getGrandJackpotBaseGameScale=function(){var e=this.presentation.scope.layout.has(sna.service.ENVIRONMENT_PORTRAIT),t=this.presentation.scope.layout.has(sna.service.ENVIRONMENT_MOBILE),i=1;return i=this.wrapperAdditionSectionVisible?t&&e?1:.82:i},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getCurrency=function(){return this.scope.game.currency.name},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getCurrencySignPosition=function(){var e=angular.copy(this.scope.game.currency);return e.sign_after=0,e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getFooterCopyrightText=function(){var e=(new Date).getFullYear()+", ",t=this.getGameName(),i=this.game.getParameterValue("hideFooterTradeMarkSign")?"":"",n=this.game.getParameterValue("showExtraCopyrightText");return(n?this.presentation.scope.translations[n]:"")+" Copyright  "+e+t+i+" Stakelogic. All rights reserved."},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getWrapperFreeSpinsInitialWinValue=function(e){if(this.game.getParameterValue("hideTotalWinFreeSpinValue"))return null;var t=this.scope.game.feature||{},e=(e?t.prevTotalWin:this.game.getFsTotalWinInCash())||0;return t&&t.start&&(e=this.scope.game.totalWin),this.buyFeatureActivated&&(e=0),parseFloat(e).toFixed(this.scope.game.currency.decimals)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processWrapperVisibilityFeatureStart=function(){return this.processWrapperVisibilityOnFeatureEvent(!1)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getWrapperFreeSpinsValue=function(e){return this.game.getParameterValue("hideFooterFreeSpinsValue")?null:this.getFsCounter()+this.getFsCounterTotal(e)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getWrapperBet=function(){return sna.service.tripleBellsProvider.playModes.REPLAY!=this.scope.game.playMode?this.game.getTotalBetInCash()/this.getWrapperTotalBetMultiplier():this.game.getTotalBetInCash()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getBetsInCoins=function(){return this.getBets().map(function(e){return e.value})},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getPossibleCoinNumbers=function(){for(var e=[],t=this.game.getActiveGameType().superbet?2:1,i=0;i<this.getBets().length;i++)e.push(this.getBets()[i].value*t);return e},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onPlusBetButtonPressed=function(){var e=(e=this.q.when(!0)).then(this.checkForResetBetDialog.bind(this));return e=this.game.getParameterValue("neki_parametar")?(e=(e=(e=(e=(e=this.game.getParameterValue("betPlusMinusChangesCoinNumber")?e.then(this.increaseNumberOfCoins.bind(this)):e.then(this.increaseDenomValue.bind(this))).then(this.stopWinIndividualAnimation.bind(this))).then(this.updateWrapperPaytable.bind(this))).then(this.updateWrapperBetValue.bind(this))).then(this.autoUpdatePresentation.bind(this))).then(this.setBuyFeatureState.bind(this)):e.then(this.setBet.bind(this,null,null,"next"))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.increaseNumberOfCoins=function(){var e=this.getPossibleCoinNumbers(),t=this.game.getActiveGameType().superbet?2:1,i=e.indexOf(this.game.getGameBet());if(-1===i)throw new Error("Invalid coinNumber index in increaseNumberOfCoins method");i=e[Math.min(e.length-1,i+1)];return this.setCoinValue(null,i/t)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.increaseDenomValue=function(){var e=this.scope.game.coinValues.map(function(e){return Number(e)}),t=Number(this.scope.game.coinValue),t=e.indexOf(t);if(-1===t)throw new Error("Invalid denom index in increaseDenomValue method");t=e[Math.min(e.length-1,t+1)];return this.setDenomValue(null,t)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onMinusBetButtonPressed=function(){var e=(e=this.q.when(!0)).then(this.checkForResetBetDialog.bind(this));return e=this.game.getParameterValue("neki_parametar")?(e=(e=(e=(e=(e=this.game.getParameterValue("betPlusMinusChangesCoinNumber")?e.then(this.decreaseNumberOfCoins.bind(this)):e.then(this.decreaseDenomValue.bind(this))).then(this.stopWinIndividualAnimation.bind(this))).then(this.updateWrapperPaytable.bind(this))).then(this.updateWrapperBetValue.bind(this))).then(this.autoUpdatePresentation.bind(this))).then(this.setBuyFeatureState.bind(this)):e.then(this.setBet.bind(this,null,null,"prev"))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.decreaseNumberOfCoins=function(){var e=this.getPossibleCoinNumbers(),t=this.game.getActiveGameType().superbet?2:1,i=e.indexOf(this.game.getGameBet());if(-1===i)throw new Error("Invalid coinNumber index in decreaseNumberOfCoins method");i=e[Math.max(0,i-1)];return this.setCoinValue(null,i/t)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.decreaseDenomValue=function(){var e=this.scope.game.coinValues.map(function(e){return Number(e)}),t=Number(this.scope.game.coinValue),t=e.indexOf(t);if(-1===t)throw new Error("Invalid denom index in decreaseDenomValue method");t=e[Math.max(0,t-1)];return this.setDenomValue(null,t)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isMaxBet=function(){return this.game.getParameterValue("neki_parametar")?this.game.getParameterValue("betPlusMinusChangesCoinNumber")?this.isHighestCoinNumber():this.isHighestCoinValue():this.getTotalBets().indexOf(this.getTotalBet())===this.getTotalBets().length-1},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isHighestCoinNumber=function(){var e=this.getPossibleCoinNumbers();return Number(this.game.getGameBet())===e[e.length-1]},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isHighestCoinValue=function(){var e=this.scope.game.coinValues.map(function(e){return Number(e)});return Number(this.scope.game.coinValue)===e[e.length-1]},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isMinBet=function(){return this.game.getParameterValue("neki_parametar")?this.game.getParameterValue("betPlusMinusChangesCoinNumber")?this.isLowestCoinNumber():this.isLowestCoinValue():0===this.getTotalBets().indexOf(this.getTotalBet())},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isLowestCoinNumber=function(){var e=this.getPossibleCoinNumbers();return Number(this.game.getGameBet())===e[0]},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.isLowestCoinValue=function(){var e=this.scope.game.coinValues.map(function(e){return Number(e)});return Number(this.scope.game.coinValue)===e[0]},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.checkForResetBetDialog=function(e){var t=this.q.when(!0);return t=this.shouldShowResetBetDialog(e)?(t=t.then(this.showResetBetDialog.bind(this))).then(this.waitForResetBetDecision.bind(this)):t},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.pressMaxBetButton=function(){this.presentation.getById("maxBetButton").release()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onMaxBetButtonPressed=function(){var e=this.q.when(!0);return e=(e=e.then(this.checkForResetBetDialog.bind(this))).then(this.pressMaxBetButton.bind(this))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onBetOptionsButtonPressed=function(e){var t,i,n=this.q.when(!0);return n=n.then(this.checkForResetBetDialog.bind(this,e)),n=this.game.getParameterValue("neki_parametar")?(n=(n=(n=(n=(n=(n=this.game.getParameterValue("betPlusMinusChangesCoinNumber")?(i=this.getSelectedBetIndexFromAllBetsArray(e),t=this.getPossibleCoinNumbers()[i],i=this.game.getActiveGameType().superbet?2:1,n.then(this.setCoinValue.bind(this,null,t/i))):n.then(this.setDenomValueByCoinValueIndex.bind(this,this.getSelectedBetIndexFromAllBetsArray(e)))).then(this.stopWinIndividualAnimation.bind(this))).then(this.updateWrapperPaytable.bind(this))).then(this.updateWrapperBetValue.bind(this))).then(this.updateWrapperBetButtons.bind(this))).then(this.autoUpdatePresentation.bind(this))).then(this.setBuyFeatureState.bind(this)):n.then(this.setBet.bind(this,null,null,e))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processSpinButtonOnFeatureClosed=function(){return this.restoreSpinInterface()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateWrapperOnFeatureClosed=function(){var e=!this.scope.game.disableSpaceBar&&this.presentation.getById(this.getToggleSpacebarSpinOtherId()).toggleState;this.updateWrapperModel({elements:{BUTTON_SPIN:{enabled:!0,visible:!0},BUTTON_SPIN_STOP:{enabled:!1,visible:!1}},general:{isSpacebarSpin:e,isSuperstakeEnabled:this.scope.game.ssActive}})},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.updateFreeRoundsTotalWinOnRestore=function(e){var t,i,n=this.scope.game.freeRounds;this.scope.lastResult&&this.scope.lastResult.game&&(t=this.scope.lastResult.game.currentWallet&&this.scope.lastResult.game.currentWallet.freeRounds,i=this.scope.lastResult.game.walletAfterLastBet&&this.scope.lastResult.game.walletAfterLastBet.freeRounds,!t&&i&&this.game.gameStateRestored()&&(this.scope.game.feature&&this.scope.game.feature.active&&this.scope.game.feature.end?n.totalWin+=+this.scope.game.feature.totalWin.toFixed(2):(n.totalWin+=+this.scope.game.totalWin.toFixed(2),n.totalCoinsWin+=+this.scope.game.totalCoinsWin.toFixed(2))))},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getWrapperInitialFreeSpinsValue=function(){return this.getWrapperFreeSpinsValue()},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.toggleTwinGame=function(){this.setTwinGameActive(!this.twinGameActive,!0);var i=null;angular.forEach(this.scope.game.gameTypes,function(e,t){this.twinGameActive?!0===e.isTwin&&null===i&&(i=t):!1===e.isTwin&&null===i&&(i=t)},this),this.setGameTypeTripleBellsInterface(null,i)},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.setTwinGameActive=function(e,t){this.twinGameActive=e,this.updateWrapperModel({general:{isTwinGameActive:e}}),t&&(this.game.setGameSettingsProperty("play_twin",e),this.isGameSettingsChanged=!0,this.updateGameSettings())},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getGameVersionInfo=function(){return"version "+this.game.getParameterValue("version")+(sna.debug.showBuildVersion?" / build version: "+this.game.getParameterValue("buildVersion"):"")},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getBuyBonusOptions=function(){return null},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getBuyFeatureBubbleText=function(){return null},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getLogoImageUrl=function(){return null},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getBuyFeatureBubbleText=function(){return null},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.changeWrapperTranslations=function(){return null};sna.service.tripleBellsProvider.TripleBellsInterface.prototype.getBuyBonusBetMultiplier=function(){var e=this.game.getParameterValue("buyBonusBetMultiplier");return e||null},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.onBuyBonusButtonClicked=function(){this.game.getParameterValue("isBuyBonusOnCanvas")?this.processBuyBonusCanvasDialog():this.updateWrapperModel({general:{currentLayout:"layout_Menu_Buy_Bonus"}})},sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processBuyBonusCanvasDialog=function(){return this.openBuyFeature()},sna.service.tripleBellsProvider.TripleBellsInterfaceProvider=function(){sna.service.slot.SlotInterfaceProvider.call(this)},sna.service.tripleBellsProvider.TripleBellsInterfaceProvider.prototype=new sna.service.slot.SlotInterfaceProvider,sna.service.tripleBellsProvider.TripleBellsInterfaceProvider.prototype._create=function(){return new sna.service.tripleBellsProvider.TripleBellsInterface},sna.module.tripleBellsProvider.provider(sna.service.tripleBellsProvider.TRIPLE_BELLS_INTERFACE,sna.service.tripleBellsProvider.TripleBellsInterfaceProvider);var GcwGameClient=GcwGameClient||!1;function triggerGameWrapperModelUpdate(e){GcwGameClient.triggerEvent("UPDATE_MODEL",e)}function decorateInterfacePrototype(e){e.hasWrapperUI=!0,e.buttonsInfo=[],e.initClock=function(){this.updateClock(),setInterval(this.updateClock.bind(this),1e3)},e.updateClock=function(){var e=new Date;this.currentDate&&this.currentDate.getMinutes()==e.getMinutes()||(this.updateWrapperModel({general:{clock:sna.presentation.Text.prototype.getDateAsText(e,!0)}}),this.currentDate=e)},e.handleCloseFeature=function(e,t){this.scope.game.mode(sna.model.slot.MODE_FEATURE_CLOSE);var i=t,t=this.scope.lastResult;angular.forEach(t.outcome.features,function(e){e.name===i&&0},this);var n=this.scope.config.slotFeatures[i];return this.fsClosePromise=this.presentation.createAnimationTimeline(i+"Close",0,!1,!0),this.q.when(!0).then(function(){if(this.game.getParameterValue("waitForCloseAnimationToComplete"))return this.fsClosePromise}.bind(this)).then(function(){this.onHandleCloseFeature(),this.processWrapperVisibilityOnFeatureEvent(!0),"close"===n.destroyOn&&(this.presentation.destroyGameModePresentation(i),this.scope.game.feature=null),"closed"===n.destroyOn&&(this.fsClosePromise.then(this.presentation.destroyGameModePresentation.bind(this.presentation,i)),this.scope.game.feature=null),this.scope.game.autoplay.disabled=!1,this.processSpinButtonOnFeatureClosed();try{this.autoCollectWins&&(this.game.getParameterValue("useDelayedFreeSpinsCollect")||this.collectGambleFeature())}catch(e){}}.bind(this))},e.beforeFeatureClosedWrapped=e.beforeFeatureClosed,e.beforeFeatureClosed=function(){return this.beforeFeatureClosedWrapped().then(this.updateWrapperOnFeatureClosed.bind(this))},e.collectGambleFeatureWrapped=e.collectGambleFeature,e.collectGambleFeature=function(){this.collectGambleFeatureWrapped(),this.activeTotalWin=this.getGambleWinInCoins()*this.game.getCoinValue(),this.isDialogOpened=!1},e.showGambleFeatureWrapped=e.showGambleFeature,e.showGambleFeature=function(){var e=this.scope.layout.has(sna.service.ENVIRONMENT_MOBILE);return this.updateWrapperModel({elements:{BUTTON_FAST_SPIN:{enabled:!1,visible:!e&&this.getHideTurboSpin()},BUTTON_SPIN:{enabled:!e&&!this.autoPlayGamble,visible:!e},BUTTON_SPIN_STOP:{enabled:!1,visible:!1}}}),this.updateWrapperGameMessage("EMPTY"),this.scope.game.restoreData&&this.scope.game.restoreData.gambleOutcome&&this.scope.game.restoreData.gambleOutcome.isRestore&&e&&this.disableInterface(),this.showGambleFeatureWrapped()},e.playGambleFeatureWinAnimationsWrapped=e.playGambleFeatureWinAnimations,e.playGambleFeatureWinAnimations=function(){return this.playGambleFeatureWinAnimationsWrapped().then(this.updateWrapperModel.bind(this,{elements:{BUTTON_SPIN:{visible:!this.spinButton||this.spinButton.visible,enabled:!0},BUTTON_COLLECT:{visible:!0,enabled:!this.isReplay()},BUTTON_GAMBLE:{visible:!0,enabled:!1}}}))},e.playGambleFeatureWrapped=e.playGambleFeature,e.playGambleFeature=function(e,t){return this.updateWrapperModel({elements:{BUTTON_SPIN:{visible:!this.spinButton||this.spinButton.visible,enabled:!1},BUTTON_COLLECT:{visible:!0,enabled:!1},BUTTON_GAMBLE:{visible:!0,enabled:!1}}}),this.playGambleFeatureWrapped(e,t)},e.endGambleFeatureWrapped=e.endGambleFeature,e.endGambleFeature=function(){return this.hideWrapperGambleButtons(),this.scope.game.totalWin&&!this.spinInProgress?(this.activeTotalWin=this.getGambleWinInCoins()*this.game.getCoinValue(),this.updateWrapperGameMessage("WIN",this.scope.game.totalWin)):this.spinInProgress?this.updateWrapperGameMessage("GOOD_LUCK"):this.updateWrapperGameMessage("IDLE"),this.endGambleFeatureWrapped()},e.initGambleFeatureRestoreWrapped=e.initGambleFeatureRestore,e.initGambleFeatureRestore=function(e){return this.updateWrapperButtonsState("LOCKED"),this.initGambleFeatureRestoreWrapped(e)},e.processBeforeSpinStopWrapped=e.processBeforeSpinStop,e.processBeforeSpinStop=function(){return this.scope.game.freeRounds&&this.scope.game.freeRounds.active&&this.updateWrapperModel({general:{freeroundsValue:this.scope.game.freeRounds.left}}),this.processBeforeSpinStopWrapped()},e.processAfterSpinStopWrapped=e.processAfterSpinStop,e.processAfterSpinStop=function(){return this.processAfterSpinStopWrapped().then(this.updateFsCounterAfterSpinStop.bind(this)).then(function(){this.afterSpinStopTickerCondition()&&this.updateWrapperGameMessage("IDLE")}.bind(this))},e.startGameWrapped=e.startGame,e.startGame=function(){return this.updateWrapperGameMessage("PRESS_SPIN"),this.startGameWrapped()},e.playAfterFeatureStartAnimationWrapped=e.playAfterFeatureStartAnimation,e.playAfterFeatureStartAnimation=function(e){var t=this.scope.game.restoreData&&this.scope.game.restoreData.previousOutcome,i=this.scope.game.feature&&1==this.scope.game.feature.end?"DISABLED":"FREE_SPINS";return this.playAfterFeatureStartAnimationWrapped(e).then(this.updateWrapperButtonsState.bind(this,i)).then(this.updateWrapperGameLayout.bind(this,"FREE_SPINS",t)).then(this.processWrapperVisibilityOnFeatureEvent.bind(this,!0))},e.restoreFeatureWrapped=e.restoreFeature,e.restoreFeature=function(e){this.scope.game.feature=e;var t=this.scope.game.feature&&1==this.scope.game.feature.end;return this.updateWrapperGameLayout("FREE_SPINS",!0),this.updateWrapperButtonsState(t?"DISABLED":"FREE_SPINS"),this.hideWrapperOnFeatureRestore(),this.restoreFeatureWrapped(e)},e.processWrapperVisibilityOnFeatureEvent=function(e){this.game.getParameterValue("wrapperVisibleDuringFeature")||this.setWrapperVisibility(e),this.processAdditionSectionOnFeatureEvent(e)},e.processAdditionSectionOnFeatureEvent=function(e){if(e){if(this.toggleBackAdditionSection)return this.toggleBackAdditionSection=!1,this.updateWrapperAdditionSection(!0),this.toggleAdditionSection()}else if(this.wrapperAdditionSectionVisible)return this.toggleBackAdditionSection=!0,this.updateWrapperAdditionSection(!1),this.toggleAdditionSection()},e.handleSuperStakeDecisionWrapped=e.handleSuperStakeDecision,e.handleSuperStakeDecision=function(e){return"true"==e[0]&&this.updateWrapperButtonsState("IDLE"),this.handleSuperStakeDecisionWrapped(e)},e.activateSuperStakeWrapped=e.activateSuperStake,e.activateSuperStake=function(e,t,i){var n=this.scope.game.freeRounds&&this.scope.game.freeRounds.active;this.updateWrapperGameMessage("SUPERSTAKE");this.spinButton;this.updateWrapperButtonsState("LOCKED");var s=this.q.when(!0);return s=(s=s.then(this.stopWinIndividualAnimation.bind(this))).then(this.activateSuperStakeWrapped.bind(this,e,t,i)),s=!(i||this.isReplay()||n)?s.then(this.updateWrapperButtonsState.bind(this,"IDLE")):s},e.closeBuyFeatureWrapped=e.closeBuyFeature,e.closeBuyFeature=function(e){return this.closeBuyFeatureWrapped(e)},e.onBuyFeatureOpenWrapped=e.onBuyFeatureOpen,e.onBuyFeatureOpen=function(e){return this.updateWrapperButtonsState("LOCKED"),this.onBuyFeatureOpenWrapped(e)},e.deactivateSuperStakeWrapped=e.deactivateSuperStake,e.deactivateSuperStake=function(e,t){var i=this.scope.game.freeRounds&&this.scope.game.freeRounds.active;this.updateWrapperGameMessage("IDLE"),this.updateWrapperButtonsState("LOCKED"),this.stopWinIndividualAnimation();var n=(n=this.q.when(!0)).then(this.deactivateSuperStakeWrapped.bind(this,e,t));return n=!i?n.then(this.updateWrapperButtonsState.bind(this,"IDLE")):n},e.playWinFullAnimationWrapped=e.playWinFullAnimation,e.playWinFullAnimation=function(){var e;return this.game.getParameterValue("dontChangeCurrentSpinBtnState")||(this.scope.game.feature&&this.scope.game.feature.start?this.updateWrapperModel({elements:{BUTTON_SPIN:{enabled:!1,visible:!0},BUTTON_SPIN_STOP:{enabled:!1,visible:!1}}}):this.game.inFreeSpins()||(e=this.scope.layout.has(sna.service.ENVIRONMENT_MOBILE),this.updateWrapperModel({elements:{BUTTON_SPIN:{enabled:!this.isInReplay(),visible:!e},BUTTON_SPIN_STOP:{enabled:!1,visible:!1}}}))),this.playWinFullAnimationWrapped()},e.startFeatureWrapped=e.startFeature,e.startFeature=function(e,t,i){this.game.getParameterValue("hideTickerOnFsDialogs")&&this.updateWrapperGameMessage("EMPTY"),this.game.getParameterValue("disableTurboModeOnFeatureStart")&&this.scope.game.turboMode&&(this.presentation.getById("toggleFastSpinSettingsButton").release(),this.updateWrapperFastSpin()),this.multiplier=e.multiplier,this.useSpacebarSpinValueHolder=this.useSpacebar;var n=this.q.when(!0);return n=(n=n.then(this.processWrapperVisibilityFeatureStart.bind(this))).then(this.startFeatureWrapped.bind(this,e,t,i))},e.finishFeatureWrapped=e.finishFeature,e.finishFeature=function(e,t,i){e&&(this.scope.game.totalWin=e.totalWin,this.winNotCollected=0<e.grandTotal),this.setUseSpacebarSpin(!1);var n=this.q.when(!0);return n=(n=(n=(n=n.then(this.createTimerPromise.bind(this,1))).then(this.processWrapperVisibilityOnFeatureEvent.bind(this,!1))).then(this.finishFeatureWrapped.bind(this,e,t,i))).then(function(){var e=this.scope.game.freeRounds;e&&e.active&&this.updateWrapperModel({general:{totalWinFreeRoundsValue:e.totalWin.toFixed(2)}})}.bind(this))},e.afterWinPresentationMegawaysWrapped=e.afterWinPresentation,e.afterWinPresentation=function(){var e=this.q.when(!0);return e=(e=e.then(this.updateWrapperAfterWin.bind(this))).then(this.afterWinPresentationMegawaysWrapped.bind(this))},e.processGambleFeatureResponseWrapped=e.processGambleFeatureResponse,e.processGambleFeatureResponse=function(e){return this.processGambleFeatureResponseWrapped(e).then(function(e){var t=this.scope.game.freeRounds;return!t||!(t.active||this.isReplay()&&!t.active&&0<t.total)||t.end&&this.isDialogOpened||this.updateWrapperModel({general:{totalWinFreeRoundsValue:t.totalWin.toFixed(2)}}),e}.bind(this))},e.processGambleFeatureWrapper=e.processGambleFeature,e.processGambleFeature=function(){return this.q.when(!0).then(this.processGambleFeatureWrapper.bind(this))},e.earlyEnableSpinInterface=function(e){var t,i,n;this.isSpinToWinActive()||(i=(t=this.scope.game).autoplay,(n=t.feature)||t.miniFeature||i.active?n?this.isFeatureSpinAuto()?this.updateWrapperModel({elements:{BUTTON_SPIN:{enabled:!1,visible:!1},BUTTON_SPIN_STOP:{enabled:!1,visible:!1}}}):this.updateWrapperModel({elements:{BUTTON_SPIN:{enabled:!1,visible:!1},BUTTON_SPIN_STOP:{enabled:!1,visible:!this.game.getParameterValue("stopButtonHiddenOnManualFeatureSpin")&&!this.touchAnywhereEnabled}}}):(n=this.presentation.scope.layout.has(sna.service.ENVIRONMENT_MOBILE),this.updateWrapperModel({elements:{BUTTON_SPIN:{enabled:!1,visible:!n&&this.getDisabledSlamStop()},BUTTON_SPIN_STOP:{enabled:!1,visible:!n&&!this.getDisabledSlamStop()}}})):(e&&this.fastStop(!1),this.presentation.scope.layout.has(sna.service.ENVIRONMENT_MOBILE)||this.restoreSpinInterface()))},e.restoreSpinInterfaceWrapped=e.restoreSpinInterface,e.restoreSpinInterface=function(){this.restoreSpinInterfaceWrapped(),this.restoreWrapperSpinInterface()},e.restoreWrapperSpinInterface||(e.restoreWrapperSpinInterface=function(e){this.scope.config;var t=this.scope.game,i=t.autoplay;t.feature||i.left?this.updateWrapperModel({elements:{BUTTON_SPIN:{enabled:!1,visible:!1},BUTTON_SPIN_STOP:{enabled:!1,visible:!0}}}):this.updateWrapperModel({elements:{BUTTON_SPIN:{enabled:!0,visible:!0},BUTTON_SPIN_STOP:{enabled:!1,visible:!1}}})}),e.startAutoplayWrapped=e.startAutoplay,e.startAutoplay=function(e){this.startAutoplayWrapped(e),this.updateWrapperModel({general:{isAutoplayEnabled:!0,autospinsLeft:this.getAutospinsLeft(),currentLayout:"layout_UI"},elements:{BUTTON_AUTOPLAY_STOP:{visible:!0,enabled:!0},BUTTON_AUTO_SPIN:{visible:!1,enabled:!1}}})},e.stopAutoplayWrapped=e.stopAutoplay,e.stopAutoplay=function(e){this.stopAutoplayWrapped(e),this.updateWrapperModel({general:{isAutoplayEnabled:!1,autospinsLeft:this.getAutospinsLeft(),currentLayout:"layout_UI"},elements:{BUTTON_AUTOPLAY_STOP:{visible:!1,enabled:!1},BUTTON_AUTO_SPIN:{visible:!0,enabled:!1}}})},e.handleUserGambleConfirmationWrapped=e.handleUserGambleConfirmation,e.handleUserGambleConfirmation=function(e,t){this.handleUserGambleConfirmationWrapped(e,t),this.updateWrapperGamble()},e.toggleGambleWrapped=e.toggleGamble,e.toggleGamble=function(e){this.toggleGambleWrapped(e),this.updateWrapperGamble()},e.onOutcomeSetWrapped=e.onOutcomeSet,e.onOutcomeSet=function(){this.onOutcomeSetWrapped(),this.scope.game.autoplay.active&&this.updateWrapperModel({general:{autospinsLeft:this.getAutospinsLeft()}}),this.updateFsCounterOnOutcome()&&this.updateWrapperFreeSpinsCounter()},e.getAutospinsLeft=function(){var e=this.scope.game.autoplay.left||"";return e=e==1/0?"":e},e.maxBetToggleWrappedInterface=e.maxBetToggle,e.maxBetToggle=function(e){return this.q.when(!0).then(this.maxBetToggleWrappedInterface.bind(this,e)).then(this.updateWrapperBetValue.bind(this)).then(this.updateWrapperBetButtons.bind(this)).then(this.updateWrapperPaytable.bind(this)).then(this.updateWrapperGameMessage.bind(this,"IDLE"))},e.updateBalancePresentationWrappedIntreface=e.updateBalancePresentation,e.updateBalancePresentation=function(e,t){GcwGameClient&&this.fsButtonDisabled()&&!t||(this.updateBalancePresentationWrappedIntreface(e,t),!this.scope.game||!this.scope.game.freeRounds||this.scope.game.freeRounds.active||this.scope.game.feature&&!this.scope.game.feature.start||this.updateWrapperBalanceValue())},e.setInitialUIStatesWrappedInterface=e.setInitialUIStates,e.setInitialUIStates=function(){this.setInitialUIStatesWrappedInterface(),this.updateWrapperElements()},e.updateWrapperGameRules=function(){this.updateWrapperModel({general:{rules:this.getRules()}})},e.updateWrapperPaytable=function(){this.updateWrapperModel({general:{paytable:this.getPaytable&&this.getPaytable()||""}})},e.updateWrapperCurrency=function(){this.updateWrapperModel({general:{currency:this.scope.game.currency.sign,currencyDelimiter:this.scope.game.currency.decimals}})},e.updateWrapperSlidableTouch=function(){this.touchAnywhereEnabled&&this.presentation.getById("tglTouchAnywhereOther").release();var e=this.scope.layout.has(sna.service.ENVIRONMENT_MOBILE);this.updateWrapperModel({general:{isTouchAnywhereSpin:!1,isSlidableTouch:this.slidableTouch},elements:{BUTTON_TOGGLE_TOUCH_ANYWHERE_SPIN:{visible:e&&this.game.showTouchAnywhereButton(),enabled:!0},BUTTON_SPIN:{visible:!0,enabled:!this.spinButton||this.spinButton.enabled}}})},e.updateWrapperTouchAnywhere=function(){this.slidableTouch&&this.presentation.getById("tglSlidableTouchOther").release(),this.scope.layout.has(sna.service.ENVIRONMENT_MOBILE)&&this.updateWrapperModel({general:{isSlidableTouch:!1,isTouchAnywhereSpin:this.touchAnywhereEnabled},elements:{BUTTON_TOGGLE_SLIDABLE_TOUCH:{visible:!0,enabled:!0},BUTTON_SPIN:{visible:!this.touchAnywhereEnabled,enabled:!this.spinButton||this.spinButton.enabled}}})},e.onContinueButtonPressedWrappedInterface=e.onContinueButtonPressed,e.onContinueButtonPressed=function(){this.onContinueButtonPressedWrappedInterface(),this.showWrapperAndSetInitialWrapperState(),this.afterGameEnter()},e.showWrapperAndSetInitialWrapperState=function(){this.scope.config.parameters.postponeShowingUI||this.setWrapperVisibility(!0),this.setInitialWrapperState()},e.gameInitWrapped=e.gameInit,e.gameInit=function(e,t){this.gameInitWrapped(e,t),this.isInReplay()&&(this.setWrapperVisibility(!0),this.setInitialWrapperState(),this.onReplayInit())},e.wasSuperStakePrompted=function(){return this.game.getGameSettingsProperty("super_stake_prompted")||this.skipSuperStakePrompt},e.wasSpinToWinPrompted=function(){return this.game.getGameSettingsProperty("skipSpinToWinDialog")||this.skipSuperStakePrompt},e.setInitialWrapperState=function(){var e,t;this.updateWrapperGameSettings(),this.updateWrapperModel(this.getWrapperState("initial")),this.game.gameStateRestored()?this.updateWrapperButtonsState("LOCKED"):(e=this.isVisibleSuperStake()&&!this.wasSuperStakePrompted(),t=this.scope.game.spinToWinEnabled&&!this.wasSpinToWinPrompted(),e||t||this.scope.game.freeRounds&&!this.scope.game.freeRounds.accepted&&0<this.scope.game.freeRounds.available?this.updateWrapperButtonsState("LOCKED"):this.updateWrapperButtonsState("IDLE")),this.scope.game.hideClock||this.initClock(),this.updateWrapperSound()},e.setSuperStakeModelWrapped=e.setSuperStakeModel,e.setSuperStakeModel=function(e){this.setSuperStakeModelWrapped(e),this.updateWrapperSuperstake()},e.onLayoutChangeWrapped=e.onLayoutChange,e.onLayoutChange=function(){this.onLayoutChangeWrapped(),this.updateWrapperLayout()},e.setUseSpacebarSpinWrapped=e.setUseSpacebarSpin,e.setUseSpacebarSpin=function(e){this.setUseSpacebarSpinWrapped(e),this.updateWrapperSpacebar()},e.playStartAnimationWrappedInterface=e.playStartAnimation,e.playStartAnimation=function(){return this.scope.game.isRespinActive||(this.scope.game.feature||this.scope.game.miniFeature?this.updateWrapperGameMessage("EMPTY"):this.updateWrapperGameMessage("GOOD_LUCK")),this.scope.game.feature&&(this.scope.game.feature.started||!this.scope.game.feature.start)||this.scope.game.miniFeature&&this.game.getParameterValue("hideUIForMiniFeature")?this.isFeatureSpinAuto()?this.updateWrapperButtonsState("FREE_SPINS"):this.updateWrapperButtonsState("FREE_SPINS_MANUAL"):(this.updateWrapperButtonsState("SPINNING"),this.scope.game.autoplay.active&&this.updateWrapperModel({elements:{BUTTON_FAST_SPIN:{enabled:!0,visible:this.getHideTurboSpin()}}})),this.playStartAnimationWrappedInterface()},e.disableInterface=function(){this.presentation.createAnimationTimeline("disableInterface",0,!1,!0);var e=this.scope.game.feature&&!1===this.scope.game.feature.start;(e=this.scope.game.feature&&this.scope.game.feature.start&&this.game.getParameterValue("wrapperVisibleDuringFeature")?!0:e)?this.updateWrapperButtonsState("FREE_SPINS"):this.updateWrapperButtonsState("SPINNING")},e.enableInterface=function(){!this.scope.game.disableSpaceBar&&!this.scope.layout.has(sna.service.ENVIRONMENT_MOBILE)&&this.game.getGameSettingsProperty("spacebar_spin")&&this.spaceBarEnableConditions()&&this.setUseSpacebarSpin(!0),this.spinInProgress||this.buyFreespinsRestoreActive||(this.presentation.createAnimationTimeline("enableInterface",0,!1,!0),this.scope.game.freeRounds&&this.scope.game.freeRounds.active?this.scope.game.freeRounds.end?this.updateWrapperButtonsState("LOCKED"):this.updateWrapperButtonsState("FREE_ROUNDS"):this.updateWrapperButtonsState("IDLE"))},e.processWinResultWrapped=e.processWinResult,e.processWinResult=function(){this.removeGlobalPressCallback(this.fastStopCallback);var e=this.q.when(!0);return e=(e=!this.scope.game.wasRespinActive?e.then(this.processSpinToWinOutcome.bind(this,this.scope.lastResult.outcome.spinToWin)):e).then(this.processWinResultWrapped.bind(this))},e.handleWrapperDialog=function(e){var t,i,n,s={};"showErrorDialog"==e&&(t=this.presentation.getById("errorDialogMessage"),n=this.createDialogAction(this.onErrorDialogClose.bind(this)),s=this.createWrapperDialogConfig({text:t.text,buttons:[{type:0,text:this.scope.translations.CLOSE,action:n}],onClose:n})),"insufficientFunds"==e&&(n=this.createDialogAction(this.presentation.createAnimationTimeline.bind(this.presentation,"hideInsufficientFundsDialog",0,!1,!0)),t=this.scope.translations["ERROR FUNDS"],this.game.getParameterValue("gameHasSupermeter")&&(t=this.scope.translations.ERROR_FUNDS),this.spinInProgress&&this.insufficientFundsMessage&&(t=this.insufficientFundsMessage),s=this.createWrapperDialogConfig({text:t,buttons:[{type:0,text:this.scope.translations.CLOSE,action:n}],onClose:n})),"freeRoundsStart"==e&&(n=this.createDialogAction(this.userConfirmed.bind(this,null,"freeRounds","hideFreeRoundsStartDialog",!0)),i=this.createDialogAction(this.handleFreeRoundsUserDecline.bind(this)),s=this.createWrapperDialogConfig({text:sna.model.utils.replace(this.scope.translations.CONGRATULATIONS_FREE_ROUNDS,"{0}",this.scope.game.freeRounds.left),buttons:[{type:0,text:this.scope.translations.YES_TEXT,action:n},{type:1,text:this.scope.translations.MAYBE_LATER,action:i}],onClose:i})),"freeRoundsEnd"==e&&(n=this.createDialogAction(this.userConfirmed.bind(this,null,"freeRoundsEnd","hideFreeRoundsEndDialog")),s=this.createWrapperDialogConfig({text:this.getFreeRoundsEndMessage(),buttons:[{type:0,text:this.scope.translations.CLOSE,action:n}],onClose:n}),this.game.getGameSettingsProperty("superStakeActive"),this.updateWrapperModel({general:{isSuperstakeEnabled:!1,freeroundsValue:null,totalWinFreeRoundsValue:null}})),"autoplayLimit"==e&&(n=this.createDialogAction(this.presentation.createAnimationTimeline.bind(this.presentation,"hideAutoplayLimitDialog",0,!1,!0)),s=this.createWrapperDialogConfig({text:this.scope.translations.AUTO_PLAY_DESCRIPTION,buttons:[{type:0,text:this.scope.translations.CLOSE,action:n}],title:this.scope.translations.AUTO_PLAY,onClose:n})),"resetBet"==e&&(n=this.createDialogAction(this.confirmResetBet.bind(this)),i=this.createDialogAction(this.cancelResetBet.bind(this)),s=this.createWrapperDialogConfig({text:this.scope.translations.RESET_BET_POP_UP_DESCRIPTION,buttons:[{type:0,text:this.scope.translations.YES_TEXT,action:n},{type:1,text:this.scope.translations.NO_TEXT,action:i}],onClose:i})),"superStake"==e&&(n=this.createDialogAction(this.userConfirmed.bind(this,null,"superStake","hideSuperStakeDialog","true")),i=this.createDialogAction(this.userConfirmed.bind(this,null,"superStake","hideSuperStakeDialog","false")),s=this.createWrapperDialogConfig({text:this.scope.translations.SUPER_STAKE_PROMPT+"<br> <br>"+this.scope.translations.WOULD_YOU_LIKE_TO_ACTIVATE_SUPER_STAKE,buttons:[{type:0,text:this.scope.translations.YES,action:n},{type:1,text:this.scope.translations.NO,action:i}],onClose:i})),"realityReminder"==e&&(n=this.createDialogAction(this.continueRealityReminder.bind(this)),i=this.createDialogAction(this.stopRealityReminder.bind(this)),s=this.createWrapperDialogConfig({text:this.getRealityReminderText(),buttons:[{type:0,text:this.scope.translations.CONTINUE,action:n},{type:1,text:this.scope.translations.STOP,action:i}],onClose:i})),"userGambleConfirmation"==e&&(n=this.createDialogAction(this.handleUserGambleConfirmation.bind(this,null,"gamble")),i=this.createDialogAction(this.handleUserGambleConfirmation.bind(this,null,"collect")),s=this.createWrapperDialogConfig({text:this.scope.translations.GAMBLE_FEATURE_CHOICE_DIALOG,title:this.scope.translations.GAMBLE_FEATURE_HEADER,buttons:[{type:0,text:this.scope.translations.GAMBLE_BUTTON,action:n},{type:1,text:this.scope.translations.COLLECT_BUTTON_HEADER,action:i}],onClose:i})),"funPlay"==e&&(n=this.createDialogAction(this.userConfirmed.bind(this,null,"funMode","hideErrorDialog",!0)),s=this.createWrapperDialogConfig({text:this.scope.translations.YOU_ARE_PLAYING_FOR_FUN,buttons:[{type:0,text:this.scope.translations.CONTINUE,action:n}],onClose:n})),"simpleMessage"==e&&(n=this.createDialogAction(this.confirmSimpleMessageRead.bind(this,null,this.scope.game.simpleMessageIndex)),s=this.createWrapperDialogConfig({text:this.scope.game.simpleMessage,buttons:[{type:0,text:this.scope.translations.CLOSE,action:n}],onClose:n})),"maxWinReached"==e&&(n=this.createDialogAction(this.confirmMaxWinReachedRead.bind(this)),s=this.createWrapperDialogConfig({text:this.scope.game.maxWinReachedText,buttons:[{type:0,text:this.scope.translations.CLOSE,action:n}],onClose:n}),delete this.scope.game.maxWinReachedText),"emptyReplayRoundMessage"==e&&(n=this.createDialogAction(this.confirmSimpleMessageRead.bind(this,null,this.getEmptyDialogText())),s=this.createWrapperDialogConfig({text:this.getEmptyDialogText(),buttons:[{type:0,text:this.scope.translations.CLOSE,action:n}],onClose:n},!0)),this.showWrapperDialog(s,e)},e.onErrorDialogClose=function(){this.presentation.createAnimationTimeline("hideErrorDialog",0,!1,!0),this.backendError=!1},e.handleFreeRoundsUserDeclineWrapped=e.handleFreeRoundsUserDecline,e.handleFreeRoundsUserDecline=function(e){return triggerGameWrapperModelUpdate({general:{isSuperstakeEnabled:this.game.getGameSettingsProperty("superStakeActive"),betTotal:this.getWrapperBetTotal(this.game.getGameSettingsProperty("superStakeActive"))}}),this.handleFreeRoundsUserDeclineWrapped(e).then(this.updateWrapperButtonsState.bind(this,"IDLE"))},e.createDialogAction=function(t){return function(){var e=this.q.when(!0);return e=(e=e.then(t)).then(function(){this.isDialogOpened=!1}.bind(this))}.bind(this)},e.createWrapperDialogConfig=function(e,t){var i={};return i.title=e.title||null,i.text=e.text||"",i.text='<div style="text-align: center; font-family: dejavuSansBold;">'+i.text+"</div>",i.onClose=e.onClose||function(){},i.actions=[],this.isReplay()&&!t||(e.buttons=e.buttons||[],e.buttons.forEach(function(e){var t={};t.type=e.type||0,t.text=e.text,t.action=e.action||function(){},i.actions.push(t)},this)),i},e.processWrapperButtonClickEvent=function(e,t){if(!this.blockWrapperButtonEvents){var i,n=e.name;switch(n){case"BUTTON_SPIN":this.spin(),this.scope.game.simpleMessage&&this.confirmSimpleMessageRead(null,this.scope.game.simpleMessageIndex);break;case"BUTTON_BET_PLUS":this.sound.sounds.PlusCoinClick&&this.sound.playSound("PlusCoinClick"),this.onPlusBetButtonPressed().then(this.updateWrapperBetValue.bind(this)).then(this.updateWrapperBetButtons.bind(this)).then(this.updateWrapperGameMessage.bind(this,"IDLE"));break;case"BUTTON_BET_MINUS":this.sound.sounds.MinusCoinClick&&this.sound.playSound("MinusCoinClick"),this.onMinusBetButtonPressed().then(this.updateWrapperBetValue.bind(this)).then(this.updateWrapperBetButtons.bind(this)).then(this.updateWrapperGameMessage.bind(this,"IDLE"));break;case"BUTTON_BET_SETTINGS":this.sound.sounds.ButtonGeneral&&this.sound.playSound("ButtonGeneral"),this.updateWrapperBetValue();break;case"BUTTON_BET_OPTION":this.sound.sounds.ButtonGeneral&&this.sound.playSound("ButtonGeneral"),this.onBetOptionsButtonPressed(e.data.count);break;case"BUTTON_SPIN_STOP":this.onFastStopClicked(null);break;case"BUTTON_TOGGLE_GAMBLE":this.presentation.getById("tglGamble").release();break;case"BUTTON_SET_AUTO_PLAY_OPTION":-1===e.data.count&&(e.data.count=""),this.sound.sounds.ButtonGeneral&&this.sound.playSound("ButtonGeneral"),this.setAutoplayValue(null,null,e.data.count),this.updateWrapperAutoplayNumberOfSpins();break;case"BUTTON_TOGGLE_SPACESBAR_SPIN":this.presentation.getById("tglSpacebarSpinOther").release();break;case"BUTTON_TOGGLE_SOUNDS":this.presentation.getById("tglGameSounds").release(),this.updateWrapperGameSounds();break;case"BUTTON_TOGGLE_MUSIC":this.presentation.getById("tglBackgroundSounds").release(),this.updateWrapperGameMusic();break;case"BUTTON_TOGGLE_INTRO_SCREEN":this.presentation.getById("tglIntro").release(),this.updateWrapperIntroScreen();break;case"BUTTON_MAX_BET":this.onMaxBetButtonPressed();break;case"BUTTON_SUPERSTAKE":this.presentation.getById("superStakeButton").release();break;case"BUTTON_FAST_SPIN":this.sound.sounds.ButtonGeneral&&this.sound.playSound("ButtonGeneral"),this.presentation.getById("toggleFastSpinSettingsButton").release(),this.updateWrapperFastSpin();break;case"BUTTON_SOUNDS":this.soundToggle(),this.updateWrapperSound();break;case"BUTTON_STOP_ON_BONUS":this.sound.sounds.ButtonGeneral&&this.sound.playSound("ButtonGeneral"),this.toggleStopOnFeature(),this.updateWrapperStopOnFeature();break;case"BUTTON_START_AUTOPLAY":this.sound.sounds.ButtonAutoplayStart&&this.sound.playSound("ButtonAutoplayStart"),this.onWrapperMenuClosed(),this.startAutoplay();break;case"BUTTON_AUTOPLAY_STOP":this.scope.game.autoplay.active&&this.stopAutoplay(!0);break;case"BUTTON_COLLECT":this.onWrapperCollect();break;case"BUTTON_GAMBLE":this.onWrapperOpenGambleFeature();break;case"BUTTON_CONTINUE":this.betSettingsOpened&&(this.betSettingsOpened=!1),this.isDialogOpened=!1,this.updateWrapperCurrentLayout("layout_UI");break;case"BUTTON_TOGGLE_TOUCH_ANYWHERE_SPIN":this.presentation.getById("tglTouchAnywhereOther").release(),this.updateWrapperTouchAnywhere();break;case"BUTTON_TOGGLE_SLIDABLE_TOUCH":this.presentation.getById("tglSlidableTouchOther").release(),this.updateWrapperSlidableTouch();break;case"BUTTON_SINGLE_WIN_UP":this.sound.sounds.ButtonGeneral&&this.sound.playSound("ButtonGeneral"),this.setSingleWinLimitValue(null,"next"),this.updateWrapperAutoplaySingleWinLimit();break;case"BUTTON_SINGLE_WIN_DOWN":this.sound.sounds.ButtonGeneral&&this.sound.playSound("ButtonGeneral"),this.setSingleWinLimitValue(null,"prev"),this.updateWrapperAutoplaySingleWinLimit();break;case"BUTTON_LOSS_LIMIT_UP":this.sound.sounds.ButtonGeneral&&this.sound.playSound("ButtonGeneral"),this.setLossLimitValue(null,"next"),this.updateWrapperAutoplayLossLimit();break;case"BUTTON_LOSS_LIMIT_DOWN":this.sound.sounds.ButtonGeneral&&this.sound.playSound("ButtonGeneral"),this.setLossLimitValue(null,"prev"),this.updateWrapperAutoplayLossLimit();break;case"BUTTON_OPEN_AUTOPLAY_SETTINGS":this.sound.sounds.ButtonGeneral&&this.sound.playSound("ButtonGeneral"),this.autoplayNumberOfSpins=100,-1===this.scope.game.autoplay.options.indexOf(100)&&(i=this.scope.game.autoplay.options[this.scope.game.autoplay.options.length-1],this.autoplayNumberOfSpins=-1===i?"":i),this.onWrapperMenuOpened(),this.resetAutoplayValues(),this.updateWrapperAutoplayButtons();break;case"BUTTON_OPEN_INFO_SECTION":this.sound.sounds.ButtonGeneral&&this.sound.playSound("ButtonGeneral"),this.onWrapperMenuOpened(n),this.paytableUpdated||(this.paytableUpdated=!0,this.updateWrapperPaytable());break;case"BUTTON_OPEN_RULES_SECTION":this.sound.sounds.ButtonGeneral&&this.sound.playSound("ButtonGeneral"),this.onWrapperMenuOpened(n),this.updateWrapperGameRules();break;case"BUTTON_OPEN_BET_SETTINGS":this.betSettingsOpened=!0,this.sound.sounds.ButtonGeneral&&this.sound.playSound("ButtonGeneral"),this.updateWrapperBetValue(),this.onWrapperMenuOpened();break;case"BUTTON_OPEN_GENERAL_SETTINGS":this.sound.sounds.ButtonGeneral&&this.sound.playSound("ButtonGeneral"),this.onWrapperMenuOpened(n);break;case"BUTTON_BUY_BONUS_CLOSE":case"BUTTON_MENU_CLOSE":this.sound.sounds.ButtonGeneral&&this.sound.playSound("ButtonGeneral"),this.betSettingsOpened&&(this.betSettingsOpened=!1),this.buyFeatureOpen&&this.onBuyFeatureClosed(),this.onWrapperMenuClosed(n);break;case"BUTTON_HOME":this.sound.sounds.ButtonGeneral&&this.sound.playSound("ButtonGeneral"),this.goToHome();break;case"BUTTON_HISTORY":this.sound.sounds.ButtonGeneral&&this.sound.playSound("ButtonGeneral"),this.openHistoryPage();break;case"BUTTON_ADDITION_SECTION":this.processButtonAdditionSectionClicked();break;case"BUTTON_PLAY_STREAM":this.pauseGameExecution();break;case"BUTTON_STOP_STREAM":this.resumeGameExecution();break;case"BUTTON_TOGGLE_TWIN_GAME":this.toggleTwinGame();break;case"BUTTON_BUY_BONUS":this.onBuyFeatureOpened(),this.onWrapperMenuOpened(n),this.onBuyBonusButtonClicked()}}},e.processButtonAdditionSectionClicked=function(){return this.toggleAdditionSection()},e.toggleAdditionSection=function(){return this.wrapperAdditionSectionVisible=!this.wrapperAdditionSectionVisible,this.processAdditionSectionAnimations()},e.processAdditionSectionAnimations=function(){return this.wrapperAdditionSectionVisible?this.showAdditionSection():this.hideAdditionSection()},e.showAdditionSection=function(){return this.playAdditionSectionAnimation("showAdditionSection")},e.hideAdditionSection=function(){return this.playAdditionSectionAnimation("hideAdditionSection")},e.playAdditionSectionAnimation=function(e){return this.presentation.cancelAnimation("showAdditionSection"),this.presentation.cancelAnimation("hideAdditionSection"),this.presentation.createAnimationTimeline(e,0,!1,!0,null)},e.updateWrapperAutoplayButtons=function(){this.updateWrapperAutoplayLossLimitRange(),this.updateWrapperAutoplaySingleWinLimitRange(),this.updateWrapperAutoplaySingleWinLimit(),this.updateWrapperAutoplayLossLimit(),this.handleAutoplayUKGC(),this.handleAUtoplayTurboSpin(),this.updateWrapperAutoplayNumberOfSpins(),this.updateWrapperStopOnFeature()},e.handleAutoplayUKGC=function(){this.isUKGC()?this.updateWrapperModel({elements:{BUTTON_STOP_ON_BONUS:{visible:!1,enabled:!1},BUTTON_START_AUTOPLAY:{visible:!0,enabled:!1}}}):this.updateWrapperModel({general:{isAutoplayStopOnBonus:this.scope.game.autoplay.stopOnFeature}})},e.handleAUtoplayTurboSpin=function(){this.updateWrapperModel({elements:{BUTTON_FAST_SPIN:{enabled:!0,visible:this.getHideTurboSpin()}}})},e.onWrapperOpenGambleFeature=function(){this.sound.sounds.ButtonGeneral&&this.sound.playSound("ButtonGeneral");var e=this.scope.layout.has(sna.service.ENVIRONMENT_MOBILE);this.updateWrapperModel({elements:{BUTTON_FAST_SPIN:{visible:!e&&this.getHideTurboSpin(),enabled:!1},BUTTON_COLLECT:{visible:!0,enabled:!0},BUTTON_GAMBLE:{visible:!0,enabled:!1},BUTTON_SPIN:{visible:!e,enabled:!e}},general:{gameMessage:null}}),this.openGambleFeature()},e.onWrapperCollect=function(){this.sound.sounds.CollectWinnings&&this.sound.playSound("CollectWinnings"),this.collectGambleFeature()},e.onWrapperMenuOpened=function(e){this.isDialogOpened=!0,this.updateSettingsBackground(e)},e.onWrapperMenuClosed=function(e){this.isDialogOpened=!1,this.updateSettingsBackground(e)},e.updateWrapperLeaderBoard=function(){this.updateWrapperModel({elements:{BUTTON_LEADERBOARD:{visible:!1,enabled:!1}}})},e.updateWrapperAutoplaySingleWinLimit=function(){var e=(e=this.game.getParameterValue("singleLimit")||[]).map(function(e){return e*this.getTotalBet()},this),t=this.scope.game.autoplay.winThreshold,i=0==e.indexOf(t),e=e.indexOf(t)==e.length-1;this.updateWrapperModel({general:{autoplaySingleWinLimit:t}}),i&&this.updateWrapperModel({elements:{BUTTON_SINGLE_WIN_DOWN:{visible:!0,enabled:!1},BUTTON_SINGLE_WIN_UP:{visible:!0,enabled:!0}}}),e&&this.updateWrapperModel({elements:{BUTTON_SINGLE_WIN_DOWN:{visible:!0,enabled:!0},BUTTON_SINGLE_WIN_UP:{visible:!0,enabled:!1}}}),e||i||this.updateWrapperModel({elements:{BUTTON_SINGLE_WIN_DOWN:{visible:!0,enabled:!0},BUTTON_SINGLE_WIN_UP:{visible:!0,enabled:!0}}})},e.updateWrapperAutoplaySingleWinLimitRange=function(){var e=(this.game.getParameterValue("singleLimit")||[]).map(function(e){return e*this.getTotalBet()},this);this.updateWrapperModel({general:{autoplaySingleWinLimitRange:e}})},e.wrapperFastWinStopUiInteraction=function(){this.scope.game.isBigWin&&("buttonsOnly"==this.game.getParameterValue("hideUiOnBigWin")?this.updateWrapperButtonsState("HIDDEN"):this.game.getParameterValue("hideUiOnBigWin")&&this.setWrapperVisibility(!1)),this.presentation.scope.layout.has(sna.service.ENVIRONMENT_PORTRAIT)&&this.presentation.scope.layout.has(sna.service.ENVIRONMENT_MOBILE)?this.updateWrapperModel({elements:{BUTTON_SPIN:{visible:!(this.game.inFreeSpins()||this.scope.game.autoplay&&this.scope.game.autoplay.active),enabled:!1}}}):this.updateWrapperModel({elements:{BUTTON_SPIN:{visible:!this.game.inFreeSpins(),enabled:!1}}})},e.updateWrapperAutoplayLossLimit=function(){var e=(e=this.game.getParameterValue("lossLimit")||[]).map(function(e){return e*this.getTotalBet()},this),t=this.scope.game.autoplay.winDecreaseThreshold,i=0==e.indexOf(t),e=e.indexOf(t)==e.length-1;this.updateWrapperModel({general:{autoplayLossLimit:t}}),i&&this.updateWrapperModel({elements:{BUTTON_LOSS_LIMIT_DOWN:{visible:!0,enabled:!1},BUTTON_LOSS_LIMIT_UP:{visible:!0,enabled:!0}}}),e&&this.updateWrapperModel({elements:{BUTTON_LOSS_LIMIT_DOWN:{visible:!0,enabled:!0},BUTTON_LOSS_LIMIT_UP:{visible:!0,enabled:!1}}}),e||i||this.updateWrapperModel({elements:{BUTTON_LOSS_LIMIT_DOWN:{visible:!0,enabled:!0},BUTTON_LOSS_LIMIT_UP:{visible:!0,enabled:!0}}}),this.isUKGC()&&this.updateWrapperModel({elements:{BUTTON_START_AUTOPLAY:{enabled:!!this.scope.game.autoplay.winDecreaseThreshold}}})},e.updateWrapperAutoplayLossLimitRange=function(){var e=(this.game.getParameterValue("lossLimit")||[]).map(function(e){return e*this.getTotalBet()},this);this.updateWrapperModel({general:{autoplayLossLimitRange:e}})},e.showWrapperGambleButtons=function(){var e=this.scope.layout.has(sna.service.ENVIRONMENT_MOBILE);this.updateWrapperModel({elements:{BUTTON_COLLECT:{visible:!0,enabled:!0},BUTTON_GAMBLE:{visible:!0,enabled:!this.gambleFeatureOpened},BUTTON_SPIN:{visible:!e,enabled:!e},BUTTON_SPIN_STOP:{visible:!1,enabled:!1}}}),this.game.getParameterValue("hideWinnerTextOnGambleButtonsShown")&&this.lastGameMessage&&this.lastGameMessage.showWinnerText&&(this.lastGameMessage.showWinnerText=!1,this.updateWrapperModel({general:this.lastGameMessage}))},e.hideWrapperGambleButtons=function(){this.updateWrapperModel({elements:{BUTTON_COLLECT:{visible:!1,enabled:!1},BUTTON_GAMBLE:{visible:!1,enabled:!1},BUTTON_SPIN:{visible:!this.spinInProgress||this.scope.game.disableSlamStop,enabled:!this.spinInProgress},BUTTON_SPIN_STOP:{visible:this.spinInProgress&&!this.scope.game.disableSlamStop,enabled:this.spinInProgress&&!this.scope.game.disableSlamStop}},general:{showGameMessages:!0}})},e.updateWrapperCurrentLayout=function(e){this.updateWrapperModel({general:{currentLayout:e}})},e.getCanvasAspectRatio=function(){var e=this.presentation.view;return e.width/e.height},e.updateWrapperLayout=function(){var e=null,t=null,i=this.getCanvasAspectRatio();1920/1080<i&&(e=(t=1080)*(i<=2?i:2)),this.presentation.main.environment.is(sna.service.ENVIRONMENT_DESKTOP)?this.updateWrapperModel({general:{useLayoutSet:0,customWidth:e,customHeight:t}}):.7<=i&&i<=1?this.updateWrapperModel({general:{useLayoutSet:4,customWidth:e,customHeight:t}}):i<.75&&.51<i?this.updateWrapperModel({general:{useLayoutSet:2,customWidth:e,customHeight:t}}):i<=.51?this.updateWrapperModel({general:{useLayoutSet:3,customWidth:e,customHeight:t}}):this.updateWrapperModel({general:{useLayoutSet:1,customWidth:e,customHeight:t}})},e.updateWrapperAfterWin=function(){var e,t;this.scope.game.feature&&0==this.scope.game.feature.start?(this.updateFsTotalWinCondition()&&this.updateWrapperFreeSpinsTotalWin(),this.scope.game.freeRounds&&this.scope.game.freeRounds.active&&this.scope.game.feature.end&&!this.scope.game.isRespinActive&&this.updateFreeRoundsTotalWinOnRestore()):(this.shouldUpdateFooterAfterWin()&&(t={shouldShowTicker:!(this.gambleAllowed&&this.gambleFeatureEnabled)},e=this.scope.game.totalWin.toFixed(2),!this.game.getParameterValue("disableActiveTotalWin")&&this.activeTotalWin&&(e=this.activeTotalWin.toFixed(2)),this.game.getParameterValue("showCascadeWinOnly")&&this.scope.game.isRespinActive&&(e=this.getCascadeWin()),this.game.getParameterValue("useFooterSmallWinCountUp")&&this.updateWrapperGameMessage("CUSTOM_WIN",e,t)),this.scope.game.freeRounds&&this.scope.game.freeRounds.active&&!this.gambleFeatureEnabled&&!this.scope.game.isRespinActive&&(t=Number(this.scope.game.freeRounds.totalWin).toFixed(2),this.updateFreeRoundsTotalWinOnRestore(),this.updateWrapperModel({general:{totalWinFreeRoundsValue:t}})))},e.resetReplayWrapped=e.resetReplay,e.resetReplay=function(){return this.resetReplayWrapped().then(this.updateWrapperBalanceValue.bind(this))},e.changeReplayWrapped=e.changeReplay,e.changeReplay=function(e){return this.changeReplayWrapped(e).then(function(){this.updateWrapperBalanceValue(),this.updateWrapperGameMessage("EMPTY"),this.scope.game.replay.freeRounds&&!this.scope.game.replay.freeRounds.postponed?(this.scope.game.ssActive=!1,this.enableFreeRounds()):(this.updateWrapperModel({general:{freeroundsValue:null,totalWinFreeRoundsValue:null}}),this.isVisibleSuperStake()?(this.superStakeActive&&0==this.scope.game.activeGameTypeIndex||1==this.scope.game.activeGameTypeIndex&&!this.superStakeActive)&&this.setSuperStakeModel(0<this.scope.game.activeGameTypeIndex):this.updateWrapperBetValue())}.bind(this))},e.updateTicker=function(e){this.scope.game.feature&&(!this.scope.game.feature||this.scope.game.feature.active)||this.showSimpleMessage(this.getWinTickerForIndex(e))},e.updateWrapperGameMessage=function(e,t,i){this.onWrapperGameMessageUpdate(e,t,i);var n="FREE_SPINS"===this.wrapperGameLayout;"IDLE"!==e&&this.idleMessagesInterval&&(clearTimeout(this.idleMessagesInterval),this.idleMessagesInterval=null);var s=this.lastGameMessage===this.presentation.scope.translations.BIG_WINNER_TICKER||this.lastGameMessage===this.presentation.scope.translations.MEGA_WINNER_TICKER||this.lastGameMessage===this.presentation.scope.translations.INSANE_WINNER_TICKER,r=["WIN","FAST_WIN","CUSTOM_WIN"];if(-1<r.indexOf(e)&&-1<r.indexOf(this.lastWrapperMessage)&&this.lastWinInWrapperMessage===t)if("CUSTOM_WIN"!==this.lastWrapperMessage&&"WIN"!==this.lastWrapperMessage||"FAST_WIN"!==e||!this.scope.game.isBigWin){if(!s)return}else;switch(this.scope.game.maxWinReached&&(t=this.scope.game.maxWinReached),e){case"IDLE":n||this.idleMessagesInterval||(this.showIdleMessage(),this.idleMessagesInterval=setInterval(this.showIdleMessage.bind(this),6e3));break;case"SUPERSTAKE":n||this.showSimpleMessage(this.scope.translations.SUPER_STAKE_ACTIVATED);break;case"BASIC_WINNER":n||this.showSimpleMessage(this.getWinTickerForIndex(-1));break;case"WINNER":n||this.showSimpleMessage(this.getWinTicker(!1));break;case"PRESS_SPIN":n||this.showSimpleMessage(this.scope.translations.PRESS_SPIN_TO_BEGIN_TICKER);break;case"PAYLINE_WIN":var o=i||{duration:.001};!this.showPaylineWin()||this.buttonsInfo.BUTTON_GAMBLE&&this.buttonsInfo.BUTTON_GAMBLE.visible||this.showSimpleMessage(this.getPaylineWinTickerConfig(t,o),"winTemplate");break;case"WIN":this.isMaxWinReached()||((i=i||{}).shouldShowTicker=!this.userGambleConfirmation&&!this.game.inFreeSpins(),this.showSimpleMessage(this.getWinTickerConfig(!0,t,i),"winTemplate"));break;case"FAST_WIN":this.isMaxWinReached()||this.showSimpleMessage(this.getWinTickerConfig(!0,t,{duration:.001,shouldShowTicker:!this.userGambleConfirmation&&!this.game.inFreeSpins()}),"winTemplate");break;case"CUSTOM_WIN":this.isMaxWinReached()||this.showSimpleMessage(this.getWinTickerConfig(!0,t,i),"winTemplate");break;case"FREE_SPINS_WIN":this.isMaxWinReached()||this.showSimpleMessage(this.getWinTickerConfig(!0),"winTemplate");break;case"GOOD_LUCK":var a=this.scope.layout.has(sna.service.ENVIRONMENT_PORTRAIT),o=this.scope.translations.GOOD_LUCK;this.showSimpleMessage(o=n&&!a?"":o);break;case"EMPTY":this.updateWrapperModel({general:{gameMessage:null}})}this.lastWinInWrapperMessage=t,this.lastWrapperMessage=e},e.showSimpleMessage=function(e,t){this.updateWrapperModel({general:{showSimpleMessage:!0,gameMessage:e,gameMessageType:t||"string"}})},e.showIdleMessage=function(){this.msgIndex=this.msgIndex||0;var e,t=["3_OR_MORE_SCATTERS_AWARD_FREE_SPINS_TICKER","INCREMENTAL_MULTIPLIER_DESCRIPTION","ACTIVATE_TURBO_SPIN_TICKER","SUPERSTAKE_ACTIVATE_SUPERSTAKE_MODE"];this.isVisibleSuperStake()||(n=t.indexOf("SUPERSTAKE_ACTIVATE_SUPERSTAKE_MODE"),t.splice(n,1)),!this.getGameDoesntHaveFreeSpins()&&1!=this.game.getParameterValue("moreThan3ScatterInFS")||((e=this.game.getParameterValue("scattersRequiredForFS"))?this.scope.translations["3_OR_MORE_SCATTERS_AWARD_FREE_SPINS_TICKER"]=this.scope.translations["3_OR_MORE_SCATTERS_AWARD_FREE_SPINS_TICKER"].replace("3",e):(n=t.indexOf("3_OR_MORE_SCATTERS_AWARD_FREE_SPINS_TICKER"),t.splice(n,1))),(this.game.getGameSettingsProperty("hideFastSpin")||this.scope.game.hideFastSpin)&&(n=t.indexOf("ACTIVATE_TURBO_SPIN_TICKER"),t.splice(n,1));for(var i=0;i<t.length;i++)this.scope.translations[t[i]]||t.splice(i,1);this.presentation.scope.layout.has(sna.service.ENVIRONMENT_MOBILE)&&(this.presentation.scope.layout.has(sna.service.ENVIRONMENT_PORTRAIT)?t.push("ROTATE_SCREEN_FOR_LANDSCAPE_MODE"):this.presentation.scope.layout.has(sna.service.ENVIRONMENT_LANDSCAPE)&&t.push("ROTATE_SCREEN_FOR_PORTRAIT_MODE"),this.game.getParameterValue("noSpinningSymbols")||this.game.getGameSettingsProperty("disableSlamStop")&&!1===this.game.getGameSettingsProperty("touch_anywhere")||t.push("TAP_ANYWHERE_TICKER")),this.msgIndex=this.msgIndex+1,this.msgIndex=this.msgIndex==t.length?0:this.msgIndex;var n=this.scope.translations[t[this.msgIndex]];this.updateWrapperModel({general:{gameMessage:n,gameMessageType:"string"}})},e.updateWrapperFreeSpinsTotalWin=function(){this.onWrapperFreeSpinsTotalWinUpdate(),this.shouldShowTotalWinFreeSpinValue()&&this.updateWrapperModel({general:{totalWinFreeSpinValue:this.getFsTotalWin()}})},e.updateWrapperFreeSpinsCounter=function(e){this.updateWrapperModel({general:{freespinsValue:this.getWrapperFreeSpinsValue(e)}})},e.updateWrapperFreeSpinsMultiplier=function(){this.updateWrapperModel({general:{multiplierValue:this.getWrapperFreeSpinsMultiplier()}})},e.updateWrapperIntroScreen=function(){this.updateWrapperModel({general:{hasIntroScreen:this.presentation.getById("tglIntro").toggleState}})},e.updateWrapperSpacebar=function(){this.updateWrapperModel({general:{isSpacebarSpin:this.useSpacebar}})},e.updateWrapperGamble=function(){this.updateWrapperModel({general:{hasGamble:!this.autoCollectWins}})},e.updateWrapperAutoplayNumberOfSpins=function(){var e=this.autoplayNumberOfSpins;this.updateWrapperModel({general:{autoplayCount:e=""===e?-1:e}})},e.updateWrapperStopOnFeature=function(){this.updateWrapperModel({general:{isAutoplayStopOnBonus:this.scope.game.autoplay.stopOnFeature}})},e.updateWrapperGameMusic=function(){var e=!this.sound.getDefaultSoundState();this.updateWrapperModel({general:{isMuted:e,isMusicEnabled:this.presentation.getById("tglBackgroundSounds").toggleState}})},e.updateWrapperGameSounds=function(){var e=!this.sound.getDefaultSoundState();this.updateWrapperModel({general:{isMuted:e,isSoundEnabled:this.presentation.getById("tglGameSounds").toggleState}})},e.updateWrapperSound=function(){var e=!this.sound.getDefaultSoundState();this.updateWrapperModel({general:{isMuted:e,isSoundEnabled:!e,isMusicEnabled:!e}})},e.updateWrapperFastSpin=function(){this.updateWrapperModel({general:{isFastSpinEnabled:this.scope.game.turboMode}})},e.updateWrapperSuperstake=function(){var e=this.scope.game.feature&&this.scope.game.feature.restoreLeft;this.updateWrapperModel({general:{isSuperstakeEnabled:!this.scope.game.userAcceptedFreeRounds&&this.scope.game.ssActive||!1,betRange:this.getWrapperBetRange(),bet:this.getWrapperBet(),betTotal:this.getWrapperBetTotal(e)}})},e.updateWrapperBetValue=function(e,t,i){this.presentation.createAnimationTimeline("betParamChange",0,!1,!0,null),this.updateWrapperModel({general:{bet:this.getWrapperBet(),betTotal:this.getWrapperBetTotal(),betRange:this.getTotalBets()}})},e.updateWrapperBalanceValue=function(){var e=this.scope.game.balanceCash||0;this.updateWrapperModel({general:{balance:e}})},e.getWrapperFreeSpinsMultiplier=function(){return this.scope.game.isInFreeSpins()&&this.game.getParameterValue("showFooterFreeSpinsMultiplier")?this.getFsMultiplier():null},e.getWrapperTotalBetMultiplier=function(){var e=this.scope.game.ssActive,t=this.game.getSuperStakeMultiplier();return!this.isReplay()&&e?t:1},e.getWrapperBetTotal=function(e){var t=this.scope.game.ssActive;return null!=e&&(t=e),(t=this.isReplay()&&null==e?0<this.scope.game.activeGameTypeIndex:t)?+(this.getWrapperBet()*this.game.getSuperStakeMultiplier()).toFixed(2):null},e.onSetupCompleteWrapped=e.onSetupComplete,e.onSetupComplete=function(e,t){var i=(i=this.q.when(!0)).then(this.onSetupCompleteWrapped.bind(this,e,t));return i=this.scope.game.replay&&this.scope.game.replay.freeRounds?i.then(this.enableFreeRounds.bind(this)):i},e.enableFreeRoundsWrapper=e.enableFreeRounds,e.enableFreeRounds=function(){this.enableFreeRoundsWrapper();var e,t=this.scope.game.freeRounds.totalWin.toFixed(2);!this.isReplay()||(e=this.scope.game.replay).response.game.walletAfterLastBet.freeRounds&&e.response.game.walletAfterLastBet.freeRounds.totalWin&&(t=e.response.game.walletAfterLastBet.freeRounds.totalWin.toFixed(2)),this.scope.game.restoreData&&this.scope.game.restoreData.previousOutcome&&this.scope.game.restoreData.previousOutcome.freeRounds&&this.scope.game.restoreData.previousOutcome.freeRounds.left==this.scope.game.freeRounds.left&&(t=this.getFreeRoundsPreviousTotalWin(+t)),this.updateWrapperModel({general:{isSuperstakeEnabled:!1,freeroundsValue:this.scope.game.freeRounds.left,totalWinFreeRoundsValue:t}}),this.updateWrapperBetValue(),this.scope.game.restoreData&&this.scope.game.restoreData.gambleActive||this.updateWrapperButtonsState("FREE_ROUNDS")},e.processFreeRoundsFinishedWrapped=e.processFreeRoundsFinished,e.processFreeRoundsFinished=function(e){return this.processFreeRoundsFinishedWrapped(e).then(this.updateWrapperButtonsState.bind(this,"IDLE"))},e.getWrapperBetRange=function(){return this.getTotalBets()},e.setupJackpotWrapped=e.setupJackpot,e.setupJackpot=function(){this.setupJackpotWrapped(),this.updateWrapperJackpot(),this.updateWrapperCustomPlayAreaButtonsSpacing(2160)},e.updateWrapperCustomPlayAreaButtonsSpacing=function(e){this.updateWrapperModel({general:{customPlayAreaButtonsSpacing:e}})},e.updateWrapperAdditionSection=function(e){this.updateWrapperModel({general:{isAdditionSection:e}})},e.onJackpotUpdatedWrapped=e.onJackpotUpdated,e.onJackpotUpdated=function(){this.onJackpotUpdatedWrapped(),this.updateWrapperJackpot()},e.updateWrapperJackpot=function(){try{var e,t=this.scope.game.jackpot;t&&t.isGrandJackpotActive&&(delete(e=angular.copy(t)).currentValue,delete e.isGrandJackpotActive,e.logo=null,e.showPreviewPanel=!1,e.isDemo=!1,e.currencySymbol=this.scope.game.currency.sign,"EUR"!==this.scope.game.currency.code&&(e.currencyString=this.scope.game.currency.sign),this.updateWrapperModel({general:{additionSectionConfig:{config:e,type:1}}}))}catch(e){}},e.setWrapperVisibility=function(e){this.updateWrapperModel({elements:{WRAPPER:{visible:e}}})},e.updateWrapperBetButtons=function(){var e=this.scope.game.restoreData&&this.scope.game.restoreData.previousOutcome;e&&e.win&&!this.winSumDone||(this.isMinBet()?this.updateWrapperModel({elements:{BUTTON_BET_MINUS:{visible:!0,enabled:!1},BUTTON_BET_PLUS:{visible:!0,enabled:!0}}}):this.isMaxBet()?(this.sound.sounds.MaxBetReached&&this.sound.playSound("MaxBetReached"),this.updateWrapperModel({elements:{BUTTON_BET_MINUS:{visible:!0,enabled:!0},BUTTON_BET_PLUS:{visible:!0,enabled:!1}}})):this.updateWrapperModel({elements:{BUTTON_BET_MINUS:{visible:!0,enabled:!0},BUTTON_BET_PLUS:{visible:!0,enabled:!0}}}))},e.showWrapperDialog=function(e,t){this.isDialogOpened=!0,"superStake"==t?this.updateWrapperModel({general:{templatePopup:{type:"SuperStake",data:{text:this.setSuperStakeDialogText(),action_yes:e.actions[0].action,action_no:e.actions[1].action}},gameMessage:null}}):this.updateWrapperModel({general:{popups:[{type:"info",onClose:null,title:e.title,text:e.text,actions:e.actions}]}})},e.getWrapperState=function(e){var t;return this.currentURL=this.currentURL||(window.SNA||{}).basePath||"./","initial"==e&&(e=this.presentation.getById("introDontShow"),t=this.presentation.getById("introSpine"),t={general:{serverName:"Server version ",serverVersion:this.getServerVersion(),rtp:this.getWinDisplayData("rtp"),maxWin:this.getWinDisplayData("maxWin"),maxWinProbability:this.getWinDisplayData("maxWinProbability"),showLeaderboard:!1,isLeaderboard:!1,copyrights:this.getFooterCopyrightText(),isGameLocked:!1,isFunMode:this.scope.game.playMode===sna.service.tripleBellsProvider.playModes.FUN,currency:this.scope.game.currency.sign,currencyDelimiter:this.scope.game.currency.decimals,currencyCode:this.scope.game.currency.code,balance:this.game.getBalanceInCash(),bet:+this.getTotalBet(),betTotal:this.getWrapperBetTotal(this.game.getGameSettingsProperty("superStakeActive")),totalBetMultiplier:1,betRange:this.getTotalBets(),isFastSpinEnabled:this.scope.game.turboMode,isFastSpinToggled:!this.game.getGameSettingsProperty("fast_spin"),gameMessage:null,showGameMessages:!0,gameMessagesType:"html",logoImage:this.getLogoImageUrl(),buyBonusBetMultiplier:this.getBuyBonusBetMultiplier(),buyBonusOptions:this.getBuyBonusOptions(),buyFeatureBubbleText:this.getBuyFeatureBubbleText(),showFreespinsBlock:!1,showTotalWinBlock:!1,showTotalWinBlockBig:!1,isAutoplayEnabled:!1,autoplayCount:100,isAutoplayStopOnBonus:this.scope.game.autoplay.stopOnFeature,autoplayRange:this.getAutoplayOptions(),autoplayLossLimit:0,autoplaySingleWinLimit:0,autoplayLossLimitRange:this.game.getParameterValue("lossLimit"),autoplaySingleWinLimitRange:this.game.getParameterValue("singleLimit"),autospinsLeft:"",homeURL:"https://stakelogic.com",hasIntroScreen:void 0!==e&&!e.toggleState||void 0!==t,hasGamble:!this.autoCollectWins&&this.gambleFeatureEnabled,isSpacebarSpin:!this.scope.game.disableSpaceBar,isMuted:!0,isSoundEnabled:!1,isMusicEnabled:!1,isDialogWindowEnabled:!1,dialogWindowMessage:"Continue to play?",dialogWindowButtonNames:["YES","NO"],lang:this.scope.game.language,gameName:this.getGameName(),gameVersion:this.getGameVersionInfo(),showHistoryButton:this.scope.game.showHistoryButton,clock:"",currentLayout:"layout_UI"},translations:this.changeWrapperTranslations()},this.isPokerStars()&&(t.general.integration="poker_star"),t.general.regulation=t.general.regulation||{},t.general.regulation.UKGC=this.isUKGC(),t.general.regulation.isDisplaySessiontime=!!this.scope.game.isDisplaySessionTime,t.general.regulation.isDisplayNet=!!this.scope.game.isDisplayNet,this.scope.game.inactivityMessage&&(t.general.regulation.inactivityMessage=!0)),t},e.updateWrapperElements=function(e){this.updateWrapperBalanceValue(),this.updateWrapperFastSpin(),this.updateWrapperLayout(),this.updateWrapperStopOnFeature(),this.updateWrapperIntroScreen(),this.updateWrapperAutoplayLossLimit(),this.updateWrapperAutoplaySingleWinLimit(),this.updateWrapperLeaderBoard(),this.updateWrapperPaytable(),this.updateWrapperGameRules(),this.updateWrapperCurrency(),this.updateWrapperSlidableTouch(),this.updateWrapperTouchAnywhere(),this.updateWrapperGamble(),this.updateWrapperGameHistoryButton()},e.updateWrapperGameHistoryButton=function(){this.updateWrapperModel({elements:{BUTTON_HISTORY:{visible:!!this.scope.game.showHistoryButton,enabled:!0}}})},e.updateWrapperGameSettings=function(){var e=this.scope.layout.has(sna.service.ENVIRONMENT_MOBILE),t=this.scope.layout.has(sna.service.ENVIRONMENT_PORTRAIT),i=!(this.isPokerStars()&&!e),n=!this.game.getParameterValue("hideButtonToggleMusic")&&i;this.updateWrapperModel({elements:{BUTTON_TOGGLE_INTRO_SCREEN:{visible:!0,enabled:!0},BUTTON_TOGGLE_TWIN_GAME:{visible:!!this.game.getParameterValue("hasTwinGame"),enabled:!0},BUTTON_TOGGLE_GAMBLE:{visible:this.gambleFeatureEnabled,enabled:!0},BUTTON_TOGGLE_SPACESBAR_SPIN:{visible:!(e&&t||this.scope.game.disableSpaceBar),enabled:!0},BUTTON_STOP_ON_BONUS:{visible:!this.getGameDoesntHaveFreeSpins(),enabled:!this.getGameDoesntHaveFreeSpins()},BUTTON_TOGGLE_MUSIC:{visible:n,enabled:!0},BUTTON_TOGGLE_SOUNDS:{visible:i,enabled:!0},BUTTON_SOUNDS:{visible:i,enabled:!0},BUTTON_HOME:{visible:!this.isPokerStars()&&this.getHomeButtonVisible(),enabled:!this.lobbyButtonDisabled()},BUTTON_START_AUTOPLAY:{visible:!0,enabled:!0},BUTTON_TOGGLE_SLIDABLE_TOUCH:{visible:!1,enabled:!0},BUTTON_TOGGLE_TOUCH_ANYWHERE_SPIN:{visible:e&&this.game.showTouchAnywhereButton(),enabled:!0}}})},e.updateWrapperGameLayout=function(e,t){"FREE_SPINS"===e?(this.idleMessagesInterval&&(clearTimeout(this.idleMessagesInterval),this.idleMessagesInterval=null),this.updateWrapperModel({general:{gameMessage:null,betTotal:this.getWrapperBetTotal(!1),isSuperstakeEnabled:this.scope.game.ssActive,multiplierValue:this.getWrapperFreeSpinsMultiplier(),freespinsValue:this.getWrapperInitialFreeSpinsValue(),totalWinFreeSpinValue:this.getWrapperFreeSpinsInitialWinValue(t),bonusGameActivated:!0}})):"PICKER_BONUS"===e?(this.idleMessagesInterval&&(clearTimeout(this.idleMessagesInterval),this.idleMessagesInterval=null),this.updateWrapperModel({general:{gameMessage:null,betTotal:this.getWrapperBetTotal(!1),isSuperstakeEnabled:this.scope.game.ssActive,multiplierValue:this.getPickerMultiplier(),freespinsValue:null,totalWinFreeSpinValue:this.getPickerFeatureTotalWin()}})):this.updateWrapperModel({general:{betTotal:this.getWrapperBetTotal(),isSuperstakeEnabled:this.scope.game.ssActive,multiplierValue:null,freespinsValue:null,totalWinFreeSpinValue:null,bonusGameActivated:!1}}),this.wrapperGameLayout=e},e.updateWrapperButtonsState=function(e){this.isWrapperButtonsStateChangeAllowed(e)&&(this.updateWrapperModel({elements:this.wrapperUserInterfaceStates(e)}),this.wrapperButtonsState=e,this.onWrapperButtonsStateChange&&this.onWrapperButtonsStateChange(e))},e.isWrapperButtonsStateChangeAllowed=function(e){var t,i,n=!0;return"LOCKED"===e||"FREE_SPINS"===e||this.isInReplay()||(t=!(this.isVisibleSuperStake()&&!this.wasSuperStakePrompted()),i=!(this.scope.game.spinToWinEnabled&&!this.wasSpinToWinPrompted()),n=n&&(t||i||this.freeRoundsPostponed)&&this.gameSpecificButtonsStateChange(e)),n},e.updateWrapperModel=function(t){var e;t&&(t.elements&&(t.elements.WRAPPER&&(this.uiWrapper=t.elements.WRAPPER),t.elements.BUTTON_SPIN&&(this.touchAnywhereEnabled&&(t.elements.BUTTON_SPIN.visible=!1),this.scope.game.replay&&(t.elements.BUTTON_SPIN.enabled=!1),this.spinButton=t.elements.BUTTON_SPIN),t.elements.BUTTON_SPIN_STOP&&(this.touchAnywhereEnabled&&t.elements.BUTTON_SPIN&&(t.elements.BUTTON_SPIN.visible=!1),this.scope.game.replay&&(t.elements.BUTTON_SPIN_STOP.enabled=!1),this.stopButton=t.elements.BUTTON_SPIN_STOP),t.elements.BUTTON_SOUNDS&&(e=this.scope.layout.has(sna.service.ENVIRONMENT_MOBILE),this.isPokerStars()&&!e&&(t.elements.BUTTON_SOUNDS.visible=!1)),Object.keys(t.elements).forEach(function(e){this.buttonsInfo[e]=t.elements[e]},this)),t.general&&(void 0!==t.general.balance&&this.scope.game.hideBalance&&!this.isReplay()&&(t.general.balance=null),void 0!==t.general.gameMessage&&(this.lastGameMessage=t.general.gameMessage))),triggerGameWrapperModelUpdate(t)},e.isInReplay=function(){return sna.service.tripleBellsProvider.playModes.REPLAY==this.scope.game.playMode},e.wrapperUserInterfaceStates=function(e){var t={};if(sna.debug.enableWrapperButtonState&&console.log("%c"+e,"color: blue"),this.isInReplay())return this.scope.game.isInFreeSpins()?{BUTTON_SPIN:{enabled:!1,visible:!1},BUTTON_SPIN_STOP:{enabled:!1,visible:!1},BUTTON_MENU:{enabled:!1,visible:!1},BUTTON_BET_SETTINGS:{enabled:!1,visible:!1},BUTTON_BET_PLUS:{enabled:!1,visible:!1},BUTTON_BET_MINUS:{enabled:!1,visible:!1},BUTTON_FAST_SPIN:{enabled:!1,visible:!0},BUTTON_AUTO_SPIN:{enabled:!1,visible:!1},BUTTON_SOUNDS:{enabled:!1,visible:!0},BUTTON_SUPERSTAKE:{enabled:!1,visible:!1}}:{BUTTON_SPIN:{enabled:!1,visible:!0},BUTTON_SPIN_STOP:{enabled:!1,visible:!1},BUTTON_MENU:{enabled:!1,visible:!0},BUTTON_BET_SETTINGS:{enabled:!1,visible:!0},BUTTON_BET_PLUS:{enabled:!1,visible:!0},BUTTON_BET_MINUS:{enabled:!1,visible:!0},BUTTON_FAST_SPIN:{enabled:!1,visible:this.getHideTurboSpin()},BUTTON_AUTO_SPIN:{enabled:!1,visible:this.getHideAutoSpin()},BUTTON_SOUNDS:{enabled:!1,visible:!0},BUTTON_SUPERSTAKE:{enabled:!1,visible:this.isVisibleSuperStake()}};switch(e){case"INTRO":t={BUTTON_ADDITION_SECTION_SHOW:{enabled:!1,visible:!1},BUTTON_SPIN:{enabled:!1,visible:!1},BUTTON_MENU:{enabled:!1,visible:!1},BUTTON_BET_SETTINGS:{enabled:!1,visible:!1},BUTTON_BET_PLUS:{enabled:!1,visible:!1},BUTTON_BET_MINUS:{enabled:!1,visible:!1},BUTTON_FAST_SPIN:{enabled:!1,visible:!1},BUTTON_SET_AUTO_PLAY_OPTION:{enabled:!1,visible:!1},BUTTON_BET_OPTION:{enabled:!1,visible:!1},BUTTON_CONTINUE:{enabled:!1,visible:!1},BUTTON_MAX_BET:{enabled:!1,visible:!1},BUTTON_AUTO_SPIN:{enabled:!1,visible:!1},BUTTON_SOUNDS:{enabled:!1,visible:!1},BUTTON_SUPERSTAKE:{enabled:!1,visible:!1}};break;case"IDLE":t={BUTTON_ADDITION_SECTION_SHOW:{enabled:!1,visible:!1},BUTTON_SPIN:{enabled:!0,visible:!0},BUTTON_SPIN_STOP:{enabled:!1,visible:!1},BUTTON_MENU:{enabled:!0,visible:!0},BUTTON_BET_SETTINGS:{enabled:!0,visible:!0},BUTTON_BET_PLUS:{enabled:!this.isMaxBet(),visible:!0},BUTTON_BET_MINUS:{enabled:!this.isMinBet(),visible:!0},BUTTON_FAST_SPIN:{enabled:!0,visible:this.getHideTurboSpin()},BUTTON_SET_AUTO_PLAY_OPTION:{enabled:!0,visible:!0},BUTTON_BET_OPTION:{enabled:!0,visible:!0},BUTTON_CONTINUE:{enabled:!0,visible:!0},BUTTON_MAX_BET:{enabled:!0,visible:!0},BUTTON_AUTO_SPIN:{enabled:!0,visible:this.getHideAutoSpin()},BUTTON_AUTOPLAY_STOP:{enabled:!1,visible:!1},BUTTON_SOUNDS:{enabled:!0,visible:!0},BUTTON_SUPERSTAKE:{enabled:!this.isReplay()&&!this.scope.game.userAcceptedFreeRounds,visible:this.isVisibleSuperStake()}};break;case"SPINNING":t=this.presentation.main.environment.is(sna.service.ENVIRONMENT_MOBILE)?{BUTTON_ADDITION_SECTION_SHOW:{enabled:!1,visible:!1},BUTTON_SPIN:{enabled:!1,visible:!1},BUTTON_SPIN_STOP:{enabled:!this.scope.game.disableSlamStop&&!this.cascadeActive,visible:!1},BUTTON_MENU:{enabled:!1,visible:!0},BUTTON_BET_SETTINGS:{enabled:!1,visible:!1},BUTTON_BET_PLUS:{enabled:!1,visible:!0},BUTTON_BET_MINUS:{enabled:!1,visible:!0},BUTTON_FAST_SPIN:{enabled:!1,visible:!1},BUTTON_SET_AUTO_PLAY_OPTION:{enabled:!1,visible:!1},BUTTON_BET_OPTION:{enabled:!1,visible:!1},BUTTON_CONTINUE:{enabled:!1,visible:!1},BUTTON_MAX_BET:{enabled:!1,visible:!1},BUTTON_SOUNDS:{enabled:!0,visible:!0},BUTTON_SUPERSTAKE:{enabled:!1,visible:!1},BUTTON_AUTO_SPIN:{enabled:!1,visible:!1},BUTTON_AUTOPLAY_STOP:{enabled:this.scope.game.autoplay.active,visible:this.scope.game.autoplay.active}}:{BUTTON_ADDITION_SECTION_SHOW:{enabled:!1,visible:!1},BUTTON_SPIN:{enabled:!1,visible:!!this.scope.game.disableSlamStop},BUTTON_SPIN_STOP:{enabled:!this.scope.game.disableSlamStop,visible:!this.scope.game.disableSlamStop},BUTTON_MENU:{enabled:!1,visible:!0},BUTTON_BET_SETTINGS:{enabled:!1,visible:!0},BUTTON_BET_PLUS:{enabled:!1,visible:!0},BUTTON_BET_MINUS:{enabled:!1,visible:!0},BUTTON_FAST_SPIN:{enabled:!0,visible:this.getHideTurboSpin()},BUTTON_SET_AUTO_PLAY_OPTION:{enabled:!1,visible:!0},BUTTON_BET_OPTION:{enabled:!1,visible:!0},BUTTON_CONTINUE:{enabled:!1,visible:!0},BUTTON_MAX_BET:{enabled:!1,visible:!0},BUTTON_SOUNDS:{enabled:!0,visible:!0},BUTTON_SUPERSTAKE:{enabled:!1,visible:this.isVisibleSuperStake()},BUTTON_AUTO_SPIN:{enabled:!1,visible:!this.scope.game.autoplay.active&&this.getHideAutoSpin()},BUTTON_AUTOPLAY_STOP:{enabled:this.scope.game.autoplay.active,visible:this.scope.game.autoplay.active}};break;case"LOCKED":t={BUTTON_ADDITION_SECTION_SHOW:{enabled:!1,visible:!1},BUTTON_SPIN:{enabled:!1,visible:!0},BUTTON_SPIN_STOP:{enabled:!1,visible:!1},BUTTON_MENU:{enabled:!1,visible:!0},BUTTON_BET_SETTINGS:{enabled:!1,visible:!0},BUTTON_BET_PLUS:{enabled:!1,visible:!0},BUTTON_BET_MINUS:{enabled:!1,visible:!0},BUTTON_FAST_SPIN:{enabled:!0,visible:this.getHideTurboSpin()},BUTTON_SET_AUTO_PLAY_OPTION:{enabled:!1,visible:!0},BUTTON_BET_OPTION:{enabled:!1,visible:!0},BUTTON_CONTINUE:{enabled:!1,visible:!0},BUTTON_MAX_BET:{enabled:!1,visible:!0},BUTTON_AUTO_SPIN:{enabled:!1,visible:this.getHideAutoSpin()&&!this.scope.game.autoplay.active},BUTTON_SOUNDS:{enabled:!0,visible:!0},BUTTON_AUTOPLAY_STOP:{enabled:this.scope.game.autoplay.active,visible:this.scope.game.autoplay.active},BUTTON_SUPERSTAKE:{enabled:!1,visible:this.isVisibleSuperStake()}};break;case"DISABLED":t={BUTTON_ADDITION_SECTION_SHOW:{enabled:!1,visible:!1},BUTTON_SPIN:{enabled:!1,visible:!0},BUTTON_SPIN_STOP:{enabled:!1,visible:!1},BUTTON_MENU:{enabled:!1,visible:!0},BUTTON_BET_SETTINGS:{enabled:!1,visible:!0},BUTTON_BET_PLUS:{enabled:!1,visible:!0},BUTTON_BET_MINUS:{enabled:!1,visible:!0},BUTTON_FAST_SPIN:{enabled:!1,visible:this.getHideTurboSpin()},BUTTON_SET_AUTO_PLAY_OPTION:{enabled:!1,visible:!0},BUTTON_BET_OPTION:{enabled:!1,visible:!0},BUTTON_CONTINUE:{enabled:!1,visible:!0},BUTTON_MAX_BET:{enabled:!1,visible:!0},BUTTON_AUTO_SPIN:{enabled:!1,visible:this.getHideAutoSpin()},BUTTON_SOUNDS:{enabled:!0,visible:!0},BUTTON_SUPERSTAKE:{enabled:!1,visible:this.isVisibleSuperStake()}};break;case"FREE_SPINS":t={BUTTON_ADDITION_SECTION_SHOW:{enabled:!1,visible:!1},BUTTON_SPIN:{enabled:!0,visible:!1},BUTTON_SPIN_STOP:{enabled:!this.scope.game.disableSlamStop,visible:!1},BUTTON_MENU:{enabled:!1,visible:!1},BUTTON_BET_SETTINGS:{enabled:!1,visible:!1},BUTTON_BET_PLUS:{enabled:!1,visible:!1},BUTTON_BET_MINUS:{enabled:!1,visible:!1},BUTTON_FAST_SPIN:{enabled:!0,visible:this.getHideTurboSpin()&&!this.game.getParameterValue("hideFastSpinButtonDuringFreeSpins")},BUTTON_SET_AUTO_PLAY_OPTION:{enabled:!1,visible:!1},BUTTON_BET_OPTION:{enabled:!1,visible:!1},BUTTON_CONTINUE:{enabled:!1,visible:!1},BUTTON_MAX_BET:{enabled:!1,visible:!1},BUTTON_AUTO_SPIN:{enabled:!1,visible:!1},BUTTON_SOUNDS:{enabled:!0,visible:!0},BUTTON_SUPERSTAKE:{enabled:!1,visible:!1},BUTTON_AUTOPLAY_STOP:{enabled:!1,visible:!1}};break;case"FREE_SPINS_MANUAL":t={BUTTON_ADDITION_SECTION_SHOW:{enabled:!1,visible:!1},BUTTON_SPIN:{enabled:!1,visible:!1},BUTTON_SPIN_STOP:{enabled:!this.scope.game.disableSlamStop,visible:!this.touchAnywhereEnabled&&!this.game.getParameterValue("stopButtonHiddenOnManualFeatureSpin")},BUTTON_MENU:{enabled:!1,visible:!1},BUTTON_BET_SETTINGS:{enabled:!1,visible:!1},BUTTON_BET_PLUS:{enabled:!1,visible:!1},BUTTON_BET_MINUS:{enabled:!1,visible:!1},BUTTON_FAST_SPIN:{enabled:!0,visible:this.getHideTurboSpin()},BUTTON_SET_AUTO_PLAY_OPTION:{enabled:!1,visible:!1},BUTTON_BET_OPTION:{enabled:!1,visible:!1},BUTTON_CONTINUE:{enabled:!1,visible:!1},BUTTON_MAX_BET:{enabled:!1,visible:!1},BUTTON_AUTO_SPIN:{enabled:!1,visible:!1},BUTTON_SOUNDS:{enabled:!0,visible:!0},BUTTON_SUPERSTAKE:{enabled:!1,visible:!1},BUTTON_AUTOPLAY_STOP:{enabled:!1,visible:!1}};break;case"FREE_SPINS_IDLE":t={BUTTON_ADDITION_SECTION_SHOW:{enabled:!1,visible:!1},BUTTON_SPIN:{enabled:!0,visible:!0},BUTTON_SPIN_STOP:{enabled:!1,visible:!1},BUTTON_MENU:{enabled:!1,visible:!1},BUTTON_BET_SETTINGS:{enabled:!1,visible:!1},BUTTON_BET_PLUS:{enabled:!1,visible:!1},BUTTON_BET_MINUS:{enabled:!1,visible:!1},BUTTON_FAST_SPIN:{enabled:!0,visible:this.getHideTurboSpin()},BUTTON_SET_AUTO_PLAY_OPTION:{enabled:!1,visible:!1},BUTTON_BET_OPTION:{enabled:!1,visible:!1},BUTTON_CONTINUE:{enabled:!1,visible:!1},BUTTON_MAX_BET:{enabled:!1,visible:!1},BUTTON_AUTO_SPIN:{enabled:!1,visible:!1},BUTTON_SOUNDS:{enabled:!0,visible:!0},BUTTON_SUPERSTAKE:{enabled:!1,visible:!1},BUTTON_AUTOPLAY_STOP:{enabled:!1,visible:!1}};break;case"HIDDEN":t={BUTTON_ADDITION_SECTION_SHOW:{enabled:!1,visible:!1},BUTTON_SPIN:{enabled:!0,visible:!1},BUTTON_SPIN_STOP:{enabled:!1,visible:!1},BUTTON_MENU:{enabled:!1,visible:!1},BUTTON_BET_SETTINGS:{enabled:!1,visible:!1},BUTTON_BET_PLUS:{enabled:!1,visible:!1},BUTTON_BET_MINUS:{enabled:!1,visible:!1},BUTTON_FAST_SPIN:{enabled:!1,visible:!1},BUTTON_SET_AUTO_PLAY_OPTION:{enabled:!1,visible:!1},BUTTON_BET_OPTION:{enabled:!1,visible:!1},BUTTON_CONTINUE:{enabled:!1,visible:!1},BUTTON_MAX_BET:{enabled:!1,visible:!1},BUTTON_AUTO_SPIN:{enabled:!1,visible:!1},BUTTON_SOUNDS:{enabled:!0,visible:!0},BUTTON_SUPERSTAKE:{enabled:!1,visible:!1},BUTTON_AUTOPLAY_STOP:{enabled:!1,visible:!1}};break;case"FREE_ROUNDS":t={BUTTON_ADDITION_SECTION_SHOW:{enabled:!1,visible:!1},BUTTON_SPIN:{enabled:!0,visible:!0},BUTTON_SPIN_STOP:{enabled:!1,visible:!1},BUTTON_MENU:{enabled:!0,visible:!0},BUTTON_BET_SETTINGS:{enabled:!1,visible:!0},BUTTON_BET_PLUS:{enabled:!1,visible:!0},BUTTON_BET_MINUS:{enabled:!1,visible:!0},BUTTON_FAST_SPIN:{enabled:!0,visible:this.getHideTurboSpin()},BUTTON_SET_AUTO_PLAY_OPTION:{enabled:!0,visible:!0},BUTTON_BET_OPTION:{enabled:!1,visible:!1},BUTTON_CONTINUE:{enabled:!1,visible:!1},BUTTON_MAX_BET:{enabled:!1,visible:!1},BUTTON_AUTO_SPIN:{enabled:!0,visible:this.getHideAutoSpin()},BUTTON_SOUNDS:{enabled:!0,visible:!0},BUTTON_SUPERSTAKE:{enabled:!1,visible:this.isVisibleSuperStake()}}}return t},e.turnOffBaseGameFilter=function(){},e.updateSessionWin=function(){}}function decorateLoaderPrototype(e){e.loadAssetsWrapped=e.loadAssets,e.loadAssets=function(e,t,i){return this.waitForUIToBeReady().then(this.loadAssetsWrapped.bind(this,e,t,i))},e.loadGameConfigWrapped=e.loadGameConfig,e.loadGameConfig=function(){return this.waitForWrapperConfigToBeReady().then(this.loadGameConfigWrapped.bind(this))},e.waitForWrapperConfigToBeReady=function(){var t=this.q.defer(),e=t.promise;return function e(){setTimeout(function(){GcwGameClient&&!GcwGameClient.initialData?e():t.resolve()}.bind(this),300)}(),e},e.waitForUIToBeReady=function(){if(GcwGameClient.wrapperData.uiInitialized)return this.q.when(!0);var o=this.q.defer(),e=o.promise;return function r(){setTimeout(function(){if(GcwGameClient.wrapperData.uiReady){GcwGameClient.wrapperData.uiInitialized=!0,GcwGameClient.triggerEvent("INITIAL_MODEL",{lang:this.presentation.main.communication.language});var e=this.assetPath+this.scope.layout.selectedSize.path,t=this.scope.config.parameters.isHurricaneGames,i=this.scope.config.parameters.additionalLogoName,n="";i?n=e+i:t&&(n=e+"PartneredByHG.png"),triggerGameWrapperModelUpdate({assets:{bgMenus:e+(this.scope.config.parameters.bgMenus||"BG_blur_menus_god.png"),additionalPreloaderLogo:n,rulesImages:[],paytableImages:[]}}),this.setprog(0),o.resolve(),n=!0;try{var s=GcwGameClient.initialData.initConf.minimalui;0!==s&&"0"!==s||(n=!1)}catch(e){}this.scope.config.parameters.postponeShowingUI||triggerGameWrapperModelUpdate({elements:{WRAPPER:{visible:!0}}}),triggerGameWrapperModelUpdate({general:{isRequestFullScreen:n}})}else r()}.bind(this),100)}.call(this),e},e.setprog=function(e){this.loadingComplete||(this.updateWrapperLoaderpercentage(e),this.progressAnimated=e)},e.updateWrapperLoaderpercentage=function(e){triggerGameWrapperModelUpdate({general:{preloaderStep:Number(e).toFixed(0)}})},e.complete=function(){if(!this.fatalError){var e=this.loaderScene.presentation;sna.error.presentationErrorHandler=e.main.iface,this.setprog(100),this.loadingComplete=!0,this.processIntroScreen();var t=!1;try{t="true"===GcwGameClient.initialData.initConf.superStakeActive&&(!GcwGameClient.initialData.initConf.hideSuperStake||"false"===GcwGameClient.initialData.initConf.hideSuperStake),this.scope.game.replay&&(t=this.scope.game.replay.ssActive)}catch(e){}var i=this.scope.game.freeRounds&&(!this.scope.game.freeRounds.accepted&&this.scope.game.freeRounds.start||0<this.scope.game.freeRounds.left&&this.scope.game.freeRounds.left<this.scope.game.freeRounds.total);t&&!i&&triggerGameWrapperModelUpdate({general:{isSuperstakeEnabled:t}});var n=this.q.defer();return this.scope.game.config.newUI||!e.main.environment.is(sna.service.ENVIRONMENT_MOBILE)||this.isInReplay()||(e.createAnimationTimeline("showEnableSoundDialog",0,!1,!0),t=e.getById("btnYesEnableSound"),e=e.getById("btnNoEnableSound"),t.setPressAction(this.goToGame.bind(this,!0,n)),e.setPressAction(this.goToGame.bind(this,!1,n))),triggerGameWrapperModelUpdate({elements:{BUTTON_ADDITION_SECTION_SHOW:{enabled:!1,visible:!1},BUTTON_SPIN:{enabled:!1,visible:!1},BUTTON_SPIN_STOP:{enabled:!1,visible:!1},BUTTON_MENU:{enabled:!1,visible:!1},BUTTON_BET_SETTINGS:{enabled:!1,visible:!1},BUTTON_BET_PLUS:{enabled:!1,visible:!1},BUTTON_BET_MINUS:{enabled:!1,visible:!1},BUTTON_FAST_SPIN:{enabled:!1,visible:!1},BUTTON_SET_AUTO_PLAY_OPTION:{enabled:!1,visible:!1},BUTTON_BET_OPTION:{enabled:!1,visible:!1},BUTTON_MAX_BET:{enabled:!1,visible:!1},BUTTON_AUTO_SPIN:{enabled:!1,visible:!1},BUTTON_SOUNDS:{enabled:!1,visible:!1},BUTTON_SUPERSTAKE:{enabled:!1,visible:!1}}}),setTimeout(function(){GcwGameClient&&(GcwGameClient.triggerEvent(gcw.api.GameEventType.PRELOADING_END),GcwGameClient.triggerEvent(gcw.api.GameEventType.INITIALIZE_SUCCESS),GcwGameClient.triggerEvent(gcw.api.GameEventType.AUTOPLAY_CUSTOM_FEATURE)),triggerGameWrapperModelUpdate({elements:{WRAPPER:{visible:!1}}});var e=!1;try{var t=GcwGameClient.initialData.initConf.intro_screen;(e="true"===t||void 0===t)&&!this.isInReplay()&&["introBackgroundPortrait","introBackgroundLandscape","introContainer"].forEach(function(e){e=this.presentation.getById(e);e&&e.show()},this)}catch(e){}e||(this.scope.config.parameters.postponeShowingUI||triggerGameWrapperModelUpdate({elements:{WRAPPER:{visible:!0}}}),this.presentation.main.iface.setInitialWrapperState&&this.presentation.main.iface.setInitialWrapperState()),triggerGameWrapperModelUpdate({general:{preloaderComplete:!0}}),window.dispatchEvent(new Event("resize")),GcwGameClient.wrapperData.loaderHandshakeActive||n.resolve(!0)}.bind(this),500),GcwGameClient.wrapperData.loaderHandshakeActive&&(GcwGameClient.loadingDeferred=n),n.promise}},e.setupLoaderScreenWrapped=e.setupLoaderScreen,e.setupLoaderScreen=function(e){this.loaderScene=e.createPresentation({type:"Graphics",variant:"Rectangle",width:3e3,height:4e3,color:"#000000"},this,{})},e.isInReplay=function(){return sna.service.tripleBellsProvider.playModes.REPLAY==this.scope.game.playMode},e.cleanup=function(){}}function bootstrapAngularGame(){var e=document.head||document.getElementsByTagName("head")[0],t=this.document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",window.SNA.basePath+"css/game-styles.css"),e.appendChild(t);var i=document.createElement("div");i.id="mainContainer",i.innerHTML="<style>html,body {background: #000} #mainContainer { position: relative; width: 100%; height: 100% }</style>\x3c!--[if IE]><style type='text/css'>#html-content{filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='sample_600x600.png', sizingMethod='scale');background:none !important;}</style><![endif]--\x3e<div style=\"font-family:dejavuSansBold; visibility: hidden; position: absolute;\">A Stakelogic Production</div><div style=\"font-family:dejavuSans; visibility: hidden; position: absolute;\">A Stakelogic Production</div>"+(window.SNA.partialWrapperActive?"":'<div id="ios-fs"></div>')+"<div id=\"game-placeholder\"  ng-style=\"mainContainerStyles ? {position:'absolute', width: '100%', height: '100%'} : {position:'fixed', width: '100%', height: '100%'}\"><canvas id=\"game\"></canvas><div id=\"html-content\"></div></div>",document.body.appendChild(i),setTimeout(function(){angular.bootstrap(i,[sna.moduleName])})}sna.service.tripleBellsProvider.TRIPLE_BELLS_LOADER="TripleBellsLoaderService",sna.service.tripleBellsProvider.TRIPLE_BELLS_PROVIDER=sna.service.tripleBellsProvider.TRIPLE_BELLS_LOADER+sna.service.PROVIDER_SUFFIX,sna.service.tripleBellsProvider.DEFAULT_ADDITIONAL_CONFIG_LOCATION=(window.SNA||{}).basePath?window.SNA.basePath+"params.json":"params.json",sna.service.tripleBellsProvider.DEFAULT_LOADER_TRANSLATIONS_NAME="en",sna.service.tripleBellsProvider.TripleBellsLoader=function(e){sna.service.Loader.call(this,e),this.name=sna.service.tripleBellsProvider.TRIPLE_BELLS_LOADER,this.timeline=null,this.progressModel={progress:0},this.introAnimationScale=e.introAnimationScale,this.loadingComplete=!1,this.additionalConfigLocation=sna.service.tripleBellsProvider.DEFAULT_ADDITIONAL_CONFIG_LOCATION,sna.error.presentationErrorHandler=this},sna.service.tripleBellsProvider.TripleBellsLoader.prototype=new sna.service.Loader({}),sna.service.tripleBellsProvider.TripleBellsLoader.prototype.loadGameConfigLoaderService=sna.service.tripleBellsProvider.TripleBellsLoader.prototype.loadGameConfig,sna.service.tripleBellsProvider.TripleBellsLoader.prototype.loadGameConfig=function(){return(GcwGameClient?GcwGameClient.setEventListenerPromise.then(this.loadGameConfigLoaderService.bind(this)):this.loadGameConfigLoaderService()).then(this.loadAdditionalGameConfig.bind(this))},sna.service.tripleBellsProvider.TripleBellsLoader.prototype.loadAdditionalGameConfig=function(t){return GcwGameClient&&(GcwGameClient.triggerEvent(gcw.api.GameEventType.PRELOADING_START),GcwGameClient.mainService=GcwGameClient.mainService||GcwGameClient.getMainService(),GcwGameClient.iface=GcwGameClient.mainService.iface),this.http.get(this.additionalConfigLocation).then(function(e){return angular.merge({},t,e.data)}).then(this.getBrand.bind(this))},sna.service.tripleBellsProvider.TripleBellsLoader.prototype.getBrand=function(e){return GcwGameClient&&GcwGameClient.initialData&&GcwGameClient.initialData.initConf&&(this.gamebrand=GcwGameClient.initialData.initConf.gamebrand),e},sna.service.tripleBellsProvider.TripleBellsLoader.prototype.loadLoaderAssets=function(){var e=this.q.defer(),t=this.pixiLoader;this.assetSizePath=this.scope.layout.selectedSize.path;sna.presentation.util.getUrlParameters();t.add("MyriadPro",this.assetPath+"MYRIADPRO-REGULAR.ttf");var i=function(){t.off(i),e.resolve()};return t.on(sna.service.LOADER_EVENT_COMPLETE,i),t.on(sna.service.LOADER_EVENT_ERROR,this.onErrorCallback.bind(this,e)),t.load(),e.promise},sna.service.tripleBellsProvider.TripleBellsLoader.prototype.getDefaultLoaderTranslationsName=function(){return sna.service.tripleBellsProvider.DEFAULT_LOADER_TRANSLATIONS_NAME},sna.service.tripleBellsProvider.TripleBellsLoader.prototype.onErrorCallback=function(e){var t=this.pixiLoader;this.killLoading=!0,t.off(this.onErrorCallback),this.displayError(),e.reject()},sna.service.tripleBellsProvider.TripleBellsLoader.prototype.setupConfigStakelogic2Brand=function(){return{type:"Container",layer:"LOADER",id:"loaderContainer",y:-70,children:[{type:"LayoutContainer",layer:"LOADER",align:"c",fill:"C",width:"1580px",height:"1200px",children:[{type:"Graphics",variant:"Rectangle",width:3e3,height:4e3,color:"#000000"}]},{type:"LayoutContainer",layer:"LOADER",align:"c",fill:"R",width:"1580px",height:"1200px",atlas:"loader.json",animation:[{type:"TripleBellsStakelogicLoaderAnimation",name:"stakeLogicLoaderAnimation"}],children:[{type:"Container",children:[{id:"stakeLogo",type:"Sprite",allowOverride:!0,y:-20,x:-125,alpha:0,texture:"stake_logo.png"},{type:"Graphics",variant:"Rectangle",color:"0xFFFFFF",width:300,height:200,x:-130,y:-50,isMask:!0}]},{type:"Container",children:[{type:"Sprite",id:"logicLogo",allowOverride:!0,x:155,y:-20,alpha:0,texture:"logic_logo.png"},{type:"Graphics",variant:"Rectangle",color:"0xFFFFFF",width:300,height:200,x:130,y:-50,isMask:!0}]},{type:"Sprite",image:"thinkbigger.png",visible:!0,alpha:1,y:50},{type:"Sprite",image:"PartneredByHG.png",visible:!0,alpha:1,y:350,x:20},{type:"Sprite",id:"rLogo",allowOverride:!0,texture:"r_logo.png",alpha:0,x:278,y:-53},{type:"Text",id:"percentage",text:"100%",font:"Helvetica,sans-serif",size:{dynamic:!0,default:26,"Mobile,Landscape":44,"Mobile,Portrait":54},fill:"#FFFFFF",strokeColor:"#000000",thickness:2,align:"b",letterSpacing:3,y:{dynamic:!0,default:-440,Mobile:-430}},{type:"Graphics",variant:"Rectangle",align:"b",y:-475,width:520,height:10,color:"0x111111"},{type:"Graphics",variant:"Rectangle",align:"b",id:"progressBarLine",y:-475,width:520,height:10,color:"0x39d52c"}]}]}},sna.service.tripleBellsProvider.TripleBellsLoader.prototype.setupConfigRelaxBrand=function(){return{type:"Container",layer:"LOADER",id:"loaderContainer",y:-70,children:[{type:"LayoutContainer",layer:"LOADER",align:"c",fill:"C",width:"1580px",height:"1200px",children:[{type:"Graphics",variant:"Rectangle",width:3e3,height:4e3,color:"#000000"}]},{type:"LayoutContainer",layer:"LOADER",align:"c",fill:"R",width:"1580px",height:"1200px",atlas:"loader.json",children:[{type:"Sprite",texture:"gameLogoFinal.png",scale:1.5,y:-20},{type:"Sprite",align:"b",y:-460,texture:"percentBackground.png"},{type:"Text",id:"percentage",text:"100%",font:"Verdana",size:20,fontWeight:"bold",fill:"#000000",strokeColor:"#ffffff",thickness:2,align:"b",y:-460},{type:"Sprite",align:"b",y:-400,texture:"progressBar.png"},{type:"Sprite",align:"b",id:"progressBarLine",y:-400,texture:"progressFill.png"}]}]}},sna.service.tripleBellsProvider.TripleBellsLoader.prototype.setupLoaderScreen=function(e){var t=this.q.when(!0),i=e.stage,n=(e.main.game.getParameterValue("urlParametersStrings"),sna.presentation.util.getUrlParameters(),document.getElementById("background"));this.gamebrand===sna.service.tripleBellsProvider.gameBrands.RELAX?(s=this.setupConfigRelaxBrand(),n&&(n.style.backgroundImage="url('"+this.assetPath+this.assetSizePath+"filler.png')")):(s=this.setupConfigStakelogic2Brand(),n&&(n.style.backgroundImage="url('"+this.assetPath+this.assetSizePath+"filler-stakelogic.png')"));n=this.getErrorDialogConfig();s.children[1].children.push(n);var s=e.createPresentation(s,i,this.progressModel);return i.addChild(s),this.loaderScene=s,t=t.then(e.createAnimationTimeline.bind(e,"stakeLogicLoaderAnimation",0,!1,!0,null)),this.setprog(0),this.loaderScene.updateLayout(),t},sna.service.tripleBellsProvider.TripleBellsLoader.prototype.updateProgress=function(e,t){if(this.killLoading){var i=this.pixiLoader;return i.removeAllListeners(sna.service.LOADER_EVENT_PROGRESS),void i.removeAllListeners(sna.service.LOADER_EVENT_COMPLETE)}i=Math.round(100*this.loadProgress)/100;(new this.timeline).to(this,.5,{setprog:this.loadProgress,ease:Power2.easeOut}),sna.service.Loader.prototype.updateProgress.call(this,e,t),GcwGameClient&&GcwGameClient.triggerEvent(gcw.api.GameEventType.PRELOADING_PROGRESS,i)},sna.service.tripleBellsProvider.TripleBellsLoader.prototype.getprog=function(){return this.progressAnimated},sna.service.tripleBellsProvider.TripleBellsLoader.prototype.setprog=function(e){var t,i,n;this.loadingComplete||(t=this.loaderScene.presentation.getById("progressBarLine"),i=this.loaderScene.presentation.getById("percentage"),t.mask||(t.mask=new PIXI.Graphics,t.addChild(t.mask),t instanceof sna.presentation.Sprite&&(t.mask.x=-t.width/2)),t.mask.clear(),n=t.width*e/100,t.mask.clear(),t.mask.beginFill(16777215,1),t.mask.lineStyle(0,16777215,1),t.mask.drawRect(0,-65,n,130),t.mask.endFill(),this.progressAnimated=e,i.text=Math.round(e)+"%",i.dirty=!0)},sna.service.tripleBellsProvider.TripleBellsLoader.prototype.complete=function(){if(!this.fatalError){var i=this.loaderScene.presentation,n=this.q.defer(),e=new this.timeline;return sna.error.presentationErrorHandler=i.main.iface,e.call(this.setprog,[100],this),e.call(function(){this.loadingComplete=!0},[],this),e.call(this.processIntroScreen,[],this),!this.scope.game.config.newUI&&i.main.environment.is(sna.service.ENVIRONMENT_MOBILE)&&sna.service.tripleBellsProvider.playModes.REPLAY!==this.scope.game.playMode?e.call(function(){i.createAnimationTimeline("showEnableSoundDialog",0,!1,!0);var e=i.getById("btnYesEnableSound"),t=i.getById("btnNoEnableSound");e.setPressAction(this.goToGame.bind(this,!0,n)),t.setPressAction(this.goToGame.bind(this,!1,n))},[],this):(e.call(function(){n.resolve(!0)}),e.to(this.loaderScene,.3,{alpha:0,ease:Linear.easeInOut},.5),e.call(this.loaderScene.hide,[],this.loaderScene,.5),e.call(this.cleanup.bind(this))),GcwGameClient&&(GcwGameClient.triggerEvent(gcw.api.GameEventType.PRELOADING_END),GcwGameClient.triggerEvent(gcw.api.GameEventType.INITIALIZE_SUCCESS),GcwGameClient.triggerEvent(gcw.api.GameEventType.AUTOPLAY_CUSTOM_FEATURE)),n.promise}},sna.service.tripleBellsProvider.TripleBellsLoader.prototype.processIntroScreen=function(){var e=this.loaderScene.presentation;e.getById("introContainer")&&(e.main.iface.game.getGameSettingsProperty("intro_screen",!1)?this.processIntroScreenActive():this.processIntroScreenInactive())},sna.service.tripleBellsProvider.TripleBellsLoader.prototype.processIntroScreenActive=function(){var e=this.loaderScene.presentation,t=e.main.iface,i=e.getById("blockingInterface"),n=e.getById("baseGame"),s=e.getById("logoContainer"),r=e.getById("baseInterface"),o=e.getById("jackpotIndicatorContainer"),a=e.getById("btnSpinMobileContainer"),e=e.getById("btnMenuMobileContainer");a&&a.hide(),e&&e.hide(),i&&i.hide(),o&&o.hide(),s&&s.hide(),r&&r.hide(),t.showOverlay(),n.hide()},sna.service.tripleBellsProvider.TripleBellsLoader.prototype.processIntroScreenInactive=function(){this.loaderScene.presentation.getById("introContainer").hide()},sna.service.tripleBellsProvider.TripleBellsLoader.prototype.goToGame=function(e,t){var i=new this.timeline;return i.call(function(){this.loaderScene.presentation.createAnimationTimeline("hideEnableSoundDialog",0,!1,!0),this.loaderScene.presentation.main.iface.setInitialSoundStateMobile(e)},[],this),i.call(this.cleanup.bind(this)),i.call(function(){t.resolve(!0)}),t.promise},sna.service.tripleBellsProvider.TripleBellsLoader.prototype.cleanup=function(){this.loaderScene.parent.removeLayer("LOADER")},sna.service.tripleBellsProvider.TripleBellsLoader.prototype.getErrorDialogConfig=function(){return errorConfig={type:"Container",visible:!1,id:"errorDialog",children:[{type:"Graphics",variant:"Rectangle",width:1580,height:1200,color:"#000000",alpha:.6},{type:"Graphics",variant:"RoundedRectangle",radius:10,width:900,height:600,color:"0x222222",lineWidth:4,lineColor:"0xFFFFFF",y:-15},{type:"Sprite",atlas:"loader.json",texture:"error_icon.png",y:-200},{type:"Text",id:"errorDialogMessageLoader",text:"No Internet connection detected.\nPlease connect to the Internet and try again.",font:"Verdana",size:32,fill:"0xFFFFFF",y:-45,anchorAlign:"c",wordWrap:!0,wordWrapWidth:800,wordWrapLineHeight:50}]}},sna.service.tripleBellsProvider.TripleBellsLoader.prototype.displayError=function(e){if(this.loaderScene){var t=this.loaderScene.presentation.getById("errorDialog"),i=this.loaderScene.presentation.getById("errorDialogMessageLoader");switch(e.type){case sna.error.COMMUNICATION_ERROR:case sna.error.SOCKET_ERROR:i.text=this.translations.ERROR_COMMUNICATION_MESSAGE,i.scope.config.text=this.translations.ERROR_COMMUNICATION_MESSAGE,i.updatePresentation(!0);break;case sna.error.BACKEND_ERROR:i.text=e.message.slice(0,200),i.scope.config.text=e.message.slice(0,200),i.updatePresentation(!0)}t.show(),this.killLoading=!0}else sna.error.fatalErrorOccured=!1},sna.service.tripleBellsProvider.TripleBellsLoader.prototype.loadLoderTranslationsLoaderService=sna.service.tripleBellsProvider.TripleBellsLoader.prototype.loadLoderTranslations,sna.service.tripleBellsProvider.TripleBellsLoader.prototype.loadLoderTranslations=function(){return"undefined"!=typeof leanderGMApi?this.q.when(!0):this.loadLoderTranslationsLoaderService()},sna.service.tripleBellsProvider.TripleBellsLoader.prototype.onProgress=function(){return function(e,t){t.assetPack=this.currentAssetPack;var i=t.name,t=this.remainingLoadCalls&&this.remainingLoadCalls[i];void 0===t&&(log(this.name,"onProgress",sna.log.WARNING,"Asset was loaded, but progress bar could not be updated"+i),t=0),"base"==this.currentAssetPack&&(this.loadProgress+=t,this.updateProgress(i,t))}.bind(this)},sna.service.tripleBellsProvider.TripleBellsLoaderProvider=function(){sna.service.LoaderProvider.call(this),this.config.introAnimationScale=1,this.$get=[sna.service.Q,sna.service.HTTP,sna.service.ROOT_SCOPE,sna.service.PIXI_LOADER,sna.service.SOUND,sna.service.TIMELINE,this._init.bind(this)]},sna.service.tripleBellsProvider.TripleBellsLoaderProvider.prototype=new sna.service.LoaderProvider,sna.service.tripleBellsProvider.TripleBellsLoaderProvider.prototype.introAnimationScale=function(e){this.config.introAnimationScale=e},sna.service.tripleBellsProvider.TripleBellsLoaderProvider.prototype._create=function(){return decorateLoaderPrototype(sna.service.tripleBellsProvider.TripleBellsLoader.prototype),new sna.service.tripleBellsProvider.TripleBellsLoader(this.config)},sna.service.tripleBellsProvider.TripleBellsLoaderProvider.prototype._init=function(e,t,i,n,s,r){var o=this._create();return o.http=t,o.q=e,o.scope=i,o.pixiLoader=n,o.sound=s,o.timeline=r,o},sna.module.tripleBellsProvider.provider(sna.service.tripleBellsProvider.TRIPLE_BELLS_LOADER,sna.service.tripleBellsProvider.TripleBellsLoaderProvider),sna.presentation.tripleBellsProvider.TRIPLE_BELLS_INTRO_CONTAINER="TripleBellsIntroContainer",sna.presentation.tripleBellsProvider.TripleBellsIntroContainer=function(e,t){sna.presentation.Container.call(this,e,t.presentation),this.timeline=t.presentation.timeline,this.main=t,this.presentation=t.presentation,this.iface=t.iface,this.sound=t.sound,this.gameService=t.game,this.activeIntro=[]},sna.presentation.tripleBellsProvider.TripleBellsIntroContainer.prototype=Object.create(sna.presentation.Container.prototype),sna.presentation.tripleBellsProvider.TripleBellsIntroContainer.prototype.initPresentationContainer=sna.presentation.tripleBellsProvider.TripleBellsIntroContainer.prototype.initPresentation,sna.presentation.tripleBellsProvider.TripleBellsIntroContainer.prototype.initPresentation=function(){this.initPresentationContainer(),this.buttonDistance=this.scope.config.buttonDistance,this.pages=[],this.buttons=[],angular.forEach(this.scope.config.pages,function(e,t){var i=!0;(i=e.introPageCondition?e.introPageCondition.constructor===Array?e.introPageCondition.every(function(e){return this.presentation.parseValue(this,e)},this):this.presentation.parseValue(this,e.introPageCondition):i)&&((i=this.presentation.createPresentation(e,this,this.scope.model)).alpha=0,this.addChild(i),this.pages.push(i),e.buttons&&this.createPageButtons(i,e.buttons,t))},this);var e,t=this.scope.config.defaultPageIndex||0;this.pages[t].alpha=1,this.pages[t]&&this.pages[t].buttons&&this.pages[t].buttons.forEach(function(e){e.enable(),e.visible&&e.show()},this),this.scope.config.button&&angular.forEach(this.pages,function(e,t){var i=angular.copy(this.scope.config.button);i.x=t*this.buttonDistance-this.pages.length*this.buttonDistance/2+this.buttonDistance/2;var n=this.presentation.createPresentation(i,this,this.scope.model);if(n.pressCallback=this.onIntroPageButtonClicked.bind(this,n,t),n.setTextures(i.uncheckedTexture,i.atlas||"intro.json"),this.addChild(n),this.buttons.push(n),e.buttons)for(var s=e.buttons.length-1;0<=s;s--)("left"==e.buttons[s].scope.config.tag&&0==t||"right"==e.buttons[s].scope.config.tag&&t==this.pages.length-1)&&e.buttons[s].destroy()},this),this.buttons[t]&&(e=this.buttons[t].scope.config.checkedTexture,i=this.buttons[t].scope.config.atlas||"intro.json",this.buttons[t].setTextures(e,i));var i=this.scope.config.continueAndDontShowAgainButtons;i&&(i=this.presentation.createPresentation(i,this,this.scope.model),this.addChild(i),this.continueAndDontShowBttns=i),this.animateIntroAnimation(t)},sna.presentation.tripleBellsProvider.TripleBellsIntroContainer.prototype.createPageButtons=function(t,e,i){t.buttons=[],e.forEach(function(e){e=this.presentation.createPresentation(e,t,this.scope.model);e.pressCallback=this.onButtonClick.bind(this,e,t),t.addChild(e),t.buttons.push(e),e.disable(),0!=t.scope.config.pageId&&e.hide()},this)},sna.presentation.tripleBellsProvider.TripleBellsIntroContainer.prototype.onButtonClick=function(e,t){this.lastTimeline&&(this.lastTimeline.kill(),this.lastTimeline.stop(),delete this.lastTimeline);var i,n=e.scope.config.tag,e=t.scope.config.pageId;"left"==n?i=e-1:"right"==n&&(i=e+1);var s=new this.timeline;s.add("start"),s.call(function(){this.buttons.forEach(function(e,t){e.setTextures(e.scope.config[i==t?"checkedTexture":"uncheckedTexture"],e.scope.config.atlas||"intro.json")})},[],this,"start"),s.to(this.pages[i],.5,{alpha:1},"start"),s.to(t,.01,{alpha:0},"start"),this.pages[i].buttons.forEach(function(e){s.call(e.show,[],e,"start"),s.call(e.enable,[],e,"start")},this),t.buttons&&t.buttons.forEach(function(e){s.call(e.disable,[],e,"start"),s.call(e.hide,[],e,"start")},this),this.lastTimeline=s;t=new this.timeline;return t.add(this.animateIntroAnimation(i)),t},sna.presentation.tripleBellsProvider.TripleBellsIntroContainer.prototype.onIntroPageButtonClicked=function(e,i){this.lastTimeline&&(this.lastTimeline.kill(),this.lastTimeline.stop(),delete this.lastTimeline),this.pages.forEach(function(e,t){t!=i?(e.setalpha(0),e.buttons&&e.buttons.forEach(function(e){e.disable(),e.hide()})):(e.setalpha(1),e.buttons&&e.buttons.forEach(function(e){e.enable(),e.show()}))},this),this.buttons.forEach(function(e,t){e.setTextures(e.scope.config[i==t?"checkedTexture":"uncheckedTexture"],e.scope.config.atlas||"intro.json")});var t=new this.timeline;return t.add(this.animateIntroAnimation(i)),t},sna.presentation.tripleBellsProvider.TripleBellsIntroContainer.prototype.animateIntroAnimation=function(e){if(0==this.iface.game.getParameterValue("introScreenAuto"))return new this.timeline;var i=(e+1)%this.pages.length,n=new this.timeline({onComplete:this.animateIntroAnimation,onCompleteParams:[i],onCompleteScope:this});return n.add("start","+=5"),n.call(function(){this.buttons.forEach(function(e,t){e.setTextures(e.scope.config[i==t?"checkedTexture":"uncheckedTexture"],e.scope.config.atlas||"intro.json")})},[],this,"start"),this.pages.forEach(function(e,t){t!=i?n.to(this.pages[t],.01,{alpha:0},"start"):n.to(this.pages[t],.5,{alpha:1},"start")}.bind(this)),this.pages[i]&&this.pages[i].buttons&&(this.pages[i].buttons.forEach(function(e){n.call(e.show,[],e,"start"),n.call(e.enable,[],e,"start")},this),this.pages[e].buttons.forEach(function(e){n.call(e.disable,[],e,"start"),n.call(e.hide,[],e,"start")},this)),this.lastTimeline=n,new this.timeline},sna.presentation.tripleBellsProvider.TripleBellsIntroContainer.prototype.destroyPresentation=function(){this.lastTimeline&&(this.lastTimeline.kill(),this.lastTimeline.stop(),delete this.lastTimeline)},sna.presentation.tripleBellsProvider.TripleBellsIntroContainerFactory=function(e,t,i,n){return new sna.presentation.tripleBellsProvider.TripleBellsIntroContainer(e,t,i,n)},sna.module.tripleBellsProvider.controller(sna.presentation.tripleBellsProvider.TRIPLE_BELLS_INTRO_CONTAINER,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.tripleBellsProvider.TripleBellsIntroContainerFactory]),sna.presentation.tripleBellsProvider.TRIPLE_BELLS_REEL_CONTAINER="TripleBellsReelContainer",sna.presentation.tripleBellsProvider.TripleBellsReelContainer=function(e,t){sna.presentation.slot.CachedReelContainer.call(this,e,t.presentation,t.presentation.timeline),this.timeline=t.presentation.timeline,this.iface=t.iface,this.iface.game.getParameterValue("dontDestroyReelOnNewOutcome")||(this.iface.registerEventCallback("afterSpinStop",this,this.onAfterSpinStop),this.iface.registerEventCallback(sna.service.tripleBellsProvider.events.GAME_TYPE_UPDATED,this,this.onGameTypeUpdated)),this.sound=t.sound,this.game=t.game,this.enabled=!0,this.disabledAnimations={},this.emptyAnimation=this.presentation.createAnimation(this,{variant:"Sequence",children:[]})},sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype=Object.create(sna.presentation.slot.CachedReelContainer.prototype),sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.initPresentation=function(){this.initWildStar(),this.initBackgroundContainer(),this.initSymbolsContainer(),this.prepareMask(),this.createSpinningSymbols(),this.prepareOutcomeSymbols(!1),this.initFrameContainer(),this.initReelLetter(),this.prepareSpinification(),this.initAnimations(),this.scope.config.showIdleTopSymbols&&this.animation("spinStart").setShowIdleTopSymbols(!0),this.scope.config.showIdleBottomSymbols&&this.animation("spinStart").setShowIdleBottomSymbols(!0),this.scope.config.maskNotEnabledByDefault||this.enableMask();var e=this.topSymbols.concat(this.bottomSymbols);angular.forEach(e,function(e){e.show()},this),this.symbolsContainer.allowOverrides=!0,this.initDisabledAnimations()},sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.initDisabledAnimations=function(){this.disableAnimation("winIndividual"),this.disableAnimation("winSum")},sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.onAfterSpinStop=function(){this.createSpinningSymbolsCachedReelContainer(),this.game.getParameterValue("showStaticAfterSpinStop")&&this.showStaticAfterSpinStop()},sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.showStaticAfterSpinStop=function(){this.outcomeSymbols.forEach(function(e){e.showStatic()},this)},sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.createSpinningSymbolsCachedReelContainer=sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.createSpinningSymbols,sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.createSpinningSymbols=function(){this.spinningSymbols.length||this.createSpinningSymbolsCachedReelContainer()},sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.initReelLetter=function(){var e=this.scope.config.letter,t=this.scope.config.letterPosition;void 0!==e&&((e=e[this.scope.model.index]).x=void 0!==t?t.x:0,e.y=void 0!==t?t.y:0,this.addChild(this.presentation.createPresentation(e,this,this.scope.model)))},sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.initWildStar=function(){var e=this.scope.config.wildStar;void 0!==e&&(this.wildStar=this.presentation.createPresentation(e,this,this.scope.model),this.wildStarLight=this.wildStar.children[1],this.addChild(this.wildStar))},sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.initBackgroundContainer=function(){var e=this.scope.config;void 0!==e.background&&(e.background.children[1].id=e.background.children[1].id.replace("<index>",this.scope.config.index),this.background=this.presentation.createPresentation(e.background,this,this.scope.model),this.reelLight=this.background.children[1],this.addChild(this.background))},sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.initFrameContainer=function(){var e=this.scope.config;void 0!==e.frame&&(this.frame=this.presentation.createPresentation(e.frame,this,this.scope.model),this.addChild(this.frame))},sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.enableMask=function(){this.reelMask&&(this.scope.config.fullReelMask?this.mask=this.reelMask:this.symbolsContainer.mask=this.reelMask,this.reelMask.visible=!0)},sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.disableMask=function(){var e=this.scope.config,t=void 0===e.hideMask||1==e.hideMask;this.reelMask&&t&&(e.fullReelMask?this.mask=null:this.symbolsContainer.mask=null,this.reelMask.visible=!1)},sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.onGameTypeUpdated=function(){this.enableAnimations();var e=this.scope.model.index,t=this.game.getActiveGameType();void 0!==t.activeReels&&(e<t.activeReels?this.enable():this.disable())},sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.enable=function(){this.enabled=!0,this.enableAnimations(),this.enableSymbols(),this.setEnabledPresentation()},sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.enableAnimations=function(){angular.forEach(this.animations,function(e,t){this.enableAnimation(t)},this)},sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.enableSymbols=function(){for(var e=0;e<this.scope.model.config.size;e++)this.getSymbolPresentationOffset(e)&&this.getSymbolPresentationOffset(e).enable()},sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.setEnabledPresentation=function(){this.wildStarLight&&this.wildStarLight.setalpha(1),this.reelLight&&this.reelLight.setalpha(1);for(var e=0;e<this.scope.model.config.size;e++)this.getSymbolPresentationOffset(e)&&this.getSymbolPresentationOffset(e).setEnabledPresentation()},sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.disable=function(){this.enabled=!1,this.disableAnimations(),this.disableSymbols(),this.setDisabledPresentation()},sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.disableAnimations=function(e){angular.forEach(this.animations,function(e,t){this.disableAnimation(t)},this)},sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.disableSymbols=function(e){for(var t=0;t<this.scope.model.config.size;t++)this.getSymbolPresentationOffset(t)&&this.getSymbolPresentationOffset(t).disable()},sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.setDisabledPresentation=function(){this.wildStarLight&&this.wildStarLight.setalpha(0),this.reelLight&&this.reelLight.setalpha(0);for(var e=0;e<this.scope.model.config.size;e++)this.getSymbolPresentationOffset(e)&&this.getSymbolPresentationOffset(e).setDisabledPresentation()},sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.disableAnimation=function(e){this.animations[e]!==this.emptyAnimation&&(this.disabledAnimations[e]=this.animations[e],this.animations[e]=this.emptyAnimation)},sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.enableAnimation=function(e){void 0!==this.disabledAnimations[e]&&(this.animations[e]=this.disabledAnimations[e])},sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.getSymbolPosition=function(e){var t={x:0};return t.y=(e-(this.scope.model.size/2-.5))*this.symbolDistance*this.presentation.globalScale,t},sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.removeBlurFromSpinningSymbols=function(){this.spinningSymbols.forEach(function(e){var t=e.scope.config;t.type===sna.presentation.SPRITE&&void 0!==t.noBlurTexture&&e.setTexture(t.noBlurTexture,t.atlas)},this)},sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.destroyPresentationCachedReel=sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.destroyPresentation,sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype.destroyPresentation=function(){this.destroyPresentationCachedReel(),this.iface.unregisterEventCallback("afterSpinStop",this,this.onAfterSpinStop),this.iface.unregisterEventCallback(sna.service.tripleBellsProvider.events.GAME_TYPE_UPDATED,this,this.onGameTypeUpdated),this.destroy({children:!0}),this.spinningSymbols=[],this.outcomeSymbols=[]},sna.presentation.tripleBellsProvider.TripleBellsReelContainerFactory=function(e,t){return new sna.presentation.tripleBellsProvider.TripleBellsReelContainer(e,t)},sna.module.slot.controller(sna.presentation.tripleBellsProvider.TRIPLE_BELLS_REEL_CONTAINER,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.tripleBellsProvider.TripleBellsReelContainerFactory]),sna.presentation.tripleBellsProvider.TRIPLE_BELLS_BIG_WIN_ANIMATION="TripleBellsBigWinAnimation",sna.presentation.tripleBellsProvider.TripleBellsBigWinAnimation=function(e,t){this.scope=e,this.presentation=t.presentation,this.timeline=t.presentation.timeline,this.game=t.game,this.winValues=[],this.winDurations=[],this.activeAnimations=[],this.init()},sna.presentation.tripleBellsProvider.TripleBellsBigWinAnimation.prototype=new sna.presentation.Animation({},{}),sna.presentation.tripleBellsProvider.TripleBellsBigWinAnimation.prototype.animateAnimation=sna.presentation.tripleBellsProvider.TripleBellsBigWinAnimation.prototype.animate,sna.presentation.tripleBellsProvider.TripleBellsBigWinAnimation.prototype.init=function(){this.winValues=this.presentation.scope.config.parameters.bigWinValues,sna.service.util.sortIntArr(this.winValues),this.winDurations=this.presentation.scope.config.parameters.bigWinDurations},sna.presentation.tripleBellsProvider.TripleBellsBigWinAnimation.prototype.animate=function(e){this.winValues=this.game.getBigWinThresholds()||[],this.activeAnimations=[];var t=this.animateAnimation(e),i=this.scope.parent,e=this.scope.config;return e.target&&(i=this.presentation.parseValue(this,e.target)),this.scope.config.useDurations?this.createByTimes():this.scope.config.useValues?t.eventCallback("onUpdate",this.onGetNumber,[i],this):this.createSingle(),t},sna.presentation.tripleBellsProvider.TripleBellsBigWinAnimation.prototype.onGetNumber=function(e){for(var t=0;t<this.winValues.length;t++){if(!this.activeAnimations[t]&&0==t)return this.presentation.createAnimationTimeline("bigWin_"+t,0,!1,!0),void(this.activeAnimations[t]=!0);if(e.getnumber()>this.winValues[t]*this.game.getTotalBetInCoins()&&!this.activeAnimations[t])return this.presentation.createAnimationTimeline("bigWin_"+t,0,!1,!0),void(this.activeAnimations[t]=!0)}},sna.presentation.tripleBellsProvider.TripleBellsBigWinAnimation.prototype.createSingle=function(){for(var e=0;e<this.winValues.length;e++)if(this.getWinValue()<this.winValues[e]*this.game.getTotalBetInCash())return void this.presentation.createAnimationTimeline("bigWin_"+(e-1),0,!1,!0);this.presentation.createAnimationTimeline("bigWin_"+(e-1),0,!1,!0)},sna.presentation.tripleBellsProvider.TripleBellsBigWinAnimation.prototype.createByTimes=function(){var e=0;if(this.scope.config.isLegacyBigWin)for(var t=0;t<=this.presentation.scope.game.bigWinIndex;t++)this.lastTimeline.call(function(e){this.presentation.createAnimationTimeline("bigWin_"+e,0,!1,!0)},[t],this,this.winDurations[t]);else if(this.scope.config.isQuattro){e=this.scope.model.bigWinIndex;this.lastTimeline.call(function(e){this.presentation.createAnimationTimeline("bigWin_"+e,0,!1,!0,n)},[e],this,this.winDurations[e])}else{for(var i=void 0===this.game.getActiveGameType().activeMachines?1:this.game.getActiveGameType().activeMachines.length-1,t=0;t<this.winDurations.length;t++)this.winValues[t]*this.game.getTotalBetInCash()/i<=this.getWinValue()&&(e=t);var n=null;this.scope.config.root&&(n=this.presentation.parseValue(this,this.scope.config.root)),this.winValues[e]*this.game.getTotalBetInCash()/i<=this.getWinValue()&&this.lastTimeline.call(function(e){this.presentation.createAnimationTimeline("bigWin_"+e,0,!1,!0,n)},[e],this,this.winDurations[e])}},sna.presentation.tripleBellsProvider.TripleBellsBigWinAnimation.prototype.getWinValue=function(){return this.scope.model.totalWin||this.game.getTotalWinInCash()},sna.module.tripleBellsProvider.controller(sna.presentation.tripleBellsProvider.TRIPLE_BELLS_BIG_WIN_ANIMATION,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.tripleBellsProvider.TripleBellsBigWinAnimation]),sna.presentation.tripleBellsProvider.TRIPLE_BELLS_SLOT_STOP_ANIMATION="TripleBellsSlotStopAnimation",sna.presentation.tripleBellsProvider.TripleBellsSlotStopAnimation=function(e,t,i){this.scope=e,this.presentation=t,this.timelineFactory=i,this.stopDelays=null,this.iface=t.main.iface,this.game=t.main.game,this.name=sna.presentation.tripleBellsProvider.SLOT_STOP_ANIMATION},sna.presentation.tripleBellsProvider.TripleBellsSlotStopAnimation.prototype.animate=function(e){switch(e.name){case"spinStop":return this.animateSpinStop(e);case"fastSpinStop":return this.animateFastSpinStop(e)}},sna.presentation.tripleBellsProvider.TripleBellsSlotStopAnimation.prototype.setStopDelays=function(e){this.stopDelays=e||null},sna.presentation.tripleBellsProvider.TripleBellsSlotStopAnimation.prototype.animateSpinStop=function(c){var p=this.scope.parent,u=this.scope.parent.scope.config,d=new this.timelineFactory,m=0,f=0,g=!0,e=this.changeStopOrder(p.reels),v=0,t=this.iface.scope.game.winnings;return t&&t.length&&t.forEach(function(e){e.winPositions&&e.winPositions.length>v&&(v=e.winPositions.length)},this),angular.forEach(e,function(t,e){var i=t.animation("spinStop").animate(c),n=t.scope.model.spinification,s=t.scope.config.staxxGame;void 0!==p.scope.model.enabled&&!1===p.scope.model.enabled&&(n=!1);var r=this.presentation.parseValue(this,u.reelEndStagger)||u.reelStagger||0;r*=e,u.overrideStoppingSequence&&(r=this.overrideStopSequence(e)),u.spinificationRespinDelay&&this.scope.model.slot.customRespin&&this.scope.model.slot.wasRespinActive&&(r=u.spinificationRespinDelay[e]);var o,a,l,h=t.scope.model.spinificationType&&"regular"!=t.scope.model.spinificationType?u.customSpinificationStaggers:u.spinificationStaggers;s&&(h=this.iface.getSpinificationStaggerType(t,u)),n&&h&&this.presentation.parseValue(this,h[m])&&t.enabled&&!t.scope.model.disabled?(o=f,this.presentation.parseValue(this,"dontUseEnableSpinificationDelay")&&(o=0),t.reelStopAnimation&&delete t.reelStopAnimation,n=0,this.iface.game.getParameterValue("spinParameters")&&this.iface.game.getParameterValue("spinParameters").graduallySlowSpinification&&(n=this.iface.game.getParameterValue("spinParameters").graduallySlowSpinification.symbols/5),g&&(g=!1,n=0,(l=this.startSpinification(t,m,u)).delay(r+o),d.add(l,0,!1,0)),s&&4==e&&v<e||(this.presentation.parseValue(this,"dontUseTotalSpinificationDelay")?f=this.presentation.parseValue(this,h[m]):f+=this.presentation.parseValue(this,h[m])),(l=this.enableSpinification(t,m,u))&&!u.spinificationHoldDisabled&&(h=p.reels.filter(function(e){return e.scope.model.index<t.scope.model.index}),a=[],h.forEach(function(e){a.push(this.holdSpinification(e))}.bind(this)),l.add(a,0,!1,0)),l.delay(r+o+n),d.add(l,0,!1,0),l=this.disableSpinification(t,m,u),r+=f,l.delay(r),d.add(l,0,!1,0),t.scope.model.spinificationIndex=m,m++,u.delayBetweenSpinifications&&(f+=u.delayBetweenSpinifications)):this.stopDelays?r=this.stopDelays[e]:r+=s?0:f,t.scope.model.spinification&&(t.reelStopAnimation=i),i.delay(r),d.add(i,0,!1,0)},this),this.stopTimeline=d},sna.presentation.tripleBellsProvider.TripleBellsSlotStopAnimation.prototype.changeStopOrder=function(e){var t=this.scope.parent.scope.config.reelStopSequence;if(void 0===t)return e;var i=[];if((t=this.presentation.parseValue(this,t)).length)for(var n=0;n<t.length;n++)i.push(this.scope.parent.reels[t[n]]);return i},sna.presentation.tripleBellsProvider.TripleBellsSlotStopAnimation.prototype.animateFastSpinStop=function(i){var e=this.scope.parent,t=(this.scope.config,new this.timelineFactory),n=[];return angular.forEach(e.reels,function(e){var t=e.animation("fastSpinStop").animate(i);n.push(t);e=this.presentation.createAnimationTimeline("spinificationFastEnd",0,!1,!0,e).animation;n.push(e)},this),this.game.getParameterValue("updateFooterBalanceOnFastWinStop")&&0<Number(this.iface.getTotalWin())&&this.iface.updateWrapperGameMessage("FAST_WIN",this.iface.getTotalWin()),t.add(n,0,!1,0),t},sna.presentation.tripleBellsProvider.TripleBellsSlotStopAnimation.prototype.startSpinification=function(e,t,i){var n=new this.timelineFactory;return n.call(function(){this.presentation.createAnimationTimeline("spinificationBeforeStart",0,!1,!0,null)},[],e),n},sna.presentation.tripleBellsProvider.TripleBellsSlotStopAnimation.prototype.enableSpinification=function(e,t,i){var n=new this.timelineFactory;return n.call(function(){this.presentation.createAnimationTimeline("spinificationStart",0,!1,!0,this),this.scope.model.spinificationInProgress=!0,i.playGlobalSpinificationAnimations&&(this.presentation.createAnimationTimeline("spinificationStartGlobal"+e.scope.model.index,0,!1,!0,null),this.presentation.createAnimationTimeline("spinificationStartGlobal",0,!1,!0,null))},[],e),n.call(function(){this.enableSpinificationFastStop()},[],this),n},sna.presentation.tripleBellsProvider.TripleBellsSlotStopAnimation.prototype.disableSpinification=function(t,e,i){var n=new this.timelineFactory;return n.call(function(){var e=0;this.iface.game.getParameterValue("spinParameters")&&this.iface.game.getParameterValue("spinParameters").graduallySlowSpinification&&(e=this.iface.game.getParameterValue("spinParameters").graduallySlowSpinification.symbols/2.5),this.presentation.createAnimationTimeline("spinificationEnd",e,!1,!0,this),this.scope.model.spinificationInProgress=!1,i.playGlobalSpinificationAnimations&&(this.presentation.createAnimationTimeline("spinificationEndGlobal"+t.scope.model.index,0,!1,!0,null),this.presentation.createAnimationTimeline("spinificationEndGlobal",0,!1,!0,null))},[],t),n},sna.presentation.tripleBellsProvider.TripleBellsSlotStopAnimation.prototype.holdSpinification=function(e,t,i){var n=new this.timelineFactory;return n.call(function(){this.presentation.createAnimationTimeline("spinificationHold",0,!1,!0,this)},[],e),n},sna.presentation.tripleBellsProvider.TripleBellsSlotStopAnimation.prototype.enableSpinificationFastStop=function(){var e=this.iface.scope.layout.has(sna.service.ENVIRONMENT_MOBILE);this.iface.isMinimumSpinDurationExpired()&&(!this.scope.model.slot.feature||this.scope.model.slot.feature&&this.scope.model.slot.feature.start)&&this.iface.updateWrapperModel({elements:{BUTTON_SPIN_STOP:{visible:!e,enabled:!this.scope.model.slot.disableSlamStop},BUTTON_SPIN:{visible:!1,enabled:!1}}})},sna.module.slot.controller(sna.presentation.tripleBellsProvider.TRIPLE_BELLS_SLOT_STOP_ANIMATION,[sna.service.SCOPE,sna.service.PRESENTATION,sna.service.TIMELINE,sna.presentation.tripleBellsProvider.TripleBellsSlotStopAnimation]),sna.presentation.tripleBellsProvider.TRIPLE_BELLS_PAYOUT_CONTAINER="TripleBellsPayoutContainer",sna.presentation.tripleBellsProvider.TripleBellsPayoutContainer=function(e,t){sna.presentation.slot.PayoutContainer.call(this,e,t.presentation,t.presentation.timeline,t.iface),this.game=t.game,this.iface=t.iface,this.images=[]},sna.presentation.tripleBellsProvider.TripleBellsPayoutContainer.prototype=Object.create(sna.presentation.slot.PayoutContainer.prototype),sna.presentation.tripleBellsProvider.TripleBellsPayoutContainer.prototype.initPresentation=function(){var e=this.scope.config,t=this.scope.model,i=e.payout,n=!i||i.useTotalBet,s=(this.game.getPayoutBet(n),t.symbols[e.symbol]);t.showPayoutsInCoins;if(e.image&&(e.image.constructor===Array?angular.forEach(e.image,function(e){e=this.presentation.createPresentation(e,this,t);e&&(this.images.push(e),this.addChild(e))},this):(n=this.presentation.createPresentation(e.image,this,t),this.images.push(n),this.addChild(n))),s&&s.payouts&&i)if(i.tag="Payout",this.index=0,this.scope.config.reversed)for(var r=s.payouts.length-1;0<=r;r--){var o=s.payouts[r],a=r;this.addPayoutPresentation(o,a)}else for(r=0;r<s.payouts.length;r++){o=s.payouts[r],a=r;this.addPayoutPresentation(o,a)}!0!==e.noAnimations&&this.initAnimations(),!0!==e.skipIdAssignment&&(e=(e=this.scope.config.reelset||"reels").charAt(0).toUpperCase()+e.substr(1),e=this.scope.config.symbol+"PayoutContainer"+e,this.presentation.idCache[e]=this),this.iface.registerEventCallback(sna.service.tripleBellsProvider.events.CASH_COIN_TOGGLE,this,this.updatePresentation)},sna.presentation.tripleBellsProvider.TripleBellsPayoutContainer.prototype.addPayoutPresentation=function(e,t){var i=this.scope.config,n=this.scope.model,s=i.payout,r=!s||s.useTotalBet,o=this.game.getPayoutBet(r),r=(n.symbols[i.symbol],n.showPayoutsInCoins);(0<e||e.constructor===Object)&&(n=null,this.index++,0<e&&(n=r?e:e*o),e.constructor===Object&&void 0!==e.min&&void 0!==e.max&&(e.separator=void 0!==e.separator?e.separator:" ",n=r?e.min+e.separator+e.max:e.min*o+e.separator+e.max*o),payoutModel={index:this.index,count:t+1,multiplier:e,win:n},void 0!==i.customProps&&void 0!==i.customProps[t+1]&&void 0!==i.customProps[t+1].scale&&(s.scale=i.customProps[t+1].scale),s=this.presentation.createPresentation(s,this,payoutModel),this.addChild(s),this.payouts[t+1]=s)},sna.presentation.tripleBellsProvider.TripleBellsPayoutContainer.prototype.initAnimations=function(){var e=this.scope.config,t=this.scope.model,i={variant:"Sequence",name:"winIndividual",repeat:3,children:["call:switchOff","delay:0.15","call:switchOn","delay:0.15"]};this.animation(i.name,this.presentation.createAnimation(this,i));i={variant:"Sequence",name:"winSum",children:[{variant:"Sequence",repeat:3,children:["call:switchOff","delay:0.15","call:switchOn","delay:0.15"]}]};this.animation(i.name,this.presentation.createAnimation(this,i));i={variant:"Sequence",name:"winFullAsync",children:["call:switchOff"]};this.animation(i.name,this.presentation.createAnimation(this,i));i={variant:"Sequence",name:"spinStartAsync",children:["call:switchOn"]};this.animation(i.name,this.presentation.createAnimation(this,i)),angular.forEach(t.symbols[e.symbol].payouts,function(e,t){var i={variant:"Sequence",name:"winIndividual"+ ++t,repeat:3,children:["call:switchOff:"+t,"delay:0.15","call:switchOn:"+t,"delay:0.15"]};this.animation(i.name,this.presentation.createAnimation(this,i));t={variant:"Sequence",name:"winSum"+t,children:[{variant:"Sequence",repeat:3,children:["call:switchOff:"+t,"delay:0.15","call:switchOn:"+t,,"delay:0.15"]}]};this.animation(t.name,this.presentation.createAnimation(this,t))},this)},sna.presentation.tripleBellsProvider.TripleBellsPayoutContainer.prototype.switchOff=function(e){var t=this.images[1];t&&t.setalpha(0),void 0!==e?this.payouts[e]&&this.payouts[e].children[1]&&this.payouts[e].children[1].setalpha(0):angular.forEach(this.payouts,function(e){e.children[1]&&e.children[1].setalpha(0)},this)},sna.presentation.tripleBellsProvider.TripleBellsPayoutContainer.prototype.switchOn=function(e){var t=this.images[1];t&&t.setalpha(1),void 0!==e?this.payouts[e]&&this.payouts[e].children[1]&&this.payouts[e].children[1].setalpha(1):angular.forEach(this.payouts,function(e){e.children[1]&&e.children[1].setalpha(1)},this)},sna.presentation.tripleBellsProvider.TripleBellsPayoutContainer.prototype.positionElement=function(e){var t=this.scope.config,i=e.scope.config;if("Payout"==i.tag){var n=e.scope.model;if(t.customProps&&t.customProps[n.count])return e.x=t.customProps[n.count].x*this.presentation.globalScale,void(e.y=t.customProps[n.count].y*this.presentation.globalScale);n=n.index,t=t.vSpacing||0;return e.y=n*t*this.presentation.globalScale,void(e.x=i.x)}this.positionElementContainer(e)},sna.presentation.tripleBellsProvider.TripleBellsPayoutContainer.prototype.updatePresentation=function(e){this.scope.model;for(var t=this.scope.config,i=t.payout,n=!i||i.useTotalBet,s=this.game.getPayoutBet(n),r=0,o=this.payouts.length-1;0<=o;o--){var a=this.payouts[o];if(a){var l,h,c=null,p=a.scope.model,u=p.multiplier;t.miniPaytable&&u.text?(l=u.min*s,c=(l=this.iface.formatNumberString(l,i.maxDigits||null,i.toFixed))+u.text):u.constructor===Object?(c="",u.min&&(h=this.scope.model.showValuesInCash?(u.min*s).toFixed(2):u.min*s,c+=h=this.iface.formatNumberString(h,i.maxDigits||null,i.toFixed)),u.separator&&(c+=u.separator),u.max&&(h=u.max*s,c+=h=this.iface.formatNumberString(h,i.maxDigits||null,i.toFixed))):(c=u*s,isNaN(c)&&(c=this.iface.formatNumberString(c,i.maxDigits||null,i.toFixed))),p.win=c;try{o==this.payouts.length-1&&a.children&&0<a.children.length&&(r=(a.children[0].width-a.children[1].width)/2+a.children[0].width/2),a.x=r||0,a.updatePresentation(),this.positionElement(a)}catch(e){}}}},sna.presentation.tripleBellsProvider.TripleBellsPayoutContainer.prototype.destroyPayoutContainer=sna.presentation.tripleBellsProvider.TripleBellsPayoutContainer.prototype.destroy,sna.presentation.tripleBellsProvider.TripleBellsPayoutContainer.prototype.destroy=function(e){this.iface.unregisterEventCallback(sna.service.tripleBellsProvider.events.CASH_COIN_TOGGLE,this,this.updatePresentation),this.iface.unregisterAutoUpdate(this),this.destroyPayoutContainer(e)},sna.presentation.tripleBellsProvider.TripleBellsPayoutContainerFactory=function(e,t){return new sna.presentation.tripleBellsProvider.TripleBellsPayoutContainer(e,t)},sna.module.slot.controller(sna.presentation.tripleBellsProvider.TRIPLE_BELLS_PAYOUT_CONTAINER,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.tripleBellsProvider.TripleBellsPayoutContainerFactory]),sna.presentation.tripleBellsProvider.TRIPLE_BELLS_SYMBOL_PAYOUT_CONTAINER="TripleBellsSymbolPayoutContainer",sna.presentation.tripleBellsProvider.TripleBellsSymbolPayoutContainer=function(e,t){sna.presentation.slot.PayoutContainer.call(this,e,t.presentation,t.presentation.timeline,t.iface),this.game=t.game,this.iface=t.iface,this.images=[]},sna.presentation.tripleBellsProvider.TripleBellsSymbolPayoutContainer.prototype=Object.create(sna.presentation.slot.PayoutContainer.prototype),sna.presentation.tripleBellsProvider.TripleBellsSymbolPayoutContainer.prototype.initPresentation=function(){var e=this.scope.config,t=this.scope.model,i=e.payout,n=!i||i.useTotalBet,s=(this.game.getPayoutBet(n),t.symbols[e.symbol]);t.showPayoutsInCoins;if(e.image&&(e.image.constructor===Array?angular.forEach(e.image,function(e){e=this.presentation.createPresentation(e,this,t);e&&(this.images.push(e),this.addChild(e))},this):(n=this.presentation.createPresentation(e.image,this,t),this.images.push(n),this.addChild(n))),s&&s.payouts&&i)if(i.tag="Payout",this.index=0,this.scope.config.reversed)for(var r=s.payouts.length-1;0<=r;r--){var o=s.payouts[r],a=r;this.addPayoutPresentation(o,a)}else for(r=0;r<s.payouts.length;r++){o=s.payouts[r],a=r;this.addPayoutPresentation(o,a)}for(var l=null,h="",r=this.payouts.length-1;0<=r;r--)(o=this.payouts[r])&&(null==l&&(l=JSON.parse(JSON.stringify(o.children[0].scope.config))),h.length&&(h+="\n"),h+=o.children[0].text+" "+o.children[1].text);l&&(l.text=h,l.lineHeight=this.scope.config.vSpacing||35,this.scope.config.maxWidth&&(l.maxWidth=this.scope.config.maxWidth),delete l.initialConfig,delete l.referenceConfig,delete l.anchorAlign,delete l.x,delete l.y,this.textPresentation=this.presentation.createPresentation(l,this,this.scope.model),this.textPresentation.setY(this.textPresentation.height/2),this.addChild(this.textPresentation)),!0!==e.noAnimations&&this.initAnimations(),!0!==e.skipIdAssignment&&(e=(e=this.scope.config.reelset||"reels").charAt(0).toUpperCase()+e.substr(1),e=this.scope.config.symbol+"PayoutContainer"+e,this.presentation.idCache[e]=this),this.iface.registerEventCallback(sna.service.tripleBellsProvider.events.CASH_COIN_TOGGLE,this,this.updatePresentation)},sna.presentation.tripleBellsProvider.TripleBellsSymbolPayoutContainer.prototype.addPayoutPresentation=function(e,t){var i=this.scope.config,n=this.scope.model,s=i.payout,r=!s||s.useTotalBet,o=this.game.getPayoutBet(r),r=(n.symbols[i.symbol],n.showPayoutsInCoins);(0<e||e.constructor===Object)&&(n=null,this.index++,0<e&&(n=r?e:e*o),e.constructor===Object&&void 0!==e.min&&void 0!==e.max&&(e.separator=void 0!==e.separator?e.separator:" ",n=r?e.min+e.separator+e.max:e.min*o+e.separator+e.max*o),payoutModel={index:this.index,count:t+1,multiplier:e,win:n},void 0!==i.customProps&&void 0!==i.customProps[t+1]&&void 0!==i.customProps[t+1].scale&&(s.scale=i.customProps[t+1].scale),s=this.presentation.createPresentation(s,this,payoutModel),this.payouts[t+1]=s)},sna.presentation.tripleBellsProvider.TripleBellsSymbolPayoutContainer.prototype.positionElement=function(e){var t=this.scope.config,i=e.scope.config;if("Payout"==i.tag){var n=e.scope.model;if(t.customProps&&t.customProps[n.count])return e.x=t.customProps[n.count].x*this.presentation.globalScale,void(e.y=t.customProps[n.count].y*this.presentation.globalScale);n=n.index,t=t.vSpacing||0;return e.y=n*t*this.presentation.globalScale,void(e.x=i.x)}this.positionElementContainer(e)},sna.presentation.tripleBellsProvider.TripleBellsSymbolPayoutContainer.prototype.updatePresentation=function(e){this.scope.model;var o=this.scope.config,a=o.payout,t=!a||a.useTotalBet,l=this.game.getPayoutBet(t);if(angular.forEach(this.payouts,function(e){var t,i,n=null,s=e.scope.model,r=s.multiplier;o.miniPaytable&&r.text?(t=Number(r.min*l).toFixed(2),n=(t=this.iface.formatNumberString(t,a.maxDigits||null,a.toFixed))+r.text):r.constructor===Object?(n="",r.min&&(i=r.min*l,n+=i=this.iface.formatNumberString(i,a.maxDigits||null,a.toFixed)),r.separator&&(n+=r.separator),r.max&&(i=r.max*l,n+=i=this.iface.formatNumberString(i,a.maxDigits||null,a.toFixed))):(n=r*l,isNaN(n)&&(n=this.iface.formatNumberString(n,a.maxDigits||null,a.toFixed))),s.win=n,e.updatePresentation()},this),this.textPresentation){for(var i="",n=this.payouts.length-1;0<=n;n--){var s=this.payouts[n];s&&(i.length&&(i+="\n"),i+=s.children[0].text+" "+s.children[1].text)}this.textPresentation.setText(i),this.textPresentation.setY(this.textPresentation.height/2)}},sna.presentation.tripleBellsProvider.TripleBellsSymbolPayoutContainer.prototype.destroyPayoutContainer=sna.presentation.tripleBellsProvider.TripleBellsSymbolPayoutContainer.prototype.destroy,sna.presentation.tripleBellsProvider.TripleBellsSymbolPayoutContainer.prototype.destroy=function(){this.iface.unregisterEventCallback(sna.service.tripleBellsProvider.events.CASH_COIN_TOGGLE,this,this.updatePresentation),this.destroyPayoutContainer()},sna.presentation.tripleBellsProvider.TripleBellsSymbolPayoutContainerFactory=function(e,t){return new sna.presentation.tripleBellsProvider.TripleBellsSymbolPayoutContainer(e,t)},sna.module.slot.controller(sna.presentation.tripleBellsProvider.TRIPLE_BELLS_SYMBOL_PAYOUT_CONTAINER,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.tripleBellsProvider.TripleBellsSymbolPayoutContainerFactory]),sna.presentation.tripleBellsProvider.TRIPLE_BELLS_STAKELOGIC_LOADER_ANIMATION="TripleBellsStakelogicLoaderAnimation",sna.presentation.tripleBellsProvider.TripleBellsStakelogicLoaderAnimation=function(e,t){this.scope=e,this.presentation=t.presentation,this.timeline=t.presentation.timeline,this.game=t.game,this.iface=t.iface,this.communicaiton=t.communication},sna.presentation.tripleBellsProvider.TripleBellsStakelogicLoaderAnimation.prototype=new sna.presentation.Animation({},{}),sna.presentation.tripleBellsProvider.TripleBellsStakelogicLoaderAnimation.prototype.animate=function(e){var t=new this.presentation.timeline,i=this.presentation.globalScale,n=this.presentation.getById("stakeLogo"),s=this.presentation.getById("logicLogo"),r=this.presentation.getById("thinkBigger"),o=this.presentation.getById("rLogo");return t.call(n.setalpha,[1],n),t.call(n.setX,[165*i],n),t.call(s.setalpha,[1],s),t.call(s.setX,[-95*i],s),t.add("start"),t.to(n,.5,{setX:-125*i,easy:Sine.easeInOut},"start"),t.to(s,.5,{setX:155*i,easy:Sine.easeInOut},"start"),t.to(o,.5,{alpha:1},"start+=0.3"),r&&t.to(r,.8,{alpha:1},"start+=0.8"),t},sna.module.tripleBellsProvider.controller(sna.presentation.tripleBellsProvider.TRIPLE_BELLS_STAKELOGIC_LOADER_ANIMATION,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.tripleBellsProvider.TripleBellsStakelogicLoaderAnimation]),sna.presentation.tripleBellsProvider.TRIPLE_BELLS_MACHINE_CONTAINER="TripleBellsMachineContainer",sna.presentation.tripleBellsProvider.TripleBellsMachineContainer=function(e,t){sna.presentation.LayerContainer.call(this,e,t.presentation),this.timeline=t.presentation.timeline,this.iface=t.iface,this.game=t.game,this.disabledAnimations={},this.emptyAnimation=this.presentation.createAnimation(this,{variant:"Sequence",children:[]}),this.iface.registerEventCallback(sna.service.tripleBellsProvider.events.GAME_TYPE_UPDATED,this,this.onGameTypeUpdated)},sna.presentation.tripleBellsProvider.TripleBellsMachineContainer.prototype=Object.create(sna.presentation.LayerContainer.prototype),sna.presentation.tripleBellsProvider.TripleBellsMachineContainer.prototype.initPresentationLayerContainer=sna.presentation.tripleBellsProvider.TripleBellsMachineContainer.prototype.initPresentation,sna.presentation.tripleBellsProvider.TripleBellsMachineContainer.prototype.initPresentation=function(){this.initPresentationLayerContainer(),this.machineId=this.scope.config.machineId;var e=this.scope.config.catchAnimations;e.constructor===Object?angular.forEach(e,function(e){this.createDefaultAnimations(e)},this):this.createDefaultAnimations(e),this.scope.config.disabled&&this.disableMachine()},sna.presentation.tripleBellsProvider.TripleBellsMachineContainer.prototype.createDefaultAnimations=function(e){for(var t=0;t<e.length;t++){var i,n=e[t];this.animation(n)||(i=this.presentation.createAnimation(this,{variant:"Group",name:n,children:["children:"+n+":cascade"]}),this.animation(n,i))}},sna.presentation.tripleBellsProvider.TripleBellsMachineContainer.prototype.onGameTypeUpdated=function(){this.enableAnimations();var e=this.game.getActiveGameType();e.activeMachines&&(-1!==e.activeMachines.indexOf(this.machineId)?this.enableMachine():this.disableMachine())},sna.presentation.tripleBellsProvider.TripleBellsMachineContainer.prototype.enableMachine=function(){this.enabled=!0,this.enableAnimations(),this.presentation.createAnimationTimeline("switchOn",0,!1,!0,this),this.presentation.createAnimationTimeline("_enableMachine",0,!1,!0,this)},sna.presentation.tripleBellsProvider.TripleBellsMachineContainer.prototype.disableMachine=function(e){this.enabled=!1,this.presentation.createAnimationTimeline("switchOff",0,!1,!0,this),this.presentation.createAnimationTimeline("_disableMachine",0,!1,!0,this),this.disableAnimations(e)},sna.presentation.tripleBellsProvider.TripleBellsMachineContainer.prototype.enableAnimations=function(){angular.forEach(this.animations,function(e,t){this.enableAnimation(t)},this)},sna.presentation.tripleBellsProvider.TripleBellsMachineContainer.prototype.disableAnimations=function(n){angular.forEach(this.animations,function(e,t){var i=this.scope.config.catchAnimations;i.constructor===Object?(n=n||"default",angular.forEach(i[n],function(e){this.disableAnimation(e)},this)):i&&-1!==i.indexOf(t)&&this.disableAnimation(t)},this)},sna.presentation.tripleBellsProvider.TripleBellsMachineContainer.prototype.disableAnimation=function(e){this.animations[e]!==this.emptyAnimation&&(this.disabledAnimations[e]=this.animations[e],this.animations[e]=this.emptyAnimation)},sna.presentation.tripleBellsProvider.TripleBellsMachineContainer.prototype.enableAnimation=function(e){void 0!==this.disabledAnimations[e]&&(this.animations[e]=this.disabledAnimations[e])},sna.presentation.tripleBellsProvider.TripleBellsMachineContainerFactory=function(e,t){return new sna.presentation.tripleBellsProvider.TripleBellsMachineContainer(e,t)},sna.module.slot.controller(sna.presentation.tripleBellsProvider.TRIPLE_BELLS_MACHINE_CONTAINER,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.tripleBellsProvider.TripleBellsMachineContainerFactory]),sna.presentation.tripleBellsProvider.TRIPLE_BELLS_GAMBLE_FEATURE_CONTAINER="TripleBellsGambleFeatureContainer",sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer=function(e,t){sna.presentation.Container.call(this,e,t.presentation),this.name=sna.presentation.tripleBellsProvider.TRIPLE_BELLS_GAMBLE_FEATURE_CONTAINER,this.timeline=t.presentation.timeline,this.iface=t.iface,this.game=t.game,this.sound=t.sound,this.interactive=!0,this.iface.registerEventCallback(sna.service.tripleBellsProvider.events.GAMBLE_FEATURE_PREPARE,this,this.onGambleFeaturePrepare),this.iface.registerEventCallback(sna.service.tripleBellsProvider.events.GAMBLE_FEATURE_PLAY,this,this.onGambleFeaturePlay),this.iface.registerEventCallback(sna.service.tripleBellsProvider.events.GAMBLE_FEATURE_REVEAL,this,this.onGambleFeatureReveal)},sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype=new sna.presentation.Container({},{}),sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype.initPresentationContainer=sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype.initPresentation,sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype.initPresentation=function(){this.initPresentationContainer(),this.initHistoryContainer(),this.initCardContainer(),this.initCoinsContainer(),this.initWinContainer(),this.initWinValueContainer(),this.initGambleLabelContainer(),this.gambleColorPay=this.presentation.getById("gambleColorPay"),this.gambleSuitPay=this.presentation.getById("gambleSuitPay"),this.historySize=this.scope.config.historySize||10,this.scope.config.variant=this.scope.config.variant||"card",this.isVariantCoin="coin"===this.scope.config.variant,this.isVariantCard="card"===this.scope.config.variant,this.cards=["H","D","C","S"],this.animation("gambleFeatureReveal",{animate:this.createGambleFeatureRevelAnimation.bind(this)}),this.animation("gambleFeatureWin",{animate:this.createGambleFeatureWinAnimation.bind(this)}),this.animation("gambleFeatureAfterWin",{animate:this.createGambleFeatureAfterWinAnimation.bind(this)}),this.animation("gambleFeatureLimitReached",{animate:this.createGambleFeatureLimitReachedAnimation.bind(this)}),this.animation("gambleFeatureOptionChosen",{animate:this.createGambleFeatureOptionChosenAnimation.bind(this)}),this.animation("_gambleFeatureReset",{animate:this.createGambleFeatureResetAnimation.bind(this)}),this.animation("gambleFeatureLost",{animate:this.createGambleFeatureLostAnimation.bind(this)})},sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype.createGambleFeatureOptionChosenAnimation=function(){this.userClicked=!0;var e,t,i,n,s=new this.timeline;return this.isVariantCoin&&(e={scale:1},t=new this.timeline({onUpdate:function(){this.idleAnimation.timeScale(e.scale)},onUpdateScope:this}),i=.3,this.scope.config.coinAnimation&&this.scope.config.coinAnimation.slow&&(i=this.scope.config.coinAnimation.slow),n=4,this.scope.config.coinAnimation&&this.scope.config.coinAnimation.duration&&(n=this.scope.config.coinAnimation.duration),t.to(e,n,{scale:i,ease:Power0.easeNone}),s.add(t)),s},sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype.createGambleFeatureResetAnimation=function(){var e,t,i=new this.timeline;return this.gambleColorPay&&this.gambleColorPay.updatePresentation(),this.gambleSuitPay&&this.gambleSuitPay.updatePresentation(),this.isVariantCard&&(e=(t=this.cardContainer).children[0],t=t.children[this.cardIndex],i.call(t.hide,[],t),i.call(e.show,[],e)),this.isVariantCoin&&this.startIdleAnimation(this.iface.gambleFeatureOutcome),i},sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype.initGambleLabelContainer=function(){var e=this.scope.config;e.gambleLabel&&(this.gambleLabel=this.presentation.createPresentation(e.gambleLabel,this,this.scope.model),this.addChild(this.gambleLabel))},sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype.initHistoryContainer=function(){var e=this.scope.config;e.history&&(e=this.presentation.createPresentation(e.history,this,this.scope.model),this.addChild(e),this.historySymbolsContainer=e.children[1])},sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype.initCardContainer=function(){var e=this.scope.config;e.card&&(this.cardContainer=this.presentation.createPresentation(e.card,this,this.scope.model),this.addChild(this.cardContainer))},sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype.initCoinsContainer=function(){var e=this.scope.config;if(e.coins){this.coinsContainer=this.presentation.createPresentation(e.coins,this,this.scope.model),this.addChild(this.coinsContainer);var t=this.coinsContainer.children;this.coinsActive=[];for(var i=[8,7,6,5,4,0,1,2,3],n=0;n<i.length;n++)this.coinsActive.push(t[i[n]].children[1])}},sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype.initWinContainer=function(){var e=this.scope.config;e.win&&(this.winContainer=this.presentation.createPresentation(e.win,this,this.scope.model),this.addChild(this.winContainer))},sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype.initWinValueContainer=function(){var e=this.scope.config;e.winValue&&(this.winValueContainer=this.presentation.createPresentation(e.winValue,this,this.scope.model),this.addChild(this.winValueContainer),this.winValueNumber=this.winValueContainer.children[2],e.winValue.centralizeChildren&&(this.winValueContainer.children[2].scope.config.onSetNumber=!0,this.winValueContainer.children[2].onSetNumberCallback=function(){this.winValueContainer.centralizeChildren()}.bind(this)))},sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype.createGambleFeatureLimitReachedAnimation=function(e){var t,i,n,s=new this.timeline;return(this.gambleOutcome.gambleLimitReached||this.gambleOutcome.consecutiveWinsLimitReached)&&(i=this.gambleOutcome.gambleLimitReached?"GAMBLE_LIMIT":"GAMBLE_ROUNDS_LIMIT",t=this.iface.scope.translations[i],i=("number"==typeof(n=this.iface.getGambleWin())?n.toFixed(2):n).replace(/,/g,""),n=angular.copy(this.scope.model.currency),this.iface.getShowCurrencySignsInGui()||(n.sign=""),i=this.scope.model.showValuesInCash&&"string"!=typeof i?sna.service.util.formatCurrency(i,n):i,t=t.replace("{0}",i.toString()),this.gambleLabel.setText(t),s.call(this.gambleLabel.setalpha,[0],this.gambleLabel),this.winValueContainer&&s.call(this.winValueContainer.hide,[],this.winValueContainer),s.call(this.gambleLabel.show,[],this.gambleLabel),s.to(this.gambleLabel,.2,{alpha:1}),s.set({},{},"+=4.5")),s},sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype.createGambleFeatureLostAnimation=function(e){var t=new this.timeline,i=this.iface.scope.translations.GAMBLE_TOO_BAD||this.iface.scope.translations.GAMBLE_LOSS;return i&&(this.gambleLabel.setText(i),t.call(this.gambleLabel.setalpha,[0],this.gambleLabel),this.winValueContainer&&t.call(this.winValueContainer.hide,[],this.winValueContainer),t.call(this.gambleLabel.show,[],this.gambleLabel),t.to(this.gambleLabel,.2,{alpha:1})),t.set({},{},"+=1.5"),t},sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype.updatePositions=function(e){var t,i,n,s;sna.service.util.returnIf(this,"winValueContainer.scope.config.autoPosition")&&(s=this.winValueContainer.children[1],t=this.winValueContainer.children[2],i=this.game.getParameterValue("markets"),n=this.isVariantCoin?"":":",this.iface.isTargetMarket(i.ukgc)&&this.game.isWinLessThanBet()?s.setText((this.iface.scope.translations.PAYOUT||"PAYOUT")+n+"  "):this.iface.game.getParameterValue("useCurrentWinTextCardGamble")?s.setText(this.iface.scope.translations.CURRENT_WIN_GAMBLE+"  "):s.setText(this.iface.scope.translations.WIN+n+"  "),i=s.width,n=t.width,s.setX(-(s=i+n)/2+i/2+20*this.presentation.globalScale*(this.scope.config.offsetMultiplierEn||1)),t.setX(-s/2+i+n/2+15*this.presentation.globalScale))},sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype.createGambleFeatureAfterWinAnimation=function(e){var t=new this.timeline;return t.to(this.winContainer,.3,{setscale:0}),t.call(this.winContainer.hide,[0],this.winContainer),t},sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype.createGambleFeatureWinAnimation=function(e){var t,i,n=new this.timeline;return n.call(this.gambleLabel.setalpha,[0],this.gambleLabel),n.call(this.gambleLabel.hide,[],this.gambleLabel),n.call(this.winContainer.setscale,[0],this.winContainer),n.call(this.winContainer.setalpha,[1],this.winContainer),n.call(this.winContainer.show,[],this.winContainer),this.winValueContainer&&n.call(this.winValueContainer.show,[],this.winValueContainer),n.add("start"),this.winValueNumber&&(n.call(this.winValueNumber.setnumber,[this.iface.getGambleWin()],this.winValueNumber,"start"),t=this.isVariantCoin?"":":",this.iface.isUKGC()&&this.iface.game.isWinLessThanBet()?i=(this.iface.scope.translations.PAYOUT||"PAYOUT")+t+" ":(i=this.presentation.scope.translations.WIN+t+"  ",this.iface.game.getParameterValue("useCurrentWinTextCardGamble")&&(i=this.presentation.scope.translations.CURRENT_WIN_GAMBLE+"  ")),this.winValueContainer.children[1].setText(i)),n.call(this.winContainer.setscale,[1],this.winContainer,"start"),n.call(this.updatePositions,[],this,"start"),n.call(this.winContainer.hide,[],this.winContainer,"start+=1"),n.call(this.gambleLabel.show,[],this.gambleLabel,"start+=1"),n.call(this.gambleLabel.setalpha,[1],this.gambleLabel,"start+=1"),n},sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype.createGambleFeatureRevelAnimation=function(e){var t,i,n,s,r=new this.timeline;return this.isVariantCoin&&(this.shouldReveal=!0),this.isVariantCard&&(i=(t=this.cardContainer).children[0],n=t.children[this.cardIndex],r.add("back"),s=this.iface.isReplay()?1:0,r.to(t.scale,.3,{x:0},"back+="+s),r.to(t,.3,{y:"-=3"},"back+="+s),r.call(i.hide,[],i),r.call(n.show,[],n),r.add("front"),r.to(t.scale,.3,{x:1},"front"),r.to(t,.3,{y:"+=3"},"front"),this.sound.sounds.GambleCardTurnToReveal&&(r.call(this.sound.playSound,["GambleCardTurnToReveal",!0],this.sound,"back+="+s),r.call(this.sound.stopSound,["GambleCardTurnToReveal"],this.sound,"front+=0.3")),r.add(this.createHistoryUpdateAnimation())),r},sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype.createHistoryUpdateAnimation=function(){var e=new this.timeline;e.add("updateHistory");var t=this.historySymbolsContainer.children,i=t[t.length-1];if(e.to(this.historySymbolsContainer,.2,{setX:(t.length*this.scope.config.history.symbolOffset+this.historySymbolsContainer.scope.config.startX)*this.presentation.globalScale},"updateHistory"),this.historySymbolsContainer.children.length>this.historySize)for(var n=0;n<this.historySymbolsContainer.children.length-this.historySize;n++)e.to(this.historySymbolsContainer.children[n],.1,{alpha:0},"updateHistory");return e.call(i.setalpha,[0],i),e.call(i.show,[],i),e.to(i,.3,{alpha:1}),e},sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype.startIdleAnimation=function(e){if(this.isVariantCoin){this.revealPromise=this.iface.q.defer(),this.idleAnimation&&(this.idleAnimation.stop(),this.idleAnimation.kill(),delete this.idleAnimation),this.isOnRed=!0,this.isOutcomeRed=null,angular.forEach(this.coinsActive,function(e){e.setalpha(0)},this);e=new this.timeline({repeat:-1,yoyo:!0,onRepeat:this.onCoinLoopRepeat,onRepeatParams:["{self}",e],onRepeatScope:this});e.repeatDelay(.018);for(var t=[],i=0;i<this.coinsActive.length;i++){var n=new this.timeline;0==i&&n.set(this.coinsActive[i],{alpha:1}),n.add("start"),n.to(this.coinsActive,.018,{alpha:0},"start"),n.to(this.coinsActive[i],.001,{alpha:1},"start"),t.push(n)}return e.add(t,null,null,.018),this.idleAnimation=e}},sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype.onCoinLoopRepeat=function(e,t){if(this.isOnRed=!this.isOnRed,this.userClicked&&this.sound.playSound("GambleBuildupToReveal"),this.shouldReveal&&this.isOnRed===this.isOutcomeRed){e.stop(),e.kill(),this.coinSideAnimation&&(this.coinSideAnimation.stop(),this.coinSideAnimation.kill(),delete this.coinSideAnimation),angular.forEach(this.coinsActive,function(e){e.setalpha(0)},this),this.coinsActive[this.isOutcomeRed?0:this.coinsActive.length-1].setalpha(1),this.userClicked=!1,this.revealPromise.resolve();e=new this.timeline;return e.add(this.createHistoryUpdateAnimation()),e}},sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype.makeGambleLabelText=function(e){var t=angular.copy(this.scope.model.currency);this.iface.getShowCurrencySignsInGui()||(t.sign="");var i=e.gmblmeter,e=e.maxgmbl,e=this.scope.model.showValuesInCash?sna.service.util.formatCurrency(e*this.game.getCoinValue(),t):e,t=this.iface.scope.translations[this.scope.model.showValuesInCash?"GAMBLE_UP_TO_HEADER_CURRENCY":"GAMBLE_UP_TO"];if(t){var t=t.replace("{0}",i.toString()),i=e.toString()+this.scope.model.currency.sign;return this.scope.model.currency.sign_after||(i=this.scope.model.currency.sign+e.toString()),t="."==(t=t.replace("{0} {1}",i))[t.length-1]?t.slice(0,t.length-1):t}},sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype.onGambleFeaturePrepare=function(e){if(this.userClicked=!1,this.initGambleHistory(e),this.isVariantCard){this.cardContainer.children[0].show();for(var t=1;t<this.cardContainer.children.length;t++)this.cardContainer.children[t].hide()}var i;e.isRestore&&!e.isRestore||(this.gambleLabel.setText(this.makeGambleLabelText(e)),this.gambleLabel.setalpha(1),this.gambleLabel.show()),e.isRestore&&1<e.gmblstep?(this.winValueContainer&&this.winValueContainer.show(),this.winValueNumber&&this.winValueNumber.setnumber(this.iface.getGambleWin())):(this.winValueContainer&&!this.iface.game.getParameterValue("newUI")&&this.winValueContainer.hide(),this.winValueNumber&&(i=angular.copy(this.iface.scope.game.currency),this.game.getParameterValue("overrideCurrencyForGambleDialog")&&"Ft"==i.sign&&(i.sign="HUF"),i=this.iface.getGambleWin(),"."!=(i="Text"==sna.service.util.returnIf(this,"winValueNumber.scope.config.type")?this.iface.getTotalWin():i)[i.length-1]?this.winValueNumber.setnumber(i):this.winValueNumber.setnumber(this.iface.getGambleWin()))),this.winValueContainer&&(i=this.isVariantCoin?"":":",this.iface.isUKGC()&&this.iface.game.isWinLessThanBet()?this.winValueContainer.children[1].setText((this.iface.scope.translations.PAYOUT||"PAYOUT")+i+" "):this.iface.game.getParameterValue("useCurrentWinTextCardGamble")?this.winValueContainer.children[1].setText(this.presentation.scope.translations.CURRENT_WIN_GAMBLE+"  "):this.winValueContainer.children[1].setText(this.presentation.scope.translations.WIN+i+"  "),this.updatePositions()),this.startIdleAnimation(e)},sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype.initGambleHistory=function(e){var t;this.historySymbolsContainer.removeChildren(),this.historySymbolsContainer.setX(this.historySymbolsContainer.scope.config.startX*this.presentation.globalScale||0),e&&e.history&&(t=e.history.split("").reverse().join(""),angular.forEach(t,function(e){this.addHistorySymbolPresentation(e).show()},this),this.historySymbolsContainer.setX((e.history.length*this.scope.config.history.symbolOffset+this.historySymbolsContainer.scope.config.startX)*this.presentation.globalScale))},sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype.onGambleFeatureReveal=function(){if(this.isVariantCoin)return this.revealPromise.promise},sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype.onGambleFeaturePlay=function(e){this.setGambleOutcome(e),this.addHistorySymbolPresentation(e.card)},sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype.setGambleOutcome=function(e){this.gambleOutcome=angular.copy(e),this.cardIndex=this.cards.indexOf(this.gambleOutcome.card)+1,this.isOutcomeRed="H"==this.gambleOutcome.card||"D"==this.gambleOutcome.card},sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype.addHistorySymbolPresentation=function(e){var t=this.scope.config.history,i=angular.copy(t.symbol);i.texture=t.symbols[e],i.x=-this.historySymbolsContainer.children.length*t.symbolOffset;i=this.presentation.createPresentation(i,this.historySymbolsContainer,this.scope.model);return this.historySymbolsContainer.addChild(i),i},sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer.prototype.destroyPresentation=function(){this.iface.unregisterEventCallback(sna.service.tripleBellsProvider.events.GAMBLE_FEATURE_PREPARE,this,this.onGambleFeaturePrepare),this.iface.unregisterEventCallback(sna.service.tripleBellsProvider.events.GAMBLE_FEATURE_PLAY,this,this.onGambleFeaturePlay),this.iface.unregisterEventCallback(sna.service.tripleBellsProvider.events.GAMBLE_FEATURE_REVEAL,this,this.onGambleFeatureReveal)},sna.module.tripleBellsProvider.controller(sna.presentation.tripleBellsProvider.TRIPLE_BELLS_GAMBLE_FEATURE_CONTAINER,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.tripleBellsProvider.TripleBellsGambleFeatureContainer]),sna.presentation.TRIPLEBELLSSCROLLABLE_CONTAINER="TripleBellsScrollableContainer",sna.presentation.TripleBellsScrollableContainer=function(e,t){sna.presentation.ScrollableContainer.call(this,e,t),this.iface=t.iface,this.timeline=t.presentation.timeline,t.iface.registerEventCallback("updateGameRulesButton",this,this.updateHtmlContent)},sna.presentation.TripleBellsScrollableContainer.prototype=Object.create(sna.presentation.ScrollableContainer.prototype),sna.presentation.TripleBellsScrollableContainer.prototype.initContentScrollabelContainer=sna.presentation.TripleBellsScrollableContainer.prototype.initContent,sna.presentation.TripleBellsScrollableContainer.prototype.initContent=function(){this.initContentScrollabelContainer();var e=this.presentation.getById(this.scope.config.gameRulesObject),e=e&&""!=e.scope.config.onPress;this.scope.config.linkId&&!e&&(e=document.getElementsByTagName("BODY")[0],document.getElementById("game-placeholder").getBoundingClientRect(),this.gameRulesObject=this.presentation.getById(this.scope.config.gameRulesObject),this.link=document.createElement("a"),this.link.id=this.scope.config.linkId,this.link.href=this.iface.scope.gameRules,this.link.style.cssText="position: absolute; backgroundColor: #FF00FF; display: none; width: "+this.gameRulesObject.width+"px; height: "+this.gameRulesObject.height+"px; left: -300px; top: "+this.gameRulesObject.y+"px;",this.link.addEventListener("click",function(e){this.worldVisible||e.preventDefault()}.bind(this)),this.link.target="_blank",e.appendChild(this.link)),this.animation("$layoutChanged",{animate:this.onLayoutChanged.bind(this)})},sna.presentation.TripleBellsScrollableContainer.prototype.onLayoutChanged=function(e){var t=new this.timeline;return this.updateHtmlContent(),t},sna.presentation.TripleBellsScrollableContainer.prototype.onContentDragScrollabelContainer=sna.presentation.TripleBellsScrollableContainer.prototype.onContentDrag,sna.presentation.TripleBellsScrollableContainer.prototype.onContentDrag=function(e){this.onContentDragScrollabelContainer(e),this.updateHtmlContent()},sna.presentation.TripleBellsScrollableContainer.prototype.onWheelHandlerScrollableContainer=sna.presentation.TripleBellsScrollableContainer.prototype.onWheelHandler,sna.presentation.TripleBellsScrollableContainer.prototype.onWheelHandler=function(e){this.onWheelHandlerScrollableContainer(e),this.updateHtmlContent()},sna.presentation.TripleBellsScrollableContainer.prototype.initSlider=function(){var e=this.scope.config.slider;e&&(e.value="@parent.getPosition",e=this.presentation.createPresentation(e,this,this.scope.model),this.addChild(e),(this.slider=e).setter=function(e){var t=this.content.height,t=(this.maskHeight,t/2-this.maskHeight);this.content.y=t+(-t-t)*e,this.content.scope.config.y=this.content.y,this.updateHtmlContent()}.bind(this))},sna.presentation.TripleBellsScrollableContainer.prototype.updateHtmlContent=function(){var e,t,i,n,s,r,o;this.link&&(s=new PIXI.Point,t=(e=document.getElementById("game-placeholder").getBoundingClientRect()).width/this.presentation.scope.layout.viewWidth,i=e.height/this.presentation.scope.layout.viewHeight,this.gameRulesObject.toGlobal(new PIXI.Point(0,0),s,!1),n=e.y+s.y*i-this.gameRulesObject.height*i+this.gameRulesObject.height*i/2,s=e.x+s.x*t-this.gameRulesObject.width*t+this.gameRulesObject.width*t/2,this.link.style.left=s+"px",this.link.style.top=n+"px",this.link.style.width=this.gameRulesObject.width*t+"px",this.link.style.height=this.gameRulesObject.height*i+"px",this.presentation.scope.layout.has("Portrait")?(r=document.getElementById("gamerulesidLandscape"))&&(r.style.display="none"):(o=document.getElementById("gamerulesidPortrait"))&&(o.style.display="none"),r=this.iface.isPokerStars(),o=this.presentation.scope.layout.has("Mobile"),n-this.gameRulesObject.height*i<e.height-this.gameRulesObject.height*i&&!(r&&o)&&this.iface.settingsGameRulesOpen?this.link.style.display="block":this.link.style.display="none")},sna.presentation.TripleBellsScrollableContainer.prototype.changeContentVisibleState=function(e){this.scope.config.linkId&&this.link&&(this.link.style.display="true"===e||!0===e?"block":"none")},sna.module.core.controller(sna.presentation.TRIPLEBELLSSCROLLABLE_CONTAINER,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.TripleBellsScrollableContainer]),sna.presentation.tripleBellsProvider.TRIPLE_BELLS_WIN_PRESENTATION_ANIMATION="TripleBellsWinPresentationAnimation",sna.presentation.tripleBellsProvider.TripleBellsWinPresentationAnimation=function(e,t){this.scope=e,this.presentation=t.presentation,this.timeline=t.presentation.timeline,this.game=t.game,this.iface=t.iface,this.sound=t.sound,this.winValues=this.presentation.scope.config.parameters.bigWinValues,sna.service.util.sortIntArr(this.winValues)},sna.presentation.tripleBellsProvider.TripleBellsWinPresentationAnimation.prototype=Object.create(sna.presentation.Animation.prototype),sna.presentation.tripleBellsProvider.TripleBellsWinPresentationAnimation.prototype.animateAnimation=sna.presentation.tripleBellsProvider.TripleBellsWinPresentationAnimation.prototype.animate,sna.presentation.tripleBellsProvider.TripleBellsWinPresentationAnimation.prototype.animate=function(e){return this.activeAnimations=[],!this.iface.isMaxWinReached()&&this.showWhenCascade()?"winSum"!==e.name?this.animateFastWinStop(e):this.animateWinSum(e):new this.timeline},sna.presentation.tripleBellsProvider.TripleBellsWinPresentationAnimation.prototype.showWhenCascade=function(){return!(this.scope.config&&this.scope.config.dontShowWhenCascade&&this.iface.scope.game&&(this.iface.scope.game.isRespinActive||sna.service.util.returnIf(this.iface.scope,"game.feature.start")))},sna.presentation.tripleBellsProvider.TripleBellsWinPresentationAnimation.prototype.animateWinSum=function(e){if(!this.shouldAnimateWinSum())return new this.timeline;this.scope.parent.setnumber(0),this.scope.parent.setscale(this.scope.parent.scope.config.scale||1);var t=this.scope.model.showValuesInCash&&!this.scope.config.coinsWin,i=t?this.game.getTotalBetInCash():this.game.getTotalBetInCoins(),n=t?this.game.getTotalWinInCash():this.game.getTotalWinInCoins();(this.scope.config.useActiveCountWin||this.game.getParameterValue("hasCascadeWins"))&&(n=this.iface.activeCountWin),this.scope.config.useActiveTotalWin&&(n=this.iface.activeTotalWin);var s=this.iface.getActiveMultiplier();if(1<s&&0<n){t=new this.timeline;return t.add(this.animateWinToValue(e,n/s,i,!0)),t.add(this.animateMultiplierTransition(e)),t.add("multiplier"),t.add(this.animateMultiplierFadeOut(e),"multiplier"),t.add(this.animateWinToValue(e,n,i,!1,n/s),"multiplier"),t}return this.animateWinToValue(e,n,i)},sna.presentation.tripleBellsProvider.TripleBellsWinPresentationAnimation.prototype.shouldAnimateWinSum=function(){var e=this.game.getParameterValue("useFooterBigWinCountUp"),t=this.game.getParameterValue("useFooterSmallWinCountUp"),i=this.scope.model.isBigWin;return!e||i||t},sna.presentation.tripleBellsProvider.TripleBellsWinPresentationAnimation.prototype.animateWinToValue=function(e,t,i,n,s){n=n||!1;var r=this.scope.parent,o=this.scope.config,a=(s=s||null)||parseFloat(r.getnumber());if(t<=i*(this.game.getParameterValue("smallWinBetMultiplier")||1))return(u=new this.timeline).call(r.show,[],r),u.call(r.setnumber,[t],r),n||(v=this.getFooterWinValue(t),u.call(function(e){this.iface.shouldSkipUpdateFooterWinWhileSpinIsInProgress()||this.iface.updateWrapperGameMessage("FAST_WIN",e)},[v],this)),o.noDelays||u.set({},{},"+=0.5"),u;var l=15*i,h=Math.ceil(t/l),i=this.scope.config.maximumNumberOfChunks,c=!1;i&&i<h&&(c=!0,h=i,alternateChunk=Math.round((t-3*l)/(h-3)));var p=this.scope.config.chunkDuration||3;this.iface.setCountupSoundVolumeUKGC();var u,d=new this.timeline({onStart:this.hideBigWinOnCountup(),onStartScope:this,onComplete:function(){this.sound&&this.sound.sounds&&this.sound.sounds.CounterWin&&this.sound.sounds.CounterWin.stop()},onCompleteScope:this});if(this.scope.model.isBigWin=this.game.isBigWin(t),this.scope.model.isBigWin){for(var m=0;m<h;m++){c&&3<m&&(l*=1.5);var f=new this.timeline({onUpdate:this.onGetNumber,onUpdateScope:this,onUpdateParams:[r,"{self}"]}),g=Math.min(t,a+l*(m+1));t<a+l*(m+2)&&(m=h,g=t),m===h-1&&c&&(g=t),this.iface.game.getParameterValue("stopBigWinCounterWin")||this.sound&&this.sound.sounds&&this.sound.sounds.CounterWin&&f.call(this.sound.playSoundOnce,["CounterWin",!0],this.sound),f.to(r,p,{setnumber:g,ease:Power0.easeNone,onStart:this.onBigWinCountUpStart,onStartParams:[g,p],onStartScope:this}),this.sound&&this.sound.sounds&&this.sound.sounds.CounterWin&&f.call(this.sound.stopSound,["CounterWin"],this.sound),p=Math.max(.003,.8*p),d.add(f)}this.sound&&this.sound.sounds&&this.sound.sounds.CounterWinEnd&&d.call(this.sound.playSoundOnce,["CounterWinEnd",!1],this.sound),n||this.iface.game.getParameterValue("overrideWinMessage")||this.game.getParameterValue("useFooterBigWinCountUp")||d.call(this.updateTicker,[e],this)}else{f=new this.timeline({onUpdate:this.onGetNumber,onUpdateScope:this,onUpdateParams:[r,"{self}"]});this.sound&&this.sound.sounds&&this.sound.sounds.CounterWin&&f.call(this.sound.playSoundOnce,["CounterWin",!0],this.sound),this.sound&&this.sound.sounds&&this.sound.sounds.CoinPointsCountupOverlay&&f.call(this.sound.playSoundOnce,["CoinPointsCountupOverlay",!1],this.sound);var v=this.getFooterWinValue(t);f.to(r,1,{setnumber:t,ease:Power0.easeNone,onStart:this.onSmallWinCountUpStart,onStartParams:[v,1],onStartScope:this}),this.sound&&this.sound.sounds&&this.sound.sounds.CounterWin&&f.call(this.sound.stopSound,["CounterWin"],this.sound),this.sound&&this.sound.sounds&&this.sound.sounds.CoinPointsCountupOverlay&&f.call(this.sound.stopSound,["CoinPointsCountupOverlay"],this.sound),this.sound&&this.sound.sounds&&this.sound.sounds.CounterWinEnd&&f.call(this.sound.playSoundOnce,["CounterWinEnd",!1],this.sound),n||o.noDelays||f.set({},{},"+=0.75"),d.add(f)}return(u=new this.timeline).add("start"),u.add(d,"start"),this.game.isBigWin(t)&&!this.game.getParameterValue("dontUseBigWinScale")&&((o=new this.timeline).to(r,d.duration(),{setscale:.75}),u.add(o,"start")),this.winTimeline=u,this.game.getParameterValue("legacyBigWin")&&this.iface.updateWrapperGameMessage("CUSTOM_WIN",t,{duration:1e3*u.duration()}),u},sna.presentation.tripleBellsProvider.TripleBellsWinPresentationAnimation.prototype.onSmallWinCountUpStart=function(e,t){this.iface.shouldSkipUpdateFooterWinWhileSpinIsInProgress()||this.iface.updateWrapperGameMessage("CUSTOM_WIN",e,{duration:1e3*t})},sna.presentation.tripleBellsProvider.TripleBellsWinPresentationAnimation.prototype.onBigWinCountUpStart=function(e,t){var i;!this.game.getParameterValue("useFooterBigWinCountUp")||this.footerWinHidden||this.game.getParameterValue("legacyBigWin")||(i=this.iface.activeTotalWin-this.iface.activeCountWin+e,this.game.getParameterValue("disableActiveTotalWin")&&(i=e),this.iface.updateWrapperGameMessage("CUSTOM_WIN",i,{duration:1e3*t}))},sna.presentation.tripleBellsProvider.TripleBellsWinPresentationAnimation.prototype.modifiedBigWinValue=function(){return this.game.getParameterValue("bigWinInstantCountup")?0:5},sna.presentation.tripleBellsProvider.TripleBellsWinPresentationAnimation.prototype.onGetNumber=function(e,t){var i=this.presentation.getById("grandTotals");i&&!i.visible&&i.show();var n,s=this.scope.model.showValuesInCash?this.game.getTotalBetInCash():this.game.getTotalBetInCoins(),r=parseFloat(e.getnumber());if(this.game.getParameterValue("updateBigWinDigitsOnWin")&&i.setnumber(r),this.scope.model.isBigWin){n=angular.copy(this.winValues),this.game.getParameterValue("dontModifyFirstThreshold")||(n[0]=this.modifiedBigWinValue());for(var o,a=0;a<n.length;a++)if(!this.activeAnimations[a])if(r>n[a]*s)return 0===a&&(this.presentation.createAnimationTimeline("bigWin",0,!1,!0),this.iface.setBigWinActive(!0),this.game.getParameterValue("useFooterBigWinCountUp")&&((o=this.presentation.getById("bigWinLayer"))&&o.show(),this.game.getParameterValue("legacyBigWin")||this.hideFooterWin(),this.game.getParameterValue("hideWrapperButtonsBigWinDesktop")&&this.iface.presentation.main.environment.is(sna.service.ENVIRONMENT_DESKTOP)&&(this.iface.updateWrapperModel({general:{showGameMessages:!1,gameMessage:null}}),this.iface.updateWrapperButtonsState("HIDDEN")))),this.presentation.createAnimationTimeline("bigWin_"+a,0,!1,!0),this.additionalUpdates(a),this.game.getParameterValue("legacyBigWin")||this.processBigWinnerTickerText(),void(this.activeAnimations[a]=!0);this.game.getParameterValue("skipBigWinSpineDigitsUpdate")||this.updateBigWinPresentation(null,r),this.game.getParameterValue("hideWrapperButtonsBigWinMobile")&&this.iface.presentation.main.environment.is(sna.service.ENVIRONMENT_MOBILE)&&(this.iface.updateWrapperModel({general:{showGameMessages:!1,gameMessage:null}}),this.iface.updateWrapperButtonsState("HIDDEN"))}},sna.presentation.tripleBellsProvider.TripleBellsWinPresentationAnimation.prototype.hideFooterWin=function(){this.iface.updateWrapperModel({general:{gameMessage:null}}),this.footerWinHidden=!0},sna.presentation.tripleBellsProvider.TripleBellsWinPresentationAnimation.prototype.processBigWinnerTickerText=function(e){this.iface.scope.lastResult.outcome.hasRespin||this.iface.scope.lastResult.outcome.bingoWin||this.iface.updateTicker(e)},sna.presentation.tripleBellsProvider.TripleBellsWinPresentationAnimation.prototype.additionalUpdates=function(e){},sna.presentation.tripleBellsProvider.TripleBellsWinPresentationAnimation.prototype.hideBigWinOnCountup=function(){var e;this.game.getParameterValue("useFooterBigWinCountUp")&&(this.footerWinHidden=!1,(e=this.presentation.getById("bigWinLayer"))&&e.hide())},sna.presentation.tripleBellsProvider.TripleBellsWinPresentationAnimation.prototype.animateFastWinStop=function(e){if(!this.scope.model.isBigWin)return this.game.getParameterValue("updateReelDigitsOnFastStop")&&(n=this.iface.activeCountWin,this.scope.config.useActiveTotalWin&&(n=this.iface.activeTotalWin),this.scope.parent.setnumber(n)),new this.timeline;this.winTimeline&&(this.winTimeline.stop(),this.winTimeline.kill(),delete this.winTimeline),this.winMultiplier&&this.winMultiplier.hide();var t=this.scope.parent,i=new this.timeline;i.call(t.show,[],t);var n=this.iface.activeCountWin;this.scope.config.useActiveTotalWin&&(n=this.iface.activeTotalWin),i.call(t.setnumber,[n],t);var s=this.getFooterWinValue(n);return this.game.getParameterValue("updateBigWinDigitsOnWin")&&(n=this.presentation.getById("grandTotals"),i.call(n.setnumber,[s],n)),this.game.getParameterValue("useFooterBigWinCountUp")?i.call(function(){this.updateTicker(e,s,"FAST_WIN")},[],this):i.call(function(){this.game.getParameterValue("recalculateTotalWin")||this.updateTicker(e,s,"FAST_WIN")},[],this),this.game.getParameterValue("skipBigWinSpineDigitsUpdate")||this.updateBigWinPresentation(e,s),i},sna.presentation.tripleBellsProvider.TripleBellsWinPresentationAnimation.prototype.updateTicker=function(e,t,i){i=i||"WIN",t=t||this.getFooterWinValue(),this.iface.updateWrapperGameMessage(i,t)},sna.presentation.tripleBellsProvider.TripleBellsWinPresentationAnimation.prototype.createWinMultiplier=function(e){var t=this.presentation.getById(this.scope.config.multiplierSrc||"fsWildMultiplier"),i=this.presentation.getById(this.scope.config.multiplierDst||"multiplierTarget"),n=angular.copy(i.scope.config.multiplier),n=this.presentation.createPresentation(n,i,this.scope.model);n.setnumber("x"+this.iface.getActiveMultiplier()),i.addChild(n);t=this.presentation.getRelativeStageOffset(n,t);return n.setX(t.x),n.setY(t.y),n.hide(),this.winMultiplier&&this.winMultiplier.destroy({children:!0}),this.winMultiplier=n},sna.presentation.tripleBellsProvider.TripleBellsWinPresentationAnimation.prototype.updateBigWinPresentation=function(i,n){for(var e=this.presentation.getById("bigWinLayer"),t=this.iface.getElementsByTag(e,"bigWinSpines"),s=[],r=[],o=0;o<t.length;o++)r.length?r[0].parent==t[o].parent?r.push(t[o]):((r=[]).push(t[o]),s.push(r)):(r.push(t[o]),s.push(r));var a=0;s.forEach(function(e){1<e.length&&(a=this.activeAnimations.length-1,i&&"fastWinStop"==i.name&&(a=this.scope.model.bigWinIndex));var t=e[a];!t||(e=t.scope.config).changeSlot&&(e=Object.keys(e.changeSlotTextures)[0],t.updateDigit(e,n))},this)},sna.presentation.tripleBellsProvider.TripleBellsWinPresentationAnimation.prototype.animateMultiplierTransition=function(e){this.createWinMultiplier();var t=new this.timeline;return t.call(this.winMultiplier.show,[],this.winMultiplier),t.to(this.winMultiplier,.3,{setY:0,setX:0,setscale:2*this.winMultiplier.scale.x}),t.set({},{},"+=0.3"),t},sna.presentation.tripleBellsProvider.TripleBellsWinPresentationAnimation.prototype.animateMultiplierFadeOut=function(e){var t=new this.timeline;return t.add("start"),t.to(this.winMultiplier,.4,{setscale:3.5*this.winMultiplier.scale.x},"start"),t.to(this.winMultiplier,.2,{alpha:0},"start+=0.2"),t},sna.presentation.tripleBellsProvider.TripleBellsWinPresentationAnimation.prototype.getFooterWinValue=function(e){return this.useCurrentValueForFooter?e:this.game.getParameterValue("disableActiveTotalWin")?this.game.getTotalWinInCash():this.iface.activeTotalWin},sna.module.tripleBellsProvider.controller(sna.presentation.tripleBellsProvider.TRIPLE_BELLS_WIN_PRESENTATION_ANIMATION,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.tripleBellsProvider.TripleBellsWinPresentationAnimation]),sna.service.util.formatDate=function(e){var t=e.getDate(),i=e.getMonth()+1;return(t=t<10?"0"+t:t)+"/"+(i=i<10?"0"+i:i)+"/"+e.getFullYear()},sna.service.util.formatTime=function(e){var t=e.getHours(),i=e.getMinutes(),e=12<=t?"pm":"am";return(t=(t%=12)||12)+":"+(i=i<10?"0"+i:i)+" "+e},sna.service.util.writeCookie=function(e,t,i){return null},sna.service.util.readCookie=function(e){return null},sna.presentation.util.onDragMove=function(e){var t=e.data.getLocalPosition(this.parent),i=t.x-this.posX,n=t.y-this.posY;this.dragging&&this.draggable&&(Math.abs(i)>.01*this.presentation.scope.layout.width||Math.abs(n)>.01*this.presentation.scope.layout.height)&&(this.posX=t.x,this.posY=t.y,this.presentation.scope.layout.has(sna.service.ENVIRONMENT_TABLET)?sna.presentation.util.setDynamicX(this.x+i,this,this.presentation,"Tablet"):sna.presentation.util.setDynamicX(this.x+i,this,this.presentation),this.setY(this.y+n),this.cIterated||(angular.forEach(this.children,function(e){e.supressEventPropagation=!0},this),this.cIterated=!0),void 0!==this.onDragMove&&this.onDragMove(this,e))},sna.service.DISABLE_IOS_FS="DisableIOSFS",sna.service.IS_FIXED_ASPECT_RATIO="isFixedAspectRatio",sna.service.Environment.prototype.detectEnvironment=function(){var e=this.window.navigator.userAgent,t=new MobileDetect(e);log(this.name,"detectEnvironment",sna.log.DEBUG,"User agent found: "+e),this.matchNavigatorEnvironment(e,/Windows/,sna.service.ENVIRONMENT_WINDOWS),this.matchNavigatorEnvironment(e,/Linux/,sna.service.ENVIRONMENT_LINUX),this.matchNavigatorEnvironment(e,/Android/,sna.service.ENVIRONMENT_ANDROID),this.pushEnvironmentTag(sna.service.ENVIRONMENT_MOBILE,t.mobile()),this.pushEnvironmentTag(sna.service.ENVIRONMENT_TABLET,t.tablet()),this.pushEnvironmentTag(sna.service.ENVIRONMENT_DESKTOP,!t.tablet()&&!t.mobile());var i=this.scope.config.parameters.isFixedAspectRatio;this.pushEnvironmentTag(sna.service.IS_FIXED_ASPECT_RATIO,i);function n(){try{return window.self!==window.top}catch(e){return 1}}this.matchNavigatorEnvironment(e,/iPad/,sna.service.ENVIRONMENT_IPAD),this.matchNavigatorEnvironment(e,/iPhone/,sna.service.ENVIRONMENT_IPHONE);var s=568==window.screen.width||568==window.screen.height,r=667==window.screen.width||667==window.screen.height,o=375==window.screen.width||667==window.screen.height,a=812==window.screen.width||812==window.screen.height&&375==window.screen.width||375==window.screen.height;(896==window.screen.width||896==window.screen.height&&414==window.screen.width||414==window.screen.height)&&(a=!0,console.log("iphoneX")),n()&&(a=!1);t=640==window.screen.width||640==window.screen.height&&360==window.screen.width||360==window.screen.height,i=727==window.screen.width||727==window.screen.height&&414==window.screen.width||414==window.screen.height;this.pushEnvironmentTag("iPhoneX",a),this.pushEnvironmentTag("iPhone5",s),this.pushEnvironmentTag("iPhone6",r),this.pushEnvironmentTag("iPhone7",o),this.pushEnvironmentTag("samsungS7",t),this.pushEnvironmentTag("samsungS10plus",i),this.pushEnvironmentTag(sna.service.ENVIRONMENT_MAC,0<=this.window.navigator.platform.toUpperCase().indexOf("MAC")),this.pushEnvironmentTag(sna.service.ENVIRONMENT_IOS,/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream),this.pushEnvironmentTag(sna.service.ENVIRONMENT_OPERA,!!window.opr&&!!opr.addons||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/")),this.pushEnvironmentTag(sna.service.ENVIRONMENT_FIREFOX,"undefined"!=typeof InstallTrigger),this.pushEnvironmentTag(sna.service.ENVIRONMENT_EXPLORER,!!document.documentMode),this.pushEnvironmentTag(sna.service.ENVIRONMENT_EDGE,!this.is(sna.service.ENVIRONMENT_EXPLORER)&&!!window.StyleMedia),-1!==this.environmentTags.indexOf(sna.service.ENVIRONMENT_IOS)?this.matchNavigatorEnvironment(e,/CriOS/,sna.service.ENVIRONMENT_CHROME):this.pushEnvironmentTag(sna.service.ENVIRONMENT_CHROME,!!window.chrome),this.pushEnvironmentTag(sna.service.ENVIRONMENT_SAFARI,/Safari/.test(navigator.userAgent)&&!/CriOS/.test(navigator.userAgent)),this.pushEnvironmentTag(sna.service.ENVIRONMENT_BLINK,(this.is(sna.service.ENVIRONMENT_CHROME)||this.is(sna.service.ENVIRONMENT_OPERA))&&!!window.CSS);s=this.is(sna.service.ENVIRONMENT_DESKTOP),r=this.is(sna.service.ENVIRONMENT_TABLET),o=!this.is(sna.service.ENVIRONMENT_CHROME),t=this.is(sna.service.ENVIRONMENT_MOBILE),i=0<this.environmentTags.indexOf(sna.service.ENVIRONMENT_ANDROID),e=function(){var e=window.navigator.userAgent;if(-1<e.indexOf("iPad"))return!0;if(-1<e.indexOf("Macintosh"))try{return document.createEvent("TouchEvent"),!0}catch(e){}return!1}();(s||r||e)&&o&&(t||e)&&(this.removeEnvironmentTag(sna.service.ENVIRONMENT_DESKTOP),this.pushEnvironmentTag(sna.service.ENVIRONMENT_MOBILE,!0),this.pushEnvironmentTag(sna.service.ENVIRONMENT_TABLET,!0),i?this.pushEnvironmentTag(sna.service.ENVIRONMENT_ANDROID,!0):this.pushEnvironmentTag(sna.service.ENVIRONMENT_IOS,!0),this.pushEnvironmentTag(sna.service.ENVIRONMENT_IPAD,!0)),GcwGameClient&&("false"===GcwGameClient.initialData.initConf.fullscreen||!1===GcwGameClient.initialData.initConf.fullscreen||"0"===GcwGameClient.initialData.initConf.minimalui||0===GcwGameClient.initialData.initConf.minimalui||"0"===GcwGameClient.initialData.initConf.forceFullscreen||0===GcwGameClient.initialData.initConf.forceFullscreen||navigator.userAgent.includes("TipicoCasino")||navigator.userAgent.includes("TipicoSport")||n())&&this.pushEnvironmentTag(sna.service.DISABLE_IOS_FS,!0),"0"!=this.scope.minimalui&&0!=this.scope.minimalui||this.pushEnvironmentTag(sna.service.DISABLE_IOS_FS,!0),/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent)&&this.pushEnvironmentTag(sna.service.DISABLE_IOS_FS,!0)},sna.service.Environment.prototype.enableTournamentMode=function(){this.environmentTags.push("Tournament")},sna.service.Environment.prototype.getLayout=function(){var t=this.scope.layout,e=null;GcwGameClient&&GcwGameClient.initialData.containerElement&&(e=document.getElementById("mainContainer"));var i,n,s=new sna.presentation.Layout(this.view,this.environmentTags,this.scope.config.assetSizes,this.preferredAspectRatio,e,this.allowTabletPortrait,this.useCustomAspectRatioDesktop);return s.id=this.layoutId++,s.has(sna.service.ENVIRONMENT_IOS)&&(screen.height==s.width&&screen.width,s.has(sna.service.ENVIRONMENT_IPHONE)&&(i=this.checkIosFullscreen(s),e=s.has(sna.service.ENVIRONMENT_FULLSCREEN),i&&!e?(s.remove(sna.service.ENVIRONMENT_WINDOWED),s.layoutTags.push(sna.service.ENVIRONMENT_FULLSCREEN)):!i&&e&&(s.remove(sna.service.ENVIRONMENT_FULLSCREEN),s.layoutTags.push(sna.service.ENVIRONMENT_WINDOWED)),this.fsDiv&&s.has(sna.service.DISABLE_IOS_FS)&&(this.fsDiv.style.display="none",this.fsDiv=null),this.fsDiv&&(n=document.getElementById("background"),e=document.getElementsByTagName("BODY")[0],s.has(sna.service.ENVIRONMENT_FULLSCREEN)?(e.insertBefore(this.fsDiv,e.firstChild),n&&(n.style.display="block"),this.fsDiv.style.zIndex=0):s.has(sna.service.ENVIRONMENT_PORTRAIT)&&this.scope.config.enablePortraitMode?(e.appendChild(this.fsDiv,e.firstChild),n&&(n.style.display="block"),this.fsDiv.style.zIndex=999999):s.has(sna.service.ENVIRONMENT_LANDSCAPE)?(e.appendChild(this.fsDiv),n&&(n.style.display="none"),this.fsDiv.style.zIndex=999999):n&&(n.style.display="none")))),this.scope.config.fixViewSizeTo&&!s.has(sna.service.ENVIRONMENT_MOBILE)||((n=document.getElementById("game-placeholder")).style.left=s.screenOffset.x+"px",n.style.top=s.screenOffset.y+"px"),s.selected=this.selectConfigLayout(s),t?(angular.forEach(s.layoutTags,function(e){t.has(e)||s.newTags.push(e)}),angular.forEach(t.layoutTags,function(e){s.has(e)||s.oldTags.push(e)})):s.newTags=s.layoutTags,this.timeDiv&&(this.updateTimeInterval=setInterval(function(){var e=new Date,t=e.getHours()+"";t<=9&&(t="0"+t);e=e.getMinutes()+"";this.timeDiv.innerHTML=t+":"+(e=e<=9?"0"+e:e),this.timeDiv.style.top=this.gamePlaceholderDiv.offsetTop+3}.bind(this),1e3),this.timeDiv.style.display="block"),this.coinPerBetInfoDiv&&(this.coinPerBetInfoDiv.style.top=this.gamePlaceholderDiv.offsetTop+3,this.coinPerBetInfoDiv.style.right=this.gamePlaceholderDiv.offsetLeft+3,this.coinPerBetInfoDiv.style.display="block"),log(this,"getLayout",sna.log.DEBUG,"Layout changed. New tags: "+s.newTags.join(",")),s},sna.service.Environment.prototype.setupHTMLReferences=function(){this.fsDiv=null,this.timeDiv=document.getElementById("user-time"),this.coinPerBetInfoDiv=document.getElementById("coin-per-bet-info"),this.gamePlaceholderDiv=document.getElementById("game-placeholder")},sna.presentation.XHIGH_LAYOUT="XHIGH",sna.presentation.HIGH_LAYOUT="HIGH",sna.presentation.MINI_LAYOUT="MINI",sna.presentation.Layout.prototype.getSize=function(){GcwGameClient&&"MINI"==GcwGameClient.initialData.initConf.platform&&(this.queryParams.daq="MINI");var r=Math.max(this.screenWidth*this.resolution,this.screenHeight*this.resolution),o={maxScreenSize:1/0,defaultOne:!0,specificity:-1};return angular.forEach(this.assetSizes,function(e){var t=(t=e.maxScreenSize<o.maxScreenSize)&&this.hasGreaterSpecificity(e,o),i=r<=(e.maxScreenSize||1/0),n=this.checkRequiredTags(e),s=this.checkForbiddenTags(e);void 0!==this.queryParams.daq&&this.queryParams.daq.toUpperCase()===e.name.toUpperCase()?(o=e,this.layoutTags.push(e.name.toUpperCase())):t&&i&&n&&s&&(o=e,this.layoutTags.push(e.name))},this),o.defaultOne&&log("Layout","getSize",sna.log.FATAL,"Asset Size could not be selected!"),o},sna.model.slot.Slot.prototype.updateAutoplay=function(e){this.autoplay.newBalance=e,this.autoplay.totalWin+=this.totalWin},sna.model.slot.Slot.prototype.stopAutoplay=function(){this.autoplay.active=!1,this.autoplay.left=0,this.autoplay.initialBalance=0,this.autoplay.newBalance=0,this.autoplay.played=0,this.autoplay.leftOrPlayed=0,this.autoplay.totalWin=0,this.autoplay.totalBetToGamble=0},sna.model.slot.Slot.prototype.setAutoplayTotalBetToGambleThreshold=function(e){this.autoplay.totalBetToGambleThreshold=e,sna.service.util.writeCookie("totalBetToGambleThreshold",e)},sna.model.slot.Slot.prototype.setAutoplayTotalBetToGambleThresholdActive=function(e){this.autoplay.totalBetToGambleThresholdActive=e,sna.service.util.writeCookie("totalBetToGambleThresholdActive",e)},sna.model.slot.Slot.prototype.getAutoplayTotalBetToGambleThreshold=function(){return this.autoplay.totalBetToGambleThreshold},sna.model.slot.Slot.prototype.getAutoplayWinDecreaseThreshold=function(){return this.autoplay.winDecreaseThreshold},sna.model.slot.Slot.prototype.isMaxCoinValueLevel=function(){var e=this.coinValue;return this.coinValues.indexOf(e.toString())===this.coinValues.length-1},sna.presentation.slot.SpinAnimation.prototype.animateSpinStop=function(a){var l=this.scope.parent.symbolsContainer,h=new this.timelineFactory;this.stopPosition=!1,this.symbolAdjustment=!1,this.fastSpinStopPosition=!1,this.finalStopPosition=!1,this.outcomePrepared=!1,this.containerFinalized=!1,this.containerReset=!1,this.firstSpinLoop&&(h.call(this.firstSpinLoop.stop,[],this.firstSpinLoop),h.call(this.firstSpinLoop.kill,[],this.firstSpinLoop)),this.spinLoop&&(h.call(this.spinLoop.stop,[],this.spinLoop),h.call(this.spinLoop.kill,[],this.spinLoop));var c=0;return this.scope.parent.scope.config.additionalRotations&&(c=this.scope.parent.scope.config.additionalRotations),h.call(function(){var e=l.y%this.symbolDistance;this.symbolAdjustment=this.symbolDistance-e;var t=this.symbolAdjustment/this.symbolDistance*(this.spinDuration/this.scope.model.spinningSymbols.length);this.stopPosition=l.y,h.to(l,t,{setY:this.stopPosition+this.symbolAdjustment,ease:Linear.easeInOut}),h.set(l,{setY:this.stopPosition+this.symbolAdjustment-c*this.scope.model.size*this.symbolDistance}),h.call(this.prepareOutcome,[0<c],this);var i=(this.scope.model.bottomSymbols.length+this.scope.model.size)*this.symbolDistance-this.spinBounceDistance*this.presentation.globalScale;this.fastSpinStopPosition=this.stopPosition+this.symbolAdjustment+i;var n=(this.scope.model.bottomSymbols.length+this.scope.model.size)*(this.spinDuration/this.scope.model.spinningSymbols.length),s={},r=Linear.easeInOut,o=this.scope.parent.scope.config.spinification;this.scope.model.spinification&&(this.scope.model.spinificationSlowStop||o&&o.slowSpin)&&(i=(this.scope.model.bottomSymbols.length+this.scope.model.size)*this.symbolDistance,n=o.slowSpinDuration||3,this.iface.game.getParameterValue("spinParameters")&&this.iface.game.getParameterValue("spinParameters").graduallySlowSpinification&&(n=this.iface.game.getParameterValue("spinParameters").graduallySlowSpinification.symbols/2.5),r=Power2.easeOut,s.onStart=this.onSpinStopBeforeStart,s.onStartScope=this);e=!1,t=this.scope.parent.scope.config,o=this.scope.model,t=t.slowSpinEnd;t&&(e=t.removeBlurDelay,r=void 0!==t.ease?sna.presentation.Animation.prototype.getEasing(t.ease):Power2.easeIn,i=(o.bottomSymbols.length+o.size)*this.symbolDistance,n=t.duration||3,s.onStart=this.onSpinStopBeforeStart,s.onStartScope=this),s.setY=this.stopPosition+this.symbolAdjustment+i,s.ease=r,h.add("slow-end"),h.to(l,n,s,"slow-end"),e&&h.call(this.removeBlurFromSpinningSymbols,[],this,"slow-end+="+e),h.call(this.finalizeContainer,[],this),h.call(this.scope.parent.disableMask,[],this.scope.parent),h.add("symLand"),h.call(this.presentation.createAnimationTimeline,["reelStop",0,!1,!0],this.presentation),this.scope.parent.scope.config.useLocalReelStop&&h.call(this.presentation.createAnimationTimeline,["reelStopLocal",0,!1,!0,this.scope.parent],this.presentation),h.call(function(){this.presentation.main.iface.onReelLand&&h.call(this.presentation.main.iface.onReelLand,[this.scope.parent,a],this.presentation.main.iface),this.iface.spinningReels.length||h.call(this.presentation.createAnimationTimeline,["allReelsStopped",0,!1,!0],this.presentation);var i=[];angular.forEach(this.scope.parent.outcomeSymbols,function(e,t){i[t]=this.presentation.createAnimationTimeline("symbolLand",0,!1,!0,e).animation},this),this.scope.parent.scope.config.waitForLandingAnimations&&h.add(i,"symLand")},[],this);e=(this.scope.model.bottomSymbols.length+this.scope.model.size)*this.symbolDistance;this.finalStopPosition=this.stopPosition+this.symbolAdjustment+e,h.to(l,this.spinBounceDuration,{setY:this.finalStopPosition,ease:Elastic.easeOut.config(this.spinBounceAmplitude,this.spinBounceFrequency),onComplete:function(){this.resetContainer(),this.iface.spinAnimationStartTimer&&console.log(this.scope.model.index+" reel stopped: "+((new Date).getTime()-this.iface.spinAnimationStartTimer.getTime()))}.bind(this)}),this.iface.shouldInvokeMachinesReelsStopped(this.scope.model)&&h.call(function(){var e=this.presentation.createAnimationTimeline("machinesReelsStopped",0,!1,!0,this.scope.parent.parent.parent).animation;h.add(e)},[],this),this.presentation.main.iface.onReelStopped&&h.call(this.presentation.main.iface.onReelStopped,[this.scope.parent,a],this.presentation.main.iface)},[],this),h.set({},{},"+=0.001"),this.stopTimeline=h},sna.presentation.slot.SpinAnimation.prototype.onSpinStopBeforeStart=function(){var e=this.scope.parent.scope.config.removeBlurOnSlowStop,t=this.scope.parent.scope.config.spinification;(e=t?e||t.removeBlurOnSlowStop:e)&&this.removeBlurFromSpinningSymbols()},sna.presentation.slot.SpinAnimation.prototype.removeBlurFromSpinningSymbols=function(){this.scope.parent.removeBlurFromSpinningSymbols&&this.scope.parent.removeBlurFromSpinningSymbols()},sna.presentation.slot.SpinAnimation.prototype.animateFastSpinStop=function(n){var s=this.scope.parent.symbolsContainer,r=new this.timelineFactory({onComplete:function(){this.iface.spinAnimationStartTimer&&console.log(this.scope.model.index+" reel stopped: "+((new Date).getTime()-this.iface.spinAnimationStartTimer.getTime()))},onCompleteScope:this});return this.iface.game.getParameterValue("spinParameters")&&this.iface.game.getParameterValue("spinParameters").graduallySlowSpinification&&(this.finalStopPosition=!1),this.scope.model.slot.hideStickiesReel&&this.scope.model.slot.hideStickiesReel[this.scope.model.index]&&r.call(this.iface.triggerEvent,["FastHideStickies",this.scope.model.index],this.iface),this.containerReset||(this.spinLoop&&(r.call(this.spinLoop.stop,[],this.spinLoop),r.call(this.spinLoop.kill,[],this.spinLoop)),this.firstSpinLoop&&(r.call(this.firstSpinLoop.stop,[],this.firstSpinLoop),r.call(this.firstSpinLoop.kill,[],this.firstSpinLoop)),this.stopTimeline&&(r.call(this.stopTimeline.stop,[],this.stopTimeline),r.call(this.stopTimeline.kill,[],this.stopTimeline)),r.call(function(){var e;this.stopPosition||(this.stopPosition=s.y),this.symbolAdjustment||(e=this.stopPosition%this.symbolDistance,this.symbolAdjustment=this.symbolDistance-e),this.fastSpinStopPosition||(t=(this.scope.model.bottomSymbols.length+this.scope.model.size)*this.symbolDistance-this.spinBounceDistance*this.presentation.globalScale,this.fastSpinStopPosition=this.stopPosition+this.symbolAdjustment+t),this.finalStopPosition||(i=(this.scope.model.bottomSymbols.length+this.scope.model.size)*this.symbolDistance,this.finalStopPosition=this.stopPosition+this.symbolAdjustment+i);var t=0,i=this.scope.parent.scope.config.spinification;this.scope.model.spinification&&(this.scope.model.spinificationSlowStop||i&&i.slowSpin)&&(t=(this.scope.model.bottomSymbols.length+this.scope.model.size)*this.symbolDistance),r.set(s,{setY:this.stopPosition+(this.symbolAdjustment||0)+t}),r.call(this.prepareOutcome,[],this),r.call(this.presentation.createAnimationTimeline,["reelStop",0,!1,!0],this.presentation),r.call(function(){var i=[];angular.forEach(this.scope.parent.outcomeSymbols,function(e,t){i[t]=this.presentation.createAnimationTimeline("fastSymbolLand",0,!1,!0,e).animation},this)},[],this),this.containerFinalized?(r.set(s,{setY:this.finalStopPosition}),r.call(this.finalizeContainer,[],this),r.call(this.scope.parent.disableMask,[],this.scope.parent),r.call(this.resetContainer,[],this),r.set({},{},"+=0.001")):(r.set(s,{setY:this.fastSpinStopPosition}),r.call(this.finalizeContainer,[],this),r.call(this.scope.parent.disableMask,[],this.scope.parent),r.to(s,this.fastBounceDuration,{setY:this.finalStopPosition,ease:Elastic.easeOut.config(this.spinBounceAmplitude,this.spinBounceFrequency)}),r.call(this.resetContainer,[],this),r.resume()),r.call(this.presentation.createAnimationTimeline,["fastAllReelsStopped",0,!1,!0],this.presentation),this.iface.shouldInvokeMachinesReelsStopped(this.scope.model)&&r.call(this.presentation.createAnimationTimeline,["machinesReelsStopped",0,!1,!0,this.scope.parent.parent.parent],this.presentation),this.presentation.main.iface.onFastReelStopped&&r.call(this.presentation.main.iface.onFastReelStopped,[this.scope.parent,n],this.presentation.main.iface)},[],this),r.set({},{},"+=0.001")),r},sna.presentation.slot.SpinAnimation.prototype.resetContainer=function(){var e,t,i;this.containerReset||(this.containerReset=!0,e=this.scope.parent,t=e.scope.config,i=this.scope.parent.symbolsContainer,angular.forEach(e.outcomeSymbols,function(e){t.useResetContainerFinalPosition&&void 0!==e.scope.config.finalPositionY?e.setY(e.scope.config.finalPositionY,!0):(e.y+=i.y,e.scope.config.y=e.y)},this),angular.forEach(e.topSymbols,function(e){e.y+=i.y,e.scope.config.y=e.y},this),angular.forEach(e.bottomSymbols,function(e){e.y+=i.y,e.scope.config.y=e.y},this),i.setY(0),this.iface.game.getParameterValue("createSpinningSymbolsAfterSpinStop")||this.scope.parent.createSpinningSymbols())},sna.moduleName="tripleBellsRoosterMobsSlot",sna.module.ROOSTER_MOBS_DEPENDENCIES=["snaCore","snaSlot","snaPayline","tripleBellsProvider"],sna.module.roosterMobs=angular.module(sna.moduleName,sna.module.ROOSTER_MOBS_DEPENDENCIES),sna.model.roosterMobs={},sna.presentation.roosterMobs={},sna.service.roosterMobs={},sna.service.roosterMobs.ROOSTER_MOBS_GAME="RoosterMobsService",sna.service.roosterMobs.ROOSTER_MOBS_GAME_PROVIDER=sna.service.roosterMobs.ROOSTER_MOBS_GAME+sna.service.PROVIDER_SUFFIX,sna.service.roosterMobs.RoosterMobs=function(){sna.service.tripleBellsProvider.TripleBellsGame.call(this),this.name=sna.service.roosterMobs.ROOSTER_MOBS_GAME},sna.service.roosterMobs.RoosterMobs.prototype=Object.create(sna.service.tripleBellsProvider.TripleBellsGame.prototype),sna.service.roosterMobs.RoosterMobs.prototype.getFreeSpinMultiplier=function(){return"x"+(this.scope.game.feature&&this.scope.game.feature.multiplier||1)},sna.service.roosterMobs.RoosterMobs.prototype.setupTripleBells=sna.service.roosterMobs.RoosterMobs.prototype.setup,sna.service.roosterMobs.RoosterMobs.prototype.setup=function(e){this.setupTripleBells(e)},sna.service.roosterMobs.RoosterMobs.prototype.spinOutcomeTripleBells=sna.service.roosterMobs.RoosterMobs.prototype.spinOutcome,sna.service.roosterMobs.RoosterMobs.prototype.spinOutcome=function(e){this.removeEmptySymbols(e.reels),this.setRespin(e),this.setCascadeWin(e),this.spinOutcomeTripleBells(e),this.setNewMultiplier(e),this.removeBottomSymbols(e)},sna.service.roosterMobs.RoosterMobs.prototype.removeEmptySymbols=function(i){i&&i.middle&&i.middle.forEach(function(e,t){0!=t&&4!=t||(e.shift(),i.symbolFeatures.middle[t].shift())},this)},sna.service.roosterMobs.RoosterMobs.prototype.setReplay=function(e){e&&(this.removeEmptySymbols(e.reels),this.scope.game.replay=e)},sna.service.roosterMobs.RoosterMobs.prototype.removeBottomSymbols=function(e){e.reels.bottom||this.scope.game.reels.reels.forEach(function(e){e.bottomSymbols.length=0},this)},sna.service.roosterMobs.RoosterMobs.prototype.setRespin=function(e){this.scope.game.wasRespinActive=this.scope.game.isRespinActive||!1,this.scope.game.isRespinActive=e.hasRespin||!1,this.scope.game.wasFullRespinActive=this.scope.game.isFullRespinActive||!1,this.scope.game.isFullRespinActive=e.hasFullRespin||!1,this.scope.game.respinEnd=this.scope.game.wasRespinActive&&!this.scope.game.respinActive,this.scope.game.nudgeFeatureReels=e.nudgeReels},sna.service.roosterMobs.RoosterMobs.prototype.setCascadeWin=function(e){this.scope.game.cascadeWin=e.cascadeWin||0,this.scope.game.cascadeCoinsWin=e.cascadeCoinsWin||0},sna.service.roosterMobs.RoosterMobs.prototype.setNewMultiplier=function(e){e.newMultiplier&&(this.scope.game.newMultiplier=e.newMultiplier)},sna.service.roosterMobs.RoosterMobs.prototype.getBuyBonusPrice=function(e){return(this.scope.game.showValuesInCash?this.getBaseTotalBetInCash():this.getBaseTotalBetInCoins())*this.getBuyBonusPriceMultiplier(e)},sna.service.roosterMobs.RoosterMobs.prototype.isBigWinTripleBells=sna.service.roosterMobs.RoosterMobs.prototype.isBigWin,sna.service.roosterMobs.RoosterMobs.prototype.isBigWin=function(e){return!this.scope.game.isRespinActive&&this.isBigWinTripleBells(e)},sna.service.roosterMobs.RoosterMobs.prototype.getScatterCount=function(){return Math.max.apply(null,this.scope.game.scatterCount)},sna.service.roosterMobs.RoosterMobsProvider=function(){sna.service.tripleBellsProvider.TripleBellsGameProvider.call(this)},sna.service.roosterMobs.RoosterMobsProvider.prototype=Object.create(sna.service.tripleBellsProvider.TripleBellsGameProvider.prototype),sna.service.roosterMobs.RoosterMobsProvider.prototype._create=function(){return new sna.service.roosterMobs.RoosterMobs},sna.module.roosterMobs.provider(sna.service.roosterMobs.ROOSTER_MOBS_GAME,sna.service.roosterMobs.RoosterMobsProvider),sna.service.roosterMobs.ROOSTER_MOBS_INTERFACE="RoosterMobsInterfaceService",sna.service.roosterMobs.ROOSTER_MOBS_INTERFACE_PROVIDER=sna.service.roosterMobs.ROOSTER_MOBS_INTERFACE+sna.service.PROVIDER_SUFFIX,sna.service.roosterMobs.RoosterMobsInterface=function(){sna.service.tripleBellsProvider.TripleBellsInterface.call(this),this.name=sna.service.roosterMobs.ROOSTER_MOBS_INTERFACE,this.lastReel=-1},sna.service.roosterMobs.RoosterMobsInterface.prototype=Object.create(sna.service.tripleBellsProvider.TripleBellsInterface.prototype),sna.service.roosterMobs.RoosterMobsInterface.prototype.spinTripleBells=sna.service.roosterMobs.RoosterMobsInterface.prototype.spin,sna.service.roosterMobs.RoosterMobsInterface.prototype.spin=function(e,t){return this.lastReel=-1,this.spinTripleBells(e,t)},sna.service.roosterMobs.RoosterMobsInterface.prototype.processWrapperVisibilityOnRetriggerTripleBells=sna.service.roosterMobs.RoosterMobsInterface.prototype.processWrapperVisibilityOnRetrigger,sna.service.roosterMobs.RoosterMobsInterface.prototype.processWrapperVisibilityOnRetrigger=function(e,t){this.processWrapperVisibilityOnRetriggerTripleBells(e,t),this.updateWrapperGameMessage("EMPTY")},sna.service.roosterMobs.RoosterMobsInterface.prototype.playSpinStartAnimationTripleBells=sna.service.roosterMobs.RoosterMobsInterface.prototype.playSpinStartAnimation,sna.service.roosterMobs.RoosterMobsInterface.prototype.playSpinStartAnimation=function(){return this.scope.game.isRespinActive&&(this.updateWrapperButtonsState("LOCKED"),this.triggerEvent("disableReels")),this.triggerEvent("overrideSpinningSymbols"),this.playSpinStartAnimationTripleBells()},sna.service.roosterMobs.RoosterMobsInterface.prototype.processAfterSpinStopTripleBells=sna.service.roosterMobs.RoosterMobsInterface.prototype.processAfterSpinStop,sna.service.roosterMobs.RoosterMobsInterface.prototype.processAfterSpinStop=function(){var e=this.q.when(!0);return(this.scope.game.isRespinActive||!this.scope.game.isRespinActive&&this.scope.game.wasRespinActive)&&this.triggerEvent("enableReels"),e=(e=(e=(e=(e=e.then(this.processAfterSpinStopTripleBells.bind(this))).then(this.animateWildsConvertion.bind(this))).then(this.animateMultiplierConvertion.bind(this))).then(this.animateNudgingWilds.bind(this))).then(this.animateNudgeWildsFeatures.bind(this))},sna.service.roosterMobs.RoosterMobsInterface.prototype.animateWildsConvertion=function(){for(var e=this.presentation.getById("reels"),t=[],i=0;i<e.reels.length;i++)for(var n=e.reels[i],s=0;s<n.outcomeSymbols.length;s++){var r=n.outcomeSymbols[s];r.scope.model.isSymbolTypeWild()&&"sym11"==r.scope.model.type.name&&t.push(r)}return t.length?this.presentation.createAnimationTimeline("convertScatterToWild",0,!1,!0,null,t):this.q.when(!0)},sna.service.roosterMobs.RoosterMobsInterface.prototype.animateMultiplierConvertion=function(){for(var e=this.presentation.getById("reels"),t=[],i=0;i<e.reels.length;i++)for(var n=e.reels[i],s=0;s<n.outcomeSymbols.length;s++){var r=n.outcomeSymbols[s];r.scope.model.isSymbolTypeMystery()&&t.push(r)}return t.length?this.presentation.createAnimationTimeline("convertMysteryToMultiplier",0,!1,!0,null,t):this.q.when(!0)},sna.service.roosterMobs.RoosterMobsInterface.prototype.animateNudgingWilds=function(){var i=this.presentation.getById("reels");if(this.game.isInFreeSpins()&&this.presentation.createAnimationTimeline("updateMultiplier",0,!1,!0,null),this.scope.game.nudgeFeatureReels&&this.scope.game.nudgeFeatureReels.length){var e=this.scope.game.nudgeFeatureReels.filter(function(e){return e.isNew});if(e&&e.length){var n=[];return e.forEach(function(e){var t=[];i.reels[e.ri].outcomeSymbols.forEach(function(e){e.scope.model.isSymbolTypeWild()&&"sym11"!=e.scope.model.type.name&&"sym30"!=e.scope.model.type.name&&t.push(e)},this),n.push(this.prepareWildsModel(e,t))},this),this.presentation.createAnimationTimeline("nudgingWildStart",0,!1,!0,null,n)}}return this.q.when(!0)},sna.service.roosterMobs.RoosterMobsInterface.prototype.getWinCounetrYPosition=function(e){return this.scope.game.isBigWin?80:0},sna.service.roosterMobs.RoosterMobsInterface.prototype.shouldRunSymbolWinAnimation=function(){return!(this.isUKGC()&&this.game.isWinLessThanBet()||this.scope.game.isRespinActive)},sna.service.roosterMobs.RoosterMobsInterface.prototype.animateNudgeWildsFeatures=function(){var e,t,i=this.q.when(!0);return this.scope.game.nudgeFeatureReels&&this.scope.game.nudgeFeatureReels.length&&(e=this.scope.game.nudgeFeatureReels.find(function(e){return"collect"==e.type},this),t=this.scope.game.nudgeFeatureReels.find(function(e){return"split"==e.type},this),e&&e.symbols.length&&(i=i.then(this.presentation.createAnimationTimeline.bind(this.presentation,"collectorWild",0,!1,!0,null,e))),t&&t.symbols.length&&(i=i.then(this.presentation.createAnimationTimeline.bind(this.presentation,"spliterWild",0,!1,!0,null,t)))),i},sna.service.roosterMobs.RoosterMobsInterface.prototype.prepareWildsModel=function(e,t){for(var i={ri:e.ri,si:[]},n=0;n<t.length;n++)i.si.push(t[n].scope.model.index);return i},sna.service.roosterMobs.RoosterMobsInterface.prototype.afterWinPresentationTripleBellsInterface=sna.service.roosterMobs.RoosterMobsInterface.prototype.afterWinPresentation,sna.service.roosterMobs.RoosterMobsInterface.prototype.afterWinPresentation=function(){var e=this.q.when(!0);return e=this.scope.game.isRespinActive?(e=(e=(e=e.then(this.presentation.createAnimationTimeline.bind(this.presentation,"respinDialog",0,!1,!0,null))).then(this.createTimerPromise.bind(this,.5))).then(this.setFlagsForNextRespin.bind(this)),(e=this.scope.game.feature&&this.scope.game.feature.retrigger?e.then(this.updateFeature.bind(this,this.scope.game.feature)):e).then(this.spinSlotInterface.bind(this))):(e=e.then(this.setFlagsForRespinComplete.bind(this))).then(this.afterWinPresentationTripleBellsInterface.bind(this))},sna.service.roosterMobs.RoosterMobsInterface.prototype.setFlagsForNextRespin=function(){this.winInProgress=!1,this.spinInProgress=!0,this.roundCompleteDeferred&&this.roundCompleteDeferred.resolve()},sna.service.roosterMobs.RoosterMobsInterface.prototype.setFlagsForRespinComplete=function(){this.winInProgress=!1,this.spinInProgress=!1,this.winSumDone=!0},sna.service.roosterMobs.RoosterMobsInterface.prototype.playWinSumAnimationTripleBells=sna.service.roosterMobs.RoosterMobsInterface.prototype.playWinSumAnimation,sna.service.roosterMobs.RoosterMobsInterface.prototype.playWinSumAnimation=function(){var e=this.scope.game.nudgeFeatureReels.find(function(e){return"collect"==e.type&&e.symbols.length},this),t=this.q.when(!0);return t=(t=e?t.then(this.presentation.createAnimationTimeline.bind(this.presentation,"collectorWin",1,!1,!0,null,e)):t).then(this.playWinSumAnimationTripleBells.bind(this))},sna.service.roosterMobs.RoosterMobsInterface.prototype.playScatterLandingSound=function(e){var t="scatterLanding";this.activeReelIndex=e.reel.index,t+=this.activeReelIndex.toString(),this.sound.sounds[t]&&(this.sound.stopSound(t),this.sound.playSound(t,!1))},sna.service.roosterMobs.RoosterMobsInterface.prototype.playWildLandingSound=function(e){e.reel.index!==this.lastReel&&this.sound.sounds.WildSymLand&&this.sound.playSound("WildSymLand",!1),this.lastReel=e.reel.index},sna.service.roosterMobs.RoosterMobsInterface.prototype.getAnticipationSound=function(e){return"Anticipation"+e.index},sna.service.roosterMobs.RoosterMobsInterface.prototype.shouldHandleWinAnimations=function(){return this.scope.game.totalWin&&!this.isMaxWinReached()},sna.service.roosterMobs.RoosterMobsInterface.prototype.handleWinAnimationsTripleBells=sna.service.roosterMobs.RoosterMobsInterface.prototype.handleWinAnimations,sna.service.roosterMobs.RoosterMobsInterface.prototype.handleWinAnimations=function(){return this.scope.game.totalWin&&this.presentation.createAnimationTimeline("_lightning",0,!1,!0,null),this.handleWinAnimationsTripleBells()},sna.service.roosterMobs.RoosterMobsInterface.prototype.onSpinStartTripleBells=sna.service.roosterMobs.RoosterMobsInterface.prototype.onSpinStart,sna.service.roosterMobs.RoosterMobsInterface.prototype.onSpinStart=function(){return this.fsRetrigger=!1,this.onSpinStartTripleBells()},sna.service.roosterMobs.RoosterMobsInterface.prototype.getFsLeft=function(){if(this.scope.game.feature)return!this.game.gameStateRestored()||this.fsRetrigger||this.scope.game.feature.start?!this.fsRetrigger&&this.scope.game.feature.retrigger?this.scope.game.feature.total-(this.scope.game.feature.retriggerCount+this.scope.game.feature.total-this.scope.game.feature.left):this.scope.game.feature.left:this.scope.game.feature.restoreLeft},sna.service.roosterMobs.RoosterMobsInterface.prototype.additionalHandleWinCountUpCondition=function(){return!0},sna.service.roosterMobs.RoosterMobsInterface.prototype.onProcessOutcomeAnimationsTripleBells=sna.service.roosterMobs.RoosterMobsInterface.prototype.onProcessOutcomeAnimations,sna.service.roosterMobs.RoosterMobsInterface.prototype.onProcessOutcomeAnimations=function(){return this.onProcessOutcomeAnimationsTripleBells()},sna.service.roosterMobs.RoosterMobsInterface.prototype.onReelLand=function(e){this.processScatterAttentionAnimation(e)},sna.service.roosterMobs.RoosterMobsInterface.prototype.onFastReelStopped=function(e){4===e.scope.model.index&&this.processScatterAttentionAnimation(e)},sna.service.roosterMobs.RoosterMobsInterface.prototype.processScatterAttentionAnimation=function(e){if(this.game.isInBaseGame()&&!this.scope.lastResult.outcome.buyBonusOutcome){var t=e.scope.model.index,e=e.scope.model.scatterCount,i=1<=e,n=this.lastReelScatterCount!==e,s=4===t;if(i||s)for(var r=this.presentation.getById("reels").reels,o=0;o<=t;o++)for(var a=r[o],l=0;l<a.outcomeSymbols.length;l++){var h=a.outcomeSymbols[l],c=h.symbolPresentation;s?i&&c.setInitialAnimation&&c.setInitialAnimation():(h.scope.model.isSymbolTypeScatter()||h.scope.model.isSymbolTypeWild()&&"sym11"==h.scope.model.type.name&&!this.game.isInFreeSpins())&&n&&(h.animations.symbolLand.stop(),h.bringToFront(),c.children[0].gotoAndPlay("action",!0))}this.lastReelScatterCount=e}},sna.service.roosterMobs.RoosterMobsInterface.prototype.getBuyBonusOptions=function(){var e=sna.service.DEFAULT_ASSET_PATH+this.scope.layout.selectedSize.path;return[{description:this.scope.translations.YOU_WON_FREE_SPINS.replace("+{0} ",""),betMultiplier:100,backgroundLandscapeUrl:e+"overlay_desktop_1.png",backgroundPortraitUrl:e+"overlay_portrait_1.png",onClick:this.onBuyBonusFirstCardClicked.bind(this,"btn_num1")},{description:this.scope.translations.BUY_MOBSTER_BONUS,betMultiplier:50,backgroundLandscapeUrl:e+"overlay_desktop_2.png",backgroundPortraitUrl:e+"overlay_portrait_2.png",onClick:this.onBuyBonusSecondCardClicked.bind(this,"btn_num2")}]},sna.service.roosterMobs.RoosterMobsInterface.prototype.setRetriggerCount=function(){return"+"+this.scope.game.feature.retriggerCount},sna.service.roosterMobs.RoosterMobsInterface.prototype.onBuyBonusFirstCardClicked=function(e){this.isDialogOpened=!1;var t=this.q.when(!0);return t=(t=(t=(t=(t=(t=t.then(this.disableInterface.bind(this))).then(this.communication.updateBetConfiguration.bind(this.communication,this.getSpinRequestParams()))).then(this.communication.activateBuyFeature.bind(this.communication,e))).then(this.processActivateBuyResponse.bind(this))).then(this.startFirstBuyBonus.bind(this))).then(this.processAfterWinPresentation.bind(this))},sna.service.roosterMobs.RoosterMobsInterface.prototype.startFirstBuyBonus=function(e){return this.buyFeatureActivated=!0,this.scope.game._buyBonusActivated=!0,this.sendSpinRequest().then(function(e){return this.setSpinResult(e)}.bind(this))},sna.service.roosterMobs.RoosterMobsInterface.prototype.onBuyBonusSecondCardClicked=function(e){this.isDialogOpened=!1;var t=this.q.when(!0);return t=(t=(t=(t=t.then(this.disableInterface.bind(this))).then(this.communication.updateBetConfiguration.bind(this.communication,this.getSpinRequestParams()))).then(this.communication.activateBuyFeature.bind(this.communication,e))).then(this.startSecondBuyBonus.bind(this))},sna.service.roosterMobs.RoosterMobsInterface.prototype.setMaxWinReachText=function(){},sna.service.roosterMobs.RoosterMobsInterface.prototype.startSecondBuyBonus=function(e){return this.activeTotalWin=0,this.activeCountWin=0,this.buyFeatureActivated=!0,this.scope.game._buyBonusActivated=!0,this.spinInProgress=!0,this.blockSpinInterface(),this.updateWrapperGameMessage("EMPTY"),this.playSpinStartAnimation().then(this.processSpinResult.bind(this,e[0]))},sna.service.roosterMobs.RoosterMobsInterface.prototype.setFeatureMultiplier=function(e){return"X"+(this.scope.game.feature.multiplier+e)},sna.service.roosterMobs.RoosterMobsInterface.prototype.handlePlaceBetBalance=function(){this.scope.game.isRespinActive||this.game.spin(!1)},sna.service.roosterMobs.RoosterMobsInterface.prototype.fastStopTripleBells=sna.service.roosterMobs.RoosterMobsInterface.prototype.fastStop,sna.service.roosterMobs.RoosterMobsInterface.prototype.fastStop=function(e){return this.pickerOutcome?this.q.when(!0):this.fastStopTripleBells(e)},sna.service.roosterMobs.RoosterMobsInterface.prototype.processSpinResultTripleBells=sna.service.roosterMobs.RoosterMobsInterface.prototype.processSpinResult,sna.service.roosterMobs.RoosterMobsInterface.prototype.processSpinResult=function(e){return this.pickerOutcome=null,this.processSpinResultTripleBells(e)},sna.service.roosterMobs.RoosterMobsInterface.prototype.playMiniFeatureTripleBells=sna.service.roosterMobs.RoosterMobsInterface.prototype.playMiniFeature,sna.service.roosterMobs.RoosterMobsInterface.prototype.playMiniFeature=function(e){return this.q.when(!0).then(this.playMiniFeatureTripleBells.bind(this,e))},sna.service.roosterMobs.RoosterMobsInterface.prototype.shouldRestoreSuperStake=function(){try{var e=this.scope.game.restoreData;if(e&&e.previousOutcome)return 0!==Number(e.previousOutcome.win)||e.previousOutcome.hasRespin}catch(e){return!1}},sna.service.roosterMobs.RoosterMobsInterface.prototype.processSuperStakeDialogTripleBells=sna.service.roosterMobs.RoosterMobsInterface.prototype.processSuperStakeDialog,sna.service.roosterMobs.RoosterMobsInterface.prototype.processSuperStakeDialog=function(){var e=this.scope.game.restoreData;if(e){e=e.previousOutcome;if(e&&e.hasRespin)return this.q.when(!0)}return this.processSuperStakeDialogTripleBells()},sna.service.roosterMobs.RoosterMobsInterface.prototype.processAfterWinPresentationTripleBellsMegaways=sna.service.roosterMobs.RoosterMobsInterface.prototype.processAfterWinPresentation,sna.service.roosterMobs.RoosterMobsInterface.prototype.processAfterWinPresentation=function(){var e=this.q.when(!0);return e=(e=e.then(this.processFreeSpinsGamble.bind(this))).then(this.processAfterWinPresentationTripleBellsMegaways.bind(this))},sna.service.roosterMobs.RoosterMobsInterface.prototype.processFreeSpinsGamble=function(){this.scope.game.miniFeature=null;var e=this.scope.lastResult.outcome.features;if(e)return e.freespinsGamble?(this.presentation.createGameModePresentation("wheel"),this.presentation.createAnimationTimeline("fsBefore",0,!1,!0,null).then(this.animateShowWheel.bind(this))):e.freespins&&e.freespins.start?this.presentation.createAnimationTimeline("fsBefore",0,!1,!0,null):void 0},sna.service.roosterMobs.RoosterMobsInterface.prototype.waitForWheelToFinish=function(){var e,t=this.q.when(!0);return this.isInReplay()&&(e=(e=this.communication).commLog[e.commLogIndex].request.game.input.event.button,t=t.then(this.createTimerPromise.bind(this,1)),t="btn_num1"==e?t.then(this.startWheel.bind(this)):t.then(this.cancelWheel.bind(this))),this.q.all([t,this.wheelDeferred.promise])},sna.service.roosterMobs.RoosterMobsInterface.prototype.startWheel=function(e){this.scope.game.wheelGambleOutcome=0,this.setButtonsState(["continueWheel","cancelWheel"],!1);this.presentation.getById("wheelContainer");return this.presentation.createAnimationTimeline("animateFsWheelStart",0,!1,!0,null),this.communication.gambleFreeSpins("btn_num1").then(this.processGambleFreeSpinsResponse.bind(this)).then(this.createTimerPromise.bind(this,4)).then(this.presentation.createAnimationTimeline.bind(this.presentation,"animateFsWheelEnd",0,!1,!0,null)).then(this.processWheelGambleOutcome.bind(this))},sna.service.roosterMobs.RoosterMobsInterface.prototype.cancelWheel=function(e){return this.setButtonsState(["continueWheel","cancelWheel"],!1),this.communication.gambleFreeSpins("btn_num0").then(this.processGambleFreeSpinsResponse.bind(this)).then(this.finishWheel.bind(this))},sna.service.roosterMobs.RoosterMobsInterface.prototype.processGambleFreeSpinsResponse=function(e){this.wheelOutcome=null,this.wheelGambleLost=!1,this.scope.game.feature||(this.scope.game.feature=angular.copy(this.scope.game.freespins)),e.freeSpins&&(this.scope.lastResult.outcome.features={},this.scope.lastResult.outcome.features.freespins=e.freeSpins,this.scope.game.wheelGambleOutcome=!0,this.wheelOutcome="won",this.scope.game.feature.spins=e.freeSpins.total),e.wheelGambleWon&&(this.scope.game.wheelGambleOutcome=e.wheelGambleOutcome,this.wheelOutcome="won",this.scope.game.feature.spins=e.wheelGambleOutcome),e.wheelGambleLost&&(delete this.scope.lastResult.outcome.features,this.scope.game.numOfSpins=this.scope.game.feature.spins,this.scope.game.feature=null,this.wheelOutcome="lost",this.wheelGambleLost=!0)},sna.service.roosterMobs.RoosterMobsInterface.prototype.finishWheel=function(){return this.presentation.createAnimationTimeline("finsihWheel",0,!1,!0,null).then(this.markWheelFinished.bind(this))},sna.service.roosterMobs.RoosterMobsInterface.prototype.markWheelFinished=function(){return this.presentation.destroyGameModePresentation("wheel"),this.buyFeatureDialogOpened=!1,this.wheelDeferred.resolve()},sna.service.roosterMobs.RoosterMobsInterface.prototype.updateFeature=function(e,t,i){var n=angular.copy(this.scope.config.slotFeatures[e.name]);this.scope.game.feature=e,n.skipRetriggerConfirmation=this.game.getScatterCount()<3;var s,r=this.q.when(!0);return n.picker&&(s=n.picker,this.fsPickerFeatureGameModeActive(e,s)&&s&&s.gameMode&&s.useForRetrigger&&(r=r.then(this.processFeaturePicker.bind(this,e)))),e.retrigger&&(r=(r=(r=r.then(this.setupRetriggerConfirmation.bind(this,e,n))).then(this.playRetriggerAnimation.bind(this,e,n))).then(this.processRetriggerConfirmation.bind(this,e,n)),r=(r=(r=this.game.getScatterCount()<3?r.then(this.createTimerPromise.bind(this,1)):r).then(this.playRetriggerEndAnimation.bind(this,e,n))).then(this.presentation.createAnimationTimeline.bind(this.presentation,"fsRetriggerUpdate",0,!1,!0,null))),r=(r=r.then(this.presentation.createAnimationTimeline.bind(this.presentation,e.name+"Update",0,!1,!0,null))).then(this.updateFreeSpinsCounterOnFeatureUpdate.bind(this,null))},sna.service.roosterMobs.RoosterMobsInterface.prototype.updateFooterWinPresentationTripleBells=sna.service.roosterMobs.RoosterMobsInterface.prototype.updateFooterWinPresentation,sna.service.roosterMobs.RoosterMobsInterface.prototype.updateFooterWinPresentation=function(){return this.winSumDone=!0,this.updateFooterWinPresentationTripleBells()},sna.service.roosterMobs.RoosterMobsInterface.prototype.processWheelGambleOutcome=function(e){if(this.wheelGambleLost)return this.showWheelGambleLost().then(this.afterWheelGambleLost.bind(this)).then(this.markWheelFinished.bind(this));var t=this.q.when(!0);return t=(t=t.then(this.showWheelGambleWon.bind(this))).then(this.prepareNextWheelSpin.bind(this)),t=this.isInReplay()?t.then(this.waitForWheelToFinish.bind(this)):t},sna.service.roosterMobs.RoosterMobsInterface.prototype.showWheelGambleLost=function(){return this.presentation.createAnimationTimeline("wheelGambleLost",0,!1,!0,null)},sna.service.roosterMobs.RoosterMobsInterface.prototype.afterWheelGambleLost=function(){return this.buyFeatureActivated?this.q.when(!0):this.presentation.createAnimationTimeline("returnToBaseGame",0,!1,!0,null)},sna.service.roosterMobs.RoosterMobsInterface.prototype.showWheelGambleWon=function(){return this.presentation.createAnimationTimeline("wheelGambleWon",0,!1,!0,null)},sna.service.roosterMobs.RoosterMobsInterface.prototype.prepareNextWheelSpin=function(){if((this.scope.lastResult.outcome.features||{}).freespins){var e=this.q.when(!0);return e=(e=e.then(this.createTimerPromise.bind(this,.5))).then(this.finishWheel.bind(this))}return this.setButtonsState(["continueWheel","cancelWheel"],!0),this.presentation.createAnimationTimeline("wheelGambleUpgrade",0,!1,!0,null)},sna.service.roosterMobs.RoosterMobsInterface.prototype.animateShowWheel=function(){return this.wheelDeferred=this.q.defer(),this.presentation.createAnimationTimeline("showWheel",0,!1,!0,null).then(this.waitForWheelToFinish.bind(this))},sna.service.roosterMobs.RoosterMobsInterface.prototype.getRetriggerTrans=function(){return this.scope.translations.YOU_WON_FREE_SPINS.replace("+{0} ","")},sna.service.roosterMobs.RoosterMobsInterfaceProvider=function(){sna.service.tripleBellsProvider.TripleBellsInterfaceProvider.call(this)},sna.service.roosterMobs.RoosterMobsInterfaceProvider.prototype=Object.create(sna.service.tripleBellsProvider.TripleBellsInterfaceProvider.prototype),sna.service.roosterMobs.RoosterMobsInterfaceProvider.prototype._create=function(){return decorateInterfacePrototype(sna.service.roosterMobs.RoosterMobsInterface.prototype),new sna.service.roosterMobs.RoosterMobsInterface},sna.module.roosterMobs.provider(sna.service.roosterMobs.ROOSTER_MOBS_INTERFACE,sna.service.roosterMobs.RoosterMobsInterfaceProvider),sna.service.roosterMobs.RoosterMobsInterface.prototype.getTitleRules=function(){this.currentURL=this.currentURL||(window.SNA||{}).basePath||"./";var e="",t="<div><h3>"+this.game.getParameterValue("gameName")+"</h3>"+this.presentation.scope.translations.GAME_DESCRIPTION_ROOSTER_MOBS+"</div>",i="<div>"+this.presentation.scope.translations.RULES_SETTINGS_GAME_RULES_RTP_NEW.replace("{0}",this.getRTP())+"</div>",n="<div>"+this.presentation.scope.translations.GAME_DESCRIPTION_ZZ_2+"</div>",s="<div>"+this.presentation.scope.translations.DISCLAIMER_90_MINUTES_NEW+"</div>",r="<div>"+this.presentation.scope.translations.PAYLINES_SELECTED+"<br/>"+this.presentation.scope.translations.PAYLINE_WINS_ADDED+"<br/>"+this.presentation.scope.translations.PAYLINES_PAYOUTS_MULTI+"<br/>"+this.presentation.scope.translations.PAYLINES_FREE_GAMES_NO_LINES+"<br/>"+this.presentation.scope.translations.FREE_SPINS_RETRIGGER_IT+"</div>";return e+=t,e+="<br/><br/>",this.isVisibleSuperStake()&&(e+=n,e+="<br/><br/>"),e+=i,e+="<br/><br/>",e+=s,e+="<br/><br/>",e+=r},sna.service.roosterMobs.RoosterMobsInterface.prototype.getPaytable=function(){return this.currentURL=this.currentURL||(window.SNA||{}).basePath||"./",'<div class="rowBlock decor" style = "text-align: left; margin-bottom: 10px"><div class="rowImageBlock" style = "top: auto;"><img src="'+this.currentURL+'assets/paytable/wild.png" style="height: 300px"/></div><div class="rowTextBlock"><h3>'+this.scope.translations.WILD_SYMBOLS_HEADER_VD+"</h3>"+this.scope.translations.PAYTABLE_SETTINGS_WILD_SECTION_DESCRIPTION_1+"<br />"+this.scope.translations.PAYTABLE_SETTINGS_WILD_SECTION_DESCRIPTION_2+'<br /><br /></div></div><div class="rowBlock decor" style = "text-align: left; margin-bottom: 10px"><div class="rowImageBlock" style = "top: auto;"><img src="'+this.currentURL+'assets/paytable/scatter.png" style="height: 300px"/></div><div class="rowTextBlock"><h3>'+this.scope.translations.FREE_SPINS+"</h3>"+this.scope.translations.BONUS_SYMBOLS_DESCRIPTION2+"<br />"+this.scope.translations.FREE_SPINS_MULTIPLIER_1+"<br />"+this.scope.translations.FREE_SPINS_MULTIPLIER_2+"<br />"+this.scope.translations.FREE_SPINS_MULTIPLIER_3+"<br />"+this.scope.translations.FREE_SPINS_RETRIGGER_1+"<br />"+this.scope.translations.FREE_SPINS_RETRIGGER_2.replace("\n","<br />").replace("{1}","1").replace("{2}","1").replace("{1}","2").replace("{2}","2")+"<br />"+this.scope.translations.FREE_SPINS_RETRIGGER_3+'<br /><br /><br /></div></div><div class="rowBlock decor" style = "text-align: left; margin-bottom: 10px"><div class="rowImageBlock" style = "top: auto;"><img src="'+this.currentURL+'assets/paytable/RM_Gamble.png" style="height: 300px"/></div><div class="rowTextBlock"><h3>'+this.scope.translations.FREE_SPINS_GAMBLE_HEADER+"</h3>"+this.scope.translations.PAYTABLE_FREE_SPINS_GAMBLE_DESCRIPTION_1+"<br />"+this.scope.translations.PAYTABLE_FREE_SPINS_GAMBLE_DESCRIPTION_2+'<br /><br /></div></div><div class="rowBlock decor" style = "text-align: left; margin-bottom: 10px"><div class="rowImageBlock" style = "top: auto;"><img src="'+this.currentURL+'assets/paytable/three_modifiers.png" style="height: 300px"/></div><div class="rowTextBlock"><h3>'+this.scope.translations.REEL_MODIFIERS_HEADER+"</h3>"+this.scope.translations.REEL_MODIFIERS_DESCRIPTION_1+"<br />"+this.scope.translations.REEL_MODIFIERS_DESCRIPTION_2+'<br /><br /><br /><br /></div></div><div class="rowBlock decor" style = "text-align: left; margin-bottom: 10px"><div class="rowImageBlock" style = "top: auto;"><img src="'+this.currentURL+'assets/paytable/reel_modifier_1.png" style="height: 300px"/></div><div class="rowTextBlock"><h3>'+this.scope.translations.REEL_MODIFIER_ONE_HEADER+"</h3>"+this.scope.translations.REEL_MODIFIER_ONE_DESCRIPTION+'<br /><br /><br /><br /><br /><br /></div></div><div class="rowBlock decor" style = "text-align: left; margin-bottom: 10px"><div class="rowImageBlock" style = "top: auto;"><img src="'+this.currentURL+'assets/paytable/reel_modifier_2.png" style="height: 300px"/></div><div class="rowTextBlock"><h3>'+this.scope.translations.REEL_MODIFIER_TWO_HEADER+"</h3>"+this.scope.translations.REEL_MODIFIER_TWO_DESCRIPTION_1+'<br /><br /><br /><br /><br /></div></div><div class="rowBlock decor" style = "text-align: left; margin-bottom: 10px"><div class="rowImageBlock" style = "top: auto;"><img src="'+this.currentURL+'assets/paytable/money_stack_x50.png" style="height: 300px"/></div><div class="rowTextBlock"><h3>'+this.scope.translations.MONEY_STACK_HEADER+"</h3>"+this.scope.translations.MONEY_STACK_DESCRIPTION_1+"</h3>"+this.scope.translations.MONEY_STACK_DESCRIPTION_2+'<br /><br /><br /><br /><br /><br /></div></div><div class="rowBlock decor" style = "text-align: left; margin-bottom: 10px"><div class="rowImageBlock" style = "top: auto;"><img src="'+this.currentURL+'assets/paytable/reel_modifier_3.png" style="height: 300px"/></div><div class="rowTextBlock"><h3>'+this.scope.translations.REEL_MODIFIER_THREE_HEADER+"</h3>"+this.scope.translations.REEL_MODIFIER_THREE_DESCRIPTION+"<br /><br /><br /><br /><br /><br /></div></div>"+this.getBuyButtonSection()+'<div class="rowBlock decor" style = "text-align: left;"><div class="rowTextBlock payout" style = "gap: 30px;"><div class="symbolPayoutBlock" style="padding: 0px 5px;"><img src="'+this.currentURL+'assets/paytable/hv5.png" style = "width: 80%; float: left; padding: 0px;"><div style = "width: 45%; float: right; padding: 0px 5px; white-space: nowrap; font-size: 1.9rem;">5: <b>'+(this.getPayoutBySymbolName("sym10")[4]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+"</b><br>4: <b>"+(this.getPayoutBySymbolName("sym10")[3]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+"</b><br>3: <b>"+(this.getPayoutBySymbolName("sym10")[2]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+'</b><br></div></div><div class="symbolPayoutBlock" style="padding: 0px 5px;"><img src="'+this.currentURL+'assets/paytable/hv4.png" style = "width: 80%; float: left; padding: 0px;"><div style = "width: 45%; float: right; padding: 0px 5px; white-space: nowrap; font-size: 1.9rem;">5: <b>'+(this.getPayoutBySymbolName("sym08")[4]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+"</b><br>4: <b>"+(this.getPayoutBySymbolName("sym08")[3]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+"</b><br>3: <b>"+(this.getPayoutBySymbolName("sym08")[2]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+'</b><br></div></div><div class="symbolPayoutBlock" style="padding: 0px 5px;"><img src="'+this.currentURL+'assets/paytable/hv3.png" style = "width: 80%; float: left; padding: 0px;"><div style = "width: 45%; float: right; padding: 0px 5px; white-space: nowrap; font-size: 1.9rem;">5: <b>'+(this.getPayoutBySymbolName("sym09")[4]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+"</b><br>4: <b>"+(this.getPayoutBySymbolName("sym09")[3]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+"</b><br>3: <b>"+(this.getPayoutBySymbolName("sym09")[2]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+'</b><br></div></div><div class="symbolPayoutBlock" style="padding: 0px 5px;"><img src="'+this.currentURL+'assets/paytable/hv2.png" style = "width: 80%; float: left; padding: 0px;"><div style = "width: 45%; float: right; padding: 0px 5px; white-space: nowrap; font-size: 1.9rem;">5: <b>'+(this.getPayoutBySymbolName("sym07")[4]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+"</b><br>4: <b>"+(this.getPayoutBySymbolName("sym07")[3]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+"</b><br>3: <b>"+(this.getPayoutBySymbolName("sym07")[2]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+'</b><br></div></div><div class="symbolPayoutBlock" style="padding: 0px 5px;"><img src="'+this.currentURL+'assets/paytable/hv1.png" style = "width: 80%; float: left; padding: 0px;"><div style = "width: 45%; float: right; padding: 0px 5px; white-space: nowrap; font-size: 1.9rem;">5: <b>'+(this.getPayoutBySymbolName("sym06")[4]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+"</b><br>4: <b>"+(this.getPayoutBySymbolName("sym06")[3]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+"</b><br>3: <b>"+(this.getPayoutBySymbolName("sym06")[2]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+'</b><br></div></div><div class="symbolPayoutBlock" style="padding: 0px 5px;"><img src="'+this.currentURL+'assets/paytable/LV5.png" style = "width: 80%; float: left; padding: 0px;"><div style = "width: 45%; float: right; padding: 0px 5px; white-space: nowrap; font-size: 1.9rem;">5: <b>'+(this.getPayoutBySymbolName("sym05")[4]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+"</b><br>4: <b>"+(this.getPayoutBySymbolName("sym05")[3]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+"</b><br>3: <b>"+(this.getPayoutBySymbolName("sym05")[2]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+'</b><br></div></div><div class="symbolPayoutBlock" style="padding: 0px 5px;"><img src="'+this.currentURL+'assets/paytable/LV4.png" style = "width: 80%; float: left; padding: 0px;"><div style = "width: 45%; float: right; padding: 0px 5px; white-space: nowrap; font-size: 1.9rem;">5: <b>'+(this.getPayoutBySymbolName("sym04")[4]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+"</b><br>4: <b>"+(this.getPayoutBySymbolName("sym04")[3]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+"</b><br>3: <b>"+(this.getPayoutBySymbolName("sym04")[2]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+'</b><br></div></div><div class="symbolPayoutBlock" style="padding: 0px 5px;"><img src="'+this.currentURL+'assets/paytable/LV3.png" style = "width: 85%; float: left; padding: 0px;"><div style = "width: 45%; float: right; padding: 0px 5px; white-space: nowrap; font-size: 1.9rem;">5: <b>'+(this.getPayoutBySymbolName("sym03")[4]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+"</b><br>4: <b>"+(this.getPayoutBySymbolName("sym03")[3]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+"</b><br>3: <b>"+(this.getPayoutBySymbolName("sym03")[2]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+'</b><br></div></div><div class="symbolPayoutBlock" style="padding: 0px 5px;"><img src="'+this.currentURL+'assets/paytable/LV2.png" style = "width: 80%; float: left; padding: 0px;"><div style = "width: 45%; float: right; padding: 0px 5px; white-space: nowrap; font-size: 1.9rem;">5: <b>'+(this.getPayoutBySymbolName("sym02")[4]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+"</b><br>4: <b>"+(this.getPayoutBySymbolName("sym02")[3]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+"</b><br>3: <b>"+(this.getPayoutBySymbolName("sym02")[2]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+'</b><br></div></div><div class="symbolPayoutBlock" style="padding: 0px 5px;"><img src="'+this.currentURL+'assets/paytable/LV1.png" style = "width: 80%; float: left; padding: 0px;"><div style = "width: 45%; float: right; padding: 0px 5px; white-space: nowrap; font-size: 1.9rem;">5: <b>'+(this.getPayoutBySymbolName("sym01")[4]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+"</b><br>4: <b>"+(this.getPayoutBySymbolName("sym01")[3]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+"</b><br>3: <b>"+(this.getPayoutBySymbolName("sym01")[2]*this.scope.game.coinValue*this.scope.game.defaultBet).toFixed(2).toString()+'</b><br></div></div></div></div><div class="rowBlock" style = "text-align: left; margin-left: 80px; font-weight: bold;"><h3>'+this.scope.translations.PAYTABLE_PAY_WAYS+"</h3>"+this.scope.translations.PAY_WAYS_PAYING+"<br/>"+this.scope.translations.WIN_LINES_DESCRIPTION2+"<br/>"+this.scope.translations.SYMBOLS_PAY_LEFT_RIGHT+"<br/>"+this.scope.translations.WIN_LINES_DESCRIPTION5+"<br/>"+this.scope.translations.PAYTABLE_PAY_WAYS_DESRIPTION_4+"<br/>"+this.scope.translations.MEGAWAYS_TM_DESCRIPTION4+'<br/><br/><div style = "text-align: center;"><img style ="max-width: 100%; height: auto; margin-right: 100%;" src="'+this.currentURL+'assets/paytable/WinLines.png" /></div></div>'},sna.service.roosterMobs.RoosterMobsInterface.prototype.setMaxWinReachedPaytableText=function(){return this.scope.translations.WIN_LINES_DESCRIPTION6.replace("5 000","15 000")},sna.service.roosterMobs.RoosterMobsInterface.prototype.getSuperstakePaytableSection=function(){var e="";return this.isVisibleSuperStake()&&(e+='<div class="rowBlock decor" style = "text-align: left;"><div class="rowImageBlock" style = "top: auto;"><img src= /></div><div class="rowTextBlock"><h3>'+this.scope.translations.SUPERSTAKE_MODE+"</h3>"+this.scope.translations.SUPER_STAKE_DESCRIPTION_BEER_TOWER+"<br/><br/>"+this.scope.translations.SUPER_STAKE_DESCRIPTION_COMMON+"<br/><br/></div></div>"),e},sna.service.roosterMobs.RoosterMobsInterface.prototype.getBuyButtonSection=function(){var e="";return this.getFeatureBuyPresentInGame()||(e+='<div class="rowBlock decor" style = "text-align: left;"><div class="rowImageBlock" style = "top: auto;"><div style="position: relative;text-align: bottom;"><img src="'+this.currentURL+'assets/paytable/Layer 6915.png" /></div></div><div class="rowTextBlock"><h3>'+this.scope.translations.BUY_FEATURE_HEADER+"</h3>"+this.scope.translations.BUY_FEATURE_DESCRIPTION_1+"<br/>"+this.scope.translations.BUY_FEATURE_DESCRIPTION_2+"<br/>"+this.scope.translations.BUY_FEATURE_DESCRIPTION_3+"<br/><br/><br /><br /></div></div>"),e},sna.service.roosterMobs.RoosterMobsInterface.prototype.getPayoutBySymbolName=function(e){for(var t=0;t<this.scope.config.slot.symbols.length;t++)if(this.scope.config.slot.symbols[t].name==e)return this.scope.config.slot.symbols[t].payouts},sna.service.tripleBellsProvider.ROOSTER_MOBS_COMMUNICATION="RoosterMobsCommunicationService",sna.service.tripleBellsProvider.RoosterMobsCommunicationService=function(e){sna.service.tripleBellsProvider.TripleBellsCommunicationService.call(this,e),this.name=sna.service.tripleBellsProvider.ROOSTER_MOBS_COMMUNICATION,this.totalCascadeWin=0,this.totalCascadeCoinsWin=0},sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype=Object.create(sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype),sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.symbolMappings={"-":"empty",T:"sym01",J:"sym02",Q:"sym03",K:"sym04",A:"sym05",D:"sym06",B:"sym07",P:"sym08",C:"sym09",H:"sym10",W:"sym11",X:"sym12",Y:"sym13",Z:"sym14",F:"sym15",S:"sym16"},sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.splitSymbolsMapping={0:"sym01",1:"sym02",2:"sym03",3:"sym04",4:"sym05",5:"sym06",6:"sym07",8:"sym08",7:"sym09",9:"sym10"},sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.moneyStackMultipliers={1:"sym17",2:"sym18",3:"sym19",4:"sym20",5:"sym21",6:"sym22",7:"sym23",8:"sym24",9:"sym25",A:"sym26",B:"sym27"},sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.generateRandomSymbol=function(e,t,i){var n={T:"sym01",J:"sym02",Q:"sym03",K:"sym04",A:"sym05",G:"sym06",E:"sym07",C:"sym10",B:"sym09",W:"sym11",X:"sym12",Y:"sym13",Z:"sym14",F:"sym15",S:"sym16"};e&&delete n.W,t&&delete n.F,i&&(delete n.X,delete n.Z,delete n.Y);i=Object.keys(n);return n[i[i.length*Math.random()<<0]]},sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.processSpinification=function(n){var e=this.scope.config.slot.reels[0].number;n.outcome.spinification=sna.service.util.fillArray(null,e),n.outcome.scatterCount=sna.service.util.fillArray(0,e);var s,t=this.getEvent(n,this.events.ROTATE),r=this.isInFreeSpinActive(n)?1:2;n.outcome.reels&&(n.outcome.reels.bottom=sna.service.util.fillArray(!1,e,10)),t&&(s=0,t.reels.forEach(function(e,t){var i=e.split(""),e=i.every(function(e){return"X"==e||"Y"==e||"Z"==e},this);r<=s&&t<4?(n.outcome.spinification[t]=!0,e?n.outcome.spinification[t]=!1:n.outcome.reels&&(n.outcome.reels.bottom[t]=this.generateBottomSymbols(n,t))):n.outcome.reels&&(n.outcome.reels.bottom[t]=[]),i.forEach(function(e){"F"!==e&&("W"!==e||this.isInFreeSpinActive(n))||s++},this),n.outcome.scatterCount[t]=s},this),n.outcome.reels&&n.outcome.reels.bottom.every(function(e){return 0==e.length})&&delete n.outcome.reels.bottom)},sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.generateBottomSymbols=function(e,t){for(var i=[],n=this.scope.config.parameters.spinParameters.graduallySlowSpinification.symbols||10,s=0;s<n;s++)i.push(Object.values(this.symbolMappings)[Math.ceil(10*Math.random())]);return i},sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.processWinsTripleBells=sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.processWins,sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.processWins=function(e){return this.processWinsTripleBells(e),this.processWinAmounts(e),e},sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.processWinAmounts=function(e){e.outcome.hasWins=!(!e.outcome.wins.length&&!this.totalCascadeWin),e.outcome.hasLineWins=!!e.outcome.wins.length,e.outcome.cascadeWin=e.outcome.win,e.outcome.cascadeCoinsWin=e.outcome.coinsWin,this.totalCascadeWin+=e.outcome.win,this.totalCascadeCoinsWin+=e.outcome.coinsWin,e.outcome.win=this.totalCascadeWin,e.outcome.coinsWin=this.totalCascadeCoinsWin},sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.processWinEvent=function(e,t,i){var n={};n.win=e.credit*i,n.symbol=this.symbolMappings[e.sym],n.id=e.line,n.winPositions=[],n.winning=function(){return!0};for(var s=0;s<e.pos.length;s+=2){var r=e.pos[s],o=(0==r||4==r?3:4)-1-e.pos[s+1];t.outcome.winningSymbols[r][o]=!0,n.winPositions.push({ri:r,si:o})}t.outcome.wins.push(n),t.outcome.win+=e.credit*i,t.outcome.coinsWin+=e.credit},sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.getResponseReels=function(o,e){var t=o.outcome||{};o.outcome=t;var a=this.scope.config.slot.reels[0].size,l=this.scope.config.slot.reels[0].number,h={symbolFeatures:{}};return h.symbolFeatures.middle=sna.service.util.fillReelsArray(null,l,a),h.middle=angular.copy(this.scope.config.slot.initial.middle),o&&o.game&&o.game.events&&o.game.events.length&&angular.forEach(o.game.events,function(i,e){if(i.type===this.events.ROTATE&&0===i.mode){h.middle=sna.service.util.fillReelsArray("empty",l,a);for(var t=0;t<i.reels.length;t++)for(var n=i.reels[t].split("").reverse(),s=i.overlay[t].split("").reverse(),r=0;r<n.length;r++)h.middle[t][r]=this.symbolMappings[n[r]]||"empty","S"===n[r]&&"-"!==s[r]&&(h.middle[t][r]=this.moneyStackMultipliers[s[r]],h.symbolFeatures.middle[t][r]=s[r]),"empty"==h.middle[t][r]&&"-"!=n[r]&&(h.middle[t][r]=this.splitSymbolsMapping[n[r]],h.symbolFeatures.middle[t][r]=!0),-1<["X","Y","Z"].indexOf(n[r])&&"-"!=s[r]&&(h.middle[t][r]=this.symbolMappings[s[r]]);o.outcome.nudgeReels=this.processNudgeFeature(i),o.outcome.nudgeReels.forEach(function(e){var t=i.overlay[e.ri].split("");e.isNew=!!t.find(function(e){return"-"==e},this)},this),this.nudgeFeatureContinueProcessing(o,i)}},this),h},sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.processNudgeFeature=function(e){for(var t=[],i=0;i<e.reels.length;i++){var n=e.reels[i].split(""),s=n.findIndex(function(e){return-1<["X","Y","Z"].indexOf(e)});if(-1<s){var r={};switch(n[s]){case"Z":r.type="double";break;case"Y":r.type="collect",r.symbols=[];break;case"X":r.type="split",r.symbols=[]}r.ri=i,r.isNew=!1,t.push(r)}}return t},sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.nudgeFeatureContinueProcessing=function(n,e){if(n.outcome.nudgeReels&&n.outcome.nudgeReels.length)for(var t=e.reels,s=0;s<t.length;s++){var r=e.overlay[s].split("");t[s].split("").forEach(function(e,t){var i;this.symbolMappings[e]&&"S"!=e||(e={name:"S"==e?r[t]:Object.values(this.symbolMappings).slice(1)[+e],si:0==s||4==s?2-t:3-t,ri:s},i="-"!=r[t]?"collect":"split",(t=n.outcome.nudgeReels.find(function(e){return e.type==i}))&&t.symbols.push(e))},this)}},sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.processFeaturesTripleBells=sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.processFeatures,sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.processFeatures=function(e){return this.processFeaturesTripleBells(e),this.processSelectGame(e),this.getResponseReels(e),e},sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.spinTripleBellsCommunication=sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.spin,sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.spin=function(e){if(this.firstFreeSpinResponse){var t=angular.copy(this.firstFreeSpinResponse);return this.firstFreeSpinResponse=null,this.q.when(t).then(this.processSpinResult.bind(this))}return!this.respinResponse||this.respinResponse.outcome.simpleMessageCode&&"MAX_WIN_REACHED"===this.respinResponse.outcome.simpleMessageCode?this.spinNewRequest(e):(this.isRespinResponse=!0,this.q.when(this.respinResponse).then(this.processSpinResult.bind(this)))},sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.spinNewRequest=function(e){if(this.firstFreeSpinResponse){this.respinResponse=null;var t=angular.copy(this.firstFreeSpinResponse);return this.firstFreeSpinResponse=null,this.q.when(t).then(this.processSpinResult.bind(this))}if(this.totalCascadeWin=0,this.totalCascadeCoinsWin=0,this.gambleFreeSpinsResponse){this.respinResponse=null;t=angular.copy(this.gambleFreeSpinsResponse);return this.gambleFreeSpinsResponse=null,this.q.when(t).then(this.processSpinResult.bind(this))}return this.spinTripleBellsCommunication(e)},sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.processResponseTransform=function(e){return this.processFreeSpinsRecovery(e),this.createRespinResponse(e),e},sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.processFreeSpins=function(e){var i=(this.scope.game||this.configUpdate.slot).coinValue;if(e.game.events)for(var t=0;t<e.game.events.length;t++){var n=e.game.events[t];n.type==this.events.BET_PLACED&&(i=n.denom/1e4)}var s=e.outcome;angular.forEach(e.game.events,function(e){var t;e.type===this.events.WIN&&0<e.spins?(s.features=s.features||{},s.features.freespins&&0<s.features.freespins.restoreLeft||s.features.freespins&&0==s.features.freespins.restoreLeft&&0<e.spins?(s.features.freespins.start=!1,s.features.freespins.left+=e.spins,s.features.freespins.retrigger=!0,s.features.freespins.retriggerCount=s.features.freespins.retriggerCount||0,s.features.freespins.retriggerCount=s.features.freespins.retriggerCount+e.spins):(s.features.freespins={},s.features.freespins.start=!0,s.features.freespins.retrigger=!1,s.features.freespins.retriggerCount=0,s.features.freespins.total=e.spins,s.features.freespins.left=e.spins,s.features.freespins.symbol=e.sym,s.features.freespins.totalWin=0,s.features.freespins.totalCoinsWin=0,s.features.freespins.prevTotalWin=0,this.scope.config.parameters.includeInitialFreeSpinWin&&(0<e.credit?(s.features.freespins.totalWin=parseFloat((e.credit*i).toFixed(2)),s.features.freespins.prevTotalWin=s.features.freespins.totalWin,s.features.freespins.totalCoinsWin=e.credit):(s.features.freespins.totalCoinsWin=s.coinsWin,s.features.freespins.totalWin=parseFloat(s.win).toFixed(2),s.features.freespins.prevTotalWin=s.features.freespins.totalWin,s.features.freespins.grandTotal=s.features.freespins.totalWin))),s.features.freespins.end=!1,s.features.freespins.active=!0,s.features.freespins.multiplier=1,s.features.freespins.name="fs",this.scope.game&&(this.scope.game.freespins=angular.copy(s.features.freespins))):e.type===this.events.SPIN_ENTER&&0<e.spinstep&&this.additionalConditionProcessFreeSpins()&&((t={start:!1,active:!0}).total=e.spinmeter,t.left=e.spinmeter-e.spinstep,t.restoreLeft=e.spinmeter-e.spinstep,t.end=0==t.left&&!t.retrigger&&!this.hasRetriggerRestore,t.totalWin=parseFloat((e.featmeter*i+s.win).toFixed(2)),t.prevTotalWin=e.featmeter*i,t.grandTotal=parseFloat((e.winmeter*i+s.win).toFixed(2)),t.multiplier=e.fsmulti||e.multiplier||1,t.name="fs",this.scope.config.parameters.includeInitialFreeSpinWin&&(t.totalWin=parseFloat((e.winmeter*i+s.win).toFixed(2)),t.prevTotalWin=parseFloat((e.winmeter*i).toFixed(2)),t.grandTotal=parseFloat((e.winmeter*i+s.win).toFixed(2))),s.features=s.features||{},s.features.freespins=s.features.freespins||{},s.features.freespins=t)},this),this.buyFeatureActivated&&(this.buyFeatureActivated=!1)},sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.processFreeSpinsRecovery=function(e){return e.game.events.filter(function(e){return e.type===this.events.SPIN_ENTER&&0<e.spinmeter},this).length&&(e.game.events=e.game.events.splice(e.game.events.findIndex(function(e){return e.type===this.events.SPIN_ENTER&&0<e.spinmeter},this))),e},sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.createRespinResponse=function(e){if(this.respinResponse=null,e.game&&e.game.events&&(e.outcome=e.outcome||{},e.outcome.hasRespin=0<e.game.events.filter(function(e){return e.type===this.events.ROTATE&&1===e.mode},this).length,e.outcome.hasRespin)){for(var t=[],i=[],n=!1,s=0;s<e.game.events.length;s++){var r=e.game.events[s];switch(r.type){case this.events.WIN:case this.events.WIN_FEAT:case this.events.NOTIFY:(n?t:i).push(r);break;case this.events.ROTATE:(n=1==r.mode)?(t.find(function(e){return e.type===this.events.ROTATE},this)||(r.mode=0),t.push(r)):i.push(r);break;default:t.push(r),i.push(r)}}this.respinResponse=angular.copy(e),this.respinResponse.game.events=t,e.game.events=i,e.outcome.hasRespin=n}},sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.hasRestoreTripleBellsComm=sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.hasRestore,sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.hasRestore=function(e){var t=this.getEvent(e,this.events.SPIN_ENTER);return!!(t&&0<t.spinmeter)||(!this.isConfEnterLastEvent(e)||!this.hasZeroNonAnimatedEvents(e))&&(this.hasRestoreTripleBellsComm(e)||this.hasNonAnimatedEvents(e)||this.respinResponse&&!this.isConfEnterLastEvent(e)||this.isLastEvent(e,this.events.SEL_GAME_ENTER))},sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.processBuyBonusOutcome=function(e){if(e.status&&e.status.code===sna.service.tripleBellsProvider.CODE_INSUFFICIENT_FUNDS)return e;if(this.fakeRespNeeded(e))return e;var t=[];return this.setBuyBonusOutcome(e),t.unshift(e),this.isInFreeSpinActive(e)&&(this.firstFreeSpinResponse=angular.copy(e)),t},sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.setBuyBonusOutcome=function(e){var t=e.outcome;return t.reels=t.reels||{},this.fakeRespNeeded(e)&&(t.reels.middle=angular.copy(this.scope.config.slot.buyBonusOutcome.middle)),t.reelHasScatter=[!0,!0,!0],t.hasScatterSpinification=!1,t.hasPotentialWin=!1,t.hasLineWins=!1,t.hasWins=!1,t.buyFeatureActive=!0,t},sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.getResponseSpinningSymbols=function(e){for(var t=this.scope.config.slot.reels[0].number,i=(this.isInFreeSpinActive(e),[]),n=!1,s=!1,r=0;r<t;r++){for(var o=[],a=0,l=0==r||4==r,s=0==r||4==r,n=!!this.respinResponse||(0==r||4==r),h=0;h<9;h++){h<3||5<h?s=!0:l||(s=!1);var c=this.generateRandomSymbol(!0,n,s);"sym15"==c&&(n=!0),0<a&&(c="empty",a--),-1<["sym12","sym13","sym14"].indexOf(c)&&(s=l=!0,a=2),o.push(c)}o.reverse(),i[r]=o}return i},sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.updateConfiguration=function(t){if(this.isLastEvent(t,this.events.CONF_ENTER)){var e=!!t.game.events.filter(function(e){return"-"===e.sym&&2==e.code&&1==e.code&&(e.type===this.events.WIN||e.type===this.events.NOTIFY)},this).length,i=this.getEvent(t,this.events.WIN_FEAT,{sym:"F"});if(e&&!i)return this.setCurrentWallet(t),this.closeBuyBonus(!1).then(function(e){return t.game.events=e.game.events,t}.bind(this))}return t},sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.processSelectGame=function(e){var t;return e.game.events.find(function(e){return"evt_spin_enter"===e.type&&0<e.spinstep})||(t=e.game.events.find(function(e){return e.type==this.events.SEL_GAME_ENTER},this))&&(e.outcome=e.outcome||{},e.outcome.features=e.outcome.features||{},e.outcome.features.freespinsGamble=e.outcome.features.freespinsGamble||{},e.outcome.features.freespinsGamble.active=!0,e.outcome.features.freespinsGamble.start=!0,e.outcome.features.freespinsGamble.spins=t.code),e},sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.gambleFreeSpins=function(e){this.requestId++;e={type:"evt_btnpush",button:e},e={id:""+this.requestId,date:(new Date).toISOString(),game:{input:{event:e,currentWallet:this.getCurrentWallet()}}};return this.fetchResponse({data:e}).then(this.processGambleFreeSpinsResponse.bind(this))},sna.service.tripleBellsProvider.RoosterMobsCommunicationService.prototype.processGambleFreeSpinsResponse=function(e){var t={};if(e.game&&e.game&&e.game.events){for(var i=e.game.events,n=null,s=null,r=null,o=null,a=null,l=0;l<i.length;l++)(h=i[l]).type===this.events.ROTATE&&4===h.mode&&(a=l);null!==a&&i.splice(a,1);for(var h,c,l=0;l<i.length;l++)(h=i[l]).type===this.events.WIN&&0<h.spins&&!r&&(r=h,o=l),h.type===this.events.NOTIFY&&3===h.code&&(n=h),h.type===this.events.SEL_GAME_ENTER&&(s=h);r&&((c={name:"fs",active:!0,start:!0,retrigger:!1,retriggerCount:0}).total=r.spins,c.left=r.spins,c.totalWin=0,c.totalCoinsWin=0,c.multiplier=r.fsmulti||2,t.freeSpins=c,this.gambleFreeSpinsResponse=angular.copy(e),null!==o&&this.gambleFreeSpinsResponse.game.events.splice(0,o+1)),n&&0===n.vals[0]&&(t.wheelGambleLost=!0),s&&(t.wheelGambleWon=!0,t.wheelGambleOutcome=s.code)}return t},sna.service.tripleBellsProvider.RoosterMobsCommunicationServiceProvider=function(){sna.service.tripleBellsProvider.TripleBellsCommunicationServiceProvider.call(this)},sna.service.tripleBellsProvider.RoosterMobsCommunicationServiceProvider.prototype=Object.create(sna.service.tripleBellsProvider.TripleBellsCommunicationServiceProvider.prototype),sna.service.tripleBellsProvider.RoosterMobsCommunicationServiceProvider.prototype._create=function(){return new sna.service.tripleBellsProvider.RoosterMobsCommunicationService(this.config)},sna.module.tripleBellsProvider.provider(sna.service.tripleBellsProvider.ROOSTER_MOBS_COMMUNICATION,sna.service.tripleBellsProvider.RoosterMobsCommunicationServiceProvider),sna.module.core.config([sna.service.MAIN_PROVIDER,function(e){e.game(sna.service.roosterMobs.ROOSTER_MOBS_GAME),e.iface(sna.service.roosterMobs.ROOSTER_MOBS_INTERFACE),e.loader(sna.service.tripleBellsProvider.TRIPLE_BELLS_LOADER),e.communication(sna.service.tripleBellsProvider.ROOSTER_MOBS_COMMUNICATION)}]),sna.module.core.config([sna.service.ENVIRONMENT_PROVIDER,function(e){e.useCustomAspectRatioDesktop(!0)}]),sna.module.roosterMobs.config([sna.service.roosterMobs.ROOSTER_MOBS_INTERFACE_PROVIDER,function(e){e.game(sna.service.roosterMobs.ROOSTER_MOBS_GAME),e.communication(sna.service.tripleBellsProvider.ROOSTER_MOBS_COMMUNICATION)}]),sna.module.roosterMobs.run(sna.module.BOOTSTRAP),sna.presentation.roosterMobs.ROOSTER_MOBS_SYMBOL_CONTAINER="RoosterMobsSymbolContainer",sna.presentation.roosterMobs.RoosterMobsSymbolContainer=function(e,t){sna.presentation.slot.SymbolDynamicContainer.call(this,e,t),this.enabled=!0,this.disabledAnimations={}},sna.presentation.roosterMobs.RoosterMobsSymbolContainer.prototype=Object.create(sna.presentation.slot.SymbolDynamicContainer.prototype),sna.presentation.roosterMobs.RoosterMobsSymbolContainer.prototype.initPresentationSymbolDynamic=sna.presentation.roosterMobs.RoosterMobsSymbolContainer.prototype.initPresentation,sna.presentation.roosterMobs.RoosterMobsSymbolContainer.prototype.initPresentation=function(){this.initPresentationSymbolDynamic(),this.setWildNudgePivot(),this.setMoneyStackValue()},sna.presentation.roosterMobs.RoosterMobsSymbolContainer.prototype.initAnimationsSymbolDynamic=sna.presentation.roosterMobs.RoosterMobsSymbolContainer.prototype.initAnimations,sna.presentation.roosterMobs.RoosterMobsSymbolContainer.prototype.initAnimations=function(){this.initAnimationsSymbolDynamic(),this.initSplitAnimation(),this.initCollectorWinAnimation(),this.initFsCloseAnimation(),this.initSpinStartAsyncAnimation()},sna.presentation.roosterMobs.RoosterMobsSymbolContainer.prototype.initSpinStartAsyncAnimation=function(){var e={type:"Animation",variant:"Group",name:"spinStartAsync",children:["call:bringToBack","children:spinStartAsync:cascade"]},t=this.presentation.createAnimation(this,e);this.animation(e.name,t)},sna.presentation.roosterMobs.RoosterMobsSymbolContainer.prototype.initSplitAnimation=function(){var e={type:"Animation",variant:"Sequence",name:"splitSymbols",children:["call:setSplitWinAnimation","call:bringToFront","children:splitSymbols:cascade"]},t=this.presentation.createAnimation(this,e);this.animation(e.name,t)},sna.presentation.roosterMobs.RoosterMobsSymbolContainer.prototype.initFsCloseAnimation=function(){var e={type:"Animation",variant:"Sequence",name:"fsClose",children:["children:fsClose:cascade"]},t=this.presentation.createAnimation(this,e);this.animation(e.name,t)},sna.presentation.roosterMobs.RoosterMobsSymbolContainer.prototype.initCollectorWinAnimation=function(){var e={type:"Animation",variant:"Sequence",name:"collectorWin",children:["call:bringToFront","children:winFull:cascade","call:bringToBack"]},t=this.presentation.createAnimation(this,e);this.animation(e.name,t)},sna.presentation.roosterMobs.RoosterMobsSymbolContainer.prototype.setSplitWinAnimation=function(){this.scope.model.winAnimationName="split_win"},sna.presentation.roosterMobs.RoosterMobsSymbolContainer.prototype.setWildNudgePivot=function(){var e,t,i;this.scope.model.isSymbolTypeWild()&&"sym11"!=this.scope.model.type.name&&"sym30"!=this.scope.model.type.name&&(t=this.iface.scope.game,i=this.scope.model.reel.index,(t=(e=t.reels.reels)[i].symbols.find(function(e){return this.scope.model.type.name==e.type.name},this))&&(this.pivot.y=-this.scope.parent.getSymbolPosition(t.index).y),(i=e[i].symbols[this.scope.model.index+1])&&i.type.name==this.scope.model.type.name&&this.hide())},sna.presentation.roosterMobs.RoosterMobsSymbolContainer.prototype.shouldUseDynamicPresentationSymbolDynamic=sna.presentation.roosterMobs.RoosterMobsSymbolContainer.prototype.shouldUseDynamicPresentation,sna.presentation.roosterMobs.RoosterMobsSymbolContainer.prototype.shouldUseDynamicPresentation=function(){var e=this.additionalForceDynamic();return this.shouldUseDynamicPresentationSymbolDynamic()||e},sna.presentation.roosterMobs.RoosterMobsSymbolContainer.prototype.additionalForceDynamic=function(){if(this.iface.scope.game.nudgeFeatureReels)for(var e=0;e<this.iface.scope.game.nudgeFeatureReels.length;e++){var t=this.iface.scope.game.nudgeFeatureReels[e];if(t.symbols&&t.symbols.length)if(t.symbols.find(function(e){return e.si==this.scope.model.index&&e.ri==this.scope.model.reel.index},this))return!0}return!1},sna.presentation.roosterMobs.RoosterMobsSymbolContainer.prototype.setMoneyStackValue=function(e,t){!this.scope.model.isSymbolTypeMultiplier()&&!e||"-"!==(e=this.scope.model.features)&&("A"===e?e=10:"B"===e&&(e=20),this.createSymbolValue(+e,t))},sna.presentation.roosterMobs.RoosterMobsSymbolContainer.prototype.createSymbolValue=function(e){var t=e*this.iface.getWrapperBet()/2,i=angular.copy(this.scope.config.symbolValue);i.children[0].dontShowDecimals=t%1==0||!this.iface.scope.game.showValuesInCash,"sym13"==this.scope.model.type.name&&(i.children[0].maxWidth=400);e=this.scope.model;this.symbolValue=this.presentation.createPresentation(i,this,e),this.symbolValue.children[0].setnumber(t),this.symbolValue.children[0].scope.config.text=t,this.addChild(this.symbolValue),this.symbolPresentation&&this.symbolPresentation.children.length&&this.symbolPresentation.addChild(this.symbolValue)},sna.presentation.roosterMobs.RoosterMobsSymbolContainer.prototype.enable=function(){this.enabled||(this.enabled=!0,this.enableAnimations(),this.setEnabledPresentation())},sna.presentation.roosterMobs.RoosterMobsSymbolContainer.prototype.enableAnimations=function(){angular.forEach(this.animations,function(e,t){this.enableAnimation(t)},this)},sna.presentation.roosterMobs.RoosterMobsSymbolContainer.prototype.setEnabledPresentation=function(){this.scope.model.win&&this.bringToFront()},sna.presentation.roosterMobs.RoosterMobsSymbolContainer.prototype.disable=function(){this.enabled&&(this.enabled=!1,this.disableAnimations(),this.setDisabledPresentation())},sna.presentation.roosterMobs.RoosterMobsSymbolContainer.prototype.disableAnimations=function(){angular.forEach(this.animations,function(e,t){this.disableAnimation(t)},this)},sna.presentation.roosterMobs.RoosterMobsSymbolContainer.prototype.setDisabledPresentation=function(){this.bringToBack()},sna.presentation.roosterMobs.RoosterMobsSymbolContainer.prototype.disableAnimation=function(e){this.disabledAnimations[e]=this.animations[e],this.animations[e]=this.emptyAnimation},sna.presentation.roosterMobs.RoosterMobsSymbolContainer.prototype.enableAnimation=function(e){void 0!==this.disabledAnimations[e]&&(this.animations[e]=this.disabledAnimations[e],this.animations[e].scope.model.win=this.scope.model.win,delete this.disabledAnimations[e])},sna.module.roosterMobs.controller(sna.presentation.roosterMobs.ROOSTER_MOBS_SYMBOL_CONTAINER,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.roosterMobs.RoosterMobsSymbolContainer]),sna.presentation.roosterMobs.ROOSTER_MOBS_REELS_CONTAINER="RoosterMobsReelsContainer",sna.presentation.roosterMobs.RoosterMobsReelsContainer=function(e,t){sna.presentation.slot.PaylineGridReelsContainer.call(this,e,t),this.iface.registerEventCallback("prepareWinLines",this,this.preparePaylineWins),this.iface.registerEventCallback("disableReels",this,this.disableReels),this.iface.registerEventCallback("enableReels",this,this.enableReels),this.iface.registerEventCallback("overrideSpinningSymbols",this,this.overrideSpinningSymbols),this.sound=t.sound,this.game=t.game,this.timeline=t.presentation.timeline},sna.presentation.roosterMobs.RoosterMobsReelsContainer.prototype=Object.create(sna.presentation.slot.PaylineGridReelsContainer.prototype),sna.presentation.roosterMobs.RoosterMobsReelsContainer.prototype.initReelsContainer=function(){this.reelsContainer=this.presentation.createPresentation(this.scope.config.reelsWrapper,this,this.scope.model),this.addChild(this.reelsContainer)},sna.presentation.roosterMobs.RoosterMobsReelsContainer.prototype.preparePaylineWins=function(){if(!this.scope.model.slot.isRespinActive)for(var e=angular.copy(this.scope.model.slot.winnings).sort(function(e,t){return+e.symbol.slice(-2)-+t.symbol.slice(-2)}),t=0;t<e.length;t++)this.preparePaylineWin(e[t],"winIndividual")},sna.presentation.roosterMobs.RoosterMobsReelsContainer.prototype.preparePaylineWin=function(e,t){var i,n;e.winning()&&(i=this.createPaylineAnimation(e,t),this.scope.config.payline&&((n=this.scope.config.payline.indicator)&&(n=this.createPaylineIndicatorPresentation(angular.copy(n),this,e),this.paylineIndicators.addChild(n),i.addChild(n)),"winIndividual"!==t||(t=this.scope.config.payline.amount)&&(t=this.createPaylineAmountPresentation(angular.copy(t),this,e),this.paylineAmounts.addChild(t),i.addChild(t))),this.addWinningPaylineSymbols(e,i))},sna.presentation.roosterMobs.RoosterMobsReelsContainer.prototype.createPaylineAnimation=function(e,t){var i;return(i=e?(i=this.createPaylineAnimationConfig(e,t),this.presentation.createAnimation(this,i)):this.presentation.createAnimation(this,{variant:"Group",name:t,children:["local"]})).animations={},i.animation=function(e,t){return t?this.animations[e]=t:this.animations[e]},i.animation(t,i),this.animation(t)&&this.animation(t).addChild&&this.animation(t).addChild(i),this.paylineAnimations=this.paylineAnimations||{},this.paylineAnimations[t]=this.paylineAnimations[t]||[],this.paylineAnimations[t].push(i),i.paylineModel=angular.copy(e),i},sna.presentation.roosterMobs.RoosterMobsReelsContainer.prototype.createPaylineAnimationConfig=function(e,t){return{variant:"Sequence",name:t,children:["children:prepareWinIndividual:cascade",{variant:"Group",children:["local"]}]}},sna.presentation.roosterMobs.RoosterMobsReelsContainer.prototype.addWinningPaylineSymbols=function(e,i){i&&angular.forEach(e.winPositions,function(e,t){!e||void 0!==(e=this.reels[e.ri].getSymbolPresentationOffset(e.si))&&i.addChild(e)},this)},sna.presentation.roosterMobs.RoosterMobsReelsContainer.prototype.initWinIndividualAnimation=function(){var e={name:"winIndividual",label:"paylineLoop",variant:"Loop",children:[{variant:"Sequence",children:["local"]}]},t=this.presentation.createAnimation(this,e);this.animation(e.name,t)},sna.presentation.roosterMobs.RoosterMobsReelsContainer.prototype.initWinFullAnimation=function(){var e={variant:"Group",name:"winFull",children:["children:winFull:cascade"]},t=this.presentation.createAnimation(this,e);this.animation(e.name,t)},sna.presentation.roosterMobs.RoosterMobsReelsContainer.prototype.disableReels=function(){this.iface.scope.game.nudgeFeatureReels.forEach(function(e){this.reels[e.ri].disable()},this)},sna.presentation.roosterMobs.RoosterMobsReelsContainer.prototype.enableReels=function(){this.reels.forEach(function(e){e.enabled||(this.setNewSymbolModels(e),e.enable())},this)},sna.presentation.roosterMobs.RoosterMobsReelsContainer.prototype.setNewSymbolModels=function(e){var i=this.scope.slot.reels.reels[e.scope.config.index].symbols;e.outcomeSymbols.forEach(function(e,t){e.scope.model=angular.copy(i[t])},this)},sna.presentation.roosterMobs.RoosterMobsReelsContainer.prototype.overrideSpinningSymbols=function(){var n=null;this.reels.forEach(function(i){i.spinningSymbols.forEach(function(e,t){e.scope.model.isSymbolTypeWild()&&"sym11"!=e.scope.model.type.name&&"sym30"!=e.scope.model.type.name&&(e.y-=i.symbolDistance/2,n=t,i.spinningSymbols[t-1]&&i.spinningSymbols[t-1].hide()),t+1!=n&&t+2!=n||e.hide()},this)},this)},sna.presentation.roosterMobs.RoosterMobsReelsContainerFactory=function(e,t){return new sna.presentation.roosterMobs.RoosterMobsReelsContainer(e,t)},sna.module.slot.controller(sna.presentation.roosterMobs.ROOSTER_MOBS_REELS_CONTAINER,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.roosterMobs.RoosterMobsReelsContainerFactory]),sna.presentation.roosterMobs.ROOSTER_MOBS_REEL_CONTAINER="RoosterMobsReelContainer",sna.presentation.roosterMobs.RoosterMobsReelContainer=function(e,t){sna.presentation.tripleBellsProvider.TripleBellsReelContainer.call(this,e,t)},sna.presentation.roosterMobs.RoosterMobsReelContainer.prototype=Object.create(sna.presentation.tripleBellsProvider.TripleBellsReelContainer.prototype),sna.presentation.roosterMobs.RoosterMobsReelContainer.prototype.initPresentationTripleBells=sna.presentation.roosterMobs.RoosterMobsReelContainer.prototype.initPresentation,sna.presentation.roosterMobs.RoosterMobsReelContainer.prototype.initPresentation=function(){0!=this.scope.model.index&&4!=this.scope.model.index||(this.scope.model.size=3,this.scope.model.symbols.shift(),this.scope.model.symbols.forEach(function(e,t){e.index=t}),this.scope.config.mask.height=670),this.initPresentationTripleBells(),this.initWildsContainer()},sna.presentation.roosterMobs.RoosterMobsReelContainer.prototype.initWildsContainer=function(){this.wildsContainer=this.createChildFromConfig("wildsContainer"),this.wildsContainer.sortableChildren=!0},sna.presentation.roosterMobs.RoosterMobsReelContainer.prototype.getSpinningSymbolOffsetCachedReel=sna.presentation.roosterMobs.RoosterMobsReelContainer.prototype.getSpinningSymbolOffset,sna.presentation.roosterMobs.RoosterMobsReelContainer.prototype.getSpinningSymbolOffset=function(e){if(e.isSymbolTypeWild()&&"sym11"!=e.type.name&&"sym30"!=e.type.name){var t=this.getSpinningSymbolOffsetCachedReel(e);return t.y-=200,t}return this.getSpinningSymbolOffsetCachedReel(e)},sna.presentation.roosterMobs.RoosterMobsReelContainer.prototype.addingAdditionalSpinningSymbols=function(e,t){for(var i=e-t;i<e;i++){var n=this.scope.model.spinningSymbols[i];(n.isSymbolTypeWild()&&"sym11"!=n.type.name&&"sym30"!=n.type.name||"empty"==n.type.name)&&(r=Math.ceil(10*Math.random()),n.type=this.scope.model.slot.symbols[10==r?"sym10":"sym0"+r]);var s=this.getSpinningSymbolConfig(n),r=this.getSpinningSymbolOffset(n);s.x=r.x,s.y=(-e+i-e-(t/2-.5))*this.symbolDistance+r.y;n=this.presentation.createPresentation(s,this,n);n.visible=!1,this.spinningSymbols.push(n),this.symbolsContainer.addChild(n)}},sna.presentation.roosterMobs.RoosterMobsReelContainer.prototype.initWinAnimations=function(){},sna.presentation.roosterMobs.RoosterMobsReelContainer.prototype.onGameTypeUpdated=function(){},sna.presentation.roosterMobs.RoosterMobsReelContainer.prototype.prepareOutcomeSymbolsCachedReel=sna.presentation.roosterMobs.RoosterMobsReelContainer.prototype.prepareOutcomeSymbols,sna.presentation.roosterMobs.RoosterMobsReelContainer.prototype.prepareOutcomeSymbols=function(e,t,i){this.prepareOutcomeSymbolsCachedReel(e,t,i);e=this.outcomeSymbols.find(function(e){return"empty"==e.scope.model.type.name},this);e&&(t=Math.ceil(10*Math.random()),i=this.presentation.scope.config.presentation.symbols[10==t?"sym10":"sym0"+t],t=e.scope.model,t=this.presentation.createPresentation(i.blur,e,t),e.symbolPresentation=t,e.addChild(t)),this.children[0].children.forEach(function(e,t){var i,n;"Sprite"==e.name&&(e.scope.model.isSymbolTypeWild()&&"sym11"!=e.scope.model.type.name&&"sym30"!=e.scope.model.type.name||"empty"==e.scope.model.type.name)&&(n=Math.ceil(10*Math.random()),i=this.presentation.scope.config.presentation.symbols[10==n?"sym10":"sym0"+n],n=e.scope.model,(n=this.presentation.createPresentation(i.blur,this,n)).setY(e.y),this.removeChild(e),this.addChildAt(n,t))},this)},sna.presentation.roosterMobs.RoosterMobsReelContainerFactory=function(e,t){return new sna.presentation.roosterMobs.RoosterMobsReelContainer(e,t)},sna.module.slot.controller(sna.presentation.roosterMobs.ROOSTER_MOBS_REEL_CONTAINER,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.roosterMobs.RoosterMobsReelContainerFactory]),sna.presentation.roosterMobs.ROOSTER_MOBS_SYMBOL_FEATURE_ANIMATION="RoosterMobsSymbolFeatureAnimation",sna.presentation.roosterMobs.RoosterMobsSymbolFeatureAnimation=function(e,t){sna.presentation.Animation.call(this,e,t.presentation,t.presentation.timeline,t.sound),this.game=t.game,this.iface=t.iface},sna.presentation.roosterMobs.RoosterMobsSymbolFeatureAnimation.prototype=Object.create(sna.presentation.Animation.prototype),sna.presentation.roosterMobs.RoosterMobsSymbolFeatureAnimation.prototype.animate=function(e){var t=new this.timeline;switch(e.name){case"collectorWild":t.add(this.animateCollect(e));break;case"collectorWin":t.add(this.animateCollectorWin(e));break;case"spliterWild":t.add(this.animateSplitSymbols(e));break;case"nudgingWildStart":t.add(this.animateNudgingWildStart(e));break;case"convertScatterToWild":t.add(this.animateConversionToWild(e));break;case"convertMysteryToMultiplier":t.add(this.animateConvertionToMultiplier(e))}return t},sna.presentation.roosterMobs.RoosterMobsSymbolFeatureAnimation.prototype.animateCollect=function(e){var n=this.presentation.getById("reels"),s=this.presentation.getById("collectorPlaceholder"),e=e.params,r={x:n.getReelPosition(e.ri).x,y:0},o=n.reels[e.ri].outcomeSymbols.find(function(e){return e.visible}),a=new this.timeline({onStart:function(){o.createSymbolValue(),o.symbolValue.children[0].setText(""),o.symbolValue.children[0].setY(0),o.symbolValue.setalpha(1),o.symbolValue.hide(),o.scope.model.win=!0},onStartParams:[o],onStartScope:this,onComplete:function(){for(var e=s.children.length-1;0<=e;e--)s.children[e].destroy({children:!0})}});return e.symbols.forEach(function(e,t){var i=n.reels[e.ri].outcomeSymbols[e.si];s.addChild(i.symbolValue),s.children[t].setX(n.getReelPosition(e.ri).x),s.children[t].setY(i.y),a.call(this.sound.playSound,["MultiplierToCounter"],this.sound),a.call(i.symbolPresentation.children[0].gotoAndPlay,["collection"],i.symbolPresentation.children[0]),a.to(s.children[t],.5,{x:r.x,y:r.y,onComplete:function(e){var t=+this.target.children[0].getnumber(),i=+e.symbolValue.children[0].getnumber();e.symbolValue.children[0].setnumber(i+t),o.symbolValue.show(),this.target.hide()},onCompleteParams:[o]}),a.to(s.children[t],.2,{alpha:0},"+=0.4")},this),a},sna.presentation.roosterMobs.RoosterMobsSymbolFeatureAnimation.prototype.animateCollectorWin=function(e){var t=this.presentation.getById("reels").reels[e.params.ri].outcomeSymbols.find(function(e){return e.visible}),i=new this.timeline;return i.call(t.animations.fsClose.animate,[e],t.animations.fsClose),i.call(t.animations.collectorWin.animate,[e],t.animations.collectorWin),i.to(t.symbolValue,.5,{alpha:0,setscale:1.5,ease:Back.easeIn}),i},sna.presentation.roosterMobs.RoosterMobsSymbolFeatureAnimation.prototype.animateSplitSymbols=function(t){var i=this.presentation.getById("reels"),e=t.params,n=new this.timeline;return e.symbols.forEach(function(e){e=i.reels[e.ri].outcomeSymbols[e.si];n.add(e.animations.splitSymbols.animate(t))},this),n.set({},{},"+=1"),n},sna.presentation.roosterMobs.RoosterMobsSymbolFeatureAnimation.prototype.animateNudgingWildStart=function(t){var i=new this.timeline;return t.params.forEach(function(e){i.add(this.animateNudgingWild(t,e))},this),i},sna.presentation.roosterMobs.RoosterMobsSymbolFeatureAnimation.prototype.updateMultiplier=function(e){var t=this.presentation.getById("multiplierPanel"),i=new this.timeline;return t&&i.call(t.setnumber,[this.iface.setFeatureMultiplier(e)],t),i},sna.presentation.roosterMobs.RoosterMobsSymbolFeatureAnimation.prototype.animateNudgingWild=function(e,i){var t=this.presentation.getById("reels").reels[i.ri],n=t.outcomeSymbols[i.si[i.si.length-1]],s=n.pivot.y,r=new this.timeline,o=3==i.si[i.si.length-1]?-1:1;r.call(n.bringToFront,[],n);for(var a=[0,1,2,3].filter(function(t){return!i.si.find(function(e){return e==t},this)},this),l=0;l<4-i.si.length;l++){var h=new this.timeline,c=t.symbolDistance*this.presentation.globalScale*(l+1)*o;h.call(n.symbolPresentation.children[0].gotoAndPlay,[0<s?"nudges_down":"nudges_up"],n.symbolPresentation.children[0],"start"),h.to(n,.2,{setY:n.y+c,ease:Power0.easeNone},"start"),this.sound.sounds.Nudge&&h.call(this.sound.playSound,["Nudge"],this.sound,"start"),a.forEach(function(e){h.to(t.outcomeSymbols[e],.2,{setY:t.outcomeSymbols[e].y+c,ease:Power0.easeNone},"start")},this),r.add(h,"+=0.3"),r.add(this.updateMultiplier(l+1))}return r.call(function(e,t){for(var i=0;i<e.outcomeSymbols.length;i++){var n=e.outcomeSymbols[i];-1==t.indexOf(n.scope.model.index)&&n.hide()}},[t,i.si],this),r},sna.presentation.roosterMobs.RoosterMobsSymbolFeatureAnimation.prototype.animateConversionToWild=function(e){var t=new this.timeline;return e.params.forEach(function(e){this.addWild(e),t.call(e.bringToFront,[],e),this.sound.sounds.ScatterToWild&&t.call(this.sound.playSound,["ScatterToWild"],this.sound),t.add(e.symbolPresentation.children[1].gotoAndPlayTimeline("transition")),t.call(e.symbolPresentation.children[1].destroy,[{children:!0}],e.symbolPresentation.children[1])},this),t},sna.presentation.roosterMobs.RoosterMobsSymbolFeatureAnimation.prototype.animateConvertionToMultiplier=function(e){var t=new this.timeline,i=[];return e.params.forEach(function(e){this.addMultiplier(e);var t=new this.timeline;t.call(e.bringToFront,[],e),t.add(e.symbolPresentation.children[1].gotoAndPlayTimeline("reveal"),"start"),t.call(e.setMoneyStackValue,[!0],e,"start+="+.6*e.symbolPresentation.children[1].getAnimationDuration("reveal")),t.call(e.symbolPresentation.children[1].destroy,[{children:!0}],e.symbolPresentation.children[1]),i.push(t)},this),t.add(i),t},sna.presentation.roosterMobs.RoosterMobsSymbolFeatureAnimation.prototype.addWild=function(e){var t=this.presentation.scope.config.presentation.symbols.sym30.dynamic.children[0],t=this.presentation.createPresentation(t,e,e.scope.model);e.symbolPresentation.addChildAt(t,0)},sna.presentation.roosterMobs.RoosterMobsSymbolFeatureAnimation.prototype.addMultiplier=function(e){var t=this.presentation.scope.config.presentation.symbols.sym16.dynamic.children[0],t=this.presentation.createPresentation(t,e,e.scope.model);e.symbolPresentation.addChildAt(t,0)},sna.module.roosterMobs.controller(sna.presentation.roosterMobs.ROOSTER_MOBS_SYMBOL_FEATURE_ANIMATION,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.roosterMobs.RoosterMobsSymbolFeatureAnimation]),sna.presentation.roosterMobs.ROOSTER_MOBS_BUY_BONUS_CONTAINER="RoosterMobsBuyBonusContainer",sna.presentation.roosterMobs.RoosterMobsBuyBonusContainer=function(e,t){sna.presentation.Container.call(this,e,t.presentation),this.iface=t.iface,this.sound=t.sound,this.timeline=t.iface.timeline,this.slot=this.scope.model,this.buttons=[],this.buttonClicked=!1},sna.presentation.roosterMobs.RoosterMobsBuyBonusContainer.prototype=Object.create(sna.presentation.Container.prototype),sna.presentation.roosterMobs.RoosterMobsBuyBonusContainer.prototype.containerInitPresentation=sna.presentation.roosterMobs.RoosterMobsBuyBonusContainer.prototype.initPresentation,sna.presentation.roosterMobs.RoosterMobsBuyBonusContainer.prototype.initPresentation=function(){this.containerInitPresentation(),this.createButtons(),this.animation("buyFeatureAfter",{animate:this.animateBuyFeature.bind(this)})},sna.presentation.roosterMobs.RoosterMobsBuyBonusContainer.prototype.createButtons=function(){for(var e=this.scope.model,t=0;t<4;t++){var i=angular.copy(this.scope.config.button),n="buyButton"+t;i.id=n,i.x["Mobile,Portrait"]=320*(t%2==0?-1:1),i.x.default=325*t-485,i.x["Mobile,Landscape"]=400*t-600,i.y["Mobile,Portrait"]=t/2<1?330:1320,this.iface.getElementsByTag(i,"buyButton")[0].id=this.iface.game.getParameterValue("buyFreeSpinsButtons").buy[n].id;var s=this.iface.getElementsByTag(i,"buttonCost")[0];s.text=s.text.replace("<id>",n);var r=this.iface.getElementsByTag(i,"cardText")[0].children[0],o=this.iface.getElementsByTag(i,"cardText")[0].children[1],a=this.iface.getElementsByTag(i,"cardText")[0].children[2],l=this.iface.getElementsByTag(i,"currency")[0].children[0],h=["#365364","#83A7BC","#365364","#365364","#83A7BC","#365364"],s=["#365364","#83A7BC","#365364"],n="#D7F4FF";0===t?r.x=-10:1===t?(h=["#41650F","#69C030","#41650F","#41650F","#69C030","#41650F"],s=["#41650F","#69C030","#41650F"],n="#D2FFBD",r.x=5):2===t&&(h=["#852313","#C64B31","#852313","#852313","#C64B31","#852313"],s=["#852313","#C64B31","#852313"],n="#FFB6AD"),3===t&&(r.visible=!1,o.visible=!1,a.visible=!0,s=["#962A68","#CD598E","#962A68"],n="#FF82FF"),o.fill=s,o.stroke=n,r.fill=h,r.stroke=n,l.fill=s,l.stroke=n;n=this.presentation.createPresentation(i,this,e);this.addChild(n);var c=this.iface.getElementsByTag(n,"cardBackground")[0].children[0],p=this.iface.getElementsByTag(n,"cardBackground")[0].children[1];switch(t){case 0:c.setSkin("8_12");break;case 1:c.setSkin("12_16");break;case 2:c.setSkin("18_22");break;case 3:p.show(),p.setSkin("idle")}i=this.iface.getElementsByTag(n,"buyButton")[0];i.on("pointerover",this.onPointerOver.bind(this)),i.on("pointerout",this.onPointerOut.bind(this)),this.buttons.push(n)}},sna.presentation.roosterMobs.RoosterMobsBuyBonusContainer.prototype.onPointerOver=function(e){var t=e.target.scope.config.referenceConfig.id,i=this.presentation.getById(t),n=i.children[0].children[0],s=i.children[0].children[1],r=i.children[1],t=this.iface.getElementsByTag(r,"buyTextContainer")[0],i=this.iface.getElementsByTag(r,"buyButtonText")[0].children[1];!this.buttonClicked&&e.target.enabled&&(this.t=new this.timeline,this.t.add("start"),this.sound.sounds.BuyFeatureDialogHover&&this.sound.playSound("BuyFeatureDialogHover"),this.t.call(t.children[0].setTexture,["buy_button_active.png"],t.children[0],"start"),this.t.call(i.setTexture,[i.scope.config.states.hover],i,"start"),this.t.call(n.gotoAndPlay,["hover"],n,"start"),this.t.call(s.gotoAndPlay,["hover"],s,"start"),this.t.to([r.children[0],r.children[1],r.children[2].children[1]],n.getAnimationDuration("hover")-.1,{setscale:1.08,ease:Power0.easeNone},"start"))},sna.presentation.roosterMobs.RoosterMobsBuyBonusContainer.prototype.onPointerOut=function(e){var t,i,n,s;!this.buttonClicked&&e.currentTarget.enabled&&(this.t&&(this.t.kill(),this.t.stop()),n=e.currentTarget.scope.config.referenceConfig.id,t=(s=this.presentation.getById(n)).children[0].children[0],i=s.children[0].children[1],e=s.children[1],n=this.iface.getElementsByTag(e,"buyTextContainer")[0],s=this.iface.getElementsByTag(e,"buyButtonText")[0].children[1],this.t=new this.timeline,this.t.add("start"),this.t.call(n.children[0].setTexture,["buy_button_normal.png"],n.children[0],"start"),this.t.call(t.gotoAndPlay,["idle"],t,"start"),this.t.call(i.gotoAndPlay,["idle"],i,"start"),this.t.call(s.setTexture,[s.scope.config.states.normal],s,"start"),this.t.to([e.children[0],e.children[1],e.children[2].children[1]],t.getAnimationDuration("idle"),{setscale:1,ease:Power0.easeNone},"start"))},sna.presentation.roosterMobs.RoosterMobsBuyBonusContainer.prototype.animateBuyFeature=function(e){var t=this.presentation.getById(this.iface.buyFeatureButtonClickedId).children[0],i=t.children[0],n=t.children[1],t=this.iface.getElementsByTag(this.presentation.getById("frameSpine"),"frame");this.t&&(this.t.kill(),this.t.stop()),this.buttonClicked=!0;var s=new this.timeline;return s.add("start"),s.call(this.iface.updateWrapperButtonsState,["DISABLED"],this.iface,"start"),t.forEach(function(e){s.call(e.gotoAndPlay,[e.scope.config.winAnimation],e,"start")},this),"buyButton3"===this.iface.buyFeatureButtonClickedId?(s.add(this.animateRandomSpin(e,n),"start"),this.sound.sounds.BuyFeatureDialogAnticipation&&s.call(this.sound.playSoundOnce,["BuyFeatureDialogAnticipation"],this.sound,"start")):s.call(i.gotoAndPlay,["win",!0],i,"start+="+i.getAnimationDuration("win")),s.set({},{},"+=0.5"),s.to(this,.3,{alpha:0}),this.t=s},sna.presentation.roosterMobs.RoosterMobsBuyBonusContainer.prototype.onBuyFeatureOpened=function(){var e=new this.timeline;return this.iface.setBuyFeatureOtherButtonsState(!1),e.call(this.setButtonsState,[this.animations.buyFeatureOpen],this),e.call(this.iface.setBuyFeatureOtherButtonsState,[!0],this.iface),e},sna.presentation.roosterMobs.RoosterMobsBuyBonusContainer.prototype.setButtonsState=function(t){var i=this.iface.getElementsByTag(this,"plus")[0],n=new this.timeline;return this.buttons.forEach(function(e){n.call(this.setButtonState,[e,t||i.animations.betParamChange],this)},this),n},sna.presentation.roosterMobs.RoosterMobsBuyBonusContainer.prototype.setButtonState=function(e,t,i){var n=new this.timeline;return this.iface.game.canAffordBuyBonus(e.scope.config.id)?(n.call(e.animations._enable.animate,[t],e.animations._enable),n.call(e.children[2].enable,[],e.children[2])):(n.call(e.animations._disable.animate,[t],e.animations._disable),n.call(e.children[2].disable,[],e.children[2])),n},sna.presentation.roosterMobs.RoosterMobsBuyBonusContainer.prototype.endBuyFeature=function(){this.t.call(spine.gotoAndPlay,["spin_end_new"],spine,"start+=2"),this.t.call(this.unmarkClickLabel,[],this,"start+=3")},sna.presentation.roosterMobs.RoosterMobsBuyBonusContainer.prototype.animateRandomSpin=function(e,t){var i=this.presentation.getById("buyButton3"),n=this.slot.freespins.numberOfScatters,s=this.iface.getElementsByTag(i,"currency")[0],r=this.presentation.getById("randomText"),i=new this.timeline,o="spin_win_8_12";switch(n){case 3:o="spin_win_8_12";break;case 4:o="spin_win_12_16";break;case 5:o="spin_win_18_22"}return i.add("spin"),i.call(t.gotoAndPlay,[o],t,"spin"),i.call(r.hide,[],r,"spin"),i.add(this.animateSpinIdle(t,o)),i.add(this.animateWin(t,o,s)),i},sna.presentation.roosterMobs.RoosterMobsBuyBonusContainer.prototype.animateSpinIdle=function(e,t){var i=new this.timeline;return i.call(e.gotoAndPlay,[t,!0],e,"idleStart"),i.set({},{},"+=2.85"),i},sna.presentation.roosterMobs.RoosterMobsBuyBonusContainer.prototype.animateSpinStop=function(e,t){var i=new this.timeline;return i.call(cardBackgroundSpine.setSkin,["random_"+skinPrefix],cardBackgroundSpine,"spinStop"),i.call(cardBackgroundSpine.gotoAndPlay,["spin_end_new"],cardBackgroundSpine,"spinStop"),i.set({},{},"+="+cardBackgroundSpine.getAnimationDuration("spin_end_new")),i},sna.presentation.roosterMobs.RoosterMobsBuyBonusContainer.prototype.animateWin=function(e,t,i){var n=new this.timeline,s=this.slot.freespins.numberOfScatters,r=t.replace("spin_win",""),o="win"+r,r="win_idle"+r,a=this.presentation.getById("freeSpinsText"),l=this.presentation.getById("upTOText"),h=this.presentation.getById("costText"),c=["#365364","#83A7BC","#365364","#365364","#83A7BC","#365364"],p=["#365364","#83A7BC","#365364"],u="#D7F4FF";return 3===s?l.setX(-10):4===s?(c=["#41650F","#69C030","#41650F","#41650F","#69C030","#41650F"],p=["#41650F","#69C030","#41650F"],u="#D2FFBD",l.setX(5)):5===s&&(c=["#852313","#C64B31","#852313","#852313","#C64B31","#852313"],p=["#852313","#C64B31","#852313"],u="#FFB6AD"),n.call(function(){l.setFillColor(c),l.setStroke(u),a.setFillColor(p),a.setStroke(u),h.setFillColor(p),h.setStroke(u)},[],this),n.call(e.gotoAndPlay,[o],e,"winStart"+e.getAnimationDuration(t)),n.call(e.gotoAndPlay,[r,!0],e,"winStart+="+e.getAnimationDuration(o)),n.call(this.sound.playSound,["BuyFeatureDialogAward"],this.sound),n.to(i,.3,{alpha:1},"winStart"),n.call(l.show,[],l,"winStart"),n.call(a.show,[],a,"winStart"),n},sna.service.roosterMobs.RoosterMobsInterface.prototype.isBetLimitReached=function(e){var t=this.scope.game.coinValue.toString();return"minus"==e?0==this.scope.game.coinValues.indexOf(t):"plus"==e?this.scope.game.coinValues.indexOf(t)==this.scope.game.coinValues.length-1:void 0},sna.service.roosterMobs.RoosterMobsInterface.prototype.updateBuyFeatureBet=function(e){var t=this.q.when(!0),i=e.scope.config.tag;return"minus"===i?t=t.then(this.setBet.bind(this,null,null,"prev")):"plus"===i&&(t=t.then(this.setBet.bind(this,null,null,"next"))),t=(t=t.then(this.updateBuyFeatureState.bind(this,e.parent))).then(this.updateWrapperButtonsState.bind(this,"DISABLED"))},sna.presentation.roosterMobs.RoosterMobsBuyBonusContainer.prototype.onBuyFeatureClosed=function(){var i=this.presentation.getById("randomText"),n=this.presentation.getById("freeSpinsText"),s=this.presentation.getById("upTOText"),r=this.presentation.getById("costText"),o=["#962A68","#CD598E","#962A68","#962A68","#CD598E","#962A68"];this.buttonClicked=!1,this.presentation.cancelAnimation("buyFeatureAfter"),this.buttons.forEach(function(e,t){e.children[2].enable(),3===t&&(this.iface.getElementsByTag(e,"currency")[0].setalpha(1),i.show(),n.hide(),s.hide(),r.setFillColor(o),r.setStroke("#FF82FF"),e.setscale(e.scope.config.scale),this.iface.getElementsByTag(e,"cardBackground")[0].children[0].setSkin("random"))},this),this.hide(),this.t&&(this.t.stop(),this.t.kill(),this.t=null)},sna.service.roosterMobs.RoosterMobsInterface.prototype.cardActive=function(e){return this.buyFeatureButtonClickedId===e.scope.config.id},sna.presentation.roosterMobs.RoosterMobsBuyBonusContainerFactory=function(e,t){return new sna.presentation.roosterMobs.RoosterMobsBuyBonusContainer(e,t)},sna.module.roosterMobs.controller(sna.presentation.roosterMobs.ROOSTER_MOBS_BUY_BONUS_CONTAINER,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.roosterMobs.RoosterMobsBuyBonusContainerFactory]),sna.presentation.tripleBellsProvider.TripleBellsSlotStopAnimation.prototype.animateSpinStop=function(c){var p=this.scope.parent,u=this.scope.parent.scope.config,d=new this.timelineFactory,m=0,f=0,g=!0,v=this.changeStopOrder(p.reels),y=0,e=this.iface.scope.game.winnings;return e&&e.length&&e.forEach(function(e){e.winPositions&&e.winPositions.length>y&&(y=e.winPositions.length)},this),angular.forEach(v,function(t,e){var i=t.animation("spinStop").animate(c),n=t.scope.model.spinification,s=t.scope.config.staxxGame;void 0!==p.scope.model.enabled&&!1===p.scope.model.enabled&&(n=!1);var r=this.presentation.parseValue(this,u.reelEndStagger)||u.reelStagger||0;r*=e,u.overrideStoppingSequence&&(r=this.overrideStopSequence(e)),u.spinificationRespinDelay&&this.scope.model.slot.customRespin&&this.scope.model.slot.wasRespinActive&&(r=u.spinificationRespinDelay[e]);var o,a,l,h=t.scope.model.spinificationType&&"regular"!=t.scope.model.spinificationType?u.customSpinificationStaggers:u.spinificationStaggers;s&&(h=this.iface.getSpinificationStaggerType(t,u)),n&&h&&this.presentation.parseValue(this,h[m])&&t.enabled&&!t.scope.model.disabled?(o=f,t.reelStopAnimation&&delete t.reelStopAnimation,n=0,this.iface.game.getParameterValue("spinParameters")&&this.iface.game.getParameterValue("spinParameters").graduallySlowSpinification&&(n=this.iface.game.getParameterValue("spinParameters").graduallySlowSpinification.symbols/5),g&&(g=!1,n=0,(l=this.startSpinification(t,m,u)).delay(r+o),d.add(l,0,!1,0)),s&&4==e&&y<e||(f+=this.presentation.parseValue(this,h[m])),(l=this.enableSpinification(t,m,u))&&!u.spinificationHoldDisabled&&(h=p.reels.filter(function(e){return e.scope.model.index<t.scope.model.index}),a=[],h.forEach(function(e){a.push(this.holdSpinification(e))}.bind(this)),l.add(a,0,!1,0)),l.delay(r+o+n),d.add(l,0,!1,0),l=this.disableSpinification(t,m,u),r+=f,l.delay(r),d.add(l,0,!1,0),t.scope.model.spinificationIndex=m,m++,u.delayBetweenSpinifications&&(f+=u.delayBetweenSpinifications)):this.stopDelays?r=this.stopDelays[e]:r+=s?0:f,t.scope.model.spinification?t.reelStopAnimation=i:v[e-1]&&v[e-1].scope.model.spinification&&(r+=3),i.delay(r),d.add(i,0,!1,0)},this),this.stopTimeline=d},sna.presentation.roosterMobs.ROOSTER_MOBS_WIN_PRESENTATION_ANIMATION="RoosterMobsWinPresentationAnimation",sna.presentation.roosterMobs.RoosterMobsWinPresentationAnimation=function(e,t){sna.presentation.tripleBellsProvider.TripleBellsWinPresentationAnimation.call(this,e,t),this.slot=this.iface.scope.game},sna.presentation.roosterMobs.RoosterMobsWinPresentationAnimation.prototype=Object.create(sna.presentation.tripleBellsProvider.TripleBellsWinPresentationAnimation.prototype),sna.presentation.roosterMobs.RoosterMobsWinPresentationAnimation.prototype.shouldAnimateWinSumTripleBells=sna.presentation.roosterMobs.RoosterMobsWinPresentationAnimation.prototype.shouldAnimateWinSum,sna.presentation.roosterMobs.RoosterMobsWinPresentationAnimation.prototype.shouldAnimateWinSum=function(){return this.shouldAnimateWinSumTripleBells()&&!this.slot.isRespinActive},sna.module.roosterMobs.controller(sna.presentation.roosterMobs.ROOSTER_MOBS_WIN_PRESENTATION_ANIMATION,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.roosterMobs.RoosterMobsWinPresentationAnimation]),sna.presentation.roosterMobs.ROOSTER_MOBS_WHEEL_CONTAINER="RoosterMobsWheelContainer",sna.presentation.roosterMobs.RoosterMobsWheelContainer=function(e,t){sna.presentation.Container.call(this,e,t.presentation),this.iface=t.iface,this.timeline=t.presentation.timeline,this.sound=t.sound,this.game=t.game,this.slotModel=t.game.scope.game,this.angleStep=36,this.lastPosition=0},sna.presentation.roosterMobs.RoosterMobsWheelContainer.prototype=Object.create(sna.presentation.Container.prototype),sna.presentation.roosterMobs.RoosterMobsWheelContainer.prototype.initPresentationContainer=sna.presentation.roosterMobs.RoosterMobsWheelContainer.prototype.initPresentation,sna.presentation.roosterMobs.RoosterMobsWheelContainer.prototype.initPresentation=function(){this.initPresentationContainer(),this.initWheelPresentation(),this.arrowCountup=null,this.animation("showWheel",{animate:this.animateShowWheel.bind(this)}),this.animation("finsihWheel",{animate:this.animateFinishWheel.bind(this)}),this.animation("returnToBaseGame",{animate:this.animateReturnToBaseGame.bind(this)}),this.animation("wheelGambleLost",{animate:this.animateWheelGambleLost.bind(this)}),this.animation("wheelGambleWon",{animate:this.animateWheelGambleWon.bind(this)}),this.animation("animateFsWheelStart",{animate:this.animateFsWheelStart.bind(this)}),this.animation("animateFsWheelEnd",{animate:this.animateFsWheelEnd.bind(this)})},sna.presentation.roosterMobs.RoosterMobsWheelContainer.prototype.animateShowWheel=function(e){this.iface.wrapperUserInterfaceStates("DISABLED");var t=new this.timeline;t.add("start");var i=this.presentation.getById("wheel"),n=this.presentation.getById("wheelButtons");return t.to(i,.5,{alpha:1},"start"),t.call(n.show,[],n,"start"),t.to([n],1,{alpha:1},"start"),t.call(i.children[0].show,[],i.children[0],"start"),t},sna.presentation.roosterMobs.RoosterMobsWheelContainer.prototype.animateFinishWheel=function(e){var t=this.presentation.getById("wheel"),i=this.presentation.getById("wheelDialogButtons");this.lastPosition=0;var n=new this.timeline;return n.add("start"),n.to(t,.75,{alpha:0},"start"),n.to(i,.75,{alpha:0},"start"),n.call(this.iface.setWrapperVisibility,[!0],this.iface),n},sna.presentation.roosterMobs.RoosterMobsWheelContainer.prototype.animateFsWheelStart=function(e){var t=this.iface.presentation.getById("spinningWheel"),i=t.angle,n=new this.timeline({onStart:function(){var e=this.presentation.getById("board"),t=this.presentation.getById("wheelTop"),i=new this.timeline;i.add("wheelStartSpinning"),i.call(this.sound.playSound,["GambleReelWheel",!0],this.sound,"wheelStartSpinning"),i.call(e.gotoAndPlay,["spin",!0],e,"wheelStartSpinning"),i.call(t.gotoAndPlay,["active_wheel",!0],t,"wheelStartSpinning")},onStartScope:this});return this.loop=new this.timeline({paused:!0}),this.loop.to(t,.9,{angle:"+=360",repeat:-1,ease:Linear.easeInOut,onUpdate:this.animateArrow.bind(this),onUpdateParams:[t]}),n.to(t,2.7,{angle:"+=360",ease:Back.easeIn.config(.4),onUpdate:this.animateArrow.bind(this),onUpdateParams:[t]}),n.set(t,{angle:i}),n.call(this.loop.resume,[],this.loop),n},sna.presentation.roosterMobs.RoosterMobsWheelContainer.prototype.setupPosiblePositions=function(){for(var e=[!0,!1,!0,!1,!0,!0,!0,!1,!0,!0],t=[],i=0,n=this.lastPosition;i<10;i++,n++)t.push(e[n]),9==n&&(n=0);return e},sna.presentation.roosterMobs.RoosterMobsWheelContainer.prototype.animateFsWheelEnd=function(e){for(var t=this.iface.wheelOutcome,i=this.presentation.getById("spinningWheel"),n=this.setupPosiblePositions(),s=[],r=0;r<n.length;r++)("won"==t&&!0===n[r]||"lost"==t&&!1===n[r])&&s.push(r);var o=s[Math.floor(Math.random()*s.length)],a=(this.lastPosition=o)*this.angleStep;a+=Math.round(20*Math.random())-10;var l=new this.timeline({onComplete:function(e,t){t.angle-=1080},onCompleteScope:this,onCompleteParams:[o,i]}),h=new this.timeline;h.add("start");o=1080+a,a=8.5+(a>i.angle?a:360+a-i.angle)/360;return h.call(this.loop.pause,[],this.loop,"start"),h.set(i,{angle:i.angle},"start"),h.to(i,a,{angle:o,ease:Back.easeOut.config(.4),onUpdate:this.animateArrow.bind(this),onUpdateParams:[i]},"start"),l.call(this.sound.stopSound,["GambleReelWheel"],this.sound),l.call(this.iface.setButtonsState,[["continueWheel","cancelWheel"],!1],this.iface),l.add(h,"start"),l},sna.presentation.roosterMobs.RoosterMobsWheelContainer.prototype.animateWheelGambleLost=function(e){var t=new this.timeline,i=this.presentation.getById("option12"),n=this.presentation.getById("option16"),s=this.slotModel.numOfSpins;return t.add("start"),8===s?t.call(i.gotoAndPlay,["active_12_2"],i):t.call(n.gotoAndPlay,["active_16_2"],n),t.add(this.animateFinishWheel(e),"start+=1"),t},sna.presentation.roosterMobs.RoosterMobsWheelContainer.prototype.animateReturnToBaseGame=function(e,t){var i=new this.timeline;return i.add("start"),i.add(this.animateMainGameComponentsShowHide(1,t)),i},sna.presentation.roosterMobs.RoosterMobsWheelContainer.prototype.animateMainGameComponentsShowHide=function(e,t){var i=this.presentation.getById("baseGameLayers"),n=(n=["BUY_FEATURE_BUTTON","BUY_FEATURE_DIALOG","COMPONENTS","REELS","LOGO"]).map(function(e){return i.getLayer(e)},this),s=new this.timeline;return s.add("start"),s.to(n,.3,{alpha:e},"start"),s.call(this.iface.setWrapperVisibility,[!!e],this.iface,"start+=0.15"),s},sna.presentation.roosterMobs.RoosterMobsWheelContainer.prototype.animateWheelGambleWon=function(e){var t=this.presentation.getById("fsIndicator"),i=this.slotModel.feature.spins,n=this.presentation.getById("option12"),s=this.presentation.getById("option16"),r=new this.timeline;return r.call(this.sound.playSound,["WheelWin"],this.sound),r.call(this.iface.setButtonsState,[["continueWheel","cancelWheel"],!1],this.iface),r.add("start"),r.call(this.sound.playSound,["WheelFlyToCounter"],this.sound),r.call(t.setSkin,[i],t),r.call(n.gotoAndPlay,["disable_12_1"],n),r.call(s.gotoAndPlay,["active_16_1"],s),r},sna.presentation.roosterMobs.RoosterMobsWheelContainer.prototype.stopSpineAnimations=function(){var e=new this.timeline,t=this.presentation.getById("arrow"),i=this.presentation.getById("board"),n=this.presentation.getById("wheelTop");e.add("wheelEndSpinning"),e.call(t.gotoAndPlay,["static"],t,"wheelEndSpinning"),e.call(i.gotoAndPlay,["static"],i,"wheelEndSpinning"),e.call(n.gotoAndPlay,["idle_wheel"],n,"wheelEndSpinning")},sna.presentation.roosterMobs.RoosterMobsWheelContainer.prototype.initWheelPresentation=function(){var e=this.presentation.getById("wheel"),t=this.presentation.createPresentation({type:"Container",id:"segmentContainer"},this,this.scope.model);this.createWheelSegments(t),e.addChild(t)},sna.presentation.roosterMobs.RoosterMobsWheelContainer.prototype.createWheelSegments=function(e,t){var i=this.scope.config.segment,i=this.presentation.createPresentation(i,e,this.scope.model);e.addChild(i)},sna.presentation.roosterMobs.RoosterMobsWheelContainer.prototype.animateArrow=function(e){var t=this.presentation.getById("arrow"),i=Math.floor(e.angle/this.angleStep),n=this.angleStep/2;e.angle<=i*this.angleStep+n+2&&e.angle>=i*this.angleStep+n-2&&i!=this.arrowCountup&&(t.gotoAndPlay("wheel_spinning"),this.sound.sounds.WheelPointer&&this.sound.playSound("WheelPointer"),this.arrowCountup=i)},sna.presentation.roosterMobs.RoosterMobsWheelContainerFactory=function(e,t){return new sna.presentation.roosterMobs.RoosterMobsWheelContainer(e,t)},sna.module.slot.controller(sna.presentation.roosterMobs.ROOSTER_MOBS_WHEEL_CONTAINER,[sna.service.SCOPE,sna.service.MAIN,sna.presentation.roosterMobs.RoosterMobsWheelContainerFactory]),bootstrapAngularGame();