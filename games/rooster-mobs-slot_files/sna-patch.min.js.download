(function(){"use strict";if(window.sna&&window.sna.service){let o=function(e){return JSON.parse(JSON.stringify(e))},l=function(e){if(e){window.sna.replayConfig=window.sna.replayConfig||{state:"start"};const t=window.sna.replayConfig;t.gameRoundId=e.gameRoundId,t.sessionId=e.gameSessionId,t.date=e.gameRoundDate,t.time=e.gameRoundTime,window.GcwGameClient.triggerEvent("UPDATE_MODEL",{general:{replayConfig:t}})}},p=function(){if(this.scope.game.playMode==="REPLAY"){this.stage.getLayer("REPLAY").alpha=0,window.sna.replayConfig=window.sna.replayConfig||{};const e=window.sna.replayConfig;this.getById("replayControls").children[this.getById("replayControls").children.length-1].children.forEach(t=>{t.scope.config.onPress==="startOrResumeReplay"&&(e.start=t.release.bind(t)),t.scope.config.onPress==="showPrevReplay"&&(e.previous=t.release.bind(t)),t.scope.config.onPress==="showNextReplay"&&(e.next=t.release.bind(t))}),window.GcwGameClient.triggerEvent("UPDATE_MODEL",{general:{replayConfig:e}})}};window.sna.service.tripleBellsProvider.TripleBellsGame.prototype.___setReplay=window.sna.service.tripleBellsProvider.TripleBellsGame.prototype.setReplay,window.sna.service.tripleBellsProvider.TripleBellsGame.prototype.setReplay=function(e){this.__setReplay(e),l(e)},window.sna.service.Presentation.prototype.___setup=window.sna.service.Presentation.prototype.setup,window.sna.service.Presentation.prototype.setup=function(){this.__setup(),p.call(this)},window.sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processWrapperStart=function(){window.GcwGameClient&&(this.previousButtonsState!==void 0&&(this.updateWrapperButtonsState(this.previousButtonsState),delete this.previousButtonsState),this.resumeGameExecution(!0,!0,!0),window.GcwGameClient.triggerEvent(window.gcw.api.GameEventType.START_SUCCESS))},window.sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processWrapperStop=function(){window.GcwGameClient&&(this.stopAutoplay&&this.scope.game.autoplay.active&&this.stopAutoplay(),this.pauseGameExecution(!0,!0,!0),this.previousButtonsState===void 0&&(this.previousButtonsState=this.wrapperButtonsState),this.updateWrapperButtonsState("DISABLED"),window.GcwGameClient.triggerEvent(window.gcw.api.GameEventType.STOP_SUCCESS))},window.sna.service.tripleBellsProvider.TripleBellsInterface.prototype._activateSuperStake=function(e,t,s){if(this.scope.game&&this.scope.game.freeRounds&&this.scope.game.freeRounds.left>0&&this.scope.game.freeRounds.accepted)return;e&&e.disable();const i=this.presentation.getById(this.getSpinButtonId());if(i.disable(),this.setSuperStakeModel(!0),this.additionalSuperStakeMethods(),this.handleSuperStakeActivationPresentations(!0),this.autoUpdatePresentation(),this.toggleSuperStakePromise=this.saveSuperStakeState(!0),this.triggerEvent("betChanged"),this.presentation.createAnimationTimeline("animateLogoSuperStake",0,!1,!0,null),s)return this.presentation.createAnimationTimeline("setSuperStakeUserInterface",0,!1,!0,null),this.q.when(!0).then(this.handleAfterSuperStakeActivation.bind(this,i,s,!0));{this.presentation.cancelAnimation("resetSuperStakeUserInterface"),this.presentation.createAnimationTimeline("setSuperStakeUserInterface",0,!1,!0,null);const r=this.q.when(!0);let a;return window.sna.service.tripleBellsProvider.playModes.REPLAY!=this.scope.game.playMode&&this.game.getParameterValue("updateBetConfigurationOnSuperStake")&&!this.spinInProgress?a=this.communication.updateBetConfiguration(this.getSpinRequestParams()):a=this.q.when(!0),this.q.all([r,a,this.toggleSuperStakePromise]).then((function(){this.scope.game.totalWin&&this.stopWinIndividualAnimation()}).bind(this)).then(this.handleAfterSuperStakeActivation.bind(this,i,s,!0))}},window.sna.service.tripleBellsProvider.TripleBellsInterface.prototype._deactivateSuperStake=function(e,t){const s=this.presentation.getById(this.getSpinButtonId());s.disable(),this.isInReplay()||this.setSuperStakeModel(!1),this.additionalSuperStakeMethods(),this.handleSuperStakeActivationPresentations(!1),this.autoUpdatePresentation(),e&&e.disable(),this.toggleSuperStakePromise=this.toggleSuperStakePromise=this.saveSuperStakeState(!1),this.triggerEvent("betChanged"),this.presentation.cancelAnimation("setSuperStakeUserInterface"),this.presentation.cancelAnimation("superStakeActivated"),this.presentation.createAnimationTimeline("resetSuperStakeUserInterface",0,!1,!0,null);const n=this.q.when(!0);let i;return this.game.getParameterValue("updateBetConfigurationOnSuperStake")&&!this.spinInProgress?i=this.communication.updateBetConfiguration(this.getSpinRequestParams()):i=this.q.when(!0),this.q.all([n,i,this.toggleSuperStakePromise]).then((function(){this.scope.game.totalWin&&this.stopWinIndividualAnimation()}).bind(this)).then(this.handleAfterSuperStakeActivation.bind(this,s,!1,!1))},window.sna.service.tripleBellsProvider.TripleBellsInterface.prototype.processSuperWheelRoundStarting=function(e){e&&this.game.getParameterValue("customSuperWheelDialogs")&&(e.enabled=!0,e.showRules!==void 0&&(e.showRules=!1),e.introMessage=this.getSuperWheelIntroMessage(),e.outroMessageCallback=this.getSuperWheelOutroMessage.bind(this))},window.sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.__handleGameRoundReplay=window.sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.handleGameRoundReplay,window.sna.service.tripleBellsProvider.TripleBellsCommunicationService.prototype.handleGameRoundReplay=function(e,t,s){var n=s.replay;if(n.gameRound&&n.gameRound.automaticSteps)for(var i=0;i<n.gameRound.automaticSteps.length;i++){var r=n.gameRound.automaticSteps[i],a=o(n.gameRound.commLog[n.gameRound.commLog.length-1]);a.response.date=r.date,a.response.game&&(a.response.game.events=r.events.slice(),a.response.game.numberOfNonAnimatedEvents=r.events.length),n.gameRound.commLog.push(a)}return this.__handleGameRoundReplay(e,t,s)}}})();
//# sourceMappingURL=sna-patch.min.js.map
